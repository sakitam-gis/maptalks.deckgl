{"version":3,"sources":["webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/maptalks/dist/maptalks.es.js"],"names":["GEOMETRY_COLLECTION_TYPES","GEOJSON_TYPES","concat","RESOURCE_PROPERTIES","RESOURCE_SIZE_PROPERTIES","NUMERICAL_PROPERTIES","COLOR_PROPERTIES","now","Date","extend","dest","i","arguments","length","src","k","isNil","obj","isNumber","val","isNaN","isInteger","n","isObject","isString","constructor","String","isFunction","Function","hasOwnProperty","Object","prototype","hasOwn","key","call","pi","Math","PI","toRadian","d","toDegree","r","requestAnimFrame","cancelAnimFrame","IS_NODE","toString","process","versions","isSVG","url","slice","loadImage","img","imgDesc","node","fn","setTimeout","clearTimeout","requestFn","cancelFn","timeoutDefer","getPrefixed","name","window","id","uid","UID","parseJSON","str","JSON","parse","pushIn","ii","ll","push","removeFromArray","array","indexOf","splice","forEachCoord","arr","context","Array","isArray","p","pp","result","len","getValueOrDefault","v","undefined","sign","x","Number","log2","log","LOG2E","rounded","round","abs","interpolate","a","b","t","wrap","min","max","clamp","isArrayHasData","cssUrlReWithQuote","cssUrlRe","isCssUrl","test","extractCssUrl","exec","btoa","input","block","charCode","output","idx","map","charAt","charCodeAt","Error","b64toBlob","b64Data","contentType","byteCharacters","atob","arraybuffer","ArrayBuffer","view","Uint8Array","Blob","type","computeDegree","x0","y0","x1","y1","dx","dy","atan2","emptyImageUrl","equalMapView","obj1","obj2","approx","expected","delta","flash","interval","count","cb","me","this","_flashTimeout","flashGeo","show","hide","types","createFilter","filter","compile","op","compileComparisonOp","compileLogicalOp","compileNegation","compileInOp","compileHasOp","compilePropertyReference","property","substring","stringify","value","checkType","left","right","expressions","join","values","sort","compare","expression","getFilterFeature","geometry","json","_toJSON","g","compileStyle","styles","compiled","extend$1","evaluateCategoricalFunction","parameters","stops","default","evaluateIntervalFunction","evaluateExponentialFunction","base","interpolate$1","inputLower","inputUpper","outputLower","outputUpper","evaluatedLower","apply","evaluatedUpper","interpolateNumber","interpolateArray","evaluateIdentityFunction","c","ratio","difference","progress","pow","isFunctionDefinition","hasFunctionDefinition","interpolated","createFunction1","loadFunctionTypes","argFn","hit","loaded","multResult","props","buildFn","defineProperty","get","set","configurable","enumerable","_i","getFunctionTypeResources","res","l","defaultType","isZoomConstant","isFeatureConstant","_fn","createFunction","fun","innerFun","zoomAndFeatureDependent","featureDependent","zoomDependent","featureFunctions","featureFunctionStops","s","stop","zoom","z","feature","translateToSVGStyles","getMarkerPathBase64","symbol","width","height","svgStyles","_p","path","pathes","pathesToRender","svg","strPath","_p2","getExternalResources","toAbsolute","symbols","resSizeProp","w","h","resources","convertResourceUrl","iii","_iii","_convertUrl","isGradient","getGradientStamp","keys","lowerSymbolOpacity","_symbol","_ratio","lower","extendSymbol","sources","args","parseStyleRootPath","style","root","iconset","convertStylePath","match","replacer","parseSymbolPath","URL_PATTERN","replace","parseStops","defaultValue","Browser","ua","navigator","userAgent","toLowerCase","doc","document","documentElement","ie","webkit","phantomjs","android23","search","chrome","gecko","opera","mobile","orientation","msPointer","PointerEvent","MSPointerEvent","pointer","pointerEnabled","ie3d","webkit3d","WebKitCSSMatrix","gecko3d","opera12","any3d","chromeVersion","webgl","touch","DocumentTouch","canvas","createElement","gl","getContext","WebGLRenderingContext","err","devicePixelRatio","screen","deviceXDPI","logicalXDPI","ielt9","addEventListener","edge","android","safari","mobileWebkit","mobileWebkit3d","mobileOpera","mobileGecko","retina","language","browserLanguage","ie9","documentMode","ie10","Browser$1","_inheritsLoose","subClass","superClass","create","__proto__","_assertThisInitialized","self","ReferenceError","Position","y","_isNaN","_proto","_abs","_round","_ceil","ceil","distanceTo","point","sqrt","_floor","floor","copy","_add","add","nx","ny","_sub","_substract","sub","substract","multi","_multi","div","_div","equals","isZero","toArray","toFixed","toJSON","Point","_Position","closeTo","mag","unit","_unit","perp","_perp","angleWith","angleWithSep","_rotate","angle","cos","sin","rotate","Size","size","toPoint","trim","specialPattern","escapeSpecialChars","splitWords","chr","split","rulerCtx","stringWidth","text","font","measureText","stringLength","splitContent","content","wrapWidth","textWidth","chrWidth","minChrCount","testStr","prew","contentExpRe","replaceVariable","getAlignPoint","horizontalAlignment","verticalAlignment","getFont","splitTextToRow","lineSpacing","textHeight","wrapChar","textRows","actualWidth","texts","tWidth","contents","_contents","_w","rowNum","testProp","TRANSFORM","TRANSFORMORIGIN","TRANSITION","createEl","tagName","className","el","setClass","createElOn","container","setStyle","appendChild","removeDomNode","innerHTML","parentNode","removeChild","addDomEvent","typeArr","handler","eventHandler","e","event","listensDomEvent","removeDomEvent","callback","capture","passive","doRemove","removeEventListener","handlers","j","jlen","preventDefault","returnValue","stopPropagation","cancelBubble","preventSelection","dom","onselectstart","ondragstart","setAttribute","offsetDom","offset","setTransform","top","computeDomPosition","getComputedStyle","padding","parseInt","rect","getBoundingClientRect","offsetWidth","offsetHeight","scaleX","scaleY","__position","getEventContainerPoint","ev","domPos","clientX","clientLeft","clientY","clientTop","strCss","suffix","cssText","hasClass","classList","contains","getClass","RegExp","addClass","classes","baseVal","pos","isHTML","measureDom","parentTag","ruler","getDomRuler","clientWidth","clientHeight","tag","span","body","on","off","Ajax","jsonp","script","data","getElementsByTagName","options","client","_getClient","open","headers","setRequestHeader","withCredentials","credentials","responseType","send","post","postData","_t","_wrapCallback","readyState","status","response","byteLength","cacheControl","getResponseHeader","expires","responseText","statusText","XMLHttpRequest","ActiveXObject","onreadystatechange","getArrayBuffer","getImage","imgData","onerror","URL","webkitURL","onload","revokeObjectURL","blob","createObjectURL","resp","hitTesting","TEMP_CANVAS","RADIAN","Canvas","setHitTesting","testing","createCanvas","canvasClass","prepareCanvasFont","ctx","textBaseline","fill","fillStyle","getRgba","prepareCanvas","strokeWidth","lineWidth","strokePattern","strokeColor","strokeStyle","patternOffset","_setStrokePattern","_createGradient","lineJoin","lineCap","setLineDash","polygonPattern","fillImgUrl","extractImageUrl","fillTexture","Image","image","createPattern","console","warn","extent","gradient","places","getMin","getMax","getWidth","getHeight","getCenter","createRadialGradient","createLinearGradient","forEach","addColorStop","linePatternOffset","imageTexture","imgUrl","imageRes","patternCanvas","addResource","clearRect","x2","y2","_drawn","fillCanvas","fillOpacity","alpha","isPattern","_isPattern","globalAlpha","translate","color","drawImage","error","_text","pt","textDesc","_textOnMultiRow","splitTextSize","textSize","rowAlign","ptAlign","lineHeight","basePoint","maxHeight","_textOnLine","textHaloRadius","textHaloFill","textHaloAlpha","gco","drawHalo","shadowBlur","shadowOffsetX","shadowOffsetY","miterLimit","strokeText","globalCompositeOperation","fillText","rgba","_stroke","strokeOpacity","stroke","_path","points","lineDashArray","lineOpacity","ignoreStrokePattern","nextPoint","isDashed","isPatternLine","lineTo","fillWithPattern","beginPath","moveTo","drawDashLine","p1","p2","degree","save","cosd","restore","_multiClip","polygon","smoothness","isMultiClip","fillFirst","savedCtx","copyProperties","_ring","paintSmoothLine","closePath","ring","ignorePattern","smoothValue","close","tailIdx","tailRatio","preCtrlPoints","x3","y3","ctrlPoints","getCubicControlPoints","bezierCurveTo","lastPoint","prevCtrlPoint","nextCtrlPoint","xc1","yc1","xc2","yc2","xc3","yc3","len1","len2","k1","k2","xm1","ym1","xm2","ym2","ctrl1X","ctrl1Y","ctrl2X","ctrl2Y","t0","t1","bx1","by1","bx2","by2","u0","u1","qxb","qxd","qyb","qyd","interpolate$$1","_arcBetween","dist","p1p2","asin","da","cx","cy","startAngle","endAngle","arc","_lineTo","bezierCurveAndFill","start","_bezierCurveTo","p3","ellipse","heightTop","heightBottom","b1","ox","oy","oy1","rectangle","sector","angles","rad","radius","sDeg","eDeg","drawCross","target","startPoint","endPoint","dashArray","fromX","fromY","toX","toY","pattern","lt","gt","capmin","capmax","checkX","thereYet","cap","checkY","ang","offsetX","offsetY","dash","lineDashOffset","shadowColor","commonjsGlobal","global","createCommonjsModule","module","exports","zousanMin","resolve","reject","o","f","MutationObserver","observe","attributes","setImmediate","state","TypeError","then","u","suppressUncaughtRejectionError","stack","timeout","all","define","amd","Zousan","soon","Promise$1","Promise","Eventable","Base","_Base","_class","eventsOn","_switch","_eventMap","evtType","handlerChain","eventTypes","once","_wrapOnceHandler","evetTypes","eventsOff","eventType","listeners","wrapKey","jl","listener","listens","getListeningEvents","copyEventListeners","eventMap","fire","_eventParent","_fire","called","onceHandler","to","eventKeys","_clearListeners","_clearAllListeners","_setEventParent","parent","_setEventTarget","_eventTarget","param","passed","queue","Handler$1","Handler","enable","_enabled","addHooks","disable","removeHooks","enabled","remove","Class","setOptions","callInitHooks","proto","getPrototypeOf","_visitInitHooks","config","conf","onConfig","_initHooksCalled","parentProto","hooks","_initHooks","addInitHook","_len","_key","init","include","mergeOptions","registeredTypes","JSONAble","registerJSONType","getJSONClass","getJSONType","_jsonType","clazz","Handlerable","addHandler","handlerClass","_handlers","removeHandler","_clearHandlers","MOVE_EVENTS","mousedown","touchstart","pointerdown","MSPointerDown","END_EVENTS","DragHandler","_Handler","_this","_onMouseDown","onMouseDown","_offEvents","button","touches","setCapture","captureEvents","MOUSEMOVE","MOUSEUP","moved","actual","startPos","onMouseMove","onMouseUp","interupted","changedTouches","Coordinate","toNumberArrays","coordinates","coord","toCoordinates","child","CRS","properties","createProj4","proj","fromProjectionCode","code","toUpperCase","WGS84","EPSG4326","EPSG3857","IDENTITY","CGCS2000","EPSG4490","BD09LL","GCJ02","TEMP_EXTENT","TEMP_POINT0","TEMP_COORD0","TEMP_COORD1","TEMP_COORD2","TEMP_COORD3","TEMP_COORD4","TEMP_COORD5","TEMP_COORD6","TEMP_COORD7","MINMAX","TEMP_COMBINE","Extent","p4","_clazz","unproject","projection","_dirty","_initialize","xmin","xmax","ymin","ymax","_scale","out","isValid","ext2","intersects","_project","rxmin","rymin","rxmax","rymax","within","pxmin","pxmax","pymin","pymax","project","getSize","__combine","_combine","ext","combine","intersection","expand","distance","_expand","convertTo","minmax","projectCoords","tmp","PointExtent","_Extent","Transformation","matrix","transform","scale","untransform","Common","isSphere","coords","wrapX","wrapY","current","circum","getCircum","getSphereExtent","sx","sy","pre","prj","unprojectCoords","projCoords","sphere","isOutSphere","pcoord","wrapCoord","wrapped","Common$1","measureLength","c1","c2","measureLenBetween","Identity","measureArea","area","locate","xDist","yDist","_locate","pivot","Sphere","ry","rx","finalAngle","end","bear360","final","calculateRhumbBearing","rhumbBearing","origin","bearing","lambda1","phi1","theta","DeltaPhi","phi2","DeltaPsi","tan","q","DeltaLambda","lambda2","calculateRhumbDestination","from","deltaLambda","deltaPsi","WGS84Sphere","BaiduSphere","DEFAULT","measurers","registerMeasurer","m","measure","_lastCode","Measurer","getInstance","mName","metersPerDegree","maxLatitude","lnglat","lng","lat","pLnglat","atan","exp","PROJ4326","Projection_EPSG4490","Projection_Baidu","convertLL2MC","convertMC2LL","EARTHRADIUS","MCBAND","LLBAND","MC2LL","LL2MC","cB","cE","cD","convertor","T","cC","getLoop","getRange","toRadians","toDegrees","Infinity","Projection_IDENTITY","DEFAULT$1","projections","freeze","BAIDU","Renderable","registerRenderer","_rendererClasses","getRendererClass","CanvasRenderer","_Class","layer","_painted","_drawTime","setToRedraw","render","framestamp","prepareRender","getMap","isVisible","ResourceCache","checkAndDraw","_tryToDraw","drawFn","_this2","checkResources","_loadingResource","loadResources","testIfNeedRedraw","_toRedraw","isInteracting","drawOnInteracting","needToRedraw","getRenderer","isViewChanged","getPitch","isMoving","isZooming","isRotating","onSkipDrawOnInteracting","isLoadingResource","isRenderComplete","_renderComplete","mustRenderOnInteracting","setCanvasUpdated","_canvasUpdated","isCanvasUpdated","onRemove","southWest","canvasExtent2D","_extent2D","onAdd","getCanvasImage","_renderZoom","getZoom","isBlank","isEmpty","containerPoint","_pointToContainerPoint","clear","clearCanvas","setZIndex","hitDetect","_errorThrown","getDevicePixelRatio","getImageData","resourceUrls","promises","cache","isResourceLoaded","_promiseResource","_get2DExtent","_containerPointToPoint","_canvas","CanvasClass","onCanvasCreate","createContext","dpr","resetCanvasTransform","resizeCanvas","canvasSize","_maskExtent","mask","getMask","maskExtent2D","_getMaskPainter","get2DExtent","clipCanvas","old","getGeometries","masks","_mask","paint","clip","getViewExtent","completeRender","getEvents","onZoomStart","onZooming","onZoomEnd","onResize","onMoveStart","onMoving","onMoveEnd","onDragRotateStart","onDragRotating","onDragRotateEnd","onSpatialReferenceChange","getDrawTime","_drawAndRecord","painted","draw","getId","crossOrigin","_cacheResource","onabort","markErrorResource","_errors","_proto2","checkSVG","_getImgUrl","merge","clipLine","bounds","noCut","segment","parts","clipSegment","useLastCode","codeOut","newCode","codeA","_getBitCode","codeB","_getEdgeIntersection","clipPolygon","clippedPoints","edges","_code","withInEllipse","center","southeast","tolerance","f1","f2","Symbolizer","getPainter","painter","isDynamicSize","testColor","prop","CanvasSymbolizer","_Symbolizer","_prepareContext","isHitTesting","_defineStyle","a0","a1","set$1","getProperties","setProp","getBearing","bind","TEMP_POINT0$1","TEMP_POINT1","PointSymbolizer","_CanvasSymbolizer","glZoom","getGLZoom","renderPoints","_getRenderPoints","_pointToPoint","_rotateExtent","fixedExtent","placement","isSpriting","getPlacement","getRenderPoints","_getRenderContainerPoints","ignoreAltitude","dxdy","getDxDy","cpoints","_pointContainerPoints","flat","_getRotationAt","getRotation","rotations","p0","isTransforming","maxZoom","rotation","VectorMarkerSymbolizer","_PointSymbolizer","_dynamic","strokeAndFill","translateLineAndFill","symbolize","cookedPoints","getLayer","_drawMarkers","_drawMarkersWithCache","_drawVectorMarker","stamp","_stampSymbol","_createMarkerImage","anchor","_getAnchor","_calMarkerSize","_size","shadow","_getCacheImageAnchor","_stamp","margin","markerType","_getGraidentExtent","getFixedExtent","gradientExtent","vectorArray","_getVectorPoints","hLineWidth","_j","_j2","_lineCap","alignPoint","ha","va","v0","v1","v2","v3","hh","hw","extWidth","DebugSymbolizer","outline","getContainerExtent","cross","ImageMarkerSymbolizer","_getImage","imgURL","removeCache","_url","TEMP_COORD0$1","TEMP_COORD1$1","StrokeAndFillSymbolizer","paintParams","_getPaintParams","isGradient$$1","isPath","params","_paintOn","_params","_getPrjExtent","_extMin","_extMax","_prjToPoint","_pxExtent","getPaintParams","lineColor","grad","CACHE_KEY","TextMarkerSymbolizer","textContent","_cacheKey","genCacheKey","_descText","alignW","alignH","_measureText","_loadFromCache","_storeToCache","active","desc","testCanvas","VectorPathMarkerSymbolizer","_ImageMarkerSymbolize","renderer","defaultSymbol","polygonFill","polygonOpacity","DrawAltitudeSymbolizer","_getStyle","groundPoints","_drawLineAltitude","groundPoint","_drawMarkerAltitude","_drawLine","registerSymbolizers","TEMP_POINT0$2","TEMP_PAINT_EXTENT","TEMP_EXTENT$1","TEMP_FIXED_EXTENT","TEMP_CLIP_EXTENT0","TEMP_CLIP_EXTENT1","Painter","symbolizers","_createSymbolizers","_altAtGLZoom","_getGeometryAltitude","geoSymbol","getSymbol","regSymbolizers","symbolizer","_hasPoint","getType","_debugSymbolizer","hasPoint","_renderPoints","getResolution","pitched","rotated","_cachedParams","paintAsPath","_paintAsPath","_unsimpledParams","_res","_pitched","_redrawWhenPitch","_rotated","_redrawWhenRotate","_simplified","zoomScale","getGLScale","tr","mapExtent","cPoints","_hitPoint","disableClip","pointPlacement","_aboveCamera","containerOffset","pointContainerPoint","alt","altitude","getAltitude","clipped","clipPoints","_clip","cring","cc","extent2D","cameraLookAt","cameraPosition","glExtent2D","_glScale","getShell","getHoles","part","_interpolateSegAlt","clipSegs","orig","segsWithAlt","interpolateAlt","index","w0","w1","cp","_getInternalSymbol","_getRenderer","minAltitude","getMinAltitude","frustumAlt","getFrustumAltitude","_beforePaint","contexts","_prepareShadow","_afterPaint","getSprite","_spriting","_sprite","markerExtent","bak","hitTest","_eachSymbolizer","_verifyProjection","_isDynamicSize","_zoom","_fixedExtent","_computeExtent2D","_computeFixedExtent","_this$_fixedExtent","glScale","maxAltitude","getMaxAltitude","extent2","groundExtent","change","isCanvasRender","repaint","refreshSymbol","_removeSymbolizers","_paintParams","_propAlt","MAX_VALUE","MIN_VALUE","_meterToPoint","distanceToPoint","_getProjection","_projCode","textcache","TEMP_EXTENT$2","CollectionPainter","isMask","_eachPainter","geometries","_getPainter","first","DefaultSpatialReference","resolutions","SpatialReference","_initSpatialRef","getProjectionInstance","prjName","sp1","sp2","fullExtent","bottom","r1","r2","_projection","defaultSpatialRef","isEPSG","_resolutions","_fullExtent","_transformation","getResolutions","getProjection","getFullExtent","getTransformation","getMinZoom","getMaxZoom","getZoomDirection","Geometry","_JSONAble","opts","setSymbol","setProperties","setId","getFirstCoordinate","getCoordinates","getLastCoordinate","addTo","fitview","addGeometry","_layer","_id","oldId","_fireEvent","_getParent","_repaint","_prepareSymbol","onSymbolChanged","updateSymbol","_getSymbol","_eventSymbolProperties","_computeCenter","_getMeasurer","getExtent","prjExt","_computeExtent","containsPoint","coordToContainerPoint","_containsPoint","_hitTestTolerance","onHide","getZIndex","zIndex","setZIndexSilently","bringToFront","getGeoMaxZIndex","topZ","bringToBack","getGeoMinZIndex","bottomZ","translated","setCoordinates","ret","fromJSON","_unbind","toGeoJSONGeometry","_exportGeoJSONGeometry","toGeoJSON","geoJSON","_exportProperties","_exportGraphicOptions","getLength","_computeGeodesicLength","getArea","_computeGeodesicArea","measurer","_getConnectPoints","_initOptions","_bindLayer","_clearCache","cookedSymbols","_checkAndCopySymbol","_setExternSymbol","_externSymbol","_extent","_computePrjExtent","_animPlayer","finish","_unbindMenu","_unbindInfoWindow","isEditing","endEdit","_removePainter","onRemoveGeometry","_internalId","_getInternalId","_setInternalId","_clearProjection","_getExternalResources","_painter","getCollectionPainterClass","getPainterClass","_maskPainter","_paint","closeMenu","closeInfoWindow","onShapeChanged","onPositionChanged","needRepaint","prefix","_setParent","_parent","eventName","_onGeometryEvent","_infoWinOptions","geoProperties","layerOpts","layerAltitude","options$1","Layer","setMask","load","onLoad","_initRenderer","_renderer","onLoadEnd","addLayer","_zIndex","_sortLayersByZIndex","minZoom","getOpacity","setOpacity","layers","_getLayerList","topLayer","bottomLayer","_this3","removeLayer","_isVectorMarker","removeMask","isLoaded","_loaded","onRendererCreate","_bindMap","_switchEvents","_doRemove","emitter","_layers","_getMask2DExtent","_onLayerEvent","COORD0","COORD1","POINT","POINT0","POINT1","COORD","options$2","Map$1","_Handlerable","Map","baseLayer","VERSION","writable","_initContainer","_panels","_baseLayer","_zoomLevel","_center","setSpatialReference","setMaxExtent","_mapViewPoint","_updateMapSize","_getContainerDomSize","setBaseLayer","_Load","addOnLoadHook","_onLoadHooks","getContainer","_containerDOM","getSpatialReference","_spatialReference","ref","oldRef","_updateSpatialReference","_resetMapStatus","setCursor","cursor","_cursor","_trySetCursor","resetCursor","_prjCenter","setCenter","pcenter","_verifyExtent","_setPrjCenter","_parseEventFromCoord","visualHeight","pitch","maxVisualPitch","_getVisualHeight","visualPitch","fov","getFov","cameraToCenter","cameraCenterDistance","tanB","visualDistance","_pointToExtent","getProjExtent","_pointToPrj","getPrjExtent","getMaxExtent","maxExt","_getPrjCenter","_panTo","_prjMaxExtent","getZoomForScale","fromZoom","isFraction","targetRes","_getResolution","scaleZoom","getZoomFromRes","_getResolutions","minRes","maxRes","gap","setZoom","_zoomAnimation","getMaxNativeZoom","setMaxZoom","viewMaxZoom","setMinZoom","viewMinZoom","zoomIn","zoomOut","_zooming","setCenterAndZoom","animation","getFitZoom","containerExtent","getView","setView","setPitch","setBearing","getScale","fitExtent","zoomOffset","step","_animateTo","getBaseLayer","isChange","removeBaseLayer","getLayers","_getLayers","_layerCache","mapLayers","removed","_removeLayer","setLayerCanvasUpdated","sortLayers","layersToOrder","minZ","_l","toDataURL","mimeType","file","dataURL","dlLink","download","href","click","coordToPoint","coordinate","coordinateToPoint","pointToCoord","pointToCoordinate","coordToViewPoint","coordinateToViewPoint","viewPointToCoord","viewPoint","viewPointToCoordinate","coordinateToContainerPoint","containerPointToCoord","containerPointToCoordinate","containerPointToViewPoint","getViewPoint","viewPointToContainerPoint","checkSize","justStart","_initTime","watched","oldHeight","oldWidth","vh","nwCP","nwCoord","_containerPointToPrj","vhAfter","nwCPAfter","_setPrjCoordAtContainerPoint","_mapViewCoord","hided","_eventSilence","getMainPanel","getPanels","isRemoved","_removeDomEvents","childNodes","_moving","prjCenter","_originCenter","_parseEvent","_dragRotating","isDragRotating","getElementById","_priorityCursor","_setCursorToPanel","_setPriorityCursor","hasCursor","panel","layerList","_order","_loadAllLayers","_callOnLoadHooks","_eachLayer","layerLists","_calcMatrices","resetContainer","containerDOM","mSize","updateMapSize","_offsetCenterByPixel","pixel","pCenter","offsetPlatform","_getViewPointFrameOffset","panelOffset","_resetMapViewPoint","_mapRes","_mapGlRes","pCoord","_pointToPointAtZoom","prjCoord","_prjToViewPoint","_viewPointToPrj","pCoordinate","_prjToContainerPoint","containerToExtent","distanceToPixel","paramCenter","pixelToDistance","fullExt","pointToDistance","locateByPoint","px","py","cached","_this4","_mapExtent2D","_mapGlExtent2D","min2d","max2d","_ref","minx","maxx","_ref2","miny","maxy","_viewPointToPoint","_pointToViewPoint","MapDoubleClickZoomHandler","_onDoubleClick","oldZoom","MapDragHandler","mapWrapper","_dragHandler","_cancelOn","_onDragStart","_onDragging","_onDragEnd","domEvent","_ignore","_ignoreEvent","startDragTime","_mode","ctrlKey","_stopAnim","_mapAnimPlayer","_moveStart","_rotateStart","_isEventOutMap","_rotating","_moveEnd","_rotateEnd","startBearing","_start","preX","preY","startX","startY","_getActualEvent","startPrjCoord","mx","my","_clear","panBy","_rotateMode","_db","prePitch","preBearing","db","_bearing","EVENTS","MapGeometryEventsHandler","allLayers","_identifyGeometryEvents","identify","oneMoreEvent","_mouseDownTime","downTime","geometryCursorStyle","identifyOptions","eventToFire","_getEventTypeToFire","propagation","geoMap","geo","iid","_onEvent","_prevOverGeos","geomap","oldTargets","geos","oldTarget","oldTargetId","_i2","_queryIdentifyTimeout","callInNextFrame","MapScrollWheelZoomHandler","_thisScrollZoom","_scrollZoom","_wheelZoomRate","_defaultZoomRate","_delta","_onWheelScroll","evt","_checkZoomOrigin","_trackPadSuspect","_ensureTrackpad","_seamless","_interval","deltaMode","WheelEvent","DOM_DELTA_LINE","deltaY","shiftKey","_lastWheelEvent","_zoomOrigin","_active","zoomRate","targetZoom","_timeout","_requesting","levelValue","wheelDelta","detail","nextZoom","_checkZoom","_origin","_startZoom","frame","playState","MapTouchZoomHandler","_onTouchStart","_startP1","_startP2","_startDist","_startVector","_startBearing","_onTouchMove","_onTouchEnd","d1","d2","vector","mode","_startTouching","_Origin","KEY","Easing","in","inAndOut","linear","upAndDown","Frame","Player","onFrame","_animation","_onFrame","ready","finished","Animation","speed","_resolveStyles","resolveChild","_styles","resolveVal","childStyles","framing","dStyles","startStyles","destStyles","easing","elapsed","duration","deltaStyles","_startStyles","_dStyles","children","_requestAnimFrame","_frameQueue","_a","_animationFrameId","_frameFn","_run","running","animate","_prepare","_framer","play","currentTime","startTime","_playStartTime","pause","cancel","reverse","_frame","simplify","getSqSegDist","simplifyDouglasPeucker","sqTolerance","last","simplified","simplifyDPStep","maxSqDist","sqDist","highestQuality","prevPoint","newPoints","simplifyRadialDist","Path","_Geometry","getOutline","Polygon","animateShow","_showPlayer","_animIdx","_animLenSoFar","animCoords","prjAnimCoords","_prjAniShowCenter","_aniShowCenter","player","currentCoord","_drawAnimShowFrame","_animTailRatio","_coordinates","prjCoords","targetLength","segLen","lastCoord","targetCoord","isPolygon","_setPrjCoordinates","_animCoords","_prjAnimCoords","_getCenterInExtent","clipFn","meExtent","sumx","sumy","counter","_getPath2DPoints","disableSimplify","isSimplify","_shouldSimplify","isMulti","hasAltitude","prjPoints","_prjCoords","_getPrjCoordinates","_projectCoords","_updateCache","_unprojectCoords","shell","rings","hasHoles","_coords2Extent","_getPrjHoles","_get2DLength","vertexes","_Path","_holes","_projectRings","_trimRing","holes","_copyAndCloseRing","getCenterInExtent","_prjHoles","_cleanRing","_checkRing","isClose","_getPrjShell","_prjShell","CenterMixin","_getCenter2DPoint","_pcenter","Marker","_CenterMixin","_canEdit","computeExtent","_getSprite","LineString","GeometryCollection","setGeometries","_geometries","_checkGeometries","_bindGeometriesToLayer","selected","isFn","is","_checkGeo","invalidGeoError","sumX","sumY","computeExtent$1","startEdit","_originalSymbol","_draggbleBeforeEdit","_editing","geoExtent","MultiGeometry","_GeometryCollection","geoType","GeometryType","_initData","MultiPoint","_MultiGeometry","findClosest","MultiPath","MultiLineString","_MultiPath","MultiPolygon","types$1","GeoJSON","toGeometry","foreachFn","resultGeos","_convert","features","_result2","mGeos","_result","Circle","_radius","circle","getRadius","setRadius","numberOfPoints","vertex","se","_getMinMax","pminmax","leftx","rightx","topy","bottomy","Ellipse","setWidth","setHeight","deg","pps","longer","Rectangle","_Polygon","_width","_height","nw","fExt","_pnw","pnw","sphereExtent","_getSouthEast","prjs","Sector","_Circle","getStartAngle","setStartAngle","getEndAngle","setEndAngle","pc","sAngle","eAngle","between","Curve","_LineString","_arc","ctrlPoint","_quadraticCurve","quadraticCurveTo","_bezierCurve","_getCurveArrowPoints","arrows","segments","arrowStyle","arrow","_getArrowShape","_arrow","ArcCurve","_Curve","_paintArrow","CubicBezierCurve","curve","_getArrowPoints","QuadBezierCurve","defaultSymbol$1","defaultBoxSymbol","TextMarker","_Marker","getContent","_content","setContent","_refresh","_refreshing","_parseSymbol","setTextStyle","getTextStyle","setTextSymbol","setBoxStyle","_style","getBoxStyle","setBoxSymbol","_getTextSize","_getDefaultTextSymbol","_getDefaultBoxSymbol","_getDefaultPadding","TextBox","_TextMarker","boxSymbol","textStyle","getBoxSymbol","textBox","maxWidth","hAlign","vAlign","Label","textSymbol","boxStyle","getTextSymbol","label","sizes","_getBoxSize","boxSize","textAlignPoint","Connectable","_hasConnectors","__connectors","_getConnectors","getConnectSource","_connSource","setConnectSource","_connTarget","getConnectTarget","setConnectTarget","_updateCoordinates","_registerEvents","srcPoints","targetPoints","minDist","oldCoordinates","computeLength","_showConnect","trigger","options$d","showOn","ConnectorLine","_Connectable","ArcConnectorLine","_Connectable2","OverlayLayer","_Layer","_maxZIndex","_minZIndex","_initCache","getGeometryById","_geoMap","_geoList","getFirstGeometry","getLastGeometry","getCount","copyOnWrite","fitView","_toSort","onGeometryAdd","animateTo","zoomAnimationDuration","_updateZIndex","geoId","internalId","onAddGeometry","_cookedStyles","_styleGeometry","removeGeometry","_clearing","onGeometryRemove","_findInList","getStyle","removeStyle","_sortGeometries","_compare","middle","low","high","_onGeometryIdChange","_onGeometryZIndexChange","_onGeometryPositionChange","_onGeometryShapeChange","_onGeometrySymbolChange","_onGeometryShow","_onGeometryHide","_onGeometryPropertiesChange","onGeometryZIndexChange","onGeometryPositionChange","onGeometryShapeChange","onGeometrySymbolChange","onGeometryShow","onGeometryHide","onGeometryPropertiesChange","TEMP_EXTENT$3","options$f","VectorLayer","_OverlayLayer","_hitGeos","hits","_getArrowStyle","profile","clipExtent","geoJSONs","geoExt","MapTool","_Eventable","_map","onEnable","onDisable","isEnabled","events","registeredMode","DrawTool","_MapTool","_checkMode","_events","_clickHandler","_mouseMoveHandler","_doubleClickHandler","_mouseDownHandler","_mouseUpHandler","registerMode","modeAction","getRegisterMode","getMode","setMode","_geometry","_clearStage","_restoreMapCfg","_saveMapCfg","getCurrentGeometry","_drawToolLayer","_getDrawLayer","_loadResources","_mapAutoPanAtEdge","autoPanAtEdge","endDraw","undo","_getRegisterMode","action","_shouldRecordHistory","_historyPointer","_clickCoords","update","redo","actions","_mapDoubleClickZoom","_mapDraggable","_createGeometry","drawTool","_addGeometryToStage","_getMouseContainerPoint","_isValidContainerPoint","clickCoords","_ending","mapSize","drawLayerId","INTERNAL_LAYER_PREFIX","drawToolLayer","MapBoxZoomHander","_boxZoom","markerWidth","markerHeight","MapAutoPanAtEdgeHandler","_onMouseMove","currView","empty","_from","_to","_isInternalAnimation","_prevAnimPlayer","zoomOrigin","_interupted","_endAnim","_startAnim","isAnimating","_animRotating","endCoord","_endCoord","_resumePrev","prevPlayer","perspective","fovy","aspect","near","far","nf","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","multiply","a30","a31","a32","a33","b0","b2","b3","invert","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","identity","set$2","subtract","normalize","ax","ay","az","bx","by","bz","hypot","applyMatrix","_registerDomEvents","_handleDOMEvent","mimicClick","_fireDOMEvent","_clickTime","control","preTarget","srcElement","eventPos","eventParam","isFullScreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement","fullscreenElement","requestFullScreen","_requestFullScreen","cancelFullScreen","_cancelFullScreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullScreen","availWidth","availHeight","location","opener","exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","panTo","_panAnimation","setInfoWindow","layerJSON","layerType","extraLayerOptions","layersJSON","exportOption","_opts","layerJSONs","coord1","coord2","computeGeometryLength","computeGeometryArea","reqLayers","layerHits","_frameZoom","startScale","_startZoomAnim","endScale","_startZoomVal","_startZoomCoord","_zoomTo","originOffset","startZoomVal","m0","m1","coord0","vectorFromCam","RADIAN$1","TEMP_COORD","createMat4","_fov","setFov","_renderLayers","_angle","_pitch","_frustumAltitude","_calcFrustumAltitude","cameraAlt","_projIfBehindCamera","cameraForward","projViewMatrix","w2","h2","centerPoint","position","cameraPos","camForward","camNormDot","dot","scale$1","projViewMatrixInverse","z0","z1","_x","_y","scale$$1","worldMatrix","_getCameraWorldMatrix","farZ","_getCameraFar","cameraFar","cameraNear","projMatrix","viewMatrix","_calcCascadeMatrixes","domCssMatrix","_calcDomMatrix","tanFov","cal","curPitch","cascadePitch0","cascadePitch1","projViewMatrix0","cascadeFrustumMatrix0","projViewMatrix1","cascadeFrustumMatrix1","minusY","cameraToCenterDistance","rotateX","rotateZ","targetZ","center2D","_getFovRatio","cz","up","cameraUp","cameraWorldMatrix","te","eye","lookAt","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","matrixToQuaternion","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","quaternionToMatrix","_onViewChange","_viewHistory","_viewHistoryPointer","_getCurrentView","_fireViewChange","zoomToPreviousView","hasPreviousView","_zoomToView","zoomToNextView","hasNextView","getViewHistory","DistanceTool","_DrawTool","_afterEnable","_afterDisable","_measureLayers","_lastMeasure","_lastVertex","getMeasureLayers","getLastMeasure","_vertexes","marker","_measureMarkerLayer","_measure","toMeasure","units","_registerMeasureEvents","_msOnDrawStart","_msOnDrawVertex","_msOnMouseMove","_msOnDrawEnd","layerId","markerLayerId","_measureLineLayer","startLabel","_addVertexMarker","ms","_msGetCoordsToMeasure","_tailMarker","_tailLabel","vertexLabel","_clearTailMarker","_addClearMarker","dxSymbol","endMarker","measureLineLayer","measureMarkerLayer","_DistanceTool","AreaTool","vertexMarker","endLabel","circleHooks","prjPath","nextCoord","ellipseHooks","rectangleHooks","_firstClick","firstClick","polygonHooks","line","pSymbol","lineStringHooks","arcConf","tileInfo","tileSize","lods","tileSystem","strReplace","repArray","rep","template","parseTileMatrixSet","TileMatrixSets","tset","TileMatrixSet","TileMatrixs","supportedCRS","transformValue","isArcgis","minLevel","_index","TileMatrix","level","ScaleDenominator","TopLeftCorner","TileWidth","TileHeight","_TopLeftCorner$split$","parseFloat","loadArcgis","getJSON","spatialRef","loadWMTS","xml","requestUrl","DOMParser","parseFromString","querySelectorAll","nodeName","layerName","resourceURL","_parseTileMatrixSet","substr","lastIndexOf","urlTemplate","spatialReference","info","parseWMTSXML","UIComponent","owner","_owner","_mapEventsOn","_switchMapEvents","_coordinate","visible","_getUIContainer","_removePrevDOM","__uiDOM","buildOn","_measureSize","_singleton","_uiDomKey","_setPosition","anim","_getAnimation","ok","fade","opacity","getTransformOrigin","_toCSSTranslate","_pos","display","_autoPan","transition","getDOM","getOwner","getPosition","_getViewPoint","getOffset","animations","trimed","mapWidth","mapHeight","onDomRemove","eventsToStop","_getClassName","_getDefaultEvents","ownerEvents","_getOwnerEvents","onEvent","positionchange","getOwnerEvents","_updatePosition","isSupport","domEvents","UIMarker","_markerCoord","_registerDOMEvents","_removeDOMEvents","isDragging","_onDomEvents","EVENTS$1","UIMarkerDragHandler","_startDrag","_endDrag","_lastCoord","_lastPoint","_prepareDragHandler","_dragging","_isDragging","coordOffset","pointOffset","InfoWindow","_UIComponent","getInfoWindow","removeInfoWindow","_infoWindow","setTitle","title","getTitle","_dom","_getWindowWidth","msgContent","querySelector","_onCloseBtnClick","markerSize","fixExtent","_onAutoOpen","_rectifyMouseCoordinte","mouseCoordinate","_rectifyLineStringMouseCoordinate","lineString","dis","pts","mousePt","minDis","coordinateIndex","filterPts","xys","_this$getMap$getSize","pt1","pt2","minPtDis","ptIndex","_len2","_pt","_dis","ToolTip","onMouseOut","cssName","containerClass","onMouseOver","Menu","_menu","removeMenu","setItems","items","getItems","_getMenuWidth","menuItems","_createMenuItemDom","ul","item","itemDOM","onMenuClick","_callback","itemTitle","Menuable","setMenu","_menuOptions","_defaultOpenMenu","openMenu","_bindMenu","setMenuItems","getMenuItems","Control","controlContainer","__ctrlContainer","_controlDom","_parse","setPosition","getContainerPoint","positions","addControl","removeControl","layerEvents","Attribution","_Control","_attributionContainer","_update","attributions","attributionControl","LayerSwitcher","_show","_hide","_createPanel","toElement","relatedTarget","elm","baseLayers","li","_isExcluded","_renderLayer","_li","_ul","_label","excludeLayers","isBase","checked","onchange","layerSwitcherControl","Overview","mapContainer","_createOverview","_updateBaseLayer","_onButtonClick","_updateButtonText","_overview","_perspective","maxmize","minimize","getOverviewMap","_getOverviewZoom","_getPerspectiveCoords","showIndex","overviewControl","Panel","closeButton","onclick","panelContent","draggable","_startPos","_startPosition","startPosition","Scale","_scaleContainer","_addScales","css","_mScale","_iScale","maxMeters","_updateScales","_updateMetric","_updateImperial","meters","_getRoundNum","_updateScale","maxMiles","miles","feet","maxFeet","num","pow10","scaleControl","Toolbar","onButtonClick","childIndex","targetDom","_getItems","textAlign","itemSize","dropMenu","_createDropMenu","menuDom","menuUL","liWidth","Zoom","levelDOM","_levelDOM","zoomDOM","zoomInButton","_zoomInButton","box","reading","_sliderBox","_sliderRuler","_sliderReading","_sliderDot","zoomOutButton","_zoomOutButton","_onZoomInClick","_onZoomOutClick","_onClickRuler","dotDragger","totalRange","zoomRange","_updateText","_onDotDragstart","_onDotDrag","zoomControl","TileSystem","getDefault","semiCircum","TileConfig","prepareTileInfo","_xScale","_yScale","_pointOrigin","_glRes","transformation","_getTileNum","tileX","tileY","getTileIndex","repeatWorld","tileIndex","getNeighorTileIndex","idy","_getTileFullIndex","_tileFullIndex","nwIndex","seIndex","getTilePrjNW","getTilePointNW","getTilePrjSE","getTilePointSE","getTilePrjExtent","planes","intersectsBox","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","plane","distance$1","isSetAvailable","Set","TileHashset","_table","has","reset","options$u","URL_PATTERN$1","TEMP_POINT","TEMP_POINT0$3","TEMP_POINT1$1","TEMP_POINT2","TEMP_POINT3","TEMP_POINT4","TEMP_POINT5","TEMP_POINT6","TILE_BOX","ARR3","TileLayer","getTileSize","getTiles","parentLayer","parentRenderer","tileGrids","visualHeight1","tileZoom","_getTileZoom","_visitedTiles","_coordCache","_currentTiles","_getTiles","tiles","visualHeight0","extent0","currentTiles","cascadeTiles1","cascadeTiles2","cascadeHeight","cascadeLevels","extent1","getTileUrl","domain","subdomains","_sr","_srMinZoom","_srMaxZoom","cascadeLevel","frustumMatrix","_getTileOffset","hasOffset","emptyGrid","tileConfig","_getTileConfig","sr","mapSR","extent2d","maskExtent","pmin","pmax","centerTile","ltTile","rbTile","allCount","leftVisitEnd","rightVisitEnd","tileId","_getTileId","isTileCachedOrLoading","point0","_hasOwnSR","_unproject","pse","tileExtent","_isTileInExtent","_splitTiles","tileIdx","yOrder","corner","corner0","tile","_checkAndAddTile","childExtent","_isSplittedTileInExtent","mapProjection","_initTileConfig","_defaultTileConfig","_tileConfig","tileCenter","transformMat4","_onSpatialReferenceChange","_TileLayer","GroupTileLayer","_checkChildren","layerMap","_groupChildren","childGrid","getChildLayer","_onLayerShowHide","ids","options$v","crs","uppercase","detectRetina","defaultWmsParams","service","request","format","transparent","version","WMSTileLayer","wmsParams","_wmsVersion","projectionKey","bbox","existingUrl","encodeURIComponent","getParamString","CanvasTileLayer","drawTile","compileShader","source","shader","createShader","shaderSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","shaders","arr16","DEBUG_POINT","ImageGLRenderable","renderable","drawGLImage","debug","program","useProgram","loadTexture","uMatrix","uniformMatrix4fv","uniform1f","glBuffer","saveImageBuffer","bindBuffer","ARRAY_BUFFER","bufferTileData","enableVertexAttrib","drawArrays","TRIANGLE_STRIP","drawDebug","attrib","debugInfo","_debugBuffer","bufferData","Float32Array","DYNAMIC_DRAW","LINE_STRIP","_debugInfoCanvas","_ctx","texImage2D","TEXTURE_2D","RGBA","UNSIGNED_BYTE","set8","buffer","set8Int","loadImageBuffer","Int16Array","drawTinImage","vertices","texCoords","indices","posBuffer","texBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","drawElements","TRIANGLES","UNSIGNED_SHORT","createCanvas2","canvas2","createGLContext","names","clearColor","DEPTH_TEST","STENCIL_TEST","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","createProgram","createBuffer","STATIC_DRAW","enableSampler","activeTexture","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","resizeGLCanvas","viewport","clearGLCanvas","COLOR_BUFFER_BIT","STENCIL_BUFFER_BIT","disposeImage","texture","saveTexture","_createTexture","getTexture","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","generateMipmap","_textures","textures","pop","getImageBuffer","_imageBuffers","imageBuffers","createImageBuffer","removeGLCanvas","deleteBuffer","_buffers","deleteTexture","fragmentShader","vertexShader","deleteProgram","FSIZE","BYTES_PER_ELEMENT","STRIDE","attr","getAttribLocation","vertexAttribPointer","enableVertexAttribArray","_attr","vert","frag","uniforms","_createProgram2","VERTEX_SHADER","FRAGMENT_SHADER","attachShader","linkProgram","_initUniforms","sampler","texIdx","uSampler","_getUniform","uniform1i","uniform","uniformName","getUniformLocation","a2","a3","a4","a5","a6","a7","options$w","TEMP_POINT$1","ImageLayer","images","_images","_prepareImages","setImages","getImages","_imageData","refreshImages","EMPTY_ARRAY","ImageLayerCanvasRenderer","_CanvasRenderer","isDrawable","_imageLoaded","urls","unloaded","retireImage","_drawImages","_drawImage","ImageLayerGLRenderer","_ImageGLRenderable","_proto3","CanvasLayerRenderer","getPrepareParams","getDrawParams","prepareDrawContext","_drawLayer","_drawLayerOnInteracting","canvasImg","bufferContext","prevent","doubleBuffer","_drawContext","_predrawed","ensureParams","prepareToDraw","_prepareDrawParams","CanvasLayer","redraw","isPlaying","requestMapToRender","TEMP_POINT$2","ParticleLayer","_CanvasLayer","getParticles","fillRect","_fillCanvas","_shouldClear","trail","_CanvasLayerRenderer","createHandleSymbol","options$z","GeometryEditor","prepare","_prepareEditStageLayer","stageId","shadowId","_editStageLayer","_shadowLayer","editing","_geometryDraggble","_shadow","_switchGeometryEvents","_createOrRefreshOutline","_addListener","_onMarkerDragEnd","_createCenterHandle","createMarkerEditor","createCircleEditor","createEllipseOrRectEditor","createPolygonEditor","_history","_editOutline","_refreshHooks","_getGeometryEvents","_onGeoSymbolChange","_exeAndReset","oper","_addRefreshHook","handle","createHandle","onDown","onMove","onUp","_createHandleInstance","onHandleDragstart","onHandleDragging","_hideContext","onHandleDragEnd","onHandleRemove","onRefresh","_createResizeHandles","blackList","onHandleMove","onHandleUp","cursors","axis","resizeHandles","anchorIndexes","handleSymbol","fnLocateHandles","pExt","anchors","_loop","some","ele","handleViewPoint","_updating","_this5","geometryToEdit","_recordHistory","getUpdates","aspectRatio","resizeAbilities","newCoordinates","_updateCoordFromShadow","mirrorHandle","viewCenter","wh","ability","updates","_this6","wline","hline","_this7","isRect","mouseViewPoint","pointSub","targetPoint","mirror","mirrorViewPoint","absSub","firstMirrorCoordinate","mirrorCoordinate","_mouseCoordinate","_wline","_hline","verticeLimit","propertyOfVertexIndex","vertexHandles","0","newVertexHandles","getVertexCoordinates","ringIndex","getVertexPrjCoordinates","onVertexAddOrRemove","removeVertex","nextIndex","_ringIndex","prjCoordinates","createNewVertexHandle","moveVertexHandle","vertice","nVertex","pVertex","createVertexHandle","nextVertex","vertexCoordinates","vertexIndex","refreshVertex","_ringIndex2","_i3","_ringIndex3","_i4","_eventListeners","method","_exeHistory","ignoreRecord","updating","_len3","_key2","lastOperation","record","history","_this8","TextEditable","startEditText","endEditText","_prepareEditor","_textEditor","html","innerText","_editUIMarker","onkeyup","isEditingText","getTextEditor","editContainer","_createEditor","_getEditorOffset","_setCursorToLast","labelSize","textColor","spacing","editor","contentEditable","keyCode","range","getSelection","focus","selectAllChildren","collapseToEnd","selection","createRange","moveToElementText","collapse","select","preTranslate","stylesToAnimate","_prepareAnimationStyles","isFocusing","_animationStarted","fnName","toTranslate","dSymbol","_fireAnimateEvent","symbolToAnimate","symbolInStyles","sp","_sp","EVENTS$2","GeometryDragHandler","_prepareDragStageLayer","shadows","_updateShadowSymbol","_prepareShadowConnectors","_dragStageLayer","shadowConnectors","connectors","targetConn","connOptions","connSymbol","conn","_shadowConnectors","_onTargetUpdated","enableAltitude","altitudeProperty","_correctCoord","_startParam","_moved","_updateTargetAndRemoveShadow","_editor","redoEdit","undoEdit","cancelEdit","_getEventParams","_bindInfoWindow","openInfoWindow","LRUCache","order","removedData","getAndRemove","setMaxSize","TEMP_POINT$3","TEMP_POINT1$2","TEMP_POINT2$1","TileLayerCanvasRenderer","tilesInView","tilesLoading","_parentTiles","_childTiles","tileCache","deleteTile","getCurrentTileZoom","_tileZoom","mask2DExtent","loadingCount","loading","checkedTiles","parentTiles","parentKeys","childTiles","childKeys","placeholders","placeholderKeys","tileQueue","preLoadingCount","_markTiles","loadingLimit","_getLoadLimit","_tileOffset","tileGrid","allTiles","placeholder","_generatePlaceHolder","tileLoading","_isLoadingTile","_getCachedTile","getTileOpacity","parentTile","_findParentTile","parentId","_findChildTiles","_drawTiles","loadTileQueue","_retireTiles","t2","onDrawTileStart","_drawTileAndCache","_drawTileOffset","writeZoomStencil","started","resumeZoomStencilTest","startZoomStencilTest","pauseZoomStencilTest","endZoomStencilTest","onDrawTileEnd","_clipByPitch","tileImage","loadTile","loadTime","onTileLoad","onTileError","loadTileImage","abortTileLoading","falseFn","_addTileToCache","onerrorTick","transformed","_point","getDebugInfo","xyz","_getLayerOfTile","_findChildTilesAt","childZoom","dmin","dmax","ex","ey","zoomDiff","diff","_tilesLoading$tileId","_tilePlaceHolder","force","_tile","cw","ch","defaultPlaceholder","TileLayerGLRenderer","_gl","_bindGLBuffer","stencilFunc","ALWAYS","stencilOp","KEEP","REPLACE","EQUAL","_loadTile","tileCanvas","CanvasRenderer$1","_TileLayerCanvasRende","GLRenderer","_TileLayerGLRenderer","OverlayLayerRenderer","_geosToCheck","_resourceChecked","_addGeoToCheckRes","TEMP_EXTENT$4","VectorLayerRenderer","_OverlayLayerCanvasRe","drawGeos","_geosToDraw","_updateDisplayExtent","_drawnRes","forEachGeo","checkGeo","_displayExtent","MapRenderer","_handlerQueue","executeFrameCallbacks","front","panels","hasFront","_frontCount","back","layerDOM","childElementCount","hasBack","_backCount","hasUI","_uiCount","uiDOM","domChanged","frontCount","backCount","uiCount","_frameLoop","MapCanvasRenderer","_MapRenderer","_containerIsCanvas","_thisVisibilitychange","_onVisibilitychange","_loopTime","initContainer","renderFrame","_isViewChanged","updateMapDOM","_getAllLayerToRender","drawLayers","drawLayerCanvas","_drawCenterCross","_recordView","_mapview","_getMapView","_spatialRefChanged","_fireLayerLoadEvents","canvasIds","updatedIds","fps","timeLimit","layerLimit","isCanvas","needsRedraw","_checkLayerRedraw","transformMatrix","__zoomTransformMatrix","_drawCanvasLayerOnInteracting","_eventParam","_zoomMatrix","preCanvasIds","_canvasIds","preUpdatedIds","_updatedIds","isLayerCanvasUpdated","isSpatialReferenceChanged","drawTime","inTime","_updateCanvasSize","baseLayerImage","interacting","limit","layerImage","_getLayerImage","_drawLayerCanvasImage","_drawFog","_resizeInterval","clearInterval","_cancelFrameLoop","createContainer","enableSelect","POSITION0","mapAllLayers","backStatic","backLayer","canvasContainer","frontStatic","frontLayer","ui","previous","_animationFrame","canvasImage","imgOp","_drawContainerExtent","cascadePitches","h30","h60","landscape","_checkSize","_setCheckSizeInterval","_checkSizeInterval","setInterval","_onMapMouseMove","_hitDetectFrame","_getCanvasLayers","visibilityState","index$6","CanvasTileLayerCanvasRenderer","CanvasTileLayerGLRenderer","OverlayLayerCanvasRenderer","VectorLayerCanvasRenderer","CenterPointRenderer","PolyRenderer","_l2","_ii","_ll","_l3","_coords","_l4","_getRenderSize","prjExtent","pointZoom","arrowStyles","prePoint","normal","prjVertexes","dasharray","_getArrowPlacement","_getArrows","isSplitted","prjHoles","holePoints","hole"],"mappings":"4FAAA,0KASIA,EAA4B,CAAC,aAAc,kBAAmB,eAAgB,sBAC9EC,EAAgB,CAAC,oBAAqB,UAAW,QAAS,aAAc,WAAWC,OAAOF,GAC1FG,EAAsB,CAAC,aAAc,qBAAsB,kBAAmB,wBAAyB,yBACvGC,EAA2B,CAAC,CAAC,cAAe,gBAAiB,GAAI,CAAC,KAAM,aAAc,GAAI,CAAC,KAAM,oBACjGC,EAAuB,CACzB,UAAa,EACb,YAAe,EACf,OAAU,EACV,OAAU,EACV,eAAkB,EAClB,YAAe,EACf,aAAgB,EAChB,SAAY,EACZ,SAAY,EACZ,cAAiB,EACjB,kBAAqB,EACrB,gBAAmB,EACnB,kBAAqB,EACrB,SAAY,EACZ,YAAe,EACf,eAAkB,EAClB,cAAiB,EACjB,gBAAmB,EACnB,OAAU,EACV,OAAU,GAERC,EAAmB,CAAC,YAAa,cAAe,aAAc,kBAAmB,YAGrF,SAASC,IACP,OAAOC,KAAKD,MAGd,SAASE,EAAOC,GACd,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAMF,UAAUD,GAEpB,IAAK,IAAII,KAAKD,EACZJ,EAAKK,GAAKD,EAAIC,GAIlB,OAAOL,EAGT,SAASM,EAAMC,GACb,OAAc,MAAPA,EAGT,SAASC,EAASC,GAChB,MAAsB,iBAARA,IAAqBC,MAAMD,GAG3C,SAASE,EAAUC,GACjB,OAAY,EAAJA,KAAWA,EAGrB,SAASC,EAASN,GAChB,MAAsB,iBAARA,KAAsBA,EAGtC,SAASO,EAASP,GAChB,OAAID,EAAMC,KAIY,iBAARA,GAAwC,OAApBA,EAAIQ,aAAwBR,EAAIQ,cAAgBC,QAGpF,SAASC,EAAWV,GAClB,OAAID,EAAMC,KAIY,mBAARA,GAA0C,OAApBA,EAAIQ,aAAwBR,EAAIQ,cAAgBG,UAGtF,IAAIC,EAAiBC,OAAOC,UAAUF,eAEtC,SAASG,EAAOf,EAAKgB,GACnB,OAAOJ,EAAeK,KAAKjB,EAAKgB,GAqBlC,IAAIE,EAAKC,KAAKC,GAAK,IAEnB,SAASC,EAASC,GAChB,OAAOA,EAAIJ,EAGb,SAASK,EAASC,GAChB,OAAOA,EAAIN,EAGb,IACIO,EAAkBC,EADlBC,EAA2F,qBAAjFd,OAAOC,UAAUc,SAASX,UAAwB,IAAZY,EAA0BA,EAAU,KAA8BA,EAAQC,SAAmB,WAAMD,EAAQC,SAAa,KAAMD,EAAQC,SAAS,eA8CnM,SAASC,EAAMC,GAGb,OAAIA,EAAIpC,OAAS,GAAuB,SAAlBoC,EAAIC,OAAO,GACxB,EAHI,uBAIFD,EAAIC,MAAM,EAJR,qBAIkBrC,QACtB,EAGF,EAGT,SAASsC,EAAUC,EAAKC,GAClBT,GAAWO,EAAUG,KACvBH,EAAUG,KAAKF,EAAKC,GAItBD,EAAItC,IAAMuC,EAAQ,IA7DpB,WACE,GAAIT,EAMF,OALAF,EAAmB,SAA0Ba,GAC3C,OAAOC,WAAWD,EAAI,UAGxBZ,EAAkBc,cAIpB,IAAIC,EAAWC,EAGf,SAASC,EAAaL,GACpB,OAAOC,WAAWD,EAHH,IAAO,IAMxB,SAASM,EAAYC,GACnB,OAAOC,OAAO,SAAWD,IAASC,OAAO,MAAQD,IAASC,OAAO,KAAOD,GAGrD,oBAAVC,QACTL,EAAYK,OAA8B,uBAAKF,EAAY,0BAA4BD,EAEvFD,EAAWI,OAA6B,sBAAKF,EAAY,yBAA2BA,EAAY,gCAAkC,SAAUG,GAC1ID,OAAON,aAAaO,MAGtBN,EAAYE,EACZD,EAAWF,cAGbf,EAAmB,SAA0Ba,GAC3C,OAAOG,EAAUH,IAGnBZ,EAAkB,SAAyBqB,GACrCA,GACFL,EAASK,IAtCf,GAgEA,IAAIC,EAAM,EAEV,SAASC,IACP,OAAOD,IAKT,SAASE,EAAUC,GACjB,OAAKA,GAAQ5C,EAAS4C,GAIfC,KAAKC,MAAMF,GAHTA,EAMX,SAASG,EAAO7D,GACd,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAMF,UAAUD,GAEpB,GAAIG,EACF,IAAK,IAAI0D,EAAK,EAAGC,EAAK3D,EAAID,OAAQ2D,EAAKC,EAAID,IACzC9D,EAAKgE,KAAK5D,EAAI0D,IAKpB,OAAO9D,EAAKG,OAGd,SAAS8D,EAAgB1D,EAAK2D,GAC5B,IAAIjE,EAAIiE,EAAMC,QAAQ5D,GAElBN,GAAK,GACPiE,EAAME,OAAOnE,EAAG,GAIpB,SAASoE,EAAaC,EAAKzB,EAAI0B,GAC7B,IAAKC,MAAMC,QAAQH,GACjB,OAAOC,EAAU1B,EAAGrB,KAAK+C,EAASD,GAAOzB,EAAGyB,GAM9C,IAHA,IACII,EAAGC,EADHC,EAAS,GAGJ3E,EAAI,EAAG4E,EAAMP,EAAInE,OAAQF,EAAI4E,EAAK5E,IAGrCK,EAFJoE,EAAIJ,EAAIrE,IAGN2E,EAAOZ,KAAK,MAIVQ,MAAMC,QAAQC,GAChBE,EAAOZ,KAAKK,EAAaK,EAAG7B,EAAI0B,KAEhCI,EAAKJ,EAAU1B,EAAGrB,KAAK+C,EAASG,GAAK7B,EAAG6B,GACxCE,EAAOZ,KAAKW,IAIhB,OAAOC,EAGT,SAASE,EAAkBC,EAAGlD,GAC5B,YAAamD,IAAND,EAAkBlD,EAAIkD,EAG/B,SAASE,EAAKC,GACZ,OAAIxD,KAAKuD,KACAvD,KAAKuD,KAAKC,GAKT,KAFVA,GAAKA,IAEUxE,MAAMwE,GACZC,OAAOD,GAGTA,EAAI,EAAI,GAAK,EAGtB,SAASE,EAAKF,GACZ,GAAIxD,KAAK0D,KACP,OAAO1D,KAAK0D,KAAKF,GAGnB,IAAIH,EAAIrD,KAAK2D,IAAIH,GAAKxD,KAAK4D,MACvBC,EAAU7D,KAAK8D,MAAMT,GAEzB,OAAIrD,KAAK+D,IAAIF,EAAUR,GAAK,MACnBQ,EAEAR,EAIX,SAASW,EAAYC,EAAGC,EAAGC,GACzB,OAAOF,GAAK,EAAIE,GAAKD,EAAIC,EAG3B,SAASC,EAAKlF,EAAGmF,EAAKC,GACpB,GAAIpF,IAAMoF,GAAOpF,IAAMmF,EACrB,OAAOnF,EAGT,IAAIiB,EAAImE,EAAMD,EAEd,QADUnF,EAAImF,GAAOlE,EAAIA,GAAKA,EAAIkE,EAIpC,SAASE,EAAMrF,EAAGmF,EAAKC,GACrB,OAAOtE,KAAKqE,IAAIC,EAAKtE,KAAKsE,IAAID,EAAKnF,IAGrC,SAASsF,EAAe3F,GACtB,OAAOiE,MAAMC,QAAQlE,IAAQA,EAAIJ,OAAS,EAS5C,IAAIgG,EAAoB,yBACpBC,EAAW,2BAEf,SAASC,EAAS3C,GAChB,OAAK5C,EAAS4C,GAIV0C,EAASE,KAAK5C,GACT,EAGLyC,EAAkBG,KAAK5C,GAClB,EAGF,EAXE,EAcX,SAAS6C,EAAc7C,GACrB,IAAI4C,EAAOD,EAAS3C,GAGpB,OAAa,IAAT4C,EACK5C,EACW,IAAT4C,EACCF,EAASI,KAAK9C,GACT,GACG,IAAT4C,EACCH,EAAkBK,KAAK9C,GAClB,GAERA,EAMX,SAAS+C,EAAKC,GACZ,GAAsB,oBAAXrD,QAA0BA,OAAOoD,KAC1C,OAAOpD,OAAOoD,KAAKC,GAMrB,IAHA,IAGSC,EAAOC,EAHZlD,EAAM1C,OAAO0F,GACbG,EAAS,GAEaC,EAAM,EAAGC,EAVvB,oEAUsCrD,EAAIsD,OAAa,EAANF,KAAaC,EAAM,IAAKD,EAAM,GAAID,GAAUE,EAAIC,OAAO,GAAKL,GAAS,EAAIG,EAAM,EAAI,GAAI,CAGlJ,IAFAF,EAAWlD,EAAIuD,WAAWH,GAAO,EAAI,IAEtB,IACb,MAAM,IAAII,MAAM,4FAGlBP,EAAQA,GAAS,EAAIC,EAGvB,OAAOC,EAGT,SAASM,EAAUC,EAASC,GAK1B,IAJA,IAAIC,EAAiBC,KAAKH,GACtBI,EAAc,IAAIC,YAAYH,EAAenH,QAC7CuH,EAAO,IAAIC,WAAWH,GAEjBvH,EAAI,EAAGA,EAAIqH,EAAenH,OAAQF,IACzCyH,EAAKzH,GAAoC,IAA/BqH,EAAeL,WAAWhH,GAMtC,OAHW,IAAI2H,KAAK,CAACJ,GAAc,CACjCK,KAAMR,IAKV,SAASS,EAAcC,EAAIC,EAAIC,EAAIC,GACjC,IAAIC,EAAKF,EAAKF,EACVK,EAAKF,EAAKF,EACd,OAAOtG,KAAK2G,MAAMD,EAAID,GAGxB,IAAIG,EAAgB,iFAEpB,SAASC,EAAaC,EAAMC,GAC1B,IAAKD,IAASC,EACZ,OAAO,EACF,IAAKD,IAASC,EACnB,OAAO,EAGT,IAAK,IAAI/D,KAAK8D,EACZ,GAAU,WAAN9D,GACF,IAAK+D,EAAK/D,KAAOgE,EAAOF,EAAK9D,GAAG,GAAI+D,EAAK/D,GAAG,MAAQgE,EAAOF,EAAK9D,GAAG,GAAI+D,EAAK/D,GAAG,IAC7E,OAAO,OAEJ,GAAI8D,EAAK9D,KAAO+D,EAAK/D,GAC1B,OAAO,EAIX,OAAO,EAGT,SAASgE,EAAOjI,EAAKkI,EAAUC,GAK7B,OAJa,MAATA,IACFA,EAAQ,MAGHnI,GAAOkI,EAAWC,GAASnI,GAAOkI,EAAWC,EAGtD,SAASC,EAAMC,EAAUC,EAAOC,EAAIzE,GAC7BuE,IACHA,EAAW,KAGRC,IACHA,EAAQ,GAGV,IAAIE,EAAKC,KAiCT,OAhCAH,GAAS,EAELG,KAAKC,eACPpG,aAAamG,KAAKC,eA4BpBD,KAAKC,cAAgBrG,YAzBrB,SAASsG,IACP,GAAc,IAAVL,EAWF,OAVAE,EAAGI,YAECL,IACEzE,EACFyE,EAAGxH,KAAK+C,GAERyE,MAOFD,EAAQ,GAAM,EAChBE,EAAGK,OAEHL,EAAGI,OAGLN,IACAE,EAAGE,cAAgBrG,WAAWsG,EAAUN,KAGAA,GACnCI,KAkBT,IAAIK,EAAQ,CAAC,UAAW,QAAS,aAAc,UAAW,aAAc,kBAAmB,eAAgB,sBAE3G,SAASC,GAAaC,GACpB,OAAO,IAAIvI,SAAS,IAAK,6CAA+CwI,GAAQD,IAGlF,SAASC,GAAQD,GACf,IAAKA,EAAQ,MAAO,OACpB,IAAIE,EAAKF,EAAO,GAChB,OAAIA,EAAOtJ,QAAU,EAAiB,QAAPwJ,EAAe,QAAU,OAEjD,KADU,OAAPA,EAAcC,GAAoBH,EAAO,GAAIA,EAAO,GAAI,OAAO,GAAgB,OAAPE,EAAcC,GAAoBH,EAAO,GAAIA,EAAO,GAAI,OAAO,GAAgB,MAAPE,GAAqB,MAAPA,GAAqB,OAAPA,GAAsB,OAAPA,EAAcC,GAAoBH,EAAO,GAAIA,EAAO,GAAIE,GAAI,GAAe,QAAPA,EAAeE,GAAiBJ,EAAOjH,MAAM,GAAI,MAAe,QAAPmH,EAAeE,GAAiBJ,EAAOjH,MAAM,GAAI,MAAe,SAAPmH,EAAgBG,GAAgBD,GAAiBJ,EAAOjH,MAAM,GAAI,OAAgB,OAAPmH,EAAcI,GAAYN,EAAO,GAAIA,EAAOjH,MAAM,IAAa,QAAPmH,EAAeG,GAAgBC,GAAYN,EAAO,GAAIA,EAAOjH,MAAM,KAAc,QAAPmH,EAAeK,GAAaP,EAAO,IAAa,SAAPE,EAAgBG,GAAgBE,GAAaP,EAAO,KAAO,QACzpB,IAGrB,SAASQ,GAAyBC,GAChC,MAAuB,MAAhBA,EAAS,GAAa,KAAOA,EAASC,UAAU,GAAK,KAAOxG,KAAKyG,UAAUF,GAAY,IAGhG,SAASN,GAAoBM,EAAUG,EAAOV,EAAIW,GAChD,IAAIC,EAAON,GAAyBC,GAChCM,EAAqB,UAAbN,EAAuBX,EAAMpF,QAAQkG,GAAS1G,KAAKyG,UAAUC,GACzE,OAAQC,EAAY,UAAYC,EAAO,cAAgBC,EAAQ,KAAO,IAAMD,EAAOZ,EAAKa,EAG1F,SAASX,GAAiBY,EAAad,GACrC,OAAOc,EAAY1D,IAAI2C,IAASgB,KAAKf,GAGvC,SAASI,GAAYG,EAAUS,GACZ,UAAbT,IAAsBS,EAASA,EAAO5D,KAAI,SAAUsD,GACtD,OAAOd,EAAMpF,QAAQkG,OAEvB,IAAIE,EAAO5G,KAAKyG,UAAUO,EAAOC,KAAKC,KAClCL,EAAQP,GAAyBC,GACrC,OAAIS,EAAOxK,QAAU,IAAYoK,EAAO,YAAcC,EAAQ,WACvD,6LAA+LA,EAAQ,KAAOD,EAAO,OAASI,EAAOxK,OAAS,GAAK,IAG5P,SAAS6J,GAAaE,GACpB,MAAoB,QAAbA,EAAqB,YAAcvG,KAAKyG,UAAUF,GAAY,QAGvE,SAASJ,GAAgBgB,GACvB,MAAO,KAAOA,EAAa,IAG7B,SAASD,GAAQlF,EAAGC,GAClB,OAAOD,EAAIC,GAAK,EAAID,EAAIC,EAAI,EAAI,EAGlC,SAASmF,GAAiBC,GACxB,IAAIC,EAAOD,EAASE,UAChBC,EAAIF,EAAc,QAItB,OAFAE,EAAQ,KAAI5B,EAAMpF,QAAQgH,EAAY,SAAQ,MAC9CA,EAAW,QAAIF,EAAc,QACtBE,EAGT,SAASC,GAAaC,GACpB,IAAK7G,MAAMC,QAAQ4G,GACjB,OAAOD,GAAa,CAACC,IAKvB,IAFA,IAAIC,EAAW,GAENrL,EAAI,EAAGA,EAAIoL,EAAOlL,OAAQF,IAAK,CACtC,IAAIwJ,OAAS,EAGXA,GAD0B,IAAxB4B,EAAOpL,GAAW,OACX,WACP,OAAO,GAGAuJ,GAAa6B,EAAOpL,GAAW,QAG1CqL,EAAStH,KAAKuH,GAAS,GAAIF,EAAOpL,GAAI,CACpCwJ,OAAQA,KAIZ,OAAO6B,EAGT,SAASC,GAASvL,GAChB,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CACzC,IAAIG,EAAMF,UAAUD,GAEpB,IAAK,IAAII,KAAKD,EACZJ,EAAKK,GAAKD,EAAIC,GAIlB,OAAOL,EAkGT,SAASwL,GAA4BC,EAAY/E,GAC/C,IAAK,IAAIzG,EAAI,EAAGA,EAAIwL,EAAWC,MAAMvL,OAAQF,IAC3C,GAAIyG,IAAU+E,EAAWC,MAAMzL,GAAG,GAChC,OAAOwL,EAAWC,MAAMzL,GAAG,GAI/B,OAAOwL,EAAWE,QAGpB,SAASC,GAAyBH,EAAY/E,GAC5C,IAAK,IAAIzG,EAAI,EAAGA,EAAIwL,EAAWC,MAAMvL,UAC/BuG,EAAQ+E,EAAWC,MAAMzL,GAAG,IADWA,KAI7C,OAAOwL,EAAWC,MAAMhK,KAAKsE,IAAI/F,EAAI,EAAG,IAAI,GAG9C,SAAS4L,GAA4BJ,EAAY/E,GAI/C,IAHA,IAAIoF,OAA2B9G,IAApByG,EAAWK,KAAqBL,EAAWK,KAAO,EACzD7L,EAAI,IAGFA,GAAKwL,EAAWC,MAAMvL,QAAuBuG,GAAS+E,EAAWC,MAAMzL,GAAG,KAAeA,IAG/F,OAAU,IAANA,EACKwL,EAAWC,MAAMzL,GAAG,GAClBA,IAAMwL,EAAWC,MAAMvL,OACzBsL,EAAWC,MAAMzL,EAAI,GAAG,GAUnC,SAAS8L,EAAcrF,EAAOoF,EAAME,EAAYC,EAAYC,EAAaC,GACvE,MAA2B,mBAAhBD,EACF,WACL,IAAIE,EAAiBF,EAAYG,WAAMrH,EAAW9E,WAC9CoM,EAAiBH,EAAYE,WAAMrH,EAAW9E,WAClD,OAAO6L,EAAcrF,EAAOoF,EAAME,EAAYC,EAAYG,EAAgBE,IAEnEJ,EAAY/L,OAqBzB,SAA0BuG,EAAOoF,EAAME,EAAYC,EAAYC,EAAaC,GAG1E,IAFA,IAAItF,EAAS,GAEJ5G,EAAI,EAAGA,EAAIiM,EAAY/L,OAAQF,IACtC4G,EAAO5G,GAAKsM,GAAkB7F,EAAOoF,EAAME,EAAYC,EAAYC,EAAYjM,GAAIkM,EAAYlM,IAGjG,OAAO4G,EA3BE2F,CAAiB9F,EAAOoF,EAAME,EAAYC,EAAYC,EAAaC,GAEnEI,GAAkB7F,EAAOoF,EAAME,EAAYC,EAAYC,EAAaC,GAlBpEJ,CAAcrF,EAAOoF,EAAML,EAAWC,MAAMzL,EAAI,GAAG,GAAIwL,EAAWC,MAAMzL,GAAG,GAAIwL,EAAWC,MAAMzL,EAAI,GAAG,GAAIwL,EAAWC,MAAMzL,GAAG,IAI1I,SAASwM,GAAyBhB,EAAY/E,GAC5C,OA3CgBf,EA2CAe,EA3CGd,EA2CI6F,EAAWE,aA1CxB3G,IAANW,EAAwBA,OAClBX,IAANY,EAAwBA,OAClBZ,IAAN0H,EAAwBA,EACrB,KAJT,IAAkB/G,EAAGC,EAAG8G,EA4DxB,SAASH,GAAkB7F,EAAOoF,EAAME,EAAYC,EAAYC,EAAaC,GAC3E,IAEIQ,EAFAC,EAAaX,EAAaD,EAC1Ba,EAAWnG,EAAQsF,EASvB,OAAOE,GAAe,GALpBS,EADW,IAATb,EACMe,EAAWD,GAEVlL,KAAKoL,IAAIhB,EAAMe,GAAY,IAAMnL,KAAKoL,IAAIhB,EAAMc,GAAc,KAGtCT,EAAcQ,EAanD,SAASI,GAAqBxM,GAC5B,OAAOA,GAAsB,iBAARA,IAAqBA,EAAImL,OAASnL,EAAI2J,UAAyB,aAAb3J,EAAIsH,MAG7E,SAASmF,GAAsBzM,GAC7B,IAAK,IAAImE,KAAKnE,EACZ,GAAIwM,GAAqBxM,EAAImE,IAC3B,OAAO,EAIX,OAAO,EAGT,SAASuI,GAAaxB,GACpB,OAAOyB,GAAgBzB,EAAY,eAOrC,SAAS0B,GAAkB5M,EAAK6M,GAC9B,IAAK7M,EACH,OAAO,KAGT,IAAI8M,GAAM,EAEV,GAAI7I,MAAMC,QAAQlE,GAAM,CAItB,IAHA,IACI+M,EADAC,EAAa,GAGRtN,EAAI,EAAGA,EAAIM,EAAIJ,OAAQF,KAC9BqN,EAASH,GAAkB5M,EAAIN,GAAImN,KAKjCG,EAAWvJ,KAAKsJ,GAChBD,GAAM,GAHNE,EAAWvJ,KAAKzD,EAAIN,IAOxB,OAAOoN,EAAME,EAAahN,EAG5B,IAIImE,EAJAE,EAAS,CACX,mBAAqB,GAEnB4I,EAAQ,GAGZ,IAAK9I,KAAKnE,EACJA,EAAIY,eAAeuD,IACrB8I,EAAMxJ,KAAKU,GAqBf,IAjBA,IAAI+I,EAAU,SAAiB/I,GAC7BtD,OAAOsM,eAAe9I,EAAQF,EAAG,CAC/BiJ,IAAK,WAKH,OAJKzE,KAAK,QAAUxE,KAClBwE,KAAK,QAAUxE,GAAKuI,GAAa/D,KAAK,IAAMxE,KAGvCwE,KAAK,QAAUxE,GAAG2H,MAAMnD,KAAMkE,MAEvCQ,IAAK,SAAa7I,GAChBmE,KAAK,IAAMxE,GAAKK,GAElB8I,cAAc,EACdC,YAAY,KAIPC,EAAK,EAAGlJ,EAAM2I,EAAMrN,OAAQ4N,EAAKlJ,EAAKkJ,IAGzChB,GAAqBxM,EAFzBmE,EAAI8I,EAAMO,MAGRV,GAAM,EACNzI,EAAO,IAAMF,GAAKnE,EAAImE,GACtB+I,EAAQ/I,IAERE,EAAOF,GAAKnE,EAAImE,GAIpB,OAAO2I,EAAMzI,EAASrE,EAGxB,SAASyN,GAAyBnI,GAChC,IAAKA,IAAMA,EAAE6F,MACX,MAAO,GAKT,IAFA,IAAIuC,EAAM,GAEDhO,EAAI,EAAGiO,EAAIrI,EAAE6F,MAAMvL,OAAQF,EAAIiO,EAAGjO,IACzCgO,EAAIjK,KAAK6B,EAAE6F,MAAMzL,GAAG,IAGtB,OAAOgO,EAGT,SAASf,GAAgBzB,EAAY0C,GACnC,IAAKpB,GAAqBtB,GACxB,OAAO,WACL,OAAOA,GAKX,IAAI2C,GAAiB,EACjBC,GAAoB,EACpB3C,GAHJD,EAAa9H,KAAKC,MAAMD,KAAKyG,UAAUqB,KAGhBC,MAEvB,GAAIA,EACF,IAAK,IAAIzL,EAAI,EAAGA,EAAIyL,EAAMvL,OAAQF,IAChC,GAAI8M,GAAqBrB,EAAMzL,GAAG,IAAK,CACrC,IAAIqO,EAAMpB,GAAgBxB,EAAMzL,GAAG,GAAIkO,GAEvCC,EAAiBA,GAAkBE,EAAIF,eACvCC,EAAoBA,GAAqBC,EAAID,kBAC7C3C,EAAMzL,GAAK,CAACyL,EAAMzL,GAAG,GAAIqO,GAK/B,IAAIzL,EA7SN,SAAS0L,EAAe9C,EAAY0C,GAClC,IAAIK,EACAH,EAAmBD,EAEvB,GAAKrB,GAAqBtB,GAOnB,CACL,IAIIgD,EAJAC,EAA0BjD,EAAWC,OAA2C,iBAA3BD,EAAWC,MAAM,GAAG,GACzEiD,EAAmBD,QAAmD1J,IAAxByG,EAAWvB,SACzD0E,EAAgBF,IAA4BC,EAC5C9G,EAAO4D,EAAW5D,MAAQsG,GAAe,cAG7C,GAAa,gBAATtG,EACF4G,EAAW5C,QACN,GAAa,aAAThE,EACT4G,EAAW7C,QACN,GAAa,gBAAT/D,EACT4G,EAAWjD,OACN,IAAa,aAAT3D,EAGT,MAAM,IAAIX,MAAM,0BAA4BW,EAAO,KAFnD4G,EAAWhC,GAKb,GAAIiC,EAAyB,CAI3B,IAHA,IAAIG,EAAmB,GACnBC,EAAuB,GAElBC,EAAI,EAAGA,EAAItD,EAAWC,MAAMvL,OAAQ4O,IAAK,CAChD,IAAIC,EAAOvD,EAAWC,MAAMqD,QAEW/J,IAAnC6J,EAAiBG,EAAK,GAAGC,QAC3BJ,EAAiBG,EAAK,GAAGC,MAAQ,CAC/BA,KAAMD,EAAK,GAAGC,KACdpH,KAAM4D,EAAW5D,KACjBqC,SAAUuB,EAAWvB,SACrByB,QAASF,EAAWE,QACpBD,MAAO,KAIXmD,EAAiBG,EAAK,GAAGC,MAAMvD,MAAM1H,KAAK,CAACgL,EAAK,GAAG3E,MAAO2E,EAAK,KAGjE,IAAK,IAAIE,KAAKL,EACZC,EAAqB9K,KAAK,CAAC6K,EAAiBK,GAAGD,KAAMV,EAAeM,EAAiBK,MAGvFV,EAAM,SAAaS,EAAME,GACvB,IAAI9E,EAAQwB,GAA4B,CACtCH,MAAOoD,EACPhD,KAAML,EAAWK,MAChBmD,EAHSpD,CAGHoD,EAAME,GACf,MAAwB,mBAAV9E,EAAuBA,EAAM4E,EAAME,GAAW9E,GAG9DgE,GAAoB,EACpBD,GAAiB,OACRQ,GACTJ,EAAM,SAAaS,GACjB,IAAI5E,EAAQoE,EAAShD,EAAYwD,GACjC,MAAwB,mBAAV5E,EAAuBA,EAAM4E,GAAQ5E,GAGrDgE,GAAoB,EACpBD,GAAiB,IAEjBI,EAAM,SAAaS,EAAME,GACvB,IAAI9E,EAAQoE,EAAShD,EAAY0D,EAAUA,EAAQ1D,EAAWvB,UAAY,MAC1E,MAAwB,mBAAVG,EAAuBA,EAAM4E,EAAME,GAAW9E,GAG9DgE,GAAoB,EACpBD,GAAiB,QA1EnBI,EAAM,WACJ,OAAO/C,GAGT4C,GAAoB,EACpBD,GAAiB,EA2EnB,OAFAI,EAAIJ,eAAiBA,EACrBI,EAAIH,kBAAoBA,EACjBG,EAwNED,CAAe9C,EAAY0C,GAGpC,OAFAtL,EAAGuL,eAAiBA,GAAkBvL,EAAGuL,eACzCvL,EAAGwL,kBAAoBA,GAAqBxL,EAAGwL,kBACxCxL,EAeT,SAASuM,GAAqBL,GAC5B,IAAInK,EAAS,CACX,OAAU,CACR,OAAUmK,EAAmB,gBAC7B,eAAgBA,EAAmB,gBACnC,iBAAkBA,EAAqB,kBACvC,mBAAoB,KACpB,iBAAkB,OAClB,kBAAmB,SAErB,KAAQ,CACN,KAAQA,EAAc,WACtB,eAAgBA,EAAqB,oBAQzC,OAJyC,IAArCnK,EAAe,OAAE,kBACnBA,EAAe,OAAE,kBAAoB,GAGhCA,EAGT,SAASyK,GAAoBC,EAAQC,EAAOC,GAC1C,IAAKF,EAAmB,WACtB,OAAO,KAGT,IAAI3F,EAAK,EACL0B,EAAS+D,GAAqBE,GAE9B9O,EAAS8O,EAAsB,iBACjC3F,EAAK2F,EAAsB,eAGzB9O,EAAS8O,EAAgB,WAC3B3F,GAAM2F,EAAgB,SAGxB,IAAIG,EAAY,GAEhB,GAAIpE,EAAQ,CACV,IAAK,IAAI3G,KAAK2G,EAAe,OACvBA,EAAe,OAAElK,eAAeuD,KAC7BpE,EAAM+K,EAAe,OAAE3G,MAC1B+K,EAAU/K,GAAK2G,EAAe,OAAE3G,KAKtC,IAAK,IAAIgL,KAAMrE,EAAa,KACtBA,EAAa,KAAElK,eAAeuO,KAC3BpP,EAAM+K,EAAa,KAAEqE,MACxBD,EAAUC,GAAMrE,EAAa,KAAEqE,KAUvC,IAJA,IACIC,EADAC,EAASpL,MAAMC,QAAQ6K,EAAmB,YAAKA,EAAmB,WAAI,CAACA,EAAmB,YAE1FO,EAAiB,GAEZ5P,EAAI,EAAGA,EAAI2P,EAAOzP,OAAQF,KAIjC0P,EAAO5P,EAAO,GAHd4P,EAAO7O,EAAS8O,EAAO3P,IAAM,CAC3B,KAAQ2P,EAAO3P,IACb2P,EAAO3P,GACawP,IAChB,EAAIE,EAAW,YAChBA,EAAW,KAClBE,EAAe7L,KAAK2L,GAGtB,IAAIG,EAAM,CAAC,qBAAsB,sCAE7BnG,EAAK,GACPmG,EAAI9L,KAAK,YAAc2F,EAAK,KAG1B2F,EAAwB,iBAAKA,EAAyB,kBACxDQ,EAAI9L,KAAK,gBAAkBsL,EAAwB,gBAAI,IAAMA,EAAyB,iBAAI,KAG5FQ,EAAI9L,KAAK,8BAELuL,GACFO,EAAI9L,KAAK,UAAYuL,EAAQ,KAG3BC,GACFM,EAAI9L,KAAK,WAAawL,EAAS,KAGjCM,EAAI9L,KAAK,kBAET,IAAK,IAAI+J,EAAK,EAAGA,EAAK8B,EAAe1P,OAAQ4N,IAAM,CACjD,IAAIgC,EAAU,SAEd,IAAK,IAAIC,KAAOH,EAAe9B,GACzB8B,EAAe9B,GAAI5M,eAAe6O,KACpCD,GAAW,IAAMC,EAAM,KAAOH,EAAe9B,GAAIiC,GAAO,KAI5DD,GAAW,WACXD,EAAI9L,KAAK+L,GAKX,OAFAD,EAAI9L,KAAK,UACC,6BAA+ByC,EAAKqJ,EAAIpF,KAAK,MAIzD,SAASuF,GAAqBX,EAAQY,GACpC,IAAKZ,EACH,MAAO,GAGT,IAAIa,EAAUb,EAET9K,MAAMC,QAAQ6K,KACjBa,EAAU,CAACb,IAQb,IALA,IAEIrB,EAAKmC,EACLC,EAAGC,EAHHC,EAAY,GACZ/C,EAAQ/N,EAIHQ,EAAIkQ,EAAQhQ,OAAS,EAAGF,GAAK,EAAGA,IAGvC,GAFAqP,EAASa,EAAQlQ,GAEjB,CAIIiQ,IACFZ,EAASkB,GAAmBlB,IAG9B,IAAK,IAAIxL,EAAK,EAAGA,EAAK0J,EAAMrN,OAAQ2D,IAOlC,GAJIiJ,GAFJkB,EAAMqB,EAAO9B,EAAM1J,OAGjBmK,EAAMD,GAAyBC,IAG5BA,EAAL,CAIKzJ,MAAMC,QAAQwJ,KACjBA,EAAM,CAACA,IAGT,IAAK,IAAIwC,EAAM,EAAGA,EAAMxC,EAAI9N,OAAQsQ,IACL,SAAzBxC,EAAIwC,GAAKjO,MAAM,EAAG,KACpByL,EAAIwC,GAAOlK,EAAc0H,EAAIwC,KAG/BL,EAAc1Q,EAAyBoE,GACvCyM,EAAUvM,KAAK,CAACiK,EAAIwC,GAAMnB,EAAOc,EAAY,IAAKd,EAAOc,EAAY,MAIzE,GAA6B,SAAzBd,EAAmB,YAAgBA,EAAmB,WAIxD,GAHAe,EAAItD,GAAqBuC,EAAoB,aAAK,IAAMA,EAAoB,YAC5EgB,EAAIvD,GAAqBuC,EAAqB,cAAK,IAAMA,EAAqB,aAE1EvC,GAAqBuC,EAAmB,YAAI,CAC9CrB,EAAMD,GAAyBsB,EAAmB,YAGlD,IAFA,IAAIK,EAAOL,EAAmB,WAErBoB,EAAO,EAAGA,EAAOzC,EAAI9N,OAAQuQ,IACpCpB,EAAmB,WAAIrB,EAAIyC,GAC3BH,EAAUvM,KAAK,CAACqL,GAAoBC,GAASe,EAAGC,IAGlDhB,EAAmB,WAAIK,OAEvBY,EAAUvM,KAAK,CAACqL,GAAoBC,GAASe,EAAGC,IAKtD,OAAOC,EAGT,SAASC,GAAmBlB,GAC1B,IAAKA,EACH,OAAO,KAGT,IAAIP,EAAIO,EAER,GAAIpN,EACF,OAAO6M,EAMT,IAHA,IACId,EADAT,EAAQ/N,EAGHqE,EAAK,EAAGe,EAAM2I,EAAMrN,OAAQ2D,EAAKe,EAAKf,KAC7CmK,EAAMc,EAAEvB,EAAM1J,OAMdiL,EAAEvB,EAAM1J,IAAO6M,GAAY1C,IAG7B,OAAOc,EAGT,SAAS4B,GAAY1C,GACnB,GAAIlB,GAAqBkB,GAAM,CAG7B,IAFA,IAAIvC,EAAQuC,EAAIvC,MAEPzL,EAAI,EAAGA,EAAIyL,EAAMvL,OAAQF,IAChCyL,EAAMzL,GAAG,GAAK0Q,GAAYjF,EAAMzL,GAAG,IAGrC,OAAOgO,EAOT,MAJwB,SAApBA,EAAIzL,MAAM,EAAG,KACfyL,EAAM1H,EAAc0H,IAGfA,EAGT,SAAS2C,GAAWzF,GAClB,OAAOA,GAAKA,EAAc,WAG5B,SAAS0F,GAAiB1F,GACxB,IAAI2F,EAAO,CAAC3F,EAAQ,MAMpB,GAJIA,EAAU,QACZ2F,EAAK9M,KAAKmH,EAAU,OAAET,QAGpBS,EAAc,WAAG,CAGnB,IAFA,IAAIO,EAAQ,GAEHzL,EAAIkL,EAAc,WAAEhL,OAAS,EAAGF,GAAK,EAAGA,IAC/CyL,EAAM1H,KAAKmH,EAAc,WAAElL,GAAGyK,QAGhCoG,EAAK9M,KAAK0H,EAAMhB,KAAK,MAGvB,OAAOoG,EAAKpG,KAAK,KA6BnB,SAASqG,GAAmBzB,EAAQ3C,GAClC,SAASoC,EAAEiC,EAASC,GAGd3Q,EAFK0Q,EAAiB,SAGxBA,EAAiB,QAAIC,EAErBD,EAAiB,SAAKC,EAI1B,IAAIC,EAEJ,GAAI1M,MAAMC,QAAQ6K,GAAS,CACzB4B,EAAQ,GAER,IAAK,IAAIjR,EAAI,EAAGA,EAAIqP,EAAOnP,OAAQF,IAAK,CACtC,IAAI4B,EAAI9B,EAAO,GAAIuP,EAAOrP,IAC1B8O,EAAElN,EAAG8K,GACLuE,EAAMlN,KAAKnC,SAIbkN,EADAmC,EAAQnR,EAAO,GAAIuP,GACV3C,GAGX,OAAOuE,EAGT,SAASC,GAAa7B,GACpB,IAAI8B,EAAU5M,MAAMnD,UAAUmB,MAAMhB,KAAKtB,UAAW,GAMpD,GAJKkR,GAAYA,EAAQjR,SACvBiR,EAAU,CAAC,KAGT5M,MAAMC,QAAQ6K,GAAS,CAIzB,IAHA,IAAIP,EAAG/O,EACH4E,EAAS,GAEJ3E,EAAI,EAAGiO,EAAIoB,EAAOnP,OAAQF,EAAIiO,EAAGjO,IAAK,CAC7C8O,EAAIO,EAAOrP,GACXD,EAAO,GAEP,IAAK,IAAI8D,EAAK,EAAGC,EAAKqN,EAAQjR,OAAQ2D,EAAKC,EAAID,IACxCU,MAAMC,QAAQ2M,EAAQtN,IAEfxD,EAAM8Q,EAAQtN,GAAI7D,IAG5BF,EAAOC,EAAM+O,GAAQ,IAFrBhP,EAAOC,EAAM+O,EAAGqC,EAAQtN,GAAI7D,IAF5BF,EAAOC,EAAM+O,EAAGqC,EAAQtN,GAAMsN,EAAQtN,GAAM,IAQhDc,EAAOZ,KAAKhE,GAGd,OAAO4E,EAEP,IAAIyM,EAAO,CAAC,GAAI/B,GAEhB,OADA+B,EAAKrN,KAAKqI,MAAMgF,EAAMD,GACfrR,EAAOsM,MAAMnD,KAAMmI,GAI9B,SAASC,GAAmBC,GAK1B,GAJIA,EAAMjC,SACRiC,EAAQ,CAACA,IAGP/M,MAAMC,QAAQ8M,GAChB,OAAOA,EAGT,IAAIC,EAAOD,EAAa,MACpBE,EAAUF,EAAgB,SAG9B,GAFAA,EAAQA,EAAMA,MAEVC,GAAQC,EAAS,CACfD,GAAkC,MAA1BA,EAAKA,EAAKrR,OAAS,KAC7BqR,EAAOA,EAAKrH,UAAU,EAAGqH,EAAKrR,OAAS,IAGrCsR,GAA2C,MAAhCA,EAAQA,EAAQtR,OAAS,KACtCsR,EAAUA,EAAQtH,UAAU,EAAGsH,EAAQtR,OAAS,IAalDoR,EAAQG,GAAiBH,GAVV,SAAkBI,GAC/B,MAAc,YAAVA,EACKH,EACY,eAAVG,EACFF,EAGF,QAMX,OAAOF,EAGT,SAASG,GAAiBrG,EAAQuG,GAChC,IAAK,IAAI3R,EAAI,EAAGA,EAAIoL,EAAOlL,OAAQF,IAAK,CACtC,IAAIqP,EAASjE,EAAOpL,GAAGqP,OAEnBA,GACFuC,GAAgBvC,EAAQsC,IAK9B,IAAIE,GAAc,8BAElB,SAASD,GAAgBvC,EAAQsC,GAC/B,IAAK,IAAIlN,KAAK4K,EACRA,EAAOnO,eAAeuD,IAAY,aAANA,IAC1B5D,EAASwO,EAAO5K,KAAO4K,EAAO5K,GAAGvE,OAAS,EAC5CmP,EAAO5K,GAAK4K,EAAO5K,GAAGqN,QAAQD,GAAaF,GAClC7E,GAAqBuC,EAAO5K,IACrC4K,EAAO5K,GAAKsN,GAAW1C,EAAO5K,GAAIkN,GACzB/Q,EAASyO,EAAO5K,KACzBmN,GAAgBvC,EAAO5K,GAAIkN,IAMnC,SAASI,GAAW3H,EAAOuH,GACzB,IAAIK,EAAe5H,EAAe,QAE9BvJ,EAASmR,KACX5H,EAAe,QAAI4H,EAAaF,QAAQD,GAAaF,IAKvD,IAFA,IAAIlG,EAAQrB,EAAMqB,MAETzL,EAAI,EAAGA,EAAIyL,EAAMvL,OAAQF,IAC3BuE,MAAMC,QAAQiH,EAAMzL,MAIrBa,EAAS4K,EAAMzL,GAAG,IACpByL,EAAMzL,GAAG,GAAKyL,EAAMzL,GAAG,GAAG8R,QAAQD,GAAaF,GACtC7E,GAAqBrB,EAAMzL,GAAG,MACvCyL,EAAMzL,GAAG,GAAK+R,GAAWtG,EAAMzL,GAAG,GAAI2R,KAI1C,OAAOvH,EAGT,IA6DI6H,GAAU,GAEd,IAAKhQ,EAAS,CACZ,IAAIiQ,GAAKC,UAAUC,UAAUC,cACzBC,GAAMC,SAASC,gBACfC,GAAM,kBAAmBrP,OACzBsP,IAAmC,IAA1BR,GAAGhO,QAAQ,UACpByO,IAAuC,IAA3BT,GAAGhO,QAAQ,WACvB0O,IAA2C,IAA/BV,GAAGW,OAAO,gBACtBC,IAAmC,IAA1BZ,GAAGhO,QAAQ,UACpB6O,IAAiC,IAAzBb,GAAGhO,QAAQ,WAAoBwO,KAAWtP,OAAO4P,QAAUP,GACnEQ,GAAgC,oBAAhBC,cAAyD,IAA1BhB,GAAGhO,QAAQ,UAC1DiP,IAAa/P,OAAOgQ,cAAgBhQ,OAAOiQ,eAC3CC,GAAUlQ,OAAOgQ,cAAgBjB,UAAUoB,gBAAkBJ,GAC7DK,GAAOf,IAAM,eAAgBH,GAAIhB,MACjCmC,GAAW,oBAAqBrQ,QAAU,QAAS,IAAIA,OAAOsQ,kBAAsBd,GACpFe,GAAW,mBAAoBrB,GAAIhB,MACnCsC,GAAW,gBAAiBtB,GAAIhB,MAChCuC,IAASL,IAAQC,IAAYE,MAAaC,KAAYjB,GACtDmB,GAAgB,EAEhBhB,KACFgB,GAAgB5B,GAAGR,MAAM,oBAAoB,IAG/C,IACIqC,GADAC,IAASrB,KAAcW,IAAW,iBAAkBlQ,QAAUA,OAAO6Q,eAAiB1B,oBAAoBnP,OAAO6Q,eAGrH,IACE,IAAIC,GAAS3B,SAAS4B,cAAc,UAChCC,GAAKF,GAAOG,WAAW,UAAYH,GAAOG,WAAW,sBACzDN,GAAQK,IAAMA,cAAcE,sBAC5B,MAAOC,IACPR,IAAQ,EAGV,IAAIS,GAAmBpR,OAAOoR,kBAAoBpR,OAAOqR,OAAOC,WAAatR,OAAOqR,OAAOE,YAC3F1C,GAAU,CACRQ,GAAIA,GACJmC,MAAOnC,KAAOF,SAASsC,iBACvBC,KAAM,gBAAiB3C,aAAe,iBAAkBI,UACxDG,OAAQA,GACRK,MAAOA,GACPgC,SAAoC,IAA3B7C,GAAGhO,QAAQ,WACpB0O,UAAWA,GACXE,OAAQA,GACRgB,cAAeA,GACfkB,QAASlC,KAAoC,IAA1BZ,GAAGhO,QAAQ,UAC9ByO,UAAWA,GACXa,KAAMA,GACNC,SAAUA,GACVE,QAASA,GACTC,QAASA,GACTC,MAAOA,GACPZ,OAAQA,GACRgC,aAAchC,IAAUP,GACxBwC,eAAgBjC,IAAUQ,GAC1B0B,YAAalC,IAAU7P,OAAO4P,MAC9BoC,YAAanC,IAAUF,GACvBiB,QAASA,GACTb,YAAaA,GACbG,UAAWA,GACX+B,OAAQb,GAAmB,EAC3BA,iBAAkBA,GAClBc,SAAUnD,UAAUoD,gBAAkBpD,UAAUoD,gBAAkBpD,UAAUmD,SAC5EE,IAAK/C,IAAgC,IAA1BF,SAASkD,aACpBC,KAAMjD,IAAgC,KAA1BF,SAASkD,aACrB1B,MAAOA,IAIX,IAAI4B,GAAY1D,GAEhB,SAAS2D,GAAeC,EAAUC,GAChCD,EAASzU,UAAYD,OAAO4U,OAAOD,EAAW1U,WAC9CyU,EAASzU,UAAUN,YAAc+U,EACjCA,EAASG,UAAYF,EAGvB,SAASG,GAAuBC,GAC9B,QAAa,IAATA,EACF,MAAM,IAAIC,eAAe,6DAG3B,OAAOD,EAGT,IAAIE,GAAW,WACb,SAASA,EAASnR,EAAGoR,GAYnB,GAXKhW,EAAM4E,IAAO5E,EAAMgW,GAGZhW,EAAM4E,EAAEA,IAAO5E,EAAM4E,EAAEoR,GAGxB9R,MAAMC,QAAQS,KACvBgE,KAAKhE,GAAKA,EAAE,GACZgE,KAAKoN,GAAKpR,EAAE,KAJZgE,KAAKhE,GAAKA,EAAEA,EACZgE,KAAKoN,GAAKpR,EAAEoR,IAJZpN,KAAKhE,GAAKA,EACVgE,KAAKoN,GAAKA,GASRpN,KAAKqN,SACP,MAAM,IAAIrP,MAAM,mBAIpB,IAAIsP,EAASH,EAAShV,UAmLtB,OAjLAmV,EAAO5I,IAAM,SAAa1I,EAAGoR,GAG3B,OAFApN,KAAKhE,EAAIA,EACTgE,KAAKoN,EAAIA,EACFpN,MAGTsN,EAAO/Q,IAAM,WACX,OAAO,IAAIyD,KAAKnI,YAAYW,KAAK+D,IAAIyD,KAAKhE,GAAIxD,KAAK+D,IAAIyD,KAAKoN,KAG9DE,EAAOC,KAAO,WAGZ,OAFAvN,KAAKhE,EAAIxD,KAAK+D,IAAIyD,KAAKhE,GACvBgE,KAAKoN,EAAI5U,KAAK+D,IAAIyD,KAAKoN,GAChBpN,MAGTsN,EAAOE,OAAS,WAGd,OAFAxN,KAAKhE,EAAIxD,KAAK8D,MAAM0D,KAAKhE,GACzBgE,KAAKoN,EAAI5U,KAAK8D,MAAM0D,KAAKoN,GAClBpN,MAGTsN,EAAOhR,MAAQ,WACb,OAAO,IAAI0D,KAAKnI,YAAYW,KAAK8D,MAAM0D,KAAKhE,GAAIxD,KAAK8D,MAAM0D,KAAKoN,KAGlEE,EAAOG,MAAQ,WAGb,OAFAzN,KAAKhE,EAAIxD,KAAKkV,KAAK1N,KAAKhE,GACxBgE,KAAKoN,EAAI5U,KAAKkV,KAAK1N,KAAKoN,GACjBpN,MAGTsN,EAAOI,KAAO,WACZ,OAAO,IAAI1N,KAAKnI,YAAYW,KAAKkV,KAAK1N,KAAKhE,GAAIxD,KAAKkV,KAAK1N,KAAKoN,KAGhEE,EAAOK,WAAa,SAAoBC,GACtC,IAAI5R,EAAI4R,EAAM5R,EAAIgE,KAAKhE,EACnBoR,EAAIQ,EAAMR,EAAIpN,KAAKoN,EACvB,OAAO5U,KAAKqV,KAAK7R,EAAIA,EAAIoR,EAAIA,IAG/BE,EAAOQ,OAAS,WAGd,OAFA9N,KAAKhE,EAAIxD,KAAKuV,MAAM/N,KAAKhE,GACzBgE,KAAKoN,EAAI5U,KAAKuV,MAAM/N,KAAKoN,GAClBpN,MAGTsN,EAAOS,MAAQ,WACb,OAAO,IAAI/N,KAAKnI,YAAYW,KAAKuV,MAAM/N,KAAKhE,GAAIxD,KAAKuV,MAAM/N,KAAKoN,KAGlEE,EAAOU,KAAO,WACZ,OAAO,IAAIhO,KAAKnI,YAAYmI,KAAKhE,EAAGgE,KAAKoN,IAG3CE,EAAOW,KAAO,SAAcjS,EAAGoR,GAY7B,OAXKhW,EAAM4E,EAAEA,GAGD5E,EAAM4E,EAAE,KAIlBgE,KAAKhE,GAAKA,EACVgE,KAAKoN,GAAKA,IAJVpN,KAAKhE,GAAKA,EAAE,GACZgE,KAAKoN,GAAKpR,EAAE,KAJZgE,KAAKhE,GAAKA,EAAEA,EACZgE,KAAKoN,GAAKpR,EAAEoR,GASPpN,MAGTsN,EAAOY,IAAM,SAAalS,EAAGoR,GAC3B,IAAIe,EAAIC,EAaR,OAXKhX,EAAM4E,EAAEA,GAGD5E,EAAM4E,EAAE,KAIlBmS,EAAKnO,KAAKhE,EAAIA,EACdoS,EAAKpO,KAAKoN,EAAIA,IAJde,EAAKnO,KAAKhE,EAAIA,EAAE,GAChBoS,EAAKpO,KAAKoN,EAAIpR,EAAE,KAJhBmS,EAAKnO,KAAKhE,EAAIA,EAAEA,EAChBoS,EAAKpO,KAAKoN,EAAIpR,EAAEoR,GASX,IAAIpN,KAAKnI,YAAYsW,EAAIC,IAGlCd,EAAOe,KAAO,SAAcrS,EAAGoR,GAY7B,OAXKhW,EAAM4E,EAAEA,GAGD5E,EAAM4E,EAAE,KAIlBgE,KAAKhE,GAAKA,EACVgE,KAAKoN,GAAKA,IAJVpN,KAAKhE,GAAKA,EAAE,GACZgE,KAAKoN,GAAKpR,EAAE,KAJZgE,KAAKhE,GAAKA,EAAEA,EACZgE,KAAKoN,GAAKpR,EAAEoR,GASPpN,MAGTsN,EAAOgB,WAAa,WAClB,OAAOtO,KAAKqO,KAAKlL,MAAMnD,KAAMhJ,YAG/BsW,EAAOiB,IAAM,SAAavS,EAAGoR,GAC3B,IAAIe,EAAIC,EAaR,OAXKhX,EAAM4E,EAAEA,GAGD5E,EAAM4E,EAAE,KAIlBmS,EAAKnO,KAAKhE,EAAIA,EACdoS,EAAKpO,KAAKoN,EAAIA,IAJde,EAAKnO,KAAKhE,EAAIA,EAAE,GAChBoS,EAAKpO,KAAKoN,EAAIpR,EAAE,KAJhBmS,EAAKnO,KAAKhE,EAAIA,EAAEA,EAChBoS,EAAKpO,KAAKoN,EAAIpR,EAAEoR,GASX,IAAIpN,KAAKnI,YAAYsW,EAAIC,IAGlCd,EAAOkB,UAAY,WACjB,OAAOxO,KAAKuO,IAAIpL,MAAMnD,KAAMhJ,YAG9BsW,EAAOmB,MAAQ,SAAehL,GAC5B,OAAO,IAAIzD,KAAKnI,YAAYmI,KAAKhE,EAAIyH,EAAOzD,KAAKoN,EAAI3J,IAGvD6J,EAAOoB,OAAS,SAAgBjL,GAG9B,OAFAzD,KAAKhE,GAAKyH,EACVzD,KAAKoN,GAAK3J,EACHzD,MAGTsN,EAAOqB,IAAM,SAAajX,GACxB,OAAOsI,KAAKyO,MAAM,EAAI/W,IAGxB4V,EAAOsB,KAAO,SAAclX,GAC1B,OAAOsI,KAAK0O,OAAO,EAAIhX,IAGzB4V,EAAOuB,OAAS,SAAgBrL,GAC9B,OAAMA,aAAaxD,KAAKnI,cAIjBmI,KAAKhE,IAAMwH,EAAExH,GAAKgE,KAAKoN,IAAM5J,EAAE4J,IAGxCE,EAAOD,OAAS,WACd,OAAO7V,MAAMwI,KAAKhE,IAAMxE,MAAMwI,KAAKoN,IAGrCE,EAAOwB,OAAS,WACd,OAAkB,IAAX9O,KAAKhE,GAAsB,IAAXgE,KAAKoN,GAG9BE,EAAOyB,QAAU,WACf,MAAO,CAAC/O,KAAKhE,EAAGgE,KAAKoN,IAGvBE,EAAO0B,QAAU,SAAiBtX,GAChC,OAAO,IAAIsI,KAAKnI,YAAYmI,KAAKhE,EAAEgT,QAAQtX,GAAIsI,KAAKoN,EAAE4B,QAAQtX,KAGhE4V,EAAO2B,OAAS,WACd,MAAO,CACLjT,EAAGgE,KAAKhE,EACRoR,EAAGpN,KAAKoN,IAILD,EArMM,GAwMX+B,GAAQ,SAAUC,GAGpB,SAASD,IACP,OAAOC,EAAUhM,MAAMnD,KAAMhJ,YAAcgJ,KAH7C2M,GAAeuC,EAAOC,GAMtB,IAAI7B,EAAS4B,EAAM/W,UAyDnB,OAvDAmV,EAAO8B,QAAU,SAAiB5T,EAAGkE,GAKnC,OAJKA,IACHA,EAAQ,GAGHM,KAAKhE,GAAKR,EAAEQ,EAAI0D,GAASM,KAAKhE,GAAKR,EAAEQ,EAAI0D,GAASM,KAAKoN,GAAK5R,EAAE4R,EAAI1N,GAASM,KAAKoN,GAAK5R,EAAE4R,EAAI1N,GAGpG4N,EAAO+B,IAAM,WACX,OAAO7W,KAAKqV,KAAK7N,KAAKhE,EAAIgE,KAAKhE,EAAIgE,KAAKoN,EAAIpN,KAAKoN,IAGnDE,EAAOgC,KAAO,WACZ,OAAOtP,KAAKgO,OAAOuB,SAGrBjC,EAAOiC,MAAQ,WAGb,OAFAvP,KAAK4O,KAAK5O,KAAKqP,OAERrP,MAGTsN,EAAOkC,KAAO,WACZ,OAAOxP,KAAKgO,OAAOyB,SAGrBnC,EAAOmC,MAAQ,WACb,IAAIrC,EAAIpN,KAAKoN,EAGb,OAFApN,KAAKoN,EAAIpN,KAAKhE,EACdgE,KAAKhE,GAAKoR,EACHpN,MAGTsN,EAAOoC,UAAY,SAAmBhT,GACpC,OAAOsD,KAAK2P,aAAajT,EAAEV,EAAGU,EAAE0Q,IAGlCE,EAAOqC,aAAe,SAAsB3T,EAAGoR,GAC7C,OAAO5U,KAAK2G,MAAMa,KAAKhE,EAAIoR,EAAIpN,KAAKoN,EAAIpR,EAAGgE,KAAKhE,EAAIA,EAAIgE,KAAKoN,EAAIA,IAGnEE,EAAOsC,QAAU,SAAiBC,GAChC,IAAIC,EAAMtX,KAAKsX,IAAID,GACfE,EAAMvX,KAAKuX,IAAIF,GACf7T,EAAI8T,EAAM9P,KAAKhE,EAAI+T,EAAM/P,KAAKoN,EAC9BA,EAAI2C,EAAM/P,KAAKhE,EAAI8T,EAAM9P,KAAKoN,EAGlC,OAFApN,KAAKhE,EAAIA,EACTgE,KAAKoN,EAAIA,EACFpN,MAGTsN,EAAO0C,OAAS,SAAgBvT,GAC9B,OAAOuD,KAAKgO,OAAO4B,QAAQnT,IAGtByS,EAhEG,CAiEV/B,IAEE8C,GAAO,WACT,SAASA,EAAK5J,EAAOC,GACfhP,EAAS+O,IAAU/O,EAASgP,IAC9BtG,KAAKqG,MAAQA,EACbrG,KAAKsG,OAASA,GACLhP,EAAS+O,EAAa,QAC/BrG,KAAKqG,MAAQA,EAAMA,MACnBrG,KAAKsG,OAASD,EAAMC,QACXhL,MAAMC,QAAQ8K,KACvBrG,KAAKqG,MAAQA,EAAM,GACnBrG,KAAKsG,OAASD,EAAM,IAIxB,IAAIiH,EAAS2C,EAAK9X,UAuDlB,OArDAmV,EAAOU,KAAO,WACZ,OAAO,IAAIiC,EAAKjQ,KAAY,MAAGA,KAAa,SAG9CsN,EAAOY,IAAM,SAAalS,EAAGoR,GAC3B,IAAIjG,EAAGC,EAUP,OARIpL,aAAaiU,GACf9I,EAAInH,KAAKqG,MAAQrK,EAAEqK,MACnBe,EAAIpH,KAAKsG,OAAStK,EAAEsK,SAEpBa,EAAInH,KAAKqG,MAAQrK,EACjBoL,EAAIpH,KAAKsG,OAAS8G,GAGb,IAAI6C,EAAK9I,EAAGC,IAGrBkG,EAAOuB,OAAS,SAAgBqB,GAC9B,OAAOlQ,KAAY,QAAMkQ,EAAY,OAAKlQ,KAAa,SAAMkQ,EAAa,QAG5E5C,EAAOmB,MAAQ,SAAehL,GAC5B,OAAO,IAAIwM,EAAKjQ,KAAY,MAAIyD,EAAOzD,KAAa,OAAIyD,IAG1D6J,EAAOoB,OAAS,SAAgBjL,GAG9B,OAFAzD,KAAY,OAAKyD,EACjBzD,KAAa,QAAKyD,EACXzD,MAGTsN,EAAOE,OAAS,WAGd,OAFAxN,KAAY,MAAIxH,KAAK8D,MAAM0D,KAAY,OACvCA,KAAa,OAAIxH,KAAK8D,MAAM0D,KAAa,QAClCA,MAGTsN,EAAO6C,QAAU,WACf,OAAO,IAAIjB,GAAMlP,KAAY,MAAGA,KAAa,SAG/CsN,EAAOyB,QAAU,WACf,MAAO,CAAC/O,KAAY,MAAGA,KAAa,SAGtCsN,EAAO2B,OAAS,WACd,MAAO,CACL,MAASjP,KAAY,MACrB,OAAUA,KAAa,SAIpBiQ,EArEE,GAwEX,SAASG,GAAK5V,GACZ,OAAOA,EAAI4V,KAAO5V,EAAI4V,OAAS5V,EAAIqO,QAAQ,aAAc,IAG3D,IAAIwH,GAAiB,kBAErB,SAASC,GAAmB9V,GAC1B,OAAK5C,EAAS4C,GAIPA,EAAIqO,QAAQwH,GAAgB,IAH1B7V,EAMX,SAAS+V,GAAWC,GAClB,OAAOJ,GAAKI,GAAKC,MAAM,OAGzB,IAAIC,GAA+B,oBAAbpH,SAA2BA,SAAS4B,cAAc,UAAUE,WAAW,MAAQ,KAErG,SAASuF,GAAYC,EAAMC,GACzB,OAAIF,GAAYjX,KACPiX,GAAYjX,KAAKkX,EAAMC,IAGhCH,GAASG,KAAOA,EACTH,GAASI,YAAYF,GAAMvK,OAGpC,SAAS0K,GAAaH,EAAMC,EAAMX,GAChC,IAAI/I,EAAIwJ,GAAYC,EAAMC,GAC1B,OAAO,IAAIZ,GAAK9I,EAAG+I,GAzxDG,IAyyDxB,SAASc,GAAaC,EAASJ,EAAMK,EAAWC,GAC9C,IAAKF,GAA8B,IAAnBA,EAAQha,OACtB,MAAO,CAAC,CACN,KAAQ,GACR,MAAS,IAIb,IAAIoP,EAAQjP,EAAM+Z,GAAaR,GAAYM,EAASJ,GAAQM,EACxDC,EAAW/K,EAAQ4K,EAAQha,OAC3Boa,EAAc7Y,KAAKuV,MAAMmD,EAAYE,EAAW,GAEpD,GAAIA,GAAYF,GAAaG,GAAe,EAC1C,MAAO,CAAC,CACN,KAAQ,GACR,MAASH,IAIb,GAAI7K,GAAS6K,EAAW,MAAO,CAAC,CAC9B,KAAQD,EACR,MAAS5K,IAMX,IAJA,IAAI3K,EAAS,GACT4V,EAAUL,EAAQhQ,UAAU,EAAGoQ,GAC/BE,EAAOH,EAAWC,EAEbta,EAAIsa,EAAarM,EAAIiM,EAAQha,OAAQF,EAAIiO,EAAGjO,IAAK,CACxD,IAAIyZ,EAAMS,EAAQla,GACdoQ,EAAIwJ,GAAYW,EAAUd,GAE1BrJ,GAAK+J,GACPxV,EAAOZ,KAAK,CACV,KAAQwW,EACR,MAASC,IAEXD,EAAUL,EAAQhQ,UAAUlK,EAAGsa,EAActa,GAC7CA,GAAKsa,EAAc,EACnBE,EAAOH,EAAWC,IAElBC,GAAWd,EACXe,EAAOpK,GAGLpQ,GAAKiO,EAAI,IACXuM,EAAOZ,GAAYW,GACnB5V,EAAOZ,KAAK,CACV,KAAQwW,EACR,MAASC,KAKf,OAAO7V,EAGT,IAAI8V,GAAe,gBAEnB,SAASC,GAAgBjX,EAAK8J,GAC5B,OAAK1M,EAAS4C,GAIPA,EAAIqO,QAAQ2I,IAAc,SAAUhX,EAAKnC,GAC9C,IAAKiM,EACH,MAAO,GAGT,IAAInD,EAAQmD,EAAMjM,GAElB,OAAIjB,EAAM+J,GACD,GACE7F,MAAMC,QAAQ4F,GAChBA,EAAMK,OAGRL,KAhBA3G,EAoBX,SAASkX,GAAcxB,EAAMyB,EAAqBC,GAChD,IAAIvL,EAAQ6J,EAAY,MACpB5J,EAAS4J,EAAa,OAmB1B,OAAO,IAAIhB,GAhBiB,SAAxByC,GACQtL,EACuB,UAAxBsL,EACA,GAECtL,EAAQ,EAGM,QAAtBuL,GACQtL,EACqB,WAAtBsL,EACA,GAECtL,EAAS,GAQvB,SAASuL,GAAQxJ,GACf,OAAIA,EAAgB,SACXA,EAAgB,UAEfA,EAAiB,WAA4B,WAAvBA,EAAiB,UAAiBA,EAAiB,UAAI,IAAM,KAAOA,EAAkB,YAA6B,WAAxBA,EAAkB,WAAiBA,EAAkB,WAAI,IAAM,IAAMA,EAAgB,SAAI,OAAUA,EAAoB,aAAgD,MAA7BA,EAAoB,aAAE,GAAaA,EAAoB,aAAI,IAAMA,EAAoB,aAAI,IAN7U,aAUnB,SAASyJ,GAAelB,EAAMvI,GAC5B,IAAIwI,EAAOgB,GAAQxJ,GACf0J,EAAc1J,EAAuB,iBAAK,EAC1C6H,EAAOa,GAAaH,EAAMC,EAAMxI,EAAgB,UAChD8I,EAAYjB,EAAY,MACxB8B,EAAa9B,EAAa,OAC1B+B,EAAW5J,EAAyB,kBACpC6J,EAAW,GACXhB,EAAY7I,EAAqB,gBAEhC6I,GAAaA,EAAYC,KAC5BD,EAAYC,GAGTvZ,EAASgZ,KACZA,GAAQ,IAGV,IAAIuB,EAAc,EAElB,GAAIF,GAAYrB,EAAK3V,QAAQgX,IAAa,EAGxC,IAFA,IAAIG,EAAQxB,EAAKH,MAAMwB,GAEdlb,EAAI,EAAGiO,EAAIoN,EAAMnb,OAAQF,EAAIiO,EAAGjO,IAAK,CAC5C,IAAI4F,EAAIyV,EAAMrb,GACVsb,EAAS1B,GAAYhU,EAAGkU,GAE5B,GAAIwB,EAASnB,EAGX,IAFA,IAAIoB,EAAWtB,GAAarU,EAAGkU,EAAMK,EAAWmB,GAEvCzX,EAAK,EAAGC,EAAKyX,EAASrb,OAAQ2D,EAAKC,EAAID,IAAM,CACpD,IAAIuM,EAAImL,EAAS1X,GAAIyL,MAEjBc,EAAIgL,IACNA,EAAchL,GAGhB+K,EAASpX,KAAK,CACZ,KAAQwX,EAAS1X,GAAIgW,KACrB,KAAQ,IAAIX,GAAK9I,EAAG6K,UAIpBK,EAASF,IACXA,EAAcE,GAGhBH,EAASpX,KAAK,CACZ,KAAQ6B,EACR,KAAQ,IAAIsT,GAAKoC,EAAQL,UAI1B,GAAIb,EAAYD,EAGrB,IAFA,IAAIqB,EAAYvB,GAAaJ,EAAMC,EAAMK,EAAWC,GAE3CtM,EAAK,EAAGA,EAAK0N,EAAUtb,OAAQ4N,IAAM,CAC5C,IAAI2N,EAAKD,EAAU1N,GAAIwB,MAEnBmM,EAAKL,IACPA,EAAcK,GAGhBN,EAASpX,KAAK,CACZ,KAAQyX,EAAU1N,GAAI+L,KACtB,KAAQ,IAAIX,GAAKuC,EAAIR,UAIrBb,EAAYgB,IACdA,EAAchB,GAGhBe,EAASpX,KAAK,CACZ,KAAQ8V,EACR,KAAQV,IAIZ,IAAIuC,EAASP,EAASjb,OAEtB,MAAO,CACL,MAASwb,EACT,KAHa,IAAIxC,GAAKkC,EAAaH,EAAaS,EAASV,GAAeU,EAAS,IAIjF,KAAQP,EACR,QAAWhC,GAIf,IAkBIwC,GAAW1Z,EAJH,SAAesL,GACzB,OAAOA,EAAM,IAGkB,SAAUA,GAGzC,IAFA,IAAI+D,EAAQiB,SAASC,gBAAgBlB,MAE5BtR,EAAI,EAAGA,EAAIuN,EAAMrN,OAAQF,IAChC,GAAIuN,EAAMvN,KAAMsR,EACd,OAAO/D,EAAMvN,GAIjB,OAAO,GAEL4b,GAAYD,GAAS,CAAC,YAAa,kBAAmB,aAAc,eAAgB,gBACpFE,GAAkBF,GAAS,CAAC,kBAAmB,wBAAyB,mBAAoB,qBAAsB,sBAClHG,GAAaH,GAAS,CAAC,aAAc,mBAAoB,cAAe,gBAAiB,iBAC7EA,GAAS,CAAC,SAAU,eAAgB,UAAW,YAAa,aAE5E,SAASI,GAASC,EAASC,GACzB,IAAIC,EAAK3J,SAAS4B,cAAc6H,GAMhC,OAJIC,GACFE,GAASD,EAAID,GAGRC,EAGT,SAASE,GAAWJ,EAAS1K,EAAO+K,GAClC,IAAIH,EAAKH,GAASC,GAUlB,OARI1K,GACFgL,GAASJ,EAAI5K,GAGX+K,GACFA,EAAUE,YAAYL,GAGjBA,EAGT,SAASM,GAAc7Z,GACrB,IAAKA,EACH,OAAOsG,KAGT,GAAI0M,GAAUf,OAASe,GAAUH,IAAK,CACpC,IAAI5T,EAAIma,GAAS,OACjBna,EAAE2a,YAAY5Z,GACdf,EAAE6a,UAAY,GACd7a,EAAI,UACKe,EAAK+Z,YACd/Z,EAAK+Z,WAAWC,YAAYha,GAG9B,OAAOsG,KAGT,SAAS2T,GAAYtc,EAAKuc,EAASC,EAASxY,GAC1C,KAAKhE,GAAQA,EAAIuU,kBAAqBgI,GAAYC,GAChD,OAAO7T,KAcT,IAXA,IAAI8T,EAAe,SAAsBC,GAClCA,IACHA,EAAI5Z,OAAO6Z,OAGbH,EAAQvb,KAAK+C,GAAWhE,EAAK0c,IAI3B1T,EAAQuT,EAAQnD,MAAM,KAEjB1Z,EAAIsJ,EAAMpJ,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAC1C,IAAI4H,EAAO0B,EAAMtJ,GAEjB,GAAK4H,EAIAtH,EAAI,MAAQsH,KACftH,EAAI,MAAQsH,GAAQ,IAGZsV,GAAgB5c,EAAKsH,EAAMkV,IAE1B,GACTK,GAAe7c,EAAKsH,EAAMkV,GAG5Bxc,EAAI,MAAQsH,GAAM7D,KAAK,CACrBqZ,SAAUL,EACV5c,IAAK2c,IAGHnH,GAAUlD,GACZnS,EAAIuU,iBAAiBjN,EAAMmV,GAAc,GAEzCzc,EAAIuU,iBAAiBjN,EAAMmV,EAAc,CACvCM,SAAS,EACTC,SAAS,IAKf,OAAOrU,KAGT,SAASkU,GAAe7c,EAAKuc,EAASC,GACpC,SAASS,EAAS3V,EAAMwV,GACT,eAATxV,GAAyB+N,GAAU5C,QACrCnL,EAAO,kBAGTtH,EAAIkd,oBAAoB5V,EAAMwV,GAAU,GAG1C,IAAK9c,IAAQA,EAAIkd,sBAAwBX,EACvC,OAAO5T,KAKT,IAFA,IAAIK,EAAQuT,EAAQnD,MAAM,KAEjB1Z,EAAIsJ,EAAMpJ,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAC1C,IAAI4H,EAAO0B,EAAMtJ,GAEjB,GAAK4H,EAAL,CAIA,IAAKkV,GAAWxc,EAAI,MAAQsH,GAAO,CAGjC,IAFA,IAAI6V,EAAWnd,EAAI,MAAQsH,GAElB8V,EAAI,EAAGC,EAAOF,EAASvd,OAAQwd,EAAIC,EAAMD,IAChDH,EAASE,EAASC,GAAGN,UAIvB,cADO9c,EAAI,MAAQsH,GACZqB,KAGT,IAAImE,EAAM8P,GAAgB5c,EAAKsH,EAAMkV,GAErC,GAAI1P,EAAM,EACR,OAAOnE,KAITsU,EAAS3V,EADQtH,EAAI,MAAQsH,GAAMwF,GACTgQ,UAC1B9c,EAAI,MAAQsH,GAAMzD,OAAOiJ,EAAK,IAGhC,OAAOnE,KAGT,SAASiU,GAAgB5c,EAAKsH,EAAMkV,GAClC,IAAKxc,IAAQA,EAAI,MAAQsH,KAAUkV,EACjC,OAAQ,EAKV,IAFA,IAAIW,EAAWnd,EAAI,MAAQsH,GAElB5H,EAAI,EAAG4E,EAAM6Y,EAASvd,OAAQF,EAAI4E,EAAK5E,IAC9C,GAAIyd,EAASzd,GAAGG,MAAQ2c,EACtB,OAAO9c,EAIX,OAAQ,EAGV,SAAS4d,GAAeX,GAOtB,OANIA,EAAMW,eACRX,EAAMW,iBAENX,EAAMY,aAAc,EAGf5U,KAGT,SAAS6U,GAAgBd,GAOvB,OANIA,EAAEc,gBACJd,EAAEc,kBAEFd,EAAEe,cAAe,EAGZ9U,KAGT,SAAS+U,GAAiBC,GAUxB,OATAA,EAAIC,cAAgB,WAClB,OAAO,GAGTD,EAAIE,YAAc,WAChB,OAAO,GAGTF,EAAIG,aAAa,eAAgB,MAC1BnV,KAGT,SAASoV,GAAUJ,EAAKK,GACtB,OAAKL,GAIDtI,GAAU9B,MACZ0K,GAAaN,EAAKK,IAElBL,EAAI3M,MAAMhH,KAAOgU,EAAOrZ,EAAI,KAC5BgZ,EAAI3M,MAAMkN,IAAMF,EAAOjI,EAAI,MAGtBiI,GAVE,KAaX,SAASG,GAAmBR,GAC1B,IAAI3M,EAAQlO,OAAOsb,iBAAiBT,GAChCU,EAAU,CAACC,SAAStN,EAAM,iBAAkBsN,SAAStN,EAAM,iBAC3DuN,EAAOZ,EAAIa,wBACXC,EAAcd,EAAIc,YAClBC,EAAef,EAAIe,aACnBC,EAASF,EAAcF,EAAKvP,MAAQyP,EAAc,EAClDG,EAASF,EAAeH,EAAKtP,OAASyP,EAAe,EAEzD,OADAf,EAAIkB,WAAa,CAACN,EAAKvU,KAAOqU,EAAQ,GAAIE,EAAKL,IAAMG,EAAQ,GAAIM,EAAQC,GAClEjB,EAAIkB,WAGb,SAASC,GAAuBC,EAAIpB,GAC7BoB,IACHA,EAAKjc,OAAO6Z,OAGd,IAAIqC,EAASrB,EAAIkB,WAMjB,OAJKG,IACHA,EAASb,GAAmBR,IAGvB,IAAI9F,IAAOkH,EAAGE,QAAUD,EAAO,GAAKrB,EAAIuB,YAAcF,EAAO,IAAKD,EAAGI,QAAUH,EAAO,GAAKrB,EAAIyB,WAAaJ,EAAO,IAQ5H,SAAShD,GAAS2B,EAAK0B,GACrB,IANgBlc,EAAKmc,EACjB3R,EAKA4R,EAAU5B,EAAI3M,MAAMuO,QAOxB,OAbqBD,EAQE,KAPnB3R,GADYxK,EAQFoc,GAPF3f,OAAS0f,EAAO1f,SAChB,GAAKuD,EAAIS,QAAQ0b,EAAQ3R,KAAOA,IAO1C4R,GAAW,KAGb5B,EAAI3M,MAAMuO,QAAUA,EAAUF,EACvB1W,KAGT,SAAS6W,GAAS5D,EAAI/Y,GACpB,QAAqB4B,IAAjBmX,EAAG6D,UACL,OAAO7D,EAAG6D,UAAUC,SAAS7c,GAG/B,IAAI8Y,EAAYgE,GAAS/D,GACzB,OAAOD,EAAU/b,OAAS,GAAK,IAAIggB,OAAO,UAAY/c,EAAO,WAAWkD,KAAK4V,GAG/E,SAASkE,GAASjE,EAAI/Y,GACpB,QAAqB4B,IAAjBmX,EAAG6D,WAA4BD,GAAS5D,EAAI/Y,GAMzC,CACL,IAAI8Y,EAAYgE,GAAS/D,GACzBC,GAASD,GAAKD,EAAYA,EAAY,IAAM,IAAM9Y,QALlD,IAFA,IAAIid,EAAU5G,GAAWrW,GAEhBnD,EAAI,EAAG4E,EAAMwb,EAAQlgB,OAAQF,EAAI4E,EAAK5E,IAC7Ckc,EAAG6D,UAAU5I,IAAIiJ,EAAQpgB,IAO7B,OAAOiJ,KAGT,SAASkT,GAASD,EAAI/Y,GAOpB,OANI9C,EAAM6b,EAAGD,UAAUoE,SACrBnE,EAAGD,UAAY9Y,EAEf+Y,EAAGD,UAAUoE,QAAUld,EAGlB8F,KAGT,SAASgX,GAAS/D,GAChB,OAAO7b,EAAM6b,EAAGD,UAAUoE,SAAWnE,EAAGD,UAAYC,EAAGD,UAAUoE,QAQnE,SAAS9B,GAAarC,EAAIoC,GACxB,IAAIgC,EAAMhC,GAAU,IAAInG,GAAM,EAAG,GAEjC,OADA+D,EAAG5K,MAAMsK,IAAajG,GAAU9B,MAAQ,eAAiByM,EAAIrb,EAAI,MAAQqb,EAAIjK,EAAI,UAAY,aAAeiK,EAAIrb,EAAI,MAAQqb,EAAIjK,EAAI,MAC7HpN,KAqBT,SAASsX,GAAO9c,GACd,MAAO,mBAAmB4C,KAAK5C,GAGjC,SAAS+c,GAAWC,EAAWxC,GAC7B,IAAIyC,EAAQC,GAAYF,GAEpB5f,EAASod,GACXyC,EAAMjE,UAAYwB,EAElByC,EAAMnE,YAAY0B,GAGpB,IAAItZ,EAAS,IAAIuU,GAAKwH,EAAME,YAAaF,EAAMG,cAE/C,OADArE,GAAckE,GACP/b,EAGT,SAASgc,GAAYG,GACnB,IAAIC,EAAOxO,SAAS4B,cAAc2M,GAGlC,OAFAC,EAAKzP,MAAMuO,QAAU,gDACrBtN,SAASyO,KAAKzE,YAAYwE,GACnBA,EAGT,IAAIE,GAAKrE,GACLsE,GAAM/D,GAiCNgE,GAAO,CACTC,MAAO,SAAe9e,EAAK8a,GACzB,IAAIja,EAAO,mBAAqBI,IAC5BjB,EAAIoP,MAAM,MAAOpP,GAAO,aAAea,EAAUb,GAAO,aAAea,EAC3E,IAAIke,EAAS9O,SAAS4B,cAAc,UAYpC,OAXAkN,EAAOzZ,KAAO,kBACdyZ,EAAOlhB,IAAMmC,EAEbc,OAAOD,GAAQ,SAAUme,GACvBlE,EAAS,KAAMkE,GACf/O,SAASgP,qBAAqB,QAAQ,GAAG5E,YAAY0E,GACrDA,EAAS,YACFje,OAAOD,IAGhBoP,SAASgP,qBAAqB,QAAQ,GAAGhF,YAAY8E,GAC9CpY,MAETyE,IAAK,SAAapL,EAAKkf,EAASzY,GAC9B,GAAI/H,EAAWwgB,GAAU,CACvB,IAAI5b,EAAImD,EACRA,EAAKyY,EACLA,EAAU5b,EAGZ,GAAI3D,GAAWkf,GAAKzT,IAAI/K,KACtB,OAAOwe,GAAKzT,IAAI/K,KAAKL,EAAKyG,EAAIyY,GAGhC,IAAIC,EAASN,GAAKO,WAAW3Y,GAI7B,GAFA0Y,EAAOE,KAAK,MAAOrf,GAAK,GAEpBkf,EAAS,CACX,IAAK,IAAIphB,KAAKohB,EAAQI,QACpBH,EAAOI,iBAAiBzhB,EAAGohB,EAAQI,QAAQxhB,IAG7CqhB,EAAOK,gBAA0C,YAAxBN,EAAQO,YAE7BP,EAAsB,eACxBC,EAAOO,aAAeR,EAAsB,cAKhD,OADAC,EAAOQ,KAAK,MACLR,GAETS,KAAM,SAAc5f,EAAKkf,EAASzY,GAChC,IAAIoZ,EAEJ,GAAKthB,EAASyB,GAMP,CACL,GAAItB,EAAWwgB,GAAU,CACvB,IAAIY,EAAKrZ,EACTA,EAAKyY,EACLA,EAAUY,EAIZD,GADAX,EAAUA,GAAW,IACFW,aAdD,CAClB,IAAIvc,EAAImD,EACRoZ,EAAWX,EAEXlf,GADAkf,EAAUlf,GACIA,IACdyG,EAAKnD,EAYP,GAAI3D,GAAWkf,GAAKe,KAAKvf,KAEvB,OADA6e,EAAQlf,IAAMA,EACP6e,GAAKe,KAAKvf,KAAK6e,EAASW,EAAUpZ,GAG3C,IAAI0Y,EAASN,GAAKO,WAAW3Y,GAY7B,GAVA0Y,EAAOE,KAAK,OAAQH,EAAQlf,KAAK,GAE5Bkf,EAAQI,UACXJ,EAAQI,QAAU,IAGfJ,EAAQI,QAAQ,kBACnBJ,EAAQI,QAAQ,gBAAkB,qCAGhC,qBAAsBH,EACxB,IAAK,IAAIhd,KAAK+c,EAAQI,QAChBJ,EAAQI,QAAQ1gB,eAAeuD,IACjCgd,EAAOI,iBAAiBpd,EAAG+c,EAAQI,QAAQnd,IAUjD,OALK5D,EAASshB,KACZA,EAAWze,KAAKyG,UAAUgY,IAG5BV,EAAOQ,KAAKE,GACLV,GAETY,cAAe,SAAuBZ,EAAQ1Y,GAC5C,OAAO,WACqB,IAAtB0Y,EAAOa,aACa,MAAlBb,EAAOc,OACmB,gBAAxBd,EAAOO,aAGmB,IAFbP,EAAOe,SAETC,WACX1Z,EAAG,IAAI9B,MAAM,8CAEb8B,EAAG,KAAM,CACPuY,KAAMG,EAAOe,SACbE,aAAcjB,EAAOkB,kBAAkB,iBACvCC,QAASnB,EAAOkB,kBAAkB,WAClCvb,YAAaqa,EAAOkB,kBAAkB,kBAI1C5Z,EAAG,KAAM0Y,EAAOoB,cAGlB9Z,EAAG,IAAI9B,MAAMwa,EAAOqB,WAAa,IAAMrB,EAAOc,YAKtDb,WAAY,SAAoB3Y,GAC9B,IAAI0Y,EAEJ,IACEA,EAAS,IAAIsB,eACb,MAAO/F,GACP,IACEyE,EAAS,IAAIuB,cAAc,kBAC3B,MAAOhG,GACP,IACEyE,EAAS,IAAIuB,cAAc,qBAC3B,MAAOhG,MAKb,OADAyE,EAAOwB,mBAAqB9B,GAAKkB,cAAcZ,EAAQ1Y,GAChD0Y,GAETyB,eAAgB,SAAwB5gB,EAAKkf,EAASzY,GACpD,GAAI/H,EAAWwgB,GAAU,CACvB,IAAI5b,EAAImD,EACRA,EAAKyY,EACLA,EAAU5b,EAQZ,OALK4b,IACHA,EAAU,IAGZA,EAAsB,aAAI,cACnBL,GAAKzT,IAAIpL,EAAKkf,EAASzY,IAEhCoa,SAAU,SAAkB1gB,EAAKH,EAAKkf,GACpC,OAAOL,GAAK+B,eAAe5gB,EAAKkf,GAAS,SAAUjN,EAAK6O,GACtD,GAAI7O,EACE9R,EAAI4gB,SACN5gB,EAAI4gB,QAAQ9O,QAET,GAAI6O,EAAS,CAClB,IAAIE,EAAMlgB,OAAOkgB,KAAOlgB,OAAOmgB,UAC3BC,EAAS/gB,EAAI+gB,OAEjB/gB,EAAI+gB,OAAS,WACPA,GACFA,IAGFF,EAAIG,gBAAgBhhB,EAAItC,MAG1B,IAAIujB,EAAO,IAAI/b,KAAK,CAAC,IAAID,WAAW0b,EAAQ9B,OAAQ,CAClD1Z,KAAMwb,EAAQhc,cAEhB3E,EAAIigB,aAAeU,EAAQV,aAC3BjgB,EAAImgB,QAAUQ,EAAQR,QACtBngB,EAAItC,IAAMijB,EAAQ9B,KAAKmB,WAAaa,EAAIK,gBAAgBD,GAAQrb,OAMxE,QAAe,SAAU/F,EAAKkf,EAASzY,GACrC,GAAI/H,EAAWwgB,GAAU,CACvB,IAAI5b,EAAImD,EACRA,EAAKyY,EACLA,EAAU5b,EAGZ,IAAIwX,EAAW,SAAkB7I,EAAKqP,GACpC,IAAItC,EAAOsC,EAAOpgB,EAAUogB,GAAQ,KACpC7a,EAAGwL,EAAK+M,IAGV,OAAIE,GAAWA,EAAe,MACrBL,GAAKC,MAAM9e,EAAK8a,GAGlB+D,GAAKzT,IAAIpL,EAAKkf,EAASpE,KAM5ByG,IAAa,EACbC,GAAc,KACdC,GAAStiB,KAAKC,GAAK,IAEnBsiB,GAAS,CACXC,cAAe,SAAuBC,GACpCL,GAAaK,GAEfC,aAAc,SAAsB7U,EAAOC,EAAQ6U,GACjD,IAAIlQ,EAUJ,OARKjS,EAKHiS,EAAS,IAAIkQ,EAAY9U,EAAOC,KAJhC2E,EAAS6H,GAAS,WACXzM,MAAQA,EACf4E,EAAO3E,OAASA,GAKX2E,GAETmQ,kBAAmB,SAA2BC,EAAKhT,GACjDgT,EAAIC,aAAe,MACnBD,EAAIxK,KAAOgB,GAAQxJ,GACnB,IAAIkT,EAAOlT,EAAgB,SAEtBkT,IACHA,EA5BmB,QA+BrBF,EAAIG,UAAYT,GAAOU,QAAQF,EAAMlT,EAAmB,cAE1DqT,cAAe,SAAuBL,EAAKhT,EAAOhB,EAAW4T,GAC3D,GAAK5S,EAAL,CAIA,IAAIsT,EAActT,EAAiB,UAE9BjR,EAAMukB,IAAgBN,EAAIO,YAAcD,IAC3CN,EAAIO,UAAYD,GAGlB,IAAIE,EAAgBxT,EAAuB,gBACvCyT,EAAczT,EAAiB,WA/CZ,OAiDvB,GAAI4S,EACFI,EAAIU,YAAc,YACb,GAAIF,GAAiBxU,EAAW,CACrC,IAAI2U,GAEA3T,EAAqB,eAAKA,EAAqB,iBACjD2T,EAAgB,CAAC3T,EAAqB,cAAGA,EAAqB,gBAGhE0S,GAAOkB,kBAAkBZ,EAAKQ,EAAeF,EAAaK,EAAe3U,GAEzEgB,EAAqB,cAAI,QAChBX,GAAWoU,GAChBzT,EAA0B,mBAC5BgT,EAAIU,YAAchB,GAAOmB,gBAAgBb,EAAKS,EAAazT,EAA0B,oBAErFgT,EAAIU,YAjEe,OAoErBV,EAAIU,YAAcD,EAGhBzT,EAAgB,WAClBgT,EAAIc,SAAW9T,EAAgB,UAG7BA,EAAe,UACjBgT,EAAIe,QAAU/T,EAAe,SAG3BgT,EAAIgB,aAAerf,EAAeqL,EAAqB,gBACzDgT,EAAIgB,YAAYhU,EAAqB,eAGvC,IAAIiU,EAAiBjU,EAA0B,mBAC3CkT,EAAOlT,EAAmB,aAnFT,sBAqFrB,GAAI4S,EACFI,EAAIG,UAAY,YACX,GAAIc,GAAkBjV,EAAW,CACtC,IAAIkV,EAAaC,GAAgBF,GAC7BG,EAAcpV,EAAU6S,SAAS,CAACqC,EAAY,KAAM,OAMxD,GAJKE,IACHA,EAAcpV,EAAU6S,SAAS,CAACqC,EAAa,WAAY,KAAMZ,KAG/DviB,EAAMmjB,IAAeE,aAAuBC,QAAUhQ,GAAUb,MAAQa,GAAUlD,IAAK,CACzF,IAAIrC,EAAIsV,EAAYpW,OAAS,GACzBe,EAAIqV,EAAYnW,QAAU,GAC1B2E,EAAS8P,GAAOG,aAAa/T,EAAGC,GACpC2T,GAAO4B,MAAM1R,EAAOG,WAAW,MAAOqR,EAAa,EAAG,EAAGtV,EAAGC,GAC5DqV,EAAcxR,EAGXwR,GAKHpB,EAAIG,UAAYH,EAAIuB,cAAcH,EAAa,WAE3CpU,EAAwB,kBAAKA,EAAwB,oBACvDgT,EAAIG,UAAgC,qBAAI,CAACnT,EAAwB,iBAAGA,EAAwB,oBAPvE,oBAAZwU,SACTA,QAAQC,KAAK,oBAAqBP,QAS7B7U,GAAW6T,GAChBlT,EAA6B,sBAC/BgT,EAAIG,UAAYT,GAAOmB,gBAAgBb,EAAKE,EAAMlT,EAA6B,uBAE/EgT,EAAIG,UAAY,sBAGlBH,EAAIG,UAAYD,IAGpBW,gBAAiB,SAAyBb,EAAKpZ,EAAG8a,GAChD,IAAIC,EAAW,KACXC,EAAShb,EAAU,OACnBpF,EAAMkgB,EAAOG,SACbpgB,EAAMigB,EAAOI,SACb9W,EAAQ0W,EAAOK,WACf9W,EAASyW,EAAOM,YAEpB,GAAKpb,EAAQ,MAAmB,WAAdA,EAAQ,MAYnB,GAAkB,WAAdA,EAAQ,KAAgB,CACjC,GAAKgb,EAIE,CACL,GAAsB,IAAlBA,EAAOhmB,OACT,MAAM,IAAI+G,MAAM,qDAGlBif,EAAS,CAACpgB,EAAIb,EAAIihB,EAAO,GAAK5W,EAAOxJ,EAAIuQ,EAAI6P,EAAO,GAAK3W,EAAQD,EAAQ4W,EAAO,GAAIpgB,EAAIb,EAAIihB,EAAO,GAAK5W,EAAOxJ,EAAIuQ,EAAI6P,EAAO,GAAK3W,EAAQD,EAAQ4W,EAAO,QAT/I,CACX,IAAIzZ,EAAIuZ,EAAOO,YAAY9P,SAE3ByP,EAAS,CAACzZ,EAAExH,EAAGwH,EAAE4J,EAAG5U,KAAK+D,IAAIiH,EAAExH,EAAIa,EAAIb,GAAIwH,EAAExH,EAAGwH,EAAE4J,EAAG,GASvD4P,EAAW3B,EAAIkC,qBAAqBpa,MAAMkY,EAAK4B,QAzBP,CACxC,GAAKA,EAEE,CACL,GAAsB,IAAlBA,EAAOhmB,OACT,MAAM,IAAI+G,MAAM,qDAGlBif,EAAS,CAACpgB,EAAIb,EAAIihB,EAAO,GAAK5W,EAAOxJ,EAAIuQ,EAAI6P,EAAO,GAAK3W,EAAQzJ,EAAIb,EAAIihB,EAAO,GAAK5W,EAAOxJ,EAAIuQ,EAAI6P,EAAO,GAAK3W,QANhH2W,EAAS,CAACpgB,EAAIb,EAAGa,EAAIuQ,EAAGtQ,EAAId,EAAGa,EAAIuQ,GASrC4P,EAAW3B,EAAImC,qBAAqBra,MAAMkY,EAAK4B,GAoBjD,OAHAhb,EAAc,WAAEwb,SAAQ,SAAU3X,GAChCkX,EAASU,aAAava,MAAM6Z,EAAUlX,MAEjCkX,GAETf,kBAAmB,SAA2BZ,EAAKQ,EAAeF,EAAagC,EAAmBtW,GAChG,IACIuW,EADAC,EAASrB,GAAgBX,GAG7B,GAAI7iB,EACF4kB,EAAevW,EAAU6S,SAAS,CAAC2D,EAAQ,KAAMlC,QAC5C,CACL,IAAItjB,EAAMwlB,EAAS,YAAclC,EAGjC,KAFAiC,EAAevW,EAAU6S,SAAS7hB,IAEf,CACjB,IAAIylB,EAAWzW,EAAU6S,SAAS,CAAC2D,EAAQ,KAAM,OAEjD,GAAIC,EAAU,CACZ,IAAI3W,EAKFA,EAHG2W,EAASzX,OAAUyX,EAASxX,OAG3B9N,KAAK8D,MAAMwhB,EAASzX,MAAQsV,EAAcmC,EAASxX,QAFnDqV,EAKN,IAAIoC,EAAgBhD,GAAOG,aAAa/T,EAAGwU,EAAaN,EAAIpQ,OAAOpT,aACnEkjB,GAAO4B,MAAMoB,EAAc3S,WAAW,MAAO0S,EAAU,EAAG,EAAG3W,EAAGwU,GAChEtU,EAAU2W,YAAY,CAAC3lB,EAAK,KAAMsjB,GAAcoC,GAChDH,EAAeG,IAKjBH,GACFvC,EAAIU,YAAcV,EAAIuB,cAAcgB,EAAc,UAClDvC,EAAIU,YAA+B,kBAAI4B,GACX,oBAAZd,SAChBA,QAAQC,KAAK,oBAAqBe,IAGtCI,UAAW,SAAmB5C,EAAKtc,EAAIC,EAAIkf,EAAIC,GAC7C9C,EAAIpQ,OAAOmT,QAAS,EACpB/C,EAAI4C,UAAUlf,EAAIC,EAAIkf,EAAIC,IAE5BE,WAAY,SAAoBhD,EAAKiD,EAAatiB,EAAGoR,GAOnD,GANIwN,KACF0D,EAAc,GAGhBjD,EAAIpQ,OAAOmT,QAAS,EAEA,IAAhBE,EAAJ,CAIA,IAUIC,EAVAC,EAAYzD,GAAO0D,WAAWpD,EAAIG,WAElCnG,EAASgG,EAAIG,WAAaH,EAAIG,UAAgC,qBAC9Dvc,EAAKoW,EAASA,EAAO,GAAK,EAC1BnW,EAAKmW,EAASA,EAAO,GAAK,EAE1Bje,EAAMknB,KACRA,EAAc,GAKZA,EAAc,IAChBC,EAAQlD,EAAIqD,YACZrD,EAAIqD,aAAeJ,GAGjBE,IACFxiB,EAAIA,GAAK,EACToR,EAAIA,GAAK,EACTiO,EAAIsD,UAAU3iB,EAAIiD,EAAImO,EAAIlO,IAG5Bmc,EAAIE,OAEAiD,GACFnD,EAAIsD,WAAW3iB,EAAIiD,GAAKmO,EAAIlO,GAG1Bof,EAAc,IAChBjD,EAAIqD,YAAcH,KAGtB9C,QAAS,SAAiBmD,EAAOne,GAK/B,OAJIrJ,EAAMqJ,KACRA,EAAK,GAGU,MAAbme,EAAM,GACDA,GAKY,IAAjBA,EAAM3nB,QACR4B,EAAI8c,SAASiJ,EAAM3d,UAAU,EAAG,GAAI,IACpCgB,EAAI0T,SAASiJ,EAAM3d,UAAU,EAAG,GAAI,IACpCvE,EAAIiZ,SAASiJ,EAAM3d,UAAU,EAAG,GAAI,MAEpCpI,EAA0C,GAAtC8c,SAASiJ,EAAM3d,UAAU,EAAG,GAAI,IACpCgB,EAA0C,GAAtC0T,SAASiJ,EAAM3d,UAAU,EAAG,GAAI,IACpCvE,EAA0C,GAAtCiZ,SAASiJ,EAAM3d,UAAU,EAAG,GAAI,KAG/B,QAAUpI,EAAI,IAAMoJ,EAAI,IAAMvF,EAAI,IAAM+D,EAAK,KAZpD,IAAI5H,EAAGoJ,EAAGvF,GAcZigB,MAAO,SAAetB,EAAK7hB,EAAKwC,EAAGoR,EAAG/G,EAAOC,GAC3C+U,EAAIpQ,OAAOmT,QAAS,EAEpB,IACM9mB,EAAS+O,IAAU/O,EAASgP,GAC9B+U,EAAIwD,UAAUrlB,EAAKwC,EAAGoR,EAAG/G,EAAOC,GAEhC+U,EAAIwD,UAAUrlB,EAAKwC,EAAGoR,GAExB,MAAO0R,GACHjC,UACFA,QAAQC,KAAK,sCAAuCgC,GACpDjC,QAAQC,KAAKtjB,MAInBoX,KAAM,SAAcyK,EAAK0D,EAAOC,EAAI3W,EAAO4W,GACzClE,GAAOmE,gBAAgB7D,EAAK4D,EAAe,KAAG5W,EAAO2W,EAAIC,EAAe,KAAGA,EAAkB,UAE/FC,gBAAiB,SAAyB7D,EAAKjJ,EAAO/J,EAAOuF,EAAOuR,EAAeC,GASjF,IARA,IAIIxO,EACAyO,EALAC,EAAU5N,GAAcyN,EAAe9W,EAA+B,wBAAGA,EAA6B,uBACtGkX,EAAaH,EAAiB,OAAI/W,EAAuB,gBACzDmX,EAAY5R,EAAMM,IAAI,EAAGoR,EAAQlS,GACjCqS,EAAYpX,EAAqB,cAGjC/B,EAAS,EAEJvP,EAAI,EAAG4E,EAAMyW,EAAMnb,OAAQF,EAAI4E,IACtCiV,EAAOwB,EAAMrb,GAAS,KACtBsoB,EAAW3N,GAAcU,EAAMrb,GAAS,KAAGsR,EAA+B,wBAAGA,EAA6B,uBAE1G0S,GAAO2E,YAAYrE,EAAKzK,EAAM4O,EAAUtR,IAAImR,EAASrjB,EAAGjF,EAAIwoB,GAAalX,EAAsB,eAAGA,EAAoB,aAAGA,EAAuB,mBAE5IoX,EAAY,IACdnZ,GAAUiZ,GAEGH,EAAiB,QAAKK,IATM1oB,OAe/C2oB,YAAa,SAAqBrE,EAAKzK,EAAMoO,EAAIW,EAAgBC,EAAcC,GACzEjF,KACFiF,EAAgB,GAGlB,IAEIC,EAAKvE,EAFLwE,EAA6B,IAAlBF,GAA0C,IAAnBF,EACtCtE,EAAIC,aAAe,MAEnB,IAAI0E,EAAa3E,EAAI2E,WACjBC,EAAgB5E,EAAI4E,cACpBC,EAAgB7E,EAAI6E,cAExB,GAAIH,EAAU,CACZ,IAAIxB,EAAQlD,EAAIqD,YAChBrD,EAAIqD,aAAemB,EACnBxE,EAAI8E,WAAa,EACjB9E,EAAIc,SAAW,QACfd,EAAIe,QAAU,QACdf,EAAIO,UAA6B,EAAjB+D,EAChBtE,EAAIU,YAAc6D,EAClBvE,EAAI+E,WAAWxP,EAAMoO,EAAGhjB,EAAGgjB,EAAG5R,EA3UlB,GA4UZiO,EAAI8E,WAAa,GACjB9E,EAAIqD,YAAcH,EAClBuB,EAAMzE,EAAIgF,yBACVhF,EAAIgF,yBAA2B,kBAC/B9E,EAAOF,EAAIG,UACXH,EAAIG,UAAY,OAGdwE,GAAcD,IAChB1E,EAAI2E,WAAa3E,EAAI4E,cAAgB5E,EAAI6E,cAAgB,GAG3DnF,GAAOuF,SAASjF,EAAKzK,EAAMoO,GAEvBc,IACFzE,EAAIgF,yBAA2BP,EAC/B/E,GAAOuF,SAASjF,EAAKzK,EAAMoO,EAAIzD,GAE3ByE,IACF3E,EAAI2E,WAAaA,EACjB3E,EAAI4E,cAAgBA,EACpB5E,EAAI6E,cAAgBA,KAI1BI,SAAU,SAAkBjF,EAAKzK,EAAMoO,EAAIuB,GACzClF,EAAIpQ,OAAOmT,QAAS,EAEhBmC,IACFlF,EAAIG,UAAY+E,GAGlBlF,EAAIiF,SAAS1P,EAAMoO,EAAGhjB,EAAGgjB,EAAG5R,EA5Wd,IA8WhBoT,QAAS,SAAiBnF,EAAKoF,EAAezkB,EAAGoR,GAO/C,GANIwN,KACF6F,EAAgB,GAGlBpF,EAAIpQ,OAAOmT,QAAS,EAEE,IAAlBqC,EAAJ,CAIA,IASIlC,EATAlJ,EAASgG,EAAIU,aAAeV,EAAIU,YAA+B,kBAC/D9c,EAAKoW,EAASA,EAAO,GAAK,EAC1BnW,EAAKmW,EAASA,EAAO,GAAK,EAC1BmJ,EAAYzD,GAAO0D,WAAWpD,EAAIU,gBAAkB3kB,EAAM4E,KAAO5E,EAAMgW,KAAOhW,EAAM6H,KAAQ7H,EAAM8H,IAElG9H,EAAMqpB,KACRA,EAAgB,GAKdA,EAAgB,IAClBlC,EAAQlD,EAAIqD,YACZrD,EAAIqD,aAAe+B,GAGjBjC,IACFxiB,EAAIA,GAAK,EACToR,EAAIA,GAAK,EACTiO,EAAIsD,UAAU3iB,EAAIiD,EAAImO,EAAIlO,IAG5Bmc,EAAIqF,SAEAlC,GACFnD,EAAIsD,WAAW3iB,EAAIiD,GAAKmO,EAAIlO,GAG1BuhB,EAAgB,IAClBpF,EAAIqD,YAAcH,KAGtBoC,MAAO,SAAetF,EAAKuF,EAAQC,EAAeC,EAAaC,GAC7D,GAAK/jB,EAAe4jB,GA0BpB,IAJA,IAEIhT,EAAiBoT,EAFjBC,EAAWjkB,EAAe6jB,GAC1BK,GAAwC,IAAxBH,GAAuChG,GAAO0D,WAAWpD,EAAIU,aAGxEhlB,EAAI,EAAG4E,EAAMilB,EAAO3pB,OAAQF,EAAI4E,EAAK5E,IAG5C,GAFA6W,EAAQgT,EAAO7pB,IAEVkqB,GAAY5F,EAAIgB,YACnBhB,EAAI8F,OAAOvT,EAAM5R,EAAG4R,EAAMR,GAEtB8T,GAAiBnqB,EAAI,IAEvBqqB,EADWR,EAAO7pB,EAAI,GACI6W,GAC1ByN,EAAIgG,YACJhG,EAAIiG,OAAO1T,EAAM5R,EAAG4R,EAAMR,SAEvB,GAAI6T,EAAU,CACnB,GAAIlqB,IAAM4E,EAAM,EACd,MAGFqlB,EAAYJ,EAAO7pB,EAAI,GACvBwqB,GAAalG,EAAKzN,EAAOoT,EAAWH,GAxCxC,SAASO,EAAgBI,EAAIC,GAC3B,IAAIC,EAAS9iB,EAAc4iB,EAAGxlB,EAAGwlB,EAAGpU,EAAGqU,EAAGzlB,EAAGylB,EAAGrU,GAChDiO,EAAIsG,OACJ,IAAIC,EAAOppB,KAAKsX,IAAI4R,GAEhBlpB,KAAK+D,IAAIqlB,GAAQ,KACnBvG,EAAIsD,UAAU6C,EAAGxlB,EAAIqf,EAAIO,UAAY,EAAG4F,EAAGpU,GAE3CiO,EAAIsD,UAAU6C,EAAGxlB,EAAGwlB,EAAGpU,EAAIiO,EAAIO,UAAY,EAAIgG,GAGjDvG,EAAIrL,OAAO0R,GAEX3G,GAAOyF,QAAQnF,EAAKyF,GAEpBzF,EAAIwG,YA6BRpb,KAAM,SAAc4U,EAAKuF,EAAQE,EAAaxC,EAAauC,GACpD7jB,EAAe4jB,KAIpBvF,EAAIgG,YACJhG,EAAIiG,OAAOV,EAAO,GAAG5kB,EAAG4kB,EAAO,GAAGxT,GAElC2N,GAAO4F,MAAMtF,EAAKuF,EAAQC,EAAeC,GAEzC/F,GAAOyF,QAAQnF,EAAKyF,KAEtBgB,WAAY,SAAoBzG,EAAKuF,GACnC,GAAKA,GAA4B,IAAlBA,EAAO3pB,OAGtB,IAAK,IAAIF,EAAI,EAAG4E,GAFhBilB,EAASA,EAAO,IAEa3pB,OAAQF,EAAI4E,EAAK5E,IAAK,CACjD,IAAI6W,EAAQgT,EAAO7pB,GACfiF,EAAI4R,EAAM5R,EACVoR,EAAIQ,EAAMR,EAEJ,IAANrW,EACFskB,EAAIiG,OAAOtlB,EAAGoR,GAEdiO,EAAI8F,OAAOnlB,EAAGoR,GAGZrW,IAAM4E,EAAM,IACdK,EAAI4kB,EAAO,GAAG5kB,EACdoR,EAAIwT,EAAO,GAAGxT,EACdiO,EAAI8F,OAAOnlB,EAAGoR,MAIpB2U,QAAS,SAAiB1G,EAAKuF,EAAQE,EAAaxC,EAAauC,EAAemB,GAC9E,GAAI3G,EAAI4G,YACNlH,GAAO+G,WAAWzG,EAAKuF,QAKzB,GAAK5jB,EAAe4jB,GAApB,CAIA,IAAIM,EAAgBnG,GAAO0D,WAAWpD,EAAIU,aACtCmG,EAAYllB,EAAe6jB,KAAmBxF,EAAIgB,aAAe6E,IAAkBc,EAElFhlB,EAAe4jB,EAAO,MACzBA,EAAS,CAACA,IAGZ,IAcIngB,EAAI1J,EAAG4E,EAdPwmB,EAAW9G,EAgBf,GAdIuF,EAAO3pB,OAAS,IAAM+B,IACnB6hB,KACHA,GAAcE,GAAOG,aAAa,EAAG,IAGvCG,EAAIpQ,OAAOmT,QAAS,EACpBvD,GAAYxU,MAAQgV,EAAIpQ,OAAO5E,MAC/BwU,GAAYvU,OAAS+U,EAAIpQ,OAAO3E,OAEhC8b,GADA/G,EAAMR,GAAYzP,WAAW,MACT+W,IAKlBD,EAAW,CAGb,IAFA7G,EAAIsG,OAEC5qB,EAAI,EAAG4E,EAAMilB,EAAO3pB,OAAQF,EAAI4E,EAAK5E,IACnCiG,EAAe4jB,EAAO7pB,MAI3BgkB,GAAOsH,MAAMhH,EAAKuF,EAAO7pB,GAAI,KAAM,GAAG,GAEtC0J,EAAK6d,EAEDvnB,EAAI,IACNskB,EAAIgF,yBAA2B,kBAC/B5f,EAAK,GAGPsa,GAAOsD,WAAWhD,EAAK5a,EAAImgB,EAAO7pB,GAAG,GAAGiF,EAAG4kB,EAAO7pB,GAAG,GAAGqW,GAEpDrW,EAAI,EACNskB,EAAIgF,yBAA2B,cACtB1kB,EAAM,IACf0f,EAAIG,UAAY,QAGlBT,GAAOyF,QAAQnF,EAAK,IAGtBA,EAAIwG,UAGN,IAAK9qB,EAAI,EAAG4E,EAAMilB,EAAO3pB,OAAQF,EAAI4E,EAAK5E,IACnCiG,EAAe4jB,EAAO7pB,MAIvBirB,GACFjH,GAAOuH,gBAAgBjH,EAAKuF,EAAO7pB,GAAI+pB,EAAakB,GAAY,GAChE3G,EAAIkH,aAEJxH,GAAOsH,MAAMhH,EAAKuF,EAAO7pB,GAAI8pB,EAAeC,GAGzCoB,IACHzhB,EAAK6d,EAEDvnB,EAAI,IACNskB,EAAIgF,yBAA2B,kBAC/B5f,EAAK,GAGPsa,GAAOsD,WAAWhD,EAAK5a,EAAImgB,EAAO7pB,GAAG,GAAGiF,EAAG4kB,EAAO7pB,GAAG,GAAGqW,GAEpDrW,EAAI,EACNskB,EAAIgF,yBAA2B,cACtB1kB,EAAM,IACf0f,EAAIG,UAAY,SAIpBT,GAAOyF,QAAQnF,EAAKyF,IAGlBF,EAAO3pB,OAAS,IAAM+B,IACxBmpB,EAAStD,UAAUhE,GAAa,EAAG,GACnCsH,EAASlX,OAAOmT,OAAS/C,EAAIpQ,OAAOmT,OACpCgE,GAAeD,EAAU9G,MAG7BgH,MAAO,SAAehH,EAAKmH,EAAM3B,EAAeC,EAAa2B,GAC3D,IAAIjE,EAAYzD,GAAO0D,WAAWpD,EAAIU,aAEjC0G,IAAiBjE,GAAcgE,EAAK,GAAG3T,OAAO2T,EAAKA,EAAKvrB,OAAS,MACpEurB,EAAOA,EAAKlsB,OAAO,CAACksB,EAAK,MAG3BnH,EAAIgG,YACJhG,EAAIiG,OAAOkB,EAAK,GAAGxmB,EAAGwmB,EAAK,GAAGpV,GAE9B2N,GAAO4F,MAAMtF,EAAKmH,EAAM3B,EAAeC,EAAa2B,GAE/CjE,GACHnD,EAAIkH,aAGRD,gBAAiB,SAAyBjH,EAAKuF,EAAQE,EAAa4B,EAAaC,EAAOC,EAASC,GAC/F,GAAKjC,EAIL,GAAIA,EAAO3pB,QAAU,IAAMyrB,EACzB3H,GAAOtU,KAAK4U,EAAKuF,EAAQE,OAD3B,CAsDA,IAKIgC,EALAjjB,EAAQ+gB,EAAO3pB,OACf+N,EAAI2d,EAAQ9iB,EAAQA,EAAQ,EAChCwb,EAAIgG,YACJhG,EAAIiG,OAAOV,EAAO,GAAG5kB,EAAG4kB,EAAO,GAAGxT,QAChBtR,IAAd+mB,IAAyB7d,GAAKxM,KAAKsE,IAAIkI,EAAI4d,EAAU,EAAG,IAG5D,IAAK,IAAI7rB,EAAI,EAAGA,EAAIiO,EAAGjO,IAAK,CAC1B,IAAIgI,EAAK6hB,EAAO7pB,GAAGiF,EACfgD,EAAK4hB,EAAO7pB,GAAGqW,EACfvO,OAAK,EACLC,OAAK,EACLof,OAAK,EACLC,OAAK,EACL4E,OAAK,EACLC,OAAK,EAELjsB,EAAI,EAAI,EACL4rB,GAIH9jB,EAAK+hB,EAAO5b,EAAI,GAAGhJ,EACnB8C,EAAK8hB,EAAO5b,EAAI,GAAGoI,IAJnBvO,EAAK+hB,EAAO7pB,EAAI,GAAGiF,EACnB8C,EAAK8hB,EAAO7pB,EAAI,GAAGqW,IAMrBvO,EAAK+hB,EAAO7pB,EAAI,GAAGiF,EACnB8C,EAAK8hB,EAAO7pB,EAAI,GAAGqW,GAGjBrW,EAAI,EAAI8I,GACVqe,EAAK0C,EAAO7pB,EAAI,GAAGiF,EACnBmiB,EAAKyC,EAAO7pB,EAAI,GAAGqW,IAEnB8Q,EAAK0C,EAAO7pB,EAAI,EAAI8I,GAAO7D,EAC3BmiB,EAAKyC,EAAO7pB,EAAI,EAAI8I,GAAOuN,GAGzBrW,EAAI,EAAI8I,GACVkjB,EAAKnC,EAAO7pB,EAAI,GAAGiF,EACnBgnB,EAAKpC,EAAO7pB,EAAI,GAAGqW,GACTuV,GAIVI,EAAKnC,EAAO7pB,EAAI,EAAI8I,GAAO7D,EAC3BgnB,EAAKpC,EAAO7pB,EAAI,EAAI8I,GAAOuN,IAJ3B2V,EAAKnC,EAAO7pB,GAAGiF,EACfgnB,EAAKpC,EAAO7pB,GAAGqW,GAMjB,IAAI6V,EAAaC,EAAsBrkB,EAAIC,EAAIC,EAAIC,EAAIkf,EAAIC,EAAI4E,EAAIC,EAAIN,EAAa3rB,IAAMiO,EAAI,EAAI6d,EAAY,GAE9G,GAAI9rB,IAAMiO,EAAI,GAAK6d,GAAa,GAAKA,EAAY,EAAG,CAClDxH,EAAI8H,cAAcF,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAIA,EAAW,IACxGrC,EAAO1lB,OAAO8J,EAAI,EAAGnF,GAASmF,EAAI,GAAK,GACvC,IAAIoe,EAAY,IAAIlU,GAAM+T,EAAW,GAAIA,EAAW,IACpDG,EAAUC,cAAgB,IAAInU,GAAM+T,EAAW,GAAIA,EAAW,IAC9DrC,EAAO9lB,KAAKsoB,GACZvjB,EAAQ+gB,EAAO3pB,YAEfokB,EAAI8H,cAAcF,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAIA,EAAW,GAAI/E,EAAIC,GAGpFyC,EAAO7pB,GAAGusB,cAAgBL,EAAW3pB,MAAM,EAAG,GAC9CsnB,EAAO7pB,GAAGssB,cAAgBP,EAAgBA,EAAcxpB,MAAM,GAAK,KACnEwpB,EAAgBG,GAGbN,GAAS/B,EAAO,GAAGyC,gBACtBzC,EAAO,GAAG0C,cAAgB1C,EAAO,GAAGyC,qBAC7BzC,EAAO,GAAGyC,eAGdzC,EAAO/gB,EAAQ,GAAGwjB,gBACrBzC,EAAO/gB,EAAQ,GAAGwjB,cAAgBzC,EAAO/gB,EAAQ,GAAGyjB,eAGtDvI,GAAOyF,QAAQnF,EAAKyF,GAzGpB,SAASoC,EAAsBrkB,EAAIC,EAAIC,EAAIC,EAAIkf,EAAIC,EAAI4E,EAAIC,EAAIN,EAAa/lB,GAC1E,IAAI4mB,GAAO1kB,EAAKE,GAAM,EAClBykB,GAAO1kB,EAAKE,GAAM,EAClBykB,GAAO1kB,EAAKmf,GAAM,EAClBwF,GAAO1kB,EAAKmf,GAAM,EAClBwF,GAAOzF,EAAK6E,GAAM,EAClBa,GAAOzF,EAAK6E,GAAM,EAClBa,EAAOrrB,KAAKqV,MAAM9O,EAAKF,IAAOE,EAAKF,IAAOG,EAAKF,IAAOE,EAAKF,IAC3DglB,EAAOtrB,KAAKqV,MAAMqQ,EAAKnf,IAAOmf,EAAKnf,IAAOof,EAAKnf,IAAOmf,EAAKnf,IAE3D+kB,EAAKF,GAAQA,EAAOC,GACpBE,EAAKF,GAAQA,EAFNtrB,KAAKqV,MAAMkV,EAAK7E,IAAO6E,EAAK7E,IAAO8E,EAAK7E,IAAO6E,EAAK7E,KAG3D8F,EAAMV,GAAOE,EAAMF,GAAOQ,EAC1BG,EAAMV,GAAOE,EAAMF,GAAOO,EAC1BI,EAAMV,GAAOE,EAAMF,GAAOO,EAC1BI,EAAMV,GAAOE,EAAMF,GAAOM,EAC1BK,EAASJ,GAAOR,EAAMQ,GAAOvB,EAAc3jB,EAAKklB,EAChDK,EAASJ,GAAOR,EAAMQ,GAAOxB,EAAc1jB,EAAKklB,EAChDK,EAASJ,GAAOV,EAAMU,GAAOzB,EAAcxE,EAAKiG,EAChDK,EAASJ,GAAOV,EAAMU,GAAO1B,EAAcvE,EAAKiG,EAChDnB,EAAa,CAACoB,EAAQC,EAAQC,EAAQC,GAE1C,OAAI7nB,EAAI,EA1CV,SAAwB8nB,EAAIC,EAAI3lB,EAAIC,EAAI2lB,EAAKC,EAAKC,EAAKC,EAAK5G,EAAIC,GAC9D,IAAI4G,EAAK,EAAMN,EACXO,EAAK,EAAMN,EAEXO,EAAMlmB,EAAKimB,EAAKA,EAAW,EAANL,EAAUD,EAAKM,EAAKH,EAAMH,EAAKA,EAEpDQ,EAAMP,EAAMK,EAAKA,EAAW,EAANH,EAAUH,EAAKM,EAAK9G,EAAKwG,EAAKA,EAEpDS,EAAMnmB,EAAKgmB,EAAKA,EAAW,EAANJ,EAAUF,EAAKM,EAAKF,EAAMJ,EAAKA,EAEpDU,EAAMR,EAAMI,EAAKA,EAAW,EAANF,EAAUJ,EAAKM,EAAK7G,EAAKuG,EAAKA,EAOxD,MAAO,EAdG3lB,EAAKgmB,EAAKA,EAAW,EAANJ,EAAUF,EAAKM,EAAKF,EAAMJ,EAAKA,GAQzCO,GANLL,EAAMI,EAAKA,EAAW,EAANF,EAAUJ,EAAKM,EAAK7G,EAAKuG,EAAKA,GAM9BC,GAJhB1lB,EAAK+lB,EAAKA,EAAW,EAANH,EAAUH,EAAKM,EAAKD,EAAML,EAAKA,GAOzCO,GALLJ,EAAMG,EAAKA,EAAW,EAAND,EAAUL,EAAKM,EAAK5G,EAAKsG,EAAKA,GAK9BC,EAFjBO,EAAMF,EAAKG,EAAMT,EAGjBU,EAAMJ,EAAKK,EAAMX,EAFjBQ,EAAMD,EAAKE,EAAMR,EAGjBS,EAAMH,EAAKI,EAAMV,GA2BjBW,CAAe,EAAG1oB,EAAGoC,EAAIC,EAAIqlB,EAAQC,EAAQC,EAAQC,EAAQtG,EAAIC,GAEjE8E,IAkFbqC,YAAa,SAAqBjK,EAAKmG,EAAIC,EAAIC,GAC7C,IAAIjlB,EAAIilB,EACJ6D,EAAO/D,EAAG7T,WAAW8T,GACrB5oB,EAAI0sB,EAAO,EAAI/sB,KAAKuX,IAAItT,EAAI,GAC5B+oB,EAAOhtB,KAAKitB,MAAMhE,EAAGrU,EAAIoU,EAAGpU,GAAKmY,GAEjC/D,EAAGxlB,EAAIylB,EAAGzlB,IACZwpB,EAAOhtB,KAAKC,GAAK+sB,GAGnB,IACIE,EAAKF,GADC,GAAK1K,GAASre,EAAI,GAExBwC,EAAKzG,KAAKsX,IAAI4V,GAAM7sB,EACpBqG,EAAK1G,KAAKuX,IAAI2V,GAAM7sB,EACpB8sB,EAAKnE,EAAGxlB,EAAIiD,EACZ2mB,EAAKpE,EAAGpU,EAAIlO,EACZ2mB,EAAartB,KAAKitB,MAAMhE,EAAGrU,EAAIwY,GAAM/sB,GAErC8sB,EAAKlE,EAAGzlB,IACV6pB,EAAartB,KAAKC,GAAKotB,GAGzB,IAAIC,EAAWD,EAAappB,EAG5B,OAFA4e,EAAIgG,YACJhG,EAAI0K,IAAIJ,EAAIC,EAAI/sB,EAAGgtB,EAAYC,GACxB,CAACH,EAAIC,IAEdI,QAAS,SAAiB3K,EAAK7f,GAC7B6f,EAAI8F,OAAO3lB,EAAEQ,EAAGR,EAAE4R,IAEpB6Y,mBAAoB,SAA4B5K,EAAKuF,EAAQE,EAAaxC,GACxEjD,EAAIgG,YACJ,IAAI6E,EAAQtF,EAAO,GACnBvF,EAAIiG,OAAO4E,EAAMlqB,EAAGkqB,EAAM9Y,GAC1B,IAAIjF,EAAO,CAACkT,GACZlT,EAAKrN,KAAKqI,MAAMgF,EAAMyY,EAAO1lB,OAAO,IAEpC6f,GAAOoL,eAAehjB,MAAM4X,GAAQ5S,GAEpC4S,GAAOsD,WAAWhD,EAAKiD,GAEvBvD,GAAOyF,QAAQnF,EAAKyF,IAEtBqF,eAAgB,SAAwB9K,EAAKmG,EAAIC,EAAI2E,GACnD/K,EAAI8H,cAAc3B,EAAGxlB,EAAGwlB,EAAGpU,EAAGqU,EAAGzlB,EAAGylB,EAAGrU,EAAGgZ,EAAGpqB,EAAGoqB,EAAGhZ,IAErDiZ,QAAS,SAAiBhL,EAAK2D,EAAI3Y,EAAOigB,EAAWC,EAAczF,EAAaxC,GAC9E,IAAuBtiB,EAAGoR,EAAG3Q,EAAGC,EAAG8pB,EAC7BrvB,EACAsvB,EACAC,EACAC,EASNtL,EAAIgG,YAEAhb,IAAUigB,GAAajgB,IAAUkgB,EACnClL,EAAI0K,IAAI/G,EAAGhjB,EAAGgjB,EAAG5R,EAAG/G,EAAO,EAAG,EAAI7N,KAAKC,IAC9B4iB,EAAIgL,QACTC,IAAcC,GAChBlL,EAAIgL,QAAQrH,EAAGhjB,EAAGgjB,EAAG5R,EAAG/G,EAAOigB,EAAW,EAAY,IAATxL,GAAuB,IAATA,IAAc,GACzEO,EAAIgL,QAAQrH,EAAGhjB,EAAGgjB,EAAG5R,EAAG/G,EAAOkgB,EAAc,EAAG,EAAY,IAATzL,IAAc,IAEjEO,EAAIgL,QAAQrH,EAAGhjB,EAAGgjB,EAAG5R,EAAG/G,EAAOigB,EAAW,EAAG,EAAY,IAATxL,IAAc,IAtB3C9e,EAyBPgjB,EAAGhjB,EAzBOoR,EAyBJ4R,EAAG5R,EAvBnBqZ,GAFuBhqB,EAyBD4J,IAxBtBlP,EAAI,UAEJuvB,GAH0BhqB,EAyBG4pB,GAtBpBnvB,EACTwvB,GAJ6BH,EAyBWD,GArB7BpvB,EACfkkB,EAAIiG,OAAOtlB,EAAIS,EAAG2Q,GAClBiO,EAAI8H,cAAcnnB,EAAIS,EAAG2Q,EAAIsZ,EAAI1qB,EAAIyqB,EAAIrZ,EAAI1Q,EAAGV,EAAGoR,EAAI1Q,GACvD2e,EAAI8H,cAAcnnB,EAAIyqB,EAAIrZ,EAAI1Q,EAAGV,EAAIS,EAAG2Q,EAAIsZ,EAAI1qB,EAAIS,EAAG2Q,GACvDiO,EAAI8H,cAAcnnB,EAAIS,EAAG2Q,EAAIuZ,EAAK3qB,EAAIyqB,EAAIrZ,EAAIoZ,EAAIxqB,EAAGoR,EAAIoZ,GACzDnL,EAAI8H,cAAcnnB,EAAIyqB,EAAIrZ,EAAIoZ,EAAIxqB,EAAIS,EAAG2Q,EAAIuZ,EAAK3qB,EAAIS,EAAG2Q,GACzDiO,EAAIkH,aAkBNxH,GAAOsD,WAAWhD,EAAKiD,EAAaU,EAAGhjB,EAAIqK,EAAO2Y,EAAG5R,EAAIkZ,GAEzDvL,GAAOyF,QAAQnF,EAAKyF,EAAa9B,EAAGhjB,EAAIqK,EAAO2Y,EAAG5R,EAAIkZ,IAExDM,UAAW,SAAmBvL,EAAK2D,EAAI9O,EAAM4Q,EAAaxC,GACxD,IAAItiB,EAAIgjB,EAAGhjB,EACPoR,EAAI4R,EAAG5R,EACXiO,EAAIgG,YACJhG,EAAIzF,KAAK5Z,EAAGoR,EAAG8C,EAAY,MAAGA,EAAa,QAC3C6K,GAAOsD,WAAWhD,EAAKiD,EAAatiB,EAAGoR,GAEvC2N,GAAOyF,QAAQnF,EAAKyF,EAAa9kB,EAAGoR,IAEtCyZ,OAAQ,SAAgBxL,EAAK2D,EAAI9O,EAAM4W,EAAQhG,EAAaxC,GAC1D,IAAIyI,EAAMjM,GACN+K,EAAaiB,EAAO,GACpBhB,EAAWgB,EAAO,GAEtB,SAASD,EAAOxL,EAAKrf,EAAGoR,EAAG4Z,EAAQnB,EAAYC,GAC7C,IAAImB,EAAOF,GAAOjB,EACdoB,EAAOH,GAAOlB,EAClBxK,EAAIgG,YACJhG,EAAIiG,OAAOtlB,EAAGoR,GACdiO,EAAI0K,IAAI/pB,EAAGoR,EAAG4Z,EAAQC,EAAMC,GAC5B7L,EAAI8F,OAAOnlB,EAAGoR,GACd2N,GAAOsD,WAAWhD,EAAKiD,EAAatiB,EAAIgrB,EAAQ5Z,EAAI4Z,GAEpDjM,GAAOyF,QAAQnF,EAAKyF,EAAa9kB,EAAIgrB,EAAQ5Z,EAAI4Z,GAGnDH,EAAOxL,EAAK2D,EAAGhjB,EAAGgjB,EAAG5R,EAAG8C,EAAM2V,EAAYC,IAE5CrH,WAAY,SAAoBpW,GAC9B,OAAQzQ,EAASyQ,MAAY,iBAAkBA,IAEjD8e,UAAW,SAAmB9L,EAAKrf,EAAGoR,EAAGwO,EAAWgD,GAClDvD,EAAIpQ,OAAOmT,QAAS,EACpB/C,EAAIU,YAAc6C,EAClBvD,EAAIO,UAAYA,EAChBP,EAAIgG,YACJhG,EAAIiG,OAAOtlB,EAAI,EAAGoR,GAClBiO,EAAI8F,OAAOnlB,EAAI,EAAGoR,GAClBiO,EAAIiG,OAAOtlB,EAAGoR,EAAI,GAClBiO,EAAI8F,OAAOnlB,EAAGoR,EAAI,GAClBiO,EAAIqF,UAEN1S,KAAM,SAAc/C,EAAQzH,GAC1B,IAAI4jB,EAAS5jB,GAAKsP,GAAS,UAI3B,OAHAsU,EAAO/gB,MAAQ4E,EAAO5E,MACtB+gB,EAAO9gB,OAAS2E,EAAO3E,OACvB8gB,EAAOhc,WAAW,MAAMyT,UAAU5T,EAAQ,EAAG,GACtCmc,IAIX,SAAS7F,GAAalG,EAAKgM,EAAYC,EAAUC,GAC/C,IAAIC,EAAQH,EAAWrrB,EACnByrB,EAAQJ,EAAWja,EACnBsa,EAAMJ,EAAStrB,EACf2rB,EAAML,EAASla,EACfwa,EAAUL,EAEVM,EAAK,SAAYprB,EAAGC,GACtB,OAAOD,GAAKC,GAGVorB,EAAK,SAAYrrB,EAAGC,GACtB,OAAOD,GAAKC,GAGVqrB,EAAS,SAAgBtrB,EAAGC,GAC9B,OAAOlE,KAAKqE,IAAIJ,EAAGC,IAGjBsrB,EAAS,SAAgBvrB,EAAGC,GAC9B,OAAOlE,KAAKsE,IAAIL,EAAGC,IAGjBurB,EAAS,CACXC,SAAUJ,EACVK,IAAKJ,GAEHK,EAAS,CACXF,SAAUJ,EACVK,IAAKJ,GAGHN,EAAQE,EAAM,IAChBS,EAAOF,SAAWL,EAClBO,EAAOD,IAAMH,GAGXR,EAAQE,EAAM,IAChBO,EAAOC,SAAWL,EAClBI,EAAOE,IAAMH,GAGf3M,EAAIiG,OAAOkG,EAAOC,GAOlB,IANA,IAIIY,EAAK1sB,EAJL2sB,EAAUd,EACVe,EAAUd,EACV7pB,EAAM,EACN4qB,GAAO,GAGFP,EAAOC,SAASI,EAASZ,KAAQU,EAAOF,SAASK,EAASZ,IACjEU,EAAM7vB,KAAK2G,MAAMwoB,EAAMF,EAAOC,EAAMF,GACpC7rB,EAAMisB,EAAQhqB,GACd0qB,EAAUL,EAAOE,IAAIT,EAAKY,EAAU9vB,KAAKsX,IAAIuY,GAAO1sB,GACpD4sB,EAAUH,EAAOD,IAAIR,EAAKY,EAAU/vB,KAAKuX,IAAIsY,GAAO1sB,GAEhD6sB,EACFnN,EAAI8F,OAAOmH,EAASC,GAEpBlN,EAAIiG,OAAOgH,EAASC,GAGtB3qB,GAAOA,EAAM,GAAKgqB,EAAQ3wB,OAC1BuxB,GAAQA,EAMZ,SAAShM,GAAgBnjB,GACvB,MAHW,gBAGPA,EAAI4H,UAAU,EAHP,cAGiBhK,QACnBoC,EAGFgE,EAAchE,GAGvB,SAAS+oB,GAAe/G,EAAK8G,GAC3B9G,EAAI9a,OAAS4hB,EAAS5hB,OACtB8a,EAAIG,UAAY2G,EAAS3G,UACzBH,EAAIqD,YAAcyD,EAASzD,YAC3BrD,EAAIe,QAAU+F,EAAS/F,QACvBf,EAAIoN,eAAiBtG,EAASsG,eAC9BpN,EAAIc,SAAWgG,EAAShG,SACxBd,EAAIO,UAAYuG,EAASvG,UACzBP,EAAI2E,WAAamC,EAASnC,WAC1B3E,EAAIqN,YAAcvG,EAASuG,YAC3BrN,EAAI4E,cAAgBkC,EAASlC,cAC7B5E,EAAI6E,cAAgBiC,EAASjC,cAC7B7E,EAAIU,YAAcoG,EAASpG,YAG7B,IAAI4M,GAAmC,oBAAXxuB,OAAyBA,YAA2B,IAAXyuB,EAAyBA,EAAyB,oBAAT3b,KAAuBA,KAAO,GAE5I,SAAS4b,GAAqBlvB,EAAImvB,GAChC,OAEGnvB,EAFImvB,EAAS,CACdC,QAAS,IACGD,EAAOC,SAAUD,EAAOC,QAGxC,IAAIC,GAAYH,IAAqB,SAAUC,IAC5C,SAAUnsB,GACT,SAASoX,EAAEpX,GACT,GAAIA,EAAG,CACL,IAAIoX,EAAI/T,KACRrD,GAAE,SAAUA,GACVoX,EAAEkV,QAAQtsB,MACT,SAAUA,GACXoX,EAAEmV,OAAOvsB,OAKf,SAASjF,EAAEiF,EAAGoX,GACZ,GAAI,mBAAqBpX,EAAEyQ,EAAG,IAC5B,IAAI1V,EAAIiF,EAAEyQ,EAAE9U,KAAKvB,EAAGgd,GACpBpX,EAAEnB,EAAEytB,QAAQvxB,GACZ,MAAOyxB,GACPxsB,EAAEnB,EAAE0tB,OAAOC,QACNxsB,EAAEnB,EAAEytB,QAAQlV,GAGrB,SAASoV,EAAExsB,EAAGoX,GACZ,GAAI,mBAAqBpX,EAAEjF,EAAG,IAC5B,IAAIA,EAAIiF,EAAEjF,EAAEY,KAAKvB,EAAGgd,GACpBpX,EAAEnB,EAAEytB,QAAQvxB,GACZ,MAAOyxB,GACPxsB,EAAEnB,EAAE0tB,OAAOC,QACNxsB,EAAEnB,EAAE0tB,OAAOnV,GAGpB,IAAIlb,EACA9B,EACAyM,EAAI,YAEJqC,EAAI,YACJujB,EAAI,WACN,SAASrV,IACP,KAAOrc,EAAET,OAASkyB,GAAI,CACpB,IACEzxB,EAAEyxB,KACF,MAAOpV,GACPpX,EAAEkgB,SAAWlgB,EAAEkgB,QAAQiC,MAAM/K,GAG/Brc,EAAEyxB,KAAOpyB,EAAGoyB,GAAKtwB,IAAMnB,EAAEwD,OAAO,EAAGrC,GAAIswB,EAAI,IAI/C,IAAIzxB,EAAI,GACJyxB,EAAI,EACJtwB,EAAI,KACJ2K,EAAI,WACN,UAAW6lB,mBAAqBxjB,EAAG,CACjC,IAAIlJ,EAAI2M,SAAS4B,cAAc,OAE/B,OADQ,IAAIme,iBAAiBtV,GACpBuV,QAAQ3sB,EAAG,CAClB4sB,YAAY,IACV,WACF5sB,EAAEwY,aAAa,IAAK,IAIxB,cAAcqU,IAAiB3jB,EAAI,WACjC2jB,EAAazV,IACX,WACFna,WAAWma,EAAG,IAdV,GAkBR,OAAO,SAAUpX,GACfjF,EAAEoD,KAAK6B,GAAIjF,EAAET,OAASkyB,GAAK,GAAK3lB,KAnC5B,GAuCRuQ,EAAE5b,UAAY,CACZ8wB,QAAS,SAAiBtsB,GACxB,GAAIqD,KAAKypB,QAAU5wB,EAAG,CACpB,GAAI8D,IAAMqD,KAAM,OAAOA,KAAKkpB,OAAO,IAAIQ,UAAU,yCACjD,IAAI3V,EAAI/T,KACR,GAAIrD,IAAM,mBAAqBA,GAAK,iBAAmBA,GAAI,IACzD,IAAIwsB,GAAI,EACJpyB,EAAI4F,EAAEgtB,KACV,GAAI,mBAAqB5yB,EAAG,YAAYA,EAAEuB,KAAKqE,GAAG,SAAUA,GAC1DwsB,IAAMA,GAAI,EAAIpV,EAAEkV,QAAQtsB,OACvB,SAAUA,GACXwsB,IAAMA,GAAI,EAAIpV,EAAEmV,OAAOvsB,OAEzB,MAAOitB,GACP,YAAaT,GAAKnpB,KAAKkpB,OAAOU,IAEhC5pB,KAAKypB,MAAQjmB,EAAGxD,KAAKnE,EAAIc,EAAGoX,EAAEvQ,GAAK4lB,GAAE,WACnC,IAAK,IAAID,EAAI,EAAGtwB,EAAIkb,EAAEvQ,EAAEvM,OAAQ4B,EAAIswB,EAAGA,IACrCzxB,EAAEqc,EAAEvQ,EAAE2lB,GAAIxsB,QAKlBusB,OAAQ,SAAgBxxB,GACtB,GAAIsI,KAAKypB,QAAU5wB,EAAG,CACpBmH,KAAKypB,MAlEH,WAkEczpB,KAAKnE,EAAInE,EACzB,IAAIX,EAAIiJ,KAAKwD,EACbzM,EAAIqyB,GAAE,WACJ,IAAK,IAAIzsB,EAAI,EAAGoX,EAAIhd,EAAEE,OAAQ8c,EAAIpX,EAAGA,IACnCwsB,EAAEpyB,EAAE4F,GAAIjF,OAENqc,EAAE8V,gCAAkCltB,EAAEkgB,SAAWlgB,EAAEkgB,QAAQ1gB,IAAI,8CAA+CzE,EAAGA,EAAIA,EAAEoyB,MAAQ,QAGzIH,KAAM,SAAchtB,EAAG5F,GACrB,IAAI6yB,EAAI,IAAI7V,EACRlO,EAAI,CACNuH,EAAGzQ,EACHjF,EAAGX,EACHyE,EAAGouB,GAEL,GAAI5pB,KAAKypB,QAAU5wB,EAAGmH,KAAKwD,EAAIxD,KAAKwD,EAAE1I,KAAK+K,GAAK7F,KAAKwD,EAAI,CAACqC,OAAQ,CAChE,IAAIb,EAAIhF,KAAKypB,MACThtB,EAAIuD,KAAKnE,EACbutB,GAAE,WACApkB,IAAMxB,EAAI9L,EAAEmO,EAAGpJ,GAAK0sB,EAAEtjB,EAAGpJ,MAG7B,OAAOmtB,GAET,MAAS,SAAgBjtB,GACvB,OAAOqD,KAAK2pB,KAAK,KAAMhtB,IAEzB,QAAW,SAAkBA,GAC3B,OAAOqD,KAAK2pB,KAAKhtB,EAAGA,IAEtBotB,QAAS,SAAiBptB,EAAGjF,GAC3BA,EAAIA,GAAK,UACT,IAAIyxB,EAAInpB,KACR,OAAO,IAAI+T,GAAE,SAAUA,EAAGlb,GACxBe,YAAW,WACTf,EAAEmF,MAAMtG,MACPiF,GAAIwsB,EAAEQ,MAAK,SAAUhtB,GACtBoX,EAAEpX,MACD,SAAUA,GACX9D,EAAE8D,WAIPoX,EAAEkV,QAAU,SAAUtsB,GACvB,IAAIjF,EAAI,IAAIqc,EACZ,OAAOrc,EAAEuxB,QAAQtsB,GAAIjF,GACpBqc,EAAEmV,OAAS,SAAUvsB,GACtB,IAAIjF,EAAI,IAAIqc,EACZ,OAAOrc,EAAEwxB,OAAOvsB,GAAIjF,GACnBqc,EAAEiW,IAAM,SAAUrtB,GACnB,SAASjF,EAAEA,EAAG8L,GACZ9L,GAAK,mBAAqBA,EAAEiyB,OAASjyB,EAAIqc,EAAEkV,QAAQvxB,IAAKA,EAAEiyB,MAAK,SAAU5V,GACvEoV,EAAE3lB,GAAKuQ,IAAGlb,GAAU8D,EAAE1F,QAAUF,EAAEkyB,QAAQE,MACzC,SAAUxsB,GACX5F,EAAEmyB,OAAOvsB,MAIb,IAAK,IAAIwsB,EAAI,GAAItwB,EAAI,EAAG9B,EAAI,IAAIgd,EAAKvQ,EAAI,EAAGA,EAAI7G,EAAE1F,OAAQuM,IACxD9L,EAAEiF,EAAE6G,GAAIA,GAGV,OAAO7G,EAAE1F,QAAUF,EAAEkyB,QAAQE,GAAIpyB,GAChC+xB,EAAOC,UAAYD,EAAOC,QAAUhV,GAAIpX,EAAEstB,QAAUttB,EAAEstB,OAAOC,KAAOvtB,EAAEstB,OAAO,IAAI,WAClF,OAAOlW,KACLpX,EAAEwtB,OAASpW,EAAGA,EAAEqW,KAAOhB,EArK5B,CAsKwCT,OAUvC0B,GANmB,oBAAZC,QACCA,QAEAtB,GAKRuB,GAAY,SAAmBC,GACjC,OAAO,SAAUC,GAGf,SAASC,IACP,OAAOD,EAAMtnB,MAAMnD,KAAMhJ,YAAcgJ,KAHzC2M,GAAe+d,EAAQD,GAMvB,IAAInd,EAASod,EAAOvyB,UA6SpB,OA3SAmV,EAAO0K,GAAK,SAAe2S,EAAU9W,EAASxY,GAC5C,IAAKsvB,EACH,OAAO3qB,KAGT,IAAKpI,EAAS+yB,GACZ,OAAO3qB,KAAK4qB,QAAQ,KAAMD,EAAU9W,GAGtC,IAAKA,EACH,OAAO7T,KAGJA,KAAK6qB,YACR7qB,KAAK6qB,UAAY,IAGnB,IACIC,EAMAC,EAPAC,EAAaL,EAASvhB,cAAcqH,MAAM,KAGzCpV,IACHA,EAAU2E,MAKZ,IAAK,IAAIpF,EAAK,EAAGC,EAAKmwB,EAAW/zB,OAAQ2D,EAAKC,EAAID,IAAM,CACtDkwB,EAAUE,EAAWpwB,IACrBmwB,EAAe/qB,KAAK6qB,UAAUC,MAG5BC,EAAe,GACf/qB,KAAK6qB,UAAUC,GAAWC,GAG5B,IAAI/lB,EAAI+lB,EAAa9zB,OAErB,GAAI+N,EAAI,EACN,IAAK,IAAIjO,EAAI,EAAGA,EAAIiO,EAAGjO,IACrB,GAAI8c,IAAYkX,EAAah0B,GAAG8c,SAAWkX,EAAah0B,GAAGsE,UAAYA,EACrE,OAAO2E,KAKb+qB,EAAajwB,KAAK,CAChB+Y,QAASA,EACTxY,QAASA,IAIb,OAAO2E,MAGTsN,EAAO1B,iBAAmB,WACxB,OAAO5L,KAAKgY,GAAG7U,MAAMnD,KAAMhJ,YAG7BsW,EAAO2d,KAAO,SAAcD,EAAYnX,EAASxY,GAC/C,IAAKzD,EAASozB,GAAa,CACzB,IAAIC,EAAO,GAEX,IAAK,IAAIzvB,KAAKwvB,EACRA,EAAW/yB,eAAeuD,KAC5ByvB,EAAKzvB,GAAKwE,KAAKkrB,iBAAiB1vB,EAAGwvB,EAAWxvB,GAAIH,IAItD,OAAO2E,KAAK4qB,QAAQ,KAAMK,GAK5B,IAFA,IAAIE,EAAYH,EAAWva,MAAM,KAExB1Z,EAAI,EAAGiO,EAAImmB,EAAUl0B,OAAQF,EAAIiO,EAAGjO,IAC3CiJ,KAAKgY,GAAGmT,EAAUp0B,GAAIiJ,KAAKkrB,iBAAiBC,EAAUp0B,GAAI8c,EAASxY,IAGrE,OAAO2E,MAGTsN,EAAO2K,IAAM,SAAgBmT,EAAWvX,EAASxY,GAC/C,IAAK2E,KAAK6qB,YAAcO,EACtB,OAAOprB,KAGT,IAAKpI,EAASwzB,GACZ,OAAOprB,KAAK4qB,QAAQ,MAAOQ,EAAWvX,GAGxC,IAAKA,EACH,OAAO7T,KAGT,IACIqrB,EAAWC,EAAWC,EADtBP,EAAaI,EAAU3a,MAAM,KAG5BpV,IACHA,EAAU2E,MAGZ,IAAK,IAAIyU,EAAI,EAAG+W,EAAKR,EAAW/zB,OAAQwd,EAAI+W,EAAI/W,IAAK,CAKnD,GAHA8W,EAAU,OADVF,EAAYL,EAAWvW,GAAGrL,iBAE1BkiB,EAAYtrB,KAAK6qB,UAAUQ,IAGzB,OAAOrrB,KAGT,IAAK,IAAIjJ,EAAIu0B,EAAUr0B,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAC9C,IAAI00B,EAAWH,EAAUv0B,GAEpB8c,IAAY4X,EAAS5X,SAAWA,IAAY4X,EAAS5X,QAAQ0X,IAAaE,EAASpwB,UAAYA,WAC3FowB,EAAS5X,QAAQ0X,GACxBD,EAAUpwB,OAAOnE,EAAG,IAInBu0B,EAAUr0B,eACN+I,KAAK6qB,UAAUQ,GAI1B,OAAOrrB,MAGTsN,EAAOiH,oBAAsB,WAC3B,OAAOvU,KAAKiY,IAAI9U,MAAMnD,KAAMhJ,YAG9BsW,EAAOoe,QAAU,SAAiBL,EAAWxX,EAASxY,GACpD,IAAK2E,KAAK6qB,YAAcjzB,EAASyzB,GAC/B,OAAO,EAGT,IAAIN,EAAe/qB,KAAK6qB,UAAUQ,EAAUjiB,eAE5C,IAAK2hB,IAAiBA,EAAa9zB,OACjC,OAAO,EAGT,IAAK4c,EACH,OAAOkX,EAAa9zB,OAGtB,IAAK,IAAIF,EAAI,EAAG4E,EAAMovB,EAAa9zB,OAAQF,EAAI4E,EAAK5E,IAClD,GAAI8c,IAAYkX,EAAah0B,GAAG8c,UAAYzc,EAAMiE,IAAY0vB,EAAah0B,GAAGsE,UAAYA,GACxF,OAAO,EAIX,OAAO,GAGTiS,EAAOqe,mBAAqB,WAC1B,OAAK3rB,KAAK6qB,UAIH3yB,OAAO0P,KAAK5H,KAAK6qB,WAHf,IAMXvd,EAAOse,mBAAqB,SAA4BxE,GACtD,IAMI2D,EANAc,EAAWzE,EAAOyD,UAEtB,IAAKgB,EACH,OAAO7rB,KAKT,IAAK,IAAIqrB,KAAaQ,EAGpB,IAAK,IAAI90B,EAAI,EAAG4E,GAFhBovB,EAAec,EAASR,IAEWp0B,OAAQF,EAAI4E,EAAK5E,IAClDiJ,KAAKgY,GAAGqT,EAAWN,EAAah0B,GAAG8c,QAASkX,EAAah0B,GAAGsE,SAIhE,OAAO2E,MAGTsN,EAAOwe,KAAO,WACZ,OAAI9rB,KAAK+rB,aACA/rB,KAAK+rB,aAAaD,KAAK3oB,MAAMnD,KAAK+rB,aAAc/0B,WAGlDgJ,KAAKgsB,MAAM7oB,MAAMnD,KAAMhJ,YAGhCsW,EAAO4d,iBAAmB,SAA0BJ,EAASjX,EAASxY,GACpE,IAAI0E,EAAKC,KACL3H,EAAM,MAAQyyB,EACdmB,GAAS,EAETtyB,EAAK,SAASuyB,IACZD,WAIGtyB,EAAGtB,GACV4zB,GAAS,EAEL5wB,EACFwY,EAAQ1Q,MAAM9H,EAASrE,WAEvB6c,EAAQ1Q,MAAMnD,KAAMhJ,WAGtB+I,EAAGkY,IAAI6S,EAASoB,EAAalsB,QAI/B,OADArG,EAAGtB,GAAOwb,EACHla,GAGT2T,EAAOsd,QAAU,SAAiBuB,EAAIC,EAAW/wB,GAC/C,IAAK,IAAIG,KAAK4wB,EACRA,EAAUn0B,eAAeuD,IAC3BwE,KAAKmsB,GAAI3wB,EAAG4wB,EAAU5wB,GAAIH,GAI9B,OAAO2E,MAGTsN,EAAO+e,gBAAkB,SAAyBhB,GAC3CrrB,KAAK6qB,WAAcjzB,EAASyzB,KAIdrrB,KAAK6qB,UAAUQ,EAAUjiB,iBAM5CpJ,KAAK6qB,UAAUQ,GAAa,QAG9B/d,EAAOgf,mBAAqB,WAC1BtsB,KAAK6qB,UAAY,MAGnBvd,EAAOif,gBAAkB,SAAyBC,GAEhD,OADAxsB,KAAK+rB,aAAeS,EACbxsB,MAGTsN,EAAOmf,gBAAkB,SAAyBrF,GAEhD,OADApnB,KAAK0sB,aAAetF,EACbpnB,MAGTsN,EAAO0e,MAAQ,SAAeX,EAAWsB,GACvC,IAAK3sB,KAAK6qB,UACR,OAAO7qB,KAGT,IAAI+qB,EAAe/qB,KAAK6qB,UAAUQ,EAAUjiB,eAE5C,IAAK2hB,EACH,OAAO/qB,KAGJ2sB,IACHA,EAAQ,IAGVA,EAAY,KAAItB,EAChBsB,EAAc,OAAI3sB,KAAK0sB,cAAgB1sB,KAIvC,IAHA,IACI3E,EAAiBuxB,EADjBC,EAAQ9B,EAAazxB,MAAM,GAGtBvC,EAAI,EAAG4E,EAAMkxB,EAAM51B,OAAQF,EAAI4E,EAAK5E,IACtC81B,EAAM91B,KAIXsE,EAAUwxB,EAAM91B,GAAGsE,SACV,EACTuxB,EAAS/1B,EAAO,GAAI81B,IAQL,KANXtxB,EACOwxB,EAAM91B,GAAG8c,QAAQvb,KAAK+C,EAASuxB,GAE/BC,EAAM91B,GAAG8c,QAAQ+Y,KAItBD,EAAgB,UAClB9X,GAAgB8X,EAAgB,WAKtC,OAAO3sB,MAGF0qB,EApTF,CAqTLF,IA2CAsC,GAAYvC,GAxCF,WACZ,SAASwC,EAAQ3F,GACfpnB,KAAKonB,OAASA,EAGhB,IAAI9Z,EAASyf,EAAQ50B,UAgCrB,OA9BAmV,EAAO0f,OAAS,WACd,OAAIhtB,KAAKitB,WAITjtB,KAAKitB,UAAW,EAChBjtB,KAAKktB,YAJIltB,MAQXsN,EAAO6f,QAAU,WACf,OAAKntB,KAAKitB,UAIVjtB,KAAKitB,UAAW,EAChBjtB,KAAKotB,cACEptB,MALEA,MAQXsN,EAAO+f,QAAU,WACf,QAASrtB,KAAKitB,UAGhB3f,EAAOggB,OAAS,WACdttB,KAAKmtB,iBACEntB,KAAKonB,cACLpnB,KAAKgV,KAGP+X,EArCK,IA0CVQ,GAAQ,WACV,SAASA,EAAMhV,GACb,IAAKvY,OAASA,KAAKwtB,WACjB,MAAM,IAAIxvB,MAAM,2DAGlBgC,KAAKwtB,WAAWjV,GAChBvY,KAAKytB,gBAGP,IAAIngB,EAASigB,EAAMp1B,UA6HnB,OA3HAmV,EAAOmgB,cAAgB,WACrB,IAAIC,EAAQx1B,OAAOy1B,eAAe3tB,MAIlC,OAFAA,KAAK4tB,gBAAgBF,GAEd1tB,MAGTsN,EAAOkgB,WAAa,SAAoBjV,GAKtC,GAJKvY,KAAK/H,eAAe,aACvB+H,KAAKuY,QAAUvY,KAAKuY,QAAUrgB,OAAO4U,OAAO9M,KAAKuY,SAAW,KAGzDA,EACH,OAAOvY,KAGT,IAAK,IAAIjJ,KAAKwhB,EACZvY,KAAKuY,QAAQxhB,GAAKwhB,EAAQxhB,GAG5B,OAAOiJ,MAGTsN,EAAOugB,OAAS,SAAgBC,GAC9B,IAAKA,EAAM,CACT,IAAID,EAAS,GAEb,IAAK,IAAIryB,KAAKwE,KAAKuY,QACbvY,KAAKuY,QAAQtgB,eAAeuD,KAC9BqyB,EAAOryB,GAAKwE,KAAKuY,QAAQ/c,IAI7B,OAAOqyB,EAEP,GAAyB,IAArB72B,UAAUC,OAAc,CAC1B,IAAI0F,EAAI,GACRA,EAAEmxB,GAAQ92B,UAAU,GACpB82B,EAAOnxB,EAGT,IAAK,IAAI5F,KAAK+2B,EACZ9tB,KAAKuY,QAAQxhB,GAAK+2B,EAAK/2B,GAEnBiJ,KAAKjJ,IAAMiJ,KAAKjJ,aAAc+1B,KAC5BgB,EAAK/2B,GACPiJ,KAAKjJ,GAAGi2B,SAERhtB,KAAKjJ,GAAGo2B,WAQhB,OAHEntB,KAAK+tB,SAASD,GAGT9tB,MAGTsN,EAAOygB,SAAW,aAElBzgB,EAAOsgB,gBAAkB,SAAyBF,GAChD,IAAI1tB,KAAKguB,iBAAT,CAIA,IAAIC,EAAc/1B,OAAOy1B,eAAeD,GAEpCO,EAAYL,iBACdK,EAAYL,gBAAgBt1B,KAAK0H,KAAMiuB,GAGzCjuB,KAAKguB,kBAAmB,EACxB,IAAIE,EAAQR,EAAMS,WAElB,GAAID,GAASA,IAAUD,EAAYE,WACjC,IAAK,IAAIp3B,EAAI,EAAGA,EAAIm3B,EAAMj3B,OAAQF,IAChCm3B,EAAMn3B,GAAGuB,KAAK0H,QAKpButB,EAAMa,YAAc,SAAqBz0B,GACvC,IAAK,IAAI00B,EAAOr3B,UAAUC,OAAQkR,EAAO,IAAI7M,MAAM+yB,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IAClGnmB,EAAKmmB,EAAO,GAAKt3B,UAAUs3B,GAG7B,IAAIC,EAAqB,mBAAP50B,EAAoBA,EAAK,WACzCqG,KAAKrG,GAAIwJ,MAAMnD,KAAMmI,IAEnBulB,EAAQ1tB,KAAK7H,UACb81B,EAAc/1B,OAAOy1B,eAAeD,GAQxC,OANKA,EAAMS,YAAcT,EAAMS,aAAeF,EAAYE,aACxDT,EAAMS,WAAa,IAGrBT,EAAMS,WAAWrzB,KAAKyzB,GAEfvuB,MAGTutB,EAAMiB,QAAU,WACd,IAAK,IAAIz3B,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IACpCF,EAAOmJ,KAAK7H,UAAWpB,EAAI,GAAKC,UAAUC,QAAUF,OAAI+E,EAAY9E,UAAUD,IAGhF,OAAOiJ,MAGTutB,EAAMkB,aAAe,SAAsBlW,GACzC,IAAImV,EAAQ1tB,KAAK7H,UACb81B,EAAc/1B,OAAOy1B,eAAeD,GAOxC,OALKA,EAAMnV,SAAWmV,EAAMnV,UAAY0V,EAAY1V,UAClDmV,EAAMnV,QAAUmV,EAAMnV,QAAUrgB,OAAO4U,OAAO4gB,EAAMnV,SAAW,IAGjE1hB,EAAO62B,EAAMnV,QAASA,GACfvY,MAGFutB,EAvIG,GA0IRmB,GAAkB,GAElBC,GAAW,SAAkBnE,GAC/B,OAAO,SAAUC,GAGf,SAASC,IACP,OAAOD,EAAMtnB,MAAMnD,KAAMhJ,YAAcgJ,KAyCzC,OA5CA2M,GAAe+d,EAAQD,GAMvBC,EAAOkE,iBAAmB,SAA0BjwB,GAClD,OAAKA,GAIL+vB,GAAgB/vB,GAAQqB,KACjBA,MAJEA,MAOX0qB,EAAOmE,aAAe,SAAsBlwB,GAC1C,OAAKA,EAIE+vB,GAAgB/vB,GAHd,MAME+rB,EAAOvyB,UAEb22B,YAAc,WACnB,QAAuBhzB,IAAnBkE,KAAK+uB,UAAyB,CAChC,IAAIC,EAAQ92B,OAAOy1B,eAAe3tB,MAAMnI,YAExC,IAAK,IAAI2D,KAAKkzB,GACZ,GAAIA,GAAgBlzB,KAAOwzB,EAAO,CAChChvB,KAAK+uB,UAAYvzB,EACjB,OAKN,IAAKwE,KAAK+uB,UACR,MAAM,IAAI/wB,MAAM,yCAGlB,OAAOgC,KAAK+uB,WAGPrE,EA7CF,CA8CLF,IAGJ,SAASyE,GAAYzE,GACnB,OAAO,SAAUC,GAGf,SAASC,IACP,OAAOD,EAAMtnB,MAAMnD,KAAMhJ,YAAcgJ,KAHzC2M,GAAe+d,EAAQD,GAMvB,IAAInd,EAASod,EAAOvyB,UAwDpB,OAtDAmV,EAAO4hB,WAAa,SAAoBh1B,EAAMi1B,GAC5C,IAAKA,EACH,OAAOnvB,KAOT,GAJKA,KAAKovB,YACRpvB,KAAKovB,UAAY,IAGfpvB,KAAK9F,GAEP,OADA8F,KAAK9F,GAAM8yB,SACJhtB,KAGT,IAAI6T,EAAU7T,KAAK9F,GAAQ,IAAIi1B,EAAanvB,MAQ5C,OANAA,KAAKovB,UAAUt0B,KAAK+Y,GAEhB7T,KAAKuY,QAAQre,IACf2Z,EAAQmZ,SAGHhtB,MAGTsN,EAAO+hB,cAAgB,SAAuBn1B,GAC5C,IAAKA,EACH,OAAO8F,KAGT,IAAI6T,EAAU7T,KAAK9F,GAEnB,GAAI2Z,EAAS,CACX,IAAI1P,EAAMnE,KAAKovB,UAAUn0B,QAAQ4Y,GAE7B1P,GAAO,GACTnE,KAAKovB,UAAUl0B,OAAOiJ,EAAK,GAG7BnE,KAAK9F,GAAMozB,gBACJttB,KAAK9F,GAGd,OAAO8F,MAGTsN,EAAOgiB,eAAiB,WACtB,IAAK,IAAIv4B,EAAI,EAAG4E,EAAMqE,KAAKovB,UAAUn4B,OAAQF,EAAI4E,EAAK5E,IACpDiJ,KAAKovB,UAAUr4B,GAAGu2B,SAGpBttB,KAAKovB,UAAY,IAGZ1E,EA/DF,CAgELF,GAGJ,IACI+E,GAAc,CAChBC,UAAW,YACXC,WAAY,YACZC,YAAa,YACbC,cAAe,aAEbC,GAAa,CACfJ,UAAW,UACXC,WAAY,WACZC,YAAa,WACbC,cAAe,YAGbE,GAAc,SAAUC,GAG1B,SAASD,EAAY7a,EAAKuD,GACxB,IAAIwX,EASJ,YAPgB,IAAZxX,IACFA,EAAU,KAGZwX,EAAQD,EAASx3B,KAAK0H,KAAM,OAASA,MAC/BgV,IAAMA,EACZ+a,EAAMxX,QAAUA,EACTwX,EAZTpjB,GAAekjB,EAAaC,GAe5B,IAAIxiB,EAASuiB,EAAY13B,UA+IzB,OA7IAmV,EAAO0f,OAAS,WACd,OAAKhtB,KAAKgV,KAIVhV,KAAKgwB,aAAe,SAAUjc,GAC5B,OAAO/T,KAAKiwB,YAAYlc,IAG1BiE,GAAGhY,KAAKgV,IAzCO,uBAyCYhV,KAAKgwB,aAAchwB,MACvCA,MAREA,MAWXsN,EAAO6f,QAAU,WACf,OAAKntB,KAAKgV,KAIVhV,KAAKkwB,aAELjY,GAAIjY,KAAKgV,IApDM,uBAoDahV,KAAKgwB,qBAC1BhwB,KAAKgwB,aACLhwB,MAPEA,MAUXsN,EAAO2iB,YAAc,SAAqBjc,GACxC,IAAKhU,KAAKuY,QAAoB,YAAsB,IAAjBvE,EAAMmc,WAIrCnc,EAAMoc,SAAWpc,EAAMoc,QAAQn5B,OAAS,GAIxC+I,KAAKuY,QAAkB,WAAyC,IAApCvY,KAAKuY,QAAkB,SAAEvE,IAAzD,CAIA,IAAIgB,EAAMhV,KAAKgV,IAEXA,EAAIqb,WACNrb,EAAIqb,aACKl2B,OAAOm2B,eAChBn2B,OAAOm2B,cAAcn2B,OAAc,MAAEo2B,UAAYp2B,OAAc,MAAEq2B,SAGnExb,EAAiB,YAAI,WACnB,OAAO,UAGFhV,KAAKywB,MACZ,IAAIC,EAAS1c,EAAMoc,QAAUpc,EAAMoc,QAAQ,GAAKpc,EAChDhU,KAAK2wB,SAAW,IAAIzhB,GAAMwhB,EAAOpa,QAASoa,EAAOla,SACjDwB,GAAG1O,SAAUimB,GAAYvb,EAAMrV,MAAOqB,KAAK4wB,YAAa5wB,MACxDgY,GAAG1O,SAAUsmB,GAAW5b,EAAMrV,MAAOqB,KAAK6wB,UAAW7wB,MAEhDA,KAAKuY,QAA0B,kBAClCP,GAAGhY,KAAKgV,IAAK,aAAchV,KAAK6wB,UAAW7wB,MAG7CA,KAAK8rB,KAAK,YAAa,CACrB,SAAY9X,EACZ,SAAY,IAAI9E,GAAMwhB,EAAOpa,QAASoa,EAAOla,aAIjDlJ,EAAOsjB,YAAc,SAAqB5c,GACxC,GAAIA,EAAMoc,SAAWpc,EAAMoc,QAAQn5B,OAAS,EACtC+I,KAAKywB,QACPzwB,KAAK8wB,YAAa,EAClB9wB,KAAK6wB,UAAU7c,QAHnB,CASA,IAAI0c,EAAS1c,EAAMoc,QAAUpc,EAAMoc,QAAQ,GAAKpc,EAE5CqB,EADS,IAAInG,GAAMwhB,EAAOpa,QAASoa,EAAOla,SAC1BjI,IAAIvO,KAAK2wB,WAExBtb,EAAOrZ,GAAMqZ,EAAOjI,KAIpBpN,KAAKywB,MAORzwB,KAAK8rB,KAAK,WAAY,CACpB,SAAY9X,EACZ,SAAY,IAAI9E,GAAMwhB,EAAOpa,QAASoa,EAAOla,YAR/CxW,KAAK8rB,KAAK,YAAa,CACrB,SAAY9X,EACZ,SAAYhU,KAAK2wB,SAAS3iB,SAE5BhO,KAAKywB,OAAQ,MASjBnjB,EAAOujB,UAAY,SAAmB7c,GACpC,IAAI0c,EAAS1c,EAAM+c,eAAiB/c,EAAM+c,eAAe,GAAK/c,EAE9DhU,KAAKkwB,aAEL,IAAIvD,EAAQ,CACV,SAAY3Y,GAGV1c,EAASo5B,EAAOpa,WAClBqW,EAAgB,SAAI,IAAIzd,GAAMyG,SAAS+a,EAAOpa,QAAS,GAAIX,SAAS+a,EAAOla,QAAS,KAGlFxW,KAAKywB,QACP9D,EAAMmE,WAAa9wB,KAAK8wB,WACxB9wB,KAAK8rB,KAAK,UAAWa,UACd3sB,KAAK8wB,kBACL9wB,KAAKywB,OAGdzwB,KAAK8rB,KAAK,UAAWa,IAGvBrf,EAAO4iB,WAAa,WAClB,IAAIlb,EAAMhV,KAAKgV,IAGf,GAFAiD,GAAIjD,EAAK,aAAchV,KAAK6wB,UAAW7wB,MAEf,oBAAbsJ,UAA8C,oBAAXnP,OAA9C,CAIA,IAAK,IAAIpD,KAAKw4B,GACZtX,GAAI3O,SAAUimB,GAAYx4B,GAAIiJ,KAAK4wB,YAAa5wB,MAChDiY,GAAI3O,SAAUsmB,GAAW74B,GAAIiJ,KAAK6wB,UAAW7wB,MAG3CgV,EAAoB,eACtBA,EAAoB,iBACX7a,OAAOm2B,eAChBn2B,OAAOm2B,cAAcn2B,OAAc,MAAEo2B,UAAYp2B,OAAc,MAAEq2B,WAI9DX,EA/JS,CAgKhB/C,IAEEkE,GAAa,SAAU7hB,GAGzB,SAAS6hB,IACP,OAAO7hB,EAAUhM,MAAMnD,KAAMhJ,YAAcgJ,KAqC7C,OAxCA2M,GAAeqkB,EAAY7hB,GAM3B6hB,EAAWC,eAAiB,SAAwBC,GAClD,OAAK51B,MAAMC,QAAQ21B,GAIZ/1B,EAAa+1B,GAAa,SAAUC,GACzC,MAAO,CAACA,EAAMn1B,EAAGm1B,EAAM/jB,MAJhB,CAAC8jB,EAAYl1B,EAAGk1B,EAAY9jB,IAQvC4jB,EAAWI,cAAgB,SAAuBF,GAChD,GAAI55B,EAAS45B,EAAY,KAAO55B,EAAS45B,EAAY,IACnD,OAAO,IAAIF,EAAWE,GAKxB,IAFA,IAAIx1B,EAAS,GAEJ3E,EAAI,EAAG4E,EAAMu1B,EAAYj6B,OAAQF,EAAI4E,EAAK5E,IAAK,CACtD,IAAIs6B,EAAQH,EAAYn6B,GAEpBuE,MAAMC,QAAQ81B,GACZ/5B,EAAS+5B,EAAM,IACjB31B,EAAOZ,KAAK,IAAIk2B,EAAWK,IAE3B31B,EAAOZ,KAAKk2B,EAAWI,cAAcC,IAGvC31B,EAAOZ,KAAK,IAAIk2B,EAAWK,IAI/B,OAAO31B,GAGFs1B,EAzCQ,CA0Cf7jB,IAEEmkB,GAAM,WACR,SAASA,EAAI3yB,EAAM4yB,GACjBvxB,KAAKrB,KAAOA,EACZqB,KAAKuxB,WAAaA,EAkBpB,OAfAD,EAAIE,YAAc,SAAqBC,GACrC,OAAO,IAAIH,EAAI,QAAS,CACtB,KAAQG,KAIZH,EAAII,mBAAqB,SAA4BC,GACnD,OAAKA,GAKEL,EADPK,EAAOA,EAAKC,cAAc/oB,QAAQ,IAAK,MAH9B,MAOJyoB,EArBC,GAwBVA,GAAIO,MAAQP,GAAIE,YAAY,uCAC5BF,GAAIQ,SAAWR,GAAIO,MACnBP,GAAIS,SAAWT,GAAIE,YAAY,6HAC/BF,GAAIU,SAAWV,GAAIE,YAAY,2BAC/BF,GAAIW,SAAWX,GAAIE,YAAY,iCAC/BF,GAAIY,SAAWZ,GAAIW,SACnBX,GAAIa,OAASb,GAAIE,YAAY,6BAC7BF,GAAIc,MAAQd,GAAIE,YAAY,8BAC5B,IAUIa,GAVAC,GAAc,IAAIpjB,GAAM,EAAG,GAC3BqjB,GAAc,IAAIvB,GAAW,EAAG,GAChCwB,GAAc,IAAIxB,GAAW,EAAG,GAChCyB,GAAc,IAAIzB,GAAW,EAAG,GAChC0B,GAAc,IAAI1B,GAAW,EAAG,GAChC2B,GAAc,IAAI3B,GAAW,EAAG,GAChC4B,GAAc,IAAI5B,GAAW,EAAG,GAChC6B,GAAc,IAAI7B,GAAW,EAAG,GAChC8B,GAAc,IAAI9B,GAAW,EAAG,GAChC+B,GAAS,GAETC,GAAe,GAEfC,GAAS,WACX,SAASA,EAAOzR,EAAIC,EAAI2E,EAAI8M,GAC1BlzB,KAAKmzB,OAASnC,GACd,IAAIhsB,EAAIhO,UAAUC,OACdw6B,EAAOzsB,EAAI,EAAIhO,UAAUgO,EAAI,GAAK,KAElCysB,GAAQA,EAAK2B,YACfpzB,KAAKqzB,WAAar8B,UAAUgO,EAAI,IAGlChF,KAAKszB,QAAS,EAEdtzB,KAAKuzB,YAAY/R,EAAIC,EAAI2E,EAAI8M,GAG/B,IAAI5lB,EAAS2lB,EAAO96B,UAodpB,OAldAmV,EAAOimB,YAAc,SAAqB/R,EAAIC,EAAI2E,EAAI8M,GAMpD,GALAlzB,KAAKwzB,KAAO,KACZxzB,KAAKyzB,KAAO,KACZzzB,KAAK0zB,KAAO,KACZ1zB,KAAK2zB,KAAO,MAERv8B,EAAMoqB,GAAV,CAIA,IAAI6R,EAAarzB,KAAKqzB,WAElB/7B,EAASkqB,IAAOlqB,EAASmqB,IAAOnqB,EAAS8uB,IAAO9uB,EAAS47B,GACvDG,EACFrzB,KAAK0E,IAAI8c,EAAIC,EAAI2E,EAAI8M,GAErBlzB,KAAK0E,IAAIlM,KAAKqE,IAAI2kB,EAAI4E,GAAK5tB,KAAKqE,IAAI4kB,EAAIyR,GAAK16B,KAAKsE,IAAI0kB,EAAI4E,GAAK5tB,KAAKsE,IAAI2kB,EAAIyR,IAIrE53B,MAAMC,QAAQimB,GACnB6R,EACFrzB,KAAK0E,IAAI8c,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,IAEjCxhB,KAAK0E,IAAIlM,KAAKqE,IAAI2kB,EAAG,GAAIA,EAAG,IAAKhpB,KAAKqE,IAAI2kB,EAAG,GAAIA,EAAG,IAAKhpB,KAAKsE,IAAI0kB,EAAG,GAAIA,EAAG,IAAKhpB,KAAKsE,IAAI0kB,EAAG,GAAIA,EAAG,KAE7FlqB,EAASkqB,EAAGxlB,IAAM1E,EAASmqB,EAAGzlB,IAAM1E,EAASkqB,EAAGpU,IAAM9V,EAASmqB,EAAGrU,GACvEimB,EACFrzB,KAAK0E,IAAI8c,EAAGxlB,EAAGwlB,EAAGpU,EAAGqU,EAAGzlB,EAAGylB,EAAGrU,IAE1BoU,EAAGxlB,EAAIylB,EAAGzlB,GACZgE,KAAW,KAAIyhB,EAAGzlB,EAClBgE,KAAW,KAAIwhB,EAAGxlB,IAElBgE,KAAW,KAAIwhB,EAAGxlB,EAClBgE,KAAW,KAAIyhB,EAAGzlB,GAGhBwlB,EAAGpU,EAAIqU,EAAGrU,GACZpN,KAAW,KAAIyhB,EAAGrU,EAClBpN,KAAW,KAAIwhB,EAAGpU,IAElBpN,KAAW,KAAIwhB,EAAGpU,EAClBpN,KAAW,KAAIyhB,EAAGrU,IAGb9V,EAASkqB,EAAS,OAAMlqB,EAASkqB,EAAS,OAAMlqB,EAASkqB,EAAS,OAAMlqB,EAASkqB,EAAS,OACnGxhB,KAAK0E,IAAI8c,EAAS,KAAGA,EAAS,KAAGA,EAAS,KAAGA,EAAS,QAI1DlU,EAAOW,KAAO,SAAczS,GAoB1B,OAnBAwE,KAAKszB,QAAS,EAETl8B,EAAMoE,EAAEQ,GAKD5E,EAAMoE,EAAEg4B,MAKRp8B,EAAMoE,EAAE,MAClBwE,KAAW,MAAKxE,EAAE,GAClBwE,KAAW,MAAKxE,EAAE,GAClBwE,KAAW,MAAKxE,EAAE,GAClBwE,KAAW,MAAKxE,EAAE,KARlBwE,KAAW,MAAKxE,EAAEg4B,KAClBxzB,KAAW,MAAKxE,EAAEk4B,KAClB1zB,KAAW,MAAKxE,EAAEi4B,KAClBzzB,KAAW,MAAKxE,EAAEm4B,OARlB3zB,KAAW,MAAKxE,EAAEQ,EAClBgE,KAAW,MAAKxE,EAAE4R,EAClBpN,KAAW,MAAKxE,EAAEQ,EAClBgE,KAAW,MAAKxE,EAAE4R,GAabpN,MAGTsN,EAAOY,IAAM,WACX,IAAI6F,EAAI,IAAI/T,KAAKnI,YAAYmI,KAAW,KAAGA,KAAW,KAAGA,KAAW,KAAGA,KAAW,KAAGA,KAAKqzB,YAC1F,OAAOtf,EAAE9F,KAAK9K,MAAM4Q,EAAG/c,YAGzBsW,EAAOsmB,OAAS,SAAgB/tB,GAM9B,OALA7F,KAAKszB,QAAS,EACdtzB,KAAW,MAAK6F,EAChB7F,KAAW,MAAK6F,EAChB7F,KAAW,MAAK6F,EAChB7F,KAAW,MAAK6F,EACT7F,MAGTsN,EAAOe,KAAO,SAAc7S,GAoB1B,OAnBAwE,KAAKszB,QAAS,EAETl8B,EAAMoE,EAAEQ,GAKD5E,EAAMoE,EAAEg4B,MAKRp8B,EAAMoE,EAAE,MAClBwE,KAAW,MAAKxE,EAAE,GAClBwE,KAAW,MAAKxE,EAAE,GAClBwE,KAAW,MAAKxE,EAAE,GAClBwE,KAAW,MAAKxE,EAAE,KARlBwE,KAAW,MAAKxE,EAAEg4B,KAClBxzB,KAAW,MAAKxE,EAAEk4B,KAClB1zB,KAAW,MAAKxE,EAAEi4B,KAClBzzB,KAAW,MAAKxE,EAAEm4B,OARlB3zB,KAAW,MAAKxE,EAAEQ,EAClBgE,KAAW,MAAKxE,EAAE4R,EAClBpN,KAAW,MAAKxE,EAAEQ,EAClBgE,KAAW,MAAKxE,EAAE4R,GAabpN,MAGTsN,EAAOgB,WAAa,WAClB,OAAOtO,KAAKqO,KAAKlL,MAAMnD,KAAMhJ,YAG/BsW,EAAOiB,IAAM,WACX,IAAIwF,EAAI,IAAI/T,KAAKnI,YAAYmI,KAAW,KAAGA,KAAW,KAAGA,KAAW,KAAGA,KAAW,KAAGA,KAAKqzB,YAC1F,OAAOtf,EAAE1F,KAAKlL,MAAM4Q,EAAG/c,YAGzBsW,EAAOkB,UAAY,WACjB,OAAOxO,KAAKuO,IAAIpL,MAAMnD,KAAMhJ,YAG9BsW,EAAOhR,MAAQ,WACb,OAAO,IAAI0D,KAAKnI,YAAYW,KAAK8D,MAAM0D,KAAW,MAAIxH,KAAK8D,MAAM0D,KAAW,MAAIxH,KAAK8D,MAAM0D,KAAW,MAAIxH,KAAK8D,MAAM0D,KAAW,MAAIA,KAAKqzB,aAG3I/lB,EAAOE,OAAS,WAMd,OALAxN,KAAKszB,QAAS,EACdtzB,KAAW,KAAIxH,KAAK8D,MAAM0D,KAAW,MACrCA,KAAW,KAAIxH,KAAK8D,MAAM0D,KAAW,MACrCA,KAAW,KAAIxH,KAAK8D,MAAM0D,KAAW,MACrCA,KAAW,KAAIxH,KAAK8D,MAAM0D,KAAW,MAC9BA,MAGTsN,EAAO4P,OAAS,SAAgB2W,GAC9B,OAAIA,GACFA,EAAInvB,IAAI1E,KAAW,KAAGA,KAAW,MAC1B6zB,GAGF,IAAI7zB,KAAKmzB,OAAOnzB,KAAW,KAAGA,KAAW,OAGlDsN,EAAO6P,OAAS,SAAgB0W,GAC9B,OAAIA,GACFA,EAAInvB,IAAI1E,KAAW,KAAGA,KAAW,MAC1B6zB,GAGF,IAAI7zB,KAAKmzB,OAAOnzB,KAAW,KAAGA,KAAW,OAGlDsN,EAAOgQ,UAAY,SAAmBuW,GACpC,IAAI73B,GAAKgE,KAAW,KAAIA,KAAW,MAAK,EACpCoN,GAAKpN,KAAW,KAAIA,KAAW,MAAK,EAExC,OAAI6zB,GACFA,EAAInvB,IAAI1I,EAAGoR,GACJymB,GAGF,IAAI7zB,KAAKmzB,OAAOn3B,EAAGoR,IAG5BE,EAAOwmB,QAAU,WACf,QAAQ18B,EAAM4I,KAAW,OAAO5I,EAAM4I,KAAW,OAAO5I,EAAM4I,KAAW,OAAO5I,EAAM4I,KAAW,QAGnGsN,EAAOuB,OAAS,SAAgBklB,GAC9B,OAAO/zB,KAAW,OAAM+zB,EAAW,MAAK/zB,KAAW,OAAM+zB,EAAW,MAAK/zB,KAAW,OAAM+zB,EAAW,MAAK/zB,KAAW,OAAM+zB,EAAW,MAGxIzmB,EAAO0mB,WAAa,SAAoBD,GACtC/zB,KAAKi0B,SAASj0B,MAEdA,KAAKi0B,SAASF,GAEd,IAAIG,EAAQ17B,KAAKsE,IAAIkD,KAAY,MAAG+zB,EAAY,OAC5CI,EAAQ37B,KAAKsE,IAAIkD,KAAY,MAAG+zB,EAAY,OAC5CK,EAAQ57B,KAAKqE,IAAImD,KAAY,MAAG+zB,EAAY,OAC5CM,EAAQ77B,KAAKqE,IAAImD,KAAY,MAAG+zB,EAAY,OAC5CC,IAAeE,EAAQE,GAASD,EAAQE,GAC5C,OAAOL,GAGT1mB,EAAOgnB,OAAS,SAAgBvX,GAK9B,OAJA/c,KAAKi0B,SAASj0B,MAEdA,KAAKi0B,SAASlX,GAEP/c,KAAKu0B,OAASxX,EAAOwX,OAASv0B,KAAKw0B,OAASzX,EAAOyX,OAASx0B,KAAKy0B,OAAS1X,EAAO0X,OAASz0B,KAAK00B,OAAS3X,EAAO2X,OAGxHpnB,EAAOyJ,SAAW,SAAkBvT,GAClC,IAAKA,EACH,OAAO,EAGTxD,KAAKi0B,SAASj0B,MAEd,IAAIyxB,EAAOzxB,KAAKqzB,WAEhB,GAAI5B,EACF,QAAY31B,IAAR0H,EAAExH,EAAiB,CACrB,IAAIm1B,EAAQoB,GAERj3B,MAAMC,QAAQiI,IAChB2tB,EAAMn1B,EAAIwH,EAAE,GACZ2tB,EAAM/jB,EAAI5J,EAAE,KAEZ2tB,EAAMn1B,EAAIwH,EAAExH,EACZm1B,EAAM/jB,EAAI5J,EAAE4J,GAGd5J,EAAIiuB,EAAKkD,QAAQxD,EAAOA,aACJr1B,IAAX0H,EAAEgwB,MACXxzB,KAAKi0B,SAASzwB,GAIlB,OAAQA,EAAExH,GAAKwH,EAAE+wB,OAAS,IAAMv0B,KAAKu0B,QAAU/wB,EAAExH,GAAKwH,EAAEgxB,OAAS,IAAMx0B,KAAKw0B,QAAUhxB,EAAE4J,GAAK5J,EAAEixB,OAAS,IAAMz0B,KAAKy0B,QAAUjxB,EAAE4J,GAAK5J,EAAEkxB,OAAS,IAAM10B,KAAK00B,OAG5JpnB,EAAO8P,SAAW,WAChB,OAAO5kB,KAAK+D,IAAIyD,KAAW,KAAIA,KAAW,OAG5CsN,EAAO+P,UAAY,WACjB,OAAO7kB,KAAK+D,IAAIyD,KAAW,KAAIA,KAAW,OAG5CsN,EAAOsnB,QAAU,WACf,OAAO,IAAI3kB,GAAKjQ,KAAKod,WAAYpd,KAAKqd,cAGxC/P,EAAO5I,IAAM,SAAa8uB,EAAME,EAAMD,EAAME,GAM1C,OALA3zB,KAAKwzB,KAAOA,EACZxzB,KAAK0zB,KAAOA,EACZ1zB,KAAKyzB,KAAOA,EACZzzB,KAAK2zB,KAAOA,EACZ3zB,KAAKszB,QAAS,EACPtzB,MAGTsN,EAAOunB,UAAY,SAAmB9X,GAWpC,IACIyW,EAAME,EAAMD,EAAME,OAXL73B,IAAbihB,EAAO/gB,IACTq2B,GAAYmB,KAAOnB,GAAYoB,KAAO1W,EAAO/gB,EAC7Cq2B,GAAYqB,KAAOrB,GAAYsB,KAAO5W,EAAO3P,EAC7C2P,EAASsV,IAGXryB,KAAKi0B,SAASlX,GAEd/c,KAAKi0B,SAASj0B,MAED1I,EAAS0I,KAAKu0B,QASzBf,EAAOh7B,KAAKqE,IAAImD,KAAY,MAAG+c,EAAc,OAC7C2W,EAAOl7B,KAAKqE,IAAImD,KAAY,MAAG+c,EAAc,OAC7C0W,EAAOj7B,KAAKsE,IAAIkD,KAAY,MAAG+c,EAAc,OAC7C4W,EAAOn7B,KAAKsE,IAAIkD,KAAY,MAAG+c,EAAc,SAR7CyW,EAAOzW,EAAc,MACrB2W,EAAO3W,EAAc,MACrB0W,EAAO1W,EAAc,MACrB4W,EAAO5W,EAAc,OAQvB,IAAI0U,EAAOzxB,KAAKqzB,WAEhB,GAAI5B,EAAM,CACRe,GAAY9tB,IAAI8uB,EAAME,GACtBjB,GAAY/tB,IAAI+uB,EAAME,GACtB,IAAI92B,EAAM40B,EAAK2B,UAAUZ,GAAaA,IAClC11B,EAAM20B,EAAK2B,UAAUX,GAAaA,IACtCe,EAAO32B,EAAIb,EACX03B,EAAO72B,EAAIuQ,EACXqmB,EAAO32B,EAAId,EACX23B,EAAO72B,EAAIsQ,EAOb,OAJA4lB,GAAa,GAAKQ,EAClBR,GAAa,GAAKU,EAClBV,GAAa,GAAKS,EAClBT,GAAa,GAAKW,EACXX,IAGT1lB,EAAOwnB,SAAW,SAAkB/X,GAClC,IAAKA,GAAUA,EAAO+W,UAAY/W,EAAO+W,UACvC,OAAO9zB,KAGT,IAAI+0B,EAAM/0B,KAAK60B,UAAU9X,GAIzB,OAFA/c,KAAK0E,IAAIqwB,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,IACrC/0B,KAAKszB,QAAS,EACPtzB,MAGTsN,EAAO0nB,QAAU,SAAiBjY,GAChC,IAAKA,GAAUA,EAAO+W,UAAY/W,EAAO+W,UACvC,OAAO9zB,KAGT,IAAI+0B,EAAM/0B,KAAK60B,UAAU9X,GAEzB,OAAO,IAAI/c,KAAKnI,YAAYk9B,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAI/0B,KAAKqzB,aAGnE/lB,EAAO2nB,aAAe,SAAsBlY,GAC1C,IAAK/c,KAAKg0B,WAAWjX,GACnB,OAAO,KAGT2V,GAAY12B,EAAIxD,KAAKsE,IAAIkD,KAAY,MAAG+c,EAAc,OACtD2V,GAAYtlB,EAAI5U,KAAKsE,IAAIkD,KAAY,MAAG+c,EAAc,OACtD4V,GAAY32B,EAAIxD,KAAKqE,IAAImD,KAAY,MAAG+c,EAAc,OACtD4V,GAAYvlB,EAAI5U,KAAKqE,IAAImD,KAAY,MAAG+c,EAAc,OACtD,IAAIlgB,EAAM61B,GACN51B,EAAM61B,GACNlB,EAAOzxB,KAAKqzB,WAOhB,OALI5B,IACF50B,EAAM40B,EAAK2B,UAAUv2B,EAAKA,GAC1BC,EAAM20B,EAAK2B,UAAUt2B,EAAKA,IAGrB,IAAIkD,KAAKnI,YAAYgF,EAAKC,EAAK20B,IAGxCnkB,EAAO4nB,OAAS,SAAgBC,GAC9B,IAAIhuB,EAAGC,EASP,OAPK9P,EAAS69B,GAIZhuB,EAAIC,EAAI+tB,GAHRhuB,EAAIguB,EAAgB,OAAKA,EAAY,GAAKA,EAAS,IAAM,EACzD/tB,EAAI+tB,EAAiB,QAAKA,EAAY,GAAKA,EAAS,IAAM,GAKrD,IAAIn1B,KAAKnI,YAAYmI,KAAW,KAAImH,EAAGnH,KAAW,KAAIoH,EAAGpH,KAAW,KAAImH,EAAGnH,KAAW,KAAIoH,EAAGpH,KAAKqzB,aAG3G/lB,EAAO8nB,QAAU,SAAiBD,GAChC,IAAIhuB,EAAGC,EAcP,OAZK9P,EAAS69B,GAIZhuB,EAAIC,EAAI+tB,GAHRhuB,EAAIguB,EAAgB,OAAKA,EAAY,GAAKA,EAAS,IAAM,EACzD/tB,EAAI+tB,EAAiB,QAAKA,EAAY,GAAKA,EAAS,IAAM,GAK5Dn1B,KAAW,MAAKmH,EAChBnH,KAAW,MAAKoH,EAChBpH,KAAW,MAAKmH,EAChBnH,KAAW,MAAKoH,EAChBpH,KAAKszB,QAAS,EACPtzB,MAGTsN,EAAO2B,OAAS,WACd,MAAO,CACL,KAAQjP,KAAW,KACnB,KAAQA,KAAW,KACnB,KAAQA,KAAW,KACnB,KAAQA,KAAW,OAIvBsN,EAAOyB,QAAU,WACf,IAAIykB,EAAOxzB,KAAW,KAClB0zB,EAAO1zB,KAAW,KAClByzB,EAAOzzB,KAAW,KAClB2zB,EAAO3zB,KAAW,KACtB,MAAO,CAAC,IAAIA,KAAKmzB,OAAO,CAACK,EAAMG,IAAQ,IAAI3zB,KAAKmzB,OAAO,CAACM,EAAME,IAAQ,IAAI3zB,KAAKmzB,OAAO,CAACM,EAAMC,IAAQ,IAAI1zB,KAAKmzB,OAAO,CAACK,EAAME,IAAQ,IAAI1zB,KAAKmzB,OAAO,CAACK,EAAMG,MAG7JrmB,EAAOrU,SAAW,WAChB,OAAO+G,KAAKwzB,KAAO,IAAMxzB,KAAK0zB,KAAO,IAAM1zB,KAAKyzB,KAAO,IAAMzzB,KAAK2zB,MAGpErmB,EAAOU,KAAO,WACZ,OAAO,IAAIhO,KAAKnI,YAAYmI,KAAW,KAAGA,KAAW,KAAGA,KAAW,KAAGA,KAAW,KAAGA,KAAKqzB,aAG3F/lB,EAAO+nB,UAAY,SAAmB17B,EAAIk6B,GACxC,IAAK7zB,KAAK8zB,UACR,OAAO,KAGT,IAMI3C,EANApd,EAAI8f,GAAO,IAAI7zB,KAAKnI,YA+BxB,OA7BIg8B,GACF9f,EAAErP,IAAI,KAAM,KAAM,KAAM,MAKtB1E,KAAKmzB,SAAWnC,GAClBG,EAAQyB,GACC5yB,KAAKmzB,SAAWjkB,KACzBiiB,EAAQmB,IAGVnB,EAAMn1B,EAAIgE,KAAKwzB,KACfrC,EAAM/jB,EAAIpN,KAAK2zB,KAEf5f,EAAE+gB,SAASn7B,EAAGw3B,IAEdA,EAAMn1B,EAAIgE,KAAKyzB,KAEf1f,EAAE+gB,SAASn7B,EAAGw3B,IAEdA,EAAM/jB,EAAIpN,KAAK0zB,KAEf3f,EAAE+gB,SAASn7B,EAAGw3B,IAEdA,EAAMn1B,EAAIgE,KAAKwzB,KAEfzf,EAAE+gB,SAASn7B,EAAGw3B,IAEPpd,GAGTzG,EAAO2mB,SAAW,SAAkBc,GAClC,GAAKA,GAAQA,EAAIjB,UAAjB,CAQA,IAAIrC,EAAOzxB,KAAKqzB,WAEhB,GAAI5B,EAAM,CACR,GAAIsD,EAAIzB,OAAQ,CACdT,GAAYnuB,IAAIqwB,EAAItB,KAAMsB,EAAIrB,MAC9BZ,GAAYpuB,IAAIqwB,EAAIvB,KAAMuB,EAAIpB,MAC9BZ,GAAO,GAAKF,GACZE,GAAO,GAAKD,GACZ,IAAIwC,EAAS7D,EAAK8D,cAAcxC,IAC5Bl2B,EAAMy4B,EAAO,GACbx4B,EAAMw4B,EAAO,GACjBP,EAAIR,MAAQ/7B,KAAKqE,IAAIA,EAAIb,EAAGc,EAAId,GAChC+4B,EAAIN,MAAQj8B,KAAKqE,IAAIA,EAAIuQ,EAAGtQ,EAAIsQ,GAChC2nB,EAAIP,MAAQh8B,KAAKsE,IAAID,EAAIb,EAAGc,EAAId,GAChC+4B,EAAIL,MAAQl8B,KAAKsE,IAAID,EAAIuQ,EAAGtQ,EAAIsQ,UAG3B2nB,EAAIzB,YAEXyB,EAAIR,MAAQQ,EAAIvB,KAChBuB,EAAIP,MAAQO,EAAItB,KAChBsB,EAAIN,MAAQM,EAAIrB,KAChBqB,EAAIL,MAAQK,EAAIpB,UA7BZoB,IACFA,EAAIR,MAAQQ,EAAIP,MAAQO,EAAIN,MAAQM,EAAIL,MAAQ,OAgC/CzB,EAneI,GAsebZ,GAAc,IAAIY,GAAO,EAAG,EAAG,EAAG,GAElC,IA0QQuC,GA1QJC,GAAc,SAAUC,GAG1B,SAASD,EAAYjU,EAAIC,EAAI2E,EAAI8M,GAC/B,IAAInD,EAIJ,OAFAA,EAAQ2F,EAAQp9B,KAAK0H,KAAMwhB,EAAIC,EAAI2E,EAAI8M,IAAOlzB,MACxCmzB,OAASjkB,GACR6gB,EAGT,OAVApjB,GAAe8oB,EAAaC,GAUrBD,EAXS,CAYhBxC,IAEE0C,GAAiB,WACnB,SAASA,EAAeC,GACtB51B,KAAK41B,OAASA,EAGhB,IAAItoB,EAASqoB,EAAex9B,UA4B5B,OA1BAmV,EAAOuoB,UAAY,SAAmB3E,EAAa4E,EAAOjC,GACxD,IAAI73B,EAAIgE,KAAK41B,OAAO,IAAM1E,EAAYl1B,EAAIgE,KAAK41B,OAAO,IAAME,EACxD1oB,GAAKpN,KAAK41B,OAAO,IAAM1E,EAAY9jB,EAAIpN,KAAK41B,OAAO,IAAME,EAE7D,OAAIjC,GACFA,EAAI73B,EAAIA,EACR63B,EAAIzmB,EAAIA,EACDymB,GAGF,IAAI3kB,GAAMlT,EAAGoR,IAGtBE,EAAOyoB,YAAc,SAAqBnoB,EAAOkoB,EAAOjC,GACtD,IAAI73B,EAAI4R,EAAM5R,EAAI85B,EAAQ91B,KAAK41B,OAAO,GAAK51B,KAAK41B,OAAO,GACnDxoB,EAAIQ,EAAMR,EAAI0oB,GAAS91B,KAAK41B,OAAO,GAAK51B,KAAK41B,OAAO,GAExD,OAAI/B,GACFA,EAAI73B,EAAIA,EACR63B,EAAIzmB,EAAIA,EACDymB,GAGF,IAAI7C,GAAWh1B,EAAGoR,IAGpBuoB,EAjCY,GAoCjBK,GAAS,CACXrB,QAAS,aACTvB,UAAW,aACXmC,cAAe,SAAuBrE,GACpC,IAAInB,EAAQ/vB,KAEZ,IAAKkxB,EACH,MAAO,GAGT,IAAK51B,MAAMC,QAAQ21B,GACjB,OAAOlxB,KAAK20B,QAAQzD,GAGtB,GAA2B,IAAvBA,EAAYj6B,OACd,MAAO,GAGT,IAAK+I,KAAKi2B,WACR,OAAO96B,EAAa+1B,EAAalxB,KAAK20B,QAAS30B,MAGjD,GAAI1E,MAAMC,QAAQ21B,EAAY,IAC5B,OAAOA,EAAYrzB,KAAI,SAAUq4B,GAC/B,OAAOnG,EAAMwF,cAAcW,MAe7B,IAZA,IAIIC,EAAOC,EAEPC,EACAp3B,EACAC,EACA1D,EATA86B,EAASt2B,KAAKu2B,YACdxZ,EAAS/c,KAAKw2B,kBACdC,EAAK1Z,EAAO0Z,GACZC,EAAK3Z,EAAO2Z,GAEZC,EAAMzF,EAAY,GAKlB0F,EAAM,CAAC52B,KAAK20B,QAAQgC,IAEf5/B,EAAI,EAAGiO,EAAIksB,EAAYj6B,OAAQF,EAAIiO,EAAGjO,IAE7CkI,GADAo3B,EAAUnF,EAAYn6B,IACTiF,EAAI26B,EAAI36B,EACrBkD,EAAKm3B,EAAQjpB,EAAIupB,EAAIvpB,EACrB5R,EAAIwE,KAAK20B,QAAQ0B,GAEb79B,KAAK+D,IAAI0C,GAAM,WACHnD,IAAVq6B,IACFA,EAAQE,EAAQr6B,EAAI26B,EAAI36B,GAGtBm6B,IACF36B,EAAEyS,MAAMqoB,EAAOt6B,EAAID,EAAKkD,GAAMw3B,EAAI,GAElCJ,EAAQpoB,MAAM,IAAMlS,EAAKkD,GAAK,KAI9BzG,KAAK+D,IAAI2C,GAAM,UACHpD,IAAVs6B,IACFA,EAAQC,EAAQjpB,EAAIupB,EAAIvpB,GAGtBgpB,IACF56B,EAAEyS,KAAK,GAAIqoB,EAAOlpB,EAAIrR,EAAKmD,GAAMw3B,GAEjCL,EAAQpoB,KAAK,GAAI,IAAMlS,EAAKmD,MAIhCy3B,EAAMN,EACNO,EAAI97B,KAAKU,GAGX,OAAOo7B,GAGXC,gBAAiB,SAAyBC,GACxC,OAAKA,EAIAx7B,MAAMC,QAAQu7B,GAIZ37B,EAAa27B,EAAY92B,KAAKozB,UAAWpzB,MAHvCA,KAAKozB,UAAU0D,GAJf,IASXb,SAAU,WACR,QAASj2B,KAAK+2B,QAEhBC,YAAa,SAAqBC,GAChC,QAAKj3B,KAAKi2B,aAIGj2B,KAAKw2B,kBACHzf,SAASkgB,IAE1BC,UAAW,SAAmBD,GAC5B,IAAKj3B,KAAKi2B,WACR,OAAOgB,EAGT,IAAIla,EAAS/c,KAAKw2B,kBACdW,EAAU,IAAInG,GAAWiG,GAO7B,OALKla,EAAOhG,SAASogB,KACnBA,EAAQn7B,EAAIY,EAAKq6B,EAAOj7B,EAAG+gB,EAAOyW,KAAMzW,EAAO0W,MAC/C0D,EAAQ/pB,EAAIxQ,EAAKq6B,EAAO7pB,EAAG2P,EAAO2W,KAAM3W,EAAO4W,OAG1CwD,GAETZ,UAAW,WACT,IAAKv2B,KAAKs2B,QAAUt2B,KAAKi2B,WAAY,CACnC,IAAIlZ,EAAS/c,KAAKw2B,kBAClBx2B,KAAKs2B,OAAS,CACZt6B,EAAG+gB,EAAOK,WACVhQ,EAAG2P,EAAOM,aAId,OAAOrd,KAAKs2B,QAEdE,gBAAiB,WACf,IAAKx2B,KAAK+c,QAAU/c,KAAKi2B,WAAY,CACnC,IAAIn5B,EAAMkD,KAAK20B,QAAQ,IAAI3D,GAAW,IAAK,KACvCn0B,EAAMmD,KAAK20B,QAAQ,IAAI3D,IAAY,KAAM,KAC7ChxB,KAAK+c,OAAS,IAAIkW,GAAOp2B,EAAKC,EAAKkD,MACnCA,KAAK+c,OAAO0Z,GAAK35B,EAAId,EAAIa,EAAIb,EAAI,GAAK,EACtCgE,KAAK+c,OAAO2Z,GAAK55B,EAAIsQ,EAAIvQ,EAAIuQ,EAAI,GAAK,EAGxC,OAAOpN,KAAK+c,SAGZqa,GAAW,CACbC,cAAe,SAAuBC,EAAIC,GACxC,IAAKj8B,MAAMC,QAAQ+7B,GACjB,OAAOt3B,KAAKw3B,kBAAkBF,EAAIC,GAKpC,IAFA,IAAI57B,EAAM,EAED5E,EAAI,EAAGiO,EAAIsyB,EAAGrgC,OAAQF,EAAIiO,EAAI,EAAGjO,IACxC4E,GAAOqE,KAAKw3B,kBAAkBF,EAAGvgC,GAAIugC,EAAGvgC,EAAI,IAG9C,OAAO4E,IAGP87B,GAAW5gC,EAAO,CACpB,QAAW,WACX2gC,kBAAmB,SAA2BF,EAAIC,GAChD,IAAKD,IAAOC,EACV,OAAO,EAGT,IACE,OAAO/+B,KAAKqV,KAAKrV,KAAKoL,IAAI0zB,EAAGt7B,EAAIu7B,EAAGv7B,EAAG,GAAKxD,KAAKoL,IAAI0zB,EAAGlqB,EAAImqB,EAAGnqB,EAAG,IAClE,MAAO9B,IACP,OAAO,IAGXosB,YAAa,SAAqBxG,GAChC,IAAK51B,MAAMC,QAAQ21B,GACjB,OAAO,EAKT,IAFA,IAAIyG,EAAO,EAEF5gC,EAAI,EAAG4E,EAAMu1B,EAAYj6B,OAAQF,EAAI4E,EAAK5E,IAAK,CACtD,IAAIugC,EAAKpG,EAAYn6B,GACjBwgC,EAAK,KAGPA,EADExgC,IAAM4E,EAAM,EACTu1B,EAAY,GAEZA,EAAYn6B,EAAI,GAGvB4gC,GAAQL,EAAGt7B,EAAIu7B,EAAGnqB,EAAIkqB,EAAGlqB,EAAImqB,EAAGv7B,EAGlC,OAAOxD,KAAK+D,IAAIo7B,EAAO,IAEzBC,OAAQ,SAAgBp0B,EAAGq0B,EAAOC,GAEhC,OADAt0B,EAAI,IAAIwtB,GAAWxtB,EAAExH,EAAGwH,EAAE4J,GACnBpN,KAAK+3B,QAAQv0B,EAAGq0B,EAAOC,IAEhCC,QAAS,SAAiBv0B,EAAGq0B,EAAOC,GAClC,OAAKt0B,GAIAq0B,IACHA,EAAQ,GAGLC,IACHA,EAAQ,GAGLD,GAAUC,GAIft0B,EAAExH,EAAIwH,EAAExH,EAAI67B,EACZr0B,EAAE4J,EAAI5J,EAAE4J,EAAI0qB,EACLt0B,GALEA,GAZA,MAmBXwM,OAAQ,SAAgBxM,EAAGw0B,EAAOnoB,GAEhC,OADArM,EAAI,IAAIwtB,GAAWxtB,EAAExH,EAAGwH,EAAE4J,GACnBpN,KAAK4P,QAAQpM,EAAGw0B,EAAOnoB,IAEhCD,SACM4lB,GAAM,IAAItmB,GAAM,EAAG,GAChB,SAAU1L,EAAGw0B,EAAOnoB,GAQzB,OAPA2lB,GAAIx5B,EAAIwH,EAAExH,EAAIg8B,EAAMh8B,EACpBw5B,GAAIpoB,EAAI5J,EAAE4J,EAAI4qB,EAAM5qB,EAEpBooB,GAAI5lB,QAAQC,EAAQrX,KAAKC,GAAK,KAE9B+K,EAAExH,EAAIg8B,EAAMh8B,EAAIw5B,GAAIx5B,EACpBwH,EAAE4J,EAAI4qB,EAAM5qB,EAAIooB,GAAIpoB,EACb5J,KAGV4zB,IAECa,GAAS,WACX,SAASA,EAAOjR,GACdhnB,KAAKgnB,OAASA,EAGhB,IAAI1Z,EAAS2qB,EAAO9/B,UAuGpB,OArGAmV,EAAOkqB,kBAAoB,SAA2BF,EAAIC,GACxD,IAAKD,IAAOC,EACV,OAAO,EAGT,IAAI76B,EAAIhE,EAAS4+B,EAAGlqB,GAChBzU,EAAID,EAAS6+B,EAAGnqB,GAChB2G,EAAIrX,EAAI/D,EACRywB,EAAI1wB,EAAS4+B,EAAGt7B,GAAKtD,EAAS6+B,EAAGv7B,GAGrC,OAFAU,EAAI,EAAIlE,KAAKitB,KAAKjtB,KAAKqV,KAAKrV,KAAKoL,IAAIpL,KAAKuX,IAAIgE,EAAI,GAAI,GAAKvb,KAAKsX,IAAIpT,GAAKlE,KAAKsX,IAAInX,GAAKH,KAAKoL,IAAIpL,KAAKuX,IAAIqZ,EAAI,GAAI,KACjH1sB,GAAKsD,KAAKgnB,OACHxuB,KAAK8D,MAAU,IAAJI,GAAW,KAG/B4Q,EAAOoqB,YAAc,SAAqBxG,GACxC,IASIn6B,EATA0F,EAAI/D,EAASsH,KAAKgnB,QAClBtqB,EAAI,EACJ8G,EAAI0tB,EACJv4B,EAAI6K,EAAEvM,OAEV,GAAI0B,EAAI,EACN,OAAO,EAKT,IAAK5B,EAAI,EAAGA,EAAI4B,EAAI,EAAG5B,IAAK,CAC1B,IAAIgd,EAAIvQ,EAAEzM,GACNqyB,EAAI5lB,EAAEzM,EAAI,GACd2F,GAAKqX,EAAE/X,EAAIS,EAAIjE,KAAKsX,IAAIpX,EAASqb,EAAE3G,IAAMgc,EAAEhc,EAAI3Q,EAAI2sB,EAAEptB,EAAIS,EAAIjE,KAAKsX,IAAIpX,EAAS0wB,EAAEhc,IAAM2G,EAAE3G,EAAI3Q,EAM/F,OAHA9D,EAAI6K,EAAEzM,GACNyM,EAAIA,EAAE,GACN9G,GAAK/D,EAAEqD,EAAIS,EAAIjE,KAAKsX,IAAIpX,EAASC,EAAEyU,IAAM5J,EAAE4J,EAAI3Q,EAAI+G,EAAExH,EAAIS,EAAIjE,KAAKsX,IAAIpX,EAAS8K,EAAE4J,IAAMzU,EAAEyU,EAAI3Q,EACtF,GAAMjE,KAAK+D,IAAIG,IAGxB4Q,EAAOsqB,OAAS,SAAgBp0B,EAAGq0B,EAAOC,GAExC,OADAt0B,EAAI,IAAIwtB,GAAWxtB,EAAExH,EAAGwH,EAAE4J,GACnBpN,KAAK+3B,QAAQv0B,EAAGq0B,EAAOC,IAGhCxqB,EAAOyqB,QAAU,SAAiBv0B,EAAGq0B,EAAOC,GAC1C,IAAKt0B,EACH,OAAO,KAWT,GARKq0B,IACHA,EAAQ,GAGLC,IACHA,EAAQ,IAGLD,IAAUC,EACb,OAAOt0B,EAGT,IAAIxH,EAAGoR,EACH8qB,EAAKx/B,EAAS8K,EAAE4J,GAEpB,GAAc,IAAV0qB,EAAa,CACf,IAAI54B,EAAK1G,KAAK+D,IAAIu7B,GAGlB1qB,EAAIxQ,EAAU,KADds7B,GAD4C,EAAnC1/B,KAAKuX,IAAI7Q,GAAM,EAAIc,KAAKgnB,UACjB8Q,EAAQ,EAAI,GAAK,IACbt/B,KAAKC,IAAK,GAAI,SAElC2U,EAAI5J,EAAE4J,EAGR,GAAc,IAAVyqB,EAAa,CACf,IAAI54B,EAAKzG,KAAK+D,IAAIs7B,GACdM,EAAKz/B,EAAS8K,EAAExH,GAGpBA,EAAIY,EAAU,KADdu7B,GADS,EAAI3/B,KAAKqV,KAAKrV,KAAKoL,IAAIpL,KAAKuX,IAAI9Q,GAAM,EAAIe,KAAKgnB,SAAU,GAAKxuB,KAAKoL,IAAIpL,KAAKsX,IAAIooB,GAAK,KAC9EL,EAAQ,EAAI,GAAK,IACbr/B,KAAKC,IAAK,IAAK,UAEnCuD,EAAIwH,EAAExH,EAKR,OAFAwH,EAAExH,EAAIA,EACNwH,EAAE4J,EAAIA,EACC5J,GAGT8J,EAAO0C,OAAS,SAAgBxM,EAAGw0B,EAAOnoB,GAExC,OADArM,EAAI,IAAIwtB,GAAWxtB,GACZxD,KAAK4P,QAAQpM,EAAGw0B,EAAOnoB,IAGhCvC,EAAOsC,QAAU,SAAiBpM,EAAGw0B,EAAOnoB,GAC1C,IACIuoB,EAUR,SAAsBlS,EAAOmS,EAAK9f,QAChB,IAAZA,IACFA,EAAU,IAGZ,IAAI+f,EACeA,EAAf/f,EAAQggB,MAAiBC,GAAsBH,EAAKnS,GAAsBsS,GAAsBtS,EAAOmS,GAE3G,OADcC,EAAU,MAAQ,IAAMA,GAAWA,EAlB5BG,CAAaT,EAAOx0B,GACPqM,EAC5BslB,EAAWn1B,KAAKw3B,kBAAkBQ,EAAOx0B,GAG7C,OAFAA,EAAExH,EAAIg8B,EAAMh8B,EACZwH,EAAE4J,EAAI4qB,EAAM5qB,EA6BhB,SAAmCsrB,EAAQvD,EAAUwD,EAAS3R,GAC5D,IAAItnB,EAAQy1B,EAAWnO,EACnB4R,EAAUF,EAAO18B,EAAIxD,KAAKC,GAAK,IAC/BogC,EAAOngC,EAASggC,EAAOtrB,GACvB0rB,EAAQpgC,EAASigC,GACjBI,EAAWr5B,EAAQlH,KAAKsX,IAAIgpB,GAC5BE,EAAOH,EAAOE,EACdvgC,KAAK+D,IAAIy8B,GAAQxgC,KAAKC,GAAK,IAAGugC,EAAOA,EAAO,EAAIxgC,KAAKC,GAAKugC,GAAQxgC,KAAKC,GAAKugC,GAChF,IAAIC,EAAWzgC,KAAK2D,IAAI3D,KAAK0gC,IAAIF,EAAO,EAAIxgC,KAAKC,GAAK,GAAKD,KAAK0gC,IAAIL,EAAO,EAAIrgC,KAAKC,GAAK,IACrF0gC,EAAI3gC,KAAK+D,IAAI08B,GAAY,MAASF,EAAWE,EAAWzgC,KAAKsX,IAAI+oB,GACjEO,EAAc15B,EAAQlH,KAAKuX,IAAI+oB,GAASK,EACxCE,EAAUT,EAAUQ,EAGxB,OAFAV,EAAO18B,GAAe,IAAVq9B,EAAgB7gC,KAAKC,GAAK,KAAO,IAAM,IACnDigC,EAAOtrB,EAAW,IAAP4rB,EAAaxgC,KAAKC,GACtBigC,EA1CEY,CAA0B91B,EAAG2xB,EAAUiD,EAAYp4B,KAAKgnB,SAG1DiR,EA5GI,GA0Hb,SAASO,GAAsBe,EAAMpN,GACnC,IAAI0M,EAAOngC,EAAS6gC,EAAKnsB,GACrB4rB,EAAOtgC,EAASyzB,EAAG/e,GACnBosB,EAAc9gC,EAASyzB,EAAGnwB,EAAIu9B,EAAKv9B,GACnCw9B,EAAchhC,KAAKC,KAAI+gC,GAAe,EAAIhhC,KAAKC,IAC/C+gC,GAAehhC,KAAKC,KAAI+gC,GAAe,EAAIhhC,KAAKC,IACpD,IAAIghC,EAAWjhC,KAAK2D,IAAI3D,KAAK0gC,IAAIF,EAAO,EAAIxgC,KAAKC,GAAK,GAAKD,KAAK0gC,IAAIL,EAAO,EAAIrgC,KAAKC,GAAK,IAEzF,OAAQG,EADIJ,KAAK2G,MAAMq6B,EAAaC,IACV,KAAO,IAoBnC,IAAIC,GAAc7iC,EAAO,CACvB,QAAW,YACXkgC,OAAQ,IAAIkB,GAAO,SACnBT,kBAAmB,WACjB,OAAOx3B,KAAK+2B,OAAOS,kBAAkBr0B,MAAMnD,KAAK+2B,OAAQ//B,YAE1D0gC,YAAa,WACX,OAAO13B,KAAK+2B,OAAOW,YAAYv0B,MAAMnD,KAAK+2B,OAAQ//B,YAEpD+gC,QAAS,WACP,OAAO/3B,KAAK+2B,OAAOgB,QAAQ50B,MAAMnD,KAAK+2B,OAAQ//B,YAEhD4gC,OAAQ,WACN,OAAO53B,KAAK+2B,OAAOa,OAAOz0B,MAAMnD,KAAK+2B,OAAQ//B,YAE/C4Y,QAAS,WACP,OAAO5P,KAAK+2B,OAAOnnB,QAAQzM,MAAMnD,KAAK+2B,OAAQ//B,YAEhDgZ,OAAQ,WACN,OAAOhQ,KAAK+2B,OAAO/mB,OAAO7M,MAAMnD,KAAK+2B,OAAQ//B,aAE9CogC,IACCuC,GAAc9iC,EAAO,CACvB,QAAW,QACXkgC,OAAQ,IAAIkB,GAAO,YACnBT,kBAAmB,WACjB,OAAOx3B,KAAK+2B,OAAOS,kBAAkBr0B,MAAMnD,KAAK+2B,OAAQ//B,YAE1D0gC,YAAa,WACX,OAAO13B,KAAK+2B,OAAOW,YAAYv0B,MAAMnD,KAAK+2B,OAAQ//B,YAEpD+gC,QAAS,WACP,OAAO/3B,KAAK+2B,OAAOgB,QAAQ50B,MAAMnD,KAAK+2B,OAAQ//B,YAEhD4gC,OAAQ,WACN,OAAO53B,KAAK+2B,OAAOa,OAAOz0B,MAAMnD,KAAK+2B,OAAQ//B,YAE/C4Y,QAAS,WACP,OAAO5P,KAAK+2B,OAAOnnB,QAAQzM,MAAMnD,KAAK+2B,OAAQ//B,YAEhDgZ,OAAQ,WACN,OAAOhQ,KAAK+2B,OAAO/mB,OAAO7M,MAAMnD,KAAK+2B,OAAQ//B,aAE9CogC,IACCwC,GAAUF,GACVG,GAAY,GAEhB,SAASC,GAAiBC,GACxBF,GAAUE,EAAEC,SAAWD,EAGzBD,GAAiBrC,IACjBqC,GAAiBJ,IACjBI,GAAiBH,IACjB,IA0hCIM,GA1hCAC,GAAW,CACbC,YAAa,SAAqBjgC,GAChC,IAAKA,EACH,OAAO0/B,GAGT,IAAK,IAAIp+B,KAAKq+B,GACZ,GAAIzhC,EAAOyhC,GAAWr+B,GAAI,CACxB,IAAI4+B,EAAQP,GAAUr+B,GAAY,QAElC,IAAK4+B,EACH,SAGF,GAAIlgC,EAAKkP,gBAAkBgxB,EAAMhxB,cAC/B,OAAOywB,GAAUr+B,GAKvB,OAAO,OAWPu2B,GAAWl7B,EAAO,GAAIm/B,GAAQ,CAChCrE,KAAM,YACN5K,IAAKvuB,KAAKC,GAAK,IACf4hC,gBAAiB,QAAU7hC,KAAKC,GAAK,IACrC6hC,YAAa,cACb3F,QAAS,SAAiB4F,EAAQ1G,GAChC,IAAI9M,EAAM/mB,KAAK+mB,IACXsT,EAAkBr6B,KAAKq6B,gBACvBv9B,EAAMkD,KAAKs6B,YACXE,EAAMD,EAAOv+B,EACby+B,EAAMjiC,KAAKsE,IAAItE,KAAKqE,IAAIC,EAAKy9B,EAAOntB,IAAKtQ,GASzCd,EAAIw+B,EAAMH,EACVjtB,GAPQ,IAARqtB,EACE,EAEAjiC,KAAK2D,IAAI3D,KAAK0gC,KAAK,GAAKuB,GAAO1T,EAAM,IAAMA,GAIrCsT,EAEZ,OAAIxG,GACFA,EAAI73B,EAAIA,EACR63B,EAAIzmB,EAAIA,EACDymB,GAGF,IAAI7C,GAAWh1B,EAAGoR,IAE3BgmB,UAAW,SAAmBsH,EAAS7G,GACrC,IAIIrwB,EAJAujB,EAAM/mB,KAAK+mB,IACXsT,EAAkBr6B,KAAKq6B,gBACvBr+B,EAAI0+B,EAAQ1+B,EAAIq+B,EAChBjtB,EAAIstB,EAAQttB,EAGN,IAANA,EACF5J,EAAI,GAEJA,EAAI4J,EAAIitB,EACR72B,GAAK,EAAIhL,KAAKmiC,KAAKniC,KAAKoiC,IAAIp3B,EAAIujB,IAAQvuB,KAAKC,GAAK,GAAKsuB,GAGrDvuB,KAAK+D,IAAI/D,KAAK+D,IAAIP,GAAK,KA7CnB,OA8CNA,EAAc,IAAVD,EAAKC,IAGPxD,KAAK+D,IAAI/D,KAAK+D,IAAIiH,GAAKxD,KAAKs6B,aAjDxB,OAkDN92B,EAAIzH,EAAKyH,GAAKxD,KAAKs6B,aAGrB,IAAInC,EAAKv7B,EAAKZ,GAAI,IAAK,KACnBk8B,EAAKt7B,EAAK4G,GAAIxD,KAAKs6B,YAAat6B,KAAKs6B,aAEzC,OAAIzG,GACFA,EAAI73B,EAAIm8B,EACRtE,EAAIzmB,EAAI8qB,EACDrE,GAGF,IAAI7C,GAAWmH,EAAID,KAE3BwB,IACCmB,GAAWhkC,EAAO,GAAIm/B,GAAQ,CAChCrE,KAAM,YACNgD,QAAS,SAAiBn5B,EAAGq4B,GAC3B,OAAIA,GACFA,EAAI73B,EAAIR,EAAEQ,EACV63B,EAAIzmB,EAAI5R,EAAE4R,EACHymB,GAGF,IAAI7C,GAAWx1B,IAExB43B,UAAW,SAAmB53B,EAAGq4B,GAC/B,OAAIA,GACFA,EAAI73B,EAAIR,EAAEQ,EACV63B,EAAIzmB,EAAI5R,EAAE4R,EACHymB,GAGF,IAAI7C,GAAWx1B,KAEvBk+B,IACCoB,GAAsBjkC,EAAO,GAAIgkC,GAAU,CAC7ClJ,KAAM,cAEJoJ,GAAmBlkC,EAAO,GAAIm/B,GAAQ,CACxCrE,KAAM,QACNgD,QAAS,SAAiBn5B,EAAGq4B,GAC3B,OAAO7zB,KAAKg7B,aAAax/B,EAAGq4B,IAE9BT,UAAW,SAAmB53B,EAAGq4B,GAC/B,OAAO7zB,KAAKi7B,aAAaz/B,EAAGq4B,KAE7B8F,GAAa,CACduB,YAAa,WACbC,OAAQ,CAAC,YAAa,WAAY,QAAS,WAAY,WAAY,GACnEC,OAAQ,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAC7BC,MAAO,CAAC,CAAC,qBAAsB,qBAAyB,gBAAiB,mBAAoB,kBAAmB,kBAAmB,kBAAmB,kBAAmB,gBAAkB,YAAa,EAAE,qBAAsB,sBAA0B,gBAAkB,mBAAoB,kBAAmB,kBAAmB,mBAAoB,kBAAmB,iBAAkB,aAAc,EAAE,qBAAsB,oBAAwB,gBAAkB,kBAAmB,gBAAiB,kBAAmB,mBAAoB,iBAAkB,gBAAkB,YAAa,EAAE,qBAAsB,qBAAyB,gBAAkB,kBAAmB,iBAAmB,iBAAkB,gBAAkB,iBAAmB,gBAAkB,YAAa,CAAC,oBAAqB,qBAAyB,eAAkB,mBAAoB,iBAAmB,gBAAkB,gBAAkB,iBAAmB,gBAAkB,WAAY,CAAC,qBAAsB,sBAA0B,YAAa,kBAAmB,eAAmB,iBAAmB,eAAkB,iBAAmB,cAAkB,WACrnCC,MAAO,CAAC,EAAE,eAAiB,kBAAmB,iBAAmB,iBAAmB,kBAAoB,iBAAmB,kBAAoB,iBAAmB,gBAAkB,MAAO,CAAC,qBAAuB,kBAAmB,mBAAoB,kBAAmB,mBAAoB,kBAAmB,mBAAoB,kBAAmB,kBAAmB,MAAO,CAAC,gBAAkB,kBAAmB,mBAAoB,kBAAmB,mBAAoB,kBAAmB,mBAAoB,kBAAmB,kBAAmB,MAAO,CAAC,gBAAkB,kBAAmB,kBAAmB,kBAAmB,mBAAoB,iBAAkB,mBAAoB,kBAAmB,kBAAmB,MAAO,EAAE,qBAAuB,kBAAmB,kBAAmB,kBAAmB,kBAAmB,kBAAmB,mBAAoB,iBAAkB,kBAAmB,MAAO,EAAE,qBAAuB,kBAAmB,gBAAkB,kBAAmB,gBAAkB,kBAAmB,iBAAkB,iBAAkB,gBAAkB,OACjkCL,aAAc,SAAsBM,EAAI1H,GAGtC,IAFA,IAAI2H,EAEKC,EAAK,EAAG9/B,EAAMqE,KAAKm7B,OAAOlkC,OAAQwkC,EAAK9/B,EAAK8/B,IACnD,GAAIjjC,KAAK+D,IAAIg/B,EAAGnuB,IAAMpN,KAAKm7B,OAAOM,GAAK,CACrCD,EAAKx7B,KAAKq7B,MAAMI,GAChB,MAKJ,OADQz7B,KAAK07B,UAAUH,EAAIC,EAAI3H,IAGjCmH,aAAc,SAAsBW,EAAG9H,GACrC,IAAI4H,EAAIG,EAAIjgC,EACZggC,EAAE3/B,EAAIgE,KAAK67B,QAAQF,EAAE3/B,GAAI,IAAK,KAC9B2/B,EAAEvuB,EAAIpN,KAAK87B,SAASH,EAAEvuB,GAAI,GAAI,IAC9B,IAAImuB,EAAK,IAAIvK,GAAW2K,EAAE3/B,EAAG2/B,EAAEvuB,GAE/B,IAAKwuB,EAAK,EAAGjgC,EAAMqE,KAAKo7B,OAAOnkC,OAAQ2kC,EAAKjgC,EAAKigC,IAC/C,GAAIL,EAAGnuB,GAAKpN,KAAKo7B,OAAOQ,GAAK,CAC3BH,EAAKz7B,KAAKs7B,MAAMM,GAChB,MAIJ,IAAKH,EACH,IAAKG,EAAK57B,KAAKo7B,OAAOnkC,OAAS,EAAG2kC,GAAM,EAAGA,IACzC,GAAIL,EAAGnuB,IAAMpN,KAAKo7B,OAAOQ,GAAK,CAC5BH,EAAKz7B,KAAKs7B,MAAMM,GAChB,MAMN,OADS57B,KAAK07B,UAAUC,EAAGF,EAAI5H,IAGjC6H,UAAW,SAAmBE,EAAIH,EAAI5H,GACpC,IAAK+H,IAAOH,EACV,OAAO,KAGT,IAAIE,EAAIF,EAAG,GAAKA,EAAG,GAAKjjC,KAAK+D,IAAIq/B,EAAG5/B,GAChCu/B,EAAK/iC,KAAK+D,IAAIq/B,EAAGxuB,GAAKquB,EAAG,GACzBD,EAAKC,EAAG,GAAKA,EAAG,GAAKF,EAAKE,EAAG,GAAKF,EAAKA,EAAKE,EAAG,GAAKF,EAAKA,EAAKA,EAAKE,EAAG,GAAKF,EAAKA,EAAKA,EAAKA,EAAKE,EAAG,GAAKF,EAAKA,EAAKA,EAAKA,EAAKA,EAAKE,EAAG,GAAKF,EAAKA,EAAKA,EAAKA,EAAKA,EAAKA,EAIrK,OAHAI,GAAKC,EAAG5/B,EAAI,GAAK,EAAI,EACrBw/B,GAAMI,EAAGxuB,EAAI,GAAK,EAAI,EAElBymB,GACFA,EAAI73B,EAAI2/B,EACR9H,EAAIzmB,EAAIouB,EACD3H,GAGF,IAAI7C,GAAW2K,EAAGH,IAE3BO,UAAW,SAAmBJ,GAC5B,OAAOnjC,KAAKC,GAAKkjC,EAAI,KAEvBK,UAAW,SAAmBL,GAC5B,OAAO,IAAMA,EAAInjC,KAAKC,IAExBqjC,SAAU,SAAkBF,EAAIL,EAAII,GASlC,OARU,MAANJ,IACFK,EAAKpjC,KAAKsE,IAAI8+B,EAAIL,IAGX,MAALI,IACFC,EAAKpjC,KAAKqE,IAAI++B,EAAID,IAGbC,GAETC,QAAS,SAAiBD,EAAIL,EAAII,GAChC,GAAIC,IAAOK,IACT,OAAON,EACF,GAAIC,KAAQK,IACjB,OAAOV,EAGT,KAAOK,EAAKD,GACVC,GAAMD,EAAIJ,EAGZ,KAAOK,EAAKL,GACVK,GAAMD,EAAIJ,EAGZ,OAAOK,KAGPM,GAAsBrlC,EAAO,GAAIm/B,GAAQ,CAC3CrE,KAAM,WACNgD,QAAS,SAAiBn5B,EAAGq4B,GAC3B,OAAIA,GACFA,EAAI73B,EAAIR,EAAEQ,EACV63B,EAAIzmB,EAAI5R,EAAE4R,EACHymB,GAGFr4B,EAAEwS,QAEXolB,UAAW,SAAmB53B,EAAGq4B,GAC/B,OAAIA,GACFA,EAAI73B,EAAIR,EAAEQ,EACV63B,EAAIzmB,EAAI5R,EAAE4R,EACHymB,GAGFr4B,EAAEwS,SAEVypB,IACC0E,GAAYpK,GACZqK,GAA2BlkC,OAAOmkC,OAAO,CAC3CtK,SAAUA,GACV6H,QAASuC,GACTrK,SAAU+I,GACV3I,SAAU4I,GACVwB,MAAOvB,GACP/I,SAAUkK,GACVlG,OAAQA,KAGNuG,GAAa,SAAoB/R,GACnC,OAAO,SAAUC,GAGf,SAASC,IACP,OAAOD,EAAMtnB,MAAMnD,KAAMhJ,YAAcgJ,KAyBzC,OA5BA2M,GAAe+d,EAAQD,GAMvBC,EAAO8R,iBAAmB,SAA0BtiC,EAAM80B,GACxD,IAAItB,EAAQ1tB,KAAK7H,UACb81B,EAAc/1B,OAAOy1B,eAAeD,GAOxC,OALKA,EAAM+O,kBAAoB/O,EAAM+O,mBAAqBxO,EAAYwO,mBACpE/O,EAAM+O,iBAAmB/O,EAAM+O,iBAAmBvkC,OAAO4U,OAAO4gB,EAAM+O,kBAAoB,IAG5F/O,EAAM+O,iBAAiBviC,EAAKkP,eAAiB4lB,EACtChvB,MAGT0qB,EAAOgS,iBAAmB,SAA0BxiC,GAClD,IAAIwzB,EAAQ1tB,KAAK7H,UAEjB,OAAKu1B,EAAM+O,iBAIJ/O,EAAM+O,iBAAiBviC,EAAKkP,eAH1B,MAMJshB,EA7BF,CA8BLF,IAGAmS,GAAiB,SAAUC,GAG7B,SAASD,EAAeE,GACtB,IAAI9M,EASJ,OAPAA,EAAQ6M,EAAOtkC,KAAK0H,OAASA,MACvB68B,MAAQA,EACd9M,EAAM+M,UAAW,EACjB/M,EAAMgN,UAAY,EAElBhN,EAAMiN,cAECjN,EAZTpjB,GAAegwB,EAAgBC,GAe/B,IAAItvB,EAASqvB,EAAexkC,UA0mB5B,OAxmBAmV,EAAO2vB,OAAS,SAAgBC,GAC9Bl9B,KAAKm9B,gBAEAn9B,KAAKo9B,UAAap9B,KAAK68B,MAAMQ,cAI7Br9B,KAAKqH,YACRrH,KAAKqH,UAAY,IAAIi2B,IAGvBt9B,KAAKu9B,aAAav9B,KAAKw9B,WAAYN,KAGrC5vB,EAAOiwB,aAAe,SAAsBE,GAG1C,IAFA,IAAIC,EAAS19B,KAEJquB,EAAOr3B,UAAUC,OAAQkR,EAAO,IAAI7M,MAAM+yB,EAAO,EAAIA,EAAO,EAAI,GAAIC,EAAO,EAAGA,EAAOD,EAAMC,IAClGnmB,EAAKmmB,EAAO,GAAKt3B,UAAUs3B,GAG7B,GAAItuB,KAAK29B,eAAgB,CACvB,IAAIt2B,EAAYrH,KAAK29B,iBAEjBt2B,EAAUpQ,OAAS,GACrB+I,KAAK49B,kBAAmB,EACxB59B,KAAK69B,cAAcx2B,GAAWsiB,MAAK,WACjC+T,EAAOE,kBAAmB,EAEtBF,EAAOb,QACTa,EAAOb,MAAM/Q,KAAK,gBAElB4R,EAAOV,mBAIXS,EAAOnlC,KAAK6K,MAAMs6B,EAAQ,CAACz9B,MAAM1J,OAAO6R,SAG1Cs1B,EAAOnlC,KAAK6K,MAAMs6B,EAAQ,CAACz9B,MAAM1J,OAAO6R,KAI5CmF,EAAOwwB,iBAAmB,WACxB,IAAIjgC,EAAMmC,KAAKo9B,SAEf,OAAIp9B,KAAK49B,qBAIL59B,KAAK+9B,aAILlgC,EAAImgC,kBAAoBh+B,KAAKi+B,sBAI7Bj+B,KAAKk+B,iBAOX5wB,EAAO4wB,aAAe,WACpB,IAAIrgC,EAAMmC,KAAKo9B,SAEf,SAAIv/B,EAAImgC,kBAAmBngC,EAAIsgC,cAAcC,qBACjCvgC,EAAIwgC,YAAcxgC,EAAIygC,aAAezgC,EAAI0gC,cAAgB1gC,EAAI2gC,eAAiBx+B,KAAK68B,MAAMtkB,QAA6B,sBAMpIjL,EAAOmxB,wBAA0B,aAEjCnxB,EAAOoxB,kBAAoB,WACzB,OAAO1+B,KAAK49B,kBAGdtwB,EAAOqxB,iBAAmB,WACxB,QAAS3+B,KAAK4+B,iBAGhBtxB,EAAOuxB,wBAA0B,WAC/B,OAAQ7+B,KAAK88B,UAGfxvB,EAAO0vB,YAAc,WAEnB,OADAh9B,KAAK+9B,WAAY,EACV/9B,MAGTsN,EAAOwxB,iBAAmB,WAExB,OADA9+B,KAAK++B,gBAAiB,EACf/+B,MAGTsN,EAAO0xB,gBAAkB,WACvB,QAASh/B,KAAK++B,gBAGhBzxB,EAAOggB,OAAS,WACdttB,KAAKi/B,kBACEj/B,KAAK49B,wBACL59B,KAAKk/B,iBACLl/B,KAAKiL,cACLjL,KAAK3E,eACL2E,KAAKm/B,sBACLn/B,KAAKo/B,iBACLp/B,KAAKqH,iBACLrH,KAAK68B,OAGdvvB,EAAO2xB,SAAW,aAElB3xB,EAAO+xB,MAAQ,aAEf/xB,EAAO8vB,OAAS,WACd,OAAKp9B,KAAK68B,MAIH78B,KAAK68B,MAAMO,SAHT,MAMX9vB,EAAOgyB,eAAiB,WACtB,IAAIzhC,EAAMmC,KAAKo9B,SAGf,GAFAp9B,KAAK++B,gBAAiB,EAElB/+B,KAAKu/B,cAAgB1hC,EAAI2hC,YAAcx/B,KAAKiL,SAAWjL,KAAKo/B,UAC9D,OAAO,KAGT,GAAIp/B,KAAKy/B,UACP,OAAO,KAGT,GAAIz/B,KAAK68B,MAAM6C,SAAW1/B,KAAK68B,MAAM6C,UACnC,OAAO,KAGT,IAAIC,EAAiB9hC,EAAI+hC,uBAAuB5/B,KAAKk/B,WAAWjxB,KAAK,GAAIpQ,EAAIyI,QAE7E,MAAO,CACL,MAAStG,KAAKiL,OACd,MAASjL,KAAK68B,MACd,MAAS8C,IAIbryB,EAAOuyB,MAAQ,WACb7/B,KAAK8/B,eAGPxyB,EAAOmyB,QAAU,WACf,OAAKz/B,KAAK88B,UAOZxvB,EAAOnN,KAAO,WACZH,KAAKg9B,eAGP1vB,EAAOlN,KAAO,WACZJ,KAAK6/B,QACL7/B,KAAKg9B,eAGP1vB,EAAOyyB,UAAY,WACjB//B,KAAKg9B,eAGP1vB,EAAO0yB,UAAY,SAAmBpyB,GACpC,IAAK5N,KAAK3E,SAAW2E,KAAK68B,MAAM6C,SAAW1/B,KAAK68B,MAAM6C,WAAa1/B,KAAKy/B,WAAaz/B,KAAKigC,aACxF,OAAO,EAGT,IAAIpiC,EAAMmC,KAAKo9B,SACXvkC,EAAIgF,EAAIqiC,sBACRhwB,EAAOrS,EAAI+2B,UAEf,GAAIhnB,EAAM5R,EAAI,GAAK4R,EAAM5R,EAAIkU,EAAY,MAAIrX,GAAK+U,EAAMR,EAAI,GAAKQ,EAAMR,EAAI8C,EAAa,OAAIrX,EAC1F,OAAO,EAGT,IAGE,GAFcmH,KAAK3E,QAAQ8kC,aAAatnC,EAAI+U,EAAM5R,EAAGnD,EAAI+U,EAAMR,EAAG,EAAG,GAAGiL,KAE5D,GAAK,EACf,OAAO,EAET,MAAOyG,GASP,OARK9e,KAAKigC,eACJpjB,SACFA,QAAQC,KAAK,sGAAuGgC,GAGtH9e,KAAKigC,cAAe,IAGf,EAGT,OAAO,GAGT3yB,EAAOuwB,cAAgB,SAAuBuC,GACvCpgC,KAAKqH,YACRrH,KAAKqH,UAAY,IAAIi2B,IAGvB,IAAIj2B,EAAYrH,KAAKqH,UACjBg5B,EAAW,GAEf,GAAIrjC,EAAeojC,GAGjB,IAFA,IAAIE,EAAQ,GAEHvpC,EAAIqpC,EAAanpC,OAAS,EAAGF,GAAK,EAAGA,IAAK,CACjD,IAAIsC,EAAM+mC,EAAarpC,GAElBsC,GAAQA,EAAIpC,SAAUqpC,EAAMjnC,EAAImI,KAAK,QAI1C8+B,EAAMjnC,EAAImI,KAAK,MAAQ,EAElB6F,EAAUk5B,iBAAiBlnC,GAAK,IACnCgnC,EAASvlC,KAAK,IAAIuvB,GAAUrqB,KAAKwgC,iBAAiBnnC,MAKxD,OAAOgxB,GAAUL,IAAIqW,IAGvB/yB,EAAO6vB,cAAgB,kBACdn9B,KAAK4+B,gBACZ,IAAI/gC,EAAMmC,KAAKo9B,SACfp9B,KAAKu/B,YAAc1hC,EAAI2hC,UACvBx/B,KAAKm/B,eAAiBn/B,KAAKo/B,UAAYvhC,EAAI4iC,eAC3CzgC,KAAKk/B,UAAYrhC,EAAI6iC,uBAAuB,IAAIxxB,GAAM,EAAGrR,EAAIyI,UAG/DgH,EAAO4N,aAAe,WACpB,IAAIlb,KAAKiL,OAAT,CAIA,IAAIpN,EAAMmC,KAAKo9B,SACXltB,EAAOrS,EAAI+2B,UACX/7B,EAAIgF,EAAIqiC,sBACR/4B,EAAItO,EAAIqX,EAAK7J,MACbe,EAAIvO,EAAIqX,EAAK5J,OAEjB,GAAItG,KAAK68B,MAAM8D,QAAS,CACtB,IAAI11B,EAASjL,KAAK68B,MAAM8D,QACxB11B,EAAO5E,MAAQc,EACf8D,EAAO3E,OAASc,EAEZ6D,EAAO5C,QACT4C,EAAO5C,MAAMhC,MAAQ6J,EAAK7J,MAAQ,KAClC4E,EAAO5C,MAAM/B,OAAS4J,EAAK5J,OAAS,MAGtCtG,KAAKiL,OAASjL,KAAK68B,MAAM8D,aAEzB3gC,KAAKiL,OAAS8P,GAAOG,aAAa/T,EAAGC,EAAGvJ,EAAI+iC,aAG9C5gC,KAAK6gC,mBAGPvzB,EAAOuzB,eAAiB,aAExBvzB,EAAOwzB,cAAgB,WACrB,KAAI9gC,KAAKmL,IAAMnL,KAAKmL,GAAGF,SAAWjL,KAAKiL,QAAUjL,KAAK3E,WAItD2E,KAAK3E,QAAU2E,KAAKiL,OAAOG,WAAW,MAEjCpL,KAAK3E,SAAV,CAII2E,KAAK68B,MAAMtkB,QAAkC,2BAC/CvY,KAAK3E,QAAQglB,yBAA2BrgB,KAAK68B,MAAMtkB,QAAkC,0BAGvF,IAAIwoB,EAAM/gC,KAAKo9B,SAAS8C,sBAEZ,IAARa,GACF/gC,KAAK3E,QAAQy6B,MAAMiL,EAAKA,KAI5BzzB,EAAO0zB,qBAAuB,WAC5B,GAAKhhC,KAAK3E,QAAV,CAIA,IAAI0lC,EAAM/gC,KAAKo9B,SAAS8C,sBACxBlgC,KAAK3E,QAAQia,aAAayrB,EAAK,EAAG,EAAGA,EAAK,EAAG,KAG/CzzB,EAAO2zB,aAAe,SAAsBC,GAC1C,IAAIj2B,EAASjL,KAAKiL,OAElB,GAAKA,EAAL,CAIA,IAAIiF,EAAOgxB,GAAclhC,KAAKo9B,SAASxI,UACnC/7B,EAAImH,KAAKo9B,SAAS8C,sBAElBj1B,EAAO5E,QAAUxN,EAAIqX,EAAK7J,OAAS4E,EAAO3E,SAAWzN,EAAIqX,EAAK5J,SAIlE2E,EAAO3E,OAASzN,EAAIqX,EAAK5J,OACzB2E,EAAO5E,MAAQxN,EAAIqX,EAAK7J,MAEd,IAANxN,GAAWmH,KAAK3E,SAClB2E,KAAK3E,QAAQy6B,MAAMj9B,EAAGA,GAGpBmH,KAAK68B,MAAM8D,SAAW11B,EAAO5C,QAC/B4C,EAAO5C,MAAMhC,MAAQ6J,EAAK7J,MAAQ,KAClC4E,EAAO5C,MAAM/B,OAAS4J,EAAK5J,OAAS,SAIxCgH,EAAOwyB,YAAc,WACd9/B,KAAK3E,SAIV0f,GAAOkD,UAAUje,KAAK3E,QAAS,EAAG,EAAG2E,KAAKiL,OAAO5E,MAAOrG,KAAKiL,OAAO3E,SAGtEgH,EAAOoO,cAAgB,WAChB1b,KAAKiL,QASRjL,KAAKghC,uBACLhhC,KAAK8/B,cACL9/B,KAAKihC,iBAVLjhC,KAAKkb,eACLlb,KAAK8gC,gBACL9gC,KAAK68B,MAAMgE,iBACX7gC,KAAK68B,MAAM/Q,KAAK,eAAgB,CAC9B,QAAW9rB,KAAK3E,QAChB,GAAM2E,KAAKmL,aAQRnL,KAAKmhC,YACZ,IAAIC,EAAOphC,KAAK68B,MAAMwE,UAEtB,IAAKD,EAKH,OAJAphC,KAAK68B,MAAM/Q,KAAK,cAAe,CAC7B,QAAW9rB,KAAK3E,QAChB,GAAM2E,KAAKmL,KAEN,KAGT,IAAIm2B,EAAethC,KAAKmhC,YAAcC,EAAKG,kBAAkBC,cAE7D,OAAKF,EAAatN,WAAWh0B,KAAKo/B,WAQlCp/B,KAAK68B,MAAM/Q,KAAK,cAAe,CAC7B,QAAW9rB,KAAK3E,QAChB,GAAM2E,KAAKmL,KAENm2B,GAGTh0B,EAAOm0B,WAAa,SAAoBpmC,GACtC,IAAI+lC,EAAOphC,KAAK68B,MAAMwE,UAEtB,IAAKD,EACH,OAAO,EAGT,IAAIM,EAAM1hC,KAAKk/B,UACXrhC,EAAMmC,KAAKo9B,SACfp9B,KAAKk/B,UAAYrhC,EAAI6iC,uBAAuB,IAAIxxB,GAAM,EAAGrR,EAAIyI,SAC7DjL,EAAQsmB,OACR,IAAIof,EAAMljC,EAAIqiC,sBAOd,GALY,IAARa,IACF1lC,EAAQsmB,OACRtmB,EAAQy6B,MAAMiL,EAAKA,IAGjBK,EAAKO,cAAe,CACtBtmC,EAAQ4mB,aAAc,EACtB,IAAI2f,EAAQR,EAAKO,iBAAmB,GACpCtmC,EAAQgmB,YACRugB,EAAMnkB,SAAQ,SAAUokB,GACRA,EAAMN,kBAEZO,MAAM,KAAMzmC,MAEtBA,EAAQqlB,gBACDrlB,EAAQ4mB,gBACV,CACSmf,EAAKG,kBAEXO,MAAM,KAAMzmC,GAStB,OANY,IAAR0lC,GACF1lC,EAAQwmB,UAGVxmB,EAAQ0mC,OACR/hC,KAAKk/B,UAAYwC,GACV,GAGTp0B,EAAO00B,cAAgB,WACrB,MAAO,CACL,OAAUhiC,KAAKo/B,UACf,WAAcp/B,KAAKmhC,YACnB,KAAQnhC,KAAKu/B,YACb,UAAav/B,KAAKk/B,YAItB5xB,EAAO20B,eAAiB,WAClBjiC,KAAKo9B,WACPp9B,KAAK4+B,iBAAkB,EACvB5+B,KAAK68B,MAAM/Q,KAAK,YAAa,CAC3B,QAAW9rB,KAAK3E,QAChB,GAAM2E,KAAKmL,KAEbnL,KAAK8+B,qBAITxxB,EAAO40B,UAAY,WACjB,MAAO,CACL,WAAcliC,KAAKmiC,YACnB,SAAYniC,KAAKoiC,UACjB,SAAYpiC,KAAKqiC,UACjB,QAAWriC,KAAKsiC,SAChB,WAActiC,KAAKuiC,YACnB,QAAWviC,KAAKwiC,SAChB,SAAYxiC,KAAKyiC,UACjB,iBAAoBziC,KAAK0iC,kBACzB,cAAiB1iC,KAAK2iC,eACtB,eAAkB3iC,KAAK4iC,gBACvB,wBAA2B5iC,KAAK6iC,2BAIpCv1B,EAAO60B,YAAc,aAErB70B,EAAO+0B,UAAY,WACjBriC,KAAKg9B,eAGP1vB,EAAO80B,UAAY,aAEnB90B,EAAOi1B,YAAc,aAErBj1B,EAAOk1B,SAAW,aAElBl1B,EAAOm1B,UAAY,WACjBziC,KAAKg9B,eAGP1vB,EAAOg1B,SAAW,kBACTtiC,KAAKo/B,UACZp/B,KAAKihC,eACLjhC,KAAKg9B,eAGP1vB,EAAOo1B,kBAAoB,aAE3Bp1B,EAAOq1B,eAAiB,aAExBr1B,EAAOs1B,gBAAkB,WACvB5iC,KAAKg9B,eAGP1vB,EAAOu1B,yBAA2B,aAElCv1B,EAAOw1B,YAAc,WACnB,OAAO9iC,KAAK+8B,WAGdzvB,EAAOkwB,WAAa,SAAoBN,GACtCl9B,KAAK+9B,WAAY,GAEZ/9B,KAAKiL,QAAUjL,KAAK68B,MAAM6C,SAAW1/B,KAAK68B,MAAM6C,UACnD1/B,KAAK4+B,iBAAkB,EAIzB5+B,KAAK+iC,eAAe7F,IAGtB5vB,EAAOy1B,eAAiB,SAAwB7F,GAC9C,GAAKl9B,KAAKo9B,SAAV,CAIA,IAAI4F,EAAUhjC,KAAK88B,SACnB98B,KAAK88B,UAAW,EAChB,IAAIngC,EAAIhG,IACRqJ,KAAKijC,KAAK/F,GACVvgC,EAAIhG,IAAQgG,EACZqD,KAAK+8B,UAAYiG,EAAUrmC,EAAIA,EAAI,EAE/BqmC,GAAWhjC,KAAK68B,OAAS78B,KAAK68B,MAAMtkB,QAAqB,aAC3DsE,QAAQ1gB,IAAI6D,KAAK68B,MAAMqG,QAAS,kBAAmBhG,EAAY,YAAal9B,KAAK+8B,aAIrFzvB,EAAOkzB,iBAAmB,SAA0BnnC,GAClD,IAAI0G,EAAKC,KACLqH,EAAYrH,KAAKqH,UACjB87B,EAAcnjC,KAAK68B,MAAMtkB,QAAqB,YAClD,OAAO,SAAU0Q,GACf,GAAI5hB,EAAUk5B,iBAAiBlnC,GAAK,GAClC4vB,EAAQ5vB,OADV,CAKA,IAAIG,EAAM,IAAIkjB,MAETtlB,EAAM+rC,KACT3pC,EAAiB,YAAI2pC,GAGnB/pC,EAAMC,EAAI,MAAQL,IAChBK,EAAI,KACNA,EAAI,IAAM,GAGRA,EAAI,KACNA,EAAI,IAAM,IAIdG,EAAI+gB,OAAS,WACXxa,EAAGqjC,eAAe/pC,EAAKG,GAEvByvB,EAAQ5vB,IAGVG,EAAI6pC,QAAU,SAAU/3B,GAClBuR,SACFA,QAAQC,KAAK,0BAA4BzjB,EAAI,IAG3CiS,GACEuR,SACFA,QAAQC,KAAKxR,GAIjB2d,EAAQ5vB,IAGVG,EAAI4gB,QAAU,SAAU9O,GAClBA,GAA0B,oBAAZuR,SAChBA,QAAQC,KAAKxR,GAGfjE,EAAUi8B,kBAAkBjqC,GAC5B4vB,EAAQ5vB,IAGVE,EAAUC,EAAKH,MAInBiU,EAAO81B,eAAiB,SAAwB/pC,EAAKG,GACnD,GAAKwG,KAAK68B,OAAU78B,KAAKqH,UAAzB,CAIA,IAAIF,EAAI9N,EAAI,GACR+N,EAAI/N,EAAI,GAEZ,GAAI2G,KAAK68B,MAAMtkB,QAA0B,kBAAuB,IAAlBnf,EAAMC,EAAI,MAAcqT,GAAUb,MAAQa,GAAUlD,IAAK,CACjGpS,EAAM+P,KACRA,EAAI3N,EAAI6M,OAASrG,KAAK68B,MAAMtkB,QAAyB,gBAAE,IAGrDnhB,EAAMgQ,KACRA,EAAI5N,EAAI8M,QAAUtG,KAAK68B,MAAMtkB,QAAyB,gBAAE,IAG1D,IAAItN,EAAS8P,GAAOG,aAAa/T,EAAGC,GACpC2T,GAAO4B,MAAM1R,EAAOG,WAAW,MAAO5R,EAAK,EAAG,EAAG2N,EAAGC,GACpD5N,EAAMyR,EAGRjL,KAAKqH,UAAU2W,YAAY3kB,EAAKG,KAG3BmjC,EA1nBY,CA2nBnBpP,IAEE+P,GAAgB,WAClB,SAASA,IACPt9B,KAAKqH,UAAY,GACjBrH,KAAKujC,QAAU,GAGjB,IAAIC,EAAUlG,EAAcnlC,UAmF5B,OAjFAqrC,EAAQxlB,YAAc,SAAqB3kB,EAAKG,GAC9CwG,KAAKqH,UAAUhO,EAAI,IAAM,CACvBsjB,MAAOnjB,EACP6M,OAAQhN,EAAI,GACZiN,QAASjN,EAAI,KAIjBmqC,EAAQjD,iBAAmB,SAA0BlnC,EAAKoqC,GACxD,IAAKpqC,EACH,OAAO,EAGT,IAAIwkB,EAAS7d,KAAK0jC,WAAWrqC,GAE7B,GAAI2G,KAAKujC,QAAQ1lB,GACf,OAAO,EAGT,IAAIrkB,EAAMwG,KAAKqH,UAAUwW,GAEzB,QAAKrkB,KAIDiqC,GAAYrqC,EAAMC,EAAI,OAASA,EAAI,GAAKG,EAAI6M,QAAUhN,EAAI,GAAKG,EAAI8M,UAOzEk9B,EAAQtpB,SAAW,SAAkB7gB,GACnC,IAAIwkB,EAAS7d,KAAK0jC,WAAWrqC,GAE7B,OAAK2G,KAAKugC,iBAAiBlnC,IAAQ2G,KAAKujC,QAAQ1lB,GACvC,KAGF7d,KAAKqH,UAAUwW,GAAQlB,OAGhC6mB,EAAQF,kBAAoB,SAA2BjqC,GACrD2G,KAAKujC,QAAQvjC,KAAK0jC,WAAWrqC,IAAQ,GAGvCmqC,EAAQG,MAAQ,SAAe5+B,GAC7B,IAAKA,EACH,OAAO/E,KAGT,IAAK,IAAIxE,KAAKuJ,EAAIsC,UAAW,CAC3B,IAAI7N,EAAMuL,EAAIsC,UAAU7L,GACxBwE,KAAKge,YAAY,CAACxiB,EAAGhC,EAAI6M,MAAO7M,EAAI8M,QAAS9M,EAAImjB,OAGnD,OAAO3c,MAGTwjC,EAAQ/lB,QAAU,SAAiB9jB,GACjC,IAAKqG,KAAKqH,UACR,OAAOrH,KAGT,IAAK,IAAIxE,KAAKwE,KAAKqH,UACbjP,EAAO4H,KAAKqH,UAAW7L,IACzB7B,EAAG6B,EAAGwE,KAAKqH,UAAU7L,IAIzB,OAAOwE,MAGTwjC,EAAQE,WAAa,SAAoBrqC,GACvC,OAAKiC,MAAMC,QAAQlC,GAIZA,EAAI,GAHFA,GAMJikC,EAzFW,GA4FpB,SAASsG,GAAShjB,EAAQijB,EAAQvnC,EAAOwnC,GAKvC,IAJA,IAEIC,EAFAC,EAAQ,GACR7sC,EAAI,EAGCsd,EAAI,EAAGzP,EAAI4b,EAAO3pB,OAAQwd,EAAIzP,EAAI,EAAGyP,KAC5CsvB,EAAUE,GAAYrjB,EAAOnM,GAAImM,EAAOnM,EAAI,GAAIovB,EAAQpvB,EAAGnY,EAAOwnC,MAMlEE,EAAM7sC,GAAK6sC,EAAM7sC,IAAM,GACvB6sC,EAAM7sC,GAAG2D,KAAK,CACZ,MAASipC,EAAQ,GACjB,MAAStvB,IAGPsvB,EAAQ,KAAOnjB,EAAOnM,EAAI,IAAMA,IAAMzP,EAAI,IAC5Cg/B,EAAM7sC,GAAG2D,KAAK,CACZ,MAASipC,EAAQ,GACjB,MAAStvB,EAAI,IAEftd,MAIJ,OAAO6sC,EAKT,SAASC,GAAYxnC,EAAGC,EAAGmnC,EAAQK,EAAa5nC,EAAOwnC,GACrD,IAEIK,EACA3oC,EACA4oC,EAJAC,EAAQH,EAAcjK,GAAYqK,GAAY7nC,EAAGonC,GACjDU,EAAQD,GAAY5nC,EAAGmnC,GAO3B,IAFA5J,GAAYsK,IAEC,CACX,KAAMF,EAAQE,GACZ,MAAO,CAAC9nC,EAAGC,GAGb,GAAI2nC,EAAQE,EACV,OAAO,EAGT,GAAIT,EACF,MAAO,CAACrnC,EAAGC,GAKb0nC,EAAUE,GADV9oC,EAAIgpC,GAAqB/nC,EAAGC,EAD5BynC,EAAUE,GAASE,EACqBV,EAAQvnC,GACvBunC,GAErBM,IAAYE,GACd5nC,EAAIjB,EACJ6oC,EAAQD,IAER1nC,EAAIlB,EACJ+oC,EAAQH,IAKd,SAASK,GAAY7jB,EAAQijB,EAAQvnC,GACnC,IACIooC,EAAe3tC,EAAG0d,EAAGtd,EAAGsF,EAAGC,EAAGf,EAAKkQ,EAAMrQ,EADzCmpC,EAAQ,CAAC,EAAG,EAAG,EAAG,GAGtB,IAAK5tC,EAAI,EAAG4E,EAAMilB,EAAO3pB,OAAQF,EAAI4E,EAAK5E,IACxC6pB,EAAO7pB,GAAG6tC,MAAQN,GAAY1jB,EAAO7pB,GAAI8sC,GAG3C,IAAK1sC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAItB,IAHA0U,EAAO84B,EAAMxtC,GACbutC,EAAgB,GAEX3tC,EAAI,EAAwB0d,GAArB9Y,EAAMilB,EAAO3pB,QAAkB,EAAGF,EAAI4E,EAAK8Y,EAAI1d,IACzD0F,EAAImkB,EAAO7pB,GACX2F,EAAIkkB,EAAOnM,GAELhY,EAAEmoC,MAAQ/4B,EAQHnP,EAAEkoC,MAAQ/4B,KACrBrQ,EAAIgpC,GAAqB9nC,EAAGD,EAAGoP,EAAMg4B,EAAQvnC,IAC3CsoC,MAAQN,GAAY9oC,EAAGqoC,GACzBa,EAAc5pC,KAAKU,KAVfkB,EAAEkoC,MAAQ/4B,KACZrQ,EAAIgpC,GAAqB9nC,EAAGD,EAAGoP,EAAMg4B,EAAQvnC,IAC3CsoC,MAAQN,GAAY9oC,EAAGqoC,GACzBa,EAAc5pC,KAAKU,IAGrBkpC,EAAc5pC,KAAK2B,IAQvBmkB,EAAS8jB,EAGX,OAAO9jB,EAGT,SAAS4jB,GAAqB/nC,EAAGC,EAAGi1B,EAAMkS,EAAQvnC,GAChD,IAIIN,EAAGoR,EAJHnO,EAAKvC,EAAEV,EAAIS,EAAET,EACbkD,EAAKxC,EAAE0Q,EAAI3Q,EAAE2Q,EACbvQ,EAAMgnC,EAAO3mB,SACbpgB,EAAM+mC,EAAO1mB,SAGN,EAAPwU,GACF31B,EAAIS,EAAET,EAAIiD,GAAMnC,EAAIsQ,EAAI3Q,EAAE2Q,GAAKlO,EAC/BkO,EAAItQ,EAAIsQ,GACQ,EAAPukB,GACT31B,EAAIS,EAAET,EAAIiD,GAAMpC,EAAIuQ,EAAI3Q,EAAE2Q,GAAKlO,EAC/BkO,EAAIvQ,EAAIuQ,GACQ,EAAPukB,GACT31B,EAAIc,EAAId,EACRoR,EAAI3Q,EAAE2Q,EAAIlO,GAAMpC,EAAId,EAAIS,EAAET,GAAKiD,GACf,EAAP0yB,IACT31B,EAAIa,EAAIb,EACRoR,EAAI3Q,EAAE2Q,EAAIlO,GAAMrC,EAAIb,EAAIS,EAAET,GAAKiD,GAGjC,IAAIzD,EAAI,IAAI0T,GAAMlT,EAAGoR,GAMrB,OAJI9Q,GACFd,EAAEgS,SAGGhS,EAGT,SAAS8oC,GAAY9oC,EAAGqoC,GACtB,IAAIlS,EAAO,EAcX,OAZIn2B,EAAEQ,EAAI6nC,EAAO3mB,SAASlhB,EACxB21B,GAAQ,EACCn2B,EAAEQ,EAAI6nC,EAAO1mB,SAASnhB,IAC/B21B,GAAQ,GAGNn2B,EAAE4R,EAAIy2B,EAAO3mB,SAAS9P,EACxBukB,GAAQ,EACCn2B,EAAE4R,EAAIy2B,EAAO1mB,SAAS/P,IAC/BukB,GAAQ,GAGHA,EAGT,SAASkT,GAAcj3B,EAAOk3B,EAAQC,EAAWC,GAC/Cp3B,EAAQ,IAAIsB,GAAMtB,GAClB,IAIIq3B,EAAIC,EAAIvsC,EAJR8D,EAAIjE,KAAK+D,IAAIwoC,EAAU/oC,EAAI8oC,EAAO9oC,GAClCU,EAAIlE,KAAK+D,IAAIwoC,EAAU33B,EAAI03B,EAAO13B,GAClC5J,EAAIhL,KAAKqV,KAAKrV,KAAK+D,IAAIE,EAAIA,EAAIC,EAAIA,IAcvC,OAbaD,GAAKC,GAIhBuoC,EAAK,IAAI/1B,GAAM41B,EAAO9oC,EAAIwH,EAAGshC,EAAO13B,GACpC83B,EAAK,IAAIh2B,GAAM41B,EAAO9oC,EAAIwH,EAAGshC,EAAO13B,GACpCzU,EAAQ,EAAJ8D,IAEJwoC,EAAK,IAAI/1B,GAAM41B,EAAO9oC,EAAG8oC,EAAO13B,EAAI5J,GACpC0hC,EAAK,IAAIh2B,GAAM41B,EAAO9oC,EAAG8oC,EAAO13B,EAAI5J,GACpC7K,EAAQ,EAAJ+D,GAGCkR,EAAMD,WAAWs3B,GAAMr3B,EAAMD,WAAWu3B,IAAOvsC,EAAI,EAAIqsC,EAGhE,IAAIG,GAAa,WACf,SAASA,KAET,IAAI73B,EAAS63B,EAAWhtC,UA0BxB,OAxBAmV,EAAO8vB,OAAS,WACd,OAAOp9B,KAAK8B,SAASs7B,UAGvB9vB,EAAO83B,WAAa,WAClB,OAAOplC,KAAKqlC,SAGd/3B,EAAOg4B,cAAgB,WACrB,OAAO,GAGTH,EAAWI,UAAY,SAAmBC,GACxC,SAAKA,IAAS5tC,EAAS4tC,KAInB9uC,EAAiBuE,QAAQuqC,IAAS,GAOjCL,EA7BQ,GAgCbM,GAAmB,SAAUC,GAG/B,SAASD,IACP,OAAOC,EAAYviC,MAAMnD,KAAMhJ,YAAcgJ,KAH/C2M,GAAe84B,EAAkBC,GAMjC,IAAIp4B,EAASm4B,EAAiBttC,UAsC9B,OApCAmV,EAAOq4B,gBAAkB,SAAyBtqB,GAC5C/jB,EAAS0I,KAAKoG,OAAgB,SAC5BiV,EAAIqD,cAAgB1e,KAAKoG,OAAgB,UAC3CiV,EAAIqD,YAAc1e,KAAKoG,OAAgB,SAEZ,IAApBiV,EAAIqD,cACbrD,EAAIqD,YAAc,IAItBpR,EAAOoO,cAAgB,SAAuBL,EAAKhT,EAAOhB,GACxD0T,GAAOW,cAAcL,EAAKhT,EAAOhB,EAAWrH,KAAKolC,aAAaQ,iBAGhEt4B,EAAOggB,OAAS,aAEhBhgB,EAAOyyB,UAAY,aAEnBzyB,EAAOnN,KAAO,aAEdmN,EAAOlN,KAAO,aAEdkN,EAAOu4B,aAAe,SAAsBx9B,GAC1C,OAAO,WACL,IAAI0nB,EAAQ/vB,KAER5E,EAAM,GACNoqC,EAAO,GACX,OAAOvhC,GAAkBoE,GAAO,WAC9B,IAAIxK,EAAMkyB,EAAMqN,SAEhB,OAQR,SAAehiC,EAAK0qC,EAAIC,GAGtB,OAFA3qC,EAAI,GAAK0qC,EACT1qC,EAAI,GAAK2qC,EACF3qC,EAXM4qC,CAAM5qC,EAAKyC,EAAI2hC,UAAW3oC,EAAO,GAAIk5B,EAAMjuB,SAASmkC,gBAcnE,SAAiBT,EAAM9oC,EAAGlB,EAAGwK,GAI3B,OAHAw/B,EAAK,aAAe9oC,EACpB8oC,EAAK,WAAahqC,EAClBgqC,EAAK,UAAYx/B,EACVw/B,EAlB2EU,CAAQV,EAAM3nC,EAAIsoC,aAActoC,EAAIwgC,WAAYxgC,EAAI2hC,iBAElI4G,KAAKpmC,KAVA,IAaFylC,EA7Cc,CA8CrBN,IAeF,IAAIkB,GAAgB,IAAIn3B,GAAM,EAAG,GAC7Bo3B,GAAc,IAAIp3B,GAAM,EAAG,GAE3Bq3B,GAAkB,SAAUC,GAG9B,SAASD,EAAgBngC,EAAQtE,EAAUujC,GACzC,IAAItV,EAMJ,OAJAA,EAAQyW,EAAkBluC,KAAK0H,OAASA,MAClCoG,OAASA,EACf2pB,EAAMjuB,SAAWA,EACjBiuB,EAAMsV,QAAUA,EACTtV,EATTpjB,GAAe45B,EAAiBC,GAYhC,IAAIl5B,EAASi5B,EAAgBpuC,UAsG7B,OApGAmV,EAAOk0B,YAAc,WAOnB,IANA,IAAI3jC,EAAMmC,KAAKo9B,SACXqJ,EAAS5oC,EAAI6oC,YACb3pB,EAAS,IAAI0Y,GAEbkR,EAAe3mC,KAAK4mC,mBAAmB,GAElC7vC,EAAI4vC,EAAa1vC,OAAS,EAAGF,GAAK,EAAGA,IACxC4vC,EAAa5vC,IACfgmB,EAAO+X,SAASj3B,EAAIgpC,cAAcF,EAAa5vC,GAAI0vC,IAIvD,OAAO1pB,GAGTzP,EAAOg4B,cAAgB,WACrB,IAAIl/B,EAASpG,KAAKoG,OAClB,OAAOvC,GAAqBuC,EAAoB,cAAMvC,GAAqBuC,EAAqB,eAAMvC,GAAqBuC,EAAiB,WAG9IkH,EAAOw5B,cAAgB,SAAuBC,EAAal3B,GACzD,OAAOk3B,EAAY1R,WAAU,SAAU75B,GACrC,OAAOA,EAAEoU,QAAQC,OAIrBvC,EAAOs5B,iBAAmB,WACxB,IACII,EADUhnC,KAAKolC,aACK6B,aAAe,SAAWjnC,KAAKknC,eACvD,OAAOlnC,KAAKolC,aAAa+B,gBAAgBH,IAG3C15B,EAAO85B,0BAA4B,SAAmCC,GACpE,IAAIhC,EAAUrlC,KAAKolC,aACfxkB,EAAS5gB,KAAK4mC,mBAAmB,GAErC,GAAIvB,EAAQ4B,aACV,OAAOrmB,EAGT,IAAI0mB,EAAOtnC,KAAKunC,UAEZC,EAAUxnC,KAAKqlC,QAAQoC,sBAAsB7mB,EAAQ0mB,EAAKtrC,EAAGsrC,EAAKl6B,EAAGi6B,GAAgB,EAAMrnC,KAAKknC,gBAEpG,IAAKM,IAAYlsC,MAAMC,QAAQisC,EAAQ,IACrC,OAAOA,EAKT,IAFA,IAAIE,EAAO,GAEF3wC,EAAI,EAAGiO,EAAIwiC,EAAQvwC,OAAQF,EAAIiO,EAAGjO,IACzC,IAAK,IAAI6D,EAAK,EAAGC,EAAK2sC,EAAQzwC,GAAGE,OAAQ2D,EAAKC,EAAID,IAChD8sC,EAAK5sC,KAAK0sC,EAAQzwC,GAAG6D,IAIzB,OAAO8sC,GAGTp6B,EAAOq6B,eAAiB,SAAwB5wC,GAC9C,IAAI8B,EAAImH,KAAK4nC,cAER/uC,IACHA,EAAI,GAGN,IAAIgvC,EAAY7nC,KAAK4mC,mBAAmB,GAExC,IAAKiB,IAAcA,EAAU9wC,GAC3B,OAAO8B,EAGT,IAAIgF,EAAMmC,KAAKo9B,SACX0K,EAAKD,EAAU9wC,GAAG,GAClByqB,EAAKqmB,EAAU9wC,GAAG,GAEtB,GAAI8G,EAAIkqC,iBAAkB,CACxB,IAAIC,EAAUnqC,EAAI6oC,YAGlB,OAFAoB,EAAKjqC,EAAI+hC,uBAAuBiI,EAAU9wC,GAAG,GAAIixC,EAAS,EAAG3B,IAC7D7kB,EAAK3jB,EAAI+hC,uBAAuBiI,EAAU9wC,GAAG,GAAIixC,EAAS,EAAG1B,IACtDztC,EAAI+F,EAAckpC,EAAG9rC,EAAG8rC,EAAG16B,EAAGoU,EAAGxlB,EAAGwlB,EAAGpU,GAE9C,OAAOvU,GAAK+F,EAAckpC,EAAG9rC,EAAG8rC,EAAG16B,EAAGoU,EAAGxlB,EAAGwlB,EAAGpU,IAInDE,EAAOsC,QAAU,SAAiByL,EAAKqd,EAAQuP,GAC7C,GAAIA,EAAU,CACZ,IAAIX,EAAOtnC,KAAKunC,UACZ/rC,EAAIk9B,EAAOnqB,IAAI+4B,GAInB,OAHAjsB,EAAIsG,OACJtG,EAAIsD,UAAUnjB,EAAEQ,EAAGR,EAAE4R,GACrBiO,EAAIrL,OAAOi4B,GACJjoC,KAAKunC,UAGd,OAAO,MAGFhB,EAnHa,CAoHpBd,IAEEyC,GAAyB,SAAUC,GAerC,SAASD,EAAuB9hC,EAAQtE,EAAUujC,GAChD,IAAItV,GAEJA,EAAQoY,EAAiB7vC,KAAK0H,KAAMoG,EAAQtE,EAAUujC,IAAYrlC,MAC5DooC,SAAWtkC,GAAsBsC,GACvC2pB,EAAM1nB,MAAQ0nB,EAAM8V,aAAa9V,EAAMpR,aACvCoR,EAAMsY,cAAgBtY,EAAM8V,aAAaqC,EAAuBI,qBAAqBvY,EAAM1nB,QAC3F,IAAIuT,EAAYmU,EAAMsY,cAAyB,UAQ/C,OALEtY,EAAMra,QADJkG,EAAY,GAAM,EACJ,EAEA,IAGXmU,EA7BTpjB,GAAeu7B,EAAwBC,GAEvCD,EAAuB9qC,KAAO,SAAcgJ,GAC1C,QAAKA,MAIDhP,EAAMgP,EAAmB,aAAOhP,EAAMgP,EAAmB,aAA+B,SAAzBA,EAAmB,aAyBxF,IAAIkH,EAAS46B,EAAuB/vC,UAqapC,OAnaAmV,EAAOi7B,UAAY,SAAmBltB,EAAKhU,GACzC,IAAIgB,EAAQrI,KAAKqI,MAEjB,GAAKrI,KAAKqlC,QAAQO,gBAA4C,IAAzBv9B,EAAmB,aAAqC,IAA1BA,EAAoB,eAAuC,IAA5BA,EAAsB,gBAAoC,IAAzBA,EAAmB,aAAtJ,CAIA,IAAImgC,EAAexoC,KAAKonC,4BAEnBpqC,EAAewrC,KAIpBxoC,KAAK2lC,gBAAgBtqB,GAEjBrb,KAAKolC,aAAa6B,cAAgBjnC,KAAK8B,SAAS2mC,WAAWpH,YAAcrhC,KAAK8B,UAAY9B,KAAKooC,WAAwE,IAA5DpoC,KAAK8B,SAAS2mC,WAAWlwB,QAA6B,oBACnKvY,KAAK0oC,aAAartB,EAAKmtB,EAAcnhC,GAErCrH,KAAK2oC,sBAAsBttB,EAAKmtB,EAAcnhC,MAIlDiG,EAAOi6B,QAAU,WACf,IAAI1hC,EAAI7F,KAAKqI,MACTpJ,EAAK4G,EAAY,SACjB3G,EAAK2G,EAAY,SACrB,OAAO,IAAIqJ,GAAMjQ,EAAIC,IAGvBoO,EAAOo7B,aAAe,SAAsBrtB,EAAKmtB,EAAcnhC,GAC7D,IAAIghC,EAAgBroC,KAAKqoC,cACV3gC,GAAW2gC,EAAyB,YAAM3gC,GAAW2gC,EAA2B,cAG7FroC,KAAK0b,cAAcL,EAAKgtB,EAAehhC,GAGzC,IAAK,IAAItQ,EAAIyxC,EAAavxC,OAAS,EAAGF,GAAK,EAAGA,IAAK,CACjD,IAAI6W,EAAQ46B,EAAazxC,GAErB2hC,EAAS14B,KAAK4P,QAAQyL,EAAKzN,EAAO5N,KAAK2nC,eAAe5wC,IAEtD2hC,IACF9qB,EAAQ8qB,GAGV14B,KAAK4oC,kBAAkBvtB,EAAKzN,EAAOvG,GAE/BqxB,GACFrd,EAAIwG,YAKVvU,EAAOq7B,sBAAwB,SAA+BttB,EAAKmtB,EAAcnhC,GAC/E,IAAIwhC,EAAQ7oC,KAAK8oC,eAEbnsB,EAAQtV,EAAU6S,SAAS2uB,GAE1BlsB,IACHA,EAAQ3c,KAAK+oC,mBAAmB1tB,EAAKhU,GACrCA,EAAU2W,YAAY,CAAC6qB,EAAOlsB,EAAMtW,MAAOsW,EAAMrW,QAASqW,IAK5D,IAFA,IAAIqsB,EAAShpC,KAAKipC,WAAWtsB,EAAMtW,MAAOsW,EAAMrW,QAEvCvP,EAAIyxC,EAAavxC,OAAS,EAAGF,GAAK,EAAGA,IAAK,CACjD,IAAI6W,EAAQ46B,EAAazxC,GAErB2hC,EAAS14B,KAAK4P,QAAQyL,EAAKzN,EAAO5N,KAAK2nC,eAAe5wC,IAEtD2hC,IACF9qB,EAAQ8qB,GAGV3d,GAAO4B,MAAMtB,EAAKsB,EAAO/O,EAAM5R,EAAIgtC,EAAOhtC,EAAG4R,EAAMR,EAAI47B,EAAO57B,GAE1DsrB,GACFrd,EAAIwG,YAKVvU,EAAO47B,eAAiB,WACtB,IAAKlpC,KAAKmpC,MAAO,CACf,IAAIvtB,EAAY5b,KAAKqoC,cAAyB,UAC1Ce,EAAS,GAAKppC,KAAKoG,OAAmB,YAAK,GAC3Ce,EAAI3O,KAAK8D,MAAM0D,KAAKqI,MAAmB,YAAIuT,EAAY,EAAIwtB,EAAwB,EAAfppC,KAAK0V,SACzEtO,EAAI5O,KAAK8D,MAAM0D,KAAKqI,MAAoB,aAAIuT,EAAY,EAAIwtB,EAAwB,EAAfppC,KAAK0V,SAE9E,GAAI7R,GAAqB7D,KAAKoG,OAAoB,cAAMvC,GAAqB7D,KAAKoG,OAAqB,cACrG,MAAO,CAACe,EAAGC,GAGbpH,KAAKmpC,MAAQ,CAAChiC,EAAGC,GAGnB,OAAOpH,KAAKmpC,OAGd77B,EAAOy7B,mBAAqB,SAA4B1tB,EAAKhU,GAC3D,IAAI8T,EAAcE,EAAIpQ,OAAOpT,YACzBqY,EAAOlQ,KAAKkpC,iBACZj+B,EAAS8P,GAAOG,aAAahL,EAAK,GAAIA,EAAK,GAAIiL,GAC/CvN,EAAQ5N,KAAKqpC,qBAAqBn5B,EAAK,GAAIA,EAAK,IAEhD7U,EAAU4P,EAAOG,WAAW,MAShC,OARe1D,GAAW1H,KAAKqoC,cAAyB,YAAM3gC,GAAW1H,KAAKqoC,cAA2B,cAGvGroC,KAAK0b,cAAcrgB,EAAS2E,KAAKqoC,cAAehhC,GAGlDrH,KAAK4oC,kBAAkBvtC,EAASuS,EAAOvG,GAEhC4D,GAGTqC,EAAOw7B,aAAe,WAKpB,OAJK9oC,KAAKspC,SACRtpC,KAAKspC,OAAS,CAACtpC,KAAKqI,MAAkB,WAAGX,GAAW1H,KAAKqI,MAAkB,YAAKV,GAAiB3H,KAAKqI,MAAkB,YAAKrI,KAAKqI,MAAkB,WAAGrI,KAAKqI,MAAyB,kBAAGrI,KAAKqI,MAA6B,sBAAGX,GAAW1H,KAAKqI,MAAuB,iBAAKV,GAAiB3H,KAAKqI,MAAuB,iBAAKrI,KAAKqI,MAAuB,gBAAGrI,KAAKqI,MAAuB,gBAAGrI,KAAKqI,MAAyB,kBAAGrI,KAAKqI,MAA2B,oBAAIrI,KAAKqI,MAA2B,oBAAE7G,KAAK,KAAO,GAAIxB,KAAKqI,MAA6B,sBAAGrI,KAAKqI,MAAmB,YAAGrI,KAAKqI,MAAoB,aAAGrI,KAAKqI,MAAiC,0BAAGrI,KAAKqI,MAA+B,yBAAG7G,KAAK,MAG5pBxB,KAAKspC,QAGdh8B,EAAO27B,WAAa,SAAoB9hC,EAAGC,GACzC,IACImiC,EADS,GAAKvpC,KAAKoG,OAAmB,YAAK,GACzBpG,KAAK0V,QACvBla,EAAIkW,GAAc,IAAIzB,GAAK9I,EAAGC,GAAIpH,KAAKqI,MAAiC,0BAAGrI,KAAKqI,MAA+B,yBAUnH,OARI7M,EAAEQ,KAAOmL,EAAI,IACf3L,EAAEQ,GAAKD,EAAKP,EAAEQ,EAAImL,EAAI,GAAKoiC,GAGzB/tC,EAAE4R,KAAOhG,EAAI,IACf5L,EAAE4R,GAAKrR,EAAKP,EAAE4R,EAAIhG,EAAI,GAAKmiC,GAGtB/tC,GAGT8R,EAAO+7B,qBAAuB,SAA8BliC,EAAGC,GAC7D,IACImiC,EADS,GAAKvpC,KAAKoG,OAAmB,YAAK,GACzBpG,KAAK0V,QACvB8zB,EAAaxpC,KAAKqI,MAAkB,WAExC,MAAmB,QAAfmhC,GAAuC,QAAfA,GAAuC,QAAfA,EAC3C,IAAIt6B,GAAM/H,EAAI,EAAGC,EAAImiC,GACJ,cAAfC,EACF,IAAIt6B,GAAMq6B,EAAQA,GAElB,IAAIr6B,GAAM/H,EAAI,EAAGC,EAAI,IAIhCkG,EAAOm8B,mBAAqB,SAA4B7oB,GACtD,IAAI7M,EAAI,IAAI0hB,GACR6R,EAAOtnC,KAAKunC,UACZxN,EAAI/5B,KAAK0pC,iBAEb,GAAIpuC,MAAMC,QAAQqlB,GAChB,IAAK,IAAI7pB,EAAI6pB,EAAO3pB,OAAS,EAAGF,GAAK,EAAGA,IACtCgd,EAAE+gB,SAASlU,EAAO7pB,SAGpBgd,EAAE+gB,SAASlU,GAOb,OAJA7M,EAAQ,MAAKgmB,EAAQ,KAAIuN,EAAKtrC,EAC9B+X,EAAQ,MAAKgmB,EAAQ,KAAIuN,EAAKl6B,EAC9B2G,EAAQ,MAAKgmB,EAAQ,KAAIuN,EAAKtrC,EAC9B+X,EAAQ,MAAKgmB,EAAQ,KAAIuN,EAAKl6B,EACvB2G,GAGTzG,EAAOs7B,kBAAoB,SAA2BvtB,EAAKzN,EAAOvG,GAChE,IAUMsiC,EAVFthC,EAAQrI,KAAKqI,MACbggC,EAAgBroC,KAAKqoC,cACrBmB,EAAanhC,EAAkB,WAAEe,cACjCwgC,EAAc1B,EAAuB2B,iBAAiBL,EAAYnhC,EAAmB,YAAGA,EAAoB,cAC5GyY,EAAcunB,EAA2B,YACzC/pB,EAAc+pB,EAA8B,gBAEjC3gC,GAAW2gC,EAAyB,YAAM3gC,GAAW2gC,EAA2B,gBAKzF3gC,GAAW2gC,EAAyB,aACtCsB,EAAiB3pC,KAAKypC,mBAAmB77B,GACzCy6B,EAAkC,mBAAIsB,EAAezU,OAAOmT,EAAyB,YAGnF3gC,GAAW2gC,EAA2B,eACnCsB,IACHA,EAAiB3pC,KAAKypC,mBAAmB77B,IAG3Cy6B,EAAqC,sBAAIsB,GAG3C3pC,KAAK0b,cAAcL,EAAKgtB,EAAehhC,IAGzC,IAAIhB,EAAQgC,EAAmB,YAC3B/B,EAAS+B,EAAoB,aAC7ByhC,EAAazhC,EAAuB,gBAAI,EAE5C,GAAmB,YAAfmhC,EACFzuB,GAAOsL,QAAQhL,EAAKzN,EAAOvH,EAAQ,EAAGC,EAAS,EAAGA,EAAS,EAAGwa,EAAaxC,QACtE,GAAmB,UAAfkrB,GAAyC,MAAfA,EAAoB,CACvD,IAAK,IAAI/0B,EAAIm1B,EAAY3yC,OAAS,EAAGwd,GAAK,EAAGA,IAC3Cm1B,EAAYn1B,GAAGxG,KAAKL,GAGtBmN,GAAOtU,KAAK4U,EAAKuuB,EAAYtwC,MAAM,EAAG,GAAIwnB,GAC1C/F,GAAOtU,KAAK4U,EAAKuuB,EAAYtwC,MAAM,EAAG,GAAIwnB,QACrC,GAAmB,YAAf0oB,GAA2C,QAAfA,GAAuC,WAAfA,GAA0C,cAAfA,GAA6C,aAAfA,EAA2B,CAC9H,QAAfA,EACF57B,EAAQA,EAAMM,IAAI,GAAI47B,GACE,cAAfN,IACT57B,EAAQA,EAAMM,IAAI47B,EAAYA,IAGhC,IAAK,IAAIC,EAAKH,EAAY3yC,OAAS,EAAG8yC,GAAM,EAAGA,IAC7CH,EAAYG,GAAI97B,KAAKL,GAGvBmN,GAAOgH,QAAQ1G,EAAKuuB,EAAa9oB,EAAaxC,QACzC,GAAmB,QAAfkrB,EAAsB,CAC/B57B,EAAQA,EAAMM,IAAI,GAAI47B,GAEtB,IAAK,IAAIE,EAAMJ,EAAY3yC,OAAS,EAAG+yC,GAAO,EAAGA,IAC/CJ,EAAYI,GAAK/7B,KAAKL,GAGxB,IAAIwO,EAAUf,EAAIe,QAClBf,EAAIe,QAAU,QACdrB,GAAOkL,mBAAmB5K,EAAKuuB,EAAa9oB,EAAaxC,GACzDjD,EAAIe,QAAUA,MACT,IAAmB,QAAfotB,EAQT,MAAM,IAAIxrC,MAAM,2BAA6BwrC,GAP7C57B,EAAQA,EAAMM,IAAI,EAAG47B,GACrB,IAAIj6B,EAAwC,IAAhCrX,KAAKmiC,KAAKt0B,EAAQ,EAAIC,GAAgB9N,KAAKC,GACnDwxC,EAAW5uB,EAAIe,QACnBf,EAAIe,QAAU,QACdrB,GAAO8L,OAAOxL,EAAKzN,EAAOtH,EAAQ,CAAC,GAAKuJ,EAAO,GAAKA,GAAQiR,EAAaxC,GACzEjD,EAAIe,QAAU6tB,IAMlB38B,EAAO45B,aAAe,WACpB,OAAOlnC,KAAKoG,OAAwB,iBAGtCkH,EAAOs6B,YAAc,WACnB,IAAI/uC,EAAImH,KAAKqI,MAAsB,eAEnC,OAAK/Q,EAASuB,IAINA,EAAIL,KAAKC,GAAK,IAHb,MAMX6U,EAAOo8B,eAAiB,WACtB,IAAIpC,EAAOtnC,KAAKunC,UACZ7xB,EAAyB,EAAf1V,KAAK0V,QAEfxF,EAAOlQ,KAAKkpC,iBAAiBrrC,KAAI,SAAUlF,GAC7C,OAAOA,EAAI+c,KAGTw0B,EAAalqC,KAAKipC,WAAW/4B,EAAK,GAAIA,EAAK,IAE3CxU,EAAS,IAAI+5B,GAAY6R,EAAKp5B,IAAI,EAAG,GAAIo5B,EAAKp5B,IAAIgC,EAAK,GAAIA,EAAK,KAEpExU,EAAOuS,KAAKi8B,GAEZ,IAAIjC,EAAWjoC,KAAK4nC,cAMpB,OAJIK,IACFvsC,EAASsE,KAAK8mC,cAAcprC,EAAQusC,IAG/BvsC,GAGT4R,EAAOqR,UAAY,WACjB,IAkBIwrB,EAAIC,EAlBJvkC,EAAI7F,KAAKoG,OACT1K,EAAS,CACX,WAAcE,EAAkBiK,EAAc,WAAG,WACjD,WAAcjK,EAAkBiK,EAAc,WAAG,QACjD,kBAAqBjK,EAAkBiK,EAAqB,kBAAG,GAC/D,sBAAyBjK,EAAkBiK,EAAyB,sBAAG,MACvE,gBAAmBjK,EAAkBiK,EAAmB,gBAAG,QAC3D,gBAAmBjK,EAAkBiK,EAAmB,gBAAG,GAC3D,kBAAqBjK,EAAkBiK,EAAqB,kBAAG,GAC/D,oBAAuBjK,EAAkBiK,EAAuB,oBAAG,IACnE,sBAAyBjK,EAAkBiK,EAAyB,sBAAG,MACvE,SAAYjK,EAAkBiK,EAAY,SAAG,GAC7C,SAAYjK,EAAkBiK,EAAY,SAAG,GAC7C,YAAejK,EAAkBiK,EAAe,YAAG,IACnD,aAAgBjK,EAAkBiK,EAAgB,aAAG,IACrD,eAAkBjK,EAAkBiK,EAAkB,eAAG,IAEvD2jC,EAAa9tC,EAAmB,WA2BpC,MAxBmB,QAAf8tC,GAAuC,QAAfA,GAAuC,QAAfA,GAClDW,EAAK,SACLC,EAAK,OACmB,cAAfZ,GACTW,EAAK,QACLC,EAAK,WAELD,EAAK,SACLC,EAAK,UAGP1uC,EAAkC,0BAAIE,EAAkBiK,EAA6B,0BAAGskC,GACxFzuC,EAAgC,wBAAIE,EAAkBiK,EAA2B,wBAAGukC,GAEhF9yC,EAASuO,EAAiB,iBACxBvO,EAASuO,EAAqB,qBAChCnK,EAA0B,mBAAKmK,EAAiB,eAG9CvO,EAASuO,EAAqB,qBAChCnK,EAA0B,mBAAKmK,EAAiB,gBAI7CnK,GAGTwsC,EAAuBI,qBAAuB,SAA8BziC,GAC1E,IAAInK,EAAS,CACX,UAAamK,EAAmB,gBAChC,gBAAmBA,EAAyB,sBAC5C,UAAaA,EAAmB,gBAChC,YAAeA,EAAqB,kBACpC,cAAiBA,EAAuB,oBACxC,QAAW,OACX,SAAY,QACZ,YAAeA,EAAc,WAC7B,mBAAsBA,EAAyB,sBAC/C,eAAkBA,EAAqB,mBAOzC,OAJ4B,IAAxBnK,EAAkB,YACpBA,EAAoB,YAAI,GAGnBA,GAGTwsC,EAAuB2B,iBAAmB,SAA0BL,EAAYnjC,EAAOC,GACrF,IAII+jC,EAAIC,EAAIC,EAAIC,EAJZC,EAAKnkC,EAAS,EACdokC,EAAKrkC,EAAQ,EAKjB,GAAmB,aAAfmjC,EAIF,MAAO,CAHPa,EAAK,IAAIn7B,GALA,EACD,EAImBu7B,GAC3BH,EAAK,IAAIp7B,GANA,EAMaw7B,EALd,EAKwBD,GAChCF,EAAK,IAAIr7B,GAPA,EAOaw7B,EANd,EAMwBD,IAE3B,GAAmB,UAAfjB,EAKT,MAAO,CAJPa,EAAK,IAAIn7B,GAVA,EAUaw7B,EATd,GAURJ,EAAK,IAAIp7B,GAXA,EAWaw7B,EAVd,GAWRH,EAAK,IAAIr7B,GAZA,EACD,EAWmBu7B,GAC3BD,EAAK,IAAIt7B,GAbA,EACD,EAYmBu7B,IAEtB,GAAmB,YAAfjB,EAKT,MAAO,CAJPa,EAAK,IAAIn7B,GAhBA,EAgBaw7B,EAfd,GAgBRJ,EAAK,IAAIp7B,GAjBA,EACD,EAgBmBu7B,GAC3BF,EAAK,IAAIr7B,GAlBA,EAkBaw7B,EAjBd,GAkBRF,EAAK,IAAIt7B,GAnBA,EACD,EAkBmBu7B,IAEtB,GAAmB,WAAfjB,EAKT,MAAO,CAJPa,EAAK,IAAIn7B,GAtBA,EAsBaw7B,EArBd,EAqBwBD,GAChCH,EAAK,IAAIp7B,GAvBA,EAuBaw7B,EAtBd,EAsBwBD,GAChCF,EAAK,IAAIr7B,GAxBA,EAwBaw7B,EAvBd,EAuBwBD,GAChCD,EAAK,IAAIt7B,GAzBA,EAyBaw7B,EAxBd,EAwBwBD,IAE3B,GAAmB,cAAfjB,EAKT,OAHAc,GADAD,EAAK,IAAIn7B,GA5BA,EACD,IA4BAhB,IAAI7H,EAAO,GACnBkkC,EAAKF,EAAGn8B,IAAI7H,EAAOC,GACnBkkC,EAAKH,EAAGn8B,IAAI,EAAG5H,GACR,CAAC+jC,EAAIC,EAAIC,EAAIC,GACf,GAAmB,MAAfhB,EAKT,MAAO,CAJPa,EAAK,IAAIn7B,GAlCA,EAkCaw7B,EAjCd,EAiCwBD,GAChCH,EAAK,IAAIp7B,GAnCA,EAmCaw7B,EAlCd,EAkCwBD,GAChCF,EAAK,IAAIr7B,GApCA,EAoCaw7B,EAnCd,EAmCwBD,GAChCD,EAAK,IAAIt7B,GArCA,EAqCaw7B,EApCd,EAoCwBD,IAE3B,GAAmB,QAAfjB,EAKT,MAAO,CAJPa,EAAK,IAAIn7B,GAxCA,EAwCaw7B,EAvCd,EAuCwBpkC,GAChCgkC,EAAK,IAAIp7B,GAzCA,EAyCaw7B,EAxCd,EAwCwBpkC,GAChCikC,EAAK,IAAIr7B,GA1CA,EA0Caw7B,EAzCd,GA0CRF,EAAK,IAAIt7B,GA3CA,EA2Caw7B,EA1Cd,IA4CH,GAAmB,QAAflB,EAAsB,CAC/B,IAAImB,EAAWrkC,EAAS9N,KAAKmiC,KAAK+P,EAAKD,GAKvC,MAAO,CAJPJ,EAAK,IAAIn7B,GA/CA,EACD,GA+CRo7B,EAAK,IAAIp7B,GAhDA,EAgDay7B,EA/Cd,EA+C8BrkC,GACtCikC,EAAK,IAAIr7B,GAjDA,EAiDay7B,EAhDd,EAgD8BrkC,GACtCkkC,EAAK,IAAIt7B,GAlDA,EACD,IAqDV,MAAO,IAGFg5B,EAtcoB,CAuc3B3B,IAEEqE,GAAkB,SAAUzC,GAG9B,SAASyC,IACP,OAAOzC,EAAiBhlC,MAAMnD,KAAMhJ,YAAcgJ,KAHpD2M,GAAei+B,EAAiBzC,GAMhC,IAAI76B,EAASs9B,EAAgBzyC,UAqD7B,OAnDAmV,EAAO45B,aAAe,WACpB,MAAO,SAGT55B,EAAOi6B,QAAU,WACf,OAAO,IAAIr4B,GAAM,EAAG,IAGtB5B,EAAOi7B,UAAY,SAAmBltB,GACpC,IAAIvZ,EAAW9B,KAAK8B,SAChB+6B,EAAQ/6B,EAAS2mC,WAErB,GAAK3mC,EAASyW,QAAe,QAAKskB,GAAUA,EAAMtkB,QAAe,MAAjE,CAIA,IAAI1a,EAAMmC,KAAKo9B,SAEf,GAAKv/B,IAAOA,EAAI0gC,YAAhB,CAIA,IAAI3f,EAAQie,EAAMtkB,QAAsB,aAExC8C,EAAIU,YAAc6C,EAClBvD,EAAIG,UAAYoD,EAChB,IAAIisB,EAAU7qC,KAAKolC,aAAa0F,qBAAqB/7B,UACrDgM,GAAOgH,QAAQ1G,EAAK,CAACwvB,GAJZ,EAI0B,GAMnC,IAJA,IAAIjqB,EAAS5gB,KAAKonC,4BACdhtC,EAAK4F,KAAK8B,SAASohC,QACnB6H,EAAQ7C,GAAuB2B,iBAAiB,QAAS,GAAI,IAExD9yC,EAAI,EAAGA,EAAI6pB,EAAO3pB,OAAQF,IAAK,CACtC,IAAIyE,EAAIolB,EAAO7pB,GAEVK,EAAMgD,IACT2gB,GAAOuF,SAASjF,EAAKjhB,EAAIoB,EAAE0S,IAAI,GAAI,GAAI0Q,GAKzC,IAFA,IAAIpb,EAAI,GAEC5I,EAAK,EAAGA,EAAKmwC,EAAM9zC,OAAQ2D,IAClC4I,EAAE1I,KAAKiwC,EAAMnwC,GAAIsT,IAAI1S,IAGvBuf,GAAOtU,KAAK4U,EAAK7X,EAAElK,MAAM,EAAG,GAvBrB,GAwBPyhB,GAAOtU,KAAK4U,EAAK7X,EAAElK,MAAM,EAAG,GAxBrB,OA4BJsxC,EA5Da,CA6DpBrE,IAEEyE,GAAwB,SAAU7C,GAepC,SAAS6C,EAAsB5kC,EAAQtE,EAAUujC,GAC/C,IAAItV,EAIJ,OAFAA,EAAQoY,EAAiB7vC,KAAK0H,KAAMoG,EAAQtE,EAAUujC,IAAYrlC,MAC5DqI,MAAQ0nB,EAAM8V,aAAa9V,EAAMpR,aAChCoR,EAnBTpjB,GAAeq+B,EAAuB7C,GAEtC6C,EAAsB5tC,KAAO,SAAcgJ,GACzC,QAAKA,IAIAhP,EAAMgP,EAAmB,aAehC,IAAIkH,EAAS09B,EAAsB7yC,UA4InC,OA1IAmV,EAAOi7B,UAAY,SAAmBltB,EAAKhU,GACzC,IAAIgB,EAAQrI,KAAKqI,MAEjB,GAAKrI,KAAKqlC,QAAQO,gBAA4C,IAAzBv9B,EAAmB,aAAqC,IAA1BA,EAAoB,cAAsC,IAA3BA,EAAqB,cAAvH,CAIA,IAAImgC,EAAexoC,KAAKonC,4BAExB,GAAKpqC,EAAewrC,GAApB,CAIA,IAAIhvC,EAAMwG,KAAKirC,UAAU5jC,GAEzB,GAAK7N,EAAL,CAQAwG,KAAK2lC,gBAAgBtqB,GAErB,IAqBIkD,EArBAlY,EAAQgC,EAAmB,YAC3B/B,EAAS+B,EAAoB,aAEjC,IAAK/Q,EAAS+O,KAAW/O,EAASgP,GAAS,CACzCD,EAAQ7M,EAAI6M,MACZC,EAAS9M,EAAI8M,OACb+B,EAAmB,YAAIhC,EACvBgC,EAAoB,aAAI/B,EACxB,IAAI4kC,EAAS,CAAC7iC,EAAkB,WAAGA,EAAmB,YAAGA,EAAoB,cAExEhB,EAAUk5B,iBAAiB2K,IAC9B7jC,EAAU2W,YAAYktB,EAAQ1xC,GAGhC,IAAI6rC,EAAUrlC,KAAKolC,aAEdC,EAAQ4B,cACX5B,EAAQ8F,cAMsB,SAA9BnrC,KAAKoG,OAAmB,YAAgB9O,EAAS+Q,EAAqB,gBAAMA,EAAqB,cAAI,IACvGkW,EAAQlD,EAAIqD,YACZrD,EAAIqD,aAAerW,EAAqB,eAK1C,IAFA,IAAI6hC,EAAax4B,GAAc,IAAIzB,GAAK5J,EAAOC,GAAS+B,EAAiC,0BAAGA,EAA+B,yBAElHtR,EAAI,EAAG4E,EAAM6sC,EAAavxC,OAAQF,EAAI4E,EAAK5E,IAAK,CACvD,IAAIyE,EAAIgtC,EAAazxC,GAEjB2hC,EAAS14B,KAAK4P,QAAQyL,EAAK7f,EAAGwE,KAAK2nC,eAAe5wC,IAElD2hC,IACFl9B,EAAIk9B,GAGN3d,GAAO4B,MAAMtB,EAAK7hB,EAAKgC,EAAEQ,EAAIkuC,EAAWluC,EAAGR,EAAE4R,EAAI88B,EAAW98B,EAAG/G,EAAOC,GAElEoyB,GACFrd,EAAIwG,eAIM/lB,IAAVyiB,IACFlD,EAAIqD,YAAcH,OAxDK,oBAAZ1B,SACTA,QAAQC,KAAK,qBAAuB9c,KAAKqI,MAAkB,YAAKrI,KAAKorC,KAAK,QA2DhF99B,EAAO29B,UAAY,SAAmB5jC,GAEpC,OADWA,EAAmBA,EAAU6S,SAAS,CAACla,KAAKqI,MAAkB,WAAGrI,KAAKqI,MAAmB,YAAGrI,KAAKqI,MAAoB,eAAzG,MAIzBiF,EAAO45B,aAAe,WACpB,OAAOlnC,KAAKoG,OAAwB,iBAGtCkH,EAAOs6B,YAAc,WACnB,IAAI/uC,EAAImH,KAAKqI,MAAsB,eAEnC,OAAK/Q,EAASuB,IAINA,EAAIL,KAAKC,GAAK,IAHb,MAMX6U,EAAOi6B,QAAU,WACf,IAAI1hC,EAAI7F,KAAKqI,MACTpJ,EAAK4G,EAAY,SACjB3G,EAAK2G,EAAY,SACrB,OAAO,IAAIqJ,GAAMjQ,EAAIC,IAGvBoO,EAAOo8B,eAAiB,SAAwBriC,GAC9C,IAAIgB,EAAQrI,KAAKqI,MACbhP,EAAMgP,EAAkB,WACxB7O,EAAM6N,EAAYA,EAAU6S,SAAS7gB,GAAO,KAC5CgN,EAAQgC,EAAmB,cAAM7O,EAAMA,EAAI6M,MAAQ,GACnDC,EAAS+B,EAAoB,eAAM7O,EAAMA,EAAI8M,OAAS,GACtDghC,EAAOtnC,KAAKunC,UACZ2C,EAAax4B,GAAc,IAAIzB,GAAK5J,EAAOC,GAAS+B,EAAiC,0BAAGA,EAA+B,yBACvH3M,EAAS,IAAI+5B,GAAY6R,EAAKp5B,IAAI,EAAG,GAAIo5B,EAAKp5B,IAAI7H,EAAOC,IAE7D5K,EAAOuS,KAAKi8B,GAEZ,IAAIjC,EAAWjoC,KAAK4nC,cAMpB,OAJIK,IACFvsC,EAASsE,KAAK8mC,cAAcprC,EAAQusC,IAG/BvsC,GAGT4R,EAAOqR,UAAY,WACjB,IAAI9Y,EAAI7F,KAAKoG,OACb,MAAO,CACL,WAAcP,EAAc,WAC5B,cAAiBjK,EAAkBiK,EAAiB,cAAG,GACvD,YAAejK,EAAkBiK,EAAe,YAAG,MACnD,aAAgBjK,EAAkBiK,EAAgB,aAAG,MACrD,eAAkBjK,EAAkBiK,EAAkB,eAAG,GACzD,SAAYjK,EAAkBiK,EAAY,SAAG,GAC7C,SAAYjK,EAAkBiK,EAAY,SAAG,GAC7C,0BAA6BjK,EAAkBiK,EAA6B,0BAAG,UAC/E,wBAA2BjK,EAAkBiK,EAA2B,wBAAG,SAIxEmlC,EAnKmB,CAoK1BzE,IAEE8E,GAAgB,IAAIra,GAAW,EAAG,GAClCsa,GAAgB,IAAIta,GAAW,EAAG,GAElCua,GAA0B,SAAU/E,GAuBtC,SAAS+E,EAAwBnlC,EAAQtE,EAAUujC,GACjD,IAAItV,EAOJ,OALAA,EAAQyW,EAAkBluC,KAAK0H,OAASA,MAClCoG,OAASA,EACf2pB,EAAMjuB,SAAWA,EACjBiuB,EAAMsV,QAAUA,EAEM,UAAlBvjC,EAASnD,KACJqO,GAAuB+iB,IAGhCA,EAAM1nB,MAAQ0nB,EAAM8V,aAAa9V,EAAMpR,aAChCoR,GAnCTpjB,GAAe4+B,EAAyB/E,GAExC+E,EAAwBnuC,KAAO,SAAcgJ,EAAQtE,GACnD,IAAKsE,EACH,OAAO,EAGT,GAAItE,GAA8B,UAAlBA,EAASnD,KACvB,OAAO,EAGT,IAAK,IAAInD,KAAK4K,EAAQ,CACpB,IAAIgjB,EAAI5tB,EAAElC,MAAM,EAAG,GAEnB,GAAU,SAAN8vB,GAAsB,SAANA,EAClB,OAAO,EAIX,OAAO,GAmBT,IAAI9b,EAASi+B,EAAwBpzC,UA2JrC,OAzJAmV,EAAOi7B,UAAY,SAAmBltB,EAAKhU,GACzC,IAAIgB,EAAQrI,KAAKqI,MAEjB,GAAgC,IAA5BA,EAAsB,gBAAoC,IAAzBA,EAAmB,aAAYrI,KAAKqlC,QAAQO,eAAjF,CAIA,IAAI4F,EAAcxrC,KAAKyrC,kBAEvB,GAAKD,EAAL,CAIAxrC,KAAK2lC,gBAAgBtqB,GAErB,IAAIqwB,EAAgBhkC,GAAWW,EAAiB,WAC5CsjC,EAAyC,YAAhC3rC,KAAK8B,SAASgtB,eAAsD,eAAvB9uB,KAAK8B,SAASnD,MAEpE+sC,IAAkBrjC,EAAiB,UAAU,QAAMsjC,IACrDtjC,EAA0B,mBAAIrI,KAAKolC,aAAa0F,qBAAqB1V,QAAQ/sB,EAAiB,YAG5FX,GAAWW,EAAmB,eAChCA,EAA6B,sBAAIrI,KAAKolC,aAAa0F,sBAGrD,IAAIlqB,EAAS4qB,EAAY,GAGzB,GAFiD,YAAhCxrC,KAAK8B,SAASgtB,eAA+BlO,EAAO3pB,OAAS,GAAKqE,MAAMC,QAAQqlB,EAAO,GAAG,KAA8B,eAAvB5gB,KAAK8B,SAASnD,MAAyBiiB,EAAO3pB,OAAS,GAAKqE,MAAMC,QAAQqlB,EAAO,IAGjM,IAAK,IAAI7pB,EAAI,EAAGA,EAAI6pB,EAAO3pB,OAAQF,IAAK,CACtCiJ,KAAK0b,cAAcL,EAAKhT,EAAOhB,GAE3BqkC,GAAiBC,IAAWtjC,EAAiB,UAAU,QACzDrI,KAAKkc,gBAAgBb,EAAKuF,EAAO7pB,GAAIsR,EAAiB,WAGxD,IAAIujC,EAAS,CAACvwB,EAAKuF,EAAO7pB,IAEtBy0C,EAAYv0C,OAAS,GACvB20C,EAAO9wC,KAAKqI,MAAMyoC,EAAQJ,EAAYlyC,MAAM,IAG9CsyC,EAAO9wC,KAAKuN,EAAmB,YAAGA,EAAsB,eAAGA,EAAqB,eAEhFrI,KAAK8B,SAAS+pC,SAAS1oC,MAAMnD,KAAK8B,SAAU8pC,OAEzC,CACL5rC,KAAK0b,cAAcL,EAAKhT,EAAOhB,GAE3BqkC,GAAiBC,IAAWtjC,EAAiB,UAAU,QACzDrI,KAAKkc,gBAAgBb,EAAKuF,EAAQvY,EAAiB,WAGrD,IAAIyjC,EAAU,CAACzwB,GAEfywB,EAAQhxC,KAAKqI,MAAM2oC,EAASN,GAE5BM,EAAQhxC,KAAKuN,EAAmB,YAAGA,EAAsB,eAAGA,EAAqB,eAEjFrI,KAAK8B,SAAS+pC,SAAS1oC,MAAMnD,KAAK8B,SAAUgqC,GAG1CzwB,EAAIgB,aAAe/gB,MAAMC,QAAQ8M,EAAqB,gBACxDgT,EAAIgB,YAAY,OAIpB/O,EAAOk0B,YAAc,WACnB,IAAI3jC,EAAMmC,KAAKo9B,SAEXrgB,EAAS/c,KAAK8B,SAASiqC,gBAE3B,IAAKhvB,EACH,OAAO,KAGJ/c,KAAKgsC,SAAYhsC,KAAKisC,UACzBjsC,KAAKgsC,QAAU,IAAIhb,GAAW,EAAG,GACjChxB,KAAKisC,QAAU,IAAIjb,GAAW,EAAG,IAGnChxB,KAAKgsC,QAAQhwC,EAAI+gB,EAAa,KAC9B/c,KAAKgsC,QAAQ5+B,EAAI2P,EAAa,KAC9B/c,KAAKisC,QAAQjwC,EAAI+gB,EAAa,KAC9B/c,KAAKisC,QAAQ7+B,EAAI2P,EAAa,KAE9B,IAAIlgB,EAAMgB,EAAIquC,YAAYlsC,KAAKgsC,aAASlwC,EAAWuvC,IAC/CvuC,EAAMe,EAAIquC,YAAYlsC,KAAKisC,aAASnwC,EAAWwvC,IAQnD,OANKtrC,KAAKmsC,UAGRnsC,KAAKmsC,UAAUznC,IAAIlM,KAAKqE,IAAIA,EAAIb,EAAGc,EAAId,GAAIxD,KAAKqE,IAAIA,EAAIuQ,EAAGtQ,EAAIsQ,GAAI5U,KAAKsE,IAAID,EAAIb,EAAGc,EAAId,GAAIxD,KAAKsE,IAAID,EAAIuQ,EAAGtQ,EAAIsQ,IAF/GpN,KAAKmsC,UAAY,IAAI1W,GAAY54B,EAAKC,GAKjCkD,KAAKmsC,WAGd7+B,EAAOo8B,eAAiB,WACtB,IAAI/sC,EAAIqD,KAAKqI,MAAiB,UAAI,EAClC,OAAO,IAAIotB,IAAa94B,GAAIA,EAAGA,EAAGA,IAGpC2Q,EAAOm+B,gBAAkB,WACvB,OAAOzrC,KAAKolC,aAAagH,eAAepsC,KAAKqI,MAAc,OAAGrI,KAAKqI,MAAc,SAGnFiF,EAAOqR,UAAY,WACjB,IAAI9Y,EAAI7F,KAAKoG,OACT1K,EAAS,CACX,UAAaE,EAAkBiK,EAAa,UAAG,QAC/C,UAAajK,EAAkBiK,EAAa,UAAG,GAC/C,YAAejK,EAAkBiK,EAAe,YAAG,GACnD,cAAiBjK,EAAkBiK,EAAiB,cAAG,IACvD,QAAWjK,EAAkBiK,EAAW,QAAG,QAC3C,SAAYjK,EAAkBiK,EAAY,SAAG,SAC7C,gBAAmBjK,EAAkBiK,EAAmB,gBAAG,MAC3D,OAAUjK,EAAkBiK,EAAU,OAAG,GACzC,OAAUjK,EAAkBiK,EAAU,OAAG,GACzC,YAAejK,EAAkBiK,EAAe,YAAG,MACnD,eAAkBjK,EAAkBiK,EAAkB,eAAG,GACzD,mBAAsBjK,EAAkBiK,EAAsB,mBAAG,MACjE,iBAAoBjK,EAAkBiK,EAAoB,iBAAG,GAC7D,iBAAoBjK,EAAkBiK,EAAoB,iBAAG,GAC7D,cAAiBjK,EAAkBiK,EAAiB,cAAG,GACvD,cAAiBjK,EAAkBiK,EAAiB,cAAG,IAWzD,OAR4B,IAAxBnK,EAAkB,YACpBA,EAAoB,YAAI,GAGC,eAAvBsE,KAAK8B,SAASnD,MAA0BjD,EAAoB,cAC9DA,EAAoB,YAAIA,EAAkB,WAGrCA,GAGT4R,EAAO4O,gBAAkB,SAAyBb,EAAKuF,EAAQyrB,GAC7D,GAAK/wC,MAAMC,QAAQqlB,IAAYA,EAAO3pB,OAAtC,CAIA,IAAI0E,EAAMilB,EAAO3pB,OACbq1C,EAAOjxB,EAAImC,qBAAqBoD,EAAO,GAAG5kB,EAAG4kB,EAAO,GAAGxT,EAAGwT,EAAOjlB,EAAM,GAAGK,EAAG4kB,EAAOjlB,EAAM,GAAGyR,GACjGi/B,EAAsB,WAAE5uB,SAAQ,SAAU3X,GACxCwmC,EAAK5uB,aAAava,MAAMmpC,EAAMxmC,MAEhCuV,EAAIU,YAAcuwB,IAGbf,EAlMqB,CAmM5B9F,IAEE8G,GAAY,uBAEZC,GAAuB,SAAUrE,GAenC,SAASqE,EAAqBpmC,EAAQtE,EAAUujC,GAC9C,IAAItV,EAMJ,IAJAA,EAAQoY,EAAiB7vC,KAAK0H,KAAMoG,EAAQtE,EAAUujC,IAAYrlC,MAC5DooC,SAAWtkC,GAAsBsC,GACvC2pB,EAAM1nB,MAAQ0nB,EAAM8V,aAAa9V,EAAMpR,aAEF,IAAjCoR,EAAM1nB,MAAqB,cAC7B,OAAO2E,GAAuB+iB,GAGhCA,EAAMsY,cAAgBtY,EAAM8V,aAAa9V,EAAMuY,qBAAqBvY,EAAM1nB,QAC1E,IAAIokC,EAAch7B,GAAgBse,EAAM1nB,MAAgB,SAAG0nB,EAAMjuB,SAASmkC,iBAQ1E,OANKlW,EAAMqY,WACTrY,EAAM2c,UA2MZ,SAAqBD,EAAapkC,GAChC,IAAIhQ,EAAM,CAACo0C,GAEX,IAAK,IAAIjxC,KAAK6M,EACRA,EAAMpQ,eAAeuD,IAAMA,EAAEvE,OAAS,GAA2B,SAAtBuE,EAAEyF,UAAU,EAAG,IAC5D5I,EAAIyC,KAAKU,EAAI,IAAM6M,EAAM7M,IAI7B,OAAOnD,EAAImJ,KAAK,KApNMmrC,CAAYF,EAAa1c,EAAM1nB,QAGnD0nB,EAAM6c,UAAUH,GAET1c,EAlCTpjB,GAAe6/B,EAAsBrE,GAErCqE,EAAqBpvC,KAAO,SAAcgJ,GACxC,QAAKA,IAIAhP,EAAMgP,EAAiB,WA8B9B,IAAIkH,EAASk/B,EAAqBr0C,UA8LlC,OA5LAmV,EAAOi7B,UAAY,SAAmBltB,EAAKhU,GACzC,GAAKrH,KAAKqlC,QAAQO,gBAA8C,IAA3B5lC,KAAKqI,MAAgB,WAAYrI,KAAKqI,MAAmB,aAAOrI,KAAKqI,MAAsB,gBAAMrI,KAAKqI,MAAuB,kBAAsC,IAAhCrI,KAAKqI,MAAqB,cAAlM,CAIA,IAAImgC,EAAexoC,KAAKonC,4BAExB,GAAKpqC,EAAewrC,GAApB,CAIA,IAAIngC,EAAQrI,KAAKqI,MACbggC,EAAgBroC,KAAKqoC,cACrBoE,EAAch7B,GAAgBzR,KAAKqI,MAAgB,SAAGrI,KAAK8B,SAASmkC,iBAExEjmC,KAAK4sC,UAAUH,GAEfzsC,KAAK2lC,gBAAgBtqB,GAErBrb,KAAK0b,cAAcL,EAAKgtB,EAAehhC,GACvC0T,GAAOK,kBAAkBC,EAAKhT,GAE9B,IAAK,IAAItR,EAAI,EAAG4E,EAAM6sC,EAAavxC,OAAQF,EAAI4E,EAAK5E,IAAK,CACvD,IAAIyE,EAAIgtC,EAAazxC,GAEjB2hC,EAAS14B,KAAK4P,QAAQyL,EAAK7f,EAAGwE,KAAK2nC,eAAe5wC,IAElD2hC,IACFl9B,EAAIk9B,GAGN3d,GAAOnK,KAAKyK,EAAKoxB,EAAajxC,EAAG6M,EAAOrI,KAAKif,UAEzCyZ,GACFrd,EAAIwG,cAKVvU,EAAO45B,aAAe,WACpB,OAAOlnC,KAAKoG,OAAsB,eAGpCkH,EAAOs6B,YAAc,WACnB,IAAI/uC,EAAImH,KAAKqI,MAAoB,aAEjC,OAAK/Q,EAASuB,IAINA,EAAIL,KAAKC,GAAK,IAHb,MAMX6U,EAAOi6B,QAAU,WACf,IAAI1hC,EAAI7F,KAAKqI,MACb,OAAO,IAAI6G,GAAMrJ,EAAU,OAAGA,EAAU,SAG1CyH,EAAOo8B,eAAiB,WACtB,IAAIpC,EAAOtnC,KAAKunC,UACZl/B,EAAQrI,KAAKqI,MACb6H,EAAOlQ,KAAKif,SAAe,KAC3BirB,EAAax4B,GAAcxB,EAAM7H,EAA+B,wBAAGA,EAA6B,uBAChGwkC,EAAS3C,EAAWluC,EACpB8wC,EAAS5C,EAAW98B,EAExB,GAAI/E,EAAsB,eAAG,CAC3B,IAAIxP,EAAIwP,EAAsB,eAC9B6H,EAAOA,EAAKhC,IAAQ,EAAJrV,EAAW,EAAJA,GAGzB,IAAI6C,EAAS,IAAI+5B,GAAY6R,EAAKp5B,IAAI2+B,EAAQC,GAASxF,EAAKp5B,IAAI2+B,EAAS38B,EAAY,MAAG48B,EAAS58B,EAAa,SAC1G+3B,EAAWjoC,KAAK4nC,cAMpB,OAJIK,IACFvsC,EAASsE,KAAK8mC,cAAcprC,EAAQusC,IAG/BvsC,GAGT4R,EAAOqR,UAAY,WACjB,IAAI9Y,EAAI7F,KAAKoG,OACT1K,EAAS,CACX,SAAYmK,EAAY,SACxB,aAAgBjK,EAAkBiK,EAAgB,aAAG,aACrD,WAAcjK,EAAkBiK,EAAc,WAAG,UACjD,UAAajK,EAAkBiK,EAAa,UAAG,UAC/C,SAAYjK,EAAkBiK,EAAY,SAn5PxB,IAo5PlB,SAAYjK,EAAkBiK,EAAY,SAAG,MAC7C,SAAYjK,EAAkBiK,EAAY,SAAG,QAC7C,YAAejK,EAAkBiK,EAAe,YAAG,GACnD,aAAgBjK,EAAkBiK,EAAgB,aAAG,WACrD,eAAkBjK,EAAkBiK,EAAkB,eAAG,GACzD,gBAAmBjK,EAAkBiK,EAAmB,gBAAG,GAC3D,cAAiBjK,EAAkBiK,EAAiB,cAAG,MACvD,kBAAqBjK,EAAkBiK,EAAqB,kBAAG,MAC/D,gBAAmBjK,EAAkBiK,EAAmB,gBAAG,GAC3D,OAAUjK,EAAkBiK,EAAU,OAAG,GACzC,OAAUjK,EAAkBiK,EAAU,OAAG,GACzC,wBAA2BjK,EAAkBiK,EAA2B,wBAAG,UAC3E,sBAAyBjK,EAAkBiK,EAAyB,sBAAG,UACvE,UAAajK,EAAkBiK,EAAa,UAAG,UAC/C,aAAgBjK,EAAkBiK,EAAgB,aAAG,GACrD,aAAgBjK,EAAkBiK,EAAgB,aAAG,GACrD,cAAiBjK,EAAkBiK,EAAiB,cAAG,IAWzD,OARInK,EAAqB,aAAI,KAAOA,EAAsB,eAAKA,EAAsB,cAAIA,EAAqB,gBACvGA,EAAsB,gBACzBA,EAAsB,cAAI,GAG5BA,EAAsB,cAAIA,EAAqB,cAG1CA,GAGT4R,EAAOg7B,qBAAuB,SAA8BziC,GAC1D,MAAO,CACL,UAAaA,EAAkB,eAAIA,EAAgB,aAAIA,EAAY,SACnE,UAAaA,EAAkB,eAC/B,YAAeA,EAAe,YAC9B,cAAiB,KACjB,QAAW,OACX,SAAY,QACZ,YAAeA,EAAY,SAC3B,eAAkBA,EAAe,cAIrCyH,EAAOs/B,UAAY,SAAmBH,GAChCzsC,KAAKooC,SACPpoC,KAAKif,SAAWjf,KAAK+sC,aAAaN,IAIpCzsC,KAAKif,SAAWjf,KAAKgtC,iBAEhBhtC,KAAKif,WACRjf,KAAKif,SAAWjf,KAAK+sC,aAAaN,GAElCzsC,KAAKitC,cAAcjtC,KAAKif,aAI5B3R,EAAOy/B,aAAe,SAAsBN,GAC1C,IAAIhtB,EAAYzf,KAAKqI,MAAqB,cACtC4W,EAAWnN,GAAe26B,EAAazsC,KAAKqI,OAMhD,OAJIoX,GAAaA,EAAYR,EAAS/O,KAAK5J,SACzC2Y,EAAS/O,KAAK5J,OAASmZ,GAGlBR,GAGT3R,EAAO2/B,cAAgB,SAAuBhuB,GACxCjmB,IAICgH,KAAK8B,SAASyqC,MACjBvsC,KAAK8B,SAASyqC,IAAa,IAG7BvsC,KAAK8B,SAASyqC,IAAWvsC,KAAK0sC,WAAa,CACzC,KAAQztB,EACR,QAAU,KAId3R,EAAO0/B,eAAiB,WACtB,IAAKhtC,KAAK8B,SAASyqC,IACjB,OAAO,KAGT,IAAIjM,EAAQtgC,KAAK8B,SAASyqC,IAAWvsC,KAAK0sC,WAE1C,OAAKpM,GAILA,EAAM4M,QAAS,EACR5M,EAAM6M,MAJJ,MAOJX,EApOkB,CAqOzBjG,IAEFiG,GAAqBD,UAAYA,GAcjC,IA6PIa,GA7PAC,GAA6B,SAAUC,GAezC,SAASD,EAA2BjnC,EAAQtE,EAAUujC,GACpD,IAAItV,EAEA34B,EAAMgP,EAAoB,eAC5BA,EAAoB,YAAI,IAGtBhP,EAAMgP,EAAqB,gBAC7BA,EAAqB,aAAI,IAI3BA,EAASvP,EAAOuP,GADhB2pB,EAAQud,EAAsBh1C,KAAK0H,KAAMoG,EAAQtE,EAAUujC,IAAYrlC,MACzC2e,aAE9B,IAAItW,EAAQ0nB,EAAM1nB,MAAQ0nB,EAAM8V,aAAaz/B,GAQ7C,OANIsG,GAAU5C,MACZimB,EAAMqb,KAAO,CAACjlC,GAAoBkC,EAAOA,EAAmB,YAAGA,EAAoB,cAAIA,EAAmB,YAAGA,EAAoB,cAEjI0nB,EAAMqb,KAAO,CAACjlC,GAAoBkC,GAAQA,EAAmB,YAAGA,EAAoB,cAG/E0nB,EApCTpjB,GAAe0gC,EAA4BC,GAE3CD,EAA2BjwC,KAAO,SAAcgJ,GAC9C,QAAKA,MAIDhP,EAAMgP,EAAmB,aAA+B,SAAzBA,EAAmB,aAgCxD,IAAIkH,EAAS+/B,EAA2Bl1C,UAuCxC,OArCAmV,EAAOq4B,gBAAkB,aAEzBr4B,EAAO29B,UAAY,SAAmB5jC,GACpC,IAAIq2B,EAAS19B,KAEb,GAAIqH,GAAaA,EAAUk5B,iBAAiBvgC,KAAKorC,MAC/C,OAAO/jC,EAAU6S,SAASla,KAAKorC,MAGjC,IAAI/F,EAAUrlC,KAAKqlC,QACf1oB,EAAQ,IAAID,MAwBhB,OAtBAC,EAAMpC,OAAS,WACb,IAAIgzB,EAAWlI,EAAQoD,YAAcpD,EAAQoD,WAAWtK,cAEpDoP,GACFA,EAASvQ,eAIbrgB,EAAMvC,QAAU,SAAU9O,GACpBA,GAA0B,oBAAZuR,SAChBA,QAAQC,KAAKxR,GAGfjE,EAAUi8B,kBAAkB5F,EAAO0N,OAGrCzuB,EAAMzlB,IAAM8I,KAAKorC,KAAK,GAElB/jC,GACFA,EAAU2W,YAAYhe,KAAKorC,KAAMzuB,GAG5BA,GAGF0wB,EA/EwB,CAgF/BrC,IAEEwC,GAAgB,CAClB5xB,UAAW,EACX6xB,YAAa,OACbC,eAAgB,IAGdC,GAAyB,SAAUxF,GAcrC,SAASwF,EAAuBvnC,EAAQtE,EAAUujC,GAChD,IAAItV,EAmBJ,OAjBAA,EAAQoY,EAAiB7vC,KAAK0H,KAAMoG,EAAQtE,EAAUujC,IAAYrlC,MAC5DqI,MAAQvG,EAAS2mC,WAAWlwB,QAAsB,aAEnDwX,EAAM1nB,OAAU1Q,EAASo4B,EAAM1nB,SAClC0nB,EAAM1nB,MAAQ,CACZ,UAAa,IAIZ0nB,EAAM1nB,MAAiB,YAC1B0nB,EAAM1nB,MAAiB,UAAI,GAG7B0nB,EAAMuX,KAAOvX,EAAM8V,aAAa,CAC9B,GAAMz/B,EAAe,QAAKA,EAAiB,SAC3C,GAAMA,EAAe,QAAKA,EAAiB,WAEtC2pB,EAjCTpjB,GAAeghC,EAAwBxF,GAEvCwF,EAAuBvwC,KAAO,SAAcgJ,EAAQtE,GAGlD,IAFYA,EAAS2mC,WAGnB,OAAO,EAGT,IAAI9pC,EAAOmD,EAASgtB,cACpB,MAAgB,WAATnwB,GAA8B,eAATA,GA0B9B,IAAI2O,EAASqgC,EAAuBx1C,UAgHpC,OA9GAmV,EAAOi7B,UAAY,SAAmBltB,GACpC,IAAIwhB,EAAQ78B,KAAK8B,SAAS2mC,WAE1B,GAAK5L,EAAMtkB,QAAsB,aAAjC,CAIA,IAAIgZ,EAAavxB,KAAK8B,SAASmkC,gBAE/B,GAAK1U,GAAeA,EAAWsL,EAAMtkB,QAA0B,kBAA/D,CAIA,IAAIlQ,EAAQrI,KAAK4tC,YAIjB,GAFA5tC,KAAK2lC,gBAAgBtqB,GAEM,eAAvBrb,KAAK8B,SAASnD,KAAuB,CACvC,IAAI6sC,EAAcxrC,KAAKyrC,gBAAgBpjC,EAAc,OAAGA,EAAc,QAEtE,IAAKmjC,EACH,OAGF,IAAIqC,EAAe7tC,KAAKolC,aAAagH,eAAe/jC,EAAc,OAAGA,EAAc,QAAG,GAAM,GAE5FrI,KAAK8tC,kBAAkBzyB,EAAKmwB,EAAY,GAAIqC,OACvC,CACL,IAAIjgC,EAAQ5N,KAAKonC,4BACb2G,EAAc/tC,KAAKonC,2BAA0B,GAEjD,IAAKx5B,GAA0B,IAAjBA,EAAM3W,OAClB,OAGF+I,KAAKguC,oBAAoB3yB,EAAKzN,EAAM,GAAImgC,EAAY,QAIxDzgC,EAAOi6B,QAAU,WACf,IAAI1hC,EAAI7F,KAAKsnC,KACb,OAAO,IAAIp4B,GAAMrJ,EAAM,IAAK,EAAGA,EAAM,IAAK,IAG5CyH,EAAOk0B,YAAc,WACnB,MAA2B,eAAvBxhC,KAAK8B,SAASnD,KACT4sC,GAAwBpzC,UAAUqpC,YAAYr+B,MAAMnD,MAEpDmoC,EAAiBhwC,UAAUqpC,YAAYlpC,KAAK0H,OAIvDsN,EAAO45B,aAAe,WACpB,MAAO,SAGT55B,EAAOm+B,gBAAkB,SAAyBxsC,EAAIC,GACpD,OAAOc,KAAKolC,aAAagH,eAAentC,GAAM,EAAGC,GAAM,IAGzDoO,EAAO0gC,oBAAsB,SAA6B3yB,EAAKzN,EAAOmgC,GACpE,IAAI1lC,EAAQrI,KAAK4tC,YAEjB5tC,KAAK0b,cAAcL,EAAKhT,GACxB0S,GAAOtU,KAAK4U,EAAK,CAACzN,EAAOmgC,GAAc1lC,EAAmB,YAAG,KAAMA,EAAqB,gBAG1FiF,EAAOwgC,kBAAoB,SAA2BzyB,EAAKuF,EAAQitB,GACjE,IAAIxlC,EAAQrI,KAAK4tC,YAIjB,GAFiBhtB,EAAO3pB,OAAS,GAAKqE,MAAMC,QAAQqlB,EAAO,IAGzD,IAAK,IAAI7pB,EAAI,EAAGA,EAAI6pB,EAAO3pB,OAAQF,IACjCiJ,KAAKiuC,UAAU5yB,EAAKuF,EAAO7pB,GAAI82C,EAAa92C,SAG9CiJ,KAAKiuC,UAAU5yB,EAAKuF,EAAQitB,GAG1BxyB,EAAIgB,aAAe/gB,MAAMC,QAAQ8M,EAAqB,gBACxDgT,EAAIgB,YAAY,KAIpB/O,EAAO2gC,UAAY,SAAmB5yB,EAAKuF,EAAQitB,GACjD,IAAIxlC,EAAQrI,KAAK4tC,YAEjB5tC,KAAK0b,cAAcL,EAAKhT,GAExB,IAAK,IAAItR,EAAI,EAAGiO,EAAI4b,EAAO3pB,OAAS,EAAGF,EAAIiO,EAAGjO,IAC5CgkB,GAAOgH,QAAQ1G,EAAK,CAACuF,EAAO7pB,GAAI6pB,EAAO7pB,EAAI,GAAI82C,EAAa92C,EAAI,GAAI82C,EAAa92C,IAAKsR,EAAmB,YAAGA,EAAsB,eAAGA,EAAqB,gBAI9JiF,EAAOsgC,UAAY,WACjB,IAAIvlC,EAAQrI,KAAK8B,SAAS2mC,WAAWlwB,QAAsB,aAW3D,OATK5gB,EAAS0Q,KACZA,EAAQmlC,IAGLnlC,EAAiB,YACpBA,EAAiB,UAAI,EACrBA,EAAmB,YAAI,GAGlBA,GAGFslC,EArJoB,CAsJ3BpH,IAcE2H,GAAsB,CAACP,GAAwBpC,GAAyBP,GAAuBqC,GAA4BnF,GAAwBsE,IAEnJ2B,GAAgB,IAAIj/B,GAAM,EAAG,GAC7Bk/B,GAAoB,IAAI3Y,GACxB4Y,GAAgB,IAAI5Y,GACpB6Y,GAAoB,IAAI7Y,GACxB8Y,GAAoB,IAAI9Y,GACxB+Y,GAAoB,IAAI/Y,GAExBgZ,GAAU,SAAU7R,GAGtB,SAAS6R,EAAQ3sC,GACf,IAAIiuB,EAMJ,OAJAA,EAAQ6M,EAAOtkC,KAAK0H,OAASA,MACvB8B,SAAWA,EACjBiuB,EAAM2e,YAAc3e,EAAM4e,qBAC1B5e,EAAM6e,aAAe7e,EAAM8e,uBACpB9e,EATTpjB,GAAe8hC,EAAS7R,GAYxB,IAAItvB,EAASmhC,EAAQt2C,UA02BrB,OAx2BAmV,EAAO8vB,OAAS,WACd,OAAOp9B,KAAK8B,SAASs7B,UAGvB9vB,EAAOm7B,SAAW,WAChB,OAAOzoC,KAAK8B,SAAS2mC,YAGvBn7B,EAAOqhC,mBAAqB,WAC1B,IAAIG,EAAY9uC,KAAK+uC,YACjBL,EAAc,GACdM,EAAiBd,GACjBjnC,EAAU6nC,EAETxzC,MAAMC,QAAQuzC,KACjB7nC,EAAU,CAAC6nC,IAGb,IAAK,IAAIl0C,EAAKqM,EAAQhQ,OAAS,EAAG2D,GAAM,EAAGA,IAGzC,IAFA,IAAIwL,EAASa,EAAQrM,GAEZ7D,EAAIi4C,EAAe/3C,OAAS,EAAGF,GAAK,EAAGA,IAC9C,GAAIi4C,EAAej4C,GAAGqG,KAAKgJ,EAAQpG,KAAK8B,UAAW,CACjD,IAAImtC,EAAa,IAAID,EAAej4C,GAAGqP,EAAQpG,KAAK8B,SAAU9B,MAC9D0uC,EAAY5zC,KAAKm0C,GAEbA,aAAsB1I,KACxBvmC,KAAKkvC,WAAY,GAMzB,IAAKR,EAAYz3C,QACX4lB,QAAS,CACX,IAAIziB,EAAK4F,KAAK8B,SAASohC,QACvBrmB,QAAQC,KAAK,gCAAkC9c,KAAK8B,SAAW9B,KAAK8B,SAASqtC,WAAa/0C,EAAK,IAAMA,EAAK,IAAM,IAAM,eAAiBK,KAAKyG,UAAU4tC,IAK1J,OADA9uC,KAAKovC,iBAAmB,IAAIxE,GAAgBkE,EAAW9uC,KAAK8B,SAAU9B,MAC/D0uC,GAGTphC,EAAO+hC,SAAW,WAChB,QAASrvC,KAAKkvC,WAGhB5hC,EAAO65B,gBAAkB,SAAyBH,GAahD,OAZKhnC,KAAKsvC,gBACRtvC,KAAKsvC,cAAgB,IAGlBtI,IACHA,EAAY,UAGThnC,KAAKsvC,cAActI,KACtBhnC,KAAKsvC,cAActI,GAAahnC,KAAK8B,SAAS8kC,iBAAiBI,IAG1DhnC,KAAKsvC,cAActI,IAG5B15B,EAAO8+B,eAAiB,SAAwBntC,EAAIC,EAAImoC,GACtD,IAAIxpC,EAAMmC,KAAKo9B,SACXt7B,EAAW9B,KAAK8B,SAChBiD,EAAMlH,EAAI0xC,gBACVC,EAA6B,IAAnB3xC,EAAIwgC,WACdoR,EAA+B,IAArB5xC,EAAIsoC,aACdyF,EAAS5rC,KAAK0vC,cAEdC,EAAc7tC,EAAS8tC,cAAgB9tC,EAAS8tC,eAEpD,GAAID,GAAe3vC,KAAK6vC,kBAAoB9qC,GAAO/E,KAAK6vC,iBAAiBC,KACvElE,EAAS5rC,KAAK6vC,sBACT,IAAKjE,GAAUA,EAAOkE,OAASjyC,EAAI0xC,iBAAmBvvC,KAAK+vC,WAAaP,GAAW1tC,EAASkuC,oBAAsBhwC,KAAKiwC,WAAaR,GAAW3tC,EAASouC,oBAAqB,CAGlL,KAFAtE,EAAS9pC,EAAS2pC,mBAGhB,OAAO,KAGTG,EAAOkE,KAAO/qC,GAETjD,EAASquC,aAAeR,IACtB3vC,KAAK6vC,mBACR7vC,KAAK6vC,iBAAmBjE,GAGtB7mC,EAAM/E,KAAK6vC,iBAAiBC,OAC9B9vC,KAAK6vC,iBAAiBC,KAAO/qC,IAIjC/E,KAAK0vC,cAAgB9D,EAGvB,IAAKA,EACH,OAAO,KAGT5rC,KAAK+vC,SAAWP,EAChBxvC,KAAKiwC,SAAWR,EAChB,IAAIW,EAAYvyC,EAAIwyC,aAChBC,EAAK,GACL1vB,EAASgrB,EAAO,GAChB2E,EAAY1yC,EAAIitC,qBAEhB0F,EAAUxwC,KAAKynC,sBAAsB7mB,EAAQ3hB,EAAIC,EAAImoC,EAAgBrnC,KAAKywC,YAAcF,EAAUx5B,SAAS/W,KAAKywC,YAEpH,IAAKD,EACH,OAAO,KAGTF,EAAGx1C,KAAK01C,GAER,IAAK,IAAIz5C,EAAI,EAAGiO,EAAI4mC,EAAO30C,OAAQF,EAAIiO,EAAGjO,IACpCO,EAASs0C,EAAO70C,KAAO60C,EAAO70C,aAAckZ,GAC1C3Y,EAASs0C,EAAO70C,IAClBu5C,EAAGx1C,KAAK8wC,EAAO70C,GAAKq5C,GAEpBE,EAAGx1C,KAAK8wC,EAAO70C,GAAG0X,MAAM,EAAI2hC,IAG9BE,EAAGx1C,KAAK8wC,EAAO70C,IAInB,OAAOu5C,GAGThjC,EAAOm6B,sBAAwB,SAA+B7mB,EAAQ3hB,EAAIC,EAAImoC,EAAgBqJ,EAAaC,GACzG,GAAI3wC,KAAK4wC,eACP,OAAO,KAGT,IAGIJ,EAHA3yC,EAAMmC,KAAKo9B,SACXqJ,EAAS5oC,EAAI6oC,YACbmK,EAAkB7wC,KAAK6wC,gBAG3B,SAASC,EAAoBljC,EAAOmjC,GAClC,IAAIv1C,EAAIqC,EAAI+hC,uBAAuBhyB,EAAO64B,EAAQsK,GAAK1iC,KAAKwiC,GAM5D,OAJI5xC,GAAMC,IACR1D,EAAEyS,KAAKhP,GAAM,EAAGC,GAAM,GAGjB1D,EAGT,IAAIw1C,EAAWhxC,KAAKixC,cAEpB,GAAI31C,MAAMC,QAAQqlB,GAAS,CACzB,IACIswB,EADApvC,EAAW9B,KAAK8B,SAYhBqvC,GARFD,GADGR,GAAe5uC,EAASyW,QAAoB,WACrCvY,KAAKoxC,MAAMxwB,EAAQowB,GAEnB,CACRpwB,OAAQA,EACRowB,SAAUA,IAIWpwB,OACzBowB,EAAWE,EAAQF,SAEf3J,IACF2J,EAAW,GAGb,IAAID,EAAMC,EACVR,EAAU,GAEV,IAAK,IAAIz5C,EAAI,EAAGiO,EAAImsC,EAAWl6C,OAAQF,EAAIiO,EAAGjO,IAAK,CACjD,IAAIyM,EAAI2tC,EAAWp6C,GAEnB,GAAIuE,MAAMC,QAAQiI,GAAI,CAGpB,IAFA,IAAI6tC,EAAQ,GAEHz2C,EAAK,EAAGC,EAAK2I,EAAEvM,OAAQ2D,EAAKC,EAAID,IAAM,CAC7C,IAAI02C,EAAK9tC,EAAE5I,GAEPU,MAAMC,QAAQy1C,KAEdD,EADEC,EAASj6C,GACLi6C,EAASj6C,GAAG6D,GAEZ,GAIVy2C,EAAMv2C,KAAKg2C,EAAoBQ,EAAIP,IAGrCP,EAAQ11C,KAAKu2C,QAET/1C,MAAMC,QAAQy1C,KAEdD,EADqB,gBAAnBJ,EACIK,EAASA,EAAS/5C,OAAS,EAAIF,GACT,SAAnB45C,GACFK,EAASj6C,GAAKi6C,EAASj6C,EAAI,IAAM,EAElCi6C,EAASj6C,IAInBy5C,EAAQ11C,KAAKg2C,EAAoBttC,EAAGutC,UAG/BnwB,aAAkB1R,KACvBm4B,IACF2J,EAAW,GAGbR,EAAU3yC,EAAI+hC,uBAAuBhf,EAAQ6lB,EAAQuK,GAAU3iC,KAAKwiC,IAEhE5xC,GAAMC,IACRsxC,EAAQviC,KAAKhP,EAAIC,IAIrB,OAAOsxC,GAGTljC,EAAO8jC,MAAQ,SAAexwB,EAAQowB,GACpC,IAAInzC,EAAMmC,KAAKo9B,SACXt7B,EAAW9B,KAAK8B,SAChB8Z,EAAY5b,KAAK+uC,YAAuB,UAEvCz3C,EAASskB,KACZA,EAAY,GAGd,IAAI21B,EAAW1zC,EAAI4iC,kBAAa3kC,EAAWyyC,IAAmBnZ,QAAQxZ,GAEtE,GAAI/d,EAAIwgC,WAAa,GAAK2S,EAAU,CAClC,IAAIxtC,EAAI3F,EAAI2zC,aACRn6B,EAAMxZ,EAAI4zC,eACdtD,GAAczpC,IAAI2S,EAAIrb,EAAGqb,EAAIjK,GAC7BmkC,EAAWA,EAASzc,SAASqZ,GAAclgC,KAAKlS,EAAKyH,EAAE,GAAK6T,EAAI,IAAKtb,EAAKyH,EAAE,GAAK6T,EAAI,MAGvF,IACI85B,EAAavwB,EAEjB,GAHQ5gB,KAAKwhC,YAAY,KAAMgN,IAGzBla,OAAOid,GACX,MAAO,CACL3wB,OAAQuwB,EACRH,SAAUA,GAId,IAAIU,EAAa7zC,EAAI4iC,aAAa5iC,EAAI6oC,YAAa6H,IAAmBnZ,QAAQxZ,EAAY/d,EAAI8zC,UAE1F3vB,EAAalgB,EAASyW,QAAoB,WAE9C,GAAIzW,EAAS8vC,UAAY5xC,KAAK8B,SAAS+vC,WAAa7vB,EAClD,GAAK1mB,MAAMC,QAAQqlB,EAAO,IAEnB,CACLuwB,EAAa,GAEb,IAAK,IAAIp6C,EAAI,EAAGA,EAAI6pB,EAAO3pB,OAAQF,IAAK,CACtC,IAAI+6C,EAAOrN,GAAY7jB,EAAO7pB,GAAI26C,GAE9BI,EAAK76C,QACPk6C,EAAWr2C,KAAKg3C,SARpBX,EAAa1M,GAAY7jB,EAAQ8wB,QAY9B,GAA+B,eAA3B5vC,EAASgtB,gBAAmC9M,EAAY,CACjE,GAAK1mB,MAAMC,QAAQqlB,EAAO,IAEnB,CACLuwB,EAAa,GAEb,IAAK,IAAItsC,EAAK,EAAGA,EAAK+b,EAAO3pB,OAAQ4N,IACnClK,EAAOw2C,EAAYvN,GAAShjB,EAAO/b,GAAK6sC,GAAY,IAAS1vB,SAL/DmvB,EAAavN,GAAShjB,EAAQ8wB,GAAY,IAAS1vB,GASrD,OAAOhiB,KAAK+xC,mBAAmBZ,EAAYvwB,EAAQowB,GAGrD,MAAO,CACLpwB,OAAQuwB,EACRH,SAAUA,IAId1jC,EAAOykC,mBAAqB,SAA4BC,EAAUC,EAAMjB,GACtE,IAAK11C,MAAMC,QAAQy1C,GAAW,CAC5B,IAAIr3C,EAAK,SAAY23C,GACnB,OAAOA,EAAG1jC,OAGZ,MAAO,CACLgT,OAAQoxB,EAASn0C,KAAI,SAAU2F,GAC7B,OAAIlI,MAAMC,QAAQiI,GACTA,EAAE3F,IAAIlE,GAGR6J,EAAEoK,SAEXojC,SAAUA,GAId,IAAIkB,EAojBR,SAASC,EAAevxB,EAAQqxB,EAAMjB,GACpC,IAAK11C,MAAMC,QAAQy1C,GACjB,OAAOpwB,EAKT,IAFA,IAAIojB,EAAQ,GAEHjtC,EAAI,EAAGiO,EAAI4b,EAAO3pB,OAAQF,EAAIiO,EAAGjO,IACxC,GAAIuE,MAAMC,QAAQqlB,EAAO7pB,IACvBitC,EAAMlpC,KAAKq3C,EAAevxB,EAAO7pB,GAAIk7C,EAAMjB,QACtC,CACL,IAAIx1C,EAAIolB,EAAO7pB,GAEf,GAAKyE,EAAEoS,MAAMiB,OAAOojC,EAAKz2C,EAAE42C,QAkBzB52C,EAAEw1C,SAAWA,EAASx1C,EAAE42C,OACxBpO,EAAMlpC,KAAKU,OAnBuB,CAClC,IAAI62C,OAAK,EACLC,OAAK,EAEO,IAAZ92C,EAAE42C,OACJC,EAAK72C,EAAE42C,MACPE,EAAK92C,EAAE42C,MAAQ,IAEfC,EAAK72C,EAAE42C,MAAQ,EACfE,EAAK92C,EAAE42C,OAGT,IAAI3tB,EAAKjpB,EAAEoS,MAAMD,WAAWskC,EAAKK,IAC7B31C,EAAI8nB,GAAMA,EAAKwtB,EAAKI,GAAI1kC,WAAWnS,EAAEoS,QACrCmjC,EAAMv0C,EAAYw0C,EAASqB,GAAKrB,EAASsB,GAAK,EAAI31C,GACtDnB,EAAEw1C,SAAWD,EACb/M,EAAMlpC,KAAKU,IAQjB,OAAOwoC,EAzlBamO,CAAeH,EAAUC,EAAMjB,GAgBjD,OAfAA,EAAW,GAeJ,CACLpwB,OAfWsxB,EAAYr0C,KAAI,SAAUrC,GACrC,GAAIF,MAAMC,QAAQC,GAAI,CACpB,IAAIu1C,EAAM,GACNwB,EAAK/2C,EAAEqC,KAAI,SAAUpC,GAEvB,OADAs1C,EAAIj2C,KAAKW,EAAGu1C,UACLv1C,EAAGmS,SAGZ,OADAojC,EAASl2C,KAAKi2C,GACPwB,EAIT,OADAvB,EAASl2C,KAAKU,EAAEw1C,UACTx1C,EAAEoS,SAITojC,SAAUA,IAId1jC,EAAOyhC,UAAY,WACjB,OAAO/uC,KAAK8B,SAAS0wC,sBAGvBllC,EAAOw0B,MAAQ,SAAe/kB,EAAQ1hB,EAASga,GAC7C,GAAKrV,KAAK0uC,YAAV,CAIA,IAAInB,EAAWvtC,KAAKyoC,WAAWgK,eAE/B,GAAKlF,IAAaA,EAASlyC,SAAYA,MAInC0hB,GAAWA,EAAOiX,WAAWh0B,KAAKwhC,YAAY+L,EAASlmC,UAAW+mC,MAAtE,CAIA,IAAIvwC,EAAMmC,KAAKo9B,SACXsV,EAAc1yC,KAAK2yC,iBACnBC,EAAa/0C,EAAIg1C,qBAErB,KAAIH,GAAeE,GAAcA,EAAaF,GAA9C,CAIA1yC,KAAK6wC,gBAAkBx7B,GAAUxX,EAAI+hC,uBAAuB2N,EAASrO,WAAWjxB,KAAK,GAAIpQ,EAAIyI,QAE7FtG,KAAK8yC,eAKL,IAHA,IAAIz3B,EAAMhgB,GAAWkyC,EAASlyC,QAC1B03C,EAAW,CAAC13B,EAAKkyB,EAASlmC,WAErBtQ,EAAIiJ,KAAK0uC,YAAYz3C,OAAS,EAAGF,GAAK,EAAGA,IAChDiJ,KAAKgzC,eAAe33B,EAAKrb,KAAK0uC,YAAY33C,GAAGqP,QAE7CpG,KAAK0uC,YAAY33C,GAAGwxC,UAAUplC,MAAMnD,KAAK0uC,YAAY33C,GAAIg8C,GAG3D/yC,KAAKizC,cAELjzC,KAAK88B,UAAW,EAEhB98B,KAAKovC,iBAAiB7G,UAAUplC,MAAMnD,KAAKovC,iBAAkB2D,OAG/DzlC,EAAO4lC,UAAY,SAAmB7rC,EAAW8T,GAC/C,GAA2B,UAAvBnb,KAAK8B,SAASnD,KAChB,OAAO,KAKT,GAFAqB,KAAKmzC,WAAY,GAEZnzC,KAAKozC,SAAWpzC,KAAK0uC,YAAYz3C,OAAS,EAAG,CAChD,IAAI8lB,EAAS,IAAI0Y,GACjBz1B,KAAK0uC,YAAYjxB,SAAQ,SAAU5X,GACjC,IAAIwtC,EAAextC,EAAE6jC,eAAeriC,GAEpC0V,EAAO+X,SAASue,MAElB,IAGIC,EAHA5a,EAAS3b,EAAOG,SAASzO,OAAO,GAChCugB,EAAQ7T,IAAgBnb,KAAKo9B,SAAWp9B,KAAKo9B,SAASwD,YAAc,MACpE31B,EAAS8P,GAAOG,aAAa6B,EAAOK,WAAYL,EAAOM,YAAa2R,GAGpEhvB,KAAKsvC,gBACPgE,EAAMtzC,KAAKsvC,eAMb,IAHA,IAAIj0B,EAAMpQ,EAAOG,WAAW,MACxB2nC,EAAW,CAAC13B,EAAKhU,GAEZtQ,EAAIiJ,KAAK0uC,YAAYz3C,OAAS,EAAGF,GAAK,EAAGA,IAAK,CACrD,IAAIuwC,EAAOtnC,KAAK0uC,YAAY33C,GAAGwwC,UAC/BvnC,KAAKsvC,cAAgB,CACnB,OAAU,CAAC,CAAC5W,EAAOxqB,IAAIo5B,MAGzBtnC,KAAKgzC,eAAe33B,EAAKrb,KAAK0uC,YAAY33C,GAAGqP,QAE7CpG,KAAK0uC,YAAY33C,GAAGwxC,UAAUplC,MAAMnD,KAAK0uC,YAAY33C,GAAIg8C,GAGvDO,IACFtzC,KAAKsvC,cAAgBgE,GAGvBtzC,KAAKozC,QAAU,CACb,OAAUnoC,EACV,OAAU8R,EAAOO,aAKrB,OADAtd,KAAKmzC,WAAY,EACVnzC,KAAKozC,SAGd9lC,EAAO25B,WAAa,WAClB,QAASjnC,KAAKmzC,WAGhB7lC,EAAOimC,QAAU,SAAiBhB,EAAIvN,KAC/BA,GAAaA,EAAY,MAC5BA,EAAY,IAGToI,KACHA,GAAaryB,GAAOG,aAAa,EAAG,IAGtCH,GAAOC,eAAc,GACrBoyB,GAAW/mC,MAAQ+mC,GAAW9mC,OAAS,EAAI0+B,EAC3C,IAAI3pB,EAAM+xB,GAAWhiC,WAAW,MAChCpL,KAAKywC,UAAY8B,EAAGhkC,IAAIy2B,EAAWA,GAEnC,IACEhlC,KAAK8hC,MAAM,KAAMzmB,EAAKrb,KAAKywC,WAC3B,MAAO18B,GACP,MAAMA,EACN,QACAgH,GAAOC,eAAc,UAGhBhb,KAAKywC,UAGZ,IAFA,IAAIt2B,EAAUkB,EAAI8kB,aAAa,EAAG,EAAGiN,GAAW/mC,MAAO+mC,GAAW9mC,QAAQ+R,KAEjEthB,EAAI,EAAGiO,EAAImV,EAAQljB,OAAQF,EAAIiO,EAAGjO,GAAK,EAC9C,GAAIojB,EAAQpjB,GAAK,EACf,OAAO,EAIX,OAAO,GAGTuW,EAAOs4B,aAAe,WACpB,QAAS5lC,KAAKywC,WAGhBnjC,EAAO0lC,eAAiB,SAAwB33B,EAAKjV,GAC/CA,EAAmB,YACrBiV,EAAI2E,WAAahgB,KAAK4lC,eAAiB,EAAIx/B,EAAmB,WAC9DiV,EAAIqN,YAActiB,EAAoB,aAAK,OAC3CiV,EAAI4E,cAAgB7Z,EAAsB,eAAK,EAC/CiV,EAAI6E,cAAgB9Z,EAAsB,eAAK,GACtCiV,EAAI2E,aACb3E,EAAI2E,WAAa,KACjB3E,EAAIqN,YAAc,KAClBrN,EAAI4E,cAAgB,KACpB5E,EAAI6E,cAAgB,OAIxB5S,EAAOkmC,gBAAkB,SAAyB75C,EAAI0B,GACpD,GAAK2E,KAAK0uC,YAAV,CAIKrzC,IACHA,EAAU2E,MAGZ,IAAK,IAAIjJ,EAAIiJ,KAAK0uC,YAAYz3C,OAAS,EAAGF,GAAK,EAAGA,IAChD4C,EAAGwJ,MAAM9H,EAAS,CAAC2E,KAAK0uC,YAAY33C,OAIxCuW,EAAOk0B,YAAc,SAAqBn6B,EAAWwsB,GACnD7zB,KAAKyzC,oBAEL,IAAI51C,EAAMmC,KAAKo9B,SACf/1B,EAAYA,GAAarH,KAAKyoC,WAAWgK,eAAeprC,UACxD,IAAItB,EAAOlI,EAAI2hC,UAEX8F,EAAgBtlC,KAAK0zC,iBAmBzB,GAjBK1zC,KAAKo/B,WAAap/B,KAAKo/B,UAAUuU,QAAU5tC,GAAS/F,KAAK4zC,eACxD5zC,KAAKo/B,WAAap/B,KAAKo/B,UAAUuU,QAAU5tC,UACtC/F,KAAKo/B,UAGVp/B,KAAK0uC,cACF1uC,KAAKo/B,YACRp/B,KAAKo/B,UAAYp/B,KAAK6zC,iBAAiB,IAAIpe,IAC3Cz1B,KAAKo/B,UAAUuU,MAAQ5tC,GAGpB/F,KAAK4zC,eACR5zC,KAAK4zC,aAAe5zC,KAAK8zC,oBAAoBzsC,EAAW,IAAIouB,QAK7Dz1B,KAAKo/B,UAKR,OAJIkG,UACKtlC,KAAK4zC,aAGP,KAGT,IAAIG,EAAqB/zC,KAAK4zC,aAC1BpgB,EAAOugB,EAAmBvgB,KAC1BE,EAAOqgB,EAAmBrgB,KAC1BD,EAAOsgB,EAAmBtgB,KAC1BE,EAAOogB,EAAmBpgB,KAQ9B,OANI2R,UACKtlC,KAAK4zC,aAGdtF,GAAkB5pC,IAAI8uB,GAAOG,EAAMF,GAAOC,GAEtCG,GACFA,EAAInvB,IAAI1E,KAAKo/B,UAAgB,KAAGp/B,KAAKo/B,UAAgB,KAAGp/B,KAAKo/B,UAAgB,KAAGp/B,KAAKo/B,UAAgB,MAErGvL,EAAI5lB,KAAKqgC,IAEFza,GAGF7zB,KAAKo/B,UAAUlxB,IAAIogC,KAG5BhhC,EAAOumC,iBAAmB,SAA0B92B,GAClD,IAAK,IAAIhmB,EAAIiJ,KAAK0uC,YAAYz3C,OAAS,EAAGF,GAAK,EAAGA,IAAK,CACrD,IAAIk4C,EAAajvC,KAAK0uC,YAAY33C,GAElCgmB,EAAO+X,SAASma,EAAWzN,eAG7B,OAAOzkB,GAGTzP,EAAOwmC,oBAAsB,SAA6BzsC,EAAW0V,GACnE,IAAK,IAAIhmB,EAAIiJ,KAAK0uC,YAAYz3C,OAAS,EAAGF,GAAK,EAAGA,IAAK,CACrD,IAAIk4C,EAAajvC,KAAK0uC,YAAY33C,GAE9Bk4C,EAAWvF,gBACb3sB,EAAO+X,SAASma,EAAWvF,eAAeriC,IAI9C,OAAO0V,GAGTzP,EAAOomC,eAAiB,WACtB,IAAK,IAAI38C,EAAIiJ,KAAK0uC,YAAYz3C,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAGrD,GAFiBiJ,KAAK0uC,YAAY33C,GAEnBuuC,gBACb,OAAO,EAIX,OAAO,GAGTh4B,EAAOw9B,mBAAqB,SAA4BjX,GACtD,GAAI7zB,KAAK4wC,eACP,OAAO,KAGT5wC,KAAKyzC,oBAEL,IAAI51C,EAAMmC,KAAKo9B,SACXr3B,EAAOlI,EAAI2hC,UACXwU,EAAUn2C,EAAI8zC,SAEb3xC,KAAKo/B,WAAap/B,KAAKo/B,UAAUuU,QAAU5tC,GAC9C/F,KAAKwhC,YAAY,KAAM6M,IAGzB,IAAI2C,EAAWhxC,KAAK2yC,iBAEhB51B,EAAS/c,KAAKo/B,UAAU/J,WAAU,SAAU7xB,GAC9C,OAAO3F,EAAI+hC,uBAAuBp8B,EAAGuC,EAAMirC,EAAWgD,EAAS7F,MAC9Dta,GAECogB,EAAcj0C,KAAKk0C,iBAEvB,GAAID,IAAgBjD,EAAU,CAC5B,IAAImD,EAAUn0C,KAAKo/B,UAAU/J,WAAU,SAAU7xB,GAC/C,OAAO3F,EAAI+hC,uBAAuBp8B,EAAGuC,EAAMkuC,EAAcD,EAAS7F,MACjEE,IAEHtxB,EAAO+X,SAASqf,GAGlB,IAAItX,EAAQ78B,KAAK8B,SAAS2mC,WAE1B,GAA2B,eAAvBzoC,KAAK8B,SAASnD,MAAyBs1C,GAAepX,EAAMtkB,QAAsB,aAAG,CACvF,IAAI67B,EAAep0C,KAAKo/B,UAAU/J,WAAU,SAAU7xB,GACpD,OAAO3F,EAAI+hC,uBAAuBp8B,EAAGuC,EAAM,EAAGooC,MAC7CE,IAEHtxB,EAAO+X,SAASsf,GAalB,OAVIr3B,GACFA,EAAO9O,KAAKjO,KAAK4zC,cAAgB5zC,KAAK8zC,oBAAoB,KAAM,IAAIre,KAGrDz1B,KAAK8B,SAASyW,QAAoB,YAGjDwE,EAAOqY,QAA4B,IAApBrY,EAAOK,YAGjBL,GAGTzP,EAAOsjC,aAAe,WACpB,IAAII,EAAWhxC,KAAK2yC,iBAEhBC,EADM5yC,KAAKo9B,SACMyV,qBACrB,OAAO7B,GAAY4B,GAAcA,EAAa5B,GAGhD1jC,EAAOo8B,eAAiB,WACtB,IACI3jC,EADM/F,KAAKo9B,SACAoC,UAEf,OAAIx/B,KAAK0zC,iBACA1zC,KAAK8zC,oBAAoB,KAAM,IAAIre,KAGvCz1B,KAAKo/B,WAAap/B,KAAKo/B,UAAUuU,QAAU5tC,GAC9C/F,KAAKwhC,YAAY,KAAM8M,IAGlBtuC,KAAK4zC,eAGdtmC,EAAOyyB,UAAY,SAAmBsU,GACpCr0C,KAAKwzC,iBAAgB,SAAUvE,GAC7BA,EAAWlP,UAAUsU,OAIzB/mC,EAAOnN,KAAO,WACPH,KAAK88B,UAOR98B,KAAKmrC,cAELnrC,KAAKwzC,iBAAgB,SAAUvE,GAC7BA,EAAW9uC,WATDH,KAAKyoC,WAEN6L,kBACTt0C,KAAK8hC,SAWXx0B,EAAOlN,KAAO,WACZJ,KAAKwzC,iBAAgB,SAAUvE,GAC7BA,EAAW7uC,WAIfkN,EAAOinC,QAAU,WACfv0C,KAAK4uC,aAAe5uC,KAAK6uC,uBACzB7uC,KAAKmrC,cACL,IAAItO,EAAQ78B,KAAKyoC,WAEjB,GAAK5L,EAAL,CAIA,IAAI0Q,EAAW1Q,EAAMsB,cAEhBoP,GAAaA,EAASvQ,eAI3BuQ,EAASvQ,gBAGX1vB,EAAOknC,cAAgB,WACrBx0C,KAAKmrC,cAELnrC,KAAKy0C,qBAELz0C,KAAK0uC,YAAc1uC,KAAK2uC,sBAG1BrhC,EAAOggB,OAAS,WACdttB,KAAKmrC,cAELnrC,KAAKy0C,sBAGPnnC,EAAOmnC,mBAAqB,WAC1Bz0C,KAAKwzC,iBAAgB,SAAUvE,UACtBA,EAAW5J,QAClB4J,EAAW3hB,mBAGNttB,KAAK0uC,aAGdphC,EAAO69B,YAAc,kBACZnrC,KAAKsvC,qBACLtvC,KAAK00C,oBACL10C,KAAKozC,eACLpzC,KAAKo/B,iBACLp/B,KAAK4zC,oBACL5zC,KAAK0vC,qBACL1vC,KAAK6vC,iBAER7vC,KAAK8B,iBACA9B,KAAK8B,SAAS0qC,GAAqBD,YAI9Cj/B,EAAO2jC,YAAc,WAOnB,OANcjxC,KAAK8B,SAASmvC,gBAEZjxC,KAAK20C,WACnB30C,KAAK4uC,aAAe5uC,KAAK6uC,wBAGtB7uC,KAAK4uC,aAIH5uC,KAAK4uC,aAHH,GAMXthC,EAAOqlC,eAAiB,WACtB,OAAK3yC,KAAK0yC,YAIH1yC,KAAK0yC,YAHH,GAMXplC,EAAO4mC,eAAiB,WACtB,OAAKl0C,KAAKi0C,YAIHj0C,KAAKi0C,YAHH,GAMX3mC,EAAOuhC,qBAAuB,WAC5B,IAAInR,EAAS19B,KAIb,IAFUA,KAAKo9B,SAGb,OAAO,EAGT,IAAI4T,EAAWhxC,KAAK8B,SAASmvC,cAG7B,GAFAjxC,KAAK20C,SAAW3D,GAEXA,EAEH,OADAhxC,KAAK0yC,YAAc1yC,KAAKi0C,YAAc,EAC/B,EAGT,IAAInP,EAAS9kC,KAAK8B,SAASwb,YAE3B,OAAKwnB,EAIDxpC,MAAMC,QAAQy1C,IAChBhxC,KAAK0yC,YAAcz2C,OAAO24C,UAC1B50C,KAAKi0C,YAAch4C,OAAO44C,UACnB7D,EAASnzC,KAAI,SAAUkzC,GAC5B,IAAIt0C,EAAIihC,EAAOoX,cAAchQ,EAAQiM,GAUrC,OARIt0C,EAAIihC,EAAOgV,cACbhV,EAAOgV,YAAcj2C,GAGnBA,EAAIihC,EAAOuW,cACbvW,EAAOuW,YAAcx3C,GAGhBA,OAGTuD,KAAK0yC,YAAc1yC,KAAKi0C,YAAcj0C,KAAK80C,cAAchQ,EAAQkM,GAC1DhxC,KAAK0yC,aArBL,GAyBXplC,EAAOwnC,cAAgB,SAAuBhQ,EAAQkM,GACpD,IAAInzC,EAAMmC,KAAKo9B,SACXp3B,EAAInI,EAAI6oC,YACZ,OAAO7oC,EAAIk3C,gBAAgB/D,EAAU,EAAGhrC,EAAG8+B,GAAQ9oC,EAAID,EAAKi1C,IAG9D1jC,EAAOmmC,kBAAoB,WACzB,IAAIpgB,EAAarzB,KAAK8B,SAASkzC,iBAE3Bh1C,KAAKi1C,WAAaj1C,KAAKi1C,YAAc5hB,EAAW1B,MAClD3xB,KAAKmrC,cAGPnrC,KAAKi1C,UAAY5hB,EAAW1B,MAG9BrkB,EAAOwlC,aAAe,WACpB,IAAIoC,EAAYl1C,KAAK8B,SAAS0qC,GAAqBD,WAEnD,GAAK2I,EAIL,IAAK,IAAI15C,KAAK05C,EACR98C,EAAO88C,EAAW15C,KACpB05C,EAAU15C,GAAG0xC,QAAS,IAK5B5/B,EAAO2lC,YAAc,WACnB,IAAIiC,EAAYl1C,KAAK8B,SAAS0qC,GAAqBD,WAEnD,GAAK2I,EAIL,IAAK,IAAI15C,KAAK05C,EACR98C,EAAO88C,EAAW15C,KACf05C,EAAU15C,GAAG0xC,eACTgI,EAAU15C,KAMlBizC,EAv3BK,CAw3BZlhB,IA0CF,IAAI4nB,GAAgB,IAAI1f,GAEpB2f,GAAoB,SAAUxY,GAGhC,SAASwY,EAAkBtzC,EAAUuzC,GACnC,IAAItlB,EAKJ,OAHAA,EAAQ6M,EAAOtkC,KAAK0H,OAASA,MACvB8B,SAAWA,EACjBiuB,EAAMslB,OAASA,EACRtlB,EARTpjB,GAAeyoC,EAAmBxY,GAWlC,IAAItvB,EAAS8nC,EAAkBj9C,UAoJ/B,OAlJAmV,EAAOgoC,aAAe,SAAsB37C,GAI1C,IAHA,IACI0rC,EADAkQ,EAAav1C,KAAK8B,SAAS6/B,gBAGtB5qC,EAAI,EAAG4E,EAAM45C,EAAWt+C,OAAQF,EAAI4E,MAC3C0pC,EAAUrlC,KAAKq1C,OAASE,EAAWx+C,GAAGwqC,kBAAoBgU,EAAWx+C,GAAGy+C,iBAMpEnQ,IAC6B,IAA3B1rC,EAAGrB,KAAK0H,KAAMqlC,IAR4BtuC,OAepDuW,EAAOw0B,MAAQ,SAAe/kB,GACvB/c,KAAK8B,UAIV9B,KAAKs1C,cAAa,SAAUjQ,GAC1BA,EAAQvD,MAAM/kB,OAIlBzP,EAAOk0B,YAAc,SAAqBn6B,EAAWwsB,GAC/CA,GACFA,EAAInvB,IAAI,KAAM,KAAM,KAAM,MAG5B,IAAIqY,EAAS8W,GAAO,IAAI4B,GAMxB,OAJAz1B,KAAKs1C,cAAa,SAAUjQ,GAC1BtoB,EAASA,EAAO+X,SAASuQ,EAAQ7D,YAAYn6B,EAAW8tC,QAGnDp4B,GAGTzP,EAAOw9B,mBAAqB,WAC1B,IAAI/tB,EAAS,IAAI0Y,GAMjB,OAJAz1B,KAAKs1C,cAAa,SAAUjQ,GAC1BtoB,EAASA,EAAOiY,QAAQqQ,EAAQyF,yBAG3B/tB,GAGTzP,EAAOggB,OAAS,WACd,IAAInlB,EAAOnR,UAEXgJ,KAAKs1C,cAAa,SAAUjQ,GAC1BA,EAAQ/X,OAAOnqB,MAAMkiC,EAASl9B,OAIlCmF,EAAOyyB,UAAY,WACjB,IAAI53B,EAAOnR,UAEXgJ,KAAKs1C,cAAa,SAAUjQ,GAC1BA,EAAQtF,UAAU58B,MAAMkiC,EAASl9B,OAIrCmF,EAAOnN,KAAO,WACZ,IAAIgI,EAAOnR,UAEXgJ,KAAKs1C,cAAa,SAAUjQ,GAC1BA,EAAQllC,KAAKgD,MAAMkiC,EAASl9B,OAIhCmF,EAAOlN,KAAO,WACZ,IAAI+H,EAAOnR,UAEXgJ,KAAKs1C,cAAa,SAAUjQ,GAC1BA,EAAQjlC,KAAK+C,MAAMkiC,EAASl9B,OAIhCmF,EAAOinC,QAAU,WACf,IAAIpsC,EAAOnR,UAEXgJ,KAAKs1C,cAAa,SAAUjQ,GAC1BA,EAAQkP,QAAQpxC,MAAMkiC,EAASl9B,OAInCmF,EAAOknC,cAAgB,WACrB,IAAIrsC,EAAOnR,UAEXgJ,KAAKs1C,cAAa,SAAUjQ,GAC1BA,EAAQmP,cAAcrxC,MAAMkiC,EAASl9B,OAIzCmF,EAAO+hC,SAAW,WAChB,IAAI3zC,GAAS,EAWb,OATAsE,KAAKs1C,cAAa,SAAUjQ,GAC1B,OAAIA,EAAQgK,aACV3zC,GAAS,GACF,MAMJA,GAGT4R,EAAOqlC,eAAiB,WACtB,IAAI8C,GAAQ,EACR/5C,EAAS,EAWb,OATAsE,KAAKs1C,cAAa,SAAUjQ,GAC1B,IAAI0L,EAAM1L,EAAQsN,kBAEd8C,GAAS1E,EAAMr1C,KACjB+5C,GAAQ,EACR/5C,EAASq1C,MAINr1C,GAGT4R,EAAO4mC,eAAiB,WACtB,IAAIx4C,EAAS,EAUb,OARAsE,KAAKs1C,cAAa,SAAUjQ,GAC1B,IAAI0L,EAAM1L,EAAQ6O,iBAEdnD,EAAMr1C,IACRA,EAASq1C,MAINr1C,GAGF05C,EAhKe,CAiKtB7nB,IAEEmoB,GAA0B,CAC5B,YAAa,CACX,YAAe,WAIb,IAHA,IAAIC,EAAc,GACdh9C,EAAI,SAAcH,KAAKC,GAElB1B,EAAI,EAAGA,EAAI,GAAIA,IACtB4+C,EAAY5+C,GAAK4B,GAAK,IAAMH,KAAKoL,IAAI,EAAG7M,IAG1C,OAAO4+C,EARM,GAUf,WAAc,CACZ,IAAO,QAAUn9C,KAAKC,GACtB,MAAS,QAAUD,KAAKC,GACxB,QAAW,QAAUD,KAAKC,GAC1B,MAAS,QAAUD,KAAKC,KAG5B,YAAa,CACX,WAAc,CACZ,IAAO,GACP,MAAS,IACT,QAAW,GACX,MAAS,KAEX,YAAe,WAGb,IAFA,IAAIk9C,EAAc,GAET5+C,EAAI,EAAGA,EAAI,GAAIA,IACtB4+C,EAAY5+C,GAAK,KAAwB,IAAjByB,KAAKoL,IAAI,EAAG7M,IAGtC,OAAO4+C,EAPM,IAUjB,MAAS,CACP,YAAe,WAIb,IAHA,IAAI5wC,EAAMvM,KAAKoL,IAAI,EAAG,IAClB+xC,EAAc,GAET5+C,EAAI,EAAGA,EAAI,GAAIA,IACtB4+C,EAAY5+C,GAAKgO,EACjBA,GAAO,GAGT,OAAO4wC,EATM,GAWf,WAAc,CACZ,IAAO,SACP,MAAS,SACT,QAAW,SACX,MAAS,WAGb,SAAY,CACV,YAAe,WAIb,IAHA,IAAI5wC,EAAMvM,KAAKoL,IAAI,EAAG,GAClB+xC,EAAc,GAET5+C,EAAI,EAAGA,EAAI,GAAIA,IACtB4+C,EAAY5+C,GAAKgO,EACjBA,GAAO,GAGT,OAAO4wC,EATM,GAWf,WAAc,CACZ,IAAO,IACP,MAAS,IACT,QAAW,IACX,MAAS,OAIfD,GAAwB,aAAeA,GAAwB,aAE/D,IAAIE,GAAmB,WACrB,SAASA,EAAiBr9B,QACR,IAAZA,IACFA,EAAU,IAGZvY,KAAKuY,QAAUA,EAEfvY,KAAK61C,kBAGPD,EAAiBE,sBAAwB,SAA+BC,GACtE,IAAKA,EACH,OAAO,KAGT,GAAIp+C,EAASo+C,GACX,OAAOA,EAKT,IAAK,IAAIv6C,KAFTu6C,GAAWA,EAAU,IAAI3sC,cAEXgzB,GACZ,GAAIhkC,EAAOgkC,GAAa5gC,GAAI,CAC1B,IAAIm2B,EAAOyK,GAAY5gC,GAAS,KAEhC,GAAIm2B,GAAQA,EAAKvoB,gBAAkB2sC,EACjC,OAAO3Z,GAAY5gC,GAKzB,OAAO,MAGTo6C,EAAiB/mC,OAAS,SAAgBmnC,EAAKC,GAC7C,IAAKD,IAAQC,EACX,OAAO,EACF,IAAKD,IAAQC,EAClB,OAAO,EAGT,GAAID,EAAI3iB,aAAe4iB,EAAI5iB,WACzB,OAAO,EAGT,IAAI4R,EAAK+Q,EAAIE,WACThR,EAAK+Q,EAAIC,WAEb,GAAIjR,IAAOC,IAAOD,GAAMC,EACtB,OAAO,EAGT,GAAID,GAAMC,IACJD,EAAG1vB,MAAQ2vB,EAAG3vB,KAAO0vB,EAAGkR,SAAWjR,EAAGiR,QAAUlR,EAAG5jC,OAAS6jC,EAAG7jC,MAAQ4jC,EAAG3jC,QAAU4jC,EAAG5jC,OACzF,OAAO,EAIX,IAAI80C,EAAKJ,EAAIL,YACTU,EAAKJ,EAAIN,YAEb,GAAIS,GAAMC,EAAI,CACZ,GAAID,EAAGn/C,SAAWo/C,EAAGp/C,OACnB,OAAO,EAGT,IAAK,IAAIF,EAAI,EAAGA,EAAIq/C,EAAGn/C,OAAQF,IAC7B,GAAIq/C,EAAGr/C,KAAOs/C,EAAGt/C,GACf,OAAO,EAKb,OAAO,GAGT,IAAIuW,EAASsoC,EAAiBz9C,UA0J9B,OAxJAmV,EAAOuoC,gBAAkB,WACvB,IAAIxiB,EAAarzB,KAAKuY,QAAoB,WAQ1C,KALE8a,EADEA,EACWuiB,EAAiBE,sBAAsBziB,GAEvC8I,IAIb,MAAM,IAAIn+B,MAAM,gEAGlBq1B,EAAax8B,EAAO,GAAIm/B,GAAQ3C,IAEhBgE,eACdxgC,EAAOw8B,EAAY6G,GAASN,SAG9B55B,KAAKs2C,YAAcjjB,EACnB,IAAIkjB,EACAZ,EAAc31C,KAAKuY,QAAqB,YAE5C,IAAKo9B,IACCtiB,EAAiB,OACnBkjB,EAAoBb,GAAwBriB,EAAiB,SAG3DsiB,EAAcY,EAA+B,YAC7Cv2C,KAAKw2C,OAAgC,aAAvBnjB,EAAiB,OAI9BsiB,GACH,MAAM,IAAI33C,MAAM,8DAIpBgC,KAAKy2C,aAAed,EACpB,IAAIO,EAAal2C,KAAKuY,QAAoB,WAE1C,IAAK29B,IACC7iB,EAAiB,OACnBkjB,EAAoBb,GAAwBriB,EAAiB,SAG3D6iB,EAAaK,EAA8B,aAI1CL,GACH,MAAM,IAAIl4C,MAAM,+DAcpB,GAVK5G,EAAM8+C,EAAiB,OAG1Bl2C,KAAK02C,YAAc,IAAIzjB,GAAOijB,GAC9BA,EAAiB,KAAIA,EAAiB,KACtCA,EAAkB,MAAIA,EAAiB,KACvCA,EAAgB,IAAIA,EAAiB,KACrCA,EAAmB,OAAIA,EAAiB,MANxCl2C,KAAK02C,YAAc,IAAIzjB,GAAO,IAAIjC,GAAWklB,EAAiB,KAAGA,EAAgB,KAAI,IAAIllB,GAAWklB,EAAkB,MAAGA,EAAmB,SAS1I9+C,EAAM8+C,EAAgB,MAAM9+C,EAAM8+C,EAAmB,SAAM9+C,EAAM8+C,EAAiB,OAAM9+C,EAAM8+C,EAAkB,OAClH,MAAM,IAAIl4C,MAAM,2DAGlBnH,EAAOmJ,KAAK02C,YAAaR,GACzBl2C,KAAKs2C,YAAYJ,WAAaA,EAC9B,IAAIz5C,EAAIy5C,EAAkB,OAAKA,EAAiB,KAAI,GAAK,EACrDx5C,EAAIw5C,EAAgB,KAAKA,EAAmB,QAAK,EAAI,EACzDl2C,KAAK22C,gBAAkB,IAAIhhB,GAAe,CAACl5B,EAAGC,EAAG,EAAG,KAGtD4Q,EAAOspC,eAAiB,WACtB,OAAO52C,KAAKy2C,cAAgB,IAG9BnpC,EAAOiiC,cAAgB,SAAuBxpC,GAC5C,IAAIC,EAAW,EAAPD,EAEJC,EAAI,EACNA,EAAI,EACKA,EAAIhG,KAAKy2C,aAAax/C,OAAS,IACxC+O,EAAIhG,KAAKy2C,aAAax/C,OAAS,GAGjC,IAAI8N,EAAM/E,KAAKy2C,aAAazwC,GAE5B,OAAIA,IAAMD,GAAQA,EAAO,GAAKC,EAAIhG,KAAKy2C,aAAax/C,OAAS,EAEpD8N,GADI/E,KAAKy2C,aAAazwC,EAAI,GACZjB,IAAQgB,EAAOC,GAG/BjB,GAGTuI,EAAOupC,cAAgB,WACrB,OAAO72C,KAAKs2C,aAGdhpC,EAAOwpC,cAAgB,WACrB,OAAO92C,KAAK02C,aAGdppC,EAAOypC,kBAAoB,WACzB,OAAO/2C,KAAK22C,iBAGdrpC,EAAO0pC,WAAa,WAClB,IAAK,IAAIjgD,EAAI,EAAGA,EAAIiJ,KAAKy2C,aAAax/C,OAAQF,IAC5C,IAAKK,EAAM4I,KAAKy2C,aAAa1/C,IAC3B,OAAOA,EAIX,OAAO,GAGTuW,EAAO2pC,WAAa,WAClB,IAAK,IAAIlgD,EAAIiJ,KAAKy2C,aAAax/C,OAAS,EAAGF,GAAK,EAAGA,IACjD,IAAKK,EAAM4I,KAAKy2C,aAAa1/C,IAC3B,OAAOA,EAIX,OAAOiJ,KAAKy2C,aAAax/C,OAAS,GAGpCqW,EAAO4pC,iBAAmB,WACxB,OAAOn7C,EAAKiE,KAAKy2C,aAAaz2C,KAAKg3C,cAAgBh3C,KAAKy2C,aAAaz2C,KAAKi3C,gBAG5E3pC,EAAO2B,OAAS,WAcd,OAbKjP,KAAK+B,OACR/B,KAAK+B,KAAO,CACV,YAAe/B,KAAKy2C,aACpB,WAAc,CACZ,IAAOz2C,KAAK02C,YAAYnhC,IACxB,KAAQvV,KAAK02C,YAAYr1C,KACzB,OAAUrB,KAAK02C,YAAYP,OAC3B,MAASn2C,KAAK02C,YAAYp1C,OAE5B,WAActB,KAAKs2C,YAAY3kB,OAI5B3xB,KAAK+B,MAGP6zC,EAvOc,GAmPnBuB,GAAW,SAAUC,GAGvB,SAASD,EAAS5+B,GAChB,IAAIwX,EAEAsnB,EAAOxgD,EAAO,GAAI0hB,GAClBnS,EAASixC,EAAa,OACtB9lB,EAAa8lB,EAAiB,WAC9Bj9C,EAAKi9C,EAAS,GAkBlB,cAjBOA,EAAa,cACbA,EAAS,UACTA,EAAiB,WACxBtnB,EAAQqnB,EAAU9+C,KAAK0H,KAAMq3C,IAASr3C,KAElCoG,GACF2pB,EAAMunB,UAAUlxC,GAGdmrB,GACFxB,EAAMwnB,cAAchmB,GAGjBn6B,EAAMgD,IACT21B,EAAMynB,MAAMp9C,GAGP21B,EA1BTpjB,GAAewqC,EAAUC,GA6BzB,IAAI9pC,EAAS6pC,EAASh/C,UAk2BtB,OAh2BAmV,EAAOmqC,mBAAqB,WAC1B,GAAkB,uBAAdz3C,KAAKrB,KAA+B,CACtC,IAAI42C,EAAav1C,KAAK2hC,gBAEtB,OAAK4T,EAAWt+C,OAITs+C,EAAW,GAAGkC,qBAHZ,KAMX,IAAIvmB,EAAclxB,KAAK03C,iBAEvB,IAAKp8C,MAAMC,QAAQ21B,GACjB,OAAOA,EAGT,GACEA,EAAcA,EAAY,SACnB51B,MAAMC,QAAQ21B,IAAgBA,EAAYj6B,OAAS,GAE5D,OAAOi6B,GAGT5jB,EAAOqqC,kBAAoB,WACzB,GAAkB,uBAAd33C,KAAKrB,KAA+B,CACtC,IAAI42C,EAAav1C,KAAK2hC,gBAEtB,OAAK4T,EAAWt+C,OAITs+C,EAAWA,EAAWt+C,OAAS,GAAG0gD,oBAHhC,KAMX,IAAIzmB,EAAclxB,KAAK03C,iBAEvB,IAAKp8C,MAAMC,QAAQ21B,GACjB,OAAOA,EAGT,GACEA,EAAcA,EAAYA,EAAYj6B,OAAS,SACxCqE,MAAMC,QAAQ21B,IAAgBA,EAAYj6B,OAAS,GAE5D,OAAOi6B,GAGT5jB,EAAOsqC,MAAQ,SAAe/a,EAAOgb,GAEnC,OADAhb,EAAMib,YAAY93C,KAAM63C,GACjB73C,MAGTsN,EAAOm7B,SAAW,WAChB,OAAKzoC,KAAK+3C,OAIH/3C,KAAK+3C,OAHH,MAMXzqC,EAAO8vB,OAAS,WACd,OAAKp9B,KAAK+3C,OAIH/3C,KAAK+3C,OAAO3a,SAHV,MAMX9vB,EAAO41B,MAAQ,WACb,OAAOljC,KAAKg4C,KAGd1qC,EAAOkqC,MAAQ,SAAep9C,GAC5B,IAAI69C,EAAQj4C,KAAKkjC,QAQjB,OAPAljC,KAAKg4C,IAAM59C,EAEX4F,KAAKk4C,WAAW,WAAY,CAC1B,IAAOD,EACP,IAAO79C,IAGF4F,MAGTsN,EAAO24B,cAAgB,WACrB,OAAKjmC,KAAKuxB,WAQHvxB,KAAKuxB,WAPNvxB,KAAKm4C,aACAn4C,KAAKm4C,aAAalS,gBAGpB,MAMX34B,EAAOiqC,cAAgB,SAAuBhmB,GAC5C,IAAImQ,EAAM1hC,KAAKuxB,WAUf,OATAvxB,KAAKuxB,WAAa55B,EAAS45B,GAAc16B,EAAO,GAAI06B,GAAcA,EAElEvxB,KAAKo4C,WAELp4C,KAAKk4C,WAAW,mBAAoB,CAClC,IAAOxW,EACP,IAAOnQ,IAGFvxB,MAGTsN,EAAO6hC,QAAU,WACf,OAAOnvC,KAAKrB,MAGd2O,EAAOyhC,UAAY,WACjB,IAAIlpC,EAAI7F,KAAK8H,QAEb,OAAIjC,EACGvK,MAAMC,QAAQsK,GAGVoC,GAAapC,GAFbhP,EAAO,GAAIgP,GAMf,MAGTyH,EAAOgqC,UAAY,SAAmBlxC,GAGpC,OAFApG,KAAK8H,QAAU9H,KAAKq4C,eAAejyC,GACnCpG,KAAKs4C,kBACEt4C,MAGTsN,EAAOirC,aAAe,SAAsBj0C,GAC1C,IAAKA,EACH,OAAOtE,KAGT,IAAI6F,EAAI7F,KAAKw4C,aASb,OANE3yC,EAAIoC,GADFpC,GAGe7F,KAAKwyC,qBAFFluC,GAKtBtE,KAAKy4C,uBAAyBn0C,EACvBtE,KAAKs3C,UAAUzxC,IAGxByH,EAAOgQ,UAAY,WACjB,OAAOtd,KAAK04C,eAAe14C,KAAK24C,iBAGlCrrC,EAAOsrC,UAAY,WACjB,IAAIC,EAAS74C,KAAK+rC,gBAEd1Y,EAAarzB,KAAKg1C,iBAEtB,GAAI6D,GAAUxlB,EAAY,CACxB,IAAIx2B,EAAMw2B,EAAWD,UAAU,IAAIpC,GAAW6nB,EAAa,KAAGA,EAAa,OACvE/7C,EAAMu2B,EAAWD,UAAU,IAAIpC,GAAW6nB,EAAa,KAAGA,EAAa,OAC3E,OAAO,IAAI5lB,GAAOp2B,EAAKC,EAAKu2B,GAE5B,OAAOrzB,KAAK84C,eAAe94C,KAAK24C,iBAIpCrrC,EAAOw9B,mBAAqB,SAA4BjX,GACtD,IAAIwR,EAAUrlC,KAAKw1C,cAEnB,OAAOnQ,EAAUA,EAAQyF,mBAAmBjX,GAAO,MAGrDvmB,EAAOsnB,QAAU,WACf,IAAI7X,EAAS/c,KAAK8qC,qBAClB,OAAO/tB,EAASA,EAAO6X,UAAY,MAGrCtnB,EAAOyrC,cAAgB,SAAuBpZ,EAAgBhjC,GAC5D,IAAKqD,KAAKo9B,SACR,MAAM,IAAIp/B,MAAM,6EAOlB,OAJI2hC,aAA0B3O,KAC5B2O,EAAiB3/B,KAAKo9B,SAAS4b,sBAAsBrZ,IAGhD3/B,KAAKi5C,eAAetZ,EAAgBhjC,IAG7C2Q,EAAO2rC,eAAiB,SAAwBtZ,EAAgBhjC,GAC9D,IAAI0oC,EAAUrlC,KAAKw1C,cAEnB,QAAKnQ,IAIDjuC,EAAMuF,IAAMqD,KAAKk5C,oBACnBv8C,EAAIqD,KAAKk5C,qBAGJ7T,EAAQkO,QAAQ5T,EAAgBhjC,KAGzC2Q,EAAOnN,KAAO,WAGZ,GAFAH,KAAKuY,QAAiB,SAAI,EAEtBvY,KAAKo9B,SAAU,CACjB,IAAIiI,EAAUrlC,KAAKw1C,cAEfnQ,GACFA,EAAQllC,OAGVH,KAAKk4C,WAAW,QAGlB,OAAOl4C,MAGTsN,EAAOlN,KAAO,WAGZ,GAFAJ,KAAKuY,QAAiB,SAAI,EAEtBvY,KAAKo9B,SAAU,CACjBp9B,KAAKm5C,SAEL,IAAI9T,EAAUrlC,KAAKw1C,cAEfnQ,GACFA,EAAQjlC,OAGVJ,KAAKk4C,WAAW,QAGlB,OAAOl4C,MAGTsN,EAAO+vB,UAAY,WACjB,IAAKr9B,KAAKuY,QAAiB,QACzB,OAAO,EAGT,IAAInS,EAASpG,KAAKwyC,qBAElB,IAAKpsC,EACH,OAAO,EAGT,GAAI9K,MAAMC,QAAQ6K,GAAS,CACzB,IAAKA,EAAOnP,OACV,OAAO,EAGT,IAAK,IAAIF,EAAI,EAAGiO,EAAIoB,EAAOnP,OAAQF,EAAIiO,EAAGjO,IACxC,GAAIK,EAAMgP,EAAOrP,GAAY,UAAMqP,EAAOrP,GAAY,QAAI,EACxD,OAAO,EAIX,OAAO,EAEP,OAAOK,EAAMgP,EAAgB,UAAM9O,EAAS8O,EAAgB,UAAMA,EAAgB,QAAI,GAI1FkH,EAAO8rC,UAAY,WACjB,OAAOp5C,KAAKuY,QAAgB,QAAK,GAGnCjL,EAAOyyB,UAAY,SAAmBsZ,GACpC,IAAI3X,EAAM1hC,KAAKuY,QAAgB,OAQ/B,OAPAvY,KAAKuY,QAAgB,OAAI8gC,EAEzBr5C,KAAKk4C,WAAW,eAAgB,CAC9B,IAAOxW,EACP,IAAO2X,IAGFr5C,MAGTsN,EAAOgsC,kBAAoB,SAA2BD,GAEpD,OADAr5C,KAAKuY,QAAgB,OAAI8gC,EAClBr5C,MAGTsN,EAAOisC,aAAe,WACpB,IAAI1c,EAAQ78B,KAAKyoC,WAEjB,IAAK5L,IAAUA,EAAM2c,gBACnB,OAAOx5C,KAGT,IAAIy5C,EAAO5c,EAAM2c,kBAEjB,OADAx5C,KAAK+/B,UAAU0Z,EAAO,GACfz5C,MAGTsN,EAAOosC,YAAc,WACnB,IAAI7c,EAAQ78B,KAAKyoC,WAEjB,IAAK5L,IAAUA,EAAM8c,gBACnB,OAAO35C,KAGT,IAAI45C,EAAU/c,EAAM8c,kBAEpB,OADA35C,KAAK+/B,UAAU6Z,EAAU,GAClB55C,MAGTsN,EAAOqR,UAAY,SAAmB3iB,EAAGoR,GACvC,GAAIhW,EAAM4E,GACR,OAAOgE,KAGT,IAAIqV,EAAS,IAAI2b,GAAWh1B,EAAGoR,GAE/B,GAAiB,IAAbiI,EAAOrZ,GAAwB,IAAbqZ,EAAOjI,EAC3B,OAAOpN,KAGT,IAAIkxB,EAAclxB,KAAK03C,iBAEvB,GAAIxmB,EACF,GAAI51B,MAAMC,QAAQ21B,GAAc,CAC9B,IAAI2oB,EAAa1+C,EAAa+1B,GAAa,SAAUC,GACnD,OAAOA,EAAMjjB,IAAImH,MAEnBrV,KAAK85C,eAAeD,QAEpB75C,KAAK85C,eAAe5oB,EAAYhjB,IAAImH,IAIxC,OAAOrV,MAGTsN,EAAO3N,MAAQ,SAAkBC,EAAUC,EAAOC,EAAIzE,GACpD,OAAOsE,EAAMrH,KAAK0H,KAAMJ,EAAUC,EAAOC,EAAIzE,IAG/CiS,EAAOU,KAAO,WACZ,IAAIjM,EAAO/B,KAAKiP,SACZ8qC,EAAM5C,EAAS6C,SAASj4C,GAE5B,OADAg4C,EAAIxhC,QAAiB,SAAI,EAClBwhC,GAGTzsC,EAAOggB,OAAS,WAGd,OAFYttB,KAAKyoC,YAMjBzoC,KAAKk4C,WAAW,eAEhBl4C,KAAKi6C,UAELj6C,KAAKk4C,WAAW,aAEhBl4C,KAAKk4C,WAAW,UAETl4C,MAXEA,MAcXsN,EAAO4sC,kBAAoB,WAGzB,OAFYl6C,KAAKm6C,0BAKnB7sC,EAAO8sC,UAAY,SAAmB/C,GAC/BA,IACHA,EAAO,IAGT,IAAIpxC,EAAU,CACZ,KAAQ,UACR,SAAY,MAGd,GAAI7O,EAAMigD,EAAe,WAAMA,EAAe,SAAG,CAC/C,IAAIgD,EAAUr6C,KAAKm6C,yBAEnBl0C,EAAkB,SAAIo0C,EAGxB,IAMI9oB,EANAn3B,EAAK4F,KAAKkjC,QAad,OAXK9rC,EAAMgD,KACT6L,EAAY,GAAI7L,IAKdhD,EAAMigD,EAAiB,aAAMA,EAAiB,cAChD9lB,EAAavxB,KAAKs6C,qBAGpBr0C,EAAoB,WAAIsrB,EACjBtrB,GAGTqH,EAAO2B,OAAS,SAAgBsJ,GACzBA,IACHA,EAAU,IAGZ,IAAIxW,EAAO/B,KAAKgC,QAAQuW,GAKxB,OADA1hB,EAAOkL,EAFK/B,KAAKu6C,sBAAsBhiC,IAGhCxW,GAGTuL,EAAOktC,UAAY,WACjB,OAAOx6C,KAAKy6C,uBAAuBz6C,KAAK24C,iBAG1CrrC,EAAOotC,QAAU,WACf,OAAO16C,KAAK26C,qBAAqB36C,KAAK24C,iBAGxCrrC,EAAO0C,OAAS,SAAgBH,EAAOmoB,GACrC,GAAkB,uBAAdh4B,KAAKrB,KAKP,OAJiBqB,KAAK2hC,gBACXlkB,SAAQ,SAAUxb,GAC3B,OAAOA,EAAE+N,OAAOH,EAAOmoB,MAElBh4B,KAMPg4B,EAHGA,EAGK,IAAIhH,GAAWgH,GAFfh4B,KAAKsd,YAKf,IAAIs9B,EAAW56C,KAAK24C,eAEhBznB,EAAclxB,KAAK03C,iBAEvB,IAAKp8C,MAAMC,QAAQ21B,GAAc,CAC/B,GAAI8G,EAAMh8B,IAAMk1B,EAAYl1B,GAAKg8B,EAAM5qB,IAAM8jB,EAAY9jB,EAAG,CAC1D,IAAI5J,EAAIo3C,EAAShrC,QAAQshB,EAAa8G,EAAOnoB,GAE7C7P,KAAK85C,eAAet2C,GAGtB,OAAOxD,KAOT,OAJA7E,EAAa+1B,GAAa,SAAU1tB,GAClC,OAAOo3C,EAAShrC,QAAQpM,EAAGw0B,EAAOnoB,MAEpC7P,KAAK85C,eAAe5oB,GACblxB,MAGTsN,EAAOutC,kBAAoB,WACzB,MAAO,CAAC76C,KAAKsd,cAGfhQ,EAAOwtC,aAAe,SAAsBviC,GAC1C,IAAI8+B,EAAOxgD,EAAO,GAAI0hB,GAClBnS,EAASixC,EAAa,OACtB9lB,EAAa8lB,EAAiB,WAC9Bj9C,EAAKi9C,EAAS,UACXA,EAAa,cACbA,EAAS,UACTA,EAAiB,WACxBr3C,KAAKwtB,WAAW6pB,GAEZjxC,GACFpG,KAAKs3C,UAAUlxC,GAGbmrB,GACFvxB,KAAKu3C,cAAchmB,GAGhBn6B,EAAMgD,IACT4F,KAAKw3C,MAAMp9C,IAIfkT,EAAOytC,WAAa,SAAoBle,GACtC,GAAI78B,KAAKyoC,WACP,MAAM,IAAIzqC,MAAM,oEAGlBgC,KAAK+3C,OAASlb,EAEd78B,KAAKg7C,eAGP1tC,EAAO+qC,eAAiB,SAAwBjyC,GAC9C,GAAI9K,MAAMC,QAAQ6K,GAAS,CAGzB,IAFA,IAAI60C,EAAgB,GAEXlkD,EAAI,EAAGA,EAAIqP,EAAOnP,OAAQF,IACjCkkD,EAAcngD,KAAKwM,GAAmBtH,KAAKk7C,oBAAoB90C,EAAOrP,MAGxE,OAAOkkD,EACF,OAAI70C,EAEFkB,GADPlB,EAASpG,KAAKk7C,oBAAoB90C,IAI7B,MAGTkH,EAAO4tC,oBAAsB,SAA6B90C,GACxD,IAAIP,EAAI,GAER,IAAK,IAAI9O,KAAKqP,EACR3P,EAAqBM,IAAMa,EAASwO,EAAOrP,IAC7C8O,EAAE9O,IAAMqP,EAAOrP,GAEf8O,EAAE9O,GAAKqP,EAAOrP,GAIlB,OAAO8O,GAGTyH,EAAOkrC,WAAa,WAClB,OAAOx4C,KAAK8H,SAGdwF,EAAO6tC,iBAAmB,SAA0B/0C,GAIlD,OAHApG,KAAKy4C,uBAAyBryC,EAC9BpG,KAAKo7C,cAAgBp7C,KAAKq4C,eAAejyC,GACzCpG,KAAKs4C,kBACEt4C,MAGTsN,EAAOklC,mBAAqB,WAC1B,OAAIxyC,KAAK8H,QACA9H,KAAK8H,QACH9H,KAAKo7C,cACPp7C,KAAKo7C,cACHp7C,KAAKuY,QAAgB,OACvBvY,KAAKuY,QAAgB,OAGvB,MAGTjL,EAAOy+B,cAAgB,WACrB,IAAIvwC,EAAIwE,KAAKg1C,iBAQb,OANAh1C,KAAKyzC,qBAEAzzC,KAAKq7C,SAAW7/C,IACnBwE,KAAKq7C,QAAUr7C,KAAKs7C,kBAAkB9/C,IAGjCwE,KAAKq7C,SAGd/tC,EAAO2sC,QAAU,WACf,IAAIpd,EAAQ78B,KAAKyoC,WAEZ5L,IAID78B,KAAKu7C,aACPv7C,KAAKu7C,YAAYC,SAGnBx7C,KAAKsvB,iBAELtvB,KAAKy7C,cAELz7C,KAAK07C,oBAED17C,KAAK27C,aACP37C,KAAK47C,UAGP57C,KAAK67C,iBAED77C,KAAKi/B,UACPj/B,KAAKi/B,WAGHpC,EAAMif,kBACRjf,EAAMif,iBAAiB97C,aAGlBA,KAAK+3C,cACL/3C,KAAK+7C,mBACL/7C,KAAKq7C,UAGd/tC,EAAO0uC,eAAiB,WACtB,OAAOh8C,KAAK+7C,aAGdzuC,EAAO2uC,eAAiB,SAAwB7hD,GAC9C4F,KAAK+7C,YAAc3hD,GAGrBkT,EAAOqrC,aAAe,WACpB,OAAI34C,KAAKg1C,iBACAh1C,KAAKg1C,iBAGPY,GAAiBE,sBAAsB91C,KAAKuY,QAA2B,oBAGhFjL,EAAO0nC,eAAiB,WACtB,IAAIn3C,EAAMmC,KAAKo9B,SAEf,OAAIv/B,EACKA,EAAIg5C,gBAGN,MAGTvpC,EAAOmmC,kBAAoB,WACzB,IAAIpgB,EAAarzB,KAAKg1C,iBAElBh1C,KAAKi1C,WAAa5hB,GAAcrzB,KAAKi1C,YAAc5hB,EAAW1B,MAChE3xB,KAAKk8C,mBAGPl8C,KAAKi1C,UAAY5hB,EAAaA,EAAW1B,KAAO3xB,KAAKi1C,WAGvD3nC,EAAO6uC,sBAAwB,WAG7B,OAAOp1C,GAFM/G,KAAKwyC,uBAKpBllC,EAAOkoC,YAAc,WACnB,IAAI3Y,EAAQ78B,KAAKyoC,WAEjB,IAAKzoC,KAAKo8C,UAAYvf,EACpB,IAAsD,IAAlDzmC,EAA0B6E,QAAQ+E,KAAKrB,OACzC,GAAIk+B,EAAMhlC,YAAYwkD,0BAA2B,CAC/C,IAAIrtB,EAAQ6N,EAAMhlC,YAAYwkD,4BAC9Br8C,KAAKo8C,SAAW,IAAIptB,EAAMhvB,YAEvB,GAAI68B,EAAMhlC,YAAYykD,gBAAiB,CAC5C,IAAInpB,EAAS0J,EAAMhlC,YAAYykD,kBAE/Bt8C,KAAKo8C,SAAW,IAAIjpB,EAAOnzB,MAI/B,OAAOA,KAAKo8C,UAGd9uC,EAAOi0B,gBAAkB,WACvB,OAAIvhC,KAAKu8C,eAITv8C,KAAKu8C,aAAev8C,KAAK2hC,eAAiB3hC,KAAK2hC,gBAAkB,IAAIyT,GAAkBp1C,MAAM,GAAQ,IAAIyuC,GAAQzuC,OAHxGA,KAAKu8C,cAOhBjvC,EAAOuuC,eAAiB,WAClB77C,KAAKo8C,UACPp8C,KAAKo8C,SAAS9uB,gBAGTttB,KAAKo8C,UAGd9uC,EAAOkvC,OAAS,SAAgBz/B,GAC1B/c,KAAKo8C,UACPp8C,KAAKo8C,SAASta,MAAM/kB,IAIxBzP,EAAO0tC,YAAc,kBACZh7C,KAAKq7C,SAGd/tC,EAAO4uC,iBAAmB,kBACjBl8C,KAAKq7C,SAGd/tC,EAAO8qC,SAAW,WACZp4C,KAAKo8C,UACPp8C,KAAKo8C,SAAS7H,WAIlBjnC,EAAO6rC,OAAS,WACdn5C,KAAKy8C,YACLz8C,KAAK08C,mBAGPpvC,EAAOqvC,eAAiB,WACtB38C,KAAKg7C,cAELh7C,KAAKo4C,WAELp4C,KAAKk4C,WAAW,gBAGlB5qC,EAAOsvC,kBAAoB,WACzB58C,KAAKg7C,cAELh7C,KAAKo4C,WAELp4C,KAAKk4C,WAAW,mBAGlB5qC,EAAOgrC,gBAAkB,WACnBt4C,KAAKo8C,UACPp8C,KAAKo8C,SAAS5H,gBAGhB,IAAIzgC,EAAI,GAEJ/T,KAAKy4C,yBACP1kC,EAAEwd,WAAa16B,EAAO,GAAImJ,KAAKy4C,+BACxBz4C,KAAKy4C,wBAGdz4C,KAAKk4C,WAAW,eAAgBnkC,IAGlCzG,EAAOygB,SAAW,SAAkBD,GAClC,IAAIyD,EAEAzD,EAAiB,aACnByD,EAAazD,EAAiB,kBACvBA,EAAiB,YAG1B,IAAI+uB,GAAc,EAElB,IAAK,IAAIrhD,KAAKsyB,EACZ,GAAIA,EAAK71B,eAAeuD,GAAI,CAC1B,IAAIshD,EAASthD,EAAElC,MAAM,EAAG,GAExB,GAAe,UAAXwjD,GAAiC,UAAXA,EAAoB,CAC5CD,GAAc,EACd,OAKFtrB,GACFvxB,KAAKu3C,cAAchmB,GAEnBvxB,KAAKo4C,YACIyE,GACT78C,KAAKo4C,YAIT9qC,EAAOyvC,WAAa,SAAoBj7C,GAClCA,IACF9B,KAAKg9C,QAAUl7C,IAInBwL,EAAO6qC,WAAa,WAClB,OAAOn4C,KAAKg9C,SAGd1vC,EAAO4qC,WAAa,SAAoB+E,EAAWtwB,GAC7C3sB,KAAKyoC,YAAczoC,KAAKyoC,WAAWyU,mBAChCvwB,IACHA,EAAQ,IAGVA,EAAY,KAAIswB,EAChBtwB,EAAc,OAAI3sB,KAElBA,KAAKyoC,WAAWyU,iBAAiBvwB,IAGnC3sB,KAAK8rB,KAAKmxB,EAAWtwB,IAGvBrf,EAAOtL,QAAU,SAAiBuW,GAChC,MAAO,CACL,QAAWvY,KAAKo6C,UAAU7hC,KAI9BjL,EAAOitC,sBAAwB,SAA+BhiC,GAC5D,IAAIxW,EAAO,GAgBX,OAdI3K,EAAMmhB,EAAiB,UAAMA,EAAiB,WAChDxW,EAAc,QAAI/B,KAAK6tB,WAGrBz2B,EAAMmhB,EAAgB,SAAMA,EAAgB,UAC9CxW,EAAa,OAAI/B,KAAK+uC,cAGpB33C,EAAMmhB,EAAoB,aAAMA,EAAoB,aAClDvY,KAAKm9C,kBACPp7C,EAAiB,WAAI/B,KAAKm9C,iBAIvBp7C,GAGTuL,EAAO6sC,uBAAyB,WAC9B,IAAIv5B,EAAS5gB,KAAK03C,iBACdxmB,EAAcF,GAAWC,eAAerQ,GAC5C,MAAO,CACL,KAAQ5gB,KAAKmvC,UACb,YAAeje,IAInB5jB,EAAOgtC,kBAAoB,WACzB,IAAI/oB,EAAa,KACb6rB,EAAgBp9C,KAAKimC,gBAUzB,OARK7uC,EAAMgmD,KAEP7rB,EADE55B,EAASylD,GACEvmD,EAAO,GAAIumD,GAEXA,GAIV7rB,GAGTjkB,EAAO2jC,YAAc,WACnB,IAAIpU,EAAQ78B,KAAKyoC,WAEjB,IAAK5L,EACH,OAAO,EAGT,IAAIwgB,EAAYxgB,EAAMtkB,QAClBgZ,EAAavxB,KAAKimC,gBAClB+K,EAAWqM,EAA0B,gBAAI9rB,EAAaA,EAAW8rB,EAA4B,kBAAS,EACtGC,EAAgBzgB,EAAMoU,YAAcpU,EAAMoU,cAAgB,EAE9D,OAAI31C,MAAMC,QAAQy1C,GACTA,EAASnzC,KAAI,SAAUkzC,GAC5B,OAAOA,EAAMuM,KAIVtM,EAAWsM,GAGbnG,EAh4BM,CAi4BbxoB,GAASpE,GAAU0E,GAAY1B,OAEjC4pB,GAAS1oB,aA54BK,CACZ,GAAM,KACN,SAAW,EACX,aAAe,EACf,UAAY,EACZ,OAAU,KACV,kBAAqB,cAu4BvB,IAAI8uB,GAAY,CACd,YAAe,KACf,QAAW,KACX,QAAW,KACX,SAAW,EACX,QAAW,EACX,yBAA4B,KAC5B,SAAY,SACZ,aAAgB,OAChB,UAAa,KACb,qBAAuB,EACvB,sBAAwB,EACxB,uBAAyB,EACzB,WACU7wC,GAAU1C,QAIlBwzC,GAAQ,SAAUpG,GAGpB,SAASoG,EAAMpjD,EAAIme,GACjB,IAAIwX,EAEA9kB,EAoBJ,OAlBIsN,IACFtN,EAASsN,EAAQtN,cACVsN,EAAQtN,SAGjB8kB,EAAQqnB,EAAU9+C,KAAK0H,KAAMuY,IAAYvY,MACnC2gC,QAAU11B,EAEhB8kB,EAAMynB,MAAMp9C,GAERme,IACFwX,EAAMgQ,UAAUxnB,EAAQ8gC,QAEpB9gC,EAAQ6oB,MACVrR,EAAM0tB,QAAQtG,GAAS6C,SAASzhC,EAAQ6oB,QAIrCrR,EAzBTpjB,GAAe6wC,EAAOpG,GA4BtB,IAAI9pC,EAASkwC,EAAMrlD,UA8ZnB,OA5ZAmV,EAAOowC,KAAO,WACZ,IAAK19C,KAAKo9B,SACR,OAAOp9B,KAGT,GAAIA,KAAK29C,SAAU,CACjB39C,KAAK49C,gBAEL,IAAIvE,EAASr5C,KAAKo5C,YAEbhiD,EAAMiiD,KACTr5C,KAAK69C,UAAU9d,UAAUsZ,GAEpBr5C,KAAKs0C,kBACRt0C,KAAK69C,UAAU5gB,UAInBj9B,KAAK89C,YAGP,OAAO99C,MAGTsN,EAAO41B,MAAQ,WACb,OAAOljC,KAAKg4C,KAGd1qC,EAAOkqC,MAAQ,SAAep9C,GAC5B,IAAIsnC,EAAM1hC,KAAKg4C,IAWf,OATK5gD,EAAMgD,KACTA,GAAU,IAGZ4F,KAAKg4C,IAAM59C,EACX4F,KAAK8rB,KAAK,WAAY,CACpB,IAAO4V,EACP,IAAOtnC,IAEF4F,MAGTsN,EAAOsqC,MAAQ,SAAe/5C,GAE5B,OADAA,EAAIkgD,SAAS/9C,MACNA,MAGTsN,EAAOyyB,UAAY,SAAmBsZ,GAiBpC,OAhBAr5C,KAAKg+C,QAAU3E,EAEXjiD,EAAMiiD,UACDr5C,KAAKuY,QAAgB,OAE5BvY,KAAKuY,QAAQ8gC,OAASA,EAGpBr5C,KAAKnC,KACPmC,KAAKnC,IAAIogD,sBAGPj+C,KAAK69C,WACP79C,KAAK69C,UAAU9d,UAAUsZ,GAGpBr5C,MAGTsN,EAAO8rC,UAAY,WACjB,OAAOp5C,KAAKg+C,SAAW,GAGzB1wC,EAAO0pC,WAAa,WAClB,IAAIn5C,EAAMmC,KAAKo9B,SACX8gB,EAAUl+C,KAAKuY,QAAiB,QACpC,OAAO1a,EAAMrF,KAAKsE,IAAIe,EAAIm5C,aAAckH,GAAW,GAAKA,GAG1D5wC,EAAO2pC,WAAa,WAClB,IAAIp5C,EAAMmC,KAAKo9B,SACX4K,EAAUhoC,KAAKuY,QAAiB,QACpC,OAAO1a,EAAMrF,KAAKqE,IAAIgB,EAAIo5C,aAAc7/C,EAAM4wC,GAAW/L,IAAW+L,GAAWA,GAGjF16B,EAAO6wC,WAAa,WAClB,OAAOn+C,KAAKuY,QAAiB,SAG/BjL,EAAO8wC,WAAa,SAAoB39C,GAEtC,OADAT,KAAK6tB,OAAO,UAAWptB,GAChBT,MAGTsN,EAAOgnC,eAAiB,WACtB,IAAI/G,EAAWvtC,KAAKyyC,eAEpB,OAAOlF,GAAYA,aAAoB5Q,IAGzCrvB,EAAO8vB,OAAS,WACd,OAAIp9B,KAAKnC,IACAmC,KAAKnC,IAGP,MAGTyP,EAAOupC,cAAgB,WACrB,IAAIh5C,EAAMmC,KAAKo9B,SACf,OAAOv/B,EAAMA,EAAIg5C,gBAAkB,MAGrCvpC,EAAOisC,aAAe,WACpB,IAAI8E,EAASr+C,KAAKs+C,gBAElB,IAAKD,EAAOpnD,OACV,OAAO+I,KAGT,IAAIu+C,EAAWF,EAAOA,EAAOpnD,OAAS,GAEtC,GAAsB,IAAlBonD,EAAOpnD,QAAgBsnD,IAAav+C,KACtC,OAAOA,KAGT,IAAIlD,EAAMyhD,EAASnF,YAEnB,OADAp5C,KAAK+/B,UAAUjjC,EAAM,GACdkD,MAGTsN,EAAOosC,YAAc,WACnB,IAAI2E,EAASr+C,KAAKs+C,gBAElB,IAAKD,EAAOpnD,OACV,OAAO+I,KAGT,IAAIw+C,EAAcH,EAAO,GAEzB,GAAsB,IAAlBA,EAAOpnD,QAAgBunD,IAAgBx+C,KACzC,OAAOA,KAGT,IAAInD,EAAM2hD,EAAYpF,YAEtB,OADAp5C,KAAK+/B,UAAUljC,EAAM,GACdmD,MAGTsN,EAAOnN,KAAO,WACZ,IAAIu9B,EAAS19B,KAEb,IAAKA,KAAKuY,QAAiB,QAAG,CAC5BvY,KAAKuY,QAAiB,SAAI,EAC1B,IAAIg1B,EAAWvtC,KAAKm+B,cAEhBoP,GACFA,EAASptC,OAGX,IAAItC,EAAMmC,KAAKo9B,SAEXmQ,GAAY1vC,EACdA,EAAIotB,KAAK,aAAa,WACpByS,EAAO5R,KAAK,WAGd9rB,KAAK8rB,KAAK,QAId,OAAO9rB,MAGTsN,EAAOlN,KAAO,WACZ,IAAIq+C,EAASz+C,KAEb,GAAIA,KAAKuY,QAAiB,QAAG,CAC3BvY,KAAKuY,QAAiB,SAAI,EAC1B,IAAIg1B,EAAWvtC,KAAKm+B,cAEhBoP,GACFA,EAASntC,OAGX,IAAIvC,EAAMmC,KAAKo9B,SAEXmQ,GAAY1vC,EACdA,EAAIotB,KAAK,aAAa,WACpBwzB,EAAO3yB,KAAK,WAGd9rB,KAAK8rB,KAAK,QAId,OAAO9rB,MAGTsN,EAAO+vB,UAAY,WACjB,GAAI/lC,EAAS0I,KAAKuY,QAAiB,UAAMvY,KAAKuY,QAAiB,SAAK,EAClE,OAAO,EAGT,IAAI1a,EAAMmC,KAAKo9B,SAEf,GAAIv/B,EAAK,CACP,IAAIkI,EAAOlI,EAAI2hC,UAEf,IAAKpoC,EAAM4I,KAAKuY,QAAiB,UAAMvY,KAAKuY,QAAiB,QAAIxS,IAAS3O,EAAM4I,KAAKuY,QAAiB,UAAMvY,KAAKuY,QAAiB,QAAIxS,EACpI,OAAO,EAQX,OAJI3O,EAAM4I,KAAKuY,QAAiB,WAC9BvY,KAAKuY,QAAiB,SAAI,GAGrBvY,KAAKuY,QAAiB,SAG/BjL,EAAOggB,OAAS,WAKd,OAJIttB,KAAKnC,KACPmC,KAAKnC,IAAI6gD,YAAY1+C,MAGhBA,MAGTsN,EAAO+zB,QAAU,WACf,OAAOrhC,KAAK6hC,OAGdv0B,EAAOmwC,QAAU,SAAiBrc,GAChC,KAAoB,UAAdA,EAAKziC,MAAoByiC,EAAKud,mBAAmC,YAAdvd,EAAKziC,MAAoC,iBAAdyiC,EAAKziC,MACvF,MAAM,IAAIX,MAAM,2FAoBlB,GAjBAojC,EAAK2Z,WAAW/6C,MAEE,UAAdohC,EAAKziC,KACPyiC,EAAKmX,aAAa,CAChB,gBAAmB,mBACnB,kBAAqB,IAGvBnX,EAAKkW,UAAU,CACb,UAAa,mBACb,eAAkB,IAItBt3C,KAAK6hC,MAAQT,EACbphC,KAAKuY,QAAQ6oB,KAAOA,EAAKnyB,UAEpBjP,KAAKo9B,UAAYp9B,KAAKo9B,SAASmB,YAClC,OAAOv+B,KAGT,IAAIutC,EAAWvtC,KAAKyyC,eAMpB,OAJIlF,GAAYA,EAASvQ,aACvBh9B,KAAKyyC,eAAezV,cAGfh9B,MAGTsN,EAAOsxC,WAAa,WAIlB,UAHO5+C,KAAK6hC,aACL7hC,KAAKuY,QAAQ6oB,MAEfphC,KAAKo9B,UAAYp9B,KAAKo9B,SAASmB,YAClC,OAAOv+B,KAGT,IAAIutC,EAAWvtC,KAAKyyC,eAMpB,OAJIlF,GAAYA,EAASvQ,aACvBh9B,KAAKyyC,eAAezV,cAGfh9B,MAGTsN,EAAOqwC,OAAS,WACd,OAAO,GAGTrwC,EAAOwwC,UAAY,aAEnBxwC,EAAOuxC,SAAW,WAChB,QAAS7+C,KAAK8+C,SAGhBxxC,EAAO6wB,YAAc,WACnB,OAAOn+B,KAAKyyC,gBAGdnlC,EAAOygB,SAAW,SAAkBD,GAClC,GAAIx2B,EAASw2B,EAAc,UAAMA,EAAgB,UAAG,CAClD,IAAIyf,EAAWvtC,KAAKm+B,cAEhBoP,GACFA,EAASvQ,gBAKf1vB,EAAO+xB,MAAQ,aAEf/xB,EAAOyxC,iBAAmB,aAE1BzxC,EAAOuzB,eAAiB,aAExBvzB,EAAO2xB,SAAW,aAElB3xB,EAAO0xC,SAAW,SAAkBnhD,EAAKw7C,GAClCx7C,IAILmC,KAAKnC,IAAMA,EAENzG,EAAMiiD,IACTr5C,KAAK+/B,UAAUsZ,GAGjBr5C,KAAKi/C,cAAc,KAAMj/C,MAEzBA,KAAKq/B,QACLr/B,KAAK8rB,KAAK,SAGZxe,EAAOswC,cAAgB,WACrB,IAAIrQ,EAAWvtC,KAAKuY,QAAkB,SAEtC,GAAKvY,KAAKnI,YAAY6kC,iBAAtB,CAIA,IAAI1N,EAAQhvB,KAAKnI,YAAY6kC,iBAAiB6Q,GAE9C,IAAKve,EACH,MAAM,IAAIhxB,MAAM,8BAAgCgC,KAAKkjC,QAAU,KAAOqK,GAGxEvtC,KAAK69C,UAAY,IAAI7uB,EAAMhvB,MAC3BA,KAAK69C,UAAUhhB,MAAQ78B,KAEvBA,KAAK69C,UAAU9d,UAAU//B,KAAKo5C,aAE9Bp5C,KAAKi/C,cAAc,KAAMj/C,KAAK69C,WAE1B79C,KAAK69C,UAAUxe,OACjBr/B,KAAK69C,UAAUxe,QAGjBr/B,KAAK++C,mBACL/+C,KAAK8rB,KAAK,iBAAkB,CAC1B,SAAY9rB,KAAK69C,cAIrBvwC,EAAO4xC,UAAY,WACjBl/C,KAAK8+C,SAAU,EACf9+C,KAAKi/B,WAELj/B,KAAKi/C,cAAc,MAAOj/C,MAEtBA,KAAK69C,YACP79C,KAAKi/C,cAAc,MAAOj/C,KAAK69C,WAE/B79C,KAAK69C,UAAUvwB,gBAERttB,KAAK69C,kBAGP79C,KAAKnC,KAGdyP,EAAO2xC,cAAgB,SAAuB9yB,EAAIgzB,GAC5CA,GAAWA,EAAQjd,WACrBliC,KAAKo9B,SAASjR,GAAIgzB,EAAQjd,YAAaid,IAI3C7xC,EAAOmlC,aAAe,WACpB,OAAOzyC,KAAK69C,WAGdvwC,EAAOgxC,cAAgB,WACrB,OAAKt+C,KAAKnC,IAIHmC,KAAKnC,IAAIuhD,QAHP,IAMX9xC,EAAO+xC,iBAAmB,WACxB,IAAKr/C,KAAK6hC,QAAU7hC,KAAKo9B,SACvB,OAAO,KAGT,IAAIiI,EAAUrlC,KAAK6hC,MAAMN,kBAEzB,OAAK8D,EAIEA,EAAQ7D,cAHN,MAMJgc,EA3bG,CA4bV7uB,GAASpE,GAAUgS,GAAWhP,OAEhCiwB,GAAM/uB,aAAa8uB,IACnB,IAAIzxB,GAAO0xB,GAAMrlD,UAAU2zB,KAE3B0xB,GAAMrlD,UAAU2zB,KAAO,SAAUT,EAAWsB,GAgB1C,MAfkB,cAAdtB,IACFrrB,KAAK8+C,SAAU,GAGb9+C,KAAKnC,MACF8uB,IACHA,EAAQ,IAGVA,EAAY,KAAItB,EAChBsB,EAAc,OAAI3sB,KAElBA,KAAKnC,IAAIyhD,cAAc3yB,IAGlBb,GAAK3oB,MAAMnD,KAAMhJ,YAG1B,IAslDQuoD,GACAC,GApBAC,GA7BAC,GACAC,GA3CAC,GA5/CJC,GAAY,CACd,eAAkB,GAClB,SAAY,GACZ,aAAe,EACf,cAAgB,EAChB,WAAc,KACd,eACU7mD,EAEV,sBAAyB,IACzB,cACUA,EAEV,qBAAwB,IACxB,UAAY,EACZ,kBAAoB,EACpB,WACU0T,GAAU1C,OAEpB,eAAkB,EAClB,iBAAoB,GACpB,+BAAkC,EAClC,QAAW,KACX,QAAW,KACX,UAAa,KACb,mBAAqB,EACrB,WAAa,EACb,kBAAqB,IACrB,SAAY,SACZ,eAAkB,CAAC,GAAI,KAGrB81C,GAAQ,SAAUC,GAGpB,SAASC,EAAI5sC,EAAWmF,GACtB,IAAIwX,EAEJ,IAAKxX,EACH,MAAM,IAAIva,MAAM,sCAGlB,IAAKua,EAAgB,OACnB,MAAM,IAAIva,MAAM,qCAGlB,IAAIq5C,EAAOxgD,EAAO,GAAI0hB,GAClBxS,EAAOsxC,EAAW,YACfA,EAAW,KAClB,IAAIvS,EAAS,IAAI9T,GAAWqmB,EAAa,eAClCA,EAAa,OACpB,IAAI4I,EAAY5I,EAAgB,iBACzBA,EAAgB,UACvB,IAAIgH,EAAShH,EAAa,OAsC1B,cArCOA,EAAa,QACpBtnB,EAAQgwB,EAAaznD,KAAK0H,KAAMq3C,IAASr3C,MACnCkgD,QAAUF,EAAIE,QACpBhoD,OAAOsM,eAAewI,GAAuBA,GAAuB+iB,IAAS,KAAM,CACjF5uB,MAAO7G,IACP6lD,UAAU,IAEZpwB,EAAM+uB,SAAU,EAEhB/uB,EAAMqwB,eAAehtC,GAErB2c,EAAMswB,QAAU,GAChBtwB,EAAMuwB,WAAa,KACnBvwB,EAAMqvB,QAAU,GAChBrvB,EAAMwwB,WAAax6C,EACnBgqB,EAAMywB,QAAU1b,EAEhB/U,EAAM0wB,oBAAoBpJ,EAAuB,kBAAKA,EAAW,MAEjEtnB,EAAM2wB,aAAarJ,EAAgB,WAEnCtnB,EAAM4wB,cAAgB,IAAIzxC,GAAM,EAAG,GAEnC6gB,EAAM6tB,gBAEN7tB,EAAM6wB,eAAe7wB,EAAM8wB,wBAEvBZ,GACFlwB,EAAM+wB,aAAab,GAGjB5B,GACFtuB,EAAMguB,SAASM,GAGjBtuB,EAAMgxB,QAEChxB,EA1DTpjB,GAAeqzC,EAAKD,GA6DpBC,EAAIgB,cAAgB,SAAuBrnD,GACzC,IAAIwO,EAAO7M,MAAMnD,UAAUmB,MAAMhB,KAAKtB,UAAW,GAC7CujB,EAAuB,mBAAP5gB,EAAoBA,EAAK,WAC3CqG,KAAKrG,GAAIwJ,MAAMnD,KAAMmI,IAMvB,OAJAnI,KAAK7H,UAAU8oD,aAAejhD,KAAK7H,UAAU8oD,cAAgB,GAE7DjhD,KAAK7H,UAAU8oD,aAAanmD,KAAKyf,GAE1Bva,MAGT,IAAIsN,EAAS0yC,EAAI7nD,UA64CjB,OA34CAmV,EAAOuxC,SAAW,WAChB,QAAS7+C,KAAK8+C,SAGhBxxC,EAAO4zC,aAAe,WACpB,OAAOlhD,KAAKmhD,eAGd7zC,EAAO8zC,oBAAsB,WAC3B,OAAOphD,KAAKqhD,mBAGd/zC,EAAOmzC,oBAAsB,SAA6Ba,GACxD,IAAIC,EAASvhD,KAAKuY,QAA0B,iBAE5C,OAAIvY,KAAK8+C,SAAWlJ,GAAiB/mC,OAAO0yC,EAAQD,IAIpDthD,KAAKwhD,wBAAwBF,EAAKC,GAHzBvhD,MAQXsN,EAAOk0C,wBAA0B,SAAiCF,EAAKC,GAMrE,GALAD,EAAMzqD,EAAO,GAAIyqD,GACjBthD,KAAKwgD,QAAUxgD,KAAKsd,YACpBtd,KAAKuY,QAA0B,iBAAI+oC,EACnCthD,KAAKqhD,kBAAoB,IAAIzL,GAAiB0L,GAE1CthD,KAAKuY,QAA0B,kBAAKxgB,EAAWiI,KAAKuY,QAA0B,iBAAc,YAAI,CAClG,IAAI8a,EAAarzB,KAAKqhD,kBAAkBxK,gBAExC72C,KAAKuY,QAA0B,iBAAc,WAAI8a,EAAiB,KAUpE,OAPArzB,KAAKyhD,kBAELzhD,KAAKk4C,WAAW,yBAA0B,CACxC,IAAOqJ,EACP,IAAO1qD,EAAO,GAAImJ,KAAKuY,QAA0B,oBAG5CvY,MAGTsN,EAAOygB,SAAW,SAAkBD,GAClC,IAAIwzB,EAAMxzB,EAAuB,kBAAKA,EAAW,KAMjD,OAJK12B,EAAMkqD,IACTthD,KAAKwhD,wBAAwBF,EAAK,MAG7BthD,MAGTsN,EAAOupC,cAAgB,WACrB,OAAK72C,KAAKqhD,kBAIHrhD,KAAKqhD,kBAAkBxK,gBAHrB,MAMXvpC,EAAOwpC,cAAgB,WACrB,OAAK92C,KAAKqhD,kBAIHrhD,KAAKqhD,kBAAkBvK,gBAHrB,MAMXxpC,EAAOo0C,UAAY,SAAmBC,GAMpC,cALO3hD,KAAK4hD,QAEZ5hD,KAAK6hD,cAAcF,GAEnB3hD,KAAK4hD,QAAUD,EACR3hD,MAGTsN,EAAOw0C,YAAc,WACnB,OAAO9hD,KAAK0hD,UAAU,OAGxBp0C,EAAOgQ,UAAY,WACjB,OAAKtd,KAAK8+C,SAAY9+C,KAAK+hD,WAIV/hD,KAAK62C,gBACJzjB,UAAUpzB,KAAK+hD,YAJxB/hD,KAAKwgD,SAOhBlzC,EAAO00C,UAAY,SAAmBld,GACpC,IAAKA,EACH,OAAO9kC,KAGT8kC,EAAS,IAAI9T,GAAW8T,GACxB,IACImd,EADajiD,KAAK62C,gBACGliB,QAAQmQ,GAEjC,OAAK9kC,KAAKkiD,cAAcD,GAInBjiD,KAAK8+C,SAKV9+C,KAAKuiC,cAELviC,KAAKmiD,cAAcF,GAEnBjiD,KAAKyiC,UAAUziC,KAAKoiD,qBAAqBpiD,KAAKsd,cACvCtd,OATLA,KAAKwgD,QAAU1b,EACR9kC,MALAA,MAgBXsN,EAAOsnB,QAAU,WACf,OAAIx9B,EAAM4I,KAAKqG,QAAUjP,EAAM4I,KAAKsG,QAC3BtG,KAAK6gD,uBAGP,IAAI5wC,GAAKjQ,KAAKqG,MAAOrG,KAAKsG,SAGnCgH,EAAOw9B,mBAAqB,WAC1B,IAAIuX,EAAeriD,KAAKsG,OACpBg8C,EAAQtiD,KAAKq+B,WACbkkB,EAAiBviD,KAAKuY,QAAwB,eAMlD,OAJIgqC,GAAkBD,EAAQC,IAC5BF,EAAeriD,KAAKwiD,iBAAiBD,IAGhC,IAAI9sB,GAAY,EAAGz1B,KAAKsG,OAAS+7C,EAAcriD,KAAKqG,MAAOrG,KAAKsG,SAGzEgH,EAAOk1C,iBAAmB,SAA0BC,GAClDA,EAAcA,GAAe,IAC7B,IAAIH,GAAS,GAAKtiD,KAAKq+B,YAAc7lC,KAAKC,GAAK,IAC3CiqD,EAAM1iD,KAAK2iD,SAAWnqD,KAAKC,GAAK,IACpCgqD,GAAejqD,KAAKC,GAAK,IACzB,IAAImqD,EAAiB5iD,KAAK6iD,qBAAuB7iD,KAAKqwC,aAClDyS,EAAOtqD,KAAK0gC,IAAIwpB,EAAM,GAEtBK,EAAiBH,EAAiBE,GAAQ,EADnCtqD,KAAK0gC,IAAIupB,GACqCK,GAAQtqD,KAAKuX,IAAI0yC,GACtEzmD,EAAI4mD,GAAkBpqD,KAAKuX,IAAIuyC,GAASS,GAAkBH,EAAiBpqD,KAAKsX,IAAIwyC,GAASS,IACjG,OAAO/iD,KAAKsG,OAAS,EAAItK,GAG3BsR,EAAOsrC,UAAY,WACjB,OAAO54C,KAAKgjD,eAAehjD,KAAKygC,iBAGlCnzB,EAAO21C,cAAgB,WACrB,IAAI1R,EAAWvxC,KAAKygC,eAEpB,OAAO,IAAIxN,GAAOjzB,KAAKkjD,YAAY3R,EAASr0B,UAAWld,KAAKkjD,YAAY3R,EAASp0B,YAGnF7P,EAAO61C,aAAe,WACpB,OAAOnjD,KAAKijD,iBAGd31C,EAAO81C,aAAe,WACpB,OAAKpjD,KAAKuY,QAAmB,UAItB,IAAI0a,GAAOjzB,KAAKuY,QAAmB,UAAGvY,KAAK62C,iBAHzC,MAMXvpC,EAAOozC,aAAe,SAAsB3jC,GAC1C,GAAIA,EAAQ,CACV,IAAIsmC,EAAS,IAAIpwB,GAAOlW,EAAQ/c,KAAK62C,iBACrC72C,KAAKuY,QAAmB,UAAI8qC,EAEvBrjD,KAAKkiD,cAAcliD,KAAKsjD,kBAC3BtjD,KAAKujD,OAAOvjD,KAAKwjD,gBAAgBlmC,aAGnC,IAAI+V,EAAarzB,KAAK62C,gBACtB72C,KAAKwjD,cAAgBH,EAAOhuB,WAAU,SAAU7xB,GAC9C,OAAO6vB,EAAWsB,QAAQnxB,kBAGrBxD,KAAKuY,QAAmB,iBACxBvY,KAAKwjD,cAGd,OAAOxjD,MAGTsN,EAAOkyB,QAAU,WACf,OAAOx/B,KAAKugD,YAGdjzC,EAAOm2C,gBAAkB,SAAyB3tB,EAAO4tB,EAAUC,GACjE,IAAI59C,EAAO/F,KAAKw/B,UAMhB,GAJIpoC,EAAMssD,KACRA,EAAW39C,GAGC,IAAV+vB,GAAe4tB,IAAa39C,EAC9B,OAAOA,EAGT,IACI69C,EADM5jD,KAAK6jD,eAAeH,GACR5tB,EAElBguB,EAAY9jD,KAAK+jD,eAAeH,GAEpC,GAAID,EACF,OAAOG,EAGP,OAAO9jD,KAAKohD,sBAAsBlK,mBAAqB,EAAI1+C,KAAKkV,KAAKo2C,EADzD,MAC8EtrD,KAAKuV,MAAM+1C,EADzF,OAKhBx2C,EAAOy2C,eAAiB,SAAwBh/C,GAC9C,IAAI4wC,EAAc31C,KAAKgkD,kBACnBC,EAASjkD,KAAK6jD,eAAe7jD,KAAKg3C,cAClCkN,EAASlkD,KAAK6jD,eAAe7jD,KAAKi3C,cAEtC,GAAIgN,GAAUC,EAAQ,CACpB,GAAIn/C,GAAOk/C,EACT,OAAOjkD,KAAKg3C,aACP,GAAIjyC,GAAOm/C,EAChB,OAAOlkD,KAAKi3C,iBAET,IAAIlyC,GAAOk/C,EAChB,OAAOjkD,KAAKg3C,aACP,GAAIjyC,GAAOm/C,EAChB,OAAOlkD,KAAKi3C,aAKd,IAFA,IAAIjyC,EAAI2wC,EAAY1+C,OAEXF,EAAI,EAAGA,EAAIiO,EAAI,EAAGjO,IACzB,GAAK4+C,EAAY5+C,GAAjB,CAIA,IAAIotD,EAAMxO,EAAY5+C,EAAI,GAAK4+C,EAAY5+C,GACvCqG,EAAO2H,EAAM4wC,EAAY5+C,GAE7B,GAAIgF,EAAKooD,KAASpoD,EAAKqB,IAAS5E,KAAK+D,IAAI4nD,IAAQ3rD,KAAK+D,IAAIa,GACxD,OAAOrG,EAAIqG,EAAO+mD,EAItB,OAAOn/C,EAAI,GAGbsI,EAAO82C,QAAU,SAAiBr+C,EAAMwS,GAOtC,YANgB,IAAZA,IACFA,EAAU,CACR,WAAa,IAIb/gB,MAAMuO,IAAS3O,EAAM2O,KAIzBA,GAAQA,EAEJ/F,KAAK8+C,SAAW9+C,KAAKuY,QAAuB,eAAKA,EAAmB,UACtEvY,KAAKqkD,eAAet+C,GAEpB/F,KAAK2zC,MAAM5tC,IARJ/F,MAcXsN,EAAO2pC,WAAa,WAClB,OAAK7/C,EAAM4I,KAAKuY,QAAiB,SAI1BvY,KAAKskD,mBAHHtkD,KAAKuY,QAAiB,SAMjCjL,EAAOi3C,WAAa,SAAoBvc,GACtC,IAAIwc,EAAcxkD,KAAKskD,mBAYvB,OAVItc,EAAUwc,IACZxc,EAAUwc,GAGI,OAAZxc,GAAoBA,EAAUhoC,KAAKugD,aACrCvgD,KAAKokD,QAAQpc,GACbA,GAAWA,GAGbhoC,KAAKuY,QAAiB,QAAIyvB,EACnBhoC,MAGTsN,EAAO0pC,WAAa,WAClB,OAAK5/C,EAAM4I,KAAKuY,QAAiB,SAI1BvY,KAAKqhD,kBAAkBrK,aAHrBh3C,KAAKuY,QAAiB,SAMjCjL,EAAOm3C,WAAa,SAAoBvG,GACtC,GAAgB,OAAZA,EAAkB,CACpBA,GAAWA,EAEX,IAAIwG,EAAc1kD,KAAKqhD,kBAAkBrK,aAErCkH,EAAUwG,IACZxG,EAAUwG,GAGRxG,EAAUl+C,KAAKugD,YACjBvgD,KAAKokD,QAAQlG,GAKjB,OADAl+C,KAAKuY,QAAiB,QAAI2lC,EACnBl+C,MAGTsN,EAAOg3C,iBAAmB,WACxB,IAAIhD,EAAMthD,KAAKohD,sBAEf,OAAKE,EAIEA,EAAIrK,aAHF,MAMX3pC,EAAOo5B,UAAY,WACjB,OAAO1mC,KAAKskD,mBAAqB,GAGnCh3C,EAAO+iC,WAAa,SAAoBtqC,GAKtC,OAJI3O,EAAM2O,KACRA,EAAO/F,KAAKw/B,WAGPx/B,KAAK6jD,eAAe99C,GAAQ/F,KAAK6jD,eAAe7jD,KAAK0mC,cAG9Dp5B,EAAOq3C,OAAS,WACd,OAAO3kD,KAAKokD,QAAQpkD,KAAKw/B,UAAY,IAGvClyB,EAAOs3C,QAAU,WACf,OAAO5kD,KAAKokD,QAAQpkD,KAAKw/B,UAAY,IAGvClyB,EAAOixB,UAAY,WACjB,QAASv+B,KAAK6kD,UAGhBv3C,EAAO0wB,cAAgB,WACrB,OAAOh+B,KAAKu+B,aAAev+B,KAAKs+B,YAAct+B,KAAKw+B,cAGrDlxB,EAAOw3C,iBAAmB,SAA0BhgB,EAAQ/+B,GAU1D,OATK3O,EAAM2O,IAAS/F,KAAKugD,aAAex6C,EAMtC/F,KAAKgiD,UAAUld,IALf9kC,KAAKgiD,UAAUld,GACf9kC,KAAKokD,QAAQr+C,EAAM,CACjBg/C,WAAW,KAMR/kD,MAGTsN,EAAO03C,WAAa,SAAoBjoC,EAAQ4mC,GAC9C,IAAIjmB,EAAS19B,KAEb,KAAK+c,GAAYA,aAAkBkW,IACjC,OAAOjzB,KAAKugD,WAGd,GAAIxjC,EAAa,OAAMA,EAAa,MAAKA,EAAa,OAAMA,EAAa,KACvE,OAAO/c,KAAKi3C,aAGd,IAAI/mC,EAAOlQ,KAAK40B,UACZqwB,EAAkBloC,EAAOsY,WAAU,SAAU75B,GAC/C,OAAOkiC,EAAOsb,sBAAsBx9C,MAElC2L,EAAI89C,EAAgB7nC,WACpBhW,EAAI69C,EAAgB5nC,YACpBrH,EAAS9F,EAAY,MAAI/I,EACzB8O,EAAS/F,EAAa,OAAI9I,EAC1B0uB,EAAQ91B,KAAKohD,sBAAsBlK,mBAAqB,EAAI1+C,KAAKsE,IAAIkZ,EAAQC,GAAUzd,KAAKqE,IAAImZ,EAAQC,GAE5G,OADWjW,KAAKyjD,gBAAgB3tB,EAAO,KAAM6tB,IAI/Cr2C,EAAO43C,QAAU,WACf,MAAO,CACL,OAAUllD,KAAKsd,YAAYvO,UAC3B,KAAQ/O,KAAKw/B,UACb,MAASx/B,KAAKq+B,WACd,QAAWr+B,KAAKmmC,eAIpB74B,EAAO63C,QAAU,SAAiB3mD,GAChC,OAAKA,GAIDA,EAAa,QACfwB,KAAKgiD,UAAUxjD,EAAa,QAGT,OAAjBA,EAAW,MAAehH,OAAOgH,EAAW,OAC9CwB,KAAKokD,SAAS5lD,EAAW,KAAG,CAC1B,WAAa,IAIK,OAAlBA,EAAY,OAAehH,OAAOgH,EAAY,QAChDwB,KAAKolD,UAAU5mD,EAAY,OAGP,OAAlBA,EAAY,OAAehH,OAAOgH,EAAc,UAClDwB,KAAKqlD,YAAY7mD,EAAc,SAG1BwB,MArBEA,MAwBXsN,EAAOiiC,cAAgB,SAAuBxpC,GAC5C,OAAO/F,KAAK6jD,eAAe99C,IAG7BuH,EAAOg4C,SAAW,SAAkBv/C,GAClC,IAAIC,EAAI5O,EAAM2O,GAAQ/F,KAAKw/B,UAAYz5B,EAEnCjJ,EAAMkD,KAAK6jD,eAAe7jD,KAAKskD,oBAGnC,OAFUtkD,KAAK6jD,eAAe79C,GAEjBlJ,GAGfwQ,EAAOi4C,UAAY,SAAmBxoC,EAAQyoC,EAAYjtC,EAASktC,GAKjE,QAJgB,IAAZltC,IACFA,EAAU,KAGPwE,EACH,OAAO/c,KAGT+c,EAAS,IAAIkW,GAAOlW,EAAQ/c,KAAK62C,iBACjC,IAAI9wC,EAAO/F,KAAKglD,WAAWjoC,IAAWyoC,GAAc,GAChD1gB,EAAS/nB,EAAOO,YACpB,YAAoC,IAAzB/E,EAAmB,WAAqBA,EAAmB,UAAUvY,KAAK0lD,WAAW,CAC9F5gB,OAAQA,EACR/+B,KAAMA,GACL,CACD,SAAYwS,EAAkB,UAAKvY,KAAKuY,QAA+B,sBACvE,OAAUA,EAAgB,QAAK,OAC9BktC,GAAkBzlD,KAAK8kD,iBAAiBhgB,EAAQ/+B,IAGrDuH,EAAOq4C,aAAe,WACpB,OAAO3lD,KAAKsgD,YAGdhzC,EAAOwzC,aAAe,SAAsBb,GAC1C,IAAI2F,GAAW,EAUf,GARI5lD,KAAKsgD,aACPsF,GAAW,EAEX5lD,KAAKk4C,WAAW,wBAEhBl4C,KAAKsgD,WAAWhzB,WAGb2yB,EAOH,cANOjgD,KAAKsgD,WAEZtgD,KAAKk4C,WAAW,sBAEhBl4C,KAAKk4C,WAAW,gBAETl4C,KAyBT,OAtBAA,KAAKsgD,WAAaL,EAElBA,EAAUjB,SAASh/C,MAAO,GAY1BA,KAAKsgD,WAAWtoC,GAAG,aAVnB,WACEhY,KAAKk4C,WAAW,iBAEZ0N,IACFA,GAAW,EAEX5lD,KAAKk4C,WAAW,yBAI6Bl4C,MAE7CA,KAAK8+C,SACP9+C,KAAKsgD,WAAW5C,OAGlB19C,KAAKk4C,WAAW,gBAETl4C,MAGTsN,EAAOu4C,gBAAkB,WASvB,OARI7lD,KAAKsgD,aACPtgD,KAAKsgD,WAAWhzB,gBAETttB,KAAKsgD,WAEZtgD,KAAKk4C,WAAW,oBAGXl4C,MAGTsN,EAAOw4C,UAAY,SAAmBvlD,GACpC,OAAOP,KAAK+lD,YAAW,SAAUlpB,GAC/B,QAAIA,IAAU78B,KAAKsgD,YAAczjB,EAAMqG,QAAQjoC,QAlqXzB,+BAkqX2D,MAI7EsF,GACKA,EAAOs8B,QAOpBvvB,EAAOm7B,SAAW,SAAkBruC,GAClC,IAAKA,EACH,OAAO,KAGT,IAAIyiC,EAAQ78B,KAAKgmD,YAAchmD,KAAKgmD,YAAY5rD,GAAM,KAEtD,GAAIyiC,EACF,OAAOA,EAGT,IAAIojB,EAAYjgD,KAAK2lD,eAErB,OAAI1F,GAAaA,EAAU/c,UAAY9oC,EAC9B6lD,EAGF,MAGT3yC,EAAOywC,SAAW,SAAkBM,GAClC,IAAKA,EACH,OAAOr+C,KAGT,IAAK1E,MAAMC,QAAQ8iD,GAEjB,OADAA,EAAS/iD,MAAMnD,UAAUmB,MAAMhB,KAAKtB,UAAW,GACxCgJ,KAAK+9C,SAASM,GAGlBr+C,KAAKgmD,cACRhmD,KAAKgmD,YAAc,IAKrB,IAFA,IAAIC,EAAYjmD,KAAKo/C,QAEZroD,EAAI,EAAG4E,EAAM0iD,EAAOpnD,OAAQF,EAAI4E,EAAK5E,IAAK,CACjD,IAAI8lC,EAAQwhB,EAAOtnD,GACfqD,EAAKyiC,EAAMqG,QAEf,GAAI9rC,EAAMgD,GACR,MAAM,IAAI4D,MAAM,6BAA+B5D,GAGjD,GAAIyiC,EAAMO,WAAap9B,KAAvB,CAIA,GAAIA,KAAKgmD,YAAY5rD,GACnB,MAAM,IAAI4D,MAAM,kCAAoC5D,GAGtD4F,KAAKgmD,YAAY5rD,GAAMyiC,EAEvBA,EAAMmiB,SAASh/C,MAEfimD,EAAUnrD,KAAK+hC,GAEX78B,KAAK8+C,SACPjiB,EAAM6gB,QAUV,OANA19C,KAAKi+C,sBAELj+C,KAAKk4C,WAAW,WAAY,CAC1B,OAAUmG,IAGLr+C,MAGTsN,EAAOoxC,YAAc,SAAqBL,GACxC,IAAKA,EACH,OAAOr+C,KAGT,IAAK1E,MAAMC,QAAQ8iD,GACjB,OAAOr+C,KAAK0+C,YAAY,CAACL,IAK3B,IAFA,IAAI6H,EAAU,GAELnvD,EAAI,EAAG4E,EAAM0iD,EAAOpnD,OAAQF,EAAI4E,EAAK5E,IAAK,CACjD,IAAI8lC,EAAQwhB,EAAOtnD,GAMnB,GAJM8lC,aAAiB2gB,KACrB3gB,EAAQ78B,KAAKyoC,SAAS5L,IAGnBA,EAAL,CAIA,IAAIh/B,EAAMg/B,EAAMO,SAEhB,GAAKv/B,GAAOA,IAAQmC,KAApB,CAIAkmD,EAAQprD,KAAK+hC,GAEb78B,KAAKmmD,aAAatpB,EAAO78B,KAAKo/C,SAE1Bp/C,KAAK8+C,SACPjiB,EAAMqiB,YAGR,IAAI9kD,EAAKyiC,EAAMqG,QAEXljC,KAAKgmD,oBACAhmD,KAAKgmD,YAAY5rD,KAI5B,GAAI8rD,EAAQjvD,OAAS,EAAG,CACtB,IAAIs2C,EAAWvtC,KAAKm+B,cAEhBoP,GACFA,EAAS6Y,wBAGXpmD,KAAKirB,KAAK,YAAY,WACpBi7B,EAAQzoC,SAAQ,SAAUof,GACxBA,EAAM/Q,KAAK,gBASjB,OAJA9rB,KAAKk4C,WAAW,cAAe,CAC7B,OAAUmG,IAGLr+C,MAGTsN,EAAO+4C,WAAa,SAAoBhI,GACtC,IAAKA,IAAW/iD,MAAMC,QAAQ8iD,GAC5B,OAAOr+C,KAMT,IAHA,IAAIsmD,EAAgB,GAChBC,EAAOtqD,OAAO24C,UAET79C,EAAI,EAAGiO,EAAIq5C,EAAOpnD,OAAQF,EAAIiO,EAAGjO,IAAK,CAC7C,IAAI8lC,EAAQwhB,EAAOtnD,GAMnB,GAJIa,EAASymD,EAAOtnD,MAClB8lC,EAAQ78B,KAAKyoC,SAAS5L,MAGlBA,aAAiB2gB,IAAW3gB,EAAMO,UAAYP,EAAMO,WAAap9B,MACrE,MAAM,IAAIhC,MAAM,kDAGd6+B,EAAMuc,YAAcmN,IACtBA,EAAO1pB,EAAMuc,aAGfkN,EAAcxrD,KAAK+hC,GAGrB,IAAK,IAAIh4B,EAAK,EAAG2hD,EAAKF,EAAcrvD,OAAQ4N,EAAK2hD,EAAI3hD,IACnDyhD,EAAczhD,GAAIk7B,UAAUwmB,EAAO1hD,GAGrC,OAAO7E,MAGTsN,EAAOm5C,UAAY,SAAmBluC,GAC/BA,IACHA,EAAU,IAGZ,IAAImuC,EAAWnuC,EAAkB,SAE5BmuC,IACHA,EAAW,aAGb,IAAI/kC,EAAOpJ,EAAc,KAErBg1B,EAAWvtC,KAAKyyC,eAEpB,GAAIlF,GAAYA,EAASkZ,UAAW,CAClC,IAAIE,EAAOpuC,EAAkB,SAExBouC,IACHA,EAAO,UAGT,IAAIC,EAAUrZ,EAASkZ,UAAUC,GAEjC,GAAI/kC,GAAQilC,EAAS,CACnB,IAAI1b,EAEJ,GAAoB,oBAATxsC,MAAwC,oBAATL,KAAsB,CAC9D,IAAIoc,EAAOxc,EAAU2oD,EAAQ/9C,QAAQ,sCAAuC,IAAK69C,GACjFxb,EAAS7wB,IAAIK,gBAAgBD,QAE7BywB,EAAS0b,EAGX,IAAIC,EAASv9C,SAAS4B,cAAc,KACpC27C,EAAOC,SAAWH,EAClBE,EAAOE,KAAO7b,EACd5hC,SAASyO,KAAKzE,YAAYuzC,GAC1BA,EAAOG,QACP19C,SAASyO,KAAKrE,YAAYmzC,GAG5B,OAAOD,EAGT,OAAO,MAGTt5C,EAAO25C,aAAe,SAAsBC,EAAYnhD,EAAM8tB,GAC5D,OAAO7zB,KAAKmnD,kBAAkBD,EAAYnhD,EAAM8tB,IAGlDvmB,EAAO85C,aAAe,SAAsBx5C,EAAO7H,EAAM8tB,GACvD,OAAO7zB,KAAKqnD,kBAAkBz5C,EAAO7H,EAAM8tB,IAG7CvmB,EAAOg6C,iBAAmB,SAA0BJ,EAAYrzB,EAAKmd,GACnE,OAAOhxC,KAAKunD,sBAAsBL,EAAYrzB,EAAKmd,IAGrD1jC,EAAOk6C,iBAAmB,SAA0BC,EAAW5zB,GAC7D,OAAO7zB,KAAK0nD,sBAAsBD,EAAW5zB,IAG/CvmB,EAAO0rC,sBAAwB,SAA+BkO,EAAYnhD,EAAM8tB,GAC9E,OAAO7zB,KAAK2nD,2BAA2BT,EAAYnhD,EAAM8tB,IAG3DvmB,EAAOs6C,sBAAwB,SAA+BjoB,EAAgB9L,GAC5E,OAAO7zB,KAAK6nD,2BAA2BloB,EAAgB9L,IAGzDvmB,EAAOw6C,0BAA4B,SAAmCnoB,EAAgB9L,GAOpF,OANIA,EACFA,EAAInvB,IAAIi7B,EAAe3jC,EAAG2jC,EAAevyB,GAEzCymB,EAAM8L,EAAe3xB,OAGhB6lB,EAAIxlB,KAAKrO,KAAK+nD,iBAGvBz6C,EAAO06C,0BAA4B,SAAmCP,EAAW5zB,GAO/E,OANIA,EACFA,EAAInvB,IAAI+iD,EAAUzrD,EAAGyrD,EAAUr6C,GAE/BymB,EAAM4zB,EAAUz5C,OAGX6lB,EAAI5lB,KAAKjO,KAAK+nD,iBAGvBz6C,EAAO26C,UAAY,WACjB,IAAIC,EAAYvxD,IAAQqJ,KAAKmoD,UAAY,MAAuB,IAAfnoD,KAAKqG,OAA+B,IAAhBrG,KAAKsG,OAEtE8hD,EAAUpoD,KAAK6gD,uBACfwH,EAAYroD,KAAKsG,OACjBgiD,EAAWtoD,KAAKqG,MAEpB,GAAI+hD,EAAe,QAAME,GAAYF,EAAgB,SAAMC,EACzD,OAAOroD,KAGT,IAAI8kC,EAAS9kC,KAAKsd,YAElB,GAAKtd,KAAKuY,QAA2B,kBAiBnCvY,KAAK4gD,eAAewH,OAjBkB,CACtC,IAAIG,EAAKvoD,KAAKwiD,iBAAiBxiD,KAAKq+B,YAEhCmqB,EAAO,IAAIt5C,GAAM,EAAGlP,KAAKsG,OAASiiD,GAElCE,EAAUzoD,KAAK0oD,qBAAqBF,GAExCxoD,KAAK4gD,eAAewH,GAEpB,IAAIO,EAAU3oD,KAAKwiD,iBAAiBxiD,KAAKq+B,YAErCuqB,EAAY,IAAI15C,GAAM,EAAGlP,KAAKsG,OAASqiD,GAE3C3oD,KAAK6oD,6BAA6BJ,EAASG,GAE3C5oD,KAAK8oD,cAAgB9oD,KAAKsjD,gBAK5B,IAAIyF,EAA6B,IAArBX,EAAe,OAAiC,IAAtBA,EAAgB,QAAwB,IAAbE,GAAgC,IAAdD,EAUnF,OARIH,GAAaa,KACf/oD,KAAKgpD,eAAgB,EACrBhpD,KAAKgiD,UAAUld,UACR9kC,KAAKgpD,eAGdhpD,KAAKk4C,WAAW,UAETl4C,MAGTsN,EAAOsqB,OAAS,SAAgBsvB,EAAYjoD,EAAIC,GAC9C,OAAOc,KAAK62C,gBAAgB9e,QAAQ,IAAI/G,GAAWk2B,GAAajoD,EAAIC,IAGtEoO,EAAO27C,aAAe,WACpB,OAAOjpD,KAAKyyC,eAAewW,gBAG7B37C,EAAO47C,UAAY,WACjB,OAAOlpD,KAAKqgD,SAGd/yC,EAAOggB,OAAS,WACd,IAAImxB,EAASz+C,KAEb,GAAIA,KAAKmpD,YACP,OAAOnpD,KAGTA,KAAKk4C,WAAW,eAEhBl4C,KAAKopD,mBAELppD,KAAKsvB,iBAELtvB,KAAK6lD,kBAGL,IAFA,IAAIxH,EAASr+C,KAAK8lD,YAET/uD,EAAI,EAAGA,EAAIsnD,EAAOpnD,OAAQF,IACjCsnD,EAAOtnD,GAAGu2B,SAuBZ,OApBIttB,KAAKyyC,gBACPzyC,KAAKyyC,eAAenlB,SAGlBttB,KAAKmhD,cAAckI,YAAcrpD,KAAKmhD,cAAckI,WAAWpyD,OAAS,GAC1EqE,MAAMnD,UAAUmB,MAAMhB,KAAK0H,KAAKmhD,cAAckI,WAAY,GAAG9oD,QAAO,SAAU7G,GAC5E,MAA0B,qBAAnBA,EAAKsZ,aACXyK,SAAQ,SAAU/jB,GACnB,OAAO+kD,EAAO0C,cAAcztC,YAAYha,aAIrCsG,KAAKqgD,eACLrgD,KAAKmhD,qBACLnhD,KAAKutC,SAEZvtC,KAAKk4C,WAAW,aAEhBl4C,KAAKssB,qBAEEtsB,MAGTsN,EAAO67C,UAAY,WACjB,OAAQnpD,KAAKmhD,eAGf7zC,EAAOgxB,SAAW,WAChB,QAASt+B,KAAKspD,SAGhBh8C,EAAOi1B,YAAc,SAAqB5V,GACxC,IAAI48B,EAAYvpD,KAAKsjD,gBAEhBtjD,KAAKwpD,gBAAiBxpD,KAAKkiD,cAAcqH,KAC5CvpD,KAAKwpD,cAAgBD,GAGvBvpD,KAAKspD,SAAU,EAEftpD,KAAK6hD,cAAc,QAEnB7hD,KAAKk4C,WAAW,YAAal4C,KAAKypD,YAAY98B,EAAQA,EAAgB,SAAI,KAAM,eAGlFrf,EAAOk1B,SAAW,SAAkB7V,GAClC3sB,KAAKk4C,WAAW,SAAUl4C,KAAKypD,YAAY98B,EAAQA,EAAgB,SAAI,KAAM,YAG/Erf,EAAOm1B,UAAY,SAAmB9V,GAOpC,GANA3sB,KAAKspD,SAAU,EAEftpD,KAAK6hD,cAAc,WAEnB7hD,KAAKk4C,WAAW,UAAWvrB,GAASA,EAAgB,SAAI3sB,KAAKypD,YAAY98B,EAAgB,SAAG,WAAaA,IAEpG3sB,KAAKkiD,cAAcliD,KAAKsjD,kBAAoBtjD,KAAKwpD,cAAe,CACnE,IAAIloC,EAASthB,KAAKwpD,cAElBxpD,KAAKujD,OAAOjiC,KAIhBhU,EAAOo1B,kBAAoB,SAA2B/V,GACpD3sB,KAAK0pD,eAAgB,EAErB1pD,KAAKk4C,WAAW,kBAAmBl4C,KAAKypD,YAAY98B,EAAQA,EAAgB,SAAI,KAAM,qBAGxFrf,EAAOq1B,eAAiB,SAAwBhW,GAC9C3sB,KAAKk4C,WAAW,eAAgBl4C,KAAKypD,YAAY98B,EAAQA,EAAgB,SAAI,KAAM,kBAGrFrf,EAAOs1B,gBAAkB,SAAyBjW,GAChD3sB,KAAK0pD,eAAgB,EAErB1pD,KAAKk4C,WAAW,gBAAiBl4C,KAAKypD,YAAY98B,EAAQA,EAAgB,SAAI,KAAM,mBAGtFrf,EAAOq8C,eAAiB,WACtB,QAAS3pD,KAAK0pD,eAGhBp8C,EAAO6wB,YAAc,WACnB,OAAOn+B,KAAKyyC,gBAGdnlC,EAAO4yB,oBAAsB,WAC3B,OAAOlgC,KAAKuY,QAA0B,kBAAK7L,GAAUnB,kBAAoB,GAG3E+B,EAAO8yC,eAAiB,SAAwBhtC,GAC9C,GAAIxb,EAASwb,IAGX,GAFApT,KAAKmhD,cAAgB73C,SAASsgD,eAAex2C,IAExCpT,KAAKmhD,cACR,MAAM,IAAInjD,MAAM,yCAA4CoV,EAAY,UAG1EpT,KAAKmhD,cAAgB/tC,EAEjBpa,IACFgH,KAAK4gC,YAAc5gC,KAAKmhD,cAActpD,aAI1C,GAAImI,KAAKmhD,cAAckI,YAAcrpD,KAAKmhD,cAAckI,WAAWpyD,OAAS,GACvB,qBAA/C+I,KAAKmhD,cAAckI,WAAW,GAAGr2C,UACnC,MAAM,IAAIhV,MAAM,yFAKtBsP,EAAOu0C,cAAgB,SAAuBF,GAS5C,OARK3hD,KAAK4hD,SAAY5hD,KAAK6pD,kBACpBlI,IACHA,EAAS,WAGX3hD,KAAK8pD,kBAAkBnI,IAGlB3hD,MAGTsN,EAAOy8C,mBAAqB,SAA4BpI,GACtD,GAAKA,EAaH3hD,KAAK6pD,gBAAkBlI,EAEvB3hD,KAAK8pD,kBAAkBnI,OAfZ,CACX,IAAIqI,GAAY,EAEZhqD,KAAK6pD,kBACPG,GAAY,UAGPhqD,KAAK6pD,gBAERG,GACFhqD,KAAK0hD,UAAU1hD,KAAK4hD,SAQxB,OAAO5hD,MAGTsN,EAAOw8C,kBAAoB,SAA2BnI,GACpD,IAAIsI,EAAQjqD,KAAKipD,eAEbgB,GAASA,EAAM5hD,OAAS4hD,EAAM5hD,MAAMs5C,SAAWA,IACjDsI,EAAM5hD,MAAMs5C,OAASA,IAIzBr0C,EAAO64C,aAAe,SAAsBtpB,EAAOqtB,GACjD,GAAKrtB,GAAUqtB,EAAf,CAIA,IAAI9X,EAAQ8X,EAAUjvD,QAAQ4hC,GAE1BuV,GAAS,GACX8X,EAAUhvD,OAAOk3C,EAAO,KAI5B9kC,EAAO2wC,oBAAsB,WAC3B,GAAKj+C,KAAKo/C,QAAV,CAIA,IAAK,IAAIroD,EAAI,EAAGiO,EAAIhF,KAAKo/C,QAAQnoD,OAAQF,EAAIiO,EAAGjO,IAC9CiJ,KAAKo/C,QAAQroD,GAAGozD,OAASpzD,EAG3BiJ,KAAKo/C,QAAQ19C,MAAK,SAAUjF,EAAGC,GAC7B,IAAI8G,EAAI/G,EAAE28C,YAAc18C,EAAE08C,YAE1B,OAAU,IAAN51C,EACK/G,EAAE0tD,OAASztD,EAAEytD,OAGf3mD,OAIX8J,EAAO4qC,WAAa,SAAoB+E,EAAWtwB,GAC7C3sB,KAAKgpD,gBAIThpD,KAAK8rB,KAAK,IAAMmxB,EAAWtwB,GAC3B3sB,KAAK8rB,KAAKmxB,EAAWtwB,KAGvBrf,EAAOyzC,MAAQ,WACb/gD,KAAKyhD,kBAEDzhD,KAAKuY,QAAe,QACtBvY,KAAKolD,SAASplD,KAAKuY,QAAe,cAC3BvY,KAAKuY,QAAe,OAGzBvY,KAAKuY,QAAiB,UACxBvY,KAAKqlD,WAAWrlD,KAAKuY,QAAiB,gBAC/BvY,KAAKuY,QAAiB,SAG/BvY,KAAKoqD,iBAELpqD,KAAKyyC,eAAekL,SAEpB39C,KAAK8+C,SAAU,EAEf9+C,KAAKqqD,mBAELrqD,KAAKmoD,UAAYxxD,KAGnB2W,EAAOswC,cAAgB,WACrB,IAAIrQ,EAAWvtC,KAAKuY,QAAkB,SAClCyW,EAAQgxB,EAAItjB,iBAAiB6Q,GACjCvtC,KAAK69C,UAAY,IAAI7uB,EAAMhvB,MAE3BA,KAAK69C,UAAUH,QAGjBpwC,EAAOmlC,aAAe,WACpB,OAAOzyC,KAAK69C,WAGdvwC,EAAO88C,eAAiB,WAOlBpqD,KAAKsgD,YACPtgD,KAAKsgD,WAAW5C,OAGlB19C,KAAKsqD,YAVL,SAAmBztB,GACbA,GACFA,EAAM6gB,SAQiB19C,KAAK8lD,cAGlCx4C,EAAOy4C,WAAa,SAAoBxlD,GAItC,IAHA,IAAI89C,EAASr+C,KAAKsgD,WAAa,CAACtgD,KAAKsgD,YAAYhqD,OAAO0J,KAAKo/C,SAAWp/C,KAAKo/C,QACzE1jD,EAAS,GAEJ3E,EAAI,EAAGA,EAAIsnD,EAAOpnD,OAAQF,IAC5BwJ,IAAUA,EAAOjI,KAAK0H,KAAMq+C,EAAOtnD,KACtC2E,EAAOZ,KAAKujD,EAAOtnD,IAIvB,OAAO2E,GAGT4R,EAAOg9C,WAAa,SAAoB3wD,GACtC,KAAI3C,UAAUC,OAAS,GAAvB,CAIA,IAAIszD,EAAajvD,MAAMnD,UAAUmB,MAAMhB,KAAKtB,UAAW,GAEnDuzD,IAAejvD,MAAMC,QAAQgvD,KAC/BA,EAAa,CAACA,IAKhB,IAFA,IAAIlM,EAAS,GAEJtnD,EAAI,EAAG4E,EAAM4uD,EAAWtzD,OAAQF,EAAI4E,EAAK5E,IAChDsnD,EAASA,EAAO/nD,OAAOi0D,EAAWxzD,IAGpC,IAAK,IAAI0d,EAAI,EAAGC,EAAO2pC,EAAOpnD,OAAQwd,EAAIC,EAAMD,IAC9C9a,EAAGrB,KAAKqB,EAAI0kD,EAAO5pC,MAIvBnH,EAAOgyC,cAAgB,SAAuB3yB,GACvCA,GAIiB,aAAlBA,EAAY,cACP3sB,KAAKgmD,YAAYr5B,EAAW,KACnC3sB,KAAKgmD,YAAYr5B,EAAW,KAAKA,EAAc,SAInDrf,EAAOm0C,gBAAkB,WACvB,IAAIzZ,EAAUhoC,KAAKi3C,aACfiH,EAAUl+C,KAAKg3C,aAEfwN,EAAcxkD,KAAKqhD,kBAAkBpK,aACrCyN,EAAc1kD,KAAKqhD,kBAAkBrK,cAErC5/C,EAAM4wC,KAAyB,IAAbA,GAAkBA,EAAUwc,IAChDxkD,KAAKukD,WAAWC,IAGdptD,EAAM8mD,KAAyB,IAAbA,GAAkBA,EAAUwG,IAChD1kD,KAAKykD,WAAWC,IAGlB1c,EAAUhoC,KAAKi3C,eACfiH,EAAUl+C,KAAKg3C,eAGbh3C,KAAKukD,WAAWrG,IAGd9mD,EAAM4I,KAAKugD,aAAevgD,KAAKugD,WAAavY,KAC9ChoC,KAAKugD,WAAavY,GAGhBhoC,KAAKugD,WAAarC,IACpBl+C,KAAKugD,WAAarC,UAGbl+C,KAAK+hD,WACZ,IAAI1uB,EAAarzB,KAAK62C,gBACtB72C,KAAK+hD,WAAa1uB,EAAWsB,QAAQ30B,KAAKwgD,SAE1CxgD,KAAKwqD,gBAEL,IAAIjd,EAAWvtC,KAAKyyC,eAEhBlF,GACFA,EAASkd,kBAIbn9C,EAAOuzC,qBAAuB,WAC5B,IAAK7gD,KAAKmhD,cACR,OAAO,KAGT,IACI96C,EAAOC,EADPokD,EAAe1qD,KAAKmhD,cAGxB,GAAK/pD,EAAMszD,EAAarkD,QAAWjP,EAAMszD,EAAapkD,QAS/C,IAAKlP,EAAMszD,EAAa/yC,cAAiBvgB,EAAMszD,EAAa9yC,cAIjE,MAAM,IAAI5Z,MAAM,iCAHhBqI,EAAQsP,SAAS+0C,EAAa/yC,YAAa,GAC3CrR,EAASqP,SAAS+0C,EAAa9yC,aAAc,OAXgB,CAC7DvR,EAAQqkD,EAAarkD,MACrBC,EAASokD,EAAapkD,OACtB,IAAIy6B,EAAM/gC,KAAKkgC,sBAEH,IAARa,GAAa2pB,EAAoB,QACnCrkD,GAAS06B,EACTz6B,GAAUy6B,GASd,OAAO,IAAI9wB,GAAK5J,EAAOC,IAGzBgH,EAAOszC,eAAiB,SAAwB+J,GAQ9C,OAPA3qD,KAAKqG,MAAQskD,EAAa,MAC1B3qD,KAAKsG,OAASqkD,EAAc,OAE5B3qD,KAAKyyC,eAAemY,cAAcD,GAElC3qD,KAAKwqD,gBAEExqD,MAGTsN,EAAOg2C,cAAgB,WACrB,OAAOtjD,KAAK+hD,YAGdz0C,EAAO60C,cAAgB,SAAuBF,GAC5CjiD,KAAK+hD,WAAaE,EAEdjiD,KAAKg+B,kBAAoBh+B,KAAKs+B,aAChCt+B,KAAK8oD,cAAgB7G,GAGvBjiD,KAAKwqD,iBAGPl9C,EAAOu7C,6BAA+B,SAAsC3B,EAAYt5C,GACtF,GAAIA,EAAM5R,IAAMgE,KAAKqG,MAAQ,GAAKuH,EAAMR,IAAMpN,KAAKsG,OAAS,EAC1D,OAAOtG,KAGT,IAAIrD,EAAIqD,KAAK0gC,uBAAuB9yB,GAAOS,KAAKrO,KAAKksC,YAAYlsC,KAAKsjD,kBAElErB,EAAUjiD,KAAKkjD,YAAYljD,KAAKksC,YAAYgb,GAAY34C,IAAI5R,IAIhE,OAFAqD,KAAKmiD,cAAcF,GAEZjiD,MAGTsN,EAAO40C,cAAgB,SAAuBqH,GAC5C,IAAKA,EACH,OAAO,EAGT,IAAIlG,EAASrjD,KAAKwjD,cAElB,OAAKH,GAIEA,EAAOtsC,SAASwyC,IAGzBj8C,EAAOu9C,qBAAuB,SAA8BC,GAC1D,IAAIzzC,EAAM,IAAInI,GAAMlP,KAAKqG,MAAQ,EAAIykD,EAAM9uD,EAAGgE,KAAKsG,OAAS,EAAIwkD,EAAM19C,GAElE29C,EAAU/qD,KAAK0oD,qBAAqBrxC,GAIxC,OAFArX,KAAKmiD,cAAc4I,GAEZA,GAGTz9C,EAAO09C,eAAiB,SAAwB31C,GAC9C,OAAKA,GAGHrV,KAAKyyC,eAAeuY,eAAe31C,GAEnCrV,KAAK8oD,cAAgB9oD,KAAKsjD,gBAC1BtjD,KAAK2gD,cAAgB3gD,KAAK2gD,cAAczyC,IAAImH,GACrCrV,MANAA,KAAK2gD,eAUhBrzC,EAAOy6C,aAAe,WACpB,IAAI1yC,EAASrV,KAAKirD,2BAEdC,EAAclrD,KAAKgrD,iBAMvB,OAJI31C,IACF61C,EAAcA,EAAYh9C,IAAImH,IAGzB61C,GAGT59C,EAAO69C,mBAAqB,WAC1BnrD,KAAK2gD,cAAgB,IAAIzxC,GAAM,EAAG,GAClClP,KAAK8oD,cAAgB9oD,KAAKsjD,iBAG5Bh2C,EAAOu2C,eAAiB,SAAwB99C,GAC9C,YAAcjK,IAATiK,GAAsBA,IAAS/F,KAAKugD,iBAAgCzkD,IAAjBkE,KAAKorD,QAElDrlD,IAAS/F,KAAK0mC,kBAAkC5qC,IAAnBkE,KAAKqrD,UACpCrrD,KAAKqrD,WAGVj0D,EAAM2O,KACRA,EAAO/F,KAAKugD,YAGPvgD,KAAKqhD,kBAAkB9R,cAAcxpC,IATnC/F,KAAKorD,SAYhB99C,EAAO02C,gBAAkB,WACvB,OAAOhkD,KAAKqhD,kBAAkBzK,kBAGhCtpC,EAAO4+B,YAAc,SAAqBof,EAAQvlD,EAAM8tB,GAEtD,OADA9tB,EAAO3O,EAAM2O,GAAQ/F,KAAKw/B,UAAYz5B,EAC/B/F,KAAKqhD,kBAAkBtK,oBAAoBlhB,UAAUy1B,EAAQtrD,KAAK6jD,eAAe99C,GAAO8tB,IAGjGvmB,EAAO41C,YAAc,SAAqBt1C,EAAO7H,EAAM8tB,GAErD,OADA9tB,EAAO3O,EAAM2O,GAAQ/F,KAAKw/B,UAAYz5B,EAC/B/F,KAAKqhD,kBAAkBtK,oBAAoBhhB,YAAYnoB,EAAO5N,KAAK6jD,eAAe99C,GAAO8tB,IAGlGvmB,EAAOu5B,cAAgB,SAAuBj5B,EAAO7H,EAAM8tB,GAQzD,OAPIA,GACFA,EAAI73B,EAAI4R,EAAM5R,EACd63B,EAAIzmB,EAAIQ,EAAMR,GAEdymB,EAAMjmB,EAAMI,OAGT5W,EAAM2O,GAIJ8tB,EAHEA,EAAInlB,OAAO1O,KAAK6jD,eAAe99C,GAAQ/F,KAAK6jD,mBAMvDv2C,EAAOi+C,oBAAsB,SAA6B39C,EAAO7H,EAAM8tB,GAQrE,OAPIA,GACFA,EAAI73B,EAAI4R,EAAM5R,EACd63B,EAAIzmB,EAAIQ,EAAMR,GAEdymB,EAAMjmB,EAAMI,OAGT5W,EAAM2O,GAIJ8tB,EAHEA,EAAInlB,OAAO1O,KAAK6jD,iBAAmB7jD,KAAK6jD,eAAe99C,KAMlEuH,EAAOo7C,qBAAuB,SAA8B/oB,EAAgB9L,GAC1E,OAAO7zB,KAAKkjD,YAAYljD,KAAK0gC,uBAAuBf,OAAgB7jC,EAAW+3B,QAAM/3B,EAAW+3B,IAGlGvmB,EAAO+8C,iBAAmB,WACxB,IAAI38B,EAAQsyB,EAAI7nD,UAEhB,GAAKu1B,EAAMuzB,aAIX,IAAK,IAAIlqD,EAAI,EAAGiO,EAAI0oB,EAAMuzB,aAAahqD,OAAQF,EAAIiO,EAAGjO,IACpD22B,EAAMuzB,aAAalqD,GAAGuB,KAAK0H,OAIxBggD,EAv9CG,CAw9CV/wB,GAAY1E,GAAUgS,GAAWhP,OAEnCuyB,GAAMtxB,QAAQ,CACZ24B,mBACMvH,GAAQ,IAAI5uB,GAAW,EAAG,GACvB,SAAUk2B,EAAYnhD,EAAM8tB,GACjC,IAAI23B,EAAWxrD,KAAK62C,gBAAgBliB,QAAQuyB,EAAYtH,IACxD,OAAO5/C,KAAKksC,YAAYsf,EAAUzlD,EAAM8tB,KAG5CwzB,kBAAmB,WACjB,IAAIzH,EAAQ,IAAI5uB,GAAW,EAAG,GAC9B,OAAO,SAAUpjB,EAAO7H,EAAM8tB,GAC5B,IAAI23B,EAAWxrD,KAAKkjD,YAAYt1C,EAAO7H,EAAM65C,GAE7C,OAAO5/C,KAAK62C,gBAAgBzjB,UAAUo4B,EAAU33B,IALjC,GAQnB0zB,sBAAuB,WACrB,IAAI3H,EAAQ,IAAI5uB,GAAW,EAAG,GAC9B,OAAO,SAAUk2B,EAAYrzB,EAAKmd,GAChC,OAAOhxC,KAAKyrD,gBAAgBzrD,KAAK62C,gBAAgBliB,QAAQuyB,EAAYtH,GAAQ/rB,EAAKmd,IAH/D,GAMvB0W,sBAAuB,WACrB,IAAI9H,EAAQ,IAAI5uB,GAAW,EAAG,GAC9B,OAAO,SAAUy2B,EAAW5zB,GAC1B,OAAO7zB,KAAK62C,gBAAgBzjB,UAAUpzB,KAAK0rD,gBAAgBjE,EAAW7H,GAAQ/rB,IAH3D,GAMvB8zB,2BAA4B,WAC1B,IAAI/H,EAAQ,IAAI5uB,GAAW,EAAG,GAC9B,OAAO,SAAUk2B,EAAYnhD,EAAM8tB,GACjC,IAAI83B,EAAc3rD,KAAK62C,gBAAgBliB,QAAQuyB,EAAYtH,GAC3D,OAAO5/C,KAAK4rD,qBAAqBD,EAAa5lD,EAAM8tB,IAJ5B,GAO5Bg0B,2BAA4B,WAC1B,IAAIjI,EAAQ,IAAI5uB,GAAW,EAAG,GAC9B,OAAO,SAAU2O,EAAgB9L,GAC/B,IAAI83B,EAAc3rD,KAAK0oD,qBAAqB/oB,EAAgBigB,GAE5D,OAAO5/C,KAAK62C,gBAAgBzjB,UAAUu4B,EAAa93B,IAL3B,GAQ5Bg4B,mBACMnM,GAAS,IAAIxwC,GAAM,EAAG,GACtBywC,GAAS,IAAIzwC,GAAM,EAAG,GACnB,SAAU+1C,GACf,IAAI1T,EAAW,IAAI9b,GAAYz1B,KAAK0gC,uBAAuBukB,EAAgB/nC,OAAOwiC,SAAS5jD,EAAW4jD,IAAS1/C,KAAK0gC,uBAAuBukB,EAAgB9nC,OAAOwiC,SAAS7jD,EAAW6jD,KACtL,OAAO3/C,KAAKgjD,eAAezR,KAG/Bua,gBAAiB,WACf,IAAIpM,EAAS,IAAIxwC,GAAM,EAAG,GACtBywC,EAAS,IAAIzwC,GAAM,EAAG,GAC1B,OAAO,SAAU2oB,EAAOC,EAAO/xB,GAC7B,IAAIstB,EAAarzB,KAAK62C,gBAEtB,IAAKxjB,EACH,OAAO,KAGT,IAAIyC,EAAQ91B,KAAKslD,WAAatlD,KAAKslD,SAASv/C,GACxC++B,EAAS9kC,KAAKsd,YACd8J,EAASiM,EAAWuE,OAAOkN,EAAQjN,EAAOC,GAC1CgQ,EAAK9nC,KAAKg5C,sBAAsBlU,OAAQhpC,EAAW4jD,GACnDl+B,EAAKxhB,KAAKg5C,sBAAsB5xB,OAAQtrB,EAAW6jD,GAIvD,OAFAn+B,EAAGnT,KAAKy5B,GAAIp5B,OAAOonB,GAAOvoB,OAEnB,IAAI0C,GAAKuR,EAAGxlB,EAAGwlB,EAAGpU,IAlBZ,GAqBjB2nC,iBACM0K,GAAQ,IAAIvwC,GAAM,EAAG,GAClB,SAAU2oB,EAAOC,EAAO/xB,EAAMgmD,GACnC,IAAI14B,EAAarzB,KAAK62C,gBAEtB,IAAKxjB,EACH,OAAO,KAGT,IAAIyR,EAASinB,GAAe/rD,KAAKsd,YAC7B8J,EAASiM,EAAWuE,OAAOkN,EAAQjN,EAAOC,GAC1CgQ,EAAK9nC,KAAKinD,aAAaniB,EAAQ/+B,EAAM05C,IACrCj+B,EAAKxhB,KAAKinD,aAAa7/B,EAAQrhB,GAInC,OAFAyb,EAAGnT,KAAKy5B,GAAIv6B,OAELiU,IAGXwqC,iBACMzM,GAAS,IAAIvuB,GAAW,EAAG,GAC3BwuB,GAAS,IAAIxuB,GAAW,EAAG,GACxB,SAAU3qB,EAAOC,GACtB,IAAI+sB,EAAarzB,KAAK62C,gBAEtB,IAAKxjB,EACH,OAAO,KAGT,IAAI44B,EAAUjsD,KAAK82C,gBACfn+C,EAAIszD,EAAa,IAAIA,EAAgB,QAAK,EAAI,EAC9C7kC,EAASm4B,GAAO76C,IAAI1E,KAAKqG,MAAQ,EAAIA,EAAOrG,KAAKsG,OAAS,EAAI3N,EAAI2N,GAClE6qB,EAAQnxB,KAAK4nD,sBAAsBxgC,EAAQo4B,IAC/C,OAAOnsB,EAAWgE,cAAcr3B,KAAKsd,YAAa6T,KAGtD+6B,gBAAiB,WACf,IAAIzM,EAAQ,IAAIvwC,GAAM,EAAG,GACrB0wC,EAAQ,IAAI5uB,GAAW,EAAG,GAC9B,OAAO,SAAU/xB,EAAIC,EAAI6G,GACvB,IAAIstB,EAAarzB,KAAK62C,gBAEtB,IAAKxjB,EACH,OAAO,KAGT,IAAI7vB,EAAIxD,KAAKksC,YAAYlsC,KAAKsjD,gBAAiBv9C,EAAM05C,GAErDj8C,EAAEyK,KAAKhP,EAAIC,GAEX,IAAIkoB,EAASpnB,KAAKonD,aAAa5jD,EAAGuC,EAAM65C,GACxC,OAAOvsB,EAAWgE,cAAcr3B,KAAKsd,YAAa8J,IAfrC,GAkBjB+kC,cAAe,WACb,IAAI1M,EAAQ,IAAIvwC,GAAM,EAAG,GACzB,OAAO,SAAUg4C,EAAYkF,EAAIC,GAC/B,IAAIz+C,EAAQ5N,KAAKg5C,sBAAsBkO,OAAYprD,EAAW2jD,GAC9D,OAAOz/C,KAAK4nD,sBAAsBh6C,EAAMK,KAAKm+C,EAAIC,KAJtC,GAOf5rB,aAAc,WACZ,IAAIgf,EAAQ,IAAIvwC,GAAM,EAAG,GACzB,OAAO,SAAUnJ,EAAM8tB,GACrB,IAEIy4B,EAFAC,EAASvsD,KAUb,YANclE,IAATiK,GAAsBA,IAAS/F,KAAKugD,aAAevgD,KAAKwsD,aAElDzmD,IAAS/F,KAAK0mC,aAAe1mC,KAAKysD,iBAC3CH,EAAStsD,KAAKysD,gBAFdH,EAAStsD,KAAKwsD,aAKZF,EACEz4B,GACFA,EAAInvB,IAAI4nD,EAAa,KAAGA,EAAa,KAAGA,EAAa,KAAGA,EAAa,MAC9Dz4B,GAGFy4B,EAAOt+C,OAGFhO,KAAK8qC,qBACJzV,WAAU,SAAU7xB,GACjC,OAAO+oD,EAAO7rB,uBAAuBl9B,EAAGuC,EAAM05C,KAC7C5rB,IAzBO,GA4BdmvB,eAAgB,WACd,IAAIzD,EAAS,IAAIvuB,GAAW,EAAG,GAC3BwuB,EAAS,IAAIxuB,GAAW,EAAG,GAC/B,OAAO,SAAUugB,GACf,IAAImb,EAAQnb,EAASr0B,SACjByvC,EAAQpb,EAASp0B,SACjB+4B,EAAal2C,KAAK82C,gBAElB8V,GAAQ1W,GAAcA,EAAW70C,MAAQ60C,EAAW50C,MAAQ,CAACorD,EAAM1wD,EAAG2wD,EAAM3wD,GAAK,CAAC2wD,EAAM3wD,EAAG0wD,EAAM1wD,GACjG6wD,EAAOD,EAAK,GACZE,EAAOF,EAAK,GAEZG,GAAS7W,GAAcA,EAAW3gC,IAAM2gC,EAAWC,OAAS,CAACwW,EAAMv/C,EAAGs/C,EAAMt/C,GAAK,CAACs/C,EAAMt/C,EAAGu/C,EAAMv/C,GACjG4/C,EAAOD,EAAM,GACbE,EAAOF,EAAM,GAEblwD,EAAM6vD,EAAMhoD,IAAImoD,EAAMI,GACtBnwD,EAAM6vD,EAAMjoD,IAAIooD,EAAME,GAC1B,OAAO,IAAI/5B,GAAOjzB,KAAKonD,aAAavqD,OAAKf,EAAWyjD,GAASv/C,KAAKonD,aAAatqD,OAAKhB,EAAW0jD,GAASx/C,KAAK62C,kBAlBjG,GAqBhBoU,yBAA0B,WACxB,IAAIxL,EAAQ,IAAIvwC,GAAM,EAAG,GACzB,OAAO,WACL,GAAIlP,KAAKu+B,YACP,OAAO,KAGT,IAAI0jB,EAAUjiD,KAAKsjD,gBAEnB,OAAItjD,KAAK8oD,gBAAkB9oD,KAAK8oD,cAAcj6C,OAAOozC,GAC5CjiD,KAAK4rD,qBAAqB5rD,KAAK8oD,eAAez6C,KAAKrO,KAAK4rD,qBAAqB3J,OAASnmD,EAAW2jD,IAGnG,MAbe,GAgB1BiM,gBAAiB,WACf,IAAIjM,EAAQ,IAAIvwC,GAAM,EAAG,GACzB,OAAO,SAAUu4C,EAAW5zB,GAC1B,OAAO7zB,KAAK0oD,qBAAqB1oD,KAAKgoD,0BAA0BP,EAAWhI,GAAQ5rB,IAHtE,GAMjB+3B,qBAAsB,WACpB,IAAInM,EAAQ,IAAIvwC,GAAM,EAAG,GACzB,OAAO,SAAUy8C,EAAa5lD,EAAM8tB,EAAKmd,GACvC,OAAOhxC,KAAK4/B,uBAAuB5/B,KAAKksC,YAAYyf,EAAa5lD,EAAM05C,GAAQ15C,EAAMirC,GAAY,EAAGnd,IAHlF,GAMtB43B,gBAAiB,WACf,IAAIhM,EAAQ,IAAIvwC,GAAM,EAAG,GACzB,OAAO,SAAUy8C,EAAa93B,EAAKmd,GACjC,IAAIrR,EAAiB3/B,KAAK4rD,qBAAqBD,OAAa7vD,EAAW2jD,EAAOzO,GAE9E,OAAOhxC,KAAK8nD,0BAA0BnoB,EAAgB9L,IALzC,GAQjBq5B,kBAAmB,WACjB,IAAIzN,EAAQ,IAAIvwC,GAAM,EAAG,GACzB,OAAO,SAAUu4C,EAAW1hD,EAAM8tB,GAChC,OAAO7zB,KAAK0gC,uBAAuB1gC,KAAKgoD,0BAA0BP,EAAWhI,GAAQ15C,EAAM8tB,IAH5E,GAMnBs5B,kBAAmB,WACjB,IAAIvN,EAAQ,IAAI5uB,GAAW,EAAG,GAC9B,OAAO,SAAUpjB,EAAO7H,EAAM8tB,GAC5B,OAAO7zB,KAAKyrD,gBAAgBzrD,KAAKkjD,YAAYt1C,EAAO7H,EAAM65C,GAAQ/rB,IAHnD,KAOrBisB,GAAMrxB,aAAaoxB,IAEnB,IAAIuN,GAA4B,SAAUt9B,GAGxC,SAASs9B,IACP,OAAOt9B,EAAS3sB,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAeygD,EAA2Bt9B,GAM1C,IAAIxiB,EAAS8/C,EAA0Bj1D,UA6BvC,OA3BAmV,EAAO4f,SAAW,WACXltB,KAAKonB,QAIVpnB,KAAKonB,OAAOpP,GAAG,YAAahY,KAAKqtD,eAAgBrtD,OAGnDsN,EAAO8f,YAAc,WACdptB,KAAKonB,QAIVpnB,KAAKonB,OAAOnP,IAAI,YAAajY,KAAKqtD,eAAgBrtD,OAGpDsN,EAAO+/C,eAAiB,SAAwB1gC,GAC9C,IAAI9uB,EAAMmC,KAAKonB,OAEf,GAAIvpB,EAAI0a,QAAyB,gBAAG,CAClC,IAAI+0C,EAAUzvD,EAAI2hC,UACdz5B,EAAO4mB,EAAgB,SAAY,SAAIn0B,KAAKkV,KAAK4/C,GAAW,EAAI90D,KAAKuV,MAAMu/C,GAAW,EAE1FzvD,EAAIwmD,eAAet+C,EAAM4mB,EAAsB,kBAI5CygC,EApCuB,CAqC9BtgC,IAEFgzB,GAAMrxB,aAAa,CACjB,iBAAmB,IAErBqxB,GAAMkB,cAAc,aAAc,kBAAmBoM,IAErD,IAAIG,GAAiB,SAAUz9B,GAG7B,SAASy9B,IACP,OAAOz9B,EAAS3sB,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAe4gD,EAAgBz9B,GAM/B,IAAIxiB,EAASigD,EAAep1D,UAmP5B,OAjPAmV,EAAO4f,SAAW,WAChB,IAAIrvB,EAAMmC,KAAKonB,OAEf,GAAKvpB,EAAL,CAIA,IAAImX,EAAMnX,EAAIwiD,QAAQmN,YAAc3vD,EAAIsjD,cACxCnhD,KAAKytD,aAAe,IAAI59B,GAAY7a,EAAK,CACvC,SAAYhV,KAAK0tD,UAAUtnB,KAAKpmC,MAChC,YAAc,IAGhBA,KAAKytD,aAAaz1C,GAAG,YAAahY,KAAKgwB,aAAchwB,MAAMgY,GAAG,YAAahY,KAAK2tD,aAAc3tD,MAAMgY,GAAG,WAAYhY,KAAK4tD,YAAa5tD,MAAMgY,GAAG,UAAWhY,KAAK6tD,WAAY7tD,MAAMgtB,WAGlL1f,EAAO8f,YAAc,WACnBptB,KAAKytD,aAAax1C,IAAI,YAAajY,KAAKgwB,aAAchwB,MAAMiY,IAAI,YAAajY,KAAK2tD,aAAc3tD,MAAMiY,IAAI,WAAYjY,KAAK4tD,YAAa5tD,MAAMiY,IAAI,UAAWjY,KAAK6tD,WAAY7tD,MAE9KA,KAAKytD,aAAangC,gBAEXttB,KAAKytD,cAGdngD,EAAOogD,UAAY,SAAmBI,GACpC,SAAI9tD,KAAKonB,OAAOmX,cAAev+B,KAAK+tD,QAAQD,KAO9CxgD,EAAOygD,QAAU,SAAiBphC,GAChC,QAAKA,IAIDA,EAAMmhC,WACRnhC,EAAQA,EAAMmhC,UAGT9tD,KAAKonB,OAAO4mC,aAAarhC,KAGlCrf,EAAO0iB,aAAe,SAAsBrD,UACnC3sB,KAAKiuD,qBACLjuD,KAAKkuD,MAEkB,IAA1BvhC,EAAMmhC,SAAS39B,QAAgBxD,EAAMmhC,SAASK,SAC5CnuD,KAAKonB,OAAO7O,QAAoB,YAAKvY,KAAKonB,OAAO7O,QAAmB,aACtEvY,KAAKkuD,MAAQ,eAENluD,KAAKonB,OAAO7O,QAAiB,UACtCvY,KAAKkuD,MAAQ,QAGfluD,KAAKonB,OAAOgnC,UAAUpuD,KAAKonB,OAAOinC,gBAElC15C,GAAegY,EAAgB,WAGjCrf,EAAOqgD,aAAe,SAAsBhhC,GAC1C3sB,KAAKiuD,cAAgBt3D,IAEF,SAAfqJ,KAAKkuD,MACPluD,KAAKsuD,WAAW3hC,GACQ,gBAAf3sB,KAAKkuD,OACdluD,KAAKuuD,aAAa5hC,IAItBrf,EAAOsgD,YAAc,SAAqBjhC,GAC9B3sB,KAAKonB,OAEPonC,eAAe7hC,EAAgB,YAIpB,SAAf3sB,KAAKkuD,MACPluD,KAAKspD,QAAQ38B,GACW,gBAAf3sB,KAAKkuD,OACdluD,KAAKyuD,UAAU9hC,KAInBrf,EAAOugD,WAAa,SAAoBlhC,GACnB,SAAf3sB,KAAKkuD,MACPluD,KAAK0uD,SAAS/hC,GACU,gBAAf3sB,KAAKkuD,OACdluD,KAAK2uD,WAAWhiC,UAGX3sB,KAAKiuD,qBACLjuD,KAAK4uD,cAGdthD,EAAOuhD,OAAS,SAAgBliC,GAC9B3sB,KAAK8uD,KAAOniC,EAAgB,SAAE3wB,EAC9BgE,KAAK+uD,KAAOpiC,EAAgB,SAAEvf,EAC9BpN,KAAKgvD,OAAShvD,KAAK8uD,KACnB9uD,KAAKivD,OAASjvD,KAAK+uD,MAGrBzhD,EAAOghD,WAAa,SAAoB3hC,GACtC3sB,KAAK6uD,OAAOliC,GAEZ,IAAI9uB,EAAMmC,KAAKonB,OACfvpB,EAAI0kC,YAAY5V,GAChB,IAAInxB,EAAI2a,GAAuBtY,EAAIqxD,gBAAgBviC,EAAMmhC,UAAWjwD,EAAIqjD,gBACxElhD,KAAKmvD,cAAgBtxD,EAAI6qD,qBAAqBltD,IAGhD8R,EAAOg8C,QAAU,SAAiB38B,GAChC,GAAK3sB,KAAKiuD,cAAV,CAIA,IAAIpwD,EAAMmC,KAAKonB,OACX5rB,EAAI2a,GAAuBtY,EAAIqxD,gBAAgBviC,EAAMmhC,UAAWjwD,EAAIqjD,gBAExErjD,EAAIgrD,6BAA6B7oD,KAAKmvD,cAAe3zD,GAErDqC,EAAI2kC,SAAS7V,KAGfrf,EAAOohD,SAAW,SAAkB/hC,GAClC,GAAK3sB,KAAKiuD,cAAV,CAIA,IAAIpwD,EAAMmC,KAAKonB,OACXzqB,EAAIhG,IAAQqJ,KAAKiuD,cACjBmB,EAAKziC,EAAgB,SAAE3wB,EACvBqzD,EAAK1iC,EAAgB,SAAEvf,EACvBnO,EAAKmwD,EAAKpvD,KAAKgvD,OACf9vD,EAAKmwD,EAAKrvD,KAAKivD,OAEnBjvD,KAAKsvD,SAEDzxD,EAAI0a,QAAsB,eAAMoU,EAAMmE,YAAcjzB,EAAIqkD,cAAcrkD,EAAIylD,kBAAoB3mD,EAAI,KAAOnE,KAAK+D,IAAI2C,GAAM1G,KAAK+D,IAAI0C,GAAM,GACzItC,EAAI,EAAIA,GAAKnE,KAAK+D,IAAI0C,GAAMzG,KAAK+D,IAAI2C,IAAO,IAC5CrB,EAAI0xD,MAAM,IAAIrgD,GAAMjQ,EAAIC,GAAK,CAC3B,SAAYvC,KAGdkB,EAAI4kC,UAAU9V,KAIlBrf,EAAOihD,aAAe,SAAsB5hC,GAC1C3sB,KAAK6uD,OAAOliC,UAEL3sB,KAAKwvD,YACZxvD,KAAK4uD,aAAe5uD,KAAKonB,OAAO+e,aAChCnmC,KAAKonB,OAAOsb,kBAAkB/V,GAC9B3sB,KAAKyvD,IAAM,GAGbniD,EAAOmhD,UAAY,SAAmB9hC,GACpC,IAAI9uB,EAAMmC,KAAKonB,OACXgoC,EAAKziC,EAAgB,SAAE3wB,EACvBqzD,EAAK1iC,EAAgB,SAAEvf,EACvBsiD,EAAW7xD,EAAIwgC,WACfsxB,EAAa9xD,EAAIsoC,aACjBlnC,EAAKzG,KAAK+D,IAAI6yD,EAAKpvD,KAAK8uD,MACxB5vD,EAAK1G,KAAK+D,IAAI8yD,EAAKrvD,KAAK+uD,MAc5B,GAZK/uD,KAAKwvD,cACJ3xD,EAAI0a,QAAyB,gBAC/BvY,KAAKwvD,YAAc,eAEnBxvD,KAAKwvD,YADIvwD,EAAKC,EACK,SACVD,EAAKC,EACK,QAEA,YAIE,UAArBc,KAAKwvD,aAAwC,IAAbE,GAAkBxwD,EAAK,IAA3D,CAIA,GAAIc,KAAKwvD,YAAYv0D,QAAQ,WAAa,GAAK4C,EAAI0a,QAAoB,WAAG,CACxE,IAAIq3C,EAAK,EAGPA,EADE/xD,EAAI0a,QAAmB,WAAKtZ,EAAKC,GAC7B,IAAOc,KAAK8uD,KAAOM,GAChBA,EAAKvxD,EAAIwI,MAAQ,EACrB,IAAOrG,KAAK+uD,KAAOM,IAElB,IAAOrvD,KAAK+uD,KAAOM,GAG3B,IAAI12B,EAAU96B,EAAIsoC,aAAeypB,EACjC5vD,KAAKyvD,IAAMzvD,KAAKyvD,KAAO,EACvBzvD,KAAKyvD,KAAOG,EACZ/xD,EAAIwnD,WAAW1sB,GAGb34B,KAAKwvD,YAAYv0D,QAAQ,UAAY,GAAK4C,EAAI0a,QAAmB,WACnE1a,EAAIunD,SAASvnD,EAAIwgC,WAAgC,IAAlBr+B,KAAK+uD,KAAOM,IAG7CrvD,KAAK8uD,KAAOM,EACZpvD,KAAK+uD,KAAOM,EAERxxD,EAAIsoC,eAAiBwpB,GAAc9xD,EAAIwgC,aAAeqxB,GACxD7xD,EAAI8kC,eAAehW,KAIvBrf,EAAOqhD,WAAa,SAAoBhiC,GACtC,IAAI9uB,EAAMmC,KAAKonB,OACXuR,EAAU96B,EAAIsoC,aAElBnmC,KAAKsvD,SAEL,IAAI3yD,EAAIhG,IAAQqJ,KAAKiuD,cAGrB,GAFApwD,EAAI+kC,gBAAgBjW,GAEhBn0B,KAAK+D,IAAIo8B,EAAU34B,KAAK4uD,cAAgB,KAA4B,WAArB5uD,KAAKwvD,aAAiD,iBAArBxvD,KAAKwvD,eAAoC7iC,EAAMmE,YAAcn0B,EAAI,IAAK,CACxJ,IAAIkzD,EAAWhyD,EAAIsoC,aAEnBtoC,EAAI6nD,WAAW,CACb,QAAWmK,EAAW7vD,KAAKyvD,IAAM,GAChC,CACD,OAAU,MACV,SAAY,QAKlBniD,EAAOgiD,OAAS,kBACPtvD,KAAKmvD,qBACLnvD,KAAK8uD,YACL9uD,KAAK+uD,YACL/uD,KAAKgvD,cACLhvD,KAAKivD,QAGP1B,EA1PY,CA2PnBzgC,IAEFgzB,GAAMrxB,aAAa,CACjB,WAAa,EACb,SAAW,EACX,iBAAmB,EACnB,YAAc,EACd,WAAa,IAEfqxB,GAAMkB,cAAc,aAAc,YAAauM,IAC/C,IAAIuC,GAAS,uFAETC,GAA2B,SAAUjgC,GAGvC,SAASigC,IACP,OAAOjgC,EAAS3sB,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAeojD,EAA0BjgC,GAMzC,IAAIxiB,EAASyiD,EAAyB53D,UAyLtC,OAvLAmV,EAAO4f,SAAW,WAChB,IAAIrvB,EAAMmC,KAAKonB,OACXpS,EAAMnX,EAAIwiD,QAAQ2P,WAAanyD,EAAIsjD,cACvCnpC,GAAGhD,EAAK86C,GAAQ9vD,KAAKiwD,wBAAyBjwD,OAGhDsN,EAAO8f,YAAc,WACnB,IAAIvvB,EAAMmC,KAAKonB,OACXpS,EAAMnX,EAAIwiD,QAAQ2P,WAAanyD,EAAIsjD,cACvClpC,GAAIjD,EAAK86C,GAAQ9vD,KAAKiwD,wBAAyBjwD,OAGjDsN,EAAO2iD,wBAA0B,SAAiCnC,EAAUnvD,GAC1E,IAAId,EAAMmC,KAAKonB,OAEf,IAAIvpB,EAAImgC,kBAAmBngC,EAAImwD,aAAaF,GAA5C,CAIA,IAAIzP,EAASxgD,EAAIkoD,YAAW,SAAUlpB,GACpC,SAAIA,EAAMqzB,WAAYrzB,EAAMtkB,QAAwB,mBAOtD,GAAK8lC,EAAOpnD,OAAZ,CAIA,IAAIk5D,EAAe,KACf9kC,EAAY1sB,GAAQmvD,EAASnvD,KAEjC,GAAkB,cAAd0sB,GAA2C,eAAdA,GAA0D,IAA5ByiC,EAAS19B,QAAQn5B,OAC9E+I,KAAKowD,eAAiBz5D,SACjB,IAAmB,UAAd00B,GAAuC,aAAdA,IAA6BrrB,KAAKowD,eAAgB,CACrF,IAAIC,EAAWrwD,KAAKowD,eAIpB,UAHOpwD,KAAKowD,eACDz5D,IAEA05D,EAAW,KACpB,GAAkB,UAAdhlC,EACF,WAEqB,aAAdA,IACT8kC,EAAe,SAInB,IAAIz/B,EAASo9B,EAAS19B,SAAW09B,EAAS19B,QAAQn5B,OAAS,EAAI62D,EAAS19B,QAAQ,GAAK09B,EAAS/8B,gBAAkB+8B,EAAS/8B,eAAe95B,OAAS,EAAI62D,EAAS/8B,eAAe,GAAK+8B,EAElL,GAAKp9B,EAAL,CAIA,IAAIiP,EAAiBxpB,GAAuBua,EAAQ7yB,EAAIsjD,eACpD+F,EAAarpD,EAAIgqD,2BAA2BloB,GAE9B,eAAdtU,GACF1W,GAAem5C,GAGjB,IAAIwC,EAAsB,KACtBC,EAAkB,CACpB,kBAAoB,EACpB,OAAU,SAAgBzuD,GACxB,KAAMA,aAAoBq1C,IACxB,OAAO,EAGT,IAAIqZ,EAAc1uD,EAAS2uD,oBAAoB3C,GAE/C,GAAkB,cAAdziC,GAKF,IAJKilC,GAAuBxuD,EAASyW,QAAgB,SACnD+3C,EAAsBxuD,EAASyW,QAAgB,SAG5CzW,EAAS4pB,QAAQ,eAAiB5pB,EAAS4pB,QAAQ,eAAiB5pB,EAAS4pB,QAAQ,cACxF,OAAO,OAEJ,IAAK5pB,EAAS4pB,QAAQ8kC,KAAiB1uD,EAAS4pB,QAAQykC,GAC7D,OAAO,EAGT,OAAO,GAET,MAAS,EACT,WAAcjJ,EACd,YAAerpD,EAAI0a,QAAmC,0BACtD,OAAU8lC,GAERlqC,EAcJ,SAA2BohC,GACzB,IAAImb,GAAc,EAElB,GAAkB,cAAdrlC,EAA2B,CAC7B,IAAIslC,EAAS,GAEb,GAAIpb,EAAWt+C,OAAS,EACtB,IAAK,IAAIF,EAAIw+C,EAAWt+C,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAC/C,IAAI65D,EAAMrb,EAAWx+C,GAErB,GAAM65D,aAAezZ,GAArB,CAIA,IAAI0Z,EAAMD,EAAI5U,iBAEd2U,EAAOE,GAAOD,EAEdA,EAAIE,SAAShD,GAER9tD,KAAK+wD,eAAkB/wD,KAAK+wD,cAAcC,OAAOH,IACpDD,EAAIE,SAAShD,EAAU,cAGzB4C,EAAcE,EAAIE,SAAShD,EAAU,cAIzCjwD,EAAIksD,mBAAmBuG,GAEvB,IAAIW,EAAajxD,KAAK+wD,eAAiB/wD,KAAK+wD,cAAcG,KAM1D,GALAlxD,KAAK+wD,cAAgB,CACnB,KAAQxb,EACR,OAAUob,GAGRM,GAAcA,EAAWh6D,OAAS,EACpC,IAAK,IAAI4N,EAAKosD,EAAWh6D,OAAS,EAAG4N,GAAM,EAAGA,IAAM,CAClD,IAAIssD,EAAYF,EAAWpsD,GAE3B,GAAMssD,aAAqBha,GAA3B,CAIA,IAAIia,EAAcH,EAAWpsD,GAAIm3C,iBAE5B2U,EAAOS,KACVV,EAAcS,EAAUL,SAAShD,EAAU,mBAI5C,CACL,IAAKvY,IAAeA,EAAWt+C,OAC7B,OAGF,IAAK,IAAIo6D,EAAM9b,EAAWt+C,OAAS,EAAGo6D,GAAO,EAAGA,IAC9C,GAAM9b,EAAW8b,aAAgBla,GAAjC,CAIAuZ,EAAcnb,EAAW8b,GAAKP,SAAShD,GAEnCqC,GACF5a,EAAW8b,GAAKP,SAAShD,EAAUqC,GAGrC,QAIgB,IAAhBO,GACF77C,GAAgBi5C,IAtFa1nB,KAAKpmC,MAEpB,cAAdqrB,GAA2C,cAAdA,EAC/BrrB,KAAKsxD,sBAAwBzzD,EAAIsgC,cAAcozB,iBAAgB,WACzD1zD,EAAImgC,iBAIRngC,EAAIqyD,SAASK,EAAiBp8C,MAGhCtW,EAAIqyD,SAASK,EAAiBp8C,OAgF3B47C,EAhMsB,CAiM7BjjC,IAEFgzB,GAAMrxB,aAAa,CACjB,gBAAkB,EAClB,2BAA6B,IAE/BqxB,GAAMkB,cAAc,aAAc,iBAAkB+O,IACpD,IAKIyB,GAA4B,SAAU1hC,GAGxC,SAAS0hC,EAA0BpqC,GACjC,IAAI2I,EAOJ,OALAA,EAAQD,EAASx3B,KAAK0H,KAAMonB,IAAWpnB,MACjCyxD,gBAAkB1hC,EAAM2hC,YAAYtrB,KAAKp5B,GAAuBA,GAAuB+iB,KAC7FA,EAAM4hC,eAXU,EAAI,IAYpB5hC,EAAM6hC,iBAbY,IAclB7hC,EAAM8hC,OAAS,EACR9hC,EAVTpjB,GAAe6kD,EAA2B1hC,GAa1C,IAAIxiB,EAASkkD,EAA0Br5D,UAmMvC,OAjMAmV,EAAO4f,SAAW,WAChBvZ,GAAY3T,KAAKonB,OAAO+5B,cAAe,QAASnhD,KAAK8xD,eAAgB9xD,OAGvEsN,EAAO8f,YAAc,WACnBlZ,GAAelU,KAAKonB,OAAO+5B,cAAe,QAASnhD,KAAK8xD,iBAG1DxkD,EAAOwkD,eAAiB,SAAwBC,GAC9Cp9C,GAAeo9C,GACfl9C,GAAgBk9C,GAChB,IAAIl0D,EAAMmC,KAAKonB,OAEf,GAAIvpB,EAAImwD,aAAa+D,KAASl0D,EAAI0a,QAAkB,SAClD,OAAO,EAGT,IAAInF,EAAYvV,EAAIsjD,cAEhBzoB,EAAS76B,EAAIm0D,iBAAiB77C,GAAuB47C,EAAK3+C,IAE9D,OAAIvV,EAAI0a,QAAsB,cACvBvY,KAAK6kD,WACR7kD,KAAKiyD,iBAAmB,EACxBjyD,KAAKkyD,iBAAkB,GAGlBlyD,KAAKmyD,UAAUJ,EAAKr5B,IAEpB14B,KAAKoyD,UAAUL,EAAKr5B,IAI/BprB,EAAO6kD,UAAY,SAAmBJ,EAAKr5B,GACzC,IAAIv3B,EAAQ4wD,EAAIM,YAAcl4D,OAAOm4D,WAAWC,eAA8B,GAAbR,EAAIS,OAAcT,EAAIS,OAwBvF,GAtBIrxD,EAzDa,gBAyDc,IACxBnB,KAAKkyD,kBACJ15D,KAAK+D,IAAI4E,GAAS,GACpBnB,KAAKiyD,mBAELjyD,KAAKiyD,iBAAmB,EAGtBjyD,KAAKiyD,kBAAoB,IAC3BjyD,KAAKkyD,iBAAkB,IAIvBlyD,KAAKkyD,kBACP/wD,GAAS,KAIT4wD,EAAIU,UAAYtxD,IAAOA,GAAgB,GAC3CnB,KAAK0yD,gBAAkBX,EACvB/xD,KAAK6xD,QAAU1wD,GAEVnB,KAAK6kD,UAAY7kD,KAAK6xD,OAAQ,CACjC,IAAIh0D,EAAMmC,KAAKonB,OACfpnB,KAAK2yD,YAAcj6B,EACnB76B,EAAIskC,YAAY,KAAMzJ,GAGxB14B,KAAK6uD,UAGPvhD,EAAOuhD,OAAS,WACd,GAAK7uD,KAAK6xD,OAAV,CACA7xD,KAAK6kD,UAAW,EAChB,IAAIhnD,EAAMmC,KAAKonB,OAEVpnB,KAAK4yD,UACR/0D,EAAIsgC,cAAcozB,gBAAgBvxD,KAAKyxD,iBACvCzxD,KAAK4yD,SAAU,KAInBtlD,EAAOokD,YAAc,WACnB,IAAIh0B,EAAS19B,KAIb,GAFAA,KAAK4yD,SAAU,EAEV5yD,KAAK6xD,OAAV,CAIA,IAAIgB,EAAWr6D,KAAK+D,IAAIyD,KAAK6xD,QA5GZ,eA4GuC7xD,KAAK2xD,eAAiB3xD,KAAK4xD,iBAC/E97B,EA1Ge,GA0Ga,EAAIt9B,KAAKoiC,KAAKpiC,KAAK+D,IAAIyD,KAAK6xD,OAASgB,KAEjE7yD,KAAK6xD,OAAS,GAAe,IAAV/7B,IACrBA,EAAQ,EAAIA,GAGd,IAAIj4B,EAAMmC,KAAKonB,OACXrhB,EAAOlI,EAAI2hC,UACXszB,EAAaj1D,EAAI4lD,gBAAgB3tB,EAAO/vB,GAAM,GAClD/F,KAAK6xD,OAAS,EACdh0D,EAAIukC,UAAU0wB,EAAY9yD,KAAK2yD,aAE3B3yD,KAAK+yD,UACPl5D,aAAamG,KAAK+yD,UAGpB/yD,KAAK+yD,SAAWn5D,YAAW,WACzB8jC,EAAOmnB,UAAW,SACXnnB,EAAOq1B,SACdl1D,EAAIwkC,UAAUxkC,EAAI2hC,UAAW9B,EAAOi1B,eACnC,OAGLrlD,EAAO8kD,UAAY,SAAmBL,EAAKr5B,GACzC,IAAI+lB,EAASz+C,KAETnC,EAAMmC,KAAKonB,OAEf,GAAIpnB,KAAK6kD,SAEP,OADA7kD,KAAKgzD,eACE,EAGThzD,KAAKgzD,YAAc,EACnB,IAAIC,GAAclB,EAAIS,QAAuB,EAAdT,EAAIS,OAAcT,EAAImB,WAAanB,EAAImB,WAAanB,EAAIoB,QAAU,EAAI,GAAK,EAEtGpB,EAAIoB,SACNF,IAAe,GAGjB,IAAIltD,EAAOlI,EAAI2hC,UACX4zB,EAAWrtD,EAAOktD,EAGtB,IAFAG,EAAWv1D,EAAIw1D,WAAWJ,EAAa,EAAIz6D,KAAKkV,KAAK0lD,GAAY56D,KAAKuV,MAAMqlD,OAE3DrtD,EACf,OAAO,EAGT/F,KAAK6kD,UAAW,EAEX7kD,KAAK6xD,SACRh0D,EAAIskC,YAAY,KAAMzJ,GACtB14B,KAAKszD,QAAU56B,EACf14B,KAAK6xD,OAASoB,EACdjzD,KAAKuzD,WAAa11D,EAAI2hC,WAgDxB,OA3CA3hC,EAAI6nD,WAAW,CACb,KAAQ0N,EAAyB,EAAdpzD,KAAK6xD,OAAa,EACrC,OAAU7xD,KAAKszD,SACd,CACD,uBAAyB,EACzB,OAAU,SACV,SARa,GASb,WAAa,IACZ,SAAUE,GACmB,aAA1BA,EAAM/pC,MAAMgqC,UASZhV,EAAOuU,YAAc,GAAKx6D,KAAK+D,IAAI62D,EAAW3U,EAAO8U,YAAc,GAAKH,IAAav1D,EAAIo5C,cAAgBmc,IAAav1D,EAAIm5C,cAC5Hn5C,EAAI6nD,WAAW,CACb,KAAQ0N,EACR,OAAU3U,EAAO6U,SAChB,CACD,uBAAyB,EACzB,SAAY,MACX,SAAUE,GACmB,YAA1BA,EAAM/pC,MAAMgqC,mBACPhV,EAAOoG,gBACPpG,EAAOuU,uBAIXvU,EAAO8U,kBACP9U,EAAO6U,eACP7U,EAAOoT,OACdpT,EAAOuU,YAAc,GACX57D,EAAMqnD,EAAOuU,sBAChBvU,EAAOoG,SAEdpG,EAAOqT,eAAeC,IA7BQ,YAA1ByB,EAAM/pC,MAAMgqC,mBACPhV,EAAOoG,gBACPpG,EAAOuU,iBA+Bb,GAGFxB,EAjNuB,CAkN9B1kC,IAEFgzB,GAAMrxB,aAAa,CACjB,iBAAmB,EACnB,cAAgB,IAElBqxB,GAAMkB,cAAc,aAAc,kBAAmBwQ,IAErD,IAAIkC,GAAsB,SAAU5jC,GAGlC,SAAS4jC,IACP,OAAO5jC,EAAS3sB,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAe+mD,EAAqB5jC,GAMpC,IAAIxiB,EAASomD,EAAoBv7D,UAgIjC,OA9HAmV,EAAO4f,SAAW,WAChBvZ,GAAY3T,KAAKonB,OAAO85B,eAAgB,aAAclhD,KAAK2zD,cAAe3zD,OAG5EsN,EAAO8f,YAAc,WACnBlZ,GAAelU,KAAKonB,OAAO85B,eAAgB,aAAclhD,KAAK2zD,gBAGhErmD,EAAOqmD,cAAgB,SAAuB3/C,GAC5C,IAAInW,EAAMmC,KAAKonB,OAEf,GAAKpT,EAAMoc,WAAWpc,EAAMoc,QAAQn5B,OAAS,GAA7C,CAIA,IAAImc,EAAYvV,EAAIqjD,eAChB1/B,EAAKrL,GAAuBnC,EAAMoc,QAAQ,GAAIhd,GAC9CqO,EAAKtL,GAAuBnC,EAAMoc,QAAQ,GAAIhd,GAClDpT,KAAK+uD,KAAOvtC,EAAGpU,EACfpN,KAAK4zD,SAAWpyC,EAChBxhB,KAAK6zD,SAAWpyC,EAChBzhB,KAAK8zD,WAAatyC,EAAG7T,WAAW8T,GAChCzhB,KAAK+zD,aAAevyC,EAAGjT,IAAIkT,GAC3BzhB,KAAKuzD,WAAa11D,EAAI2hC,UACtBx/B,KAAKg0D,cAAgBn2D,EAAIsoC,aACzBluB,GAAI3O,SAAU,YAAatJ,KAAKi0D,aAAcj0D,MAC9CiY,GAAI3O,SAAU,WAAYtJ,KAAKk0D,YAAal0D,MAC5C2T,GAAYrK,SAAU,YAAatJ,KAAKi0D,aAAcj0D,MACtD2T,GAAYrK,SAAU,WAAYtJ,KAAKk0D,YAAal0D,MACpD2U,GAAeX,GAEfnW,EAAIq6C,WAAW,mBAGjB5qC,EAAO2mD,aAAe,SAAsBjgD,GAC1C,IAAInW,EAAMmC,KAAKonB,OAEf,GAAKpT,EAAMoc,WAAWpc,EAAMoc,QAAQn5B,OAAS,GAA7C,CAIA,IAAImc,EAAYvV,EAAIqjD,eAChB1/B,EAAKrL,GAAuBnC,EAAMoc,QAAQ,GAAIhd,GAC9CqO,EAAKtL,GAAuBnC,EAAMoc,QAAQ,GAAIhd,GAC9C+gD,EAAK3yC,EAAGjT,IAAIvO,KAAK4zD,UACjBQ,EAAK3yC,EAAGlT,IAAIvO,KAAK6zD,UACjBQ,EAAS7yC,EAAGjT,IAAIkT,GAChBqU,EAAQtU,EAAG7T,WAAW8T,GAAMzhB,KAAK8zD,WACjCn7B,EAAgD,IAAtC07B,EAAO3kD,UAAU1P,KAAK+zD,cAAsBv7D,KAAKC,GAE3D6pD,EAAwB,KADjBtiD,KAAK+uD,MAAQvtC,EAAGpU,GACPoU,EAAGpU,GAEvBpN,KAAK+uD,KAAOvtC,EAAGpU,EACf,IAAIuf,EAAQ,CACV,SAAY3Y,EACZ,SAAY,CAACwN,EAAIC,IAenB,GAZKzhB,KAAKs0D,OACJz2D,EAAI0a,QAAqB,aAAK/f,KAAK+D,IAAIo8B,GAAW,EACpD34B,KAAKs0D,KAAOz2D,EAAI0a,QAAyB,gBAAI,cAAgB,SACpD1a,EAAI0a,QAAoB,YAAK47C,EAAG/mD,EAAIgnD,EAAGhnD,EAAI,GAAK5U,KAAK+D,IAAI43D,EAAG/mD,GAAK,IAAM5U,KAAK+D,IAAI63D,EAAGhnD,GAAK,GACjGpN,KAAKs0D,KAAO,QACHz2D,EAAI0a,QAAkB,UAAK1a,EAAI0a,QAAmB,WAAK/f,KAAK+D,IAAI,EAAIu5B,GAAS,MACtF91B,KAAKs0D,KAAOz2D,EAAI0a,QAAyB,iBAAK1a,EAAI0a,QAAqB,YAAI,cAAgB,QAG7FvY,KAAKu0D,eAAe5nC,IAGJ,SAAd3sB,KAAKs0D,MAAiC,gBAAdt0D,KAAKs0D,KAAwB,CACvDt0D,KAAK4zB,OAASkC,EACd,IAAI/wB,EAAMlH,EAAIgmD,eAAe7jD,KAAKuzD,YAAcz9B,EAC5C/vB,EAAOlI,EAAIkmD,eAAeh/C,GAC9BlH,EAAIukC,UAAUr8B,EAAM/F,KAAKw0D,SAGT,WAAdx0D,KAAKs0D,MAAmC,gBAAdt0D,KAAKs0D,MACjCz2D,EAAIwnD,WAAWrlD,KAAKg0D,cAAgBr7B,GACpC96B,EAAI8kC,eAAehW,IACI,UAAd3sB,KAAKs0D,OACdz2D,EAAIunD,SAASvnD,EAAIwgC,WAAaikB,GAC9BzkD,EAAI8kC,eAAehW,IAGrB9uB,EAAIq6C,WAAW,oBAGjB5qC,EAAOinD,eAAiB,SAAwB5nC,GAC9C,IAAI9uB,EAAMmC,KAAKonB,OAEf,GAAkB,SAAdpnB,KAAKs0D,MAAiC,gBAAdt0D,KAAKs0D,KAAwB,CACvD,IAAIpkD,EAAOrS,EAAI+2B,UACf50B,KAAKw0D,QAAU,IAAItlD,GAAMgB,EAAY,MAAI,EAAGA,EAAa,OAAI,GAC7DrS,EAAIskC,YAAY,KAAMniC,KAAKw0D,SAGX,WAAdx0D,KAAKs0D,MAAmC,UAAdt0D,KAAKs0D,MAAkC,gBAAdt0D,KAAKs0D,MAC1Dz2D,EAAI6kC,kBAAkB/V,IAI1Brf,EAAO4mD,YAAc,SAAqBlgD,UACjChU,KAAK+uD,KACZ,IAAIlxD,EAAMmC,KAAKonB,OAIf,GAHAnP,GAAI3O,SAAU,YAAatJ,KAAKi0D,aAAcj0D,MAC9CiY,GAAI3O,SAAU,WAAYtJ,KAAKk0D,YAAal0D,MAE1B,SAAdA,KAAKs0D,MAAiC,gBAAdt0D,KAAKs0D,KAAwB,CACvD,IAAIx+B,EAAQ91B,KAAK4zB,OACb7uB,EAAMlH,EAAIgmD,eAAe7jD,KAAKuzD,YAAcz9B,EAC5C/vB,EAAOlI,EAAIkmD,eAAeh/C,GAC9BlH,EAAIwkC,UAAUt8B,EAAM/F,KAAKw0D,SAGT,UAAdx0D,KAAKs0D,MAAkC,WAAdt0D,KAAKs0D,MAAmC,gBAAdt0D,KAAKs0D,MAC1Dz2D,EAAI+kC,gBAAgB,CAClB,SAAY5uB,WAIThU,KAAKs0D,KAEZz2D,EAAIq6C,WAAW,gBAGVwb,EAvIiB,CAwIxB5mC,IAEFgzB,GAAMrxB,aAAa,CACjB,cAAgB,EAChB,WAAa,EACb,YAAc,EACd,aAAe,EACf,iBAAmB,IAErBqxB,GAAMkB,cAAc,aAAc,eAAgB0S,IAClD,IAAIe,GAAM,gBACNC,GAAS,CACXC,GAAI,SAAah4D,GACf,OAAOnE,KAAKoL,IAAIjH,EAAG,IAErBk3B,IAAK,SAAal3B,GAChB,OAAO,EAAI+3D,GAAOC,GAAG,EAAIh4D,IAE3Bi4D,SAAU,SAAkBj4D,GAC1B,OAAO,EAAIA,EAAIA,EAAI,EAAIA,EAAIA,EAAIA,GAEjCk4D,OAAQ,SAAgBl4D,GACtB,OAAOA,GAETm4D,UAAW,SAAmBn4D,GAC5B,OAAIA,EAAI,GACC+3D,GAAOE,SAAS,EAAIj4D,GAEpB,EAAI+3D,GAAOE,SAAS,GAAKj4D,EAAI,OAKtCo4D,GAAQ,SAAetrC,EAAOtnB,GAChCnC,KAAKypB,MAAQA,EACbzpB,KAAKmC,OAASA,GAGZ6yD,GAAS,SAAgBjQ,EAAWxsC,EAAS08C,EAAS7tC,GACxDpnB,KAAKk1D,WAAanQ,EAClB/kD,KAAKuY,QAAUA,EACfvY,KAAKm1D,SAAWF,EAChBj1D,KAAKyzD,UAAY,OACjBzzD,KAAKo1D,OAAQ,EACbp1D,KAAKq1D,UAAW,EAChBr1D,KAAKonB,OAASA,GAGZkuC,GAAY,CACdC,MAAO,CACL,KAAQ,IACR,OAAU,IACV,KAAQ,KAEVC,eAAgB,SAAwBrzD,GACtC,IAAKA,EACH,OAAO,KAGT,SAASszD,EAAapkC,GACpB,IAAK/1B,MAAMC,QAAQ81B,GACjB,OAAOikC,GAAUE,eAAenkC,GAOlC,IAJA,IAAInL,EAAQ,GACRvtB,EAAI,GACJ7B,EAAO,GAEFC,EAAI,EAAGA,EAAIs6B,EAAMp6B,OAAQF,IAAK,CACrC,IAAI2+D,EAAUJ,GAAUE,eAAenkC,EAAMt6B,IAEzC2+D,IACFxvC,EAAMprB,KAAK46D,EAAQ,IACnB/8D,EAAEmC,KAAK46D,EAAQ,IACf5+D,EAAKgE,KAAK46D,EAAQ,KAItB,OAAKxvC,EAAMjvB,OAGF,CAACivB,EAAOvtB,EAAG7B,GAFX,KAMX,SAAS6+D,EAAWp+D,GAClB,IACIy3B,EADAvtB,EAASlK,EAGR+D,MAAMC,QAAQhE,KAEfkK,EADEnK,EAASC,GACF,CAAC,EAAGA,GACJA,aAAe2X,IAAS3X,aAAey5B,GAEvC,CAAC,IADVhC,EAAQz3B,EAAIM,aACQ,EAAG,GAAIN,GAElB,CAACA,EAAKA,IAInB,IAAI+yC,EAAK7oC,EAAO,GACZ8oC,EAAK9oC,EAAO,GAEhB,OAAInK,EAASgzC,IAAOhzC,EAASizC,GACvBD,IAAOC,EACF,KAGF,CAACD,EAAIC,EAAKD,EAAIC,GACZjvC,MAAMC,QAAQ+uC,IAAOhzC,EAASgzC,EAAG,KAAOA,aAActZ,IAAcsZ,aAAcp7B,IACvF5T,MAAMC,QAAQ+uC,IAChBA,EAAK,IAAItZ,GAAWsZ,GACpBC,EAAK,IAAIvZ,GAAWuZ,KAGpBD,EAAK,IADLtb,EAAQsb,EAAGzyC,aACIyyC,GACfC,EAAK,IAAIvb,EAAMub,IAGbD,EAAGz7B,OAAO07B,GACL,KAGF,CAACD,EAAIC,EAAGh8B,IAAI+7B,GAAKC,IAEjB,CAACD,EAAIC,EAAIA,GAcpB,IAViBhzC,EAUboB,EAAI,GACJutB,EAAQ,GACRpvB,EAAO,GAEX,IAAK,IAAI0E,KAAK2G,EACZ,GAAIA,EAAOlK,eAAeuD,GAAI,CAC5B,IAAIiG,EAASU,EAAO3G,GAEpB,IAAKiG,EACH,SACK,GAAInG,MAAMC,QAAQkG,KACnBrK,EAAMqK,EAAO,KAAOrK,EAAMqK,EAAO,KACnC,SAIJ,IAAIm0D,OAAc,EA1BLr+D,EA4BDkK,GACVm0D,GA5BCt6D,MAAMC,QAAQhE,IAAQA,EAAIM,cAAgBK,QAEpCoD,MAAMC,QAAQhE,IAAQA,EAAI,GAAGM,cAAgBK,OA0BtCu9D,EAAah0D,GAEbk0D,EAAWl0D,MAIzBykB,EAAM1qB,GAAKo6D,EAAY,GACvBj9D,EAAE6C,GAAKo6D,EAAY,GACnB9+D,EAAK0E,GAAKo6D,EAAY,IAK5B,MAAO,CAAC1vC,EAAOvtB,EAAG7B,IAEpB++D,QAAS,SAAiB1zD,EAAQoW,GAC3BA,IACHA,EAAU,IAGZ,IAMIu9C,EAASC,EAAaC,EANtBC,EAAS19C,EAAgB,OAAIm8C,GAAOn8C,EAAgB,QAAKm8C,GAAOG,OAE/DoB,IACHA,EAASvB,GAAOG,SAIlB1yD,EAASmzD,GAAUE,eAAerzD,MAGhC4zD,EAAc5zD,EAAO,GACrB2zD,EAAU3zD,EAAO,GACjB6zD,EAAa7zD,EAAO,IA+CtB,OAAO,SAAU+zD,EAASC,GACxB,IAAI1sC,EAAO9wB,EAEX,GAAIu9D,EAAU,EACZzsC,EAAQ,CACN,UAAa,OACb,MAAS,GAEX9wB,EAAIo9D,OACC,GAAIG,EAAUC,EAAU,CAC7B,IAAIz2D,EAAQu2D,EAAOC,EAAUC,GAC7B1sC,EAAQ,CACN,UAAa,UACb,MAAS/pB,GAEX/G,EA3Dc,SAASy9D,EAAY12D,EAAO22D,EAAcC,GAC1D,IAAKD,IAAiBC,EACpB,OAAO,KAGT,IAAI56D,EAAS,GAEb,IAAK,IAAIF,KAAK86D,EACZ,GAAIA,EAASr+D,eAAeuD,GAAI,CAC9B,GAAI66D,EAAa76D,KAAOw6D,EAAWx6D,GAAI,CACrCE,EAAOF,GAAK66D,EAAa76D,GACzB,SAGF,IAAIqK,EAAIwwD,EAAa76D,GACjB7C,EAAI29D,EAAS96D,GAEjB,GAAIlE,EAASqB,GACX+C,EAAOF,GAAKqK,EAAInG,EAAQ/G,OACnB,GAAI2C,MAAMC,QAAQ5C,GAAI,CAG3B,IAFA,IAAI49D,EAAW,GAENx/D,EAAI,EAAGA,EAAI4B,EAAE1B,OAAQF,IAC5Bw/D,EAASz7D,KAAKs7D,EAAY12D,EAAOmG,EAAE9O,GAAI4B,EAAE5B,KAG3C2E,EAAOF,GAAK+6D,MACP,CACL,IAAIvnC,EAAQr2B,EAAEd,YAGZ6D,EAAOF,GADLwzB,IAAU92B,OACAk+D,EAAY12D,EAAOmG,EAAGlN,GACzBkN,aAAaqJ,IAASrJ,aAAamrB,GAChCnrB,EAAEqI,IAAIvV,EAAE8V,MAAM/O,IAEd/G,GAMpB,OAAO+C,EAkBD06D,CAAY12D,EAAOq2D,EAAaD,QAEpCrsC,EAAQ,CACN,UAAa,WACb,MAAS,GAEX9wB,EAAIq9D,EAON,OAJAvsC,EAAmB,YAAIssC,EACvBtsC,EAAkB,WAAIusC,EACtBvsC,EAAgB,SAAIysC,EACpBzsC,EAAmB,YAAI0sC,EAAWD,EAC3B,IAAInB,GAAMtrC,EAAO9wB,KAG5B69D,kBAAmB,SAA2B78D,GACvCqG,KAAKy2D,cACRz2D,KAAKy2D,YAAc,IAGrBz2D,KAAKy2D,YAAY37D,KAAKnB,GAEtBqG,KAAK02D,MAEPA,GAAI,WACG12D,KAAK22D,oBACR32D,KAAK22D,kBAAoB79D,EAAiBw8D,GAAUsB,YAGxDC,KAAM,WACJ,GAAI72D,KAAKy2D,YAAYx/D,OAAQ,CAC3B,IAAI6/D,EAAU92D,KAAKy2D,YACnBz2D,KAAKy2D,YAAc,GAEnB,IAAK,IAAI1/D,EAAI,EAAG4E,EAAMm7D,EAAQ7/D,OAAQF,EAAI4E,EAAK5E,IAC7C+/D,EAAQ//D,KAGNiJ,KAAKy2D,YAAYx/D,OACnB+I,KAAK22D,kBAAoB79D,EAAiBw8D,GAAUsB,iBAE7C52D,KAAK22D,oBAIlBI,QAAS,SAAiB50D,EAAQoW,EAASktC,EAAMr+B,GAC1C7O,IACHA,EAAU,IAGZ,IAAIwsC,EAAYuQ,GAAUO,QAAQ1zD,EAAQoW,GAE1C,OADa,IAAIy8C,GAAOjQ,EAAWxsC,EAASktC,EAAMr+B,KAItDkuC,GAAUsB,SAAWtB,GAAUuB,KAAKzwB,KAAKkvB,IACzCz+D,EAAOm+D,GAAO78D,UAAW,CACvB6+D,SAAU,WACR,IAAIz+C,EAAUvY,KAAKuY,QACf49C,EAAW59C,EAAe,OAAKA,EAAkB,SAEjD3gB,EAASu+D,MACXA,EAAWb,GAAUC,MAAMY,MAGzBA,GAAYA,IAIXA,IACHA,EAAWb,GAAUC,MAAc,QAGrCv1D,KAAKm2D,SAAWA,EAChBn2D,KAAKi3D,QAAU1+C,EAAgB,QAAK+8C,GAAUkB,kBAAkBpwB,KAAKkvB,KAEvE4B,KAAM,WACJ,GAAuB,SAAnBl3D,KAAKyzD,WAA2C,WAAnBzzD,KAAKyzD,WAA0BzzD,KAAKonB,QAAUpnB,KAAKonB,OAAOqtC,IACzF,OAAOz0D,KAGLA,KAAKonB,SACPpnB,KAAKonB,OAAOqtC,IAAO,GAGE,SAAnBz0D,KAAKyzD,YACPzzD,KAAKm3D,YAAc,EAEnBn3D,KAAKg3D,YAGP,IAAIr6D,EAAIhG,IAER,IAAKqJ,KAAKo3D,UAAW,CACnB,IAAI7+C,EAAUvY,KAAKuY,QACnBvY,KAAKo3D,UAAY7+C,EAAmB,UAAIA,EAAmB,UAAI5b,EAajE,OAVAqD,KAAKq3D,eAAiB7+D,KAAKsE,IAAIH,EAAGqD,KAAKo3D,WAEhB,WAAnBp3D,KAAKyzD,YACPzzD,KAAKq3D,gBAAkBr3D,KAAKm3D,aAG9Bn3D,KAAKyzD,UAAY,UAEjBzzD,KAAK62D,OAEE72D,MAETs3D,MAAO,WACL,MAAuB,WAAnBt3D,KAAKyzD,YAITzzD,KAAKyzD,UAAY,SAEjBzzD,KAAK62D,QALI72D,MASXu3D,OAAQ,WACN,MAAuB,SAAnBv3D,KAAKyzD,YAITzzD,KAAKyzD,UAAY,OACjBzzD,KAAKq1D,UAAW,EAEhBr1D,KAAK62D,QANI72D,MAUXw7C,OAAQ,WACN,MAAuB,aAAnBx7C,KAAKyzD,YAITzzD,KAAKyzD,UAAY,WACjBzzD,KAAKq1D,UAAW,EAEhBr1D,KAAK62D,QANI72D,MAUXw3D,QAAS,aACTX,KAAM,WACJ,IAAI9mC,EAAQ/vB,KAERi1D,EAAUj1D,KAAKm1D,SACfx4D,EAAIhG,IACJu/D,EAAUv5D,EAAIqD,KAAKq3D,eAOvB,GALIr3D,KAAKuY,QAAgB,QAAK29C,GAAWl2D,KAAKm2D,WAC5Cn2D,KAAKq3D,eAAiB16D,EACtBu5D,EAAU,GAGW,YAAnBl2D,KAAKyzD,UAAT,CAqBA,IAAID,EAAQxzD,KAAKk1D,WAAWgB,EAASl2D,KAAKm2D,UAE1Cn2D,KAAKyzD,UAAYD,EAAM/pC,MAAiB,UAEjB,YAAnBzpB,KAAKyzD,WAA2BzzD,KAAKonB,eAChCpnB,KAAKonB,OAAOqtC,IAGE,SAAnBz0D,KAAKyzD,UACHzzD,KAAKo3D,UAAYz6D,GACnB/C,WAAWoG,KAAK62D,KAAKzwB,KAAKpmC,MAAOA,KAAKo3D,UAAYz6D,GAExB,YAAnBqD,KAAKyzD,UACdzzD,KAAKi3D,SAAQ,WACa,YAApBlnC,EAAM0jC,YAIV1jC,EAAMonC,YAAcjB,EAEhBjB,GACFA,EAAQzB,GAGVzjC,EAAM8mC,WAEoB,aAAnB72D,KAAKyzD,YACdzzD,KAAKq1D,UAAW,EAEZJ,GACFA,EAAQzB,SA9CV,GAJIxzD,KAAKonB,eACApnB,KAAKonB,OAAOqtC,IAGjBQ,EAAS,CACY,aAAnBj1D,KAAKyzD,UACPyC,EAAUl2D,KAAKm2D,SACa,SAAnBn2D,KAAKyzD,YACdyC,EAAU,GAGZ,IAAIuB,EAASz3D,KAAKk1D,WAAWgB,EAASl2D,KAAKm2D,UAE3CsB,EAAOhuC,MAAMgqC,UAAYzzD,KAAKyzD,UAC9BwB,EAAQwC,OAyChB,IAMIC,GAAW7uC,IAAqB,SAAUC,IAC5C,WAOE,SAAS6uC,EAAan8D,EAAGgmB,EAAIC,GAC3B,IAAIzlB,EAAIwlB,EAAGxlB,EACPoR,EAAIoU,EAAGpU,EACPnO,EAAKwiB,EAAGzlB,EAAIA,EACZkD,EAAKuiB,EAAGrU,EAAIA,EAEhB,GAAW,IAAPnO,GAAmB,IAAPC,EAAU,CACxB,IAAIvC,IAAMnB,EAAEQ,EAAIA,GAAKiD,GAAMzD,EAAE4R,EAAIA,GAAKlO,IAAOD,EAAKA,EAAKC,EAAKA,GAExDvC,EAAI,GACNX,EAAIylB,EAAGzlB,EACPoR,EAAIqU,EAAGrU,GACEzQ,EAAI,IACbX,GAAKiD,EAAKtC,EACVyQ,GAAKlO,EAAKvC,GAMd,OAFAsC,EAAKzD,EAAEQ,EAAIA,GAECiD,GADZC,EAAK1D,EAAE4R,EAAIA,GACWlO,EAyCxB,SAAS04D,EAAuBh3C,EAAQi3C,GACtC,IAAIC,EAAOl3C,EAAO3pB,OAAS,EACvB8gE,EAAa,CAACn3C,EAAO,IAGzB,OAzBF,SAASo3C,EAAep3C,EAAQ60B,EAAOqiB,EAAMD,EAAaE,GAIxD,IAHA,IACI3lB,EADA6lB,EAAYJ,EAGP9gE,EAAI0+C,EAAQ,EAAG1+C,EAAI+gE,EAAM/gE,IAAK,CACrC,IAAImhE,EAASP,EAAa/2C,EAAO7pB,GAAI6pB,EAAO60B,GAAQ70B,EAAOk3C,IAEvDI,EAASD,IACX7lB,EAAQr7C,EACRkhE,EAAYC,GAIZD,EAAYJ,IACVzlB,EAAQqD,EAAQ,GAAGuiB,EAAep3C,EAAQ60B,EAAOrD,EAAOylB,EAAaE,GACzEA,EAAWj9D,KAAK8lB,EAAOwxB,IACnB0lB,EAAO1lB,EAAQ,GAAG4lB,EAAep3C,EAAQwxB,EAAO0lB,EAAMD,EAAaE,IAOzEC,CAAep3C,EAAQ,EAAGk3C,EAAMD,EAAaE,GAC7CA,EAAWj9D,KAAK8lB,EAAOk3C,IAChBC,EAGT,SAASL,EAAS92C,EAAQokB,EAAWmzB,GACnC,GAAIv3C,EAAO3pB,QAAU,EAAG,OAAO2pB,EAC/B,IAAIi3C,OAA4B/7D,IAAdkpC,EAA0BA,EAAYA,EAAY,EAGpE,OADApkB,EAASg3C,EADTh3C,EAASu3C,EAAiBv3C,EAjD5B,SAA4BA,EAAQi3C,GAKlC,IAJA,IAEIjqD,EAhCa4T,EAAIC,EACjBxiB,EACAC,EA4BAk5D,EAAYx3C,EAAO,GACnBy3C,EAAY,CAACD,GAGRrhE,EAAI,EAAG4E,EAAMilB,EAAO3pB,OAAQF,EAAI4E,EAAK5E,IAC5C6W,EAAQgT,EAAO7pB,GAnCI0qB,EAqCE22C,EApCnBn5D,SACAC,SADAD,GADauiB,EAqCD5T,GApCJ5R,EAAIylB,EAAGzlB,EACfkD,EAAKsiB,EAAGpU,EAAIqU,EAAGrU,EACZnO,EAAKA,EAAKC,EAAKA,EAkCc24D,IAChCQ,EAAUv9D,KAAK8S,GACfwqD,EAAYxqD,GAKhB,OADIwqD,IAAcxqD,GAAOyqD,EAAUv9D,KAAK8S,GACjCyqD,EAkC4BC,CAAmB13C,EAAQi3C,GACtBA,GAKxC/uC,EAAOC,QAAU2uC,EACjB5uC,EAAOC,QAAQtmB,QAAUi1D,EAtF7B,MAyGEa,GAAO,SAAUC,GAGnB,SAASD,IACP,OAAOC,EAAUr1D,MAAMnD,KAAMhJ,YAAcgJ,KAH7C2M,GAAe4rD,EAAMC,GAMrB,IAAIlrD,EAASirD,EAAKpgE,UAgZlB,OA9YAmV,EAAOmrD,WAAa,WAGlB,IAFcz4D,KAAKw1C,cAGjB,OAAO,KAGT,IAAIz4B,EAAS/c,KAAK44C,YAClB,OAAO,IAAI8f,GAAQ37C,EAAOhO,UAAW,CACnC3I,OAAQ,CACN,UAAa,EACb,UAAa,aAKnBkH,EAAOqrD,YAAc,SAAqBpgD,EAASzY,GACjD,IAAIiwB,EAAQ/vB,UAEI,IAAZuY,IACFA,EAAU,IAGRvY,KAAK44D,aACP54D,KAAK44D,YAAYpd,SAGfzjD,EAAWwgB,KAEbzY,EADAyY,EAAU,IAIZ,IAAI2Y,EAAclxB,KAAK03C,iBAEvB,GAA2B,IAAvBxmB,EAAYj6B,OACd,OAAO+I,KAGTA,KAAK64D,SAAW,EAChB74D,KAAK84D,cAAgB,EACrB94D,KAAKG,OACL,IACI44D,IADc/4D,KAAK4xC,SACM5xC,KAAK4xC,WAAWt7C,OAAO0J,KAAK4xC,WAAW,IAAM5xC,KAAK03C,iBAE3ErkB,EAAarzB,KAAKg1C,iBAElBgkB,EAAgB3lC,EAAWkC,cAAcwjC,GAC7C/4D,KAAKi5D,kBAAoBj5D,KAAK+rC,gBAAgBzuB,YAC9Ctd,KAAKk5D,eAAiB7lC,EAAWD,UAAUpzB,KAAKi5D,mBAChD,IAAI9C,EAAW59C,EAAkB,UAAK,IAClC09C,EAAS19C,EAAgB,QAAK,MAClCvY,KAAK85C,eAAe,IAGpB,IAFA,IAAI7iD,EAAS,EAEJF,EAAI,EAAGA,EAAIiiE,EAAc/hE,OAAQF,IACxCE,GAAU+hE,EAAcjiE,GAAG4W,WAAWqrD,EAAcjiE,EAAI,IAG1D,IAAIoiE,EAASn5D,KAAK44D,YAActD,GAAUyB,QAAQ,CAChD,EAAKZ,GACJ,CACD,SAAYA,EACZ,OAAUF,IACT,SAAUzC,GACX,GAAKzjC,EAAMqN,SAAX,CAcA,IAAIg8B,EAAerpC,EAAMspC,mBAAmB7F,EAAMrxD,OAAOxF,EAAGw5D,EAAUl/D,EAAQ8hE,EAAYC,GAE5D,aAA1BxF,EAAM/pC,MAAMgqC,mBACP1jC,EAAM6oC,mBACN7oC,EAAMmpC,sBACNnpC,EAAMkpC,yBACNlpC,EAAM8oC,gBACN9oC,EAAM+oC,qBACN/oC,EAAMupC,eAEbvpC,EAAM+pB,eAAe5oB,IAGnBpxB,GACFA,EAAG0zD,EAAO4F,QA3BV,GAAyB,aAArBD,EAAO1F,YACT0F,EAAO3d,SAEH17C,GAAI,CACN,IAAIy5D,EAAexpC,EAAM2nB,iBAEzB53C,EAAG0zD,EAAO+F,EAAaA,EAAatiE,OAAS,OAuBlD+I,MAEH,OADAm5D,EAAOjC,OACAiC,GAGT7rD,EAAO+rD,mBAAqB,SAA4B18D,EAAGw5D,EAAUl/D,EAAQi6B,EAAasoC,GACxF,GAAU,IAAN78D,EACF,OAAOu0B,EAAY,GAGrB,IAIIn6B,EAAGiO,EAJHquB,EAAarzB,KAAKg1C,iBAElBykB,EAAe98D,EAAIw5D,EAAWl/D,EAC9ByiE,EAAS,EAGb,IAAK3iE,EAAIiJ,KAAK64D,SAAU7zD,EAAIw0D,EAAUviE,OAAQF,EAAIiO,EAAI,IACpD00D,EAASF,EAAUziE,GAAG4W,WAAW6rD,EAAUziE,EAAI,MAE3CiJ,KAAK84D,cAAgBY,EAASD,IAHqB1iE,IAOvDiJ,KAAK84D,eAAiBY,EAKxB,GAFA15D,KAAK64D,SAAW9hE,EAEZiJ,KAAK64D,UAAY7zD,EAAI,EAEvB,OADAhF,KAAK85C,eAAe5oB,GACbA,EAAYA,EAAYj6B,OAAS,GAG1C,IAAI2G,EAAMoC,KAAK64D,SACXr3C,EAAKg4C,EAAU57D,GACf6jB,EAAK+3C,EAAU57D,EAAM,GAErB/E,GADO4gE,EAAez5D,KAAK84D,eAChBY,EACf15D,KAAKs5D,eAAiBzgE,EACtB,IAAImD,EAAIwlB,EAAGxlB,GAAKylB,EAAGzlB,EAAIwlB,EAAGxlB,GAAKnD,EAC3BuU,EAAIoU,EAAGpU,GAAKqU,EAAGrU,EAAIoU,EAAGpU,GAAKvU,EAC3B8gE,EAAY,IAAI3oC,GAAWh1B,EAAGoR,GAC9BwsD,EAAcvmC,EAAWD,UAAUumC,GACnCE,IAAc75D,KAAK4xC,SAEvB,IAAKioB,GAAa75D,KAAKuY,QAAoB,WAAI,EAAG,CAChD,IAAIwgD,EAAa7nC,EAAY53B,MAAM,EAAG0G,KAAK64D,SAAW,GACtD74D,KAAK85C,eAAeif,GACpB,IAAIC,EAAgBQ,EAAUlgE,MAAM,EAAG0G,KAAK64D,SAAW,GAEvD74D,KAAK85D,mBAAmBd,OACnB,CACL,IAAIe,EAAc7oC,EAAY53B,MAAM,EAAG0G,KAAK64D,SAAW,GAEvDkB,EAAYj/D,KAAK8+D,GAEjB,IAAII,EAAiBR,EAAUlgE,MAAM,EAAG0G,KAAK64D,SAAW,GAExDmB,EAAel/D,KAAK6+D,GAEhBE,GACF75D,KAAK85C,eAAe,CAAC95C,KAAKk5D,gBAAgB5iE,OAAOyjE,IAEjD/5D,KAAK85D,mBAAmB,CAAC95D,KAAKi5D,mBAAmB3iE,OAAO0jE,MAExDh6D,KAAK85C,eAAeigB,GAEpB/5D,KAAK85D,mBAAmBE,IAI5B,OAAOJ,GAGTtsD,EAAO2sD,mBAAqB,SAA4Bl9C,EAAQmU,EAAagpC,GAC3E,IAAIC,EAAWn6D,KAAK44C,YAEpB,IAAK77B,EAAOiX,WAAWmmC,GACrB,OAAO,KAGT,IAAIjpB,EAAUgpB,EAAOhpC,EAAanU,GAElC,GAAuB,IAAnBm0B,EAAQj6C,OACV,OAAO,KAGT,IAAImjE,EAAO,EACPC,EAAO,EACPC,EAAU,EACdppB,EAAQzzB,SAAQ,SAAUq0B,GACpBx2C,MAAMC,QAAQu2C,GAChBA,EAAKr0B,SAAQ,SAAUja,GACjBA,EAAEoK,QACJpK,EAAIA,EAAEoK,OAGRwsD,GAAQ52D,EAAExH,EACVq+D,GAAQ72D,EAAE4J,EACVktD,QAGExoB,EAAKlkC,QACPkkC,EAAOA,EAAKlkC,OAGdwsD,GAAQtoB,EAAK91C,EACbq+D,GAAQvoB,EAAK1kC,EACbktD,QAIJ,IAAI92D,EAAI,IAAIwtB,GAAWopC,EAAMC,GAAM3rD,OAAO,EAAI4rD,GAG9C,OADA92D,EAAE3D,MAAQy6D,EACH92D,GAGT8J,EAAOitD,iBAAmB,SAA0Bf,EAAWgB,EAAiBz0D,GAC9E,IAAK/I,EAAew8D,GAClB,MAAO,GAGT,IAAI37D,EAAMmC,KAAKo9B,SACXq9B,GAAcD,GAAmBx6D,KAAK06D,kBACtC11B,EAAYhlC,KAAKuY,QAA2B,kBAAI1a,EAAIgmD,iBACpD8W,EAAUr/D,MAAMC,QAAQi+D,EAAU,IAItC,UAFOx5D,KAAKmwC,YAERsqB,IAAeE,EAAS,CAC1B,IAAI96D,EAAQ25D,EAAUviE,OACtBuiE,EAAY9B,GAAS8B,EAAWx0B,GAAW,GAC3ChlC,KAAKmwC,YAAcqpB,EAAUviE,OAAS4I,EAOxC,OAJIzI,EAAM2O,KACRA,EAAOlI,EAAI2hC,WAGNrkC,EAAaq+D,GAAW,SAAUh2D,GACvC,OAAO3F,EAAIquC,YAAY1oC,EAAGuC,OAI9BuH,EAAOotD,gBAAkB,WACvB,IAAI79B,EAAQ78B,KAAKyoC,WACblX,EAAavxB,KAAKimC,gBAClB20B,EAAcrpC,GAAcsL,EAAMtkB,QAAwB,iBAAMnhB,EAAMm6B,EAAWsL,EAAMtkB,QAA0B,mBACrH,OAAOskB,GAASA,EAAMtkB,QAAwB,iBAAMqiD,GAAe56D,KAAKuY,QAAwB,iBAAMvY,KAAK44D,aAG7GtrD,EAAOwsD,mBAAqB,SAA4Be,GACtD76D,KAAK86D,WAAaD,EAClB76D,KAAK28C,kBAGPrvC,EAAOytD,mBAAqB,WAO1B,OANA/6D,KAAKyzC,qBAEAzzC,KAAK86D,YAAc96D,KAAKg1C,mBAC3Bh1C,KAAK86D,WAAa96D,KAAKg7D,eAAeh7D,KAAKu5D,eAGtCv5D,KAAK86D,YAGdxtD,EAAO2tD,aAAe,WACpBj7D,KAAKg7C,cAEYh7C,KAAKg1C,kBAMlBh1C,KAAK86D,aACP96D,KAAKu5D,aAAev5D,KAAKk7D,iBAAiBl7D,KAAK+6D,wBAInDztD,EAAO4uC,iBAAmB,WACxBl8C,KAAK86D,WAAa,KAElBtC,EAAUrgE,UAAU+jD,iBAAiB5jD,KAAK0H,OAG5CsN,EAAO0tD,eAAiB,SAAwBp6C,GAC9C,IAAIyS,EAAarzB,KAAKg1C,iBAEtB,OAAI3hB,EACKA,EAAWkC,cAAc3U,GAG3B,IAGTtT,EAAO4tD,iBAAmB,SAA0BL,GAClD,IAAIxnC,EAAarzB,KAAKg1C,iBAEtB,OAAI3hB,EACKA,EAAWwD,gBAAgBgkC,GAG7B,IAGTvtD,EAAOorC,eAAiB,WACtB,IAAIl2B,EAAOxiB,KAAKu5D,aAEhB,IAAKv8D,EAAewlB,GAClB,OAAO,KAQT,IALA,IAAI43C,EAAO,EACPC,EAAO,EACPC,EAAU,EACVpqD,EAAOsS,EAAKvrB,OAEPF,EAAI,EAAGA,EAAImZ,EAAMnZ,IACpByrB,EAAKzrB,IACHO,EAASkrB,EAAKzrB,GAAGiF,IAAM1E,EAASkrB,EAAKzrB,GAAGqW,KAC1CgtD,GAAQ53C,EAAKzrB,GAAGiF,EAChBq+D,GAAQ73C,EAAKzrB,GAAGqW,EAChBktD,KAKN,OAAO,IAAItpC,GAAWopC,EAAOE,EAASD,EAAOC,IAG/ChtD,EAAOwrC,eAAiB,WACtB,IAAIqiB,EAAQn7D,KAAKu5D,aAEjB,IAAKv8D,EAAem+D,GAClB,OAAO,KAGT,IAAIC,EAAQ,CAACD,GAMb,OAJIn7D,KAAKq7D,UAAYr7D,KAAKq7D,YACxBD,EAAMtgE,KAAKqI,MAAMi4D,EAAOp7D,KAAK6xC,YAGxB7xC,KAAKs7D,eAAeF,EAAOp7D,KAAKg1C,mBAGzC1nC,EAAOguC,kBAAoB,WACzB,IAAIplB,EAAS,CAACl2B,KAAK+6D,sBAMnB,OAJI/6D,KAAKq7D,UAAYr7D,KAAKq7D,YACxBnlC,EAAOp7B,KAAKqI,MAAM+yB,EAAQl2B,KAAKu7D,gBAG1Bv7D,KAAKs7D,eAAeplC,IAG7B5oB,EAAOkuD,aAAe,WAKpB,IAJA,IAAIC,EAAWz7D,KAAKu6D,iBAAiBv6D,KAAK+6D,sBAAsB,GAE5Dp/D,EAAM,EAED5E,EAAI,EAAGiO,EAAIy2D,EAASxkE,OAAQF,EAAIiO,EAAGjO,IAC1C4E,GAAO8/D,EAAS1kE,GAAG4W,WAAW8tD,EAAS1kE,EAAI,IAG7C,OAAO4E,GAGT2R,EAAO4rC,kBAAoB,WACzB,IAEI/xC,EAFAf,EAASpG,KAAKwyC,qBAIlB,GAAIl3C,MAAMC,QAAQ6K,GAAS,CACzBe,EAAI,EAEJ,IAAK,IAAIpQ,EAAI,EAAGA,EAAIqP,EAAOnP,OAAQF,IAC7BO,EAAS8O,EAAOrP,GAAc,YAC5BqP,EAAOrP,GAAc,UAAIoQ,IAC3BA,EAAIf,EAAOrP,GAAc,gBAK/BoQ,EAAIf,EAAkB,UAGxB,OAAO9O,EAAS6P,GAAKA,EAAI,EAAI,KAG/BmG,EAAOguD,eAAiB,SAAwBplC,EAAQzE,GAGtD,IAFA,IAAI/1B,EAAS,IAAIu3B,GAAOxB,GAEf16B,EAAI,EAAGiO,EAAIkxB,EAAOj/B,OAAQF,EAAIiO,EAAGjO,IACxC,IAAK,IAAI0d,EAAI,EAAG5Z,EAAKq7B,EAAOn/B,GAAGE,OAAQwd,EAAI5Z,EAAI4Z,IAC7C/Y,EAAOo5B,SAASoB,EAAOn/B,GAAG0d,IAI9B,OAAO/Y,GAGF68D,EAvZE,CAwZTphB,IAEFohB,GAAK9pC,aAzaW,CACd,WAAc,EACd,YAAc,EACd,gBAAkB,EAClB,kBAAqB,EACrB,OAAU,CACR,UAAa,OACb,UAAa,EACb,YAAe,EACf,YAAe,OACf,eAAkB,EAClB,QAAW,KA+Zf,IAEIiqC,GAAU,SAAUgD,GAGtB,SAAShD,EAAQxnC,EAAammB,GAC5B,IAAItnB,EASJ,OAPAA,EAAQ2rC,EAAMpjE,KAAK0H,KAAMq3C,IAASr3C,MAC5BrB,KAAO,UAETuyB,GACFnB,EAAM+pB,eAAe5oB,GAGhBnB,EAZTpjB,GAAe+rD,EAASgD,GAexB,IAAIpuD,EAASorD,EAAQvgE,UA0NrB,OAxNAmV,EAAOwsC,eAAiB,SAAwB5oB,GAC9C,IAAKA,EAMH,OALAlxB,KAAKu5D,aAAe,KACpBv5D,KAAK27D,OAAS,KAEd37D,KAAK47D,gBAEE57D,KAGT,IAAIo7D,EAAQpqC,GAAWI,cAAcF,GACjCv1B,EAAMy/D,EAAMnkE,OAEhB,GAAKqE,MAAMC,QAAQ6/D,EAAM,KAKvB,GAFAp7D,KAAKu5D,aAAev5D,KAAK67D,UAAUT,EAAM,IAErCz/D,EAAM,EAAG,CAGX,IAFA,IAAImgE,EAAQ,GAEH/kE,EAAI,EAAGA,EAAI4E,EAAK5E,IAClBqkE,EAAMrkE,IAIX+kE,EAAMhhE,KAAKkF,KAAK67D,UAAUT,EAAMrkE,KAGlCiJ,KAAK27D,OAASG,QAfhB97D,KAAKu5D,aAAev5D,KAAK67D,UAAUT,GAqBrC,OAFAp7D,KAAK47D,gBAEE57D,MAGTsN,EAAOoqC,eAAiB,WACtB,IAAK13C,KAAKu5D,aACR,MAAO,GAMT,IAHA,IAAIuC,EAAQ97D,KAAK6xC,WACbupB,EAAQ,CAACp7D,KAAK+7D,kBAAkB/7D,KAAKu5D,eAEhCxiE,EAAI,EAAGiO,EAAI82D,EAAM7kE,OAAQF,EAAIiO,EAAGjO,IACvCqkE,EAAMtgE,KAAKkF,KAAK+7D,kBAAkBD,EAAM/kE,KAG1C,OAAOqkE,GAGT9tD,EAAO0uD,kBAAoB,SAA2Bj/C,GACpD,OAAO/c,KAAKi6D,mBAAmBl9C,EAAQ/c,KAAK4xC,WAAYnN,KAG1Dn3B,EAAOskC,SAAW,WAChB,OAAO5xC,KAAKu5D,cAAgB,IAG9BjsD,EAAOukC,SAAW,WAChB,OAAO7xC,KAAK27D,QAAU,IAGxBruD,EAAO+tD,SAAW,WAChB,OAAOr7D,KAAK6xC,WAAW56C,OAAS,GAGlCqW,EAAOsuD,cAAgB,WAChB57D,KAAKo9B,UAKVp9B,KAAK86D,WAAa96D,KAAKg7D,eAAeh7D,KAAKu5D,cAC3Cv5D,KAAKi8D,UAAYj8D,KAAKg7D,eAAeh7D,KAAK27D,QAC1C37D,KAAK28C,kBANH38C,KAAK28C,kBASTrvC,EAAOwsD,mBAAqB,SAA4BN,GACtDx5D,KAAK86D,WAAatB,EAClBx5D,KAAK28C,kBAGPrvC,EAAO4uD,WAAa,SAAoB15C,GACtC,IAAK,IAAIzrB,EAAIyrB,EAAKvrB,OAAS,EAAGF,GAAK,EAAGA,IAC/ByrB,EAAKzrB,IACRyrB,EAAKtnB,OAAOnE,EAAG,IAKrBuW,EAAO6uD,WAAa,SAAoB35C,GAGtC,GAFAxiB,KAAKk8D,WAAW15C,IAEXA,IAASxlB,EAAewlB,GAC3B,OAAO,EAGT,IAAIY,EAAYZ,EAAKA,EAAKvrB,OAAS,GAC/BmlE,GAAU,EAMd,OAJI55C,EAAK,GAAGxmB,IAAMonB,EAAUpnB,GAAKwmB,EAAK,GAAGpV,IAAMgW,EAAUhW,IACvDgvD,GAAU,GAGLA,GAGT9uD,EAAOuuD,UAAY,SAAmBr5C,GACpC,IAAI45C,EAAUp8D,KAAKm8D,WAAW35C,GAM9B,OAJIxlB,EAAewlB,IAAS45C,GAC1B55C,EAAKtnB,OAAOsnB,EAAKvrB,OAAS,EAAG,GAGxBurB,GAGTlV,EAAOyuD,kBAAoB,SAA2Bv5C,GACpDA,EAAOA,EAAKlpB,MAAM,GAElB,IAAI8iE,EAAUp8D,KAAKm8D,WAAW35C,GAE9B,OAAIxlB,EAAewlB,KAAU45C,GAC3B55C,EAAK1nB,KAAK0nB,EAAK,GAAGxU,QACXwU,GAEAA,GAIXlV,EAAO+uD,aAAe,WACpB,MA1JY,YA0JRr8D,KAAK8uB,cACA9uB,KAAK+6D,sBAGd/6D,KAAKyzC,oBAEDzzC,KAAKg1C,mBAAqBh1C,KAAKs8D,YACjCt8D,KAAKs8D,UAAYt8D,KAAKg7D,eAAeh7D,KAAK4xC,aAGrC5xC,KAAKs8D,YAGdhvD,EAAOiuD,aAAe,WACpB,IAAIloC,EAAarzB,KAAKg1C,iBAQtB,OANAh1C,KAAKyzC,oBAEDpgB,IAAerzB,KAAKi8D,YACtBj8D,KAAKi8D,UAAYj8D,KAAKg7D,eAAeh7D,KAAK6xC,aAGrC7xC,KAAKi8D,WAGd3uD,EAAOmtC,uBAAyB,SAAgCG,GAC9D,IAAIwgB,EAAQp7D,KAAK03C,iBAEjB,IAAK16C,EAAeo+D,GAClB,OAAO,EAKT,IAFA,IAAI1/D,EAAS,EAEJ3E,EAAI,EAAG4E,EAAMy/D,EAAMnkE,OAAQF,EAAI4E,EAAK5E,IAC3C2E,GAAUk/C,EAASvjB,cAAc+jC,EAAMrkE,IAGzC,OAAO2E,GAGT4R,EAAOqtC,qBAAuB,SAA8BC,GAC1D,IAAIwgB,EAAQp7D,KAAK03C,iBAEjB,IAAK16C,EAAeo+D,GAClB,OAAO,EAKT,IAFA,IAAI1/D,EAASk/C,EAASljB,YAAY0jC,EAAM,IAE/BrkE,EAAI,EAAG4E,EAAMy/D,EAAMnkE,OAAQF,EAAI4E,EAAK5E,IAC3C2E,GAAUk/C,EAASljB,YAAY0jC,EAAMrkE,IAGvC,OAAO2E,GAGT4R,EAAO2tD,aAAe,WACpBS,EAAMvjE,UAAU8iE,aAAa3iE,KAAK0H,MAE9BA,KAAKi8D,YACPj8D,KAAK27D,OAAS37D,KAAKk7D,iBAAiBl7D,KAAKu7D,kBAI7CjuD,EAAO0tC,YAAc,WAEnB,cADOh7C,KAAKs8D,UACLZ,EAAMvjE,UAAU6iD,YAAY1iD,KAAK0H,OAG1CsN,EAAO4uC,iBAAmB,WACpBl8C,KAAKi8D,YACPj8D,KAAKi8D,UAAY,MAGfj8D,KAAKs8D,YACPt8D,KAAKs8D,UAAY,MAGnBZ,EAAMvjE,UAAU+jD,iBAAiB5jD,KAAK0H,OAGjC04D,EA1OK,CA2OZH,IAIF,SAASgE,GAAY/xC,GACnB,OAAO,SAAUC,GAGf,SAASC,IACP,OAAOD,EAAMtnB,MAAMnD,KAAMhJ,YAAcgJ,KAHzC2M,GAAe+d,EAAQD,GAMvB,IAAInd,EAASod,EAAOvyB,UAoFpB,OAlFAmV,EAAOoqC,eAAiB,WACtB,OAAO13C,KAAKu5D,cAGdjsD,EAAOwsC,eAAiB,SAAwB5oB,GAC9C,IAAI4T,EAAS5T,aAAuBF,GAAaE,EAAc,IAAIF,GAAWE,GAE9E,GAAI4T,EAAOj2B,OAAO7O,KAAKu5D,cACrB,OAAOv5D,KAKT,GAFAA,KAAKu5D,aAAez0B,GAEf9kC,KAAKo9B,SAER,OADAp9B,KAAK48C,oBACE58C,KAGT,IAAIqzB,EAAarzB,KAAKg1C,iBAItB,OAFAh1C,KAAK85D,mBAAmBzmC,EAAWsB,QAAQ30B,KAAKu5D,eAEzCv5D,MAGTsN,EAAOkvD,kBAAoB,SAA2Bz2D,GACpD,IAAIlI,EAAMmC,KAAKo9B,SAEf,IAAKv/B,EACH,OAAO,KAGT,IAAImI,EAAI5O,EAAM2O,GAAQlI,EAAI2hC,UAAY3hC,EAAI6oC,YAEtCub,EAAUjiD,KAAK+6D,qBAEnB,OAAK9Y,EAIEpkD,EAAIquC,YAAY+V,EAASj8C,GAHvB,MAMXsH,EAAOytD,mBAAqB,WAC1B,IAAI1nC,EAAarzB,KAAKg1C,iBAUtB,OARAh1C,KAAKyzC,qBAEAzzC,KAAKy8D,UAAYppC,GAChBrzB,KAAKu5D,eACPv5D,KAAKy8D,SAAWppC,EAAWsB,QAAQ30B,KAAKu5D,eAIrCv5D,KAAKy8D,UAGdnvD,EAAOwsD,mBAAqB,SAA4B7X,GACtDjiD,KAAKy8D,SAAWxa,EAChBjiD,KAAK48C,qBAGPtvC,EAAO2tD,aAAe,WACpBj7D,KAAKg7C,cAEL,IAAI3nB,EAAarzB,KAAKg1C,iBAElBh1C,KAAKy8D,UAAYppC,IACnBrzB,KAAKu5D,aAAelmC,EAAWD,UAAUpzB,KAAKy8D,YAIlDnvD,EAAO4uC,iBAAmB,WACxBl8C,KAAKy8D,SAAW,KAEhBhyC,EAAMtyB,UAAU+jD,iBAAiB5jD,KAAK0H,OAGxCsN,EAAOorC,eAAiB,WACtB,OAAO14C,KAAKu5D,aAAev5D,KAAKu5D,aAAavrD,OAAS,MAGjD0c,EA3FF,CA4FLF,GA/FJkuC,GAAQ9pC,iBA/OQ,WAiVhB,IAeI8tC,GAAS,SAAUC,GAGrB,SAASD,EAAOxrC,EAAammB,GAC3B,IAAItnB,EASJ,OAPAA,EAAQ4sC,EAAarkE,KAAK0H,KAAMq3C,IAASr3C,MACnCrB,KAAO,QAETuyB,GACFnB,EAAM+pB,eAAe5oB,GAGhBnB,EAZTpjB,GAAe+vD,EAAQC,GAevB,IAAIrvD,EAASovD,EAAOvkE,UAwFpB,OAtFAmV,EAAOmrD,WAAa,WAClB,IAAIpzB,EAAUrlC,KAAKw1C,cAEnB,IAAKnQ,EACH,OAAO,KAGT,IAAIlU,EAAQnxB,KAAK03C,iBACb36B,EAASsoB,EAAQyF,qBACjB9B,EAAShpC,KAAKo9B,SAAS4b,sBAAsB7nB,GACjD,OAAO,IAAIurC,EAAOvrC,EAAO,CACvB,OAAU,CACR,WAAc,SACd,YAAepU,EAAOK,WACtB,aAAgBL,EAAOM,YACvB,gBAAmB,EACnB,gBAAmB,SACnB,WAAc,mBACd,SAAYN,EAAOyW,MAAQwV,EAAOhtC,EAAI+gB,EAAOK,WAAa,GAC1D,SAAYL,EAAO2W,MAAQsV,EAAO57B,EAAI2P,EAAOM,YAAc,OAKjE/P,EAAOqxC,gBAAkB,WACvB,IAAIv4C,EAASpG,KAAKwyC,qBAElB,OAAIl3C,MAAMC,QAAQ6K,IAIX8hC,GAAuB9qC,KAAKgJ,IAGrCkH,EAAOsvD,SAAW,WAChB,IAAIx2D,EAASpG,KAAKwyC,qBAElB,OAAIl3C,MAAMC,QAAQ6K,KAIX8hC,GAAuB9qC,KAAKgJ,IAAWinC,GAA2BjwC,KAAKgJ,IAAW4kC,GAAsB5tC,KAAKgJ,KAGtHkH,EAAO2rC,eAAiB,SAAwBrrC,EAAOjR,GACrD,IAAIogB,EAAS/c,KAAK8qC,qBAMlB,OAJInuC,IACFogB,EAASA,EAAOmY,OAAOv4B,MAGrBogB,EAAOhG,SAASnJ,MACd5N,KAAKuY,QAAyB,iBACzBokD,EAAaxkE,UAAU8gD,eAAe3gD,KAAK0H,KAAM4N,EAAOjR,KASrE2Q,EAAOwrC,eAAiB,WACtB,OAAO+jB,GAAcvkE,KAAK0H,KAAM,cAGlCsN,EAAOguC,kBAAoB,WACzB,OAAOuhB,GAAcvkE,KAAK0H,KAAM,uBAGlCsN,EAAOmtC,uBAAyB,WAC9B,OAAO,GAGTntC,EAAOqtC,qBAAuB,WAC5B,OAAO,GAGTrtC,EAAOwvD,WAAa,SAAoBz1D,EAAW8T,GACjD,OAAInb,KAAKw1C,cACAx1C,KAAKw1C,cAActC,UAAU7rC,EAAW8T,GAG1C,IAAIszB,GAAQzuC,MAAMkzC,UAAU7rC,EAAW8T,IAGzCuhD,EAxGI,CAyGXH,GAAYplB,KAKd,SAAS0lB,GAAcljE,GACrB,IAAIu3B,EAAclxB,KAAKrG,KAEvB,OAAKu3B,EAIE,IAAI+B,GAAO/B,EAAaA,EAAalxB,KAAKg1C,kBAHxC,KAPX0nB,GAAOjuC,aA1HS,CACd,OAAU,CACR,WAAc,OACd,WAAc,CAAC,CACb,KAAQ,2HACR,KAAQ,YAEV,gBAAmB,GACnB,iBAAoB,GACpB,YAAe,GACf,aAAgB,IAElB,iBAAmB,IA+GrBiuC,GAAO9tC,iBAAiB,UAYxB,IAKImuC,GAAa,SAAUrB,GAGzB,SAASqB,EAAW7rC,EAAa3Y,GAC/B,IAAIwX,EASJ,OAPAA,EAAQ2rC,EAAMpjE,KAAK0H,KAAMuY,IAAYvY,MAC/BrB,KAAO,aAETuyB,GACFnB,EAAM+pB,eAAe5oB,GAGhBnB,EAZTpjB,GAAeowD,EAAYrB,GAe3B,IAAIpuD,EAASyvD,EAAW5kE,UAsCxB,OApCAmV,EAAOwsC,eAAiB,SAAwB5oB,GAC9C,OAAKA,GAQLlxB,KAAKu5D,aAAevoC,GAAWI,cAAcF,GAEzClxB,KAAKo9B,SACPp9B,KAAK85D,mBAAmB95D,KAAKg7D,eAAeh7D,KAAKu5D,eAEjDv5D,KAAK28C,iBAGA38C,OAfLA,KAAKu5D,aAAe,KAEpBv5D,KAAK85D,mBAAmB,MAEjB95D,OAcXsN,EAAOoqC,eAAiB,WACtB,OAAO13C,KAAKu5D,cAAgB,IAG9BjsD,EAAO0uD,kBAAoB,SAA2Bj/C,GACpD,OAAO/c,KAAKi6D,mBAAmBl9C,EAAQ/c,KAAK03C,iBAAkB9T,KAGhEt2B,EAAOmtC,uBAAyB,SAAgCG,GAC9D,OAAOA,EAASvjB,cAAcr3B,KAAK03C,mBAGrCpqC,EAAOqtC,qBAAuB,WAC5B,OAAO,GAGFoiB,EAtDQ,CAuDfxE,IAEFwE,GAAWtuC,aA9DK,CACd,WAAc,KACd,eAAkB,gBA6DpBsuC,GAAWnuC,iBAAiB,cAE5B,IAAIouC,GAAqB,SAAUxE,GAGjC,SAASwE,EAAmBznB,EAAY8B,GACtC,IAAItnB,EAOJ,OALAA,EAAQyoC,EAAUlgE,KAAK0H,KAAMq3C,IAASr3C,MAChCrB,KAAO,qBAEboxB,EAAMktC,cAAc1nB,GAEbxlB,EAVTpjB,GAAeqwD,EAAoBxE,GAanC,IAAIlrD,EAAS0vD,EAAmB7kE,UAsdhC,OApdAmV,EAAO2vD,cAAgB,SAAuBC,GAO5C,IANA,IAAI3nB,EAAav1C,KAAKm9D,iBAAiBD,GAAe,IAElD92D,EAASpG,KAAKw4C,aAEdjgC,EAAUvY,KAAK6tB,SAEV92B,EAAIw+C,EAAWt+C,OAAS,EAAGF,GAAK,EAAGA,IAC1Cw+C,EAAWx+C,GAAG+jD,aAAaviC,GAE3Bg9B,EAAWx+C,GAAGgmD,WAAW/8C,MAEzBu1C,EAAWx+C,GAAGw1B,gBAAgBvsB,MAE1BoG,GACFmvC,EAAWx+C,GAAGugD,UAAUlxC,GAY5B,OARApG,KAAKk9D,YAAc3nB,EAEfv1C,KAAKyoC,aACPzoC,KAAKo9D,yBAELp9D,KAAK28C,kBAGA38C,MAGTsN,EAAOq0B,cAAgB,WACrB,OAAO3hC,KAAKk9D,aAAe,IAG7B5vD,EAAOmQ,QAAU,SAAiB9jB,EAAI0B,GAGpC,IAFA,IAAIk6C,EAAav1C,KAAK2hC,gBAEb5qC,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IACvCw+C,EAAWx+C,KAIXsE,EAGH1B,EAAGrB,KAAK+C,EAASk6C,EAAWx+C,GAAIA,GAFhC4C,EAAG47C,EAAWx+C,GAAIA,IAMtB,OAAOiJ,MAGTsN,EAAO/M,OAAS,SAAgB5G,EAAI0B,GAClC,IAAK1B,EACH,OAAO,IAAIqjE,EAGb,IAAIK,EAAW,GACXC,EAAOvlE,EAAW4B,GAClB4G,EAAS+8D,EAAO3jE,EAAK2G,GAAa3G,GAQtC,OAPAqG,KAAKyd,SAAQ,SAAU3b,GACrB,IAAIG,EAAIq7D,EAAOx7D,EAAWD,GAAiBC,IAEvCzG,EAAUkF,EAAOjI,KAAK+C,EAAS4G,GAAK1B,EAAO0B,KAC7Co7D,EAASviE,KAAKgH,KAEf9B,MACI,IAAIg9D,EAAmBK,IAGhC/vD,EAAOqR,UAAY,SAAmBtJ,GACpC,IAAKA,EACH,OAAOrV,KAGT,GAAIA,KAAK0/B,UACP,OAAO1/B,KAGT,IAAImI,EAAOnR,UAMX,OALAgJ,KAAKyd,SAAQ,SAAU3b,GACjBA,GAAYA,EAAS6c,WACvB7c,EAAS6c,UAAUxb,MAAMrB,EAAUqG,MAGhCnI,MAGTsN,EAAOoyB,QAAU,WACf,OAAQ1iC,EAAegD,KAAK2hC,kBAG9Br0B,EAAOggB,OAAS,WAId,OAHAttB,KAAKyd,SAAQ,SAAU3b,GACrBA,EAASm4C,aAEJ9C,GAASh/C,UAAUm1B,OAAOnqB,MAAMnD,KAAMhJ,YAG/CsW,EAAOnN,KAAO,WAKZ,OAJAH,KAAKuY,QAAiB,SAAI,EAC1BvY,KAAKyd,SAAQ,SAAU3b,GACrBA,EAAS3B,UAEJH,MAGTsN,EAAOlN,KAAO,WAKZ,OAJAJ,KAAKuY,QAAiB,SAAI,EAC1BvY,KAAKyd,SAAQ,SAAU3b,GACrBA,EAAS1B,UAEJJ,MAGTsN,EAAOygB,SAAW,SAAkBF,GAClC7tB,KAAKyd,SAAQ,SAAU3b,GACrBA,EAAS+rB,OAAOA,OAIpBvgB,EAAOyhC,UAAY,WACjB,IAAIlpC,EAAI2yD,EAAUrgE,UAAU42C,UAAUz2C,KAAK0H,MAE3C,IAAK6F,EAAG,CACN,IAAIoB,EAAU,GACVs2D,GAAK,EACTv9D,KAAKyd,SAAQ,SAAUxb,GACRA,EAAE8sC,cAEAwuB,IACbA,GAAK,GAGPt2D,EAAQnM,KAAKmH,EAAE8sC,gBAGbwuB,IACF13D,EAAI,CACF,SAAYoB,IAKlB,OAAOpB,GAGTyH,EAAOgqC,UAAY,SAAmBzxC,GACpC,GAAIA,GAAKA,EAAY,SACnB7F,KAAK8H,QAAU,KACf9H,KAAKyd,SAAQ,SAAUxb,EAAGlL,GACxBkL,EAAEq1C,UAAUzxC,EAAY,SAAE9O,WAEvB,CACL,IAAIqP,EAASpG,KAAKq4C,eAAexyC,GAEjC7F,KAAK8H,QAAU1B,EACfpG,KAAKyd,SAAQ,SAAUxb,GACrBA,EAAEq1C,UAAUlxC,MAKhB,OADApG,KAAKs4C,kBACEt4C,MAGTsN,EAAO6tC,iBAAmB,SAA0B/0C,GAOlD,OANAA,EAASpG,KAAKq4C,eAAejyC,GAC7BpG,KAAKo7C,cAAgBh1C,EACrBpG,KAAKyd,SAAQ,SAAU3b,GACrBA,EAASq5C,iBAAiB/0C,MAE5BpG,KAAKs4C,kBACEt4C,MAGTsN,EAAOytC,WAAa,WAClByd,EAAUrgE,UAAU4iD,WAAW53C,MAAMnD,KAAMhJ,WAE3CgJ,KAAKo9D,0BAGP9vD,EAAO8vD,uBAAyB,WAC9B,IAAIvgC,EAAQ78B,KAAKyoC,WACjBzoC,KAAKyd,SAAQ,SAAU3b,GACrBA,EAASi5C,WAAWle,OAIxBvvB,EAAO6vD,iBAAmB,SAA0B5nB,GAGlD,GAAIA,IAAej6C,MAAMC,QAAQg6C,GAAa,CAC5C,GAAIA,aAAsB4B,GACxB,MAAO,CAAC5B,GAER,MAAM,IAAIv3C,MANQ,gDASpB,IAAK,IAAIjH,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IAC5C,IAAKiJ,KAAKw9D,UAAUjoB,EAAWx+C,IAC7B,MAAM,IAAIiH,MAAMy/D,uDAA+B1mE,GAInD,OAAOw+C,GAIXjoC,EAAOkwD,UAAY,SAAmB5M,GACpC,OAAOA,aAAezZ,IAGxB7pC,EAAO2tD,aAAe,WACpBj7D,KAAKg7C,cAEDh7C,KAAK0/B,WAIT1/B,KAAKyd,SAAQ,SAAU3b,GACjBA,GAAYA,EAASm5D,cACvBn5D,EAASm5D,mBAKf3tD,EAAOuuC,eAAiB,WAClB77C,KAAKo8C,UACPp8C,KAAKo8C,SAAS9uB,gBAGTttB,KAAKo8C,SACZp8C,KAAKyd,SAAQ,SAAU3b,GACrBA,EAAS+5C,qBAIbvuC,EAAOorC,eAAiB,SAAwBrlB,GAC9C,IAAKA,GAAcrzB,KAAK0/B,UACtB,OAAO,KAQT,IALA,IAAIg+B,EAAO,EACPC,EAAO,EACPrD,EAAU,EACV/kB,EAAav1C,KAAK2hC,gBAEb5qC,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IAC5C,GAAKw+C,EAAWx+C,GAAhB,CAIA,IAAI+tC,EAASyQ,EAAWx+C,GAAG2hD,eAAerlB,GAEtCyR,IACF44B,GAAQ54B,EAAO9oC,EACf2hE,GAAQ74B,EAAO13B,EACfktD,KAIJ,OAAgB,IAAZA,EACK,KAGF,IAAItpC,GAAW0sC,EAAOpD,EAASqD,EAAOrD,IAG/ChtD,EAAO2rC,eAAiB,SAAwBrrC,EAAOjR,GACrD,GAAIqD,KAAK0/B,UACP,OAAO,EAKT,IAFA,IAAI6V,EAAav1C,KAAK2hC,gBAEb5qC,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IAC5C,GAAIw+C,EAAWx+C,GAAGkiD,eAAerrC,EAAOjR,GACtC,OAAO,EAIX,OAAO,GAGT2Q,EAAOwrC,eAAiB,SAAwBzlB,GAC9C,OAAOuqC,GAAgBtlE,KAAK0H,KAAMqzB,EAAY,mBAGhD/lB,EAAOguC,kBAAoB,SAA2BjoB,GACpD,OAAOuqC,GAAgBtlE,KAAK0H,KAAMqzB,EAAY,sBAGhD/lB,EAAOmtC,uBAAyB,SAAgCpnB,GAC9D,IAAKA,GAAcrzB,KAAK0/B,UACtB,OAAO,EAMT,IAHA,IAAI6V,EAAav1C,KAAK2hC,gBAClBjmC,EAAS,EAEJ3E,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IACvCw+C,EAAWx+C,KAIhB2E,GAAU65C,EAAWx+C,GAAG0jD,uBAAuBpnB,IAGjD,OAAO33B,GAGT4R,EAAOqtC,qBAAuB,SAA8BtnB,GAC1D,IAAKA,GAAcrzB,KAAK0/B,UACtB,OAAO,EAMT,IAHA,IAAI6V,EAAav1C,KAAK2hC,gBAClBjmC,EAAS,EAEJ3E,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IACvCw+C,EAAWx+C,KAIhB2E,GAAU65C,EAAWx+C,GAAG4jD,qBAAqBtnB,IAG/C,OAAO33B,GAGT4R,EAAO6sC,uBAAyB,WAC9B,IAAIoc,EAAW,GAEf,IAAKv2D,KAAK0/B,UAGR,IAFA,IAAI6V,EAAav1C,KAAK2hC,gBAEb5qC,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IACvCw+C,EAAWx+C,IAIhBw/D,EAASz7D,KAAKy6C,EAAWx+C,GAAGojD,0BAIhC,MAAO,CACL,KAAQ,qBACR,WAAcoc,IAIlBjpD,EAAO4uC,iBAAmB,WACxB,IAAIl8C,KAAK0/B,UAMT,IAFA,IAAI6V,EAAav1C,KAAK2hC,gBAEb5qC,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IACvCw+C,EAAWx+C,IAIhBw+C,EAAWx+C,GAAGmlD,oBAIlB5uC,EAAOutC,kBAAoB,WACzB,IAAI99B,EAAS/c,KAAK44C,YAElB,MADc,CAAC,IAAI5nB,GAAWjU,EAAOyW,KAAMzW,EAAO4W,MAAO,IAAI3C,GAAWjU,EAAO0W,KAAM1W,EAAO2W,MAAO,IAAI1C,GAAWjU,EAAOyW,KAAMzW,EAAO2W,MAAO,IAAI1C,GAAWjU,EAAO0W,KAAM1W,EAAO4W,QAIlLrmB,EAAO6uC,sBAAwB,WAC7B,GAAIn8C,KAAK0/B,UACP,MAAO,GAQT,IALA,IAGY36B,EAAK1M,EAHbk9C,EAAav1C,KAAK2hC,gBAClBt6B,EAAY,GACZi5B,EAAQ,GAGHvpC,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IAC5C,GAAKw+C,EAAWx+C,GAOhB,IAAK,IAAI6D,EAAK,EAAGC,GAFjBkK,EAAMgC,GADGwuC,EAAWx+C,GAAGy7C,uBAGGv7C,OAAQ2D,EAAKC,EAAID,IAGpC0lC,EAFLjoC,EAAM0M,EAAInK,GAAI4G,UAGZ6F,EAAUvM,KAAKiK,EAAInK,IACnB0lC,EAAMjoC,GAAO,GAKnB,OAAOgP,GAGTiG,EAAOuwD,UAAY,SAAmBxmB,GACpC,IAAI3Z,EAAS19B,KAEb,GAAIA,KAAK0/B,UACP,OAAO1/B,KAGJq3C,IACHA,EAAO,IAGLA,EAAa,SACfr3C,KAAK89D,gBAAkB99D,KAAK+uC,YAC5B/uC,KAAKs3C,UAAUD,EAAa,SAG9Br3C,KAAK+9D,oBAAsB/9D,KAAKuY,QAAmB,UACnDvY,KAAK6tB,OAAO,aAAa,GAGzB,IAFA,IAAI0nB,EAAav1C,KAAK2hC,gBAEb5qC,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IAC5Cw+C,EAAWx+C,GAAG8mE,UAAUxmB,GAQ1B,OALAr3C,KAAKg+D,UAAW,EAChBh+D,KAAKI,OACLxG,YAAW,WACT8jC,EAAO5R,KAAK,eACX,GACI9rB,MAGTsN,EAAOsuC,QAAU,WACf,GAAI57C,KAAK0/B,UACP,OAAO1/B,KAKT,IAFA,IAAIu1C,EAAav1C,KAAK2hC,gBAEb5qC,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IAC5Cw+C,EAAWx+C,GAAG6kD,UAYhB,OATI57C,KAAK89D,kBACP99D,KAAKs3C,UAAUt3C,KAAK89D,wBACb99D,KAAK89D,iBAGd99D,KAAKg+D,UAAW,EAChBh+D,KAAKG,OACLH,KAAK6tB,OAAO,YAAa7tB,KAAK+9D,qBAC9B/9D,KAAK8rB,KAAK,WACH9rB,MAGTsN,EAAOquC,UAAY,WACjB,QAAK37C,KAAKg+D,UAOLhB,EApegB,CAqevB7lB,IAIF,SAASymB,GAAgBvqC,EAAY15B,GACnC,GAAIqG,KAAK0/B,UACP,OAAO,KAMT,IAHA,IAAI6V,EAAav1C,KAAK2hC,gBAClBjmC,EAAS,KAEJ3E,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IAAK,CACjD,IAAI65D,EAAMrb,EAAWx+C,GAErB,GAAK65D,EAAL,CAIA,IAAIqN,EAAYrN,EAAIj3D,GAAI05B,GAEpB4qC,IACFviE,EAASuiE,EAAUjpC,QAAQt5B,KAI/B,OAAOA,EAxBTshE,GAAmBpuC,iBAAiB,sBA2BpC,IAAIsvC,GAAgB,SAAUC,GAG5B,SAASD,EAAcE,EAASz/D,EAAM0Z,EAAME,GAC1C,IAAIwX,EAQJ,OANAA,EAAQouC,EAAoB7lE,KAAK0H,KAAM,KAAMuY,IAAYvY,MACnDq+D,aAAeD,EACrBruC,EAAMpxB,KAAOA,EAEboxB,EAAMuuC,UAAUjmD,GAET0X,EAXTpjB,GAAeuxD,EAAeC,GAc9B,IAAI7wD,EAAS4wD,EAAc/lE,UAoD3B,OAlDAmV,EAAOoqC,eAAiB,WAItB,IAHA,IAAIxmB,EAAc,GACdqkB,EAAav1C,KAAK2hC,gBAEb5qC,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IAAK,CACjD,IAAIs6B,EAAQkkB,EAAWx+C,GACvBm6B,EAAYp2B,KAAKu2B,EAAMugB,UAAoC,YAAxBvgB,EAAMvC,cAA8B,CAACuC,EAAMugB,YAAcvgB,EAAMqmB,kBAGpG,OAAOxmB,GAGT5jB,EAAOwsC,eAAiB,SAAwB5oB,GAI9C,IAFA,IAAIqkB,EAAa,GAERx+C,EAAI,EAAGiO,GAHhBksB,EAAcA,GAAe,IAGGj6B,OAAQF,EAAIiO,EAAGjO,IAAK,CAClD,IAAIkL,EAAI,IAAIjC,KAAKq+D,aAAantC,EAAYn6B,GAAIiJ,KAAK6tB,UACnD0nB,EAAWz6C,KAAKmH,GAIlB,OADAjC,KAAKi9D,cAAc1nB,GACZv1C,MAGTsN,EAAOgxD,UAAY,SAAmBjmD,IACpCA,EAAOA,GAAQ,IAENphB,SACHohB,EAAK,aAAcrY,KAAKq+D,aAC1Br+D,KAAKi9D,cAAc5kD,GAEnBrY,KAAK85C,eAAezhC,KAK1B/K,EAAOkwD,UAAY,SAAmB5M,GACpC,OAAOA,aAAe5wD,KAAKq+D,cAG7B/wD,EAAO6sC,uBAAyB,WAC9B,IAAIv5B,EAAS5gB,KAAK03C,iBACdxmB,EAAcF,GAAWC,eAAerQ,GAC5C,MAAO,CACL,KAAQ5gB,KAAKmvC,UACb,YAAeje,IAIZgtC,EAnEW,CAoElBlB,IAEEuB,GAAa,SAAUC,GAGzB,SAASD,EAAWlmD,EAAMg/B,GACxB,OAAOmnB,EAAelmE,KAAK0H,KAAM08D,GAAQ,aAAcrkD,EAAMg/B,IAASr3C,KAwBxE,OA3BA2M,GAAe4xD,EAAYC,GAMdD,EAAWpmE,UAEjBsmE,YAAc,SAAqBvX,GACxC,IAAKA,EACH,OAAO,KAGT,IAAIhxB,EAASl2B,KAAK03C,iBACdvzC,EAAM,KACNrH,EAAMm/B,IASV,OARA/F,EAAOzY,SAAQ,SAAUja,GACvB,IAecskC,EAAItmB,EAClBxlB,EACAoR,EAjBImY,GAeUuiB,EAfQtkC,EAgBtBxH,GADkBwlB,EAfO0lC,GAgBlBlrD,EAAI8rC,EAAG9rC,EACdoR,EAAIoU,EAAGpU,EAAI06B,EAAG16B,EACX5U,KAAKqV,KAAK7R,EAAIA,EAAIoR,EAAIA,IAhBrBmY,EAAOzoB,IACTqH,EAAMX,EACN1G,EAAMyoB,MAGHphB,GAGFo6D,EA5BQ,CA6BfL,IAEFK,GAAW3vC,iBAAiB,cAQ5B,IAAI8vC,GAAY,SAAUF,GAGxB,SAASE,IACP,OAAOF,EAAer7D,MAAMnD,KAAMhJ,YAAcgJ,KA2BlD,OA9BA2M,GAAe+xD,EAAWF,GAMbE,EAAUvmE,UAEhB6jE,kBAAoB,SAA2Bj/C,GACpD,IAAIw5C,EAAWv2D,KAAK2hC,gBAChBy4B,EAAO,EACPC,EAAO,EACPC,EAAU,EAWd,OAVA/D,EAAS94C,SAAQ,SAAUzY,GACzB,IAAIxB,EAAIwB,EAAEg3D,kBAAkBj/C,GAExBvZ,IACF42D,GAAQ52D,EAAExH,EAAIwH,EAAE3D,MAChBw6D,GAAQ72D,EAAE4J,EAAI5J,EAAE3D,MAChBy6D,GAAW92D,EAAE3D,UAID,IAAZy6D,EACK,KAGF,IAAItpC,GAAWopC,EAAMC,GAAM3rD,OAAO,EAAI4rD,IAGxCoE,EA/BO,CAgCdR,IAEES,GAAkB,SAAUC,GAG9B,SAASD,EAAgBtmD,EAAME,GAC7B,OAAOqmD,EAAWtmE,KAAK0H,KAAM+8D,GAAY,kBAAmB1kD,EAAME,IAAYvY,KAGhF,OANA2M,GAAegyD,EAAiBC,GAMzBD,EAPa,CAQpBD,IAEFC,GAAgB/vC,iBAAiB,mBAEjC,IAAIiwC,GAAe,SAAUD,GAG3B,SAASC,EAAaxmD,EAAMg/B,GAC1B,OAAOunB,EAAWtmE,KAAK0H,KAAM04D,GAAS,eAAgBrgD,EAAMg/B,IAASr3C,KAGvE,OANA2M,GAAekyD,EAAcD,GAMtBC,EAPU,CAQjBH,IAEFG,GAAajwC,iBAAiB,gBAC9B,IAAIkwC,GAAU,CACZ,OAAUpC,GACV,WAAcK,GACd,QAAWrE,GACX,WAAc6F,GACd,gBAAmBI,GACnB,aAAgBE,IAEdE,GAAU,CACZC,WAAY,SAAoB3kB,EAAS4kB,GAKvC,GAJIrnE,EAASyiD,KACXA,EAAU9/C,EAAU8/C,IAGlB/+C,MAAMC,QAAQ8+C,GAAU,CAG1B,IAFA,IAAI6kB,EAAa,GAERnoE,EAAI,EAAG4E,EAAM0+C,EAAQpjD,OAAQF,EAAI4E,EAAK5E,IAAK,CAClD,IAAI65D,EAAMmO,GAAQI,SAAS9kB,EAAQtjD,GAAIkoE,GAEnC3jE,MAAMC,QAAQq1D,GAChBj2D,EAAOukE,EAAYtO,GAEnBsO,EAAWpkE,KAAK81D,GAIpB,OAAOsO,EAIP,OAFgBH,GAAQI,SAAS9kB,EAAS4kB,IAK9CE,SAAU,SAAkBp9D,EAAMk9D,GAChC,IAAKl9D,GAAQ3K,EAAM2K,EAAW,MAC5B,OAAO,KAGT,IAAIpD,EAAOoD,EAAW,KAEtB,GAAa,YAATpD,EAAoB,CACtB,IAAIsD,EAAIF,EAAe,SAEnBD,EAAWi9D,GAAQI,SAASl9D,GAEhC,OAAKH,GAILA,EAAS01C,MAAMz1C,EAAS,IACxBD,EAASy1C,cAAcx1C,EAAiB,YAEpCk9D,GACFA,EAAUn9D,GAGLA,GAVE,KAWJ,GAAa,sBAATnD,EAA8B,CACvC,IAAIygE,EAAWr9D,EAAe,SAE9B,OAAKq9D,EAIEL,GAAQC,WAAWI,EAAUH,GAH3B,KAIJ,GAAI,CAAC,QAAS,aAAc,UAAW,aAAc,kBAAmB,gBAAgBhkE,QAAQ0D,IAAS,EAAG,CACjH,IACIjD,EAAS,IAAIojE,GADI,UAATngE,EAAmB,SAAWA,GACVoD,EAAkB,aAMlD,OAJIk9D,GACFA,EAAUvjE,GAGLA,EACF,GAAa,uBAATiD,EAA+B,CACxC,IAAI42C,EAAaxzC,EAAiB,WAElC,IAAK/E,EAAeu4C,GAAa,CAC/B,IAAI8pB,EAAW,IAAIrC,GAMnB,OAJIiC,GACFA,EAAUI,GAGLA,EAMT,IAHA,IAAIC,EAAQ,GACRpvD,EAAOqlC,EAAWt+C,OAEbF,EAAI,EAAGA,EAAImZ,EAAMnZ,IACxBuoE,EAAMxkE,KAAKikE,GAAQI,SAAS5pB,EAAWx+C,KAGzC,IAAIwoE,EAAU,IAAIvC,GAAmBsC,GAMrC,OAJIL,GACFA,EAAUM,GAGLA,EAGT,OAAO,OAOPC,GAAS,SAAU7C,GAUrB,SAAS6C,EAAOtuC,EAAalK,EAAQqwB,GACnC,IAAItnB,EASJ,OAPAA,EAAQ4sC,EAAarkE,KAAK0H,KAAM,KAAMq3C,IAASr3C,KAE3CkxB,GACFnB,EAAM+pB,eAAe5oB,GAGvBnB,EAAM0vC,QAAUz4C,EACT+I,EAnBTpjB,GAAe6yD,EAAQ7C,GAEvB6C,EAAOxlB,SAAW,SAAkBj4C,GAClC,IAAIkE,EAAUlE,EAAc,QACxB29D,EAAS,IAAIF,EAAOz9D,EAAkB,YAAGA,EAAa,OAAGA,EAAc,SAE3E,OADA29D,EAAOnoB,cAActxC,EAAoB,YAClCy5D,GAgBT,IAAIpyD,EAASkyD,EAAOrnE,UA0IpB,OAxIAmV,EAAOqyD,UAAY,WACjB,OAAO3/D,KAAKy/D,SAGdnyD,EAAOsyD,UAAY,SAAmB54C,GAGpC,OAFAhnB,KAAKy/D,QAAUz4C,EACfhnB,KAAK28C,iBACE38C,MAGTsN,EAAOskC,SAAW,WAShB,IARA,IAMI7qB,EAAK9nB,EAAIC,EANT07C,EAAW56C,KAAK24C,eAChB7T,EAAS9kC,KAAK03C,iBACdmoB,EAAiB7/D,KAAKuY,QAA6B,oBACnDyO,EAAShnB,KAAK2/D,YAEdxE,EAAQ,GAGHpkE,EAAI,EAAG4E,EAAMkkE,EAAiB,EAAG9oE,EAAI4E,EAAK5E,IAAK,CACtDgwB,EAAM,IAAMhwB,EAAI4E,EAAMnD,KAAKC,GAAK,IAChCwG,EAAK+nB,EAASxuB,KAAKsX,IAAIiX,GACvB7nB,EAAK8nB,EAASxuB,KAAKuX,IAAIgX,GACvB,IAAI+4C,EAASllB,EAAShjB,OAAOkN,EAAQ7lC,EAAIC,GACzCi8D,EAAMrgE,KAAKglE,GAIb,OADA3E,EAAMrgE,KAAKqgE,EAAM,IACVA,GAGT7tD,EAAOukC,SAAW,WAChB,MAAO,IAGTvkC,EAAOqrD,YAAc,WACnB,OAAO34D,KAAKG,QAGdmN,EAAO2rC,eAAiB,SAAwBrrC,EAAOo3B,GACrD,IAAInnC,EAAMmC,KAAKo9B,SAEf,GAAIv/B,EAAIwgC,WACN,OAAOs+B,EAAaxkE,UAAU8gD,eAAe3gD,KAAK0H,KAAM4N,EAAOo3B,GAGjE,IAAIF,EAASjnC,EAAI+hC,uBAAuB5/B,KAAKw8D,qBACzCtsD,EAAOlQ,KAAK40B,UACZj4B,EAAIvF,EAAM4tC,GAAahlC,KAAKk5C,oBAAsBlU,EAClD+6B,EAAKj7B,EAAO52B,IAAIgC,EAAK7J,MAAQ,EAAG6J,EAAK5J,OAAS,GAElD,OAAOu+B,GAAcj3B,EAAOk3B,EAAQi7B,EAAIpjE,IAG1C2Q,EAAOguC,kBAAoB,SAA2BjoB,GACpD,IAAIiC,EAASt1B,KAAKggE,WAAW3sC,GAE7B,IAAKiC,EACH,OAAO,KAGT,IAAI2sB,EAAUjiD,KAAK+6D,qBAEfkF,EAAU3qC,EAAOz3B,KAAI,SAAU2F,GACjC,OAAO6vB,EAAWsB,QAAQnxB,MAExB08D,EAAQD,EAAQ,GAAGjkE,EAAIimD,EAAQjmD,EAC/BmkE,EAASF,EAAQ,GAAGjkE,EAAIimD,EAAQjmD,EAChCokE,EAAOH,EAAQ,GAAG7yD,EAAI60C,EAAQ70C,EAC9BizD,EAAUJ,EAAQ,GAAG7yD,EAAI60C,EAAQ70C,EACrC,OAAO,IAAI6lB,GAAOgvB,EAAQ/zC,IAAIgyD,EAAOE,GAAOne,EAAQ/zC,IAAIiyD,EAAQE,KAGlE/yD,EAAOwrC,eAAiB,SAAwB8B,GAC9C,IAAItlB,EAASt1B,KAAKggE,WAAWplB,GAE7B,OAAKtlB,EAIE,IAAIrC,GAAOqC,EAAO,GAAGt5B,EAAGs5B,EAAO,GAAGloB,EAAGkoB,EAAO,GAAGt5B,EAAGs5B,EAAO,GAAGloB,EAAGpN,KAAKg1C,kBAHlE,MAMX1nC,EAAO0yD,WAAa,SAAoBplB,GACtC,IAAKA,IAAa56C,KAAKu5D,cAAgBniE,EAAM4I,KAAKy/D,SAChD,OAAO,KAGT,IAAIz4C,EAAShnB,KAAKy/D,QAKlB,MAAO,CAJE7kB,EAAShjB,OAAO53B,KAAKu5D,cAAevyC,EAAQ,GAC5C4zB,EAAShjB,OAAO53B,KAAKu5D,aAAcvyC,EAAQ,GAC3C4zB,EAAShjB,OAAO53B,KAAKu5D,aAAc,EAAGvyC,GACtC4zB,EAAShjB,OAAO53B,KAAKu5D,aAAc,GAAIvyC,KAIlD1Z,EAAOmtC,uBAAyB,WAC9B,OAAIrjD,EAAM4I,KAAKy/D,SACN,EAGQ,EAAVjnE,KAAKC,GAASuH,KAAKy/D,SAG5BnyD,EAAOqtC,qBAAuB,WAC5B,OAAIvjD,EAAM4I,KAAKy/D,SACN,EAGFjnE,KAAKC,GAAKD,KAAKoL,IAAI5D,KAAKy/D,QAAS,IAG1CnyD,EAAO6sC,uBAAyB,WAE9B,MAAO,CACL,KAAQ,UACR,YAHgBnpB,GAAWC,eAAe,CAACjxB,KAAK4xC,eAOpDtkC,EAAOtL,QAAU,SAAiBuW,GAChC,IAAIusB,EAAS9kC,KAAKsd,YACd+5B,EAAOxgD,EAAO,GAAI0hB,GACtB8+B,EAAKv1C,UAAW,EAChB,IAAImE,EAAUjG,KAAKo6C,UAAU/C,GAI7B,OAHApxC,EAAkB,SAAI,CACpB,KAAQ,WAEH,CACL,QAAWA,EACX,QAAW,SACX,YAAe,CAAC6+B,EAAO9oC,EAAG8oC,EAAO13B,GACjC,OAAUpN,KAAK2/D,cAIZH,EAjKI,CAkKXjD,GAAY7D,KAEd8G,GAAO/wC,aAxKS,CACd,oBAAuB,KAwKzB+wC,GAAO5wC,iBAAiB,UACxB,IAII0xC,GAAU,SAAU3D,GAUtB,SAAS2D,EAAQpvC,EAAa7qB,EAAOC,EAAQ+wC,GAC3C,IAAItnB,EAUJ,OARAA,EAAQ4sC,EAAarkE,KAAK0H,KAAM,KAAMq3C,IAASr3C,KAE3CkxB,GACFnB,EAAM+pB,eAAe5oB,GAGvBnB,EAAM1pB,MAAQA,EACd0pB,EAAMzpB,OAASA,EACRypB,EApBTpjB,GAAe2zD,EAAS3D,GAExB2D,EAAQtmB,SAAW,SAAkBj4C,GACnC,IAAIkE,EAAUlE,EAAc,QACxBskB,EAAU,IAAIi6C,EAAQv+D,EAAkB,YAAGA,EAAY,MAAGA,EAAa,OAAGA,EAAc,SAE5F,OADAskB,EAAQkxB,cAActxC,EAAoB,YACnCogB,GAiBT,IAAI/Y,EAASgzD,EAAQnoE,UAiJrB,OA/IAmV,EAAO8P,SAAW,WAChB,OAAOpd,KAAKqG,OAGdiH,EAAOizD,SAAW,SAAkBl6D,GAGlC,OAFArG,KAAKqG,MAAQA,EACbrG,KAAK28C,iBACE38C,MAGTsN,EAAO+P,UAAY,WACjB,OAAOrd,KAAKsG,QAGdgH,EAAOkzD,UAAY,SAAmBl6D,GAGpC,OAFAtG,KAAKsG,OAASA,EACdtG,KAAK28C,iBACE38C,MAGTsN,EAAOskC,SAAW,WAahB,IAZA,IAUI6uB,EAAK15C,EAAK9nB,EAAIC,EAVd07C,EAAW56C,KAAK24C,eAChB7T,EAAS9kC,KAAK03C,iBACdmoB,EAAiB7/D,KAAKuY,QAA6B,oBACnDlS,EAAQrG,KAAKod,WACb9W,EAAStG,KAAKqd,YAEd89C,EAAQ,GACRt1D,EAAIrN,KAAKoL,IAAIyC,EAAQ,EAAG,GAAK7N,KAAKoL,IAAI0C,EAAS,EAAG,GAClDmwB,EAAKj+B,KAAKoL,IAAIyC,EAAQ,EAAG,GACzBqwB,EAAKl+B,KAAKoL,IAAI0C,EAAS,EAAG,GAGrBvP,EAAI,EAAGA,EAAI8oE,EAAgB9oE,IAAK,CAEvCgwB,GADA05C,EAAM,IAAM1pE,EAAI8oE,GACJrnE,KAAKC,GAAK,IACtBwG,EAAKzG,KAAKqV,KAAKhI,GAAK4wB,EAAKj+B,KAAKoL,IAAIpL,KAAK0gC,IAAInS,GAAM,GAAK2P,IACtDx3B,EAAK1G,KAAKqV,KAAKhI,GAAK6wB,EAAKl+B,KAAKoL,IAAI,EAAIpL,KAAK0gC,IAAInS,GAAM,GAAK0P,IAEtDgqC,EAAM,IAAMA,EAAM,MACpBxhE,IAAO,GAGLwhE,EAAM,KAAOA,EAAM,MACrBvhE,IAAO,GAGT,IAAI4gE,EAASllB,EAAShjB,OAAOkN,EAAQ7lC,EAAIC,GACzCi8D,EAAMrgE,KAAKglE,GAGb,OAAO3E,GAGT7tD,EAAOukC,SAAW,WAChB,MAAO,IAGTvkC,EAAOqrD,YAAc,WACnB,OAAO34D,KAAKG,QAGdmN,EAAO2rC,eAAiB,SAAwBrrC,EAAOo3B,GACrD,IAAInnC,EAAMmC,KAAKo9B,SAEf,GAAIv/B,EAAIkqC,iBACN,OAAO40B,EAAaxkE,UAAU8gD,eAAe3gD,KAAK0H,KAAM4N,EAAOo3B,GAGjE,IAAI3R,EAAax1B,EAAIg5C,gBAEjBl6C,EAAIvF,EAAM4tC,GAAahlC,KAAKk5C,oBAAsBlU,EAClD07B,EAAMrtC,EAAWkC,cAAc,CAACv1B,KAAKu5D,aAAc17D,EAAI+5B,OAAO53B,KAAKu5D,aAAcv5D,KAAKod,WAAa,EAAGpd,KAAKqd,YAAc,KAI7H,OAAOwnB,GAAcj3B,EAHZ/P,EAAI+tD,qBAAqB8U,EAAI,IAC7B7iE,EAAI+tD,qBAAqB8U,EAAI,IAEF/jE,IAGtC2Q,EAAOguC,kBAAoB,WACzB,OAAOkkB,GAAOrnE,UAAUmjD,kBAAkBn4C,MAAMnD,KAAMhJ,YAGxDsW,EAAOwrC,eAAiB,WACtB,OAAO0mB,GAAOrnE,UAAU2gD,eAAe31C,MAAMnD,KAAMhJ,YAGrDsW,EAAO0yD,WAAa,SAAoBplB,GACtC,IAAKA,IAAa56C,KAAKu5D,cAAgBniE,EAAM4I,KAAKqG,QAAUjP,EAAM4I,KAAKsG,QACrE,OAAO,KAGT,IAAID,EAAQrG,KAAKod,WACb9W,EAAStG,KAAKqd,YAKlB,MAAO,CAJEu9B,EAAShjB,OAAO53B,KAAKu5D,cAAelzD,EAAQ,EAAG,GAC/Cu0C,EAAShjB,OAAO53B,KAAKu5D,aAAclzD,EAAQ,EAAG,GAC9Cu0C,EAAShjB,OAAO53B,KAAKu5D,aAAc,GAAIjzD,EAAS,GAChDs0C,EAAShjB,OAAO53B,KAAKu5D,aAAc,EAAGjzD,EAAS,KAI1DgH,EAAOmtC,uBAAyB,WAC9B,GAAIrjD,EAAM4I,KAAKqG,QAAUjP,EAAM4I,KAAKsG,QAClC,OAAO,EAGT,IAAIq6D,EAAS3gE,KAAKqG,MAAQrG,KAAKsG,OAAStG,KAAKqG,MAAQrG,KAAKsG,OAC1D,OAAO,EAAI9N,KAAKC,GAAKkoE,EAAS,EAAI,EAAInoE,KAAK+D,IAAIyD,KAAKqG,MAAQrG,KAAKsG,SAGnEgH,EAAOqtC,qBAAuB,WAC5B,OAAIvjD,EAAM4I,KAAKqG,QAAUjP,EAAM4I,KAAKsG,QAC3B,EAGF9N,KAAKC,GAAKuH,KAAKqG,MAAQrG,KAAKsG,OAAS,GAG9CgH,EAAO6sC,uBAAyB,WAE9B,MAAO,CACL,KAAQ,UACR,YAHgBnpB,GAAWC,eAAe,CAACjxB,KAAK4xC,eAOpDtkC,EAAOtL,QAAU,SAAiBuW,GAChC,IAAI8+B,EAAOxgD,EAAO,GAAI0hB,GAClBusB,EAAS9kC,KAAKsd,YAClB+5B,EAAKv1C,UAAW,EAChB,IAAImE,EAAUjG,KAAKo6C,UAAU/C,GAI7B,OAHApxC,EAAkB,SAAI,CACpB,KAAQ,WAEH,CACL,QAAWA,EACX,QAAW,UACX,YAAe,CAAC6+B,EAAO9oC,EAAG8oC,EAAO13B,GACjC,MAASpN,KAAKod,WACd,OAAUpd,KAAKqd,cAIZijD,EAzKK,CA0KZ/D,GAAY7D,KAEd4H,GAAQ7xC,aAhLQ,CACd,oBAAuB,KAgLzB6xC,GAAQ1xC,iBAAiB,WAEzB,IAAIgyC,GAAY,SAAUC,GAUxB,SAASD,EAAU1vC,EAAa7qB,EAAOC,EAAQ+wC,GAC7C,IAAItnB,EAUJ,OARAA,EAAQ8wC,EAASvoE,KAAK0H,KAAM,KAAMq3C,IAASr3C,KAEvCkxB,GACFnB,EAAM+pB,eAAe5oB,GAGvBnB,EAAM+wC,OAASz6D,EACf0pB,EAAMgxC,QAAUz6D,EACTypB,EApBTpjB,GAAei0D,EAAWC,GAE1BD,EAAU5mB,SAAW,SAAkBj4C,GACrC,IAAIkE,EAAUlE,EAAc,QACxB6T,EAAO,IAAIgrD,EAAU7+D,EAAkB,YAAGA,EAAY,MAAGA,EAAa,OAAGA,EAAc,SAE3F,OADA6T,EAAK2hC,cAActxC,EAAoB,YAChC2P,GAiBT,IAAItI,EAASszD,EAAUzoE,UA8PvB,OA5PAmV,EAAOoqC,eAAiB,WACtB,OAAO13C,KAAKu5D,cAGdjsD,EAAOwsC,eAAiB,SAAwBknB,GAG9C,GAFAhhE,KAAKu5D,aAAeyH,aAAchwC,GAAagwC,EAAK,IAAIhwC,GAAWgwC,IAE9DhhE,KAAKu5D,eAAiBv5D,KAAKo9B,SAE9B,OADAp9B,KAAK48C,oBACE58C,KAGT,IAAIqzB,EAAarzB,KAAKg1C,iBAItB,OAFAh1C,KAAK85D,mBAAmBzmC,EAAWsB,QAAQ30B,KAAKu5D,eAEzCv5D,MAGTsN,EAAO8P,SAAW,WAChB,OAAOpd,KAAK8gE,QAGdxzD,EAAOizD,SAAW,SAAkBl6D,GAGlC,OAFArG,KAAK8gE,OAASz6D,EACdrG,KAAK28C,iBACE38C,MAGTsN,EAAO+P,UAAY,WACjB,OAAOrd,KAAK+gE,SAGdzzD,EAAOkzD,UAAY,SAAmBl6D,GAGpC,OAFAtG,KAAK+gE,QAAUz6D,EACftG,KAAK28C,iBACE38C,MAGTsN,EAAOskC,SAAW,WAChB,IAAIgJ,EAAW56C,KAAK24C,eAEhBqoB,EAAKhhE,KAAKu5D,aACV17D,EAAMmC,KAAKo9B,SACX3G,EAAK,EACLC,GAAM,EAEV,GAAI74B,EAAK,CACP,IAAIojE,EAAOpjE,EAAIi5C,gBAEXmqB,EAAW,KAAIA,EAAY,QAC7BxqC,GAAM,GAGJwqC,EAAa,OAAIA,EAAU,MAC7BvqC,EAAK,GAIT,IAAI9V,EAAS,GAMb,OALAA,EAAO9lB,KAAKkmE,GACZpgD,EAAO9lB,KAAK8/C,EAAShjB,OAAOopC,EAAIvqC,EAAKz2B,KAAK8gE,OAAQ,IAClDlgD,EAAO9lB,KAAK8/C,EAAShjB,OAAOopC,EAAIvqC,EAAKz2B,KAAK8gE,OAAQpqC,EAAK12B,KAAK+gE,UAC5DngD,EAAO9lB,KAAK8/C,EAAShjB,OAAOopC,EAAI,EAAGtqC,EAAK12B,KAAK+gE,UAC7CngD,EAAO9lB,KAAKkmE,GACLpgD,GAGTtT,EAAOukC,SAAW,WAChB,MAAO,IAGTvkC,EAAOqrD,YAAc,WACnB,OAAO34D,KAAKG,QAGdmN,EAAOytD,mBAAqB,WAC1B,IAAI1nC,EAAarzB,KAAKg1C,iBAUtB,OARAh1C,KAAKyzC,qBAEAzzC,KAAKkhE,MAAQ7tC,GACZrzB,KAAKu5D,eACPv5D,KAAKkhE,KAAO7tC,EAAWsB,QAAQ30B,KAAKu5D,eAIjCv5D,KAAKkhE,MAGd5zD,EAAOwsD,mBAAqB,SAA4BqH,GACtDnhE,KAAKkhE,KAAOC,EACZnhE,KAAK48C,qBAGPtvC,EAAO+uD,aAAe,WACpB,IAAIlB,EAAQ0F,EAAS1oE,UAAUkkE,aAAa/jE,KAAK0H,MAE7CqzB,EAAarzB,KAAKg1C,iBAEtB,IAAK3hB,EAAW4C,WACd,OAAOklC,EAWT,IARA,IAAIiG,EAAe/tC,EAAWmD,kBAC1BC,EAAK2qC,EAAa3qC,GAClBC,EAAK0qC,EAAa1qC,GAElBJ,EAASt2B,KAAKg1C,iBAAiBze,YAE/ByqC,EAAK7F,EAAM,GAENpkE,EAAI,EAAGiO,EAAIm2D,EAAMlkE,OAAQF,EAAIiO,EAAGjO,IAAK,CAC5C,IAAIyE,EAAI2/D,EAAMpkE,GACVkI,EAAK,EACLC,EAAK,EAELu3B,GAAMuqC,EAAGhlE,EAAIR,EAAEQ,GAAK,IACtBiD,EAAKq3B,EAAOt6B,EAAIy6B,GAGdC,GAAMsqC,EAAG5zD,EAAI5R,EAAE4R,GAAK,IACtBlO,EAAKo3B,EAAOlpB,EAAIspB,GAGlBykC,EAAMpkE,GAAGkX,KAAKhP,EAAIC,GAGpB,OAAOi8D,GAGT7tD,EAAO2tD,aAAe,WACpBj7D,KAAKg7C,cAEL,IAAI3nB,EAAarzB,KAAKg1C,iBAElBh1C,KAAKkhE,MAAQ7tC,IACfrzB,KAAKu5D,aAAelmC,EAAWD,UAAUpzB,KAAKkhE,QAIlD5zD,EAAO4uC,iBAAmB,WACxBl8C,KAAKkhE,KAAO,KAEZL,EAAS1oE,UAAU+jD,iBAAiB5jD,KAAK0H,OAG3CsN,EAAOorC,eAAiB,SAAwBkC,GAC9C,OAAOA,EAAShjB,OAAO53B,KAAKu5D,aAAcv5D,KAAK8gE,OAAS,GAAI9gE,KAAK+gE,QAAU,IAG7EzzD,EAAO2rC,eAAiB,SAAwBrrC,EAAOo3B,GACrD,IAAInnC,EAAMmC,KAAKo9B,SAEf,GAAIv/B,EAAIkqC,iBACN,OAAO84B,EAAS1oE,UAAU8gD,eAAe3gD,KAAK0H,KAAM4N,EAAOo3B,GAG7D,IAAIroC,EAAIvF,EAAM4tC,GAAahlC,KAAKk5C,oBAAsBlU,EAClDnsC,EAAIgF,EAAIgmD,iBAAmBlnD,EAE3BogB,EAAS/c,KAAK+rC,gBAAgB7W,OAAOr8B,GAErC2C,EAAIqC,EAAI6qD,qBAAqB96C,GAEjC,OAAOmP,EAAOhG,SAASvb,IAGzB8R,EAAOguC,kBAAoB,SAA2BjoB,GACpD,IAAI0sC,EAAK//D,KAAKqhE,cAAchuC,GAE5B,IAAK0sC,EACH,OAAO,KAGT,IAAIuB,EAAOjuC,EAAWkC,cAAc,CAAC,IAAIvE,GAAWhxB,KAAKu5D,aAAav9D,EAAG+jE,EAAG3yD,GAAI,IAAI4jB,GAAW+uC,EAAG/jE,EAAGgE,KAAKu5D,aAAansD,KACvH,OAAO,IAAI6lB,GAAOquC,EAAK,GAAIA,EAAK,KAGlCh0D,EAAOwrC,eAAiB,SAAwB8B,GAC9C,IAAImlB,EAAK//D,KAAKqhE,cAAczmB,GAE5B,OAAKmlB,EAIE,IAAI9sC,GAAOjzB,KAAKu5D,aAAcwG,EAAI//D,KAAKg1C,kBAHrC,MAMX1nC,EAAO+zD,cAAgB,SAAuBzmB,GAC5C,IAAKA,IAAa56C,KAAKu5D,cAAgBniE,EAAM4I,KAAK8gE,SAAW1pE,EAAM4I,KAAK+gE,SACtE,OAAO,KAGT,IAEI55D,EAFQnH,KAAKod,WAGbhW,GAFSpH,KAAKqd,YAIlB,GAAIu9B,EAAS1E,WAAY,CACvB,IAAIA,EAAa0E,EAAS1E,WAG1B/uC,GAFS+uC,EAAW50C,MAAQ40C,EAAW70C,KAAO,GAAK,EAGnD+F,GAFS8uC,EAAW3gC,IAAM2gC,EAAWC,OAAS,GAAK,EAMrD,OADSyE,EAAShjB,OAAO53B,KAAKu5D,aAAcpyD,EAAGC,IAIjDkG,EAAOmtC,uBAAyB,WAC9B,OAAIrjD,EAAM4I,KAAK8gE,SAAW1pE,EAAM4I,KAAK+gE,SAC5B,EAGF,GAAK/gE,KAAK8gE,OAAS9gE,KAAK+gE,UAGjCzzD,EAAOqtC,qBAAuB,WAC5B,OAAIvjD,EAAM4I,KAAK8gE,SAAW1pE,EAAM4I,KAAK+gE,SAC5B,EAGF/gE,KAAK8gE,OAAS9gE,KAAK+gE,SAG5BzzD,EAAO6sC,uBAAyB,WAE9B,MAAO,CACL,KAAQ,UACR,YAHgBnpB,GAAWC,eAAe,CAACjxB,KAAK4xC,eAOpDtkC,EAAOtL,QAAU,SAAiBuW,GAChC,IAAI8+B,EAAOxgD,EAAO,GAAI0hB,GAClByoD,EAAKhhE,KAAK03C,iBACdL,EAAKv1C,UAAW,EAChB,IAAImE,EAAUjG,KAAKo6C,UAAU/C,GAI7B,OAHApxC,EAAkB,SAAI,CACpB,KAAQ,WAEH,CACL,QAAWA,EACX,QAAW,YACX,YAAe,CAAC+6D,EAAGhlE,EAAGglE,EAAG5zD,GACzB,MAASpN,KAAKod,WACd,OAAUpd,KAAKqd,cAIZujD,EAtRO,CAuRdlI,IAEFkI,GAAUhyC,iBAAiB,aAC3B,IAII2yC,GAAS,SAAUC,GAUrB,SAASD,EAAOrwC,EAAalK,EAAQnB,EAAYC,EAAUuxB,GACzD,IAAItnB,EAKJ,OAHAA,EAAQyxC,EAAQlpE,KAAK0H,KAAMkxB,EAAalK,EAAQqwB,IAASr3C,MACnD6lB,WAAaA,EACnBkK,EAAMjK,SAAWA,EACViK,EAfTpjB,GAAe40D,EAAQC,GAEvBD,EAAOvnB,SAAW,SAAkBj4C,GAClC,IAAIkE,EAAUlE,EAAc,QACxB8kB,EAAS,IAAI06C,EAAOx/D,EAAkB,YAAGA,EAAa,OAAGA,EAAiB,WAAGA,EAAe,SAAGA,EAAc,SAEjH,OADA8kB,EAAO0wB,cAActxC,EAAoB,YAClC4gB,GAYT,IAAIvZ,EAASi0D,EAAOppE,UA6GpB,OA3GAmV,EAAOm0D,cAAgB,WACrB,OAAOzhE,KAAK6lB,YAGdvY,EAAOo0D,cAAgB,SAAuB77C,GAG5C,OAFA7lB,KAAK6lB,WAAaA,EAClB7lB,KAAK28C,iBACE38C,MAGTsN,EAAOq0D,YAAc,WACnB,OAAO3hE,KAAK8lB,UAGdxY,EAAOs0D,YAAc,SAAqB97C,GAGxC,OAFA9lB,KAAK8lB,SAAWA,EAChB9lB,KAAK28C,iBACE38C,MAGTsN,EAAOskC,SAAW,WAWhB,IAVA,IAQI7qB,EAAK9nB,EAAIC,EART07C,EAAW56C,KAAK24C,eAChB7T,EAAS9kC,KAAK03C,iBACdmoB,EAAiB7/D,KAAKuY,QAA6B,oBAAI,EACvDyO,EAAShnB,KAAK2/D,YACdxE,EAAQ,CAACr2B,EAAO92B,QAChB6X,EAAa7lB,KAAKyhE,gBAClB5xD,EAAQ7P,KAAK2hE,cAAgB97C,EAIxB9uB,EAAI,EAAGA,EAAI8oE,EAAgB9oE,IAAK,CACvCgwB,GAAOlX,EAAQ9Y,GAAK8oE,EAAiB,GAAKh6C,GAAcrtB,KAAKC,GAAK,IAClEwG,EAAK+nB,EAASxuB,KAAKsX,IAAIiX,GACvB7nB,EAAK8nB,EAASxuB,KAAKuX,IAAIgX,GACvB,IAAI+4C,EAASllB,EAAShjB,OAAOkN,EAAQ7lC,EAAIC,GACzCi8D,EAAMrgE,KAAKglE,GAIb,OADA3E,EAAMrgE,KAAKgqC,EAAO92B,QACXmtD,GAGT7tD,EAAO2rC,eAAiB,SAAwBrrC,EAAOo3B,GACrD,IAAInnC,EAAMmC,KAAKo9B,SAEf,GAAIv/B,EAAIkqC,iBACN,OAAOy5B,EAAQrpE,UAAU8gD,eAAe3gD,KAAK0H,KAAM4N,EAAOo3B,GAG5D,IAAIF,EAASjnC,EAAI+hC,uBAAuB5/B,KAAKw8D,qBACzC7/D,EAAIvF,EAAM4tC,GAAahlC,KAAKk5C,oBAAsBlU,EAClD90B,EAAOlQ,KAAK40B,UACZitC,EAAK/8B,EACLrpC,EAAKmS,EACL5R,EAAIP,EAAGO,EAAI6lE,EAAG7lE,EACdoR,EAAIy0D,EAAGz0D,EAAI3R,EAAG2R,EACdjO,EAAQ3G,KAAK2G,MAAMiO,EAAGpR,GACtB6T,EAAQ1Q,EAAQ,EAA4B,KAAvBA,EAAQ,EAAI3G,KAAKC,KAAa,EAAID,KAAKC,IAAc,IAAR0G,GAAe,EAAI3G,KAAKC,IAE1FqpE,EAAS9hE,KAAK6lB,WAAa,IAC3Bk8C,EAAS/hE,KAAK8lB,SAAW,IACzBk8C,GAAU,EAQd,OALEA,EADEF,EAASC,IACClyD,EAAQkyD,GAAUlyD,EAAQiyD,GAE5BjyD,GAASiyD,GAAUjyD,GAASkyD,EAGjCtmE,EAAGkS,WAAWk0D,IAAO3xD,EAAK7J,MAAQ,EAAI1J,GAAKqlE,GAGpD10D,EAAOmtC,uBAAyB,WAC9B,OAAIrjD,EAAM4I,KAAKy/D,SACN,EAGQ,EAAVjnE,KAAKC,GAASuH,KAAKy/D,QAAUjnE,KAAK+D,IAAIyD,KAAK6lB,WAAa7lB,KAAK8lB,UAAY,IAAM,EAAI9lB,KAAKy/D,SAGjGnyD,EAAOqtC,qBAAuB,WAC5B,OAAIvjD,EAAM4I,KAAKy/D,SACN,EAGFjnE,KAAKC,GAAKD,KAAKoL,IAAI5D,KAAKy/D,QAAS,GAAKjnE,KAAK+D,IAAIyD,KAAK6lB,WAAa7lB,KAAK8lB,UAAY,KAG3FxY,EAAOtL,QAAU,SAAiBuW,GAChC,IAAI8+B,EAAOxgD,EAAO,GAAI0hB,GAClBusB,EAAS9kC,KAAKsd,YAClB+5B,EAAKv1C,UAAW,EAChB,IAAImE,EAAUjG,KAAKo6C,UAAU/C,GAI7B,OAHApxC,EAAkB,SAAI,CACpB,KAAQ,WAEH,CACL,QAAWA,EACX,QAAW,SACX,YAAe,CAAC6+B,EAAO9oC,EAAG8oC,EAAO13B,GACjC,OAAUpN,KAAK2/D,YACf,WAAc3/D,KAAKyhE,gBACnB,SAAYzhE,KAAK2hE,gBAIdJ,EAhII,CAiIX/B,IAEF+B,GAAO9yC,aAvIS,CACd,oBAAuB,KAuIzB8yC,GAAO3yC,iBAAiB,UACxB,IAKIqzC,GAAQ,SAAUC,GAGpB,SAASD,IACP,OAAOC,EAAY/+D,MAAMnD,KAAMhJ,YAAcgJ,KAH/C2M,GAAes1D,EAAOC,GAMtB,IAAI50D,EAAS20D,EAAM9pE,UAmFnB,OAjFAmV,EAAO60D,KAAO,SAAc9mD,EAAKuF,EAAQE,GAGvC,IAFA,IAAIY,EAAS1hB,KAAKuY,QAAmB,UAAI/f,KAAKC,GAAK,IAE1C1B,EAAI,EAAGiO,EAAI4b,EAAO3pB,OAAQF,EAAIiO,EAAGjO,IAAK,CAC7C,IAAIyM,EAAIuX,GAAOuK,YAAYjK,EAAKuF,EAAO7pB,EAAI,GAAI6pB,EAAO7pB,GAAI2qB,GAEtD0gD,EAAY,CAACxhD,EAAO7pB,EAAI,GAAGiF,EAAI4kB,EAAO7pB,GAAGiF,EAAIwH,EAAE,GAAIod,EAAO7pB,EAAI,GAAGqW,EAAIwT,EAAO7pB,GAAGqW,EAAI5J,EAAE,IACzFod,EAAO7pB,EAAI,GAAGusB,cAAgB8+C,EAC9BxhD,EAAO7pB,GAAGssB,cAAgB++C,EAE1BrnD,GAAOyF,QAAQnF,EAAKyF,KAIxBxT,EAAO+0D,gBAAkB,SAAyBhnD,EAAKuF,GACrD,GAAIA,EAAO3pB,QAAU,EACnB8jB,GAAO4F,MAAMtF,EAAKuF,OADpB,CAMA,IAAI7pB,EAAGiO,EAEP,IAAKjO,EAAI,EAAGiO,EAAI4b,EAAO3pB,OAAQF,EAAIiO,EAAGjO,GAAK,EACzCskB,EAAIinD,iBAAiB1hD,EAAO7pB,EAAI,GAAGiF,EAAG4kB,EAAO7pB,EAAI,GAAGqW,EAAGwT,EAAO7pB,GAAGiF,EAAG4kB,EAAO7pB,GAAGqW,GAKhF,IAFArW,GAAK,GAEGiO,EACN,KAAOjO,EAAIiO,EAAGjO,IACZskB,EAAI8F,OAAOP,EAAO7pB,GAAGiF,EAAG4kB,EAAO7pB,GAAGqW,KAKxCE,EAAOi1D,aAAe,SAAsBlnD,EAAKuF,GAC/C,GAAIA,EAAO3pB,QAAU,EACnB8jB,GAAO4F,MAAMtF,EAAKuF,OADpB,CAMA,IAAI7pB,EAAGiO,EAEP,IAAKjO,EAAI,EAAGiO,EAAI4b,EAAO3pB,OAAQF,EAAI,EAAIiO,EAAGjO,GAAK,EAC7CskB,EAAI8H,cAAcvC,EAAO7pB,GAAGiF,EAAG4kB,EAAO7pB,GAAGqW,EAAGwT,EAAO7pB,EAAI,GAAGiF,EAAG4kB,EAAO7pB,EAAI,GAAGqW,EAAGwT,EAAO7pB,EAAI,GAAGiF,EAAG4kB,EAAO7pB,EAAI,GAAGqW,GAG/G,GAAIrW,EAAIiO,EACN,KAAOjO,EAAIiO,EAAGjO,IACZskB,EAAI8F,OAAOP,EAAO7pB,GAAGiF,EAAG4kB,EAAO7pB,GAAGqW,KAKxCE,EAAOk1D,qBAAuB,SAA8BC,EAAQC,EAAU9mD,EAAW+mD,EAAY39B,EAAWygB,GAC9G,IACI1uD,EADAiO,EAAI09D,EAASzrE,OAGjB,IAAKF,EAAI0uD,EAAM1uD,EAAIiO,EAAGjO,GAAK0uD,EAAM,CAC/B,IAAImd,EAAQ5iE,KAAK6iE,eAAeH,EAAS3rE,EAAI,GAAI2rE,EAAS3rE,GAAI6kB,EAAW+mD,EAAY39B,GAEjF49B,GACFH,EAAO3nE,KAAK8nE,GAMhB,IAFA7rE,GAAK0uD,GAEGzgD,EAAI,EACV,IAAKjO,GAAK,EAAGA,EAAIiO,EAAGjO,IAAK,CACvB,IAAI+rE,EAAS9iE,KAAK6iE,eAAeH,EAAS3rE,EAAI,GAAI2rE,EAAS3rE,GAAI6kB,EAAW+mD,EAAY39B,GAElF89B,GACFL,EAAO3nE,KAAKgoE,KAMbb,EA1FG,CA2FVlF,IAEFkF,GAAMxzC,aAlGU,CACd,gBAAkB,EAClB,YAAc,IAiGhB,IAIIs0C,GAAW,SAAUC,GAGvB,SAASD,IACP,OAAOC,EAAO7/D,MAAMnD,KAAMhJ,YAAcgJ,KAH1C2M,GAAeo2D,EAAUC,GAMzB,IAAI11D,EAASy1D,EAAS5qE,UA0BtB,OAxBAmV,EAAOtL,QAAU,SAAiBuW,GAChC,MAAO,CACL,QAAWvY,KAAKo6C,UAAU7hC,GAC1B,QAAW,aAIfjL,EAAOu+B,SAAW,SAAkBxwB,EAAKuF,EAAQE,GAC/CzF,EAAIgG,YAEJrhB,KAAKmiE,KAAK9mD,EAAKuF,EAAQE,GAEvB/F,GAAOyF,QAAQnF,EAAKyF,GAEpB9gB,KAAKijE,YAAY5nD,EAAKuF,EAAQE,IAGhCiiD,EAAS/oB,SAAW,SAAkBj4C,GACpC,IAAIkE,EAAUlE,EAAc,QACxBgkB,EAAM,IAAIg9C,EAAS98D,EAAkB,SAAe,YAAGlE,EAAc,SAEzE,OADAgkB,EAAIwxB,cAActxC,EAAoB,YAC/B8f,GAGFg9C,EAjCM,CAkCbd,IAEFc,GAASn0C,iBAAiB,YAC1Bm0C,GAASt0C,aAzCO,CACd,UAAa,KA0Cf,IAAIy0C,GAAmB,SAAUF,GAG/B,SAASE,IACP,OAAOF,EAAO7/D,MAAMnD,KAAMhJ,YAAcgJ,KAH1C2M,GAAeu2D,EAAkBF,GAMjCE,EAAiBlpB,SAAW,SAAkBj4C,GAC5C,IAAIkE,EAAUlE,EAAc,QACxBohE,EAAQ,IAAID,EAAiBj9D,EAAkB,SAAe,YAAGlE,EAAc,SAEnF,OADAohE,EAAM5rB,cAActxC,EAAoB,YACjCk9D,GAGT,IAAI71D,EAAS41D,EAAiB/qE,UAwB9B,OAtBAmV,EAAOtL,QAAU,SAAiBuW,GAChC,MAAO,CACL,QAAWvY,KAAKo6C,UAAU7hC,GAC1B,QAAW,qBAIfjL,EAAOu+B,SAAW,SAAkBxwB,EAAKuF,EAAQE,GAC/CzF,EAAIgG,YACJhG,EAAIiG,OAAOV,EAAO,GAAG5kB,EAAG4kB,EAAO,GAAGxT,GAElCpN,KAAKuiE,aAAalnD,EAAKuF,GAEvB7F,GAAOyF,QAAQnF,EAAKyF,GAEpB9gB,KAAKijE,YAAY5nD,EAAKuF,EAAQE,IAGhCxT,EAAO81D,gBAAkB,SAAyBX,EAAQC,EAAU9mD,EAAW+mD,EAAY39B,GACzF,OAAOhlC,KAAKwiE,qBAAqBC,EAAQC,EAAU9mD,EAAW+mD,EAAY39B,EAAW,IAGhFk+B,EAtCc,CAuCrBjB,IAEFiB,GAAiBt0C,iBAAiB,oBAElC,IAAIy0C,GAAkB,SAAUL,GAG9B,SAASK,IACP,OAAOL,EAAO7/D,MAAMnD,KAAMhJ,YAAcgJ,KAH1C2M,GAAe02D,EAAiBL,GAMhCK,EAAgBrpB,SAAW,SAAkBj4C,GAC3C,IAAIkE,EAAUlE,EAAc,QACxBohE,EAAQ,IAAIE,EAAgBp9D,EAAkB,SAAe,YAAGlE,EAAc,SAElF,OADAohE,EAAM5rB,cAActxC,EAAoB,YACjCk9D,GAGT,IAAI71D,EAAS+1D,EAAgBlrE,UAwB7B,OAtBAmV,EAAOtL,QAAU,SAAiBuW,GAChC,MAAO,CACL,QAAWvY,KAAKo6C,UAAU7hC,GAC1B,QAAW,oBAIfjL,EAAOu+B,SAAW,SAAkBxwB,EAAKuF,EAAQE,GAC/CzF,EAAIgG,YACJhG,EAAIiG,OAAOV,EAAO,GAAG5kB,EAAG4kB,EAAO,GAAGxT,GAElCpN,KAAKqiE,gBAAgBhnD,EAAKuF,EAAQE,GAElC/F,GAAOyF,QAAQnF,EAAKyF,GAEpB9gB,KAAKijE,YAAY5nD,EAAKuF,EAAQE,IAGhCxT,EAAO81D,gBAAkB,SAAyBX,EAAQC,EAAU9mD,EAAW+mD,EAAY39B,GACzF,OAAOhlC,KAAKwiE,qBAAqBC,EAAQC,EAAU9mD,EAAW+mD,EAAY39B,EAAW,IAGhFq+B,EAtCa,CAuCpBpB,IAEFoB,GAAgBz0C,iBAAiB,mBACjC,IAAI00C,GAAkB,CACpB,aAAgB,YAChB,SAAY,GACZ,gBAAmB,EACnB,kBAAqB,KACrB,wBAA2B,SAC3B,sBAAyB,UAEvBC,GAAmB,CACrB,WAAc,SACd,gBAAmB,OACnB,gBAAmB,EACnB,kBAAqB,EACrB,WAAc,OACd,cAAiB,GAGfC,GAAa,SAAUC,GAGzB,SAASD,IACP,OAAOC,EAAQtgE,MAAMnD,KAAMhJ,YAAcgJ,KAH3C2M,GAAe62D,EAAYC,GAM3B,IAAIn2D,EAASk2D,EAAWrrE,UA+FxB,OA7FAmV,EAAOo2D,WAAa,WAClB,OAAO1jE,KAAK2jE,UAGdr2D,EAAOs2D,WAAa,SAAoB3yD,GACtC,IAAIywB,EAAM1hC,KAAK2jE,SAUf,OATA3jE,KAAK2jE,SAAWrzD,GAAmBW,GAEnCjR,KAAK6jE,WAEL7jE,KAAKk4C,WAAW,gBAAiB,CAC/B,IAAOxW,EACP,IAAOzwB,IAGFjR,MAGTsN,EAAO+xB,MAAQ,WACbr/B,KAAK6jE,YAGPv2D,EAAO2B,OAAS,WACd,IAAIlN,EAAO0hE,EAAQtrE,UAAU8W,OAAO3W,KAAK0H,MAGzC,cADO+B,EAAa,OACbA,GAGTuL,EAAOgqC,UAAY,SAAmBlxC,GACpC,GAAIpG,KAAK8jE,cAAgB19D,EACvB,OAAOq9D,EAAQtrE,UAAUm/C,UAAUh/C,KAAK0H,KAAMoG,GAGhD,IAAIP,EAAI7F,KAAK+jE,aAAa39D,GAE1B,GAAIpG,KAAKgkE,aAAc,CACrB,IAAI37D,EAAQrI,KAAKikE,gBAAkB,GACnC57D,EAAMjC,OAASP,EAAE,GACjB7F,KAAKgkE,aAAa37D,QACTrI,KAAKkkE,eACdlkE,KAAKkkE,cAAcr+D,EAAE,IAGvB,GAAI7F,KAAKmkE,YAAa,CACpB,IAAIC,EAASpkE,KAAKqkE,eAAiB,GAEnCD,EAAOh+D,OAASP,EAAE,GAClB7F,KAAKmkE,YAAYC,QACRpkE,KAAKskE,cACdtkE,KAAKskE,aAAaz+D,EAAE,IAGtB,OAAO7F,MAGTsN,EAAOy2D,aAAe,SAAsB39D,GAC1C,IAAIzJ,EAAI,GACJD,EAAI,GAER,IAAK,IAAIlB,KAAK4K,EACRhO,EAAOgO,EAAQ5K,KACS,IAAtBA,EAAEP,QAAQ,QACZ0B,EAAEnB,GAAK4K,EAAO5K,GAEdkB,EAAElB,GAAK4K,EAAO5K,IAKpB,MAAO,CAACmB,EAAGD,IAGb4Q,EAAOi3D,aAAe,SAAsBn+D,GAC1C,OAAO0L,GAAe9R,KAAK2jE,SAAUv9D,GAAc,MAGrDkH,EAAOklC,mBAAqB,WAC1B,OAAOxyC,KAAK8H,SAGdwF,EAAOk3D,sBAAwB,WAC7B,OAAO3tE,EAAO,GAAIysE,KAGpBh2D,EAAOm3D,qBAAuB,WAC5B,OAAO5tE,EAAO,GAAI0sE,KAGpBj2D,EAAOo3D,mBAAqB,WAC1B,MAAO,CAAC,GAAI,IAGPlB,EAtGQ,CAuGf9G,IAYEiI,GAAU,SAAUC,GAGtB,SAASD,EAAQ1zD,EAASigB,EAAa7qB,EAAOC,EAAQiS,GACpD,IAAIwX,EAqBJ,YAnBgB,IAAZxX,IACFA,EAAU,KAGZwX,EAAQ60C,EAAYtsE,KAAK0H,KAAMkxB,EAAa3Y,IAAYvY,MAClD2jE,SAAWrzD,GAAmBW,GACpC8e,EAAM+wC,OAAS1pE,EAAMiP,GAAS,IAAMA,EACpC0pB,EAAMgxC,QAAU3pE,EAAMkP,GAAU,GAAKA,EAEjCiS,EAAQssD,WACV90C,EAAMu0C,aAAa/rD,EAAQssD,WAGzBtsD,EAAQusD,WACV/0C,EAAMi0C,aAAazrD,EAAQusD,WAG7B/0C,EAAM8zC,WAEC9zC,EAxBTpjB,GAAeg4D,EAASC,GA2BxB,IAAIt3D,EAASq3D,EAAQxsE,UAiIrB,OA/HAmV,EAAO8P,SAAW,WAChB,OAAOpd,KAAK8gE,QAGdxzD,EAAOizD,SAAW,SAAkBl6D,GAKlC,OAJArG,KAAK8gE,OAASz6D,EAEdrG,KAAK6jE,WAEE7jE,MAGTsN,EAAO+P,UAAY,WACjB,OAAOrd,KAAK+gE,SAGdzzD,EAAOkzD,UAAY,SAAmBl6D,GAKpC,OAJAtG,KAAK+gE,QAAUz6D,EAEftG,KAAK6jE,WAEE7jE,MAGTsN,EAAOy3D,aAAe,WACpB,OAAOluE,EAAO,GAAImJ,KAAKuY,QAAQssD,YAGjCv3D,EAAOg3D,aAAe,SAAsBl+D,GAO1C,OANApG,KAAKuY,QAAQssD,UAAYz+D,EAASvP,EAAO,GAAIuP,GAAUA,EAEnDpG,KAAK+uC,aACP/uC,KAAK6jE,WAGA7jE,MAGTsN,EAAO22D,aAAe,WACpB,OAAKjkE,KAAKuY,QAAQusD,UAIXjuE,EAAO,GAAImJ,KAAKuY,QAAQusD,WAHtB,MAMXx3D,EAAO02D,aAAe,SAAsB37D,GAO1C,OANArI,KAAKuY,QAAQusD,UAAYz8D,EAAQxR,EAAO,GAAIwR,GAASA,EAEjDrI,KAAK+uC,aACP/uC,KAAK6jE,WAGA7jE,MAGT2kE,EAAQ3qB,SAAW,SAAkBj4C,GACnC,IAAIkE,EAAUlE,EAAc,QACxBijE,EAAU,IAAIL,EAAQ5iE,EAAc,QAAGkE,EAAkB,SAAe,YAAGlE,EAAY,MAAGA,EAAa,OAAGA,EAAc,SAQ5H,OAPAijE,EAAQztB,cAActxC,EAAoB,YAC1C++D,EAAQxtB,MAAMvxC,EAAY,IAEtBlE,EAAa,QACfijE,EAAQ1tB,UAAUv1C,EAAa,QAG1BijE,GAGT13D,EAAOtL,QAAU,SAAiBuW,GAChC,MAAO,CACL,QAAWvY,KAAKo6C,UAAU7hC,GAC1B,MAASvY,KAAKod,WACd,OAAUpd,KAAKqd,YACf,QAAW,UACX,QAAWrd,KAAK2jE,WAIpBr2D,EAAOu2D,SAAW,WAChB,IAAIiB,EAAY9kE,KAAKikE,gBAAkB,GACnCvuD,EAAUovD,EAAmB,SAAK,CAAC,GAAI,GACvCG,EAAWjlE,KAAK8gE,OAAS,EAAIprD,EAAQ,GACrC+J,EAAYzf,KAAK+gE,QAAU,EAAIrrD,EAAQ,GACvCtP,EAASvP,EAAO,GAAIiuE,EAAU1+D,QAAUpG,KAAKwkE,wBAAyBxkE,KAAKuY,QAAQssD,WAAa7kE,KAAKykE,uBAAwB,CAC/H,SAAYzkE,KAAK2jE,SACjB,YAAe3jE,KAAK8gE,OACpB,aAAgB9gE,KAAK+gE,QACrB,wBAA2B,SAC3B,sBAAyB,SACzB,aAAgBkE,EAChB,cAAiBxlD,IAGfqlD,EAAgB,OAAM1+D,EAAsB,gBAC9CA,EAAsB,cAAI6+D,GAG5B,IAAIC,EAASJ,EAA+B,oBAC5C1+D,EAAe,OAAIA,EAAiB,UAAK,EACzC,IAAIkiB,EAAUliB,EAAoB,YAAI,EAAIsP,EAAQ,GAEnC,SAAXwvD,GACF9+D,EAAgC,wBAAI,QACpCA,EAAe,OAAIA,EAAe,OAAIkiB,GAClB,UAAX48C,IACT9+D,EAAgC,wBAAI,OACpCA,EAAe,OAAIA,EAAe,OAAIkiB,GAGxC,IAAI68C,EAASL,EAA6B,kBAC1C1+D,EAAe,OAAIA,EAAiB,UAAK,EACzC,IAAImiB,EAAUniB,EAAqB,aAAI,EAAIsP,EAAQ,GAEpC,QAAXyvD,GACF/+D,EAA8B,sBAAI,SAClCA,EAAe,QAAKmiB,GACA,WAAX48C,IACT/+D,EAA8B,sBAAI,MAClCA,EAAe,QAAKmiB,GAGtBvoB,KAAK8jE,aAAc,EACnB9jE,KAAKu4C,aAAanyC,UACXpG,KAAK8jE,aAGPa,EA7JK,CA8JZnB,IAEFmB,GAAQl2C,aA1KQ,CACd,UAAa,CACX,MAAQ,EACR,QAAW,CAAC,GAAI,GAChB,kBAAqB,SACrB,oBAAuB,UAEzB,UAAa,OAoKfk2C,GAAQ/1C,iBAAiB,WACzB,IAKIw2C,GAAQ,SAAUR,GAGpB,SAASQ,EAAMn0D,EAASigB,EAAa3Y,GACnC,IAAIwX,EAoBJ,YAlBgB,IAAZxX,IACFA,EAAU,IAGZwX,EAAQ60C,EAAYtsE,KAAK0H,KAAMkxB,EAAa3Y,IAAYvY,KAEpDuY,EAAQ8sD,YACVt1C,EAAMm0C,cAAc3rD,EAAQ8sD,YAG1B9sD,EAAQ+sD,UACVv1C,EAAMo0C,YAAY5rD,EAAQ+sD,UAG5Bv1C,EAAM4zC,SAAWrzD,GAAmBW,GAEpC8e,EAAM8zC,WAEC9zC,EAvBTpjB,GAAey4D,EAAOR,GA0BtB,IAAIt3D,EAAS83D,EAAMjtE,UAuInB,OArIAmV,EAAO+2D,YAAc,WACnB,OAAKrkE,KAAKuY,QAAQ+sD,SAIXzuE,EAAO,GAAImJ,KAAKuY,QAAQ+sD,UAHtB,MAMXh4D,EAAO62D,YAAc,SAAqB97D,GAKxC,OAJArI,KAAKuY,QAAQ+sD,SAAWj9D,EAAQxR,EAAO,GAAIwR,GAASA,EAEpDrI,KAAK6jE,WAEE7jE,MAGTsN,EAAOi4D,cAAgB,WACrB,OAAO1uE,EAAO,GAAImJ,KAAKwkE,wBAAyBxkE,KAAKuY,QAAQ8sD,aAG/D/3D,EAAO42D,cAAgB,SAAuB99D,GAK5C,OAJApG,KAAKuY,QAAQ8sD,WAAaj/D,EAASvP,EAAO,GAAIuP,GAAUA,EAExDpG,KAAK6jE,WAEE7jE,MAGTolE,EAAMprB,SAAW,SAAkBj4C,GACjC,IAAIkE,EAAUlE,EAAc,QACxByjE,EAAQ,IAAIJ,EAAMrjE,EAAc,QAAGkE,EAAkB,SAAe,YAAGlE,EAAc,SAQzF,OAPAyjE,EAAMjuB,cAActxC,EAAoB,YACxCu/D,EAAMhuB,MAAMvxC,EAAY,IAEpBlE,EAAa,QACfyjE,EAAMluB,UAAUv1C,EAAa,QAGxByjE,GAGTl4D,EAAOsvD,SAAW,WAChB,OAAO,GAGTtvD,EAAOtL,QAAU,SAAiBuW,GAChC,MAAO,CACL,QAAWvY,KAAKo6C,UAAU7hC,GAC1B,QAAW,QACX,QAAWvY,KAAK2jE,WAIpBr2D,EAAOu2D,SAAW,WAChB,IAAIz9D,EAASvP,EAAO,GAAImJ,KAAKulE,gBAAiB,CAC5C,SAAYvlE,KAAK2jE,WAEf2B,EAAWtlE,KAAKqkE,cAEpB,GAAIiB,EAAU,CACZzuE,EAAOuP,EAAQk/D,EAASl/D,QAExB,IAAIq/D,EAAQzlE,KAAK0lE,YAAYt/D,GACzBgZ,EAAWqmD,EAAM,GACjB/vD,EAAU4vD,EAAkB,SAAKtlE,KAAK0kE,qBAEtCiB,EAAUF,EAAM,GACpBr/D,EAAoB,YAAIu/D,EAAe,MACvCv/D,EAAqB,aAAIu/D,EAAgB,OAEzC,IAAI1mE,EAAKmH,EAAe,QAAK,EACzBlH,EAAKkH,EAAe,QAAK,EACzBw/D,EAAiBl0D,GAAc0N,EAAUhZ,EAAgC,wBAAGA,EAA8B,uBAAG6H,KAAKhP,EAAIC,GAEtHgmE,EAASI,EAA8B,qBAAK,SAChDl/D,EAAiB,SAAIw/D,EAAe5pE,EAErB,SAAXkpE,EACF9+D,EAAiB,UAAKA,EAAoB,YAAI,EAAIsP,EAAQ,GACtC,UAAXwvD,EACT9+D,EAAiB,UAAKA,EAAoB,YAAI,EAAIgZ,EAAgB,MAAI1J,EAAQ,GAE9EtP,EAAiB,UAAKgZ,EAAgB,MAAI,EAG5C,IAAI+lD,EAASG,EAA4B,mBAAK,SAC9Cl/D,EAAiB,SAAIw/D,EAAex4D,EAErB,QAAX+3D,EACF/+D,EAAiB,UAAKA,EAAqB,aAAI,EAAIsP,EAAQ,GACvC,WAAXyvD,EACT/+D,EAAiB,UAAKA,EAAqB,aAAI,EAAIgZ,EAAiB,OAAI1J,EAAQ,GAEhFtP,EAAiB,UAAKgZ,EAAiB,OAAI,EAI/Cpf,KAAK8jE,aAAc,EACnB9jE,KAAKu4C,aAAanyC,UACXpG,KAAK8jE,aAGdx2D,EAAOo4D,YAAc,SAAqBt/D,GACnCA,EAAmB,aACtBA,EAAmB,WAAI,UAGzB,IAIIC,EAAOC,EAJPg/D,EAAWtlE,KAAKqkE,cAEhBn0D,EAAOlQ,KAAKukE,aAAan+D,GAIzBsP,EAAU4vD,EAAkB,SAAKtlE,KAAK0kE,qBAiB1C,OAfAr+D,EAAQ6J,EAAY,MAAiB,EAAbwF,EAAQ,GAChCpP,EAAS4J,EAAa,OAAiB,EAAbwF,EAAQ,GAE9B4vD,EAAmB,YAChBj/D,GAASA,EAAQi/D,EAAmB,YACvCj/D,EAAQi/D,EAAmB,UAI3BA,EAAoB,aACjBh/D,GAAUA,EAASg/D,EAAoB,aAC1Ch/D,EAASg/D,EAAoB,WAI1B,CAAC,IAAIr1D,GAAK5J,EAAOC,GAAS4J,IAG5Bk1D,EAlKG,CAmKV5B,IAEF4B,GAAM32C,aA1KU,CACd,SAAY,KACZ42C,WAAY,OAyKdD,GAAMx2C,iBAAiB,SAEvB,IAAIi3C,GAAc,SAAqBr7C,GACrC,OAAO,SAAUC,GAGf,SAASC,IACP,OAAOD,EAAMtnB,MAAMnD,KAAMhJ,YAAcgJ,KAHzC2M,GAAe+d,EAAQD,GAMvBC,EAAOo7C,eAAiB,SAAwBhkE,GAC9C,OAAQ1K,EAAM0K,EAASikE,eAAiBjkE,EAASikE,aAAa9uE,OAAS,GAGzEyzB,EAAOs7C,eAAiB,SAAwBlkE,GAC9C,OAAOA,EAASikE,cAGlB,IAAIz4D,EAASod,EAAOvyB,UA6LpB,OA3LAmV,EAAO24D,iBAAmB,WACxB,OAAOjmE,KAAKkmE,aAGd54D,EAAO64D,iBAAmB,SAA0BjvE,GAClD,IAAIkwB,EAASpnB,KAAKomE,YAKlB,OAJApmE,KAAKi/B,WACLj/B,KAAKkmE,YAAchvE,EACnB8I,KAAKomE,YAAch/C,EACnBpnB,KAAKq/B,QACEr/B,MAGTsN,EAAO+4D,iBAAmB,WACxB,OAAOrmE,KAAKomE,aAGd94D,EAAOg5D,iBAAmB,SAA0Bl/C,GAClD,IAAIlwB,EAAM8I,KAAKkmE,YASf,OARAlmE,KAAKi/B,WACLj/B,KAAKkmE,YAAchvE,EACnB8I,KAAKomE,YAAch/C,EAEnBpnB,KAAKumE,qBAELvmE,KAAKwmE,kBAEExmE,MAGTsN,EAAOi5D,mBAAqB,WAC1B,IAAI1oE,EAAMmC,KAAKo9B,SAUf,IARKv/B,GAAOmC,KAAKkmE,cACfroE,EAAMmC,KAAKkmE,YAAY9oC,WAGpBv/B,GAAOmC,KAAKomE,cACfvoE,EAAMmC,KAAKomE,YAAYhpC,UAGpBv/B,GAIAmC,KAAKkmE,aAAgBlmE,KAAKomE,YAA/B,CAYA,IARA,IAMI9uC,EAAIC,EANJkvC,EAAYzmE,KAAKkmE,YAAYrrB,oBAE7B6rB,EAAe1mE,KAAKomE,YAAYvrB,oBAEhC8rB,EAAU,EACVC,EAAiB5mE,KAAK03C,iBAGjB3gD,EAAI,EAAG4E,EAAM8qE,EAAUxvE,OAAQF,EAAI4E,EAAK5E,IAG/C,IAFA,IAAIyqB,EAAKilD,EAAU1vE,GAEV0d,EAAI,EAAGxd,EAASyvE,EAAazvE,OAAQwd,EAAIxd,EAAQwd,IAAK,CAC7D,IAAIgN,EAAKilD,EAAajyD,GAClB8Q,EAAO1nB,EAAIgpE,cAAcrlD,EAAIC,GAEvB,IAAN1qB,GAAiB,IAAN0d,GACb6iB,EAAK9V,EACL+V,EAAK9V,EACLklD,EAAUphD,GACDA,EAAOohD,IAChBrvC,EAAK9V,EACL+V,EAAK9V,GAKNzkB,EAAe4pE,IAAoBA,EAAe,GAAG/3D,OAAOyoB,IAAQsvC,EAAe,GAAG/3D,OAAO0oB,IAChGv3B,KAAK85C,eAAe,CAACxiB,EAAIC,MAI7BjqB,EAAO+xB,MAAQ,WACbr/B,KAAKwmE,kBAELxmE,KAAKumE,sBAGPj5D,EAAO2xB,SAAW,WA2BhB,GA1BIj/B,KAAKkmE,cACHlmE,KAAKkmE,YAAYH,cACnBhrE,EAAgBiF,KAAMA,KAAKkmE,YAAYH,cAGzC/lE,KAAKkmE,YAAYjuD,IAAI,0BAA2BjY,KAAKumE,mBAAoBvmE,MAAMiY,IAAI,SAAUjY,KAAKi/B,SAAUj/B,MAE5GA,KAAKkmE,YAAYjuD,IAAI,gCAAiCjY,KAAK8mE,aAAc9mE,MAEzEA,KAAKkmE,YAAYjuD,IAAI,2BAA4BjY,KAAKI,KAAMJ,MAE5DA,KAAKkmE,YAAYjuD,IAAI,OAAQjY,KAAK8mE,aAAc9mE,MAAMiY,IAAI,OAAQjY,KAAKI,KAAMJ,aAEtEA,KAAKkmE,aAGVlmE,KAAKomE,cACPrrE,EAAgBiF,KAAMA,KAAKomE,YAAYL,cAEvC/lE,KAAKomE,YAAYnuD,IAAI,0BAA2BjY,KAAKumE,mBAAoBvmE,MAAMiY,IAAI,SAAUjY,KAAKi/B,SAAUj/B,MAE5GA,KAAKomE,YAAYnuD,IAAI,OAAQjY,KAAK8mE,aAAc9mE,MAAMiY,IAAI,OAAQjY,KAAKI,KAAMJ,aAEtEA,KAAKomE,eAGRpmE,KAAKkmE,uBAAuB/uB,IAAen3C,KAAKomE,uBAAuBjvB,IAAW,CACtF,IAAIt5C,EAAMmC,KAAKo9B,SAEXv/B,GACFA,EAAIoa,IAAI,mGAAoGjY,KAAKumE,mBAAoBvmE,QAK3IsN,EAAOw5D,aAAe,WACf9mE,KAAKkmE,aAAgBlmE,KAAKomE,aAI3BpmE,KAAKkmE,YAAY7oC,aAAer9B,KAAKomE,YAAY/oC,cACnDr9B,KAAKumE,qBAELvmE,KAAKG,SAITmN,EAAOk5D,gBAAkB,WACvB,GAAKxmE,KAAKkmE,aAAgBlmE,KAAKomE,YAA/B,CAIKpmE,KAAKkmE,YAAYH,eACpB/lE,KAAKkmE,YAAYH,aAAe,IAG7B/lE,KAAKomE,YAAYL,eACpB/lE,KAAKomE,YAAYL,aAAe,IAGlC/lE,KAAKkmE,YAAYH,aAAajrE,KAAKkF,MAEnCA,KAAKomE,YAAYL,aAAajrE,KAAKkF,MAEnCA,KAAKkmE,YAAYluD,GAAG,0BAA2BhY,KAAKumE,mBAAoBvmE,MAAMgY,GAAG,SAAUhY,KAAKstB,OAAQttB,MAExGA,KAAKomE,YAAYpuD,GAAG,0BAA2BhY,KAAKumE,mBAAoBvmE,MAAMgY,GAAG,SAAUhY,KAAKstB,OAAQttB,MAExGA,KAAKkmE,YAAYluD,GAAG,OAAQhY,KAAK8mE,aAAc9mE,MAAMgY,GAAG,OAAQhY,KAAKI,KAAMJ,MAE3EA,KAAKomE,YAAYpuD,GAAG,OAAQhY,KAAK8mE,aAAc9mE,MAAMgY,GAAG,OAAQhY,KAAKI,KAAMJ,MAE3E,IAAI+mE,EAAU/mE,KAAKuY,QAAgB,OAmBnC,GAlBAvY,KAAKI,OAEW,WAAZ2mE,GACF/mE,KAAKkmE,YAAYluD,GAAG,YAAahY,KAAK8mE,aAAc9mE,MAAMgY,GAAG,UAAWhY,KAAKI,KAAMJ,MAEnFA,KAAKomE,YAAYpuD,GAAG,YAAahY,KAAK8mE,aAAc9mE,MAAMgY,GAAG,UAAWhY,KAAKI,KAAMJ,OAC9D,UAAZ+mE,GACT/mE,KAAKkmE,YAAYluD,GAAG,YAAahY,KAAK8mE,aAAc9mE,MAAMgY,GAAG,UAAWhY,KAAKI,KAAMJ,MAEnFA,KAAKomE,YAAYpuD,GAAG,YAAahY,KAAK8mE,aAAc9mE,MAAMgY,GAAG,UAAWhY,KAAKI,KAAMJ,OAC9D,cAAZ+mE,GACT/mE,KAAKkmE,YAAYluD,GAAG,YAAahY,KAAK8mE,aAAc9mE,MAAMgY,GAAG,WAAYhY,KAAKI,KAAMJ,MAEpFA,KAAKomE,YAAYpuD,GAAG,YAAahY,KAAK8mE,aAAc9mE,MAAMgY,GAAG,WAAYhY,KAAKI,KAAMJ,OAEpFA,KAAK8mE,iBAGD9mE,KAAKkmE,uBAAuB/uB,IAAen3C,KAAKomE,uBAAuBjvB,IAAW,CACtF,IAAIt5C,EAAMmC,KAAKo9B,SAEXv/B,GACFA,EAAIma,GAAG,mGAAoGhY,KAAKumE,mBAAoBvmE,SAKnI0qB,EA5MF,CA6MLF,IAGAw8C,GAAY,CACdC,OAAQ,UAGNC,GAAgB,SAAUC,GAG5B,SAASD,EAAchwE,EAAKkwB,EAAQ7O,GAClC,IAAIwX,EAYJ,OAVAA,EAAQo3C,EAAa7uE,KAAK0H,KAAM,KAAMuY,IAAYvY,KAEzB,IAArBhJ,UAAUC,SACZshB,EAAUrhB,EACVA,EAAM,KACNkwB,EAAS,MAGX2I,EAAMm2C,YAAchvE,EACpB64B,EAAMq2C,YAAch/C,EACb2I,EAGT,OAlBApjB,GAAeu6D,EAAeC,GAkBvBD,EAnBW,CAoBlBrB,GAAY9I,KAEdmK,GAAcz4C,aAAau4C,IAC3BE,GAAct4C,iBAAiB,iBAE/B,IAAIw4C,GAAmB,SAAUC,GAG/B,SAASD,EAAiBlwE,EAAKkwB,EAAQ7O,GACrC,IAAImlB,EAYJ,OAVAA,EAAS2pC,EAAc/uE,KAAK0H,KAAM,KAAMuY,IAAYvY,KAE3B,IAArBhJ,UAAUC,SACZshB,EAAUrhB,EACVA,EAAM,KACNkwB,EAAS,MAGXsW,EAAOwoC,YAAchvE,EACrBwmC,EAAO0oC,YAAch/C,EACdsW,EAGT,OAlBA/wB,GAAey6D,EAAkBC,GAkB1BD,EAnBc,CAoBrBvB,GAAY9C,KAEdqE,GAAiB34C,aAAau4C,IAC9BI,GAAiBx4C,iBAAiB,oBAClC,IAII04C,GAAe,SAAUC,GAG3B,SAASD,EAAaltE,EAAIm7C,EAAYh9B,GACpC,IAAIwX,EAEAwlB,KAAgBA,aAAsB4B,MAAc77C,MAAMC,QAAQg6C,IAAel/C,EAAc4E,QAAQs6C,EAAW52C,MAAQ,IAC5H4Z,EAAUg9B,EACVA,EAAa,OAGfxlB,EAAQw3C,EAAOjvE,KAAK0H,KAAM5F,EAAIme,IAAYvY,MACpCwnE,WAAa,EACnBz3C,EAAM03C,WAAa,EAEnB13C,EAAM23C,aAEFnyB,GACFxlB,EAAM+nB,YAAYvC,GAGpB,IAAIltC,EAAQ0nB,EAAMxX,QAAe,MAMjC,OAJIlQ,GACF0nB,EAAM1c,SAAShL,GAGV0nB,EA1BTpjB,GAAe26D,EAAcC,GA6B7B,IAAIj6D,EAASg6D,EAAanvE,UAuiB1B,OAriBAmV,EAAOq6D,gBAAkB,SAAyBvtE,GAChD,OAAIhD,EAAMgD,IAAc,KAAPA,EACR,KAGJ4F,KAAK4nE,QAAQxtE,GAIX4F,KAAK4nE,QAAQxtE,GAHX,MAMXkT,EAAOq0B,cAAgB,SAAuBphC,EAAQlF,GACpD,IAAKkF,EACH,OAAOP,KAAK6nE,SAASvuE,MAAM,GAM7B,IAHA,IACIwI,EADApG,EAAS,GAGJ3E,EAAI,EAAGiO,EAAIhF,KAAK6nE,SAAS5wE,OAAQF,EAAIiO,EAAGjO,IAC/C+K,EAAW9B,KAAK6nE,SAAS9wE,IAErBsE,EACSkF,EAAOjI,KAAK+C,EAASyG,GAErBvB,EAAOuB,KAIlBpG,EAAOZ,KAAKgH,GAIhB,OAAOpG,GAGT4R,EAAOw6D,iBAAmB,WACxB,OAAK9nE,KAAK6nE,SAAS5wE,OAIZ+I,KAAK6nE,SAAS,GAHZ,MAMXv6D,EAAOy6D,gBAAkB,WACvB,IAAIpsE,EAAMqE,KAAK6nE,SAAS5wE,OAExB,OAAY,IAAR0E,EACK,KAGFqE,KAAK6nE,SAASlsE,EAAM,IAG7B2R,EAAO06D,SAAW,WAChB,OAAOhoE,KAAK6nE,SAAS5wE,QAGvBqW,EAAOsrC,UAAY,WACjB,GAAwB,IAApB54C,KAAKgoE,WACP,OAAO,KAGT,IAAIjrD,EAAS,IAAIkW,GAAOjzB,KAAK62C,iBAI7B,OAHA72C,KAAKyd,SAAQ,SAAUxb,GACrB8a,EAAO+X,SAAS7yB,EAAE22C,gBAEb77B,GAGTzP,EAAOmQ,QAAU,SAAiB9jB,EAAI0B,GAGpC,IAFA,IAAI4sE,EAAcjoE,KAAK6nE,SAASvuE,MAAM,GAE7BvC,EAAI,EAAGiO,EAAIijE,EAAYhxE,OAAQF,EAAIiO,EAAGjO,IACxCsE,EAGH1B,EAAGrB,KAAK+C,EAAS4sE,EAAYlxE,GAAIA,GAFjC4C,EAAGsuE,EAAYlxE,GAAIA,GAMvB,OAAOiJ,MAGTsN,EAAO/M,OAAS,SAAgB5G,EAAI0B,GAClC,IAAIgiE,EAAW,GACXC,EAAOvlE,EAAW4B,GAClB4G,EAAS+8D,EAAO3jE,EAAK2G,GAAa3G,GAQtC,OAPAqG,KAAKyd,SAAQ,SAAU3b,GACrB,IAAIG,EAAIq7D,EAAOx7D,EAAWD,GAAiBC,IAEvCzG,EAAUkF,EAAOjI,KAAK+C,EAAS4G,GAAK1B,EAAO0B,KAC7Co7D,EAASviE,KAAKgH,KAEf9B,MACIq9D,GAGT/vD,EAAOoyB,QAAU,WACf,OAAQ1/B,KAAK6nE,SAAS5wE,QAGxBqW,EAAOwqC,YAAc,SAAqBvC,EAAY2yB,GACpD,IAAK3yB,EACH,OAAOv1C,KAGT,GAAwB,sBAApBu1C,EAAW52C,KACb,OAAOqB,KAAK83C,YAAYinB,GAAQC,WAAWzpB,GAAa2yB,GACnD,IAAK5sE,MAAMC,QAAQg6C,GAAa,CACrC,IAAI11C,EAAQ7I,UAAUC,OAClB6gE,EAAO9gE,UAAU6I,EAAQ,GAS7B,OARA01C,EAAaj6C,MAAMnD,UAAUmB,MAAMhB,KAAKtB,UAAW,EAAG6I,EAAQ,GAC9DqoE,EAAUpQ,EAENA,GAAQngE,EAASmgE,KAAU,SAAUA,GAAQA,aAAgB3gB,MAC/D5B,EAAWz6C,KAAKg9D,GAChBoQ,GAAU,GAGLloE,KAAK83C,YAAYvC,EAAY2yB,GAC/B,GAA0B,IAAtB3yB,EAAWt+C,OACpB,OAAO+I,KAKT,IAAI+c,EAFJ/c,KAAK0nE,aAIDQ,IACFnrD,EAAS,IAAIkW,IAGfjzB,KAAKmoE,QAAUnoE,KAAKwnE,WAAa,EAGjC,IAFA,IAAItW,EAAO,GAEFn6D,EAAI,EAAGiO,EAAIuwC,EAAWt+C,OAAQF,EAAIiO,EAAGjO,IAAK,CACjD,IAAI65D,EAAMrb,EAAWx+C,GAErB,IAAK65D,EACH,MAAM,IAAI5yD,MAAM,oCAAsCgC,KAAKkjC,QAAU,cAAgBnsC,GAGvF,KAAM65D,aAAezZ,MACnByZ,EAAMzZ,GAAS6C,SAAS4W,GAEpBt1D,MAAMC,QAAQq1D,IAChB,IAAK,IAAIh2D,EAAK,EAAGC,EAAK+1D,EAAI35D,OAAQ2D,EAAKC,EAAID,IACzCoF,KAAKiO,KAAK2iD,EAAIh2D,GAAKmiB,EAAQhmB,GAE3Bm6D,EAAKp2D,KAAK81D,EAAIh2D,IAKfU,MAAMC,QAAQq1D,KACjB5wD,KAAKiO,KAAK2iD,EAAK7zC,EAAQhmB,GAEvBm6D,EAAKp2D,KAAK81D,IAId,IAAI/yD,EAAMmC,KAAKo9B,SAEf,GAAIv/B,IACFmC,KAAKyyC,eAAe21B,cAAclX,GAE9Bn0C,IAAW3lB,EAAM2lB,EAAOyW,OAAO,CACjC,IAAIsR,EAAS/nB,EAAOO,YAChBtX,EAAInI,EAAImnD,WAAWjoC,GAEvB,GAAIplB,EAASuwE,GAAU,CACrB,IAAIziB,EAAO1tD,EAAWmwE,EAAQziB,MAAQyiB,EAAQziB,KAAO,aAGrD5nD,EAAIwqE,UAAU,CACZvjC,OAAQA,EACR/+B,KAAMC,GACLnP,EAAO,CACRs/D,SAAUt4D,EAAI0a,QAAQ+vD,sBACtBrS,OAAQ,OACPiS,GAAUziB,QACQ,IAAZyiB,GACTrqE,EAAIinD,iBAAiBhgB,EAAQ9+B,GAQnC,OAHAhG,KAAK8rB,KAAK,SAAU,CAClB,WAAcypB,IAETv1C,MAGTsN,EAAOqsC,gBAAkB,WACvB,OAAO35C,KAAKynE,YAGdn6D,EAAOksC,gBAAkB,WACvB,OAAOx5C,KAAKwnE,YAGdl6D,EAAOW,KAAO,SAAc2iD,EAAK7zC,EAAQhmB,GAClCiJ,KAAKmoE,UACRnoE,KAAKmoE,QAA8B,IAApBvX,EAAIxX,aAGrBp5C,KAAKuoE,cAAc3X,EAAIxX,aAEvB,IAAIovB,EAAQ5X,EAAI1tB,QAEhB,IAAK9rC,EAAMoxE,GAAQ,CACjB,IAAKpxE,EAAM4I,KAAK4nE,QAAQY,IACtB,MAAM,IAAIxqE,MAAM,kCAAoCgC,KAAKkjC,QAAU,KAAOslC,EAAQ,cAAgBzxE,GAGpGiJ,KAAK4nE,QAAQY,GAAS5X,EAGxB,IAAI6X,EAAanuE,IAEjBs2D,EAAI3U,eAAewsB,GAEnBzoE,KAAK6nE,SAAS/sE,KAAK81D,GAEnB5wD,KAAK0oE,cAAc9X,GAEnBA,EAAI7V,WAAW/6C,MAEX4wD,EAAIvxB,OACNuxB,EAAIvxB,QAGFtiB,GACFA,EAAO+X,SAAS87B,EAAIhY,aAGtBgY,EAAI1Y,WAAW,MAAO,CACpB,MAASl4C,OAGPA,KAAK2oE,eACP3oE,KAAK4oE,eAAehY,IAIxBtjD,EAAOu7D,eAAiB,SAAwBtzB,GAC9C,IAAKj6C,MAAMC,QAAQg6C,GACjB,OAAOv1C,KAAK6oE,eAAe,CAACtzB,IAG9B,IAAK,IAAIx+C,EAAIw+C,EAAWt+C,OAAS,EAAGF,GAAK,EAAGA,IACpCw+C,EAAWx+C,aAAcogD,KAC7B5B,EAAWx+C,GAAKiJ,KAAK2nE,gBAAgBpyB,EAAWx+C,KAG7Cw+C,EAAWx+C,IAAMiJ,OAASu1C,EAAWx+C,GAAG0xC,YAC7C8M,EAAWx+C,GAAGu2B,SAMhB,OAHAttB,KAAK8rB,KAAK,YAAa,CACrB,WAAcypB,IAETv1C,MAGTsN,EAAOuyB,MAAQ,WACb7/B,KAAK8oE,WAAY,EACjB9oE,KAAKyd,SAAQ,SAAUmzC,GACrBA,EAAItjC,YAENttB,KAAK4nE,QAAU,GACf,IAAIlmC,EAAM1hC,KAAK6nE,SASf,OARA7nE,KAAK6nE,SAAW,GAEZ7nE,KAAKyyC,gBACPzyC,KAAKyyC,eAAes2B,iBAAiBrnC,GAGvC1hC,KAAK8oE,WAAY,EACjB9oE,KAAK8rB,KAAK,SACH9rB,MAGTsN,EAAOwuC,iBAAmB,SAA0Bh6C,GAClD,GAAKA,IAAY9B,KAAK8oE,YAIlB9oE,OAAS8B,EAAS2mC,aAMlBrxC,EAFa0K,EAASk6C,mBAE1B,CAIA,IAAIwsB,EAAQ1mE,EAASohC,QAEhB9rC,EAAMoxE,WACFxoE,KAAK4nE,QAAQY,GAGtB,IAAI5qE,EAAMoC,KAAKgpE,YAAYlnE,GAEvBlE,GAAO,GACToC,KAAK6nE,SAAS3sE,OAAO0C,EAAK,GAGxBoC,KAAKyyC,gBACPzyC,KAAKyyC,eAAes2B,iBAAiB,CAACjnE,MAI1CwL,EAAO27D,SAAW,WAChB,OAAKjpE,KAAKuY,QAAe,MAIlBvY,KAAKuY,QAAe,MAHlB,MAMXjL,EAAO+F,SAAW,SAAkBhL,GAUlC,OATArI,KAAKuY,QAAQlQ,MAAQA,EACrBA,EAAQD,GAAmBC,GAC3BrI,KAAK2oE,cAAgBzmE,GAAamG,GAClCrI,KAAKyd,SAAQ,SAAU3b,GACrB9B,KAAK4oE,eAAe9mE,KACnB9B,MACHA,KAAK8rB,KAAK,WAAY,CACpB,MAASzjB,IAEJrI,MAGTsN,EAAOs7D,eAAiB,SAAwB9mE,GAC9C,IAAK9B,KAAK2oE,cACR,OAAO,EAKT,IAFA,IAAI1mE,EAAIJ,GAAiBC,GAEhB/K,EAAI,EAAG4E,EAAMqE,KAAK2oE,cAAc1xE,OAAQF,EAAI4E,EAAK5E,IACxD,IAA2C,IAAvCiJ,KAAK2oE,cAAc5xE,GAAW,OAAEkL,GAGlC,OAFAH,EAASq5C,iBAAiBn7C,KAAK2oE,cAAc5xE,GAAW,SAEjD,EAIX,OAAO,GAGTuW,EAAO47D,YAAc,WACnB,OAAKlpE,KAAKuY,QAAQlQ,cAIXrI,KAAKuY,QAAQlQ,aACbrI,KAAK2oE,cACZ3oE,KAAKyd,SAAQ,SAAU3b,GACrBA,EAASq5C,iBAAiB,QACzBn7C,MACHA,KAAK8rB,KAAK,eACH9rB,MATEA,MAYXsN,EAAOo7D,cAAgB,SAAuB9X,GAChC5wD,KAAKipE,YAGfjpE,KAAK4oE,eAAehY,IAIxBtjD,EAAOlN,KAAO,WACZ,IAAK,IAAIrJ,EAAI,EAAGiO,EAAIhF,KAAK6nE,SAAS5wE,OAAQF,EAAIiO,EAAGjO,IAC/CiJ,KAAK6nE,SAAS9wE,GAAGoiD,SAGnB,OAAOqE,GAAMrlD,UAAUiI,KAAK9H,KAAK0H,OAGnCsN,EAAOo6D,WAAa,WACb1nE,KAAK6nE,WACR7nE,KAAK6nE,SAAW,GAChB7nE,KAAK4nE,QAAU,KAInBt6D,EAAOi7D,cAAgB,WACrB,IAAK,IAAIl6C,EAAOr3B,UAAUC,OAAQoiD,EAAS,IAAI/9C,MAAM+yB,GAAOC,EAAO,EAAGA,EAAOD,EAAMC,IACjF+qB,EAAO/qB,GAAQt3B,UAAUs3B,GAG3BtuB,KAAKwnE,WAAahvE,KAAKsE,IAAIkD,KAAKwnE,WAAYhvE,KAAKsE,IAAIqG,MAAM3K,KAAM6gD,IACjEr5C,KAAKynE,WAAajvE,KAAKqE,IAAImD,KAAKynE,WAAYjvE,KAAKqE,IAAIsG,MAAM3K,KAAM6gD,KAGnE/rC,EAAO67D,gBAAkB,WACvB,IAAIzrC,EAAS19B,KAERA,KAAKmoE,UAIVnoE,KAAKwnE,WAAa,EAClBxnE,KAAKynE,WAAa,EAElBznE,KAAK6nE,SAASnmE,MAAK,SAAUjF,EAAGC,GAG9B,OAFAghC,EAAO6qC,cAAc9rE,EAAE28C,YAAa18C,EAAE08C,aAE/B1b,EAAO0rC,SAAS3sE,EAAGC,MAG5BsD,KAAKmoE,SAAU,IAGjB76D,EAAO87D,SAAW,SAAkB3sE,EAAGC,GACrC,OAAID,EAAE28C,cAAgB18C,EAAE08C,YACf38C,EAAEu/C,iBAAmBt/C,EAAEs/C,iBAGzBv/C,EAAE28C,YAAc18C,EAAE08C,aAG3B9rC,EAAO07D,YAAc,SAAqBpY,GACxC,IAAIj1D,EAAMqE,KAAK6nE,SAAS5wE,OAExB,GAAY,IAAR0E,EACF,OAAQ,EAOV,IAJA,IAEI0tE,EAFAC,EAAM,EACNC,EAAO5tE,EAAM,EAGV2tE,GAAOC,GAAM,CAGlB,GAFAF,EAAS7wE,KAAKuV,OAAOu7D,EAAMC,GAAQ,GAE/BvpE,KAAK6nE,SAASwB,KAAYzY,EAC5B,OAAOyY,EACErpE,KAAKopE,SAASppE,KAAK6nE,SAASwB,GAASzY,GAAO,EACrD2Y,EAAOF,EAAS,EAEhBC,EAAMD,EAAS,EAInB,OAAQ,GAGV/7D,EAAO4vC,iBAAmB,SAA0BvwB,GAClD,GAAKA,GAAUA,EAAc,OAA7B,CAIA,IAAIhuB,EAAOguB,EAAY,KAEV,aAAThuB,EACFqB,KAAKwpE,oBAAoB78C,GACP,iBAAThuB,EACTqB,KAAKypE,wBAAwB98C,GACX,mBAAThuB,EACTqB,KAAK0pE,0BAA0B/8C,GACb,gBAAThuB,EACTqB,KAAK2pE,uBAAuBh9C,GACV,iBAAThuB,EACTqB,KAAK4pE,wBAAwBj9C,GACX,SAAThuB,EACTqB,KAAK6pE,gBAAgBl9C,GACH,SAAThuB,EACTqB,KAAK8pE,gBAAgBn9C,GACH,qBAAThuB,GACTqB,KAAK+pE,4BAA4Bp9C,KAIrCrf,EAAOk8D,oBAAsB,SAA6B78C,GACxD,GAAIA,EAAW,MAAMA,EAAW,MAC1B3sB,KAAK4nE,QAAQj7C,EAAW,MAAM3sB,KAAK4nE,QAAQj7C,EAAW,OAAOA,EAAc,OADjF,CAMA,IAAKv1B,EAAMu1B,EAAW,KAAI,CACxB,GAAI3sB,KAAK4nE,QAAQj7C,EAAW,KAC1B,MAAM,IAAI3uB,MAAM,kCAAoCgC,KAAKkjC,QAAU,KAAOvW,EAAW,KAGvF3sB,KAAK4nE,QAAQj7C,EAAW,KAAKA,EAAc,OAGxCv1B,EAAMu1B,EAAW,MAAMA,EAAW,MAAMA,EAAW,YAC/C3sB,KAAK4nE,QAAQj7C,EAAW,OAInCrf,EAAOm8D,wBAA0B,SAAiC98C,GAC5DA,EAAW,MAAMA,EAAW,MAC9B3sB,KAAKuoE,cAAc57C,EAAW,KAE9B3sB,KAAKmoE,SAAU,EAEXnoE,KAAKyyC,gBACPzyC,KAAKyyC,eAAeu3B,uBAAuBr9C,KAKjDrf,EAAOo8D,0BAA4B,SAAmC/8C,GAChE3sB,KAAKyyC,gBACPzyC,KAAKyyC,eAAew3B,yBAAyBt9C,IAIjDrf,EAAOq8D,uBAAyB,SAAgCh9C,GAC1D3sB,KAAKyyC,gBACPzyC,KAAKyyC,eAAey3B,sBAAsBv9C,IAI9Crf,EAAOs8D,wBAA0B,SAAiCj9C,GAC5D3sB,KAAKyyC,gBACPzyC,KAAKyyC,eAAe03B,uBAAuBx9C,IAI/Crf,EAAOu8D,gBAAkB,SAAyBl9C,GAC5C3sB,KAAKyyC,gBACPzyC,KAAKyyC,eAAe23B,eAAez9C,IAIvCrf,EAAOw8D,gBAAkB,SAAyBn9C,GAC5C3sB,KAAKyyC,gBACPzyC,KAAKyyC,eAAe43B,eAAe19C,IAIvCrf,EAAOy8D,4BAA8B,SAAqCp9C,GACpE3sB,KAAKyyC,gBACPzyC,KAAKyyC,eAAe63B,2BAA2B39C,IAI5C26C,EArkBU,CAskBjB9pB,IAEF8pB,GAAa74C,aA5kBG,CACd,eAAiB,IA4kBnB,IAAI87C,GAAgB,IAAI90C,GACpB+0C,GAAY,CACd,OAAS,EACT,gBAAkB,EAClB,gBAAkB,EAClB,gBAAmB,CAAC,GAAI,IACxB,qBAAuB,EACvB,iBAAoB99D,GAAU5C,MAC9B,gBAAkB,EAClB,iBAAoB,WACpB,cAAgB,EAChB,SAAY,GAGV2gE,GAAc,SAAUC,GAG1B,SAASD,EAAYrwE,EAAIm7C,EAAYh9B,GACnC,OAAOmyD,EAAcpyE,KAAK0H,KAAM5F,EAAIm7C,EAAYh9B,IAAYvY,KAH9D2M,GAAe89D,EAAaC,GAM5B,IAAIp9D,EAASm9D,EAAYtyE,UAwJzB,OAtJAmV,EAAOygB,SAAW,SAAkBD,GAGlC,GAFA48C,EAAcvyE,UAAU41B,SAASz1B,KAAK0H,KAAM8tB,GAExCA,EAAqB,gBAAKA,EAAmB,cAAKA,EAAuB,iBAAG,CAC9E,IAAIyf,EAAWvtC,KAAKm+B,cAEhBoP,GAAYA,EAASvQ,aACvBuQ,EAASvQ,gBAKf1vB,EAAO4iD,SAAW,SAAkBhJ,EAAY3uC,QAC9B,IAAZA,IACFA,EAAU,IAGZ,IAAIg1B,EAAWvtC,KAAKm+B,cAEpB,OAAI5lB,EAAqB,aAAKg1B,GAAYA,EAAS2iB,SAC1C3iB,EAAS2iB,SAAShJ,EAAY3uC,IAGjC2uC,aAAsBl2B,KAC1Bk2B,EAAa,IAAIl2B,GAAWk2B,IAGvBlnD,KAAK2qE,SAAS3qE,KAAK6nE,SAAU3gB,EAAY3uC,KAGlDjL,EAAOq9D,SAAW,SAAkBp1B,EAAY2R,EAAY3uC,QAC1C,IAAZA,IACFA,EAAU,IAWZ,IARA,IAAIhY,EAASgY,EAAgB,OACzBysB,EAAYzsB,EAAmB,UAC/BqyD,EAAO,GACP/sE,EAAMmC,KAAKo9B,SACXxvB,EAAQ/P,EAAIopD,aAAaC,GAEzB3U,EAAK10C,EAAI+hC,uBAAuBhyB,OAAO9R,EAAW,EAAG8R,GAEhD7W,EAAIw+C,EAAWt+C,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAC/C,IAAI65D,EAAMrb,EAAWx+C,GAErB,GAAK65D,GAAQA,EAAIvzB,aAAgBuzB,EAAIpb,eAAkBob,EAAIr4C,QAAqB,YAAhF,CAIA,KAAMq4C,aAAemM,KAAgBnM,EAAIia,kBAAsBja,aAAeqR,KAAQ,CACpF,IAAIllD,EAAS6zC,EAAI9lB,mBAAmBy/B,IAMpC,GAJIvlC,IACFjoB,EAASA,EAAOqY,QAAQ4P,KAGrBjoB,IAAWA,EAAOhG,SAASw7B,GAC9B,SAIJ,GAAIqe,EAAI3X,eAAe1G,EAAIvN,MAAgBzkC,GAAUA,EAAOqwD,MAC1Dga,EAAK9vE,KAAK81D,GAENr4C,EAAe,OACbqyD,EAAK3zE,QAAUshB,EAAe,OAChC,OAMR,OAAOqyD,GAGTt9D,EAAO2jC,YAAc,WACnB,OAAOjxC,KAAKuY,QAAkB,UAAK,GAGrCjL,EAAO2B,OAAS,SAAgBsJ,GACzBA,IACHA,EAAU,IAGZ,IAAIuyD,EAAU,CACZ,KAAQ9qE,KAAK8uB,cACb,GAAM9uB,KAAKkjC,QACX,QAAWljC,KAAK6tB,UAGlB,GAAIz2B,EAAMmhB,EAAoB,aAAMA,EAAoB,WAAG,CACzD,IAAIwyD,EAEJ,GAAIxyD,EAAoB,WAAG,CACzB,IAAI1a,EAAMmC,KAAKo9B,SACX/J,EAAax1B,EAAMA,EAAIg5C,gBAAkB,KAC7Ck0B,EAAa,IAAI93C,GAAO1a,EAAoB,WAAG8a,GAMjD,IAHA,IAAI23C,EAAW,GACXz1B,EAAav1C,KAAK2hC,gBAEb5qC,EAAI,EAAG4E,EAAM45C,EAAWt+C,OAAQF,EAAI4E,EAAK5E,IAAK,CACrD,IAAI65D,EAAMrb,EAAWx+C,GACjBk0E,EAASra,EAAIhY,YAEjB,GAAKqyB,KAAUF,GAAeA,EAAW/2C,WAAWi3C,IAApD,CAIA,IAAIlpE,EAAO6uD,EAAI3hD,OAAOsJ,EAAoB,YAC1CyyD,EAASlwE,KAAKiH,IAGhB+oE,EAAoB,WAAIE,EAG1B,OAAOF,GAGTL,EAAYzwB,SAAW,SAAkBj4C,GACvC,IAAKA,GAAyB,gBAAjBA,EAAW,KACtB,OAAO,KAOT,IAJA,IAAI86B,EAAQ,IAAI4tC,EAAY1oE,EAAS,GAAGA,EAAc,SAClDipE,EAAWjpE,EAAiB,WAC5BwzC,EAAa,GAERx+C,EAAI,EAAGA,EAAIi0E,EAAS/zE,OAAQF,IAAK,CACxC,IAAI65D,EAAMzZ,GAAS6C,SAASgxB,EAASj0E,IAEjC65D,GACFrb,EAAWz6C,KAAK81D,GAKpB,OADA/zB,EAAMib,YAAYvC,GACX1Y,GAGT4tC,EAAYnuB,gBAAkB,WAC5B,OAAO7N,IAGTg8B,EAAYpuB,0BAA4B,WACtC,OAAOjH,IAGFq1B,EA/JS,CAgKhBnD,IAEFmD,GAAYh8C,aAAa+7C,IACzBC,GAAY77C,iBAAiB,eAC7B,IAAIv2B,GAAM,YAEN6yE,GAAU,SAAUC,GAGtB,SAASD,IACP,OAAOC,EAAWhoE,MAAMnD,KAAMhJ,YAAcgJ,KAH9C2M,GAAeu+D,EAASC,GAMxB,IAAI79D,EAAS49D,EAAQ/yE,UAkHrB,OAhHAmV,EAAOsqC,MAAQ,SAAe/5C,GAC5B,OAAKA,GAILmC,KAAKorE,KAAOvtE,EAERA,EAAIxF,KACNwF,EAAIxF,IAAK80B,UAGPntB,KAAKq/B,OACPr/B,KAAKq/B,QAGPr/B,KAAKgtB,SACLnvB,EAAIxF,IAAO2H,KAEXA,KAAKk4C,WAAW,OAETl4C,MAlBEA,MAqBXsN,EAAO8vB,OAAS,WACd,OAAOp9B,KAAKorE,MAGd99D,EAAO0f,OAAS,WAGd,OAFUhtB,KAAKorE,MAEHprE,KAAKitB,WAIjBjtB,KAAKitB,UAAW,EAEhBjtB,KAAKi/C,cAAc,OAEnBj/C,KAAKwmE,kBAEDxmE,KAAKqrE,UACPrrE,KAAKqrE,WAGPrrE,KAAKk4C,WAAW,WAbPl4C,MAkBXsN,EAAO6f,QAAU,WACf,OAAKntB,KAAKitB,UAAajtB,KAAKorE,MAI5BprE,KAAKitB,UAAW,EAEhBjtB,KAAKi/C,cAAc,OAEfj/C,KAAKsrE,WACPtrE,KAAKsrE,YAGPtrE,KAAKk4C,WAAW,WAETl4C,MAbEA,MAgBXsN,EAAOi+D,UAAY,WACjB,QAAKvrE,KAAKitB,UAOZ3f,EAAOggB,OAAS,WACd,OAAKttB,KAAKorE,MAIVprE,KAAKmtB,UAEDntB,KAAKorE,cACAprE,KAAKorE,KAAK/yE,WACV2H,KAAKorE,MAGdprE,KAAKk4C,WAAW,UAETl4C,MAZEA,MAeXsN,EAAOk5D,gBAAkB,WACvBxmE,KAAKi/C,cAAc,OAGrB3xC,EAAO2xC,cAAgB,SAAuB9yB,GAC5C,IAAIq/C,EAASxrE,KAAKkiC,YAEdspC,GACFxrE,KAAKorE,KAAKj/C,GAAIq/C,EAAQxrE,OAI1BsN,EAAO4qC,WAAa,SAAoB+E,EAAWtwB,GAC5CA,IACHA,EAAQ,IAGV3sB,KAAK8rB,KAAKmxB,EAAWtwB,IAGhBu+C,EAzHK,CA0HZ3gD,GAAUgD,KAgBRk+C,GAAiB,GAEjBC,GAAW,SAAUC,GAWvB,SAASD,EAASnzD,GAChB,IAAIwX,EAaJ,OAXAA,EAAQ47C,EAASrzE,KAAK0H,KAAMuY,IAAYvY,MAElC4rE,aAEN77C,EAAM87C,QAAU,CACd,MAAS97C,EAAM+7C,cACf,UAAa/7C,EAAMg8C,kBACnB,SAAYh8C,EAAMi8C,oBAClB,UAAaj8C,EAAMk8C,kBACnB,QAAWl8C,EAAMm8C,iBAEZn8C,EAxBTpjB,GAAe++D,EAAUC,GAEzBD,EAASS,aAAe,SAAsBjyE,EAAMkyE,GAClDX,GAAevxE,EAAKkP,eAAiBgjE,GAGvCV,EAASW,gBAAkB,SAAyBnyE,GAClD,OAAOuxE,GAAevxE,EAAKkP,gBAoB7B,IAAIkE,EAASo+D,EAASvzE,UAuctB,OArcAmV,EAAOg/D,QAAU,WACf,OAAItsE,KAAKuY,QAAc,KACdvY,KAAKuY,QAAc,KAAEnP,cAGvB,MAGTkE,EAAOi/D,QAAU,SAAiBjY,GAuBhC,OAtBIt0D,KAAKwsE,YACPxsE,KAAKwsE,UAAUl/C,gBAERttB,KAAKwsE,WAGdxsE,KAAKysE,cAELzsE,KAAKi/C,cAAc,OAEnBj/C,KAAKuY,QAAc,KAAI+7C,EAEvBt0D,KAAK4rE,aAED5rE,KAAKurE,cACPvrE,KAAKi/C,cAAc,MAEnBj/C,KAAK0sE,iBAEL1sE,KAAK2sE,eAGA3sE,MAGTsN,EAAOyhC,UAAY,WACjB,IAAI3oC,EAASpG,KAAKuY,QAAgB,OAElC,OACStQ,GADL7B,GAGkBpG,KAAKuY,QAAgB,SAI7CjL,EAAOgqC,UAAY,SAAmBlxC,GACpC,OAAKA,GAILpG,KAAKuY,QAAgB,OAAInS,EAErBpG,KAAKwsE,WACPxsE,KAAKwsE,UAAUl1B,UAAUlxC,GAGpBpG,MATEA,MAYXsN,EAAOs/D,mBAAqB,WAC1B,OAAO5sE,KAAKwsE,WAGdl/D,EAAO+xB,MAAQ,WACbr/B,KAAK4rE,cAGPt+D,EAAO+9D,SAAW,WAShB,GARArrE,KAAK2sE,cAEL3sE,KAAK6sE,eAAiB7sE,KAAK8sE,gBAE3B9sE,KAAKysE,cAELzsE,KAAK+sE,iBAED/sE,KAAKuY,QAAuB,cAAG,CACjC,IAAI1a,EAAMmC,KAAKo9B,SACfp9B,KAAKgtE,kBAAoBnvE,EAAI0a,QAAuB,cAE/CvY,KAAKgtE,mBACRnvE,EAAIgwB,OAAO,CACTo/C,eAAe,IAKrB,OAAOjtE,MAGTsN,EAAOg+D,UAAY,WACjB,IAAIztE,EAAMmC,KAAKo9B,SAkBf,OAhBAp9B,KAAK0sE,iBAEL1sE,KAAKktE,UAEDltE,KAAKorE,OACPvtE,EAAI6gD,YAAY1+C,KAAK8sE,iBAEjB9sE,KAAKuY,QAAuB,gBACzBvY,KAAKgtE,mBACRnvE,EAAIgwB,OAAO,CACTo/C,eAAe,MAMhBjtE,MAGTsN,EAAO6/D,KAAO,WACZ,IAAIhB,EAAensE,KAAKotE,mBAEpBC,EAASlB,EAAakB,OAE1B,IAAKrtE,KAAKstE,qBAAqBD,KAAYrtE,KAAKutE,gBAC9C,OAAOvtE,KAGT,IAAIk2B,EAASl2B,KAAKwtE,aAAal0E,MAAM,IAAK0G,KAAKutE,iBAG/C,OADApB,EAAasB,OAAOztE,KAAKo9B,SAASyZ,gBAAiB3gB,EAAQl2B,KAAKwsE,WACzDxsE,MAGTsN,EAAOogE,KAAO,WACZ,IAAIvB,EAAensE,KAAKotE,mBAEpBC,EAASlB,EAAakB,OAE1B,IAAKrtE,KAAKstE,qBAAqBD,IAAWj2E,EAAM4I,KAAKutE,kBAAoBvtE,KAAKutE,kBAAoBvtE,KAAKwtE,aAAav2E,OAClH,OAAO+I,KAGT,IAAIk2B,EAASl2B,KAAKwtE,aAAal0E,MAAM,IAAK0G,KAAKutE,iBAG/C,OADApB,EAAasB,OAAOztE,KAAKo9B,SAASyZ,gBAAiB3gB,EAAQl2B,KAAKwsE,WACzDxsE,MAGTsN,EAAOggE,qBAAuB,SAA8BK,GAC1D,OAAOryE,MAAMC,QAAQoyE,IAA2B,UAAfA,EAAQ,IAAiC,cAAfA,EAAQ,IAAqC,aAAfA,EAAQ,IAGnGrgE,EAAOs+D,WAAa,WAClB5rE,KAAKotE,oBAGP9/D,EAAOq/D,YAAc,WACnB,IAAI9uE,EAAMmC,KAAKo9B,SAQf,GAPAp9B,KAAK4tE,oBAAsB/vE,EAAI0a,QAAyB,gBACxD1a,EAAIgwB,OAAO,CACT,gBAAmB7tB,KAAKuY,QAAyB,kBAGrCvY,KAAKotE,mBAA2B,OAElCnyE,QAAQ,cAAgB,EAAG,CACrC,IAAImwE,EAAOprE,KAAKo9B,SAEhBp9B,KAAK6tE,cAAgBzC,EAAK7yD,QAAmB,UAE7C6yD,EAAKv9C,OAAO,CACV,WAAa,MAKnBvgB,EAAOo/D,eAAiB,WACtB,IAAI7uE,EAAMmC,KAAKo9B,SACfv/B,EAAIgwB,OAAO,CACT,gBAAmB7tB,KAAK4tE,sBAGrBx2E,EAAM4I,KAAK6tE,gBACdhwE,EAAIgwB,OAAO,YAAa7tB,KAAK6tE,sBAGxB7tE,KAAK6tE,qBACL7tE,KAAK4tE,qBAGdtgE,EAAOy/D,eAAiB,WACtB,IACI1lE,EAAYN,GADH/G,KAAK+uC,aAGd1nC,EAAUpQ,OAAS,GACrB+I,KAAK6sE,eAAep6B,eAAe5U,cAAcx2B,IAIrDiG,EAAO0nC,eAAiB,WACtB,OAAOh1C,KAAKorE,KAAKv0B,iBAGnBvpC,EAAO8/D,iBAAmB,WACxB,IAAI9Y,EAAOt0D,KAAKssE,UACZH,EAAeT,EAASW,gBAAgB/X,GAE5C,IAAK6X,EACH,MAAM,IAAInuE,MAAMs2D,EAAO,qCAGzB,OAAO6X,GAGT7+D,EAAO40B,UAAY,WACjB,IAAImrC,EAASrtE,KAAKotE,mBAA2B,OAEzCvB,EAAU,GAEd,GAAIvwE,MAAMC,QAAQ8xE,GAAS,CACzB,IAAK,IAAIt2E,EAAI,EAAGA,EAAIs2E,EAAOp2E,OAAQF,IACjC80E,EAAQwB,EAAOt2E,IAAMiJ,KAAK6rE,QAAQwB,EAAOt2E,IAG3C,OAAO80E,EAGT,OAAO,MAGTv+D,EAAO2+D,kBAAoB,SAA2Bj4D,GACpDhU,KAAK8tE,gBAAgB95D,IAGvB1G,EAAO4+D,gBAAkB,SAAyBl4D,GAChDhU,KAAKktE,QAAQl5D,IAGf1G,EAAOw+D,cAAgB,SAAuB93D,GAC5C,IAAIm4D,EAAensE,KAAKotE,mBAExB,GAAKptE,KAAKwsE,UAEH,CACL,IAAIhhB,EAAWxrD,KAAKo9B,SAAS8lB,YAAYlvC,EAAe,SAEnD5c,EAAM4I,KAAKutE,mBACdvtE,KAAKwtE,aAAextE,KAAKwtE,aAAal0E,MAAM,EAAG0G,KAAKutE,kBAGtDvtE,KAAKwtE,aAAa1yE,KAAK0wD,GAEvBxrD,KAAKutE,gBAAkBvtE,KAAKwtE,aAAav2E,OACzC+c,EAAM+5D,SAAW/tE,KACjBmsE,EAAqB,OAAEnsE,KAAKo9B,SAASyZ,gBAAiB72C,KAAKwtE,aAAcxtE,KAAKwsE,UAAWx4D,GAEzFhU,KAAKk4C,WAAW,aAAclkC,GAE1Bm4D,EAAyB,YAAKA,EAAyB,aAAMnsE,KAAKutE,iBACpEvtE,KAAKktE,QAAQl5D,QAjBfhU,KAAK8tE,gBAAgB95D,IAsBzB1G,EAAOwgE,gBAAkB,SAAyB95D,GAChD,IAAIsgD,EAAOt0D,KAAKssE,UAEZH,EAAensE,KAAKotE,mBAEpB5hB,EAAWxrD,KAAKo9B,SAAS8lB,YAAYlvC,EAAe,SAEpD5N,EAASpG,KAAK+uC,YAEb/uC,KAAKwsE,YACRxsE,KAAKwtE,aAAe,CAAChiB,GACrBx3C,EAAM+5D,SAAW/tE,KACjBA,KAAKwsE,UAAYL,EAAqB,OAAEnsE,KAAKo9B,SAASyZ,gBAAiB72C,KAAKwtE,aAAcx5D,GAEtF5N,GAAmB,UAATkuD,EACZt0D,KAAKwsE,UAAUl1B,UAAUlxC,GAChBpG,KAAKuY,QAAQtgB,eAAe,WACrC+H,KAAKwsE,UAAUl1B,UAAUt3C,KAAKuY,QAAgB,QAGhDvY,KAAKguE,oBAAoBhuE,KAAKwsE,WAE9BxsE,KAAKk4C,WAAW,YAAalkC,IAGlB,UAATsgD,GACFt0D,KAAKktE,QAAQl5D,IAIjB1G,EAAOy+D,kBAAoB,SAA2B/3D,GACpD,IAAInW,EAAMmC,KAAKo9B,SAEf,GAAKp9B,KAAKwsE,WAAc3uE,IAAOA,EAAImgC,gBAAnC,CAIA,IAAI2B,EAAiB3/B,KAAKiuE,wBAAwBj6D,GAElD,GAAKhU,KAAKkuE,uBAAuBvuC,GAAjC,CAIA,IAAI6rB,EAAWxrD,KAAKo9B,SAAS8lB,YAAYlvC,EAAe,SAEpDqf,EAAax1B,EAAIg5C,gBACrB7iC,EAAM+5D,SAAW/tE,KAEjB,IAAImsE,EAAensE,KAAKotE,mBAExB,GAAIptE,KAAKstE,qBAAqBnB,EAAakB,QAAS,CAClD,IAAI5mE,EAAOzG,KAAKwtE,aAAal0E,MAAM,EAAG0G,KAAKutE,iBAE3C,GAAI9mE,GAAQA,EAAKxP,OAAS,GAAKu0D,EAAS38C,OAAOpI,EAAKA,EAAKxP,OAAS,IAChE,OAGFk1E,EAAqB,OAAE94C,EAAY5sB,EAAKnQ,OAAO,CAACk1D,IAAYxrD,KAAKwsE,UAAWx4D,QAE5Em4D,EAAqB,OAAE94C,EAAYm4B,EAAUxrD,KAAKwsE,UAAWx4D,GAG/DhU,KAAKk4C,WAAW,YAAalkC,MAG/B1G,EAAO0+D,oBAAsB,SAA6Bh4D,GACxD,GAAKhU,KAAKwsE,UAAV,CAIA,IAAI7sC,EAAiB3/B,KAAKiuE,wBAAwBj6D,GAElD,GAAKhU,KAAKkuE,uBAAuBvuC,GAAjC,CAIA,IAAIwsC,EAAensE,KAAKotE,mBAEpBe,EAAcnuE,KAAKwtE,aAEvB,KAAIW,EAAYl3E,OAAS,GAAzB,CAOA,IAHA,IAAIo8B,EAAarzB,KAAKo9B,SAASyZ,gBAC3BpwC,EAAO,CAAC0nE,EAAY,IAEfp3E,EAAI,EAAG4E,EAAMwyE,EAAYl3E,OAAQF,EAAI4E,EAAK5E,IAC7Co3E,EAAYp3E,GAAGiF,IAAMmyE,EAAYp3E,EAAI,GAAGiF,GAAKmyE,EAAYp3E,GAAGqW,IAAM+gE,EAAYp3E,EAAI,GAAGqW,GACvF3G,EAAK3L,KAAKqzE,EAAYp3E,IAItB0P,EAAKxP,OAAS,GAAK+I,KAAKwsE,WAAaxsE,KAAKwsE,qBAAqB9T,IAAWjyD,EAAKxP,OAAS,IAI5F+c,EAAM+5D,SAAW/tE,KACjBmsE,EAAqB,OAAE94C,EAAY5sB,EAAMzG,KAAKwsE,UAAWx4D,GACzDhU,KAAKktE,QAAQl5D,QAGf1G,EAAO0gE,oBAAsB,SAA6BlsE,GACxC9B,KAAK8sE,gBAEXh1B,YAAYh2C,IAGxBwL,EAAO4/D,QAAU,SAAiBvgD,GAChC,IAAK3sB,KAAKwsE,WAAaxsE,KAAKouE,QAC1B,OAAOpuE,KAGTA,KAAKouE,SAAU,EACf,IAAItsE,EAAW9B,KAAKwsE,UAiBpB,OAfAxsE,KAAKysE,cAEL9/C,EAAQA,GAAS,GACjB3sB,KAAKwsE,UAAY1qE,EAEjB9B,KAAKk4C,WAAW,UAAWvrB,UAEpB3sB,KAAKwsE,UAERxsE,KAAKuY,QAAc,MACrBvY,KAAKmtB,iBAGAntB,KAAKouE,eACLpuE,KAAKutE,gBACLvtE,MAGTsN,EAAOm/D,YAAc,WACnBzsE,KAAK8sE,gBAAgBjtC,eAEd7/B,KAAKwsE,iBACLxsE,KAAKwtE,cAGdlgE,EAAO2gE,wBAA0B,SAAiCj6D,GAOhE,MAJe,cAFFhU,KAAKotE,mBAA2B,QAG3Cv4D,GAAgBb,EAAgB,UAG3BA,EAAsB,gBAG/B1G,EAAO4gE,uBAAyB,SAAgCvuC,GAC9D,IAAI0uC,EAAUruE,KAAKorE,KAAKx2C,UAEpBztB,EAAIknE,EAAe,MACnBjnE,EAAIinE,EAAgB,OAExB,QAAI1uC,EAAe3jC,EAAI,GAAK2jC,EAAevyB,EAAI,MAEpCuyB,EAAe3jC,EAAImL,GAAKw4B,EAAevyB,EAAIhG,IAOxDkG,EAAOw/D,cAAgB,WACrB,IAAIwB,EAAcC,qCAEdC,EAAgBxuE,KAAKorE,KAAK3iC,SAAS6lC,GAUvC,OARKE,IACHA,EAAgB,IAAI/D,GAAY6D,EAAa,CAC3C,gBAAkB,IAGpBtuE,KAAKorE,KAAKrtB,SAASywB,IAGdA,GAGTlhE,EAAO4qC,WAAa,SAAoB+E,EAAWtwB,GAC5CA,IACHA,EAAQ,IAGN3sB,KAAKwsE,YACP7/C,EAAgB,SAAI3sB,KAAKotE,mBAA6B,SAAEptE,KAAKwsE,UAAW,CACtEuB,SAAU/tE,QAIdkrE,GAAQ/yE,UAAU+/C,WAAW5/C,KAAK0H,KAAMi9C,EAAWtwB,IAG9C++C,EAneM,CAoebR,IAEFQ,GAASj9C,aAtfO,CACd,OAAU,CACR,UAAa,OACb,UAAa,EACb,YAAe,EACf,YAAe,OACf,eAAkB,IAEpB,iBAAmB,EACnB,KAAQ,KACR,MAAQ,EACR,eAAiB,EACjB,kBAAoB,IA4etB,IAAIggD,GAAmB,SAAU3+C,GAG/B,SAAS2+C,EAAiBrnD,GACxB,IAAI2I,EAOJ,OALAA,EAAQD,EAASx3B,KAAK0H,KAAMonB,IAAWpnB,MACjC+tE,SAAW,IAAIrC,GAAS,CAC5B,KAAQ,UACR,kBAAoB,IAEf37C,EAVTpjB,GAAe8hE,EAAkB3+C,GAajC,IAAIxiB,EAASmhE,EAAiBt2E,UAyC9B,OAvCAmV,EAAO4f,SAAW,WAChBltB,KAAKonB,OAAOpP,GAAG,aAAchY,KAAKgwB,aAAchwB,OAGlDsN,EAAO8f,YAAc,WACnBptB,KAAKonB,OAAOnP,IAAI,aAAcjY,KAAKgwB,aAAchwB,MAE7CA,KAAK+tE,SAASxC,aAChBvrE,KAAK+tE,SAASzgD,UAIlBhgB,EAAO0iB,aAAe,SAAsBrD,GACrC3sB,KAAKonB,OAAO7O,QAAiB,SAI9BoU,EAAMmhC,SAAS2E,UACjBzyD,KAAK+tE,SAASz2B,UAAUt3C,KAAKonB,OAAO7O,QAAuB,eAAGP,GAAG,UAAWhY,KAAK0uE,SAAU1uE,MAAM43C,MAAM53C,KAAKonB,SAIhH9Z,EAAOohE,SAAW,SAAkB/hD,GAClC,IAAI9uB,EAAMmC,KAAKonB,OACfpnB,KAAK+tE,SAASzgD,SACd,IAAIxrB,EAAW6qB,EAAM7qB,SACjBgjC,EAAShjC,EAASwb,YAClBlX,EAAStE,EAASitC,YAClB5nC,EAAIf,EAAOuoE,YACXvnE,EAAIhB,EAAOwoE,aACX7xD,EAAS,IAAIkW,GAAO6R,EAAQjnC,EAAIsuD,cAAcrnB,EAAQ39B,EAAGC,GAAIvJ,EAAIg5C,iBACjE9wC,EAAOlI,EAAImnD,WAAWjoC,GAE1Blf,EAAI6nD,WAAW,CACb5gB,OAAQ/nB,EAAOO,YACfvX,KAAMA,KAIH0oE,EAvDc,CAwDrB3hD,IAEFgzB,GAAMrxB,aAAa,CACjB,SAAW,EACX,cAAiB,CACf,WAAc,YACd,gBAAmB,EACnB,gBAAmB,UACnB,oBAAuB,CAAC,GAAI,GAC5B,kBAAqB,GACrB,WAAc,UACd,YAAe,EACf,aAAgB,KAGpBqxB,GAAMkB,cAAc,aAAc,UAAWytB,IAC7C,IAEII,GAA0B,SAAU/+C,GAGtC,SAAS++C,IACP,OAAO/+C,EAAS3sB,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAekiE,EAAyB/+C,GAMxC,IAAIxiB,EAASuhE,EAAwB12E,UAyDrC,OAvDAmV,EAAO4f,SAAW,WACXltB,KAAKonB,QAIVpnB,KAAKonB,OAAOpP,GAAG,aAAchY,KAAK8uE,aAAc9uE,OAGlDsN,EAAO8f,YAAc,WACdptB,KAAKonB,QAIVpnB,KAAKonB,OAAOnP,IAAI,aAAcjY,KAAK8uE,aAAc9uE,OAGnDsN,EAAOwhE,aAAe,SAAsB96D,GAC1C,IAAInW,EAAMmC,KAAKonB,OAEf,GAAIvpB,EAAI0a,QAAuB,cAAG,CAChC,IAAIonB,EAAiB3rB,EAAM2rB,eACvBslB,EAAkBpnD,EAAIitC,qBAE1B,GAAIma,EAAiB,CACnB,IAIIzpD,EAJAQ,EAAI2jC,EAAe3jC,EACnBoR,EAAIuyB,EAAevyB,EACnBqmB,EAAOwxB,EAAgBxxB,KACvBE,EAAOsxB,EAAgBtxB,KAGvB33B,EAzCI,KA0CNR,EAAI,CAAChD,KAAK+D,IAAIP,EA1CR,IA0CwB,IAG5BoR,EA7CI,KA8CN5R,EAAI,CAAC,EAAGhD,KAAK+D,IAAI6Q,EA9CX,MAiDJpR,EAjDI,GAiDYy3B,IAClBj4B,EAAI,EAAEhD,KAAK+D,IAAIP,EAlDT,GAkDyBy3B,GAAO,IAGpCrmB,EArDI,GAqDYumB,IAClBn4B,EAAI,CAAC,GAAIhD,KAAK+D,IAAI6Q,EAtDZ,GAsD4BumB,KAGhCn4B,GACFqC,EAAI0xD,MAAM/zD,EAAG,CACX26D,SAAU,OAOb0Y,EAhEqB,CAiE5B/hD,IAEFgzB,GAAMrxB,aAAa,CACjB,eAAiB,IAEnBqxB,GAAMkB,cAAc,aAAc,gBAAiB6tB,IACnD/uB,GAAMtxB,QAAQ,CACZ65C,UAAW,SAAmB7pE,EAAM+Z,EAASktC,GAC3C,IAAI11B,EAAQ/vB,UAEI,IAAZuY,IACFA,EAAU,IAGRxgB,EAAWwgB,KACbktC,EAAOltC,EACPA,EAAU,IAGZ,IAAI8a,EAAarzB,KAAK62C,gBAClBk4B,EAAW/uE,KAAKklD,UAChB5gD,EAAQ,GACR0qE,GAAQ,EAEZ,IAAK,IAAIxzE,KAAKgD,EACZ,GAAIpG,EAAOoG,EAAMhD,KAAOpE,EAAMoH,EAAKhD,MAAc,cAANA,IAAsBpE,EAAM23E,EAASvzE,KAG9E,GAFAwzE,GAAQ,EAEE,WAANxzE,EAAgB,CAClB,IAAI+9B,EAAO,IAAIvI,GAAW+9C,EAASvzE,IAAIwT,QAAQ,GAC3Cmd,EAAK,IAAI6E,GAAWxyB,EAAKhD,IAAIwT,QAAQ,GAEpCuqB,EAAK1qB,OAAOsd,KACf7nB,EAAc,OAAI,CAACi1B,EAAMpN,SAEtB,GAAU,cAAN3wB,EAAmB,CAC5B,IAAIyzE,EAAQ,IAAIj+C,GAAWhxB,KAAKsjD,iBAE5B4rB,EAAM,IAAIl+C,GAAWxyB,EAAKhD,IAEzByzE,EAAMpgE,OAAOqgE,KAChB5qE,EAAiB,UAAI,CAAC2qE,EAAOC,SAEtBH,EAASvzE,KAAOgD,EAAKhD,IAAY,WAANA,IACpC8I,EAAM9I,GAAK,CAACuzE,EAASvzE,GAAIgD,EAAKhD,KAKpC,GAAIwzE,EACF,OAAO,KAGLhvE,KAAKu7C,cACHv7C,KAAKmvE,qBAC4B,YAA/BnvE,KAAKu7C,YAAYkY,YACnBzzD,KAAKu7C,YAAY+b,QAEjBt3D,KAAKovE,gBAAkBpvE,KAAKu7C,qBAGvBv7C,KAAKovE,gBAEZpvE,KAAKouD,UAAUpuD,KAAKu7C,eAIxB,IAAI8zB,EAAa7wE,EAAa,QAAK,IAAI0Q,GAAMlP,KAAKqG,MAAQ,EAAGrG,KAAKsG,OAAS,GAEvEinC,EAAWvtC,KAAKyyC,eAKhB0mB,EAASn5D,KAAKu7C,YAAc+Z,GAAUyB,QAAQzyD,EAAO,CACvD,OAAUiU,EAAgB,QAAK,MAC/B,SAAYA,EAAkB,UAAKvY,KAAKuY,QAA+B,sBACvE,OAPW,SAAgB5e,GAC3B4zC,EAASgkB,gBAAgB53D,MAOxB,SAAU65D,GACX,GAAIzjC,EAAMo5B,YACRgQ,EAAO3d,aADT,CAKA,GAAyB,YAArB2d,EAAO1F,UAAyB,CAClC,GAAID,EAAMrxD,OAAe,OAAG,CAC1B,IAAI2iC,EAAS0uB,EAAMrxD,OAAe,OAElC4tB,EAAMoyB,cAAc9uB,EAAWsB,QAAQmQ,IAEvC/U,EAAMyS,SAASzS,EAAMqyB,qBAAqBryB,EAAMzS,mBAC3C,GAAIk2C,EAAMrxD,OAAkB,UAAG,CACpC,IAAIq+C,EAAUgT,EAAMrxD,OAAkB,UAEtC4tB,EAAMoyB,cAAc3B,GAEpBzwB,EAAMyS,SAASzS,EAAMqyB,qBAAqBryB,EAAMzS,cAG7ClmB,EAAMo8D,EAAMrxD,OAAa,OAC5B4tB,EAAMqS,UAAUoxB,EAAMrxD,OAAa,KAAGktE,GAGnCj4E,EAAMo8D,EAAMrxD,OAAc,QAC7B4tB,EAAMq1B,SAASoO,EAAMrxD,OAAc,OAGhC/K,EAAMo8D,EAAMrxD,OAAgB,UAC/B4tB,EAAMs1B,WAAWmO,EAAMrxD,OAAgB,SAGzC4tB,EAAMmoB,WAAW,iBACa,WAArBihB,EAAO1F,WAA0B0F,IAAWppC,EAAMs+B,iBACtD8K,EAAOmW,cACNhrE,EAAc,OAChByrB,EAAMoyB,cAAc9uB,EAAWsB,QAAQrwB,EAAc,OAAE,KAC9CA,EAAiB,WAC1ByrB,EAAMoyB,cAAc79C,EAAiB,UAAE,IAGpClN,EAAMkN,EAAa,QACtByrB,EAAMq1B,SAAS9gD,EAAa,MAAE,IAG3BlN,EAAMkN,EAAe,UACxByrB,EAAMs1B,WAAW/gD,EAAe,QAAE,KAItCyrB,EAAMw/C,SAASpW,EAAQ70D,EAAO+qE,EAAY92D,IAGxCktC,GACFA,EAAK+N,MAENxzD,MAIH,OAFAA,KAAKwvE,WAAWlrE,EAAO+qE,GAEhBlW,GAETzT,WAAY,SAAoBlnD,EAAM+Z,EAASktC,GAY7C,YAXgB,IAAZltC,IACFA,EAAU,IAGRvY,KAAKquD,gBACPruD,KAAKouD,UAAUpuD,KAAKquD,gBAGtBruD,KAAKmvE,sBAAuB,EAC5BnvE,KAAKquD,eAAiBruD,KAAKqoE,UAAU7pE,EAAM+Z,EAASktC,UAC7CzlD,KAAKmvE,qBACLnvE,KAAKquD,gBAEdohB,YAAa,WACX,QAASzvE,KAAKu7C,aAEhB/c,WAAY,WACV,OAAOx+B,KAAK2pD,oBAAsB3pD,KAAK0vE,eAEzCH,SAAU,SAAkBpW,EAAQ70D,EAAO+qE,EAAY92D,UAC9CvY,KAAK0vE,cACZ,IAWMC,EAXF7kD,EAAUquC,EAAOmW,YAAc,qBAAuB,aAU1D,GARInW,IAAWn5D,KAAKu7C,oBACXv7C,KAAKu7C,YAGV4d,IAAWn5D,KAAKquD,uBACXruD,KAAKquD,eAGV/pD,EAAc,OAIdqrE,EADExW,EAAOmW,YACEtvE,KAAKsd,YAELhZ,EAAc,OAAE,GAG7BtE,KAAKyiC,UAAUziC,KAAKoiD,qBAAqButB,SACpC,GAAIrrE,EAAiB,UAAG,CAC7B,IAAIsrE,EAGFA,EADEzW,EAAOmW,YACGtvE,KAAKsjD,gBAELh/C,EAAiB,UAAE,GAGjC,IAAI0P,EAAQhU,KAAKoiD,qBAAqBpiD,KAAK62C,gBAAgBzjB,UAAUw8C,IAErE57D,EAAe,QAAIhU,KAAKksC,YAAY0jC,GACpC5vE,KAAKyiC,UAAUzuB,GAGZ5c,EAAMkN,EAAY,QACjB60D,EAAOmW,YACTtvE,KAAKqiC,UAAUriC,KAAKw/B,UAAW6vC,GACrB92D,EAAmB,UAG7BvY,KAAKoiC,UAAU99B,EAAY,KAAE,GAAI+qE,GAFjCrvE,KAAKqiC,UAAU/9B,EAAY,KAAE,GAAI+qE,IAMjCvkD,GACF9qB,KAAKk4C,WAAWptB,GAGb1zB,EAAMkN,EAAa,QAAOtE,KAAKq+B,YAClCr+B,KAAKm+B,cAAcnB,cAGrBh9B,KAAK6vE,YAAY1W,IAEnBqW,WAAY,SAAoBlrE,EAAO+qE,GAChCrvE,KAAKu7C,cAINj3C,EAAc,QAChBtE,KAAKuiC,cAGHj+B,EAAY,OAAMtE,KAAKu+B,aACzBv+B,KAAKmiC,YAAY79B,EAAY,KAAE,GAAI+qE,IAGjC/qE,EAAa,OAAKA,EAAe,WACnCtE,KAAK0vE,eAAgB,GAGvB1vE,KAAKk4C,WAAW,gBAEhBl4C,KAAKu7C,YAAY2b,SAEnB9I,UAAW,SAAmB+K,GACvBA,WAIEn5D,KAAK0vE,cAEa,aAArBvW,EAAO1F,YACT0F,EAAOmW,aAAc,EACrBnW,EAAO5B,UAGL4B,IAAWn5D,KAAKu7C,oBACXv7C,KAAKu7C,YAGV4d,IAAWn5D,KAAKquD,uBACXruD,KAAKquD,iBAGhBwhB,YAAa,SAAqB1W,GAChC,GAAKn5D,KAAKovE,gBAAV,CAIA,IAAIU,EAAa9vE,KAAKovE,gBAEO,WAAzBU,EAAWrc,kBACNzzD,KAAKovE,gBAGVjW,IAAW2W,IACb9vE,KAAKu7C,YAAcu0B,EACnBA,EAAW5Y,YAIjB,IAAIsU,GAAS,0IAysBb,SAASuE,GAAYl8C,EAAKm8C,EAAMC,EAAQC,EAAMC,GAC5C,IAAI/mD,EAAI,EAAM5wB,KAAK0gC,IAAI82C,EAAO,GAC1BI,EAAK,GAAKF,EAAOC,GAiBrB,OAhBAt8C,EAAI,GAAKzK,EAAI6mD,EACbp8C,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAKzK,EACTyK,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,KAAOs8C,EAAMD,GAAQE,EACzBv8C,EAAI,KAAO,EACXA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EAAIs8C,EAAMD,EAAOE,EAC3Bv8C,EAAI,IAAM,EACHA,EAGT,SAASlV,GAAUkV,EAAKp3B,EAAGZ,GACzB,IAGIw0E,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAdAh1E,EAAIH,EAAE,GACNuR,EAAIvR,EAAE,GACNmK,EAAInK,EAAE,GAkDV,OApCIY,IAAMo3B,GACRA,EAAI,IAAMp3B,EAAE,GAAKT,EAAIS,EAAE,GAAK2Q,EAAI3Q,EAAE,GAAKuJ,EAAIvJ,EAAE,IAC7Co3B,EAAI,IAAMp3B,EAAE,GAAKT,EAAIS,EAAE,GAAK2Q,EAAI3Q,EAAE,GAAKuJ,EAAIvJ,EAAE,IAC7Co3B,EAAI,IAAMp3B,EAAE,GAAKT,EAAIS,EAAE,GAAK2Q,EAAI3Q,EAAE,IAAMuJ,EAAIvJ,EAAE,IAC9Co3B,EAAI,IAAMp3B,EAAE,GAAKT,EAAIS,EAAE,GAAK2Q,EAAI3Q,EAAE,IAAMuJ,EAAIvJ,EAAE,MAE9C4zE,EAAM5zE,EAAE,GACR6zE,EAAM7zE,EAAE,GACR8zE,EAAM9zE,EAAE,GACR+zE,EAAM/zE,EAAE,GACRg0E,EAAMh0E,EAAE,GACRi0E,EAAMj0E,EAAE,GACRk0E,EAAMl0E,EAAE,GACRm0E,EAAMn0E,EAAE,GACRo0E,EAAMp0E,EAAE,GACRq0E,EAAMr0E,EAAE,GACRs0E,EAAMt0E,EAAE,IACRu0E,EAAMv0E,EAAE,IACRo3B,EAAI,GAAKw8C,EACTx8C,EAAI,GAAKy8C,EACTz8C,EAAI,GAAK08C,EACT18C,EAAI,GAAK28C,EACT38C,EAAI,GAAK48C,EACT58C,EAAI,GAAK68C,EACT78C,EAAI,GAAK88C,EACT98C,EAAI,GAAK+8C,EACT/8C,EAAI,GAAKg9C,EACTh9C,EAAI,GAAKi9C,EACTj9C,EAAI,IAAMk9C,EACVl9C,EAAI,IAAMm9C,EACVn9C,EAAI,IAAMw8C,EAAMr0E,EAAIy0E,EAAMrjE,EAAIyjE,EAAM7qE,EAAIvJ,EAAE,IAC1Co3B,EAAI,IAAMy8C,EAAMt0E,EAAI00E,EAAMtjE,EAAI0jE,EAAM9qE,EAAIvJ,EAAE,IAC1Co3B,EAAI,IAAM08C,EAAMv0E,EAAI20E,EAAMvjE,EAAI2jE,EAAM/qE,EAAIvJ,EAAE,IAC1Co3B,EAAI,IAAM28C,EAAMx0E,EAAI40E,EAAMxjE,EAAI4jE,EAAMhrE,EAAIvJ,EAAE,KAGrCo3B,EAGT,SAASiC,GAAMjC,EAAKp3B,EAAGZ,GACrB,IAAIG,EAAIH,EAAE,GACNuR,EAAIvR,EAAE,GACNmK,EAAInK,EAAE,GAiBV,OAhBAg4B,EAAI,GAAKp3B,EAAE,GAAKT,EAChB63B,EAAI,GAAKp3B,EAAE,GAAKT,EAChB63B,EAAI,GAAKp3B,EAAE,GAAKT,EAChB63B,EAAI,GAAKp3B,EAAE,GAAKT,EAChB63B,EAAI,GAAKp3B,EAAE,GAAK2Q,EAChBymB,EAAI,GAAKp3B,EAAE,GAAK2Q,EAChBymB,EAAI,GAAKp3B,EAAE,GAAK2Q,EAChBymB,EAAI,GAAKp3B,EAAE,GAAK2Q,EAChBymB,EAAI,GAAKp3B,EAAE,GAAKuJ,EAChB6tB,EAAI,GAAKp3B,EAAE,GAAKuJ,EAChB6tB,EAAI,IAAMp3B,EAAE,IAAMuJ,EAClB6tB,EAAI,IAAMp3B,EAAE,IAAMuJ,EAClB6tB,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACLo3B,EAuET,SAASo9C,GAASp9C,EAAKp3B,EAAGC,GACxB,IAAI2zE,EAAM5zE,EAAE,GACR6zE,EAAM7zE,EAAE,GACR8zE,EAAM9zE,EAAE,GACR+zE,EAAM/zE,EAAE,GACRg0E,EAAMh0E,EAAE,GACRi0E,EAAMj0E,EAAE,GACRk0E,EAAMl0E,EAAE,GACRm0E,EAAMn0E,EAAE,GACRo0E,EAAMp0E,EAAE,GACRq0E,EAAMr0E,EAAE,GACRs0E,EAAMt0E,EAAE,IACRu0E,EAAMv0E,EAAE,IACRy0E,EAAMz0E,EAAE,IACR00E,EAAM10E,EAAE,IACR20E,EAAM30E,EAAE,IACR40E,EAAM50E,EAAE,IACR60E,EAAK50E,EAAE,GACP8pB,EAAK9pB,EAAE,GACP60E,EAAK70E,EAAE,GACP80E,EAAK90E,EAAE,GA6BX,OA5BAm3B,EAAI,GAAKy9C,EAAKjB,EAAM7pD,EAAKiqD,EAAMc,EAAKV,EAAMW,EAAKN,EAC/Cr9C,EAAI,GAAKy9C,EAAKhB,EAAM9pD,EAAKkqD,EAAMa,EAAKT,EAAMU,EAAKL,EAC/Ct9C,EAAI,GAAKy9C,EAAKf,EAAM/pD,EAAKmqD,EAAMY,EAAKR,EAAMS,EAAKJ,EAC/Cv9C,EAAI,GAAKy9C,EAAKd,EAAMhqD,EAAKoqD,EAAMW,EAAKP,EAAMQ,EAAKH,EAC/CC,EAAK50E,EAAE,GACP8pB,EAAK9pB,EAAE,GACP60E,EAAK70E,EAAE,GACP80E,EAAK90E,EAAE,GACPm3B,EAAI,GAAKy9C,EAAKjB,EAAM7pD,EAAKiqD,EAAMc,EAAKV,EAAMW,EAAKN,EAC/Cr9C,EAAI,GAAKy9C,EAAKhB,EAAM9pD,EAAKkqD,EAAMa,EAAKT,EAAMU,EAAKL,EAC/Ct9C,EAAI,GAAKy9C,EAAKf,EAAM/pD,EAAKmqD,EAAMY,EAAKR,EAAMS,EAAKJ,EAC/Cv9C,EAAI,GAAKy9C,EAAKd,EAAMhqD,EAAKoqD,EAAMW,EAAKP,EAAMQ,EAAKH,EAC/CC,EAAK50E,EAAE,GACP8pB,EAAK9pB,EAAE,GACP60E,EAAK70E,EAAE,IACP80E,EAAK90E,EAAE,IACPm3B,EAAI,GAAKy9C,EAAKjB,EAAM7pD,EAAKiqD,EAAMc,EAAKV,EAAMW,EAAKN,EAC/Cr9C,EAAI,GAAKy9C,EAAKhB,EAAM9pD,EAAKkqD,EAAMa,EAAKT,EAAMU,EAAKL,EAC/Ct9C,EAAI,IAAMy9C,EAAKf,EAAM/pD,EAAKmqD,EAAMY,EAAKR,EAAMS,EAAKJ,EAChDv9C,EAAI,IAAMy9C,EAAKd,EAAMhqD,EAAKoqD,EAAMW,EAAKP,EAAMQ,EAAKH,EAChDC,EAAK50E,EAAE,IACP8pB,EAAK9pB,EAAE,IACP60E,EAAK70E,EAAE,IACP80E,EAAK90E,EAAE,IACPm3B,EAAI,IAAMy9C,EAAKjB,EAAM7pD,EAAKiqD,EAAMc,EAAKV,EAAMW,EAAKN,EAChDr9C,EAAI,IAAMy9C,EAAKhB,EAAM9pD,EAAKkqD,EAAMa,EAAKT,EAAMU,EAAKL,EAChDt9C,EAAI,IAAMy9C,EAAKf,EAAM/pD,EAAKmqD,EAAMY,EAAKR,EAAMS,EAAKJ,EAChDv9C,EAAI,IAAMy9C,EAAKd,EAAMhqD,EAAKoqD,EAAMW,EAAKP,EAAMQ,EAAKH,EACzCx9C,EAGT,SAAS49C,GAAO59C,EAAKp3B,GACnB,IAAI4zE,EAAM5zE,EAAE,GACR6zE,EAAM7zE,EAAE,GACR8zE,EAAM9zE,EAAE,GACR+zE,EAAM/zE,EAAE,GACRg0E,EAAMh0E,EAAE,GACRi0E,EAAMj0E,EAAE,GACRk0E,EAAMl0E,EAAE,GACRm0E,EAAMn0E,EAAE,GACRo0E,EAAMp0E,EAAE,GACRq0E,EAAMr0E,EAAE,GACRs0E,EAAMt0E,EAAE,IACRu0E,EAAMv0E,EAAE,IACRy0E,EAAMz0E,EAAE,IACR00E,EAAM10E,EAAE,IACR20E,EAAM30E,EAAE,IACR40E,EAAM50E,EAAE,IACRi1E,EAAMrB,EAAMK,EAAMJ,EAAMG,EACxBkB,EAAMtB,EAAMM,EAAMJ,EAAME,EACxBmB,EAAMvB,EAAMO,EAAMJ,EAAMC,EACxBoB,EAAMvB,EAAMK,EAAMJ,EAAMG,EACxBoB,EAAMxB,EAAMM,EAAMJ,EAAME,EACxBqB,EAAMxB,EAAMK,EAAMJ,EAAMG,EACxBqB,EAAMnB,EAAMM,EAAML,EAAMI,EACxBe,EAAMpB,EAAMO,EAAML,EAAMG,EACxBgB,EAAMrB,EAAMQ,EAAML,EAAME,EACxBiB,EAAMrB,EAAMM,EAAML,EAAMI,EACxBiB,EAAMtB,EAAMO,EAAML,EAAMG,EACxBkB,EAAMtB,EAAMM,EAAML,EAAMI,EACxBkB,EAAMZ,EAAMW,EAAMV,EAAMS,EAAMR,EAAMO,EAAMN,EAAMK,EAAMJ,EAAMG,EAAMF,EAAMC,EAE5E,OAAKM,GAILA,EAAM,EAAMA,EACZz+C,EAAI,IAAM68C,EAAM2B,EAAM1B,EAAMyB,EAAMxB,EAAMuB,GAAOG,EAC/Cz+C,EAAI,IAAM08C,EAAM6B,EAAM9B,EAAM+B,EAAM7B,EAAM2B,GAAOG,EAC/Cz+C,EAAI,IAAMs9C,EAAMY,EAAMX,EAAMU,EAAMT,EAAMQ,GAAOS,EAC/Cz+C,EAAI,IAAMk9C,EAAMe,EAAMhB,EAAMiB,EAAMf,EAAMa,GAAOS,EAC/Cz+C,EAAI,IAAM88C,EAAMuB,EAAMzB,EAAM4B,EAAMzB,EAAMqB,GAAOK,EAC/Cz+C,EAAI,IAAMw8C,EAAMgC,EAAM9B,EAAM2B,EAAM1B,EAAMyB,GAAOK,EAC/Cz+C,EAAI,IAAMu9C,EAAMQ,EAAMV,EAAMa,EAAMV,EAAMM,GAAOW,EAC/Cz+C,EAAI,IAAMg9C,EAAMkB,EAAMhB,EAAMa,EAAMZ,EAAMW,GAAOW,EAC/Cz+C,EAAI,IAAM48C,EAAM2B,EAAM1B,EAAMwB,EAAMtB,EAAMoB,GAAOM,EAC/Cz+C,EAAI,IAAMy8C,EAAM4B,EAAM7B,EAAM+B,EAAM5B,EAAMwB,GAAOM,EAC/Cz+C,EAAI,KAAOq9C,EAAMY,EAAMX,EAAMS,EAAMP,EAAMK,GAAOY,EAChDz+C,EAAI,KAAOi9C,EAAMc,EAAMf,EAAMiB,EAAMd,EAAMU,GAAOY,EAChDz+C,EAAI,KAAO68C,EAAMuB,EAAMxB,EAAM0B,EAAMxB,EAAMqB,GAAOM,EAChDz+C,EAAI,KAAOw8C,EAAM8B,EAAM7B,EAAM2B,EAAM1B,EAAMyB,GAAOM,EAChDz+C,EAAI,KAAOs9C,EAAMQ,EAAMT,EAAMW,EAAMT,EAAMM,GAAOY,EAChDz+C,EAAI,KAAOg9C,EAAMgB,EAAMf,EAAMa,EAAMZ,EAAMW,GAAOY,EACzCz+C,GApBE,KAuBX,SAAS0+C,GAAS1+C,GAiBhB,OAhBAA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACVA,EAAI,IAAM,EACHA,EAGT,SAAS7lB,GAAK6lB,EAAKp3B,GAiBjB,OAhBAo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACLo3B,EAGT,SAAS2+C,GAAM3+C,EAAK73B,EAAGoR,EAAGpH,GAIxB,OAHA6tB,EAAI,GAAK73B,EACT63B,EAAI,GAAKzmB,EACTymB,EAAI,GAAK7tB,EACF6tB,EAUT,SAAS4+C,GAAS5+C,EAAKp3B,EAAGC,GAIxB,OAHAm3B,EAAI,GAAKp3B,EAAE,GAAKC,EAAE,GAClBm3B,EAAI,GAAKp3B,EAAE,GAAKC,EAAE,GAClBm3B,EAAI,GAAKp3B,EAAE,GAAKC,EAAE,GACXm3B,EAGT,SAAS58B,GAAOwF,GACd,IAAIT,EAAIS,EAAE,GACN2Q,EAAI3Q,EAAE,GACNuJ,EAAIvJ,EAAE,GACV,OAAOjE,KAAKqV,KAAK7R,EAAIA,EAAIoR,EAAIA,EAAIpH,EAAIA,GAGvC,SAAS0sE,GAAU7+C,EAAKp3B,GACtB,IAAIT,EAAIS,EAAE,GACN2Q,EAAI3Q,EAAE,GACNuJ,EAAIvJ,EAAE,GACNd,EAAMK,EAAIA,EAAIoR,EAAIA,EAAIpH,EAAIA,EAS9B,OAPIrK,EAAM,IACRA,EAAM,EAAInD,KAAKqV,KAAKlS,GACpBk4B,EAAI,GAAKp3B,EAAE,GAAKd,EAChBk4B,EAAI,GAAKp3B,EAAE,GAAKd,EAChBk4B,EAAI,GAAKp3B,EAAE,GAAKd,GAGXk4B,EAcT,SAASkX,GAAMlX,EAAKp3B,EAAGC,GACrB,IAAIi2E,EAAKl2E,EAAE,GACPm2E,EAAKn2E,EAAE,GACPo2E,EAAKp2E,EAAE,GACPq2E,EAAKp2E,EAAE,GACPq2E,EAAKr2E,EAAE,GACPs2E,EAAKt2E,EAAE,GAIX,OAHAm3B,EAAI,GAAK++C,EAAKI,EAAKH,EAAKE,EACxBl/C,EAAI,GAAKg/C,EAAKC,EAAKH,EAAKK,EACxBn/C,EAAI,GAAK8+C,EAAKI,EAAKH,EAAKE,EACjBj/C,EAGT,SAASsB,GAAS14B,EAAGC,GACnB,IAAIV,EAAIU,EAAE,GAAKD,EAAE,GACb2Q,EAAI1Q,EAAE,GAAKD,EAAE,GACbuJ,EAAItJ,EAAE,GAAKD,EAAE,GACjB,OAAOjE,KAAKy6E,MAAQz6E,KAAKy6E,MAAMj3E,EAAGoR,EAAGpH,GAevC,WACE,IAAIoH,EAAI,EACJrW,EAAIC,UAAUC,OAElB,KAAOF,KACLqW,GAAKpW,UAAUD,GAAKC,UAAUD,GAGhC,OAAOyB,KAAKqV,KAAKT,GAvByB6lE,CAAMj3E,EAAGoR,EAAGpH,GA0BxD,SAASktE,GAAYr/C,EAAKh4B,EAAGkY,GAC3B,IAAI/X,EAAIH,EAAE,GACNuR,EAAIvR,EAAE,GACNmK,EAAInK,EAAE,GACNsL,EAAI,GAAK4M,EAAE,GAAK/X,EAAI+X,EAAE,GAAK3G,EAAI2G,EAAE,IAAM/N,EAAI+N,EAAE,KAIjD,OAHA8f,EAAI,IAAM9f,EAAE,GAAK/X,EAAI+X,EAAE,GAAK3G,EAAI2G,EAAE,GAAK/N,EAAI+N,EAAE,KAAO5M,EACpD0sB,EAAI,IAAM9f,EAAE,GAAK/X,EAAI+X,EAAE,GAAK3G,EAAI2G,EAAE,GAAK/N,EAAI+N,EAAE,KAAO5M,EACpD0sB,EAAI,IAAM9f,EAAE,GAAK/X,EAAI+X,EAAE,GAAK3G,EAAI2G,EAAE,IAAM/N,EAAI+N,EAAE,KAAO5M,EAC9C0sB,EA9mCTisB,GAAMtxB,QAAQ,CACZ2kD,mBAAoB,WAElBx/D,GADU3T,KAAKqgD,QAAQmN,YAAcxtD,KAAKmhD,cACzBqqB,GAAQxrE,KAAKozE,gBAAiBpzE,OAEjDopD,iBAAkB,WAEhBl1C,GADUlU,KAAKqgD,QAAQmN,YAAcxtD,KAAKmhD,cACtBqqB,GAAQxrE,KAAKozE,kBAEnCA,gBAAiB,SAAyBr/D,GACxC,IAAIpV,EAAOoV,EAAEpV,KAMb,GAJa,gBAATA,GACFgW,GAAeZ,IAGb/T,KAAKguD,aAAaj6C,GAAtB,CAIA,IAAIs/D,GAAa,EAEjB,GAAa,cAAT10E,GAAiC,eAATA,GAA8C,IAArBoV,EAAEqc,QAAQn5B,OAC7D+I,KAAKowD,eAAiBz5D,SACjB,GAAa,UAATgI,GAA6B,aAATA,GAAgC,gBAATA,EAAwB,CAC5E,IAAKqB,KAAKowD,eACR,OAEA,IAAIC,EAAWrwD,KAAKowD,eAIpB,UAHOpwD,KAAKowD,eACDz5D,IAEA05D,EAAW,KACpB,GAAa,UAAT1xD,GAA6B,gBAATA,EACtB,WAEgB,aAATA,IACT00E,GAAa,GAKnBrzE,KAAKszE,cAActzE,KAAM+T,EAAGpV,GAExB00E,IACErzE,KAAKuzE,YAAc58E,IAAQqJ,KAAKuzE,YAAc,YACzCvzE,KAAKuzE,WAEZvzE,KAAKszE,cAActzE,KAAM+T,EAAG,cAE5B/T,KAAKuzE,WAAa58E,IAElBqJ,KAAKszE,cAActzE,KAAM+T,EAAG,aAIlCi6C,aAAc,SAAsBF,GAClC,IAAKA,IAAa9tD,KAAKqgD,QAAQmzB,QAC7B,OAAO,EAGT,GAAIxzE,KAAKwuD,eAAeV,GACtB,OAAO,EAGT,IACI2lB,EADArsD,EAAS0mC,EAAS4lB,YAAc5lB,EAAS1mC,OAG7C,GAAIA,EACF,KAAOA,GAAUA,IAAWpnB,KAAKmhD,eAAe,CAC9C,GAAI/5B,EAAOpU,WAAaoU,EAAOpU,UAAU/X,UAAYmsB,EAAOpU,UAAU/X,QAAQ,qBAAuB,GAAKmsB,EAAOpU,UAAU/X,QAAQ,gBAAkB,IAAMw4E,EAA6B,mBACtL,OAAO,EAGTA,EAAYrsD,EACZA,EAASA,EAAO3T,WAIpB,OAAO,GAET+6C,eAAgB,SAAwBV,GACtC,GAAI9tD,KAAKq+B,WAAar+B,KAAKuY,QAAwB,eAAG,CACpD,IAEIo7D,EAAWx9D,GAFGnW,KAAKkvD,gBAAgBpB,GAEY9tD,KAAKmhD,eAExD,IAAKnhD,KAAK8qC,qBAAqB/zB,SAAS48D,GACtC,OAAO,EAIX,OAAO,GAETlqB,YAAa,SAAqB11C,EAAGpV,GACnC,IAAKoV,EACH,OAAO,KAGT,IAAI6/D,EAAa,CACf,SAAY7/D,GAGd,GAAa,aAATpV,EAAqB,CACvB,IAAI+xB,EAAS1wB,KAAKkvD,gBAAgBn7C,GAElC,GAAI2c,EAAQ,CACV,IAAIiP,EAAiBxpB,GAAuBua,EAAQ1wB,KAAKmhD,eACzDyyB,EAAa/8E,EAAO+8E,EAAY,CAC9B,WAAc5zE,KAAK4nD,sBAAsBjoB,GACzC,eAAkBA,EAClB,UAAa3/B,KAAK8nD,0BAA0BnoB,GAC5C,QAAW3/B,KAAK0gC,uBAAuBf,MAK7C,OAAOi0C,GAETxxB,qBAAsB,SAA8BjxB,GAClD,IAAIwO,EAAiB3/B,KAAKg5C,sBAAsB7nB,GAQhD,MANQ,CACN,WAAcA,EACd,eAAkBwO,EAClB,UAJc3/B,KAAK8nD,0BAA0BnoB,GAK7C,QAAW3/B,KAAKinD,aAAa91B,KAIjC+9B,gBAAiB,SAAyBn7C,GACxC,OAAOA,EAAEqc,SAAWrc,EAAEqc,QAAQn5B,OAAS,EAAI8c,EAAEqc,QAAQ,GAAKrc,EAAEgd,gBAAkBhd,EAAEgd,eAAe95B,OAAS,EAAI8c,EAAEgd,eAAe,GAAKhd,GAEpIu/D,cAAe,SAAuBlsD,EAAQrT,EAAGpV,GAC/C,IAAIqB,KAAKmpD,YAAT,CAIA,IAAIyqB,EAAa5zE,KAAKypD,YAAY11C,EAAGpV,GAErCqB,KAAKk4C,WAAWv5C,EAAMi1E,OAG1B9zB,GAAMkB,cAAc,sBACpBlB,GAAMtxB,QAAQ,CACZqlD,aAAc,WACZ,SAAUvqE,SAASwqE,oBAAsBxqE,SAASyqE,eAAiBzqE,SAAS0qE,qBAAuB1qE,SAAS2qE,oBAE9GC,kBAAmB,SAA2Bl/D,GAO5C,OANAhV,KAAKk4C,WAAW,mBAEhBl4C,KAAKm0E,mBAAmBn/D,GAAOhV,KAAKmhD,eAEpCnhD,KAAKk4C,WAAW,iBAETl4C,MAETo0E,iBAAkB,WAKhB,OAJAp0E,KAAKq0E,oBAELr0E,KAAKk4C,WAAW,oBAETl4C,MAETm0E,mBAAoB,SAA4Bn/D,GAC9C,GAAIA,EAAIs/D,kBACNt/D,EAAIs/D,yBACC,GAAIt/D,EAAIu/D,qBACbv/D,EAAIu/D,4BACC,GAAIv/D,EAAIw/D,wBACbx/D,EAAIw/D,+BACC,GAAIx/D,EAAIy/D,oBACbz/D,EAAIy/D,0BACC,CACL,IAAIrV,EAAW,mIAA+I5zD,OAAOkpE,WAAa,GAAK,YAAclpE,OAAOmpE,YAAc,IAG3M,OAFFx6E,OAAOue,KAAKk8D,SAAS7tB,KAAM,SAAUqY,KAGhDjlE,OAAO06E,OAAS,KAChB16E,OAAOwoB,WAIb0xD,kBAAmB,WACjB,GAAI/qE,SAASwrE,eACXxrE,SAASwrE,sBACJ,GAAIxrE,SAASyrE,oBAClBzrE,SAASyrE,2BACJ,GAAIzrE,SAAS0rE,uBAClB1rE,SAAS0rE,6BACJ,CAIU,OAFF76E,OAAOue,KAAKk8D,SAAS7tB,KAAM,SADzB,sHAIb5sD,OAAO06E,OAAS,KAChB16E,OAAOwoB,aAKfm9B,GAAMtxB,QAAQ,CACZymD,MAAO,SAAe/tB,EAAY3uC,EAASktC,GAKzC,QAJgB,IAAZltC,IACFA,EAAU,KAGP2uC,EACH,OAAOlnD,KAUT,GAPIjI,EAAWwgB,KACbktC,EAAOltC,EACPA,EAAU,IAGZ2uC,EAAa,IAAIl2B,GAAWk2B,QAEQ,IAAzB3uC,EAAmB,WAAqBA,EAAmB,UAAG,CACvE,IAAIizC,EAAWxrD,KAAK62C,gBAAgBliB,QAAQuyB,GAC5C,OAAOlnD,KAAKk1E,cAAc1pB,EAAUjzC,EAAkB,SAAGktC,GAK3D,OAHEzlD,KAAKgiD,UAAUkF,GAGVlnD,MAETujD,OAAQ,SAAgBiI,EAAUjzC,GAKhC,YAJgB,IAAZA,IACFA,EAAU,SAGwB,IAAzBA,EAAmB,WAAqBA,EAAmB,UAC7DvY,KAAKk1E,cAAc1pB,EAAUjzC,EAAkB,WAEtDvY,KAAKuiC,cAELviC,KAAKmiD,cAAcqJ,GAEnBxrD,KAAKyiC,UAAUziC,KAAKoiD,qBAAqBpiD,KAAKsd,cACvCtd,OAGXuvD,MAAO,SAAel6C,EAAQkD,EAASktC,GAKrC,QAJgB,IAAZltC,IACFA,EAAU,KAGPlD,EACH,OAAOrV,KAYT,GATIjI,EAAWwgB,KACbktC,EAAOltC,EACPA,EAAU,IAGZlD,EAAS,IAAInG,GAAMmG,GACGrV,KAAK8qC,qBACApX,KAEhB,GAAKre,EAAOjI,EAAI,GAAI,CAC7B,IAAIA,EAAIiI,EAAOjI,EACfiI,EAAOjI,EAAI,GACXiI,EAAOrZ,EAAe,GAAXqZ,EAAOrZ,EAASoR,EAC3ByP,QAAQC,KAAK,2DAKf,GAFA9c,KAAKuiC,mBAE+B,IAAzBhqB,EAAmB,WAAqBA,EAAmB,UAAG,CACvElD,EAASA,EAAO5G,OAAO,GAEvB,IAAI2Y,EAASpnB,KAAK0oD,qBAAqB,IAAIx5C,GAAMlP,KAAKqG,MAAQ,EAAIgP,EAAOrZ,EAAGgE,KAAKsG,OAAS,EAAI+O,EAAOjI,IAErGpN,KAAKk1E,cAAc9tD,EAAQ7O,EAAkB,SAAGktC,QAEhDzlD,KAAK6qD,qBAAqBx1C,GAE1BrV,KAAKyiC,UAAUziC,KAAKoiD,qBAAqBpiD,KAAKsd,cAGhD,OAAOtd,MAETk1E,cAAe,SAAuB9tD,EAAQzqB,EAAGmD,GAC/C,OAAOE,KAAK0lD,WAAW,CACrB,UAAat+B,GACZ,CACD,SAAYzqB,GAAKqD,KAAKuY,QAA8B,sBACnDzY,MAIPq3C,GAAS6C,SAAW,SAAUj4C,GAC5B,GAAIzG,MAAMC,QAAQwG,GAAO,CAGvB,IAFA,IAAIrG,EAAS,GAEJ3E,EAAI,EAAG4E,EAAMoG,EAAK9K,OAAQF,EAAI4E,EAAK5E,IAAK,CAC/C,IAAIyM,EAAI2zC,GAAS6C,SAASj4C,EAAKhL,IAE3BuE,MAAMC,QAAQwG,GAChBrG,EAASA,EAAOpF,OAAOkN,GAEvB9H,EAAOZ,KAAK0I,GAIhB,OAAO9H,EAGT,OAAIqG,IAASA,EAAc,QAClBg9D,GAAQC,WAAWj9D,IAKxBA,EAAc,SAChBD,EAAWq1C,GAAStoB,aAAa9sB,EAAc,SAAGi4C,SAASj4C,GAEtD3K,EAAM2K,EAAc,QAAM,KAC7BD,EAAS01C,MAAMz1C,EAAc,QAAM,MAGrCD,EAAWi9D,GAAQC,WAAWj9D,EAAc,SAExCA,EAAc,SAChBD,EAAS+rB,OAAO9rB,EAAc,UAI9BA,EAAa,QACfD,EAASw1C,UAAUv1C,EAAa,QAG9BA,EAAiB,YACnBD,EAASqzE,cAAcpzE,EAAiB,YAGnCD,GAxBP,IAAIA,GA2BN07C,GAAMxD,SAAW,SAAUo7B,GACzB,IAAKA,EACH,OAAO,KAGT,IAAIC,EAAYD,EAAgB,KAC5BpmD,EAAQwuB,GAAM3uB,aAAawmD,GAE/B,IAAKrmD,IAAUA,EAAMgrB,SACnB,MAAM,IAAIh8C,MAAM,0BAA4Bq3E,GAG9C,OAAOrmD,EAAMgrB,SAASo7B,IAGxBt1B,GAAMtxB,QAAQ,CACZ,aAAgB,MAChBvf,OAAQ,SAAgBsJ,GACjBA,IACHA,EAAU,IAGZ,IAAIxW,EAAO,CACT,YAAe/B,KAAmB,aAClC,QAAWA,KAAKkgD,QAChB,OAAUlgD,KAAK44C,YAAY3pC,UAE7BlN,EAAc,QAAI/B,KAAK6tB,SACvB9rB,EAAc,QAAU,OAAI/B,KAAKsd,YACjCvb,EAAc,QAAQ,KAAI/B,KAAKw/B,UAC/Bz9B,EAAc,QAAW,QAAI/B,KAAKmmC,aAClCpkC,EAAc,QAAS,MAAI/B,KAAKq+B,WAChC,IAAI4hB,EAAYjgD,KAAK2lD,gBAEhBvuD,EAAMmhB,EAAmB,YAAMA,EAAmB,YAAM0nC,IAC3Dl+C,EAAgB,UAAIk+C,EAAUhxC,OAAOsJ,EAAmB,YAG1D,IAAI+8D,EAAoB,GAEpB/8D,EAAoB,cACQ,IAA1BA,EAAoB,WACtB+8D,EAA8B,WAAIt1E,KAAK44C,YAEvC08B,EAA8B,WAAI/8D,EAAoB,YAI1D,IAAIg9D,EAAa,GAEjB,GAAIn+E,EAAMmhB,EAAgB,SAAMA,EAAgB,SAAMjd,MAAMC,QAAQgd,EAAgB,QAAI,CAGtF,IAFA,IAAI8lC,EAASr+C,KAAK8lD,YAET/uD,EAAI,EAAG4E,EAAM0iD,EAAOpnD,OAAQF,EAAI4E,EAAK5E,IAC5C,GAAKsnD,EAAOtnD,GAAGkY,OAAf,CAIA,IAAIooC,EAAOxgD,EAAO,GAAIc,EAAS4gB,EAAgB,QAAKA,EAAgB,OAAI,GAAI+8D,GAC5EC,EAAWz6E,KAAKujD,EAAOtnD,GAAGkY,OAAOooC,IAGnCt1C,EAAa,OAAIwzE,OACZ,GAAIv4E,EAAeub,EAAgB,QAAI,CAG5C,IAFA,IAAI6mC,EAAU7mC,EAAgB,OAErB1T,EAAK,EAAGA,EAAKu6C,EAAQnoD,OAAQ4N,IAAM,CAC1C,IAAI2wE,EAAep2B,EAAQv6C,GACvBg4B,EAAQ78B,KAAKyoC,SAAS+sC,EAAiB,IAE3C,GAAK34C,EAAM5tB,OAAX,CAIA,IAAIwmE,EAAQ5+E,EAAO,GAAI2+E,EAAsB,QAAGF,GAEhDC,EAAWz6E,KAAK+hC,EAAM5tB,OAAOwmE,KAG/B1zE,EAAa,OAAIwzE,OAEjBxzE,EAAa,OAAI,GAGnB,OAAOA,KAIX+9C,GAAM9F,SAAW,SAAU5mC,EAAW03D,EAASvyD,GAC7C,IAAKnF,IAAc03D,EACjB,OAAO,KAGJvyD,IACHA,EAAU,IAGZ,IAAI1a,EAAM,IAAIiiD,GAAM1sC,EAAW03D,EAAiB,SAEhD,GAAI1zE,EAAMmhB,EAAmB,YAAMA,EAAmB,UAAG,CACvD,IAAI0nC,EAAYzC,GAAMxD,SAAS8wB,EAAmB,WAE9C7qB,GACFpiD,EAAIijD,aAAab,GAIrB,GAAI7oD,EAAMmhB,EAAgB,SAAMA,EAAgB,OAAG,CAIjD,IAHA,IAAI8lC,EAAS,GACTq3B,EAAa5K,EAAgB,OAExB/zE,EAAI,EAAGA,EAAI2+E,EAAWz+E,OAAQF,IAAK,CAC1C,IAAI8lC,EAAQ2gB,GAAMxD,SAAS07B,EAAW3+E,IACtCsnD,EAAOvjD,KAAK+hC,GAGdh/B,EAAIkgD,SAASM,GAGf,OAAOxgD,GAGTiiD,GAAMtxB,QAAQ,CACZq4C,cAAe,SAAuB8O,EAAQC,GAC5C,IAAK51E,KAAK62C,gBACR,OAAO,KAGT,IAAIr1B,EAAK,IAAIwP,GAAW2kD,GACpBl0D,EAAK,IAAIuP,GAAW4kD,GAExB,OAAIp0D,EAAG3S,OAAO4S,GACL,EAGFzhB,KAAK62C,gBAAgBxf,cAAc7V,EAAIC,IAEhDo0D,sBAAuB,SAA+B/zE,GACpD,OAAOA,EAAS24C,uBAAuBz6C,KAAK62C,kBAE9Ci/B,oBAAqB,SAA6Bh0E,GAChD,OAAOA,EAAS64C,qBAAqB36C,KAAK62C,kBAE5CqZ,SAAU,SAAkB7Y,EAAMljC,GAChC,IAAKkjC,EACH,OAAOr3C,KAGT,IAAI+1E,EAAY1+B,EAAa,OAE7B,IAAKr6C,EAAe+4E,GAClB,OAAO/1E,KAKT,IAFA,IAAIq+C,EAAS,GAEJtnD,EAAI,EAAG4E,EAAMo6E,EAAU9+E,OAAQF,EAAI4E,EAAK5E,IAC3Ca,EAASm+E,EAAUh/E,IACrBsnD,EAAOvjD,KAAKkF,KAAKyoC,SAASstC,EAAUh/E,KAEpCsnD,EAAOvjD,KAAKi7E,EAAUh/E,IAQ1B,IAJA,IAAImwD,EAAa,IAAIl2B,GAAWqmB,EAAiB,YAC7C9+B,EAAU1hB,EAAO,GAAIwgD,GACrBuzB,EAAO,GAEF/lE,EAAKw5C,EAAOpnD,OAAS,EAAG4N,GAAM,KACjCwyC,EAAY,OAAKuzB,EAAK3zE,QAAUogD,EAAY,OADRxyC,IAAM,CAK9C,IAAIg4B,EAAQwhB,EAAOx5C,GAEnB,GAAKg4B,GAAUA,EAAMO,WAAaia,EAAuB,kBAAMxa,EAAMQ,eAAgBga,EAAuB,oBAAKxa,EAAMqG,QAAQjoC,QA9znBzG,+BA8znB2I,IAAjK,CAIA,IAAI+6E,EAAYn5C,EAAMqzB,SAAShJ,EAAY3uC,GAEvCy9D,IACE16E,MAAMC,QAAQy6E,GAChBr7E,EAAOiwE,EAAMoL,GAEbpL,EAAK9vE,KAAKk7E,KAMhB,OADA7hE,EAAS7b,KAAK0H,KAAM4qE,GACb5qE,QAGX8/C,GAAMtxB,QAAQ,CACZmlB,MAAO,SAAeyf,EAAU16B,GACzB14B,KAAKuY,QAAkB,WAAKvY,KAAKu+B,cAItC7F,EAAS14B,KAAKgyD,iBAAiBt5B,GAC/B06B,EAAWpzD,KAAKqzD,WAAWD,GAC3BpzD,KAAKmiC,YAAYixB,EAAU16B,GAC3B14B,KAAKi2E,WAAaj2E,KAAKw/B,UACvBx/B,KAAKqiC,UAAU+wB,EAAU16B,KAE3B2rB,eAAgB,SAAwB+O,EAAU16B,EAAQw9C,GACnDl2E,KAAKuY,QAAkB,WAAKvY,KAAKu+B,cAItC60B,EAAWpzD,KAAKqzD,WAAWD,GAEvBpzD,KAAKw/B,YAAc4zB,IAIvB16B,EAAS14B,KAAKgyD,iBAAiBt5B,GAE/B14B,KAAKm2E,eAAe/iB,EAAU16B,EAAQw9C,MAExClkB,iBAAkB,SAA0Bt5B,GAS1C,OARKA,IAAU14B,KAAKuY,QAAsB,eACxCmgB,EAAS,IAAIxpB,GAAMlP,KAAKqG,MAAQ,EAAGrG,KAAKsG,OAAS,IAG/CtG,KAAKuY,QAAoB,aAC3BmgB,EAAS,IAAIxpB,GAAMlP,KAAKuY,QAAoB,aAGvCmgB,GAETy9C,eAAgB,SAAwB/iB,EAAU16B,EAAQw9C,GACpD9+E,EAAM8+E,KACRA,EAAa,GAGf,IAAIE,EAAWp2E,KAAK6jD,eAAe7jD,KAAKq2E,eAAiBr2E,KAAK6jD,eAAeuP,GAEzE+C,EAAWn2D,KAAKuY,QAA+B,sBAAI/f,KAAK+D,IAAI65E,EAAWF,GAAc19E,KAAK+D,IAAI65E,EAAW,GAC7Gp2E,KAAKi2E,WAAaj2E,KAAKq2E,cAEvBr2E,KAAK0lD,WAAW,CACd,KAAQ0N,EACR,OAAU16B,GACT,CACD,uBAAyB,EACzB,SAAYy9B,KAGhBh0B,YAAa,SAAqBixB,EAAU16B,GACrC14B,KAAKuY,QAAkB,WAAKvY,KAAKu+B,cAIlCv+B,KAAKquD,gBACPruD,KAAKouD,UAAUpuD,KAAKquD,gBAGtBruD,KAAK6kD,UAAW,EAChB7kD,KAAKq2E,cAAgBr2E,KAAKw/B,UAC1Bx/B,KAAKs2E,gBAAkBt2E,KAAK0oD,qBAAqBhwB,GAEjD14B,KAAKk4C,WAAW,YAAa,CAC3B,KAAQl4C,KAAKq2E,cACb,GAAMjjB,MAGVhxB,UAAW,SAAmBgxB,EAAU16B,EAAQw9C,GAC9C,GAAKl2E,KAAKuY,QAAkB,UAIZvY,KAAKi2E,aAEH7iB,EAAlB,CAIIh8D,EAAM8+E,KACRA,EAAa,GAGfl2E,KAAKu2E,QAAQnjB,EAAU16B,GAEvB,IAAI3zB,EAAM/E,KAAKuvC,cAAc6jB,GAEzBt9B,EADU91B,KAAKuvC,cAAcvvC,KAAKq2E,eAChBtxE,EAAMmxE,EACxB7uD,EAAarnB,KAAK4rD,qBAAqB5rD,KAAKs2E,gBAAiBt2E,KAAKq2E,eAElEhhE,EAASrV,KAAK+nD,eAElB,IAAK/nD,KAAKw+B,eAAiBnX,EAAWxY,OAAO6pB,IAAqB,IAAV5C,EAAa,CACnE,IAAIwsB,EAAQtiD,KAAKq+B,WAEbm4C,EAAenvD,EAAWhZ,KAAKqqB,GAAQhqB,OAAO,GAAK,EAAIonB,IAEvDwsB,IACFk0B,EAAappE,GAAK5U,KAAKsX,IAAIwyC,EAAQ9pD,KAAKC,GAAK,MAG/CigC,EAASA,EAAOxqB,IAAIsoE,GAGtB,IAAI5gD,EAAS,CACX,KAAQ,CAACE,EAAO,EAAG,EAAGA,GAAQ4C,EAAO18B,EAAIqZ,EAAOrZ,IAAM,EAAI85B,IAAS4C,EAAOtrB,EAAIiI,EAAOjI,IAAM,EAAI0oB,KAE7FiL,EAAM/gC,KAAKkgC,sBAEH,IAARa,IACFrI,EAASA,EAAOjqB,MAAMsyB,IAGxBnL,EAAkB,UAAI,CAACE,EAAO,EAAG,EAAGA,EAAO4C,EAAO18B,GAAK,EAAI85B,GAAQ4C,EAAOtrB,GAAK,EAAI0oB,IAEnF91B,KAAKk4C,WAAW,UAAW,CACzB,KAAQl4C,KAAKq2E,cACb,GAAMjjB,EACN,OAAU16B,EACV,OAAU9C,IAGZ51B,KAAKi2E,WAAa7iB,IAEpB/wB,UAAW,SAAmB+wB,EAAU16B,GACtC,GAAK14B,KAAKuY,QAAkB,SAA5B,CAIA,IAAIk+D,EAAez2E,KAAKq2E,cAExBr2E,KAAKu2E,QAAQnjB,EAAU16B,GAEvB14B,KAAK6kD,UAAW,EAEhB7kD,KAAKyyC,eAAepQ,YAEpBriC,KAAKk4C,WAAW,UAAW,CACzB,KAAQu+B,EACR,GAAMrjB,IAGHpzD,KAAKkiD,cAAcliD,KAAKsjD,kBAC3BtjD,KAAKujD,OAAOvjD,KAAKwjD,cAAclmC,eAGnCi5D,QAAS,SAAiBnjB,EAAU16B,GAClC14B,KAAKugD,WAAa6S,EAElBpzD,KAAKwqD,gBAED9xB,GACF14B,KAAK6oD,6BAA6B7oD,KAAKs2E,gBAAiB59C,IAG5D26B,WAAY,SAAoBD,GAC9B,IAAIprB,EAAUhoC,KAAKi3C,aACfiH,EAAUl+C,KAAKg3C,aAUnB,OARIoc,EAAWlV,IACbkV,EAAWlV,GAGTkV,EAAWprB,IACborB,EAAWprB,GAGNorB,KA0iBX,IA0WQj6B,GA1HAu9C,GACAC,GA/CApkC,GACAqkC,GACAjB,GAlBAkB,GACAplD,GACAljB,GAhDA9R,GApIJq6E,GAAWt+E,KAAKC,GAAK,IAErBs+E,GAAa,IAAI/lD,GAAW,EAAG,GAkanC,SAASgmD,KACP,OAAOzE,GAAS,IAAIj3E,MAAM,KAla5BwkD,GAAMtxB,QAAQ,CACZm0B,OAAQ,WAKN,OAJK3iD,KAAKi3E,OACRj3E,KAAKi3E,KALO,mBAQPj3E,KAAKi3E,KAAOH,IAErBI,OAAQ,SAAgBx0B,GACtB,GAAI1iD,KAAKu+B,YACP,OAAOv+B,KAIT,GADA0iD,EAAMlqD,KAAKsE,IAAI,IAAMtE,KAAKqE,IAAI,GAAI6lD,IAC9B1iD,KAAKi3E,OAASv0B,EAAK,OAAO1iD,KAC9B,IAAIu5B,EAAOv5B,KAAK2iD,SAYhB,OAXA3iD,KAAKi3E,KAAOv0B,EAAMo0B,GAElB92E,KAAKwqD,gBAELxqD,KAAKm3E,gBAELn3E,KAAKk4C,WAAW,YAAa,CAC3B,KAAQ3e,EACR,GAAMv5B,KAAK2iD,WAGN3iD,MAETmmC,WAAY,WACV,OAAKnmC,KAAKo3E,QAIFp3E,KAAKo3E,OAASN,GAHb,GAKXzxB,WAAY,SAAoB1sB,GAC9B,GAAIjsB,GAAUH,IACZ,MAAM,IAAIvO,MAAM,4BAGlB,IAAItB,GAAKE,EAAK+7B,GAAU,IAAK,KAAOm+C,GACpC,GAAI92E,KAAKo3E,SAAW16E,EAAG,OAAOsD,KAC9B,IAAIu5B,EAAOv5B,KAAKmmC,aAuBhB,OArBAnmC,KAAKk4C,WAAW,cAAe,CAC7B,KAAQ3e,EACR,GAAM78B,IAGRsD,KAAKo3E,OAAS16E,EAEdsD,KAAKwqD,gBAELxqD,KAAKm3E,gBAELn3E,KAAKk4C,WAAW,SAAU,CACxB,KAAQ3e,EACR,GAAM78B,IAGRsD,KAAKk4C,WAAW,YAAa,CAC3B,KAAQ3e,EACR,GAAM78B,IAGDsD,MAETq+B,SAAU,WACR,OAAKr+B,KAAKq3E,OAIHr3E,KAAKq3E,OAAS7+E,KAAKC,GAAK,IAHtB,GAKX2sD,SAAU,SAAkB9C,GAC1B,GAAI51C,GAAUH,IACZ,MAAM,IAAIvO,MAAM,0BAGlB,IAAIxC,EAAIuB,EAAMulD,EAAO,EAAGtiD,KAAKuY,QAAkB,UAAKu+D,GACpD,GAAI92E,KAAKq3E,SAAW77E,EAAG,OAAOwE,KAC9B,IAAIu5B,EAAOv5B,KAAKq+B,WAuBhB,OArBAr+B,KAAKk4C,WAAW,aAAc,CAC5B,KAAQ3e,EACR,GAAM/9B,IAGRwE,KAAKq3E,OAAS77E,EAEdwE,KAAKwqD,gBAELxqD,KAAKm3E,gBAELn3E,KAAKk4C,WAAW,QAAS,CACvB,KAAQ3e,EACR,GAAM/9B,IAGRwE,KAAKk4C,WAAW,WAAY,CAC1B,KAAQ3e,EACR,GAAM/9B,IAGDwE,MAET+nC,eAAgB,WACd,SAAU/nC,KAAKq3E,SAAUr3E,KAAKo3E,SAEhCvkC,mBAAoB,WAClB,OAAO7yC,KAAKs3E,kBAEdC,qBAAsB,WACpB,IAAIj1B,EAAQ,GAAKtiD,KAAKq+B,WAClBqkB,EAAM1iD,KAAK2iD,SAAW,EACtB60B,EAAYx3E,KAAKyxC,eAAiBzxC,KAAKyxC,eAAe,GAAK,EAE/D,GAAIiR,GAAOJ,EACT,OAAOk1B,EAGT90B,EAAMlqD,KAAKC,GAAKiqD,EAAM,IACtB,IAAIyR,EAAK,IAAIjlD,GAAMlP,KAAKyxC,gBAAgB9jC,WAAW,IAAIuB,GAAMlP,KAAKwxC,eAC9D4iB,EAAKojB,EAAYh/E,KAAK0gC,IAAU,EAANwpB,GAE9B,OAAO80B,EADCh/E,KAAK0gC,IAAIwpB,IAAQyR,EAAKC,IAGhCx0B,wBACMnjC,GAAI,CAAC,EAAG,EAAG,GACR,SAAUmR,EAAO7H,EAAMirC,EAAUnd,GAOtC,QANiB,IAAbmd,IACFA,EAAW,GAGbpjC,EAAQ5N,KAAK6mC,cAAcj5B,EAAO7H,EAAM8tB,GAEpC7zB,KAAK+nC,kBAAoBiJ,EAAU,CACrCA,GAAYhxC,KAAK6jD,eAAe99C,GAAQ/F,KAAK6jD,iBAC7C,IAAIjwB,EAAS5zB,KAAK2xC,SAClB6gC,GAAM/1E,GAAGmR,EAAM5R,EAAI43B,EAAQhmB,EAAMR,EAAIwmB,EAAQod,EAAWpd,GAExD,IAAIj3B,EAAIqD,KAAKy3E,oBAAoBh7E,GAAGuD,KAAKyxC,eAAgBzxC,KAAK03E,eAE9DxE,GAAYv2E,EAAGA,EAAGqD,KAAK23E,gBACvB,IAAIC,EAAK53E,KAAKqG,MAAQ,EAClBwxE,EAAK73E,KAAKsG,OAAS,EAIvB,OAHA3J,EAAE,GAAKA,EAAE,GAAKi7E,EAAKA,EACnBj7E,EAAE,IAAOA,EAAE,GAAKk7E,EAAMA,EAElBhkD,GACFA,EAAI73B,EAAIW,EAAE,GACVk3B,EAAIzmB,EAAIzQ,EAAE,GACHk3B,GAGF,IAAI3kB,GAAMvS,EAAE,GAAIA,EAAE,IAEzB,IAAIm7E,EAAc93E,KAAKksC,YAAYlsC,KAAKsjD,qBAAiBxnD,EAAWi7E,IAYpE,OAVIljD,GACFA,EAAI73B,EAAI4R,EAAM5R,EACd63B,EAAIzmB,EAAIQ,EAAMR,GAEdymB,EAAMjmB,EAGRimB,EAAIxlB,KAAKypE,EAAY97E,EAAG87E,EAAY1qE,GAEpCymB,EAAInvB,IAAImvB,EAAI73B,GAAI63B,EAAIzmB,GACbymB,EAAI5lB,KAAKjO,KAAKqG,MAAQ,EAAGrG,KAAKsG,OAAS,KAIpDmxE,qBACMZ,GAAgB,IAAIv7E,MAAM,GAC1Bm2B,GAAO,IAAIn2B,MAAM,GACjBiT,GAAM,IAAIjT,MAAM,GACb,SAAUy8E,EAAUC,EAAWC,GACpCxF,GAASoE,GAAekB,EAAUC,GAClC,IAAIE,EArXV,SAAaz7E,EAAGC,GACd,OAAOD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAAKD,EAAE,GAAKC,EAAE,GAoXvBy7E,CAAIF,EAAYpB,IAOjC,OALIqB,GAAc,IAnXxB,SAAiBrkD,EAAKp3B,EAAGC,GACvBm3B,EAAI,GAAKp3B,EAAE,GAAKC,EAChBm3B,EAAI,GAAKp3B,EAAE,GAAKC,EAChBm3B,EAAI,GAAKp3B,EAAE,GAAKC,EAiXV07E,CAAQ3mD,GAAMwmD,EAAyB,KAAbC,GA7ZlC,SAAarkD,EAAKp3B,EAAGC,GACnBm3B,EAAI,GAAKp3B,EAAE,GAAKC,EAAE,GAClBm3B,EAAI,GAAKp3B,EAAE,GAAKC,EAAE,GAClBm3B,EAAI,GAAKp3B,EAAE,GAAKC,EAAE,GA2ZZwR,CAAI6pE,EAAUC,EAAWvF,GAASlkE,GAAKsoE,GAAeplD,MAGjDsmD,IAGXr3C,wBACM6R,GAAK,CAAC,EAAG,EAAG,GACZqkC,GAAS,CAAC,EAAG,EAAG,EAAG,GACnBjB,GAAS,CAAC,EAAG,EAAG,EAAG,GAChB,SAAUn6E,EAAGuK,EAAM8tB,GACxB,GAAI7zB,KAAK+nC,iBAAkB,CACzB,IAAI6vC,EAAK53E,KAAKqG,MAAQ,GAAK,EACvBwxE,EAAK73E,KAAKsG,OAAS,GAAK,EAC5BksE,GAAMjgC,IAAK/2C,EAAEQ,EAAI47E,GAAMA,GAAKC,EAAKr8E,EAAE4R,GAAKyqE,EAAI,GAC5CrF,GAAMoE,GAAQrkC,GAAG,GAAIA,GAAG,GAAI,GAC5BigC,GAAMmD,GAAQpjC,GAAG,GAAIA,GAAG,GAAI,GAC5BqkC,GAAO,GAAKjB,GAAO,GAAK,EACxBzC,GAAY0D,GAAQA,GAAQ52E,KAAKq4E,uBACjCnF,GAAYyC,GAAQA,GAAQ31E,KAAKq4E,uBACjC,IAAIx5E,EAAK+3E,GAAO,GACZ73E,EAAK42E,GAAO,GACZ72E,EAAK83E,GAAO,GACZ53E,EAAK22E,GAAO,GACZ2C,EAAK1B,GAAO,GACZ2B,EAAK5C,GAAO,GACZh5E,EAAI27E,IAAOC,EAAK,GAAK,EAAID,IAAOC,EAAKD,GAErCE,EAAKh8E,EAAYqC,EAAIE,EAAIpC,GAEzB87E,EAAKj8E,EAAYsC,EAAIE,EAAIrC,GAW7B,OATIk3B,GACFA,EAAI73B,EAAIw8E,EACR3kD,EAAIzmB,EAAIqrE,GAER5kD,EAAM,IAAI3kB,GAAMspE,EAAIC,GAGtB5kD,EAAInlB,OAAO,EAAI1O,KAAK2xC,eAEJ71C,IAATiK,GAAsB/F,KAAKw/B,YAAcz5B,EAAO8tB,EAAM7zB,KAAKurD,oBAAoB13B,EAAK9tB,EAAM8tB,GAGnG,IAAIikD,EAAc93E,KAAKksC,YAAYlsC,KAAKsjD,gBAAiBv9C,EAAM8tB,GAC3D6kD,OAAoB58E,IAATiK,EAAqB/F,KAAK6jD,iBAAmB7jD,KAAK6jD,eAAe99C,GAAQ,EAEpF/J,EAAI08E,GAAYl9E,EAAEQ,EAAIgE,KAAKqG,MAAQ,GACnC+G,EAAIsrE,GAAYl9E,EAAE4R,EAAIpN,KAAKsG,OAAS,GACxC,OAAOwxE,EAAY7pE,KAAKjS,GAAIoR,KAGhCo9C,eACMksB,GAAKM,KACLL,GAAKK,KACF,kBACEh3E,KAAKorD,eACLprD,KAAKqrD,iBACLrrD,KAAKwsD,oBACLxsD,KAAKysD,eACZ,IAAIv8C,EAAOlQ,KAAK40B,UACZztB,EAAI+I,EAAK7J,OAAS,EAClBe,EAAI8I,EAAK5J,QAAU,EACvBtG,KAAK2xC,SAAW3xC,KAAKqwC,aACrB,IAAIiS,EAAQtiD,KAAKq+B,WAAa7lC,KAAKC,GAAK,IAEpCkgF,EAAc34E,KAAK44E,wBAEnBl2B,EAAM1iD,KAAK2iD,SAAWnqD,KAAKC,GAAK,IAEhCogF,EAAO74E,KAAK84E,cAAcp2B,EAAK1iD,KAAKq+B,YAExCr+B,KAAK+4E,UAAYF,EACjB74E,KAAKg5E,WAAaxgF,KAAKsE,IAAIkD,KAAK2xC,SAAW3xC,KAAKuvC,cAAcvvC,KAAK0mC,aAAeluC,KAAKsX,IAAIwyC,GAAQ,IACnG,IAAI22B,EAAaj5E,KAAKi5E,YAAcjC,KACpCjH,GAAYkJ,EAAYv2B,EAAKv7C,EAAIC,EAAGpH,KAAKg5E,WAAYH,GACrD74E,KAAKi5E,WAAaA,EAClBj5E,KAAKk5E,WAAazH,GAAOiF,GAAIiC,GAC7B34E,KAAK23E,eAAiB1G,GAASjxE,KAAK23E,gBAAkBX,KAAciC,EAAYj5E,KAAKk5E,YAErFl5E,KAAKm5E,uBAELn5E,KAAKq4E,sBAAwBpH,GAASjxE,KAAKq4E,uBAAyBrB,KAAc2B,EAAalH,GAAOkF,GAAIsC,IAC1Gj5E,KAAKo5E,aAAep5E,KAAKq5E,iBACzBr5E,KAAKs3E,iBAAmBt3E,KAAKu3E,uBAC7Bv3E,KAAKorD,QAAUprD,KAAK6jD,iBACpB7jD,KAAKqrD,UAAYrrD,KAAK6jD,eAAe7jD,KAAK0mC,aAC1C1mC,KAAKwsD,aAAexsD,KAAKygC,eACzBzgC,KAAKysD,eAAiBzsD,KAAKygC,aAAazgC,KAAK0mC,eAGjDoyC,cAAe,SAAuBp2B,EAAKJ,GACzC,IAAIO,EAAuB7iD,KAAK6iD,qBAAuB1tB,GAASn1B,KAAKyxC,eAAgBzxC,KAAKwxC,cACtFqnC,EAAOh2B,EAEX,GAAIP,EAAQ,EAAG,CAEb,IAAIl1C,EAEJ,GAHAk1C,EAAQA,EAAQ9pD,KAAKC,GAAK,IAGtB,EAAID,KAAKC,GAAK6pD,GAASI,EAAM,EAC/Bt1C,EAAI,EAAIy1C,MACH,CACL,IAAIy2B,EAAS9gF,KAAK0gC,IAAIwpB,EAAM,GAE5Bt1C,EAAIy1C,EAAuBy2B,GAAU,EAD1B9gF,KAAK0gC,IAAIopB,GAC4Bg3B,GAGlDT,GAAQzrE,EAGV,OAAOyrE,EAAO,GAEhBM,qBAAsB,WACpB,IAAIF,EAAajC,KAEjB,SAASuC,EAAIC,EAAUl3B,EAAOzuB,GAC5B,IAAI1sB,EAAInH,KAAKqG,MACTe,EAAIpH,KAAKsG,OACTo8C,EAAM1iD,KAAK2iD,SAAWnqD,KAAKC,GAAK,IAEhCogF,EAAO74E,KAAK84E,cAAcp2B,EAAKJ,GAE/BO,EAAuB7iD,KAAK6iD,qBAChCg2B,EAAOh2B,GAAwBg2B,EAAOh2B,GAAwBrqD,KAAKsX,KAAK,GAAKwyC,GAAS9pD,KAAKC,GAAK,KAAOD,KAAKsX,KAAK,GAAK0pE,GAAYhhF,KAAKC,GAAK,KAC5Is3E,GAAYkJ,EAAYv2B,EAAKv7C,EAAIC,EAAG,GAAKyxE,GACzC,IAAIK,EAAal5E,KAAKk5E,WACtB,OAAOjI,GAASp9C,EAAKolD,EAAYC,GAGnC,OAAO,WACL,IAAI52B,EAAQtiD,KAAKq+B,WACbo7C,EAAgBz5E,KAAKuY,QAAwB,eAAE,GAC/CmhE,EAAgB15E,KAAKuY,QAAwB,eAAE,GAC/CohE,EAAkB35E,KAAK45E,sBAAwB55E,KAAK45E,uBAAyB5C,KAC7E6C,EAAkB75E,KAAK85E,sBAAwB95E,KAAK85E,uBAAyB9C,KAE7E10B,EAAQm3B,EACVF,EAAIjhF,KAAK0H,KAAMsiD,EAAOm3B,EAAeE,GAErC3rE,GAAKhO,KAAK45E,sBAAuB55E,KAAK23E,gBAGpCr1B,EAAQo3B,EACVH,EAAIjhF,KAAK0H,KAAMsiD,EAAOo3B,EAAeG,GAErC7rE,GAAKhO,KAAK85E,sBAAuB95E,KAAK45E,wBAjCtB,GAqCtBP,eAAgB,WACd,IAAIt/C,EAAIi9C,KACJL,EAAKK,KACL+C,EAAS,CAAC,GAAI,EAAG,GACjB3+E,EAAM,CAAC,EAAG,EAAG,GACjB,OAAO,WACL,IAAIiL,EAAQrG,KAAKqG,OAAS,EACtBC,EAAStG,KAAKsG,QAAU,EACxB0zE,EAAyB,GAAMxhF,KAAK0gC,IAAIl5B,KAAKi3E,KAAO,GAAK3wE,EAc7D,OAbAwvB,GAAMiE,EAAG/5B,KAAKi5E,WAAYc,GAC1Bp7D,GAAUob,EAAGA,EAAGy4C,GAAMp3E,EAAK,EAAG,GAAI4+E,IAE9Bh6E,KAAKq3E,QA7xBf,SAAiBxjD,EAAKp3B,EAAGsqB,GACvB,IAAIlhB,EAAIrN,KAAKuX,IAAIgX,GACbvjB,EAAIhL,KAAKsX,IAAIiX,GACb0pD,EAAMh0E,EAAE,GACRi0E,EAAMj0E,EAAE,GACRk0E,EAAMl0E,EAAE,GACRm0E,EAAMn0E,EAAE,GACRo0E,EAAMp0E,EAAE,GACRq0E,EAAMr0E,EAAE,GACRs0E,EAAMt0E,EAAE,IACRu0E,EAAMv0E,EAAE,IAERA,IAAMo3B,IACRA,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,KAGdo3B,EAAI,GAAK48C,EAAMjtE,EAAIqtE,EAAMhrE,EACzBguB,EAAI,GAAK68C,EAAMltE,EAAIstE,EAAMjrE,EACzBguB,EAAI,GAAK88C,EAAMntE,EAAIutE,EAAMlrE,EACzBguB,EAAI,GAAK+8C,EAAMptE,EAAIwtE,EAAMnrE,EACzBguB,EAAI,GAAKg9C,EAAMrtE,EAAIitE,EAAM5qE,EACzBguB,EAAI,GAAKi9C,EAAMttE,EAAIktE,EAAM7qE,EACzBguB,EAAI,IAAMk9C,EAAMvtE,EAAImtE,EAAM9qE,EAC1BguB,EAAI,IAAMm9C,EAAMxtE,EAAIotE,EAAM/qE,EAgwBpBo0E,CAAQlgD,EAAGA,EAAG/5B,KAAKq3E,QAGjBr3E,KAAKo3E,QA/vBf,SAAiBvjD,EAAKp3B,EAAGsqB,GACvB,IAAIlhB,EAAIrN,KAAKuX,IAAIgX,GACbvjB,EAAIhL,KAAKsX,IAAIiX,GACbspD,EAAM5zE,EAAE,GACR6zE,EAAM7zE,EAAE,GACR8zE,EAAM9zE,EAAE,GACR+zE,EAAM/zE,EAAE,GACRg0E,EAAMh0E,EAAE,GACRi0E,EAAMj0E,EAAE,GACRk0E,EAAMl0E,EAAE,GACRm0E,EAAMn0E,EAAE,GAERA,IAAMo3B,IACRA,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,GAAKp3B,EAAE,GACXo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,IACZo3B,EAAI,IAAMp3B,EAAE,KAGdo3B,EAAI,GAAKw8C,EAAM7sE,EAAIitE,EAAM5qE,EACzBguB,EAAI,GAAKy8C,EAAM9sE,EAAIktE,EAAM7qE,EACzBguB,EAAI,GAAK08C,EAAM/sE,EAAImtE,EAAM9qE,EACzBguB,EAAI,GAAK28C,EAAMhtE,EAAIotE,EAAM/qE,EACzBguB,EAAI,GAAK48C,EAAMjtE,EAAI6sE,EAAMxqE,EACzBguB,EAAI,GAAK68C,EAAMltE,EAAI8sE,EAAMzqE,EACzBguB,EAAI,GAAK88C,EAAMntE,EAAI+sE,EAAM1qE,EACzBguB,EAAI,GAAK+8C,EAAMptE,EAAIgtE,EAAM3qE,EAkuBnBq0E,CAAQngD,EAAGA,EAAG/5B,KAAKo3E,QAGrB7E,GAASoE,GACT7gD,GAAM6gD,EAAIA,EAAInE,GAAMp3E,EAAKiL,EAAQ,GAAIC,EAAS,EAAG,IAC1C2qE,GAASjxE,KAAKo5E,cAAgBpC,KAAcL,EAAI58C,IAtB3C,GAyBhB6+C,uBACMz/C,GAAI,GACD,WACL,IAAIghD,EAAUn6E,KAAK0mC,YACfx2B,EAAOlQ,KAAK40B,UACZ8jD,EAAW14E,KAAKqwC,aAEhB+pC,EAAWp6E,KAAKksC,YAAYlsC,KAAK+hD,WAAYo4B,GAEjDn6E,KAAKwxC,aAAeghC,GAAMxyE,KAAKwxC,cAAgB,CAAC,EAAG,EAAG,GAAI4oC,EAASp+E,EAAGo+E,EAAShtE,EAAG,GAClF,IAAIk1C,EAAQtiD,KAAKq+B,WAAay4C,GAC1Bn+C,EAAU34B,KAAKmmC,aAAe2wC,GAE9BrzE,EAAQzD,KAAKq6E,eAEbr0E,EAAI0yE,GAAYxoE,EAAK5J,QAAU,GAAK,EAAI7C,EACxC62E,EAAKt0E,EAAIxN,KAAKsX,IAAIwyC,GAClB/8B,EAAO/sB,KAAKuX,IAAIuyC,GAASt8C,EACzB2f,EAAKy0D,EAASp+E,EAAIupB,EAAO/sB,KAAKuX,IAAI4oB,GAClC/S,EAAKw0D,EAAShtE,EAAImY,EAAO/sB,KAAKsX,IAAI6oB,GACtC34B,KAAKyxC,eAAiB+gC,GAAMxyE,KAAKyxC,gBAAkB,CAAC,EAAG,EAAG,GAAI9rB,EAAIC,EAAI00D,GACtE,IAAI3hF,EAAI4sB,GAAQ,EACZg1D,EAAKv6E,KAAKw6E,SAAWhI,GAAMxyE,KAAKw6E,UAAY,CAAC,EAAG,EAAG,GAAIhiF,KAAKuX,IAAI4oB,GAAWhgC,EAAGH,KAAKsX,IAAI6oB,GAAWhgC,EAAG,GACrGohC,EAAI/5B,KAAKy6E,kBAAoBz6E,KAAKy6E,mBAAqBzD,MAtajE,SAAgB0D,EAAIC,EAAKvzD,EAAQmzD,GAC/B,IAAIv+E,EAAI,CAAC,EAAG,EAAG,GACXoR,EAAI,CAAC,EAAG,EAAG,GACXpH,EAAI,CAAC,EAAG,EAAG,GACfysE,GAASzsE,EAAG20E,EAAKvzD,GAEC,IAAdnwB,GAAO+O,KACTA,EAAE,GAAK,GAGT0sE,GAAU1sE,EAAGA,GACb+kC,GAAM/uC,EAAGu+E,EAAIv0E,GAEK,IAAd/O,GAAO+O,KACe,IAApBxN,KAAK+D,IAAIg+E,EAAG,IACdv0E,EAAE,IAAM,KAERA,EAAE,IAAM,KAGV0sE,GAAU1sE,EAAGA,GACb+kC,GAAM/uC,EAAGu+E,EAAIv0E,IAGf0sE,GAAU12E,EAAGA,GACb+uC,GAAM39B,EAAGpH,EAAGhK,GACZ0+E,EAAG,GAAK1+E,EAAE,GACV0+E,EAAG,GAAKttE,EAAE,GACVstE,EAAG,GAAK10E,EAAE,GACV00E,EAAG,GAAK1+E,EAAE,GACV0+E,EAAG,GAAKttE,EAAE,GACVstE,EAAG,GAAK10E,EAAE,GACV00E,EAAG,GAAK1+E,EAAE,GACV0+E,EAAG,GAAKttE,EAAE,GACVstE,EAAG,IAAM10E,EAAE,GAqYP40E,CAAO7gD,EAAG/5B,KAAKyxC,eAAgBzxC,KAAKwxC,aAAc+oC,GAClD,IAhbe1mD,EAAKh4B,EACpB6+E,EA+aIhD,EAAgB13E,KAAK03E,eAAiB,CAAC,EAAG,EAAG,GAMjD,OALAjF,GAASiF,EAAe13E,KAAKwxC,aAAcxxC,KAAKyxC,gBAChDzxC,KAAK03E,cAAgBhF,GAAUgF,EAAeA,GAjgBpD,SAA4B7jD,EAAK6mD,GAC/B,IAUI70E,EAVAg1E,EAAMH,EAAG,GACTI,EAAMJ,EAAG,GACTK,EAAML,EAAG,GACTM,EAAMN,EAAG,GACTO,EAAMP,EAAG,GACTQ,EAAMR,EAAG,GACTS,EAAMT,EAAG,GACTU,EAAMV,EAAG,GACTW,EAAMX,EAAG,IACTY,EAAQT,EAAMI,EAAMI,EAGpBC,EAAQ,GACVz1E,EAAI,GAAMrN,KAAKqV,KAAKytE,EAAQ,GAC5BznD,EAAI1sB,EAAI,IAAOtB,EACfguB,EAAI73B,GAAKo/E,EAAMF,GAAOr1E,EACtBguB,EAAIzmB,GAAK2tE,EAAMI,GAAOt1E,EACtBguB,EAAI7tB,GAAKg1E,EAAMF,GAAOj1E,GACbg1E,EAAMI,GAAOJ,EAAMQ,GAC5Bx1E,EAAI,EAAMrN,KAAKqV,KAAK,EAAMgtE,EAAMI,EAAMI,GACtCxnD,EAAI1sB,GAAKi0E,EAAMF,GAAOr1E,EACtBguB,EAAI73B,EAAI,IAAO6J,EACfguB,EAAIzmB,GAAK0tE,EAAME,GAAOn1E,EACtBguB,EAAI7tB,GAAK+0E,EAAMI,GAAOt1E,GACbo1E,EAAMI,GACfx1E,EAAI,EAAMrN,KAAKqV,KAAK,EAAMotE,EAAMJ,EAAMQ,GACtCxnD,EAAI1sB,GAAK4zE,EAAMI,GAAOt1E,EACtBguB,EAAI73B,GAAK8+E,EAAME,GAAOn1E,EACtBguB,EAAIzmB,EAAI,IAAOvH,EACfguB,EAAI7tB,GAAKk1E,EAAME,GAAOv1E,IAEtBA,EAAI,EAAMrN,KAAKqV,KAAK,EAAMwtE,EAAMR,EAAMI,GACtCpnD,EAAI1sB,GAAK6zE,EAAMF,GAAOj1E,EACtBguB,EAAI73B,GAAK++E,EAAMI,GAAOt1E,EACtBguB,EAAIzmB,GAAK8tE,EAAME,GAAOv1E,EACtBguB,EAAI7tB,EAAI,IAAOH,GA8db01E,CAAmBpiD,GAAGY,GAxd5B,SAA4BlG,EAAKsF,GAC/B,IAAIuhD,EAAK7mD,EACL73B,EAAIm9B,EAAEn9B,EACNoR,EAAI+rB,EAAE/rB,EACNpH,EAAImzB,EAAEnzB,EACNmB,EAAIgyB,EAAEhyB,EACN+W,EAAKliB,EAAIA,EACTmiB,EAAK/Q,EAAIA,EACTouE,EAAKx1E,EAAIA,EACTy1E,EAAKz/E,EAAIkiB,EACTw9D,EAAK1/E,EAAImiB,EACTw9D,EAAK3/E,EAAIw/E,EACTI,EAAKxuE,EAAI+Q,EACT09D,EAAKzuE,EAAIouE,EACTM,EAAK91E,EAAIw1E,EACTO,EAAK50E,EAAI+W,EACT89D,EAAK70E,EAAIgX,EACT89D,EAAK90E,EAAIq0E,EACbd,EAAG,GAAK,GAAKkB,EAAKE,GAClBpB,EAAG,GAAKgB,EAAKO,EACbvB,EAAG,GAAKiB,EAAKK,EACbtB,EAAG,GAAKgB,EAAKO,EACbvB,EAAG,GAAK,GAAKe,EAAKK,GAClBpB,EAAG,GAAKmB,EAAKE,EACbrB,EAAG,GAAKiB,EAAKK,EACbtB,EAAG,GAAKmB,EAAKE,EACbrB,EAAG,IAAM,GAAKe,EAAKG,GACnBlB,EAAG,GAAK,EACRA,EAAG,GAAK,EACRA,EAAG,IAAM,EACTA,EAAG,IAAM,EACTA,EAAG,IAAM,EACTA,EAAG,IAAM,EACTA,EAAG,IAAM,EAwbLwB,CAAmBniD,EAAGZ,IApbPtF,EAqbHkG,EArbQl+B,EAqbLmE,KAAKyxC,gBApbpBipC,EAAK7mD,GACN,IAAMh4B,EAAE,GACX6+E,EAAG,IAAM7+E,EAAE,GACX6+E,EAAG,IAAM7+E,EAAE,GAkbAk+B,IAGXsgD,aAAc,WACZ,IAAI33B,EAAM1iD,KAAK2iD,SACf,OAAOnqD,KAAK0gC,IAAIwpB,EAAM,EAAIo0B,KAE5BK,cAAe,WACTn3E,KAAKg+B,iBAIIh+B,KAAK+lD,aAEXtoC,SAAQ,SAAUof,GACvB,GAAKA,EAAL,CAIA,IAAI0Q,EAAW1Q,EAAM4V,eAEjBlF,GAAYA,EAASvQ,aACvBuQ,EAASvQ,qBAUjB8iB,GAAMtxB,QAAQ,CACZ2tD,cAAe,SAAuB39E,GAC/BwB,KAAKo8E,eACRp8E,KAAKo8E,aAAe,GACpBp8E,KAAKq8E,oBAAsB,GAK7B,IAFA,IAAI36C,EAAM1hC,KAAKs8E,kBAENvlF,EAAIiJ,KAAKo8E,aAAanlF,OAAS,EAAGF,GAAK,EAAGA,IACjD,GAAIsI,EAAab,EAAMwB,KAAKo8E,aAAarlF,IAKvC,OAJAiJ,KAAKq8E,oBAAsBtlF,OAE3BiJ,KAAKu8E,gBAAgB76C,EAAKljC,GAM1BwB,KAAKq8E,oBAAsBr8E,KAAKo8E,aAAanlF,OAAS,GACxD+I,KAAKo8E,aAAalhF,OAAO8E,KAAKq8E,oBAAsB,GAGtDr8E,KAAKo8E,aAAathF,KAAK0D,GAEvB,IAAIqB,EAAQG,KAAKuY,QAA0B,iBAEvC1Y,EAAQ,GAAKG,KAAKo8E,aAAanlF,OAAS4I,GAC1CG,KAAKo8E,aAAalhF,OAAO,EAAG8E,KAAKo8E,aAAanlF,OAAS4I,GAGzDG,KAAKq8E,oBAAsBr8E,KAAKo8E,aAAanlF,OAAS,EAEtD+I,KAAKu8E,gBAAgB76C,EAAKljC,IAE5Bg+E,mBAAoB,SAA4BjkE,GAK9C,QAJgB,IAAZA,IACFA,EAAU,KAGPvY,KAAKy8E,kBACR,OAAO,KAGT,IAAIj+E,EAAOwB,KAAKo8E,eAAep8E,KAAKq8E,qBAIpC,OAFAr8E,KAAK08E,YAAYl+E,EAAM+Z,GAEhB/Z,GAETi+E,gBAAiB,WACf,SAAKz8E,KAAKo8E,cAA6C,IAA7Bp8E,KAAKq8E,sBAMjCM,eAAgB,SAAwBpkE,GAKtC,QAJgB,IAAZA,IACFA,EAAU,KAGPvY,KAAK48E,cACR,OAAO,KAGT,IAAIp+E,EAAOwB,KAAKo8E,eAAep8E,KAAKq8E,qBAIpC,OAFAr8E,KAAK08E,YAAYl+E,EAAM+Z,GAEhB/Z,GAETo+E,YAAa,WACX,SAAK58E,KAAKo8E,cAAgBp8E,KAAKq8E,sBAAwBr8E,KAAKo8E,aAAanlF,OAAS,IAMpFylF,YAAa,SAAqBl+E,EAAM+Z,GACtC,IAAIwX,EAAQ/vB,KAER0hC,EAAM1hC,KAAKklD,UAEX3sC,EAAmB,UACrBvY,KAAK0lD,WAAWlnD,EAAM,CACpB,SAAY+Z,EAAkB,WAC7B,SAAUi7C,GACmB,aAA1BA,EAAM/pC,MAAMgqC,WACd1jC,EAAMwsD,gBAAgB76C,EAAKljC,OAI/BwB,KAAKmlD,QAAQ3mD,GAEbwB,KAAKu8E,gBAAgB76C,EAAKljC,KAG9Bq+E,eAAgB,WACd,OAAO78E,KAAKo8E,cAEdG,gBAAiB,SAAyB76C,EAAKljC,GAC7CwB,KAAKk4C,WAAW,aAAc,CAC5B,IAAOxW,EACP,IAAOljC,KAGX89E,gBAAiB,WACf,OAAKt8E,KAAKo8E,aAIHp8E,KAAKo8E,aAAap8E,KAAKq8E,qBAHrB,QAMbv8B,GAAMrxB,aAAa,CACjB,aAAe,EACf,iBAAoB,KAEtB,IAmDIquD,GAAe,SAAUC,GAG3B,SAASD,EAAavkE,GACpB,IAAIwX,EAOJ,OALAA,EAAQgtD,EAAUzkF,KAAK0H,KAAMuY,IAAYvY,MAEnCgY,GAAG,SAAU+X,EAAMitD,aAAchwE,GAAuBA,GAAuB+iB,KAAS/X,GAAG,UAAW+X,EAAMktD,cAAejwE,GAAuBA,GAAuB+iB,KAE/KA,EAAMmtD,eAAiB,GAChBntD,EAVTpjB,GAAemwE,EAAcC,GAa7B,IAAIzvE,EAASwvE,EAAa3kF,UAsS1B,OApSAmV,EAAOuyB,MAAQ,WACb,GAAI7iC,EAAegD,KAAKk9E,gBACtB,IAAK,IAAInmF,EAAI,EAAGA,EAAIiJ,KAAKk9E,eAAejmF,OAAQF,IAC9CiJ,KAAKk9E,eAAenmF,GAAGu2B,SAO3B,cAHOttB,KAAKm9E,oBACLn9E,KAAKo9E,YACZp9E,KAAKk9E,eAAiB,GACfl9E,MAGTsN,EAAO+vE,iBAAmB,WACxB,OAAOr9E,KAAKk9E,gBAGd5vE,EAAOgwE,eAAiB,WACtB,OAAKt9E,KAAKm9E,aAIHn9E,KAAKm9E,aAHH,GAMX7vE,EAAO6/D,KAAO,WACZ4P,EAAU5kF,UAAUg1E,KAAK70E,KAAK0H,MAE9B,IAAIqK,EAAUrK,KAAKutE,gBAEnB,GAAIljE,IAAYrK,KAAKu9E,UAAUtmF,OAC7B,IAAK,IAAIF,EAAIsT,EAAStT,EAAIiJ,KAAKu9E,UAAUtmF,OAAQF,IAC3CiJ,KAAKu9E,UAAUxmF,GAAGyuE,OACpBxlE,KAAKu9E,UAAUxmF,GAAGyuE,MAAMl4C,SAG1BttB,KAAKu9E,UAAUxmF,GAAGymF,OAAOlwD,SAI7B,OAAOttB,MAGTsN,EAAOogE,KAAO,WACZqP,EAAU5kF,UAAUu1E,KAAKp1E,KAAK0H,MAE9B,IAAIjJ,EAAIiJ,KAAKutE,gBAAkB,EAY/B,OAVIvtE,KAAKu9E,UAAUxmF,KACZiJ,KAAKu9E,UAAUxmF,GAAGymF,OAAO/0C,aACxBzoC,KAAKu9E,UAAUxmF,GAAGyuE,OACpBxlE,KAAKu9E,UAAUxmF,GAAGyuE,MAAM5tB,MAAM53C,KAAKy9E,qBAGrCz9E,KAAKu9E,UAAUxmF,GAAGymF,OAAO5lC,MAAM53C,KAAKy9E,uBAIjCz9E,MAGTsN,EAAOowE,SAAW,SAAkBC,GAClC,IACI1mF,EASA2mF,EAVA//E,EAAMmC,KAAKo9B,SAGXugD,aAAqBxmC,GACvBlgD,EAAS4G,EAAIg4E,sBAAsB8H,GAC1BriF,MAAMC,QAAQoiF,KACvB1mF,EAAS4G,EAAIg5C,gBAAgBxf,cAAcsmD,IAG7C39E,KAAKm9E,aAAelmF,EAIlB2mF,EAD+B,UAA7B59E,KAAKuY,QAAkB,SACjB,CAAC,KAAM,MAAO,MAAO,OAErB,CAAC,KAAM,MAAO,QAAS,SAGjC,IAAItH,EAAU,GAgBd,OAdIjR,KAAKuY,QAAgB,SACvBtH,GAAWha,EAAS,IAAOA,EAAO+X,QAAQ,GAAK4uE,EAAM,IAAM3mF,EAAS,KAAM+X,QAAQ,GAAK4uE,EAAM,IAG3F59E,KAAKuY,QAAkB,WACzBthB,GAAU,UAENga,EAAQha,OAAS,IACnBga,GAAW,MAGbA,GAAWha,EAAS,KAAOA,EAAO+X,QAAQ,GAAK4uE,EAAM,IAAM3mF,EAAS,MAAM+X,QAAQ,GAAK4uE,EAAM,IAGxF3sE,GAGT3D,EAAOuwE,uBAAyB,WAC9B79E,KAAKgY,GAAG,YAAahY,KAAK89E,eAAgB99E,MAAMgY,GAAG,aAAchY,KAAK+9E,gBAAiB/9E,MAAMgY,GAAG,YAAahY,KAAKg+E,eAAgBh+E,MAAMgY,GAAG,UAAWhY,KAAKi+E,aAAcj+E,OAG3KsN,EAAO0vE,aAAe,WACpBh9E,KAAK69E,0BAGPvwE,EAAO2vE,cAAgB,WACrBj9E,KAAKiY,IAAI,YAAajY,KAAK89E,eAAgB99E,MAAMiY,IAAI,aAAcjY,KAAK+9E,gBAAiB/9E,MAAMiY,IAAI,YAAajY,KAAKg+E,eAAgBh+E,MAAMiY,IAAI,UAAWjY,KAAKi+E,aAAcj+E,OAG/KsN,EAAOwwE,eAAiB,SAAwBnxD,GAC9C,IAAI9uB,EAAMmC,KAAKo9B,SAEXouB,EAAW3tD,EAAIqlD,YAAYv2B,EAAe,SAE1CtyB,EAAMC,IACN4jF,EAAU,gBAAkB7jF,EAC5B8jF,EAAgB,wBAA0B9jF,EAEzCwD,EAAI4qC,SAASy1C,IAIhBl+E,KAAKo+E,kBAAoBvgF,EAAI4qC,SAASy1C,GACtCl+E,KAAKy9E,oBAAsB5/E,EAAI4qC,SAAS01C,KAJxCn+E,KAAKo+E,kBAAoB,IAAI3T,GAAYyT,GAAStmC,MAAM/5C,GACxDmC,KAAKy9E,oBAAsB,IAAIhT,GAAY0T,GAAevmC,MAAM/5C,IAMlEmC,KAAKk9E,eAAepiF,KAAKkF,KAAKo+E,mBAE9Bp+E,KAAKk9E,eAAepiF,KAAKkF,KAAKy9E,qBAE9B,IAAID,EAAS,IAAI9gB,GAAO/vC,EAAkB,WAAG,CAC3C,OAAU3sB,KAAKuY,QAAsB,eAGvCilE,EAAO1jB,mBAAmBtO,GAE1B,IAAIv6C,EAAuC,UAA7BjR,KAAKuY,QAAkB,SAAgB,KAAO,QACxD8lE,EAAa,IAAIjZ,GAAMn0D,EAAS0b,EAAkB,WAAG3sB,KAAKuY,QAAsB,cAEpF8lE,EAAWvkB,mBAAmBtO,GAE9BxrD,KAAKo9E,YAAciB,EAEnBr+E,KAAKs+E,iBAAiBd,EAAQa,IAGhC/wE,EAAO0wE,eAAiB,SAAwBrxD,GAC9C,IAAI4xD,EAAKv+E,KAAK09E,SAAS19E,KAAKw+E,sBAAsB7xD,IAElD,IAAK3sB,KAAKy+E,YAAa,CACrB,IAAIr4E,EAAS6B,GAAajI,KAAKuY,QAAsB,cACrDnS,EAAoB,aAAK,EACzBA,EAAqB,cAAK,EAC1BpG,KAAKy+E,YAAc,IAAI/hB,GAAO/vC,EAAkB,WAAG,CACjD,OAAUvmB,IACTwxC,MAAM53C,KAAKy9E,qBACdz9E,KAAK0+E,WAAa,IAAItZ,GAAMmZ,EAAI5xD,EAAkB,WAAG3sB,KAAKuY,QAAsB,cAAGq/B,MAAM53C,KAAKy9E,qBAGhG,IAAIjkB,EAAYx5D,KAAKwsE,UAAUzR,qBAE3BpB,EAAYH,EAAUA,EAAUviE,OAAS,GAE7C+I,KAAKy+E,YAAY3kC,eAAentB,EAAkB,YAElD3sB,KAAKy+E,YAAY3kB,mBAAmBH,GAEpC35D,KAAK0+E,WAAW9a,WAAW2a,GAE3Bv+E,KAAK0+E,WAAW5kC,eAAentB,EAAkB,YAEjD3sB,KAAK0+E,WAAW5kB,mBAAmBH,IAGrCrsD,EAAOkxE,sBAAwB,SAA+B7xD,GAC5D,OAAOA,EAAgB,SAAE+qB,iBAAiBphD,OAAO,CAACq2B,EAAkB,cAGtErf,EAAOywE,gBAAkB,SAAyBpxD,GAChD,IAAI6sC,EAAYx5D,KAAKwsE,UAAUzR,qBAE3BpB,EAAYH,EAAUA,EAAUviE,OAAS,GACzC6K,EAAW6qB,EAAgB,SAC3B6wD,EAAS,IAAI9gB,GAAO/vC,EAAkB,WAAG,CAC3C,OAAU3sB,KAAKuY,QAAsB,eAGnCthB,EAAS+I,KAAK09E,SAAS57E,GAEvB68E,EAAc,IAAIvZ,GAAMnuE,EAAQ01B,EAAkB,WAAG3sB,KAAKuY,QAAsB,cAEpFvY,KAAKs+E,iBAAiBd,EAAQmB,GAE9BA,EAAY7kB,mBAAmBH,GAE/B6jB,EAAO1jB,mBAAmBH,GAE1B35D,KAAKo9E,YAAcuB,GAGrBrxE,EAAOgxE,iBAAmB,SAA0Bd,EAAQmB,GACrD3+E,KAAKu9E,YACRv9E,KAAKu9E,UAAY,IAGnBv9E,KAAKu9E,UAAUziF,KAAK,CAClB0qE,MAAOmZ,EACPnB,OAAQA,SAGmB1hF,IAAzBkE,KAAKutE,kBACPvtE,KAAKu9E,UAAUtmF,OAAS+I,KAAKutE,iBAG/BvtE,KAAKy9E,oBAAoB3lC,YAAY0lC,GAEjCmB,GACF3+E,KAAKy9E,oBAAoB3lC,YAAY6mC,IAIzCrxE,EAAO2wE,aAAe,SAAsBtxD,GAC1C3sB,KAAK4+E,mBAEL,IAAI1uE,EAAOlQ,KAAKo9E,YAAYxoD,UAEvB1kB,IACHA,EAAO,IAAID,GAAK,GAAI,KAGtBjQ,KAAK6+E,gBAAgB7+E,KAAKo9E,YAAY1lC,iBAAkB13C,KAAKo9E,YAAYriB,qBAAsB7qD,EAAY,OAE3G,IAAI0gD,EAAMjkC,EAAgB,SAAE3e,OAE5B4iD,EAAIkJ,mBAAmBntC,EAAgB,SAAEouC,sBAEzCnK,EAAIhZ,MAAM53C,KAAKo+E,mBACfp+E,KAAKm9E,aAAevsB,EAAIpW,aAG1BltC,EAAOuxE,gBAAkB,SAAyB3tD,EAAas6B,EAAUvsD,GACvE,IAAImH,EAASpG,KAAKuY,QAA2B,kBACzCumE,EAAW,CACb,UAAa14E,EAAiB,UAAK,GAAKnH,EACxC,QAAWmH,EAAe,QAAK,GAAKnH,GAGlC3D,MAAMC,QAAQ6K,KAChB04E,EAAW14E,EAAOvI,KAAI,SAAUgI,GAC9B,OAAIA,EACK,CACL,UAAaA,EAAY,UAAK,GAAK5G,EACnC,QAAW4G,EAAU,QAAK,GAAK5G,GAI5B,SAIXmH,EAAS6B,GAAa7B,EAAQ04E,GAC9B,IAAIC,EAAY,IAAIriB,GAAOxrC,EAAa,CACtC,OAAU9qB,IAER44E,EAAmBh/E,KAAKo+E,kBACxBa,EAAqBj/E,KAAKy9E,oBAC9BsB,EAAU/mE,GAAG,SAAS,WAGpB,OAFAgnE,EAAiB1xD,SACjB2xD,EAAmB3xD,UACZ,IACNttB,MACH++E,EAAUnnC,MAAM53C,KAAKy9E,qBAErBsB,EAAUjlB,mBAAmBtO,IAG/Bl+C,EAAOsxE,iBAAmB,WACpB5+E,KAAKy+E,cACPz+E,KAAKy+E,YAAYnxD,gBAEVttB,KAAKy+E,aAGVz+E,KAAK0+E,aACP1+E,KAAK0+E,WAAWpxD,gBAETttB,KAAK0+E,aAIT5B,EApTU,CAqTjBpR,IAEFoR,GAAaruD,aA1WG,CACd,KAAQ,aACR,SAAY,QACZ,QAAU,EACV,UAAY,EACZ,OAAU,CACR,UAAa,OACb,UAAa,EACb,YAAe,GAEjB,aAAgB,CACd,WAAc,UACd,WAAc,OACd,gBAAmB,OACnB,gBAAmB,EACnB,YAAe,GACf,aAAgB,IAElB,aAAgB,CACd,WAAc,CACZ,aAAgB,YAChB,gBAAmB,EACnB,wBAA2B,QAC3B,OAAU,IAEZ,SAAY,CACV,QAAW,CAAC,EAAG,GACf,OAAU,CACR,WAAc,SACd,WAAc,OACd,kBAAqB,GACrB,gBAAmB,aAIzB,kBAAqB,CAAC,CACpB,WAAc,SACd,WAAc,OACd,gBAAmB,UACnB,gBAAmB,EACnB,YAAe,GACf,aAAgB,GAChB,SAAY,IACX,CACD,WAAc,IACd,YAAe,GACf,aAAgB,GAChB,SAAY,QAwUD,SAAUywD,GAGvB,SAASC,EAAS5mE,GAChB,IAAIwX,EAOJ,OALAA,EAAQmvD,EAAc5mF,KAAK0H,KAAMuY,IAAYvY,MAEvCgY,GAAG,SAAU+X,EAAMitD,aAAchwE,GAAuBA,GAAuB+iB,KAAS/X,GAAG,UAAW+X,EAAMktD,cAAejwE,GAAuBA,GAAuB+iB,KAE/KA,EAAMmtD,eAAiB,GAChBntD,EAVTpjB,GAAewyE,EAAUD,GAazB,IAAI5xE,EAAS6xE,EAAShnF,UAwFtB,OAtFAmV,EAAOowE,SAAW,SAAkBC,GAClC,IACIhmD,EASAimD,EAVA//E,EAAMmC,KAAKo9B,SAGXugD,aAAqBxmC,GACvBxf,EAAO95B,EAAIi4E,oBAAoB6H,GACtBriF,MAAMC,QAAQoiF,KACvBhmD,EAAO95B,EAAIg5C,gBAAgBnf,YAAYimD,IAGzC39E,KAAKm9E,aAAexlD,EAIlBimD,EAD+B,UAA7B59E,KAAKuY,QAAkB,SACjB,CAAC,OAAQ,QAAS,QAAS,SAE3B,CAAC,QAAS,SAAU,SAAU,UAGxC,IAAItH,EAAU,GAMd,GAJIjR,KAAKuY,QAAgB,SACvBtH,GAAW0mB,EAAO,IAAMA,EAAK3oB,QAAQ,GAAK4uE,EAAM,IAAMjmD,EAAO,KAAK3oB,QAAQ,GAAK4uE,EAAM,IAGnF59E,KAAKuY,QAAkB,SAAG,CAC5Bof,GAAQ,UAEJ1mB,EAAQha,OAAS,IACnBga,GAAW,MAIbA,GAAW0mB,EADA,SACcA,EAAK3oB,QAAQ,GAAK4uE,EAAM,IAAMjmD,EAD5C,UACyD3oB,QAAQ,GAAK4uE,EAAM,GAGzF,OAAO3sE,GAGT3D,EAAOkxE,sBAAwB,SAA+B7xD,GAC5D,OAAOA,EAAgB,SAAEilB,WAAWt7C,OAAO,CAACq2B,EAAkB,cAGhErf,EAAOywE,gBAAkB,SAAyBpxD,GAChD,IAAI6+B,EAAWxrD,KAAKo9B,SAAS8lB,YAAYv2B,EAAe,SAEpDyyD,EAAe,IAAI1iB,GAAO/vC,EAAkB,WAAG,CACjD,OAAU3sB,KAAKuY,QAAsB,eAGvC6mE,EAAatlB,mBAAmBtO,GAEhCxrD,KAAK09E,SAAS/wD,EAAgB,UAE9B3sB,KAAKo9E,YAAcgC,EAEnBp/E,KAAKs+E,iBAAiBc,IAGxB9xE,EAAO2wE,aAAe,SAAsBtxD,GAC1C3sB,KAAK4+E,mBAEL,IAAIpzB,EAAWxrD,KAAKo9B,SAAS8lB,YAAYv2B,EAAe,SAEpD4xD,EAAKv+E,KAAK09E,SAAS/wD,EAAgB,UAEnC0yD,EAAW,IAAIja,GAAMmZ,EAAI5xD,EAAkB,WAAG3sB,KAAKuY,QAAsB,cAAGq/B,MAAM53C,KAAKy9E,qBAE3F4B,EAASvlB,mBAAmBtO,GAE5B,IAAIt7C,EAAOmvE,EAASzqD,UAEf1kB,IACHA,EAAO,IAAID,GAAK,GAAI,KAGtBjQ,KAAK6+E,gBAAgBlyD,EAAkB,WAAG6+B,EAAUt7C,EAAY,OAEhE,IAAI0gD,EAAMjkC,EAAgB,SAAE3e,OAE5B4iD,EAAIkJ,mBAAmBntC,EAAgB,SAAEouC,sBAEzCnK,EAAIhZ,MAAM53C,KAAKo+E,mBACfp+E,KAAKm9E,aAAevsB,EAAIlW,WAGnBykC,GAtGM,CAuGbrC,IAEOruD,aArHO,CACd,KAAQ,UACR,OAAU,CACR,UAAa,UACb,UAAa,EACb,YAAe,EACf,cAAiB,GACjB,YAAe,UACf,eAAkB,MA8GtB,IAAI6wD,GAAc,CAChB,OAAU,SAAgBjsD,EAAYm4B,GACpC,IAAI1mB,EAASzR,EAAWD,UAAUo4B,EAAS,IACvCkU,EAAS,IAAIF,GAAO16B,EAAQ,GAIhC,OAFA46B,EAAO5F,mBAAmBtO,EAAS,IAE5BkU,GAET,OAAU,SAAgBrsC,EAAYksD,EAASz9E,GAC7C,IAAIjE,EAAMiE,EAASs7B,SACfouB,EAAWlwD,MAAMC,QAAQgkF,GAAWA,EAAQA,EAAQtoF,OAAS,GAAKsoF,EAClEC,EAAYnsD,EAAWD,UAAUo4B,GACjCxkC,EAASnpB,EAAIgpE,cAAc/kE,EAASwb,YAAakiE,GACrD19E,EAAS89D,UAAU54C,IAErB,SAAY,SAAkBllB,GAC5B,OAAOA,IAGX4pE,GAASS,aAAa,SAAUt1E,EAAO,CACrC,WAAc,EACd,OAAU,CAAC,QAAS,YAAa,UAChCyoF,KACH5T,GAASS,aAAa,iBAAkBt1E,EAAO,CAC7C,OAAU,CAAC,YAAa,YAAa,YACpCyoF,KACH,IAAIG,GAAe,CACjB,OAAU,SAAgBpsD,EAAYm4B,GACpC,IAAI1mB,EAASzR,EAAWD,UAAUo4B,EAAS,IACvCnlC,EAAU,IAAIi6C,GAAQx7B,EAAQ,EAAG,GAIrC,OAFAze,EAAQyzC,mBAAmBtO,EAAS,IAE7BnlC,GAET,OAAU,SAAgBgN,EAAYksD,EAASz9E,GAC7C,IAAIjE,EAAMiE,EAASs7B,SACf0H,EAAShjC,EAASwb,YAClBkuC,EAAWlwD,MAAMC,QAAQgkF,GAAWA,EAAQA,EAAQtoF,OAAS,GAAKsoF,EAClEC,EAAYnsD,EAAWD,UAAUo4B,GACjCrzB,EAAKt6B,EAAIgpE,cAAc/hC,EAAQ,IAAI9T,GAAW,CAChDh1B,EAAGwjF,EAAUxjF,EACboR,EAAG03B,EAAO13B,KAER8qB,EAAKr6B,EAAIgpE,cAAc/hC,EAAQ,IAAI9T,GAAW,CAChDh1B,EAAG8oC,EAAO9oC,EACVoR,EAAGoyE,EAAUpyE,KAEftL,EAASy+D,SAAc,EAALpoC,GAClBr2B,EAAS0+D,UAAe,EAALtoC,IAErB,SAAY,SAAkBp2B,GAC5B,OAAOA,IAGX4pE,GAASS,aAAa,UAAWt1E,EAAO,CACtC,WAAc,EACd,OAAU,CAAC,QAAS,YAAa,UAChC4oF,KACH/T,GAASS,aAAa,kBAAmBt1E,EAAO,CAC9C,OAAU,CAAC,YAAa,YAAa,YACpC4oF,KACH,IAAIC,GAAiB,CACnB,OAAU,SAAgBrsD,EAAYmmC,GACpC,IAAI5jD,EAAO,IAAI8iD,GAAQ,IAEvB,OADA9iD,EAAK+pE,YAAcnmB,EAAU,GACtB5jD,GAET,OAAU,SAAgByd,EAAYmmC,EAAW13D,EAAU6qB,GACzD,IAAI9uB,EAAMiE,EAASs7B,SACfuC,EAAiBhT,EAAsB,eAEvCizD,EAAa/hF,EAAI+tD,qBAAqB9pD,EAAS69E,aAE/Cn9D,EAAO,CAAC,CAACo9D,EAAW5jF,EAAG4jF,EAAWxyE,GAAI,CAACuyB,EAAe3jC,EAAG4jF,EAAWxyE,GAAI,CAACuyB,EAAe3jC,EAAG2jC,EAAevyB,GAAI,CAACwyE,EAAW5jF,EAAG2jC,EAAevyB,IAChJtL,EAASg4C,eAAet3B,EAAK3kB,KAAI,SAAU2F,GACzC,OAAO3F,EAAI+pD,sBAAsB,IAAI14C,GAAM1L,QAG7C1B,EAASg4D,mBAAmBt3C,EAAK3kB,KAAI,SAAU2F,GAC7C,OAAO3F,EAAI6qD,qBAAqB,IAAIx5C,GAAM1L,SAG9C,SAAY,SAAkB1B,GAC5B,OAAOA,IAGX4pE,GAASS,aAAa,YAAat1E,EAAO,CACxC,WAAc,EACd,OAAU,CAAC,QAAS,YAAa,UAChC6oF,KACHhU,GAASS,aAAa,oBAAqBt1E,EAAO,CAChD,OAAU,CAAC,YAAa,YAAa,YACpC6oF,KACHhU,GAASS,aAAa,QAAS,CAC7B,WAAc,EACd,OAAU,CAAC,SACX,OAAU,SAAgB94C,EAAYm4B,GACpC,IAAI1mB,EAASzR,EAAWD,UAAUo4B,EAAS,IACvCgyB,EAAS,IAAI9gB,GAAO53B,GAIxB,OAFA04C,EAAO1jB,mBAAmBtO,EAAS,IAE5BgyB,GAET,SAAY,SAAkB17E,GAC5B,OAAOA,KAGX,IAAI+9E,GAAe,CACjB,OAAU,SAAgBxsD,EAAYksD,GACpC,IAAI94E,EAAO84E,EAAQ1hF,KAAI,SAAU2F,GAC/B,OAAO6vB,EAAWD,UAAU5vB,MAE1Bs8E,EAAO,IAAI/iB,GAAWt2D,GAI1B,OAFAq5E,EAAKhmB,mBAAmBylB,GAEjBO,GAET,OAAU,SAAgBzsD,EAAY5sB,EAAM3E,GAC1C,IACI03D,EADApzD,EAAStE,EAASitC,YAGlBzzC,MAAMC,QAAQkL,GAChB+yD,EAAY/yD,GAEZ+yD,EAAY13D,EAASi5D,sBACXjgE,KAAK2L,GAGjB,IAAIyqB,EAAcsoC,EAAU37D,KAAI,SAAU2F,GACxC,OAAO6vB,EAAWD,UAAU5vB,MAE9B1B,EAASg4C,eAAe5oB,GAExBpvB,EAASg4D,mBAAmBN,GAE5B,IAAI38B,EAAQ/6B,EAAS2mC,WAErB,GAAI5L,EAAO,CACT,IAAI9a,EAAU8a,EAAM8qC,gBAAgB,WAEpC,IAAK5lD,GAAWy3C,EAAUviE,QAAU,EAAG,CAKrC,GAJA8qB,EAAU,IAAI22C,GAAQ,CAACxnC,GAAc,CACnC,GAAM,YAGJ9qB,EAAQ,CACV,IAAI25E,EAAU93E,GAAa7B,EAAQ,CACjC,YAAe,IAEjB2b,EAAQu1B,UAAUyoC,GAGpBh+D,EAAQ61B,MAAM/a,GAGZ9a,GACFA,EAAQ+3C,mBAAmBN,KAIjC,SAAY,SAAkB13D,GAC5B,IAAIigB,EAAU,IAAI22C,GAAQ52D,EAAS41C,iBAAkB,CACnD,OAAU51C,EAASitC,cAMrB,OAHAhtB,EAAQ+3C,mBAAmBh4D,EAASi5D,sBAEpCh5C,EAAQkzB,UAAYnzC,EAASmzC,UACtBlzB,IAGX2pD,GAASS,aAAa,UAAWt1E,EAAO,CACtC,OAAU,CAAC,QAAS,YAAa,aAChCgpF,KACHnU,GAASS,aAAa,kBAAmBt1E,EAAO,CAC9C,OAAU,CAAC,YAAa,YAAa,YACpCgpF,KACH,IAAIG,GAAkB,CACpB,OAAU,SAAgB3sD,EAAYksD,GACpC,IAAI94E,EAAO84E,EAAQ1hF,KAAI,SAAU2F,GAC/B,OAAO6vB,EAAWD,UAAU5vB,MAE1Bs8E,EAAO,IAAI/iB,GAAWt2D,GAI1B,OAFAq5E,EAAKhmB,mBAAmBylB,GAEjBO,GAET,OAAU,SAAgBzsD,EAAYksD,EAASz9E,GAC7C,IAAI03D,EAEAl+D,MAAMC,QAAQgkF,GAChB/lB,EAAY+lB,GAEZ/lB,EAAY13D,EAASi5D,sBACXjgE,KAAKykF,GAGjB,IAAI94E,EAAO+yD,EAAU37D,KAAI,SAAU2F,GACjC,OAAO6vB,EAAWD,UAAU5vB,MAE9B1B,EAASg4C,eAAerzC,GAExB3E,EAASg4D,mBAAmBN,IAE9B,SAAY,SAAkB13D,GAC5B,OAAOA,IA0FX,SAASpH,GAAMulF,GAMb,IALA,IAAIC,EAAWD,EAAkB,SAC7BE,EAAW,CAACD,EAAe,KAAGA,EAAe,MAC7CvqC,EAAc,GACdyqC,EAAOF,EAAe,KAEjBnpF,EAAI,EAAG4E,EAAMykF,EAAKnpF,OAAQF,EAAI4E,EAAK5E,IAC1C4+C,EAAY76C,KAAKslF,EAAKrpF,GAAe,YAGvC,IAAIm/C,EAAa+pC,EAAoB,WACjCvnD,EAASwnD,EAAiB,OAC1BG,EAAa,CAAC,GAAI,EAAG3nD,EAAU,EAAGA,EAAU,GAEhD,cADOwd,EAA6B,iBAC7B,CACL,iBAAoB,CAClB,YAAeP,EACf,WAAcO,GAEhB,WAAcmqC,EACd,SAAYF,GAuChB,SAASG,GAAW9lF,EAAK+lF,GAUvB,YATiB,IAAbA,IACFA,EAAW,IAGbA,EAAS9iE,SAAQ,SAAU+iE,GACzB,IAAIC,EAAWD,EAAI,GACfr/E,EAAQq/E,EAAI,GAChBhmF,EAAMA,EAAIqO,QAAQ43E,EAAUt/E,MAEvB3G,EA8FT,SAASkmF,GAAmBC,EAAgBvuC,EAAO75B,QACjC,IAAZA,IACFA,EAAU,IAGZ,IAKI8a,EAAYutD,EALZC,EAAgBF,EAAevuC,GAC/B0uC,EAAcD,EAAcvoE,qBAAqB,cACjDq9B,EAAc,GACd0qC,EAAa,GACbF,EAAW,GAGf,IAAK9sD,EAAY,CACf,IAAI0tD,EAAeF,EAAcvoE,qBAAqB,oBAAoB,GAE1E,GAAIyoE,EAAc,CAIhB,IAFA1tD,GADAA,EAAa0tD,EAAat0C,aACFh8B,MAAM,QAAQ,GAE/B4iB,EAAWp4B,QAAQ,MAAQ,GAChCo4B,EAAaA,EAAWxqB,QAAQ,IAAK,IAGvCwqB,EArIN,SAAuBA,GACrB,IAAIuD,EAAMvD,EAAWp4B,QAAQ,SAAW,EAAIo4B,EAAa,QAAUA,EAEnE,OADAuD,EAAM0pD,GAAW1pD,EAAK,CAAC,CAAC,OAAQ,QAAS,CAAC,SAAU,QAAS,CAAC,SAAU,UAmIvDigB,CAAcxjB,IAI1ButD,IACHA,EAAOC,EAAcvoE,qBAAqB,kBAAkB,MAG1DsoE,EAAOA,EAAKn0C,aAIhB,IAAIu0C,EAAiB,qBAEjBzoE,EAAQ0oE,WACVD,EAAiB,OAGf3tD,GAAcA,EAAWp4B,QAAQ,SAAW,IAC9C+lF,EAAiB,sBAEbzoE,EAAQ0oE,WACVD,EAAiB,uBAMrB,IAFA,IAAIE,EAAWjlD,IAENklD,EAAS,EAAGA,EAASL,EAAY7pF,OAAQkqF,IAAU,CAC1D,IAAIC,EAAaN,EAAYK,GACzBE,EAAQD,EAAW9oE,qBAAqB,kBAAkB,GAAGm0B,YACjE40C,EAAQ1rE,SAAS0rE,GACjBH,EAAW1oF,KAAKqE,IAAIqkF,EAAUG,GAC9B,IAAIC,EAAmBF,EAAW9oE,qBAAqB,oBAAoB,GAAGm0B,YAC1E80C,EAAgBH,EAAW9oE,qBAAqB,iBAAiB,GAAGm0B,YACpE+0C,EAAYJ,EAAW9oE,qBAAqB,aAAa,GAAGm0B,YAC5Dg1C,EAAaL,EAAW9oE,qBAAqB,cAAc,GAAGm0B,YAMlE,GAJwB,IAApB0zC,EAASlpF,QACXkpF,EAASrlF,KAAK6a,SAAS6rE,GAAY7rE,SAAS8rE,IAGpB,IAAtBpB,EAAWppF,OAAc,CAC3B,IAAIyqF,EAAwBH,EAAc9wE,MAAM,KAAKlQ,QAAO,SAAUsF,GACpE,MAAa,KAANA,KACNhI,KAAI,SAAUhC,GACf,OAAO8lF,WAAW9lF,MAEhBG,EAAI0lF,EAAsB,GAC1Bt0E,EAAIs0E,EAAsB,GAE1B1lF,EAAI,EACNqkF,EAAWvlF,KAAK,GAAI,EAAGsS,EAAGpR,GAE1BqkF,EAAWvlF,KAAK,GAAI,EAAGkB,EAAGoR,GAI9B,IAAIrI,EAAM48E,WAAWL,GAAoBN,EACzCrrC,EAAY76C,KAAKiK,GAGnB,GAAIm8E,EAAW,EAGb,IAFA,IAAIpxC,EAAO6F,EAAY,GAEd5+C,EAAImqF,EAAW,EAAGnqF,GAAK,EAAGA,IACjC+4C,GAAc,EACd6F,EAAYz6C,OAAO,EAAG,EAAG40C,GAI7B,MAAO,CACL6F,YAAaA,EACbwqC,SAAUA,EACVE,WAAYA,EACZhtD,WAAYA,EACZwtD,cAAeD,GA7VnBlV,GAASS,aAAa,aAAct1E,EAAO,CACzC,OAAU,CAAC,QAAS,YAAa,aAChCmpF,KACHtU,GAASS,aAAa,qBAAsBt1E,EAAO,CACjD,OAAU,CAAC,YAAa,YAAa,YACpCmpF,KACHtU,GAASS,aAAa,WAAY,CAChC,OAAU,CAAC,QAAS,YAAa,YACjC,OAAU,SAAgB94C,EAAYksD,GACpC,IAAI94E,EAAO84E,EAAQ1hF,KAAI,SAAU2F,GAC/B,OAAO6vB,EAAWD,UAAU5vB,MAE1BuiB,EAAM,IAAIg9C,GAASt8D,GAIvB,OAFAsf,EAAI+zC,mBAAmBylB,GAEhBx5D,GAET,OAAUi6D,GAAgBvS,OAC1B,SAAY,SAAkB3rE,GAC5B,OAAOA,KAGX4pE,GAASS,aAAa,kBAAmB,CACvC,OAAU,CAAC,QAAS,YAAa,YACjC,OAAU,SAAgB94C,EAAYksD,GACpC,IAAI94E,EAAO84E,EAAQ1hF,KAAI,SAAU2F,GAC/B,OAAO6vB,EAAWD,UAAU5vB,MAE1B2/D,EAAQ,IAAIE,GAAgB58D,GAIhC,OAFA08D,EAAMrJ,mBAAmBylB,GAElBpc,GAET,OAAU6c,GAAgBvS,OAC1B,SAAY,SAAkB3rE,GAC5B,OAAOA,KAGX4pE,GAASS,aAAa,mBAAoB,CACxC,OAAU,CAAC,QAAS,YAAa,YACjC,OAAU,SAAgB94C,EAAYksD,GACpC,IAAI94E,EAAO84E,EAAQ1hF,KAAI,SAAU2F,GAC/B,OAAO6vB,EAAWD,UAAU5vB,MAE1B2/D,EAAQ,IAAID,GAAiBz8D,GAIjC,OAFA08D,EAAMrJ,mBAAmBylB,GAElBpc,GAET,OAAU6c,GAAgBvS,OAC1B,SAAY,SAAkB3rE,GAC5B,OAAOA,KAGX4pE,GAASS,aAAa,UAAW,CAC/B,OAAU,CAAC,YAAa,YAAa,WACrC,OAAU,SAAgB94C,EAAYm4B,GACpCA,EAAWA,EAAS,GACpB,IAAI1mB,EAASzR,EAAWD,UAAUo4B,GAC9BgyB,EAAS,IAAI9gB,GAAO53B,GAExB,OADA04C,EAAOmC,YAAcn0B,EACdgyB,GAET,OAAU,SAAgBnqD,EAAYm4B,EAAU1pD,EAAU6qB,GACxD,IAAI9uB,EAAMiE,EAASs7B,SAEf5b,EAAK3jB,EAAI+tD,qBAAqB9pD,EAAS69E,aACvCl+D,EAAKkL,EAAsB,eAE/B6+B,EAAW3tD,EAAI6qD,qBAAqB,IAAI13B,GAAWx4B,KAAKqE,IAAI2kB,EAAGxlB,EAAGylB,EAAGzlB,GAAIxD,KAAKqE,IAAI2kB,EAAGpU,EAAGqU,EAAGrU,KAC3F,IAAI03B,EAASzR,EAAWD,UAAUo4B,GAElC1pD,EAASg4C,eAAehV,GAAQg1B,mBAAmBtO,GAEnD1pD,EAASy2C,aAAa,CACpBo2B,YAAan2E,KAAK+D,IAAIilB,EAAGxlB,EAAIylB,EAAGzlB,GAChC4yE,aAAcp2E,KAAK+D,IAAIilB,EAAGpU,EAAIqU,EAAGrU,MAGrC,SAAY,SAAkBtL,GAC5B,OAAOA,KA4BX8zC,GAAiBgsC,WAAa,SAAUvoF,EAAKyG,EAAIyY,GAO/C,QANgB,IAAZA,IACFA,EAAU,CACR,OAAS,IAIT3gB,EAASyB,IAAgC,MAAxBA,EAAI4H,UAAU,EAAG,GACpCiX,GAAK2pE,QAAQxoF,GAAK,SAAUiS,EAAKvJ,GAC/B,GAAIuJ,EACFxL,EAAGwL,OADL,CAKA,IAAIw2E,EAAapnF,GAAMqH,GACvBjC,EAAG,KAAMgiF,MACRvpE,OACE,CACD3gB,EAASyB,KACXA,EAAMkB,EAAUlB,IAGlB,IAAIyoF,EAAapnF,GAAMrB,GACvByG,EAAG,KAAMgiF,GAGX,OAAO9hF,MAwNT41C,GAAiBmsC,SAAW,SAAU1oF,EAAKyG,EAAIyY,GAmB7C,YAlBgB,IAAZA,IACFA,EAAU,CACR,OAAS,IAIT3gB,EAASyB,IACX6e,GAAKzT,IAAIpL,GAAK,SAAUiS,EAAK02E,GAC3B,GAAI12E,EACFxL,EAAGwL,OADL,CAKA,IAAI+yC,EAhNV,SAAsB7jD,EAAKynF,EAAY1pE,GACrC,IAEItH,GAFS,IAAIixE,WACGC,gBAAgB3nF,EAAK,YACpB4nF,iBAAiB,YAAY,GAElD,IAAKnxE,EACH,MAAO,GAGT,IAAIotC,EAASptC,EAAQqH,qBAAqB,SAE1C,IAAK+lC,EAAOpnD,OACV,MAAO,GAKT,IAFA,IAAI0pF,EAAiB,GAEZ5pF,EAAI,EAAG4E,EAAMsV,EAAQo4C,WAAWpyD,OAAQF,EAAI4E,EAAK5E,IACjB,kBAAnCka,EAAQo4C,WAAWtyD,GAAGsrF,UACxB1B,EAAe7lF,KAAKmW,EAAQo4C,WAAWtyD,IAI3C,IAAK4pF,EAAe1pF,OAClB,MAAO,GAKT,IAFA,IAAIyE,EAAS,GAEJmJ,EAAK,EAAGwpB,EAAOgwB,EAAOpnD,OAAQ4N,EAAKwpB,EAAMxpB,IAAM,CACtD,IAAIg4B,EAAQwhB,EAAOx5C,GACfwD,EAAQw0B,EAAMulD,iBAAiB,SAAS,GAExC/5E,IACFA,EAAQA,EAAMiQ,qBAAqB,kBAAkB,MAGnDjQ,EAAQA,EAAMokC,aAIlB,IAAI61C,EAAYzlD,EAAMvkB,qBAAqB,kBAAkB,GAEzDgqE,IACFA,EAAYA,EAAU71C,aAGxB,IAAI81C,EAAc1lD,EAAMulD,iBAAiB,eAAe,GACpD/oF,EAAM,GAENkpF,IACFlpF,EAAMkpF,EAAYh5D,WAAWk3D,SAASt/E,OAGxC,IAAIqhF,EAAsB9B,GAAmBC,EAAgB97E,EAAI0T,GAC7Do9B,EAAc6sC,EAAoB7sC,YAClCwqC,EAAWqC,EAAoBrC,SAC/BE,EAAamC,EAAoBnC,WACjChtD,EAAamvD,EAAoBnvD,WACjCwtD,EAAgB2B,EAAoB3B,cAEnCxnF,EAAIpC,SACPoC,EAAM4oF,EAAWQ,OAAO,EAAGR,EAAWS,YAAY,MAClDrpF,GAAO,kLAGT,IAAIspF,EAAcrC,GAAWjnF,EAAK,CAAC,CAAC,UAAWipF,GAAY,CAAC,UAAWA,GAAY,CAAC,UAAWA,GAAY,CAAC,UAAWj6E,GAAQ,CAAC,UAAWA,GAAQ,CAAC,UAAWA,GAAQ,CAAC,kBAAmBw4E,GAAgB,CAAC,eAAgB,OAAQ,CAAC,YAAa,OAAQ,CAAC,YAAa,SACxQnlF,EAAOZ,KAAK,CACVqlF,SAAUA,EACVE,WAAYA,EACZuC,iBAAkB,CAChBjtC,YAAaA,EACbtiB,WAAYA,GAEdsvD,YAAaA,EACbE,KAAM,CACJP,UAAWA,EACXzB,cAAeA,EACfx4E,MAAOA,EACP83E,SAAUA,EACVE,WAAYA,EACZ1qC,YAAaA,EACbtiB,WAAYA,EACZsvD,YAAaA,KAKnB,OAAOjnF,EAwHUonF,CAAad,EAAK3oF,EAAKkf,GACpCzY,EAAG,KAAMu+C,MACR9lC,GAGEvY,MAGT,IAeI+iF,GAAc,SAAU5X,GAG1B,SAAS4X,EAAYxqE,GACnB,OAAO4yD,EAAW7yE,KAAK0H,KAAMuY,IAAYvY,KAH3C2M,GAAeo2E,EAAa5X,GAM5B,IAAI79D,EAASy1E,EAAY5qF,UAggBzB,OA9fAmV,EAAOsqC,MAAQ,SAAeorC,GAU5B,OATAhjF,KAAKijF,OAASD,EAEdhjF,KAAKi/C,cAAc,MAEfj/C,KAAKq/B,OACPr/B,KAAKq/B,QAGPr/B,KAAK8rB,KAAK,OACH9rB,MAGTsN,EAAO8vB,OAAS,WACd,OAAKp9B,KAAKijF,OAINjjF,KAAKijF,OAAOt9B,aACP3lD,KAAKijF,OAGPjjF,KAAKijF,OAAO7lD,SAPV,MAUX9vB,EAAOnN,KAAO,SAAc+mD,GAC1B,IAAIrpD,EAAMmC,KAAKo9B,SAEf,IAAKv/B,EACH,OAAOmC,KAGJA,KAAKkjF,cACRljF,KAAKmjF,iBAAiB,MAGxBj8B,EAAaA,GAAclnD,KAAKojF,aAAepjF,KAAKijF,OAAO3lE,YAC3D,IAAI+lE,EAAUrjF,KAAKq9B,YACnBr9B,KAAK8rB,KAAK,aAEV,IAAI1Y,EAAYpT,KAAKsjF,kBAErBtjF,KAAKojF,YAAcl8B,EAEnBlnD,KAAKujF,iBAEL,IAAIvuE,EAAMhV,KAAKwjF,QAAUxjF,KAAKyjF,QAAQ5lF,GAGtC,GAFAmX,EAAuB,kBAAIhV,KAAKuY,QAA2B,mBAEtDvD,EAEH,OADAhV,KAAK8rB,KAAK,WACH9rB,KAGTA,KAAK0jF,aAAa1uE,GAEdhV,KAAK2jF,eACP9lF,EAAImC,KAAK4jF,aAAe5uE,GAG1BhV,KAAK6jF,eAEL7uE,EAAI3M,MAAMwK,IAAc,KACxBO,EAAUE,YAAY0B,GAEtB,IAAI8uE,EAAO9jF,KAAK+jF,gBAMhB,GAJIV,IACFS,EAAKE,IAAK,GAGRF,EAAKE,KACHF,EAAKG,OACPjvE,EAAI3M,MAAM67E,QAAU,GAGlBJ,EAAKhuD,OAAO,CACd,GAAI91B,KAAKmkF,mBAAoB,CAC3B,IAAIzrD,EAAS14B,KAAKmkF,qBAClBnvE,EAAI3M,MAAMuK,IAAmB8lB,EAG/B1jB,EAAI3M,MAAMsK,IAAa3S,KAAKokF,gBAAgBpkF,KAAKqkF,MAAQ,YAI7DrvE,EAAI3M,MAAMi8E,QAAU,GAEhBtkF,KAAKuY,QAAsB,cAC7BP,GAAGhD,EAAKhV,KAAKuY,QAAsB,aAAG1D,IAGpC7U,KAAKuY,QAAiB,SACxBvY,KAAKukF,WAGP,IAAIC,EAAaV,EAAKU,WAmBtB,OAjBIV,EAAKE,IAAMQ,IACbxvE,EAAIe,aAEAyuE,IACFxvE,EAAI3M,MAAMwK,IAAc2xE,GAGtBV,EAAKG,OACPjvE,EAAI3M,MAAM67E,QAAU,GAGlBJ,EAAKhuD,QACP9gB,EAAI3M,MAAMsK,IAAa3S,KAAKokF,gBAAgBpkF,KAAKqkF,MAAQ,cAI7DrkF,KAAK8rB,KAAK,WACH9rB,MAGTsN,EAAOlN,KAAO,WACZ,IAAI2vB,EAAQ/vB,KAEZ,IAAKA,KAAKykF,WAAazkF,KAAKo9B,SAC1B,OAAOp9B,KAGT,IAAI8jF,EAAO9jF,KAAK+jF,gBACZ/uE,EAAMhV,KAAKykF,SA2Bf,OAzBKzkF,KAAKuY,QAAyB,kBACjCurE,EAAKE,IAAK,GAGPF,EAAKE,IAIRhvE,EAAIe,aACJf,EAAI3M,MAAMwK,IAAcixE,EAAKU,WAC7B5qF,YAAW,WACTob,EAAI3M,MAAMi8E,QAAU,OAEpBv0D,EAAMjE,KAAK,UACV9rB,KAAKuY,QAA2B,qBATnCvD,EAAI3M,MAAMi8E,QAAU,OACpBtkF,KAAK8rB,KAAK,SAWRg4D,EAAKG,OACPjvE,EAAI3M,MAAM67E,QAAU,GAGlBJ,EAAKhuD,QACP9gB,EAAI3M,MAAMsK,IAAa3S,KAAKokF,gBAAgBpkF,KAAKqkF,MAAQ,aAGpDrkF,MAGTsN,EAAO+vB,UAAY,WACjB,IAAIroB,EAAMhV,KAAKykF,SACf,OAAOzkF,KAAKo9B,UAAYpoB,GAAOA,EAAIvB,YAAoC,SAAtBuB,EAAI3M,MAAMi8E,SAG7Dh3E,EAAOggB,OAAS,WAGd,cAFOttB,KAAKkjF,aAEPljF,KAAKijF,QAIVjjF,KAAKI,OAELJ,KAAKi/C,cAAc,OAEfj/C,KAAKi/B,UACPj/B,KAAKi/B,YAGFj/B,KAAK2jF,cAAgB3jF,KAAKwjF,SAC7BxjF,KAAKujF,wBAGAvjF,KAAKijF,OACZjjF,KAAK8rB,KAAK,UACH9rB,MAjBEA,MAoBXsN,EAAOsnB,QAAU,WACf,OAAI50B,KAAKmpC,MACAnpC,KAAKmpC,MAAMn7B,OAEX,MAIXV,EAAOo3E,SAAW,WAChB,OAAO1kF,KAAKijF,QAGd31E,EAAOm3E,OAAS,WACd,OAAOzkF,KAAKwjF,SAGdl2E,EAAOq3E,YAAc,WACnB,IAAK3kF,KAAKo9B,SACR,OAAO,KAGT,IAAI5hC,EAAIwE,KAAK4kF,gBAAgBp3E,SAE7B,GAAIxN,KAAK6kF,UAAW,CAClB,IAAI17D,EAAInpB,KAAK6kF,YAAYr3E,SAErB2b,GACF3tB,EAAEyS,KAAKkb,GAIX,OAAO3tB,GAGT8R,EAAOy2E,cAAgB,WAOrB,IANA,IAAID,EAAO,CACT,MAAQ,EACR,OAAS,GAEPgB,EAAa9kF,KAAKuY,QAAmB,UAAIvY,KAAKuY,QAAmB,UAAE9H,MAAM,KAAO,GAE3E1Z,EAAI,EAAGA,EAAI+tF,EAAW7tF,OAAQF,IAAK,CAC1C,IAAIguF,EAAS30E,GAAK00E,EAAW/tF,IAEd,SAAXguF,EACFjB,EAAKG,MAAO,EACQ,UAAXc,IACTjB,EAAKhuD,OAAQ,GAIjB,IAAI0uD,EAAa,KAajB,OAXIV,EAAKG,OACPO,EAAa,WAAaxkF,KAAKuY,QAA2B,kBAAI,MAG5DurE,EAAKhuD,QACP0uD,EAAaA,EAAaA,EAAa,IAAM,GAC7CA,GAAc7xE,GAAY,IAAM3S,KAAKuY,QAA2B,kBAAI,MAGtEurE,EAAKU,WAAaA,EAClBV,EAAKE,GAAoB,OAAfQ,EACHV,GAGTx2E,EAAOs3E,cAAgB,WACrB,IAAI7zC,EAAM,EAEV,GAAI/wC,KAAKijF,QAAUjjF,KAAKijF,OAAOhyC,YAAa,CAC1C,IAAID,EAAWhxC,KAAKijF,OAAOhyC,cAEvBD,EAAW,IACbD,EAAM/wC,KAAK80C,cAAc90C,KAAKojF,YAAapyC,IAI/C,OAAOhxC,KAAKo9B,SAASkqB,iBAAiBtnD,KAAKojF,iBAAatnF,EAAWi1C,GAAK9iC,KAAKjO,KAAKuY,QAAY,GAAGvY,KAAKuY,QAAY,KAGpHjL,EAAOwnC,cAAgB,SAAuBhQ,EAAQkM,GAEpD,OADUhxC,KAAKo9B,SACJ2X,gBAAgB/D,EAAU,OAAGl1C,EAAWgpC,GAAQ9oC,EAAID,EAAKi1C,IAGtE1jC,EAAOi3E,SAAW,WAChB,IAAI1mF,EAAMmC,KAAKo9B,SACXpoB,EAAMhV,KAAKykF,SAEf,IAAI5mF,EAAIygC,WAAR,CAIA,IAAI1wB,EAAQ5N,KAAKqkF,KACbhW,EAAUxwE,EAAI+2B,UACdowD,EAAW3W,EAAe,MAC1B4W,EAAY5W,EAAgB,OAC5B1uC,EAAiB9hC,EAAImqD,0BAA0Bp6C,GAC/C+J,EAAchC,SAASX,EAAI2C,aAC3BC,EAAejC,SAASX,EAAI4C,cAC5BvW,EAAO,EACPkU,EAAM,EAENoqB,EAAe3jC,EAAI,EACrBqF,IAASs+B,EAAe3jC,EAAI2b,EAAc,GACjCgoB,EAAe3jC,EAAI2b,EAAc,GAAKqtE,IAC/C3jF,EAAO2jF,GAAYrlD,EAAe3jC,EAAkB,EAAd2b,EAAkB,IAGtDgoB,EAAevyB,EAAIwK,EAAe,EACpCrC,EAA2C,IAAnCoqB,EAAevyB,EAAIwK,GAClB+nB,EAAevyB,EAAI63E,IAC5B1vE,EAAM0vE,EAAYtlD,EAAevyB,EAAIwK,EAAe,IAG1C,IAARrC,GAAsB,IAATlU,GACfxD,EAAI0xD,MAAM,IAAIrgD,GAAM7N,EAAMkU,GAAM,CAC9B,SAAYvV,KAAKuY,QAAyB,oBAKhDjL,EAAOo2E,aAAe,SAAsB1uE,GAC1C,IAAI5B,EAAYpT,KAAKsjF,kBAErBtuE,EAAI3M,MAAM0vE,SAAW,WACrB/iE,EAAI3M,MAAMhH,KAAO,WACjB,IAAI2nC,EAASh0B,EAAI3M,MAAM8tC,OAAS,SAAW,MAQ3C,OAPAnhC,EAAI3M,MAAM2gC,GAAU,WACpBh0B,EAAI3M,MAAMi8E,QAAU,GACpBlxE,EAAUE,YAAY0B,GACtBhV,KAAKmpC,MAAQ,IAAIl5B,GAAK+E,EAAI2C,YAAa3C,EAAI4C,cAC3C5C,EAAI3M,MAAMi8E,QAAU,OACpBtvE,EAAI3M,MAAMhH,KAAO,MACjB2T,EAAI3M,MAAM2gC,GAAU,MACbhpC,KAAKmpC,OAGd77B,EAAOi2E,eAAiB,WAClBvjF,KAAKklF,aACPllF,KAAKklF,cAGP,IAAIC,EAAenlF,KAAKuY,QAAsB,aAE9C,GAAIvY,KAAK2jF,aAAc,CACrB,IAAI9lF,EAAMmC,KAAKo9B,SACX/kC,EAAM2H,KAAK4jF,YAEX/lF,EAAIxF,KACF8sF,GACFltE,GAAIpa,EAAIxF,GAAM8sF,EAActwE,IAG9BtB,GAAc1V,EAAIxF,WACXwF,EAAIxF,WAGN2H,KAAKwjF,aACHxjF,KAAKwjF,UACV2B,GACFltE,GAAIjY,KAAKwjF,QAAS2B,EAActwE,IAGlCtB,GAAcvT,KAAKwjF,gBACZxjF,KAAKwjF,UAIhBl2E,EAAOs2E,UAAY,WACjB,MAAO,QAAU5jF,KAAKolF,iBAGxB93E,EAAOq2E,WAAa,WAClB,OAAO3jF,KAAKuY,QAAgB,QAG9BjL,EAAOg2E,gBAAkB,WACvB,OAAOtjF,KAAKo9B,SAASijB,QAAY,IAGnC/yC,EAAO83E,cAAgB,WACrB,MAAO,eAGT93E,EAAO61E,iBAAmB,SAA0Bh3D,GAClD,IAAItuB,EAAMmC,KAAKo9B,SAEf,GAAKv/B,EAAL,CAIAmC,KAAKkjF,aAAsB,OAAP/2D,EAEpB,IAAIq/C,EAASxrE,KAAKqlF,oBAMlB,GAJIrlF,KAAKkiC,WACPrrC,EAAO20E,EAAQxrE,KAAKkiC,aAGlBspC,EACF,IAAK,IAAIhwE,KAAKgwE,EACRA,EAAOvzE,eAAeuD,IACxBqC,EAAIsuB,GAAI3wB,EAAGgwE,EAAOhwE,GAAIwE,QAM9BsN,EAAO2xC,cAAgB,SAAuB9yB,GAC5CnsB,KAAKmjF,iBAAiBh3D,GAEtB,IAAIm5D,EAActlF,KAAKulF,kBAEvB,GAAIvlF,KAAKijF,OACP,IAAK,IAAIznF,KAAK8pF,EACRA,EAAYrtF,eAAeuD,IAC7BwE,KAAKijF,OAAO92D,GAAI3wB,EAAG8pF,EAAY9pF,GAAIwE,OAM3CsN,EAAO+3E,kBAAoB,WACzB,MAAO,CACL,uBAAwBrlF,KAAKwlF,QAC7B,QAAWxlF,KAAKqiC,UAChB,OAAUriC,KAAKwiC,SACf,OAAUxiC,KAAKsiC,WAInBh1B,EAAOi4E,gBAAkB,WACvB,IAAI/Z,EAAS,GAUb,OARIxrE,KAAKijF,QAAUjjF,KAAKijF,kBAAkB9rC,KACxCq0B,EAAOia,eAAiBzlF,KAAKiqE,0BAG3BjqE,KAAK0lF,gBACP7uF,EAAO20E,EAAQxrE,KAAK0lF,kBAGfla,GAGTl+D,EAAO28D,yBAA2B,SAAkCt9C,GAC9D3sB,KAAKijF,QAAUjjF,KAAKq9B,aACtBr9B,KAAKG,KAAKwsB,EAAc,OAAErP,cAI9BhQ,EAAOk1B,SAAW,WACZxiC,KAAKq9B,aAAer9B,KAAKo9B,SAAS2K,kBACpC/nC,KAAK2lF,mBAITr4E,EAAOk4E,QAAU,WACXxlF,KAAKq9B,aACPr9B,KAAK2lF,mBAITr4E,EAAO+0B,UAAY,WACbriC,KAAKq9B,aACPr9B,KAAK6jF,gBAITv2E,EAAOg1B,SAAW,WACZtiC,KAAKq9B,aACPr9B,KAAK6jF,gBAITv2E,EAAOq4E,gBAAkB,WACR3lF,KAAKo9B,SAASqV,eAEpB8e,gBAAgBvxD,KAAK6jF,aAAaz9C,KAAKpmC,QAGlDsN,EAAOu2E,aAAe,WACpB,IAAI7uE,EAAMhV,KAAKykF,SACf,GAAKzvE,EAAL,CACAA,EAAI3M,MAAMwK,IAAc,KACxB,IAAIrX,EAAIwE,KAAK2kF,cACb3kF,KAAKqkF,KAAO7oF,EACZwZ,EAAI3M,MAAMsK,IAAa3S,KAAKokF,gBAAgB5oF,GAAK,cAGnD8R,EAAO82E,gBAAkB,SAAyB5oF,GAChD,IAAKA,EACH,MAAO,GAGT,GAAIkR,GAAU9B,MAAO,CACnB,IAAI/M,EAAMmC,KAAKo9B,SACXzE,EAAU96B,EAAMA,EAAIsoC,aAAe,EACnCmc,EAAQzkD,EAAMA,EAAIwgC,WAAa,EAC/BxlC,EAAI,GAUR,OARImH,KAAKuY,QAAsB,cAAK+pC,IAClCzpD,GAAK,YAAcL,KAAK8D,MAAMgmD,GAAS,QAGrCtiD,KAAKuY,QAAuB,eAAKogB,IACnC9/B,GAAK,YAAcL,KAAK8D,OAAOq8B,GAAW,QAGrC,eAAiBn9B,EAAEQ,EAAI,MAAQR,EAAE4R,EAAI,WAAavU,EAEzD,MAAO,aAAe2C,EAAEQ,EAAI,MAAQR,EAAE4R,EAAI,OAI9C21E,EAAY6C,UAAY,SAAmB5C,GACzC,SAAIA,GAASjrF,EAAWirF,EAAMhrE,KAAOjgB,EAAWirF,EAAM/qE,MAAQlgB,EAAWirF,EAAM1lE,aAO1EylE,EAvgBS,CAwgBhBx4D,GAAUgD,KAEZw1D,GAAYt0D,aAzhBI,CACd,mBAAqB,EACrB,aAAgB,KAChB,GAAM,EACN,GAAM,EACN,SAAW,EACX,gBAAmB,IACnB,QAAU,EACV,UAAa,QACb,iBAAmB,EACnB,kBAAqB,IACrB,cAAgB,EAChB,eAAiB,IA8gBnB,IAOIo3D,GAAY,8HAEZC,GAAW,SAAU/lC,GAGvB,SAAS+lC,EAAS5+B,EAAY3uC,GAC5B,IAAIwX,EAIJ,OAFAA,EAAQgwB,EAAaznD,KAAK0H,KAAMuY,IAAYvY,MACtC+lF,aAAe,IAAI/0D,GAAWk2B,GAC7Bn3B,EAPTpjB,GAAem5E,EAAU/lC,GAUzB,IAAIzyC,EAASw4E,EAAS3tF,UAwHtB,OAtHAmV,EAAO83E,cAAgB,WACrB,MAAO,YAGT93E,EAAOwsC,eAAiB,SAAwB5oB,GAU9C,OATAlxB,KAAK+lF,aAAe70D,EACpBlxB,KAAK8rB,KAAK,kBAEN9rB,KAAKq9B,cACPr9B,KAAKojF,YAAcpjF,KAAK+lF,aAExB/lF,KAAK6jF,gBAGA7jF,MAGTsN,EAAOoqC,eAAiB,WACtB,OAAO13C,KAAK+lF,cAGdz4E,EAAOs2D,WAAa,SAAoB3yD,GACtC,IAAIywB,EAAM1hC,KAAKuY,QAAiB,QAWhC,OAVAvY,KAAKuY,QAAiB,QAAItH,EAC1BjR,KAAK8rB,KAAK,gBAAiB,CACzB,IAAO4V,EACP,IAAOzwB,IAGLjR,KAAKq9B,aACPr9B,KAAKG,OAGAH,MAGTsN,EAAOo2D,WAAa,WAClB,OAAO1jE,KAAKuY,QAAiB,SAG/BjL,EAAO+xB,MAAQ,WACbr/B,KAAKG,QAGPmN,EAAOnN,KAAO,WACZ,OAAO4/C,EAAa5nD,UAAUgI,KAAK7H,KAAK0H,KAAMA,KAAK+lF,eAGrDz4E,EAAO3N,MAAQ,SAAkBC,EAAUC,EAAOC,EAAIzE,GACpD,OAAOsE,EAAMrH,KAAK0H,KAAMJ,EAAUC,EAAOC,EAAIzE,IAG/CiS,EAAOm2E,QAAU,WACf,IAAIzuE,EAeJ,OAbIpd,EAASoI,KAAKuY,QAAiB,UACjCvD,EAAMlC,GAAS,QACXU,UAAYxT,KAAKuY,QAAiB,QAEtCvD,EAAMhV,KAAKuY,QAAiB,QAG1BvY,KAAKuY,QAAwB,iBAC/BvD,EAAIhC,UAAYhT,KAAKuY,QAAwB,gBAG/CvY,KAAKgmF,mBAAmBhxE,GAEjBA,GAGT1H,EAAOu3E,UAAY,WACjB,IAAI30E,EAAOlQ,KAAK40B,UAChB,OAAO,IAAI1lB,IAAOgB,EAAK7J,MAAQ,GAAI6J,EAAK5J,OAAS,IAGnDgH,EAAO62E,mBAAqB,WAC1B,MAAO,iBAGT72E,EAAO43E,YAAc,WACnB,IAAIlwE,EAAMhV,KAAKykF,SAEfzkF,KAAKimF,iBAAiBjxE,IAGxB1H,EAAO44E,WAAa,WAClB,QAAIlmF,KAAgB,WACXA,KAAgB,UAAEkmF,cAM7B54E,EAAO04E,mBAAqB,SAA4BhxE,GACtDgD,GAAGhD,EAAK6wE,GAAW7lF,KAAKmmF,aAAcnmF,OAGxCsN,EAAO64E,aAAe,SAAsBpyE,GAC1C,IAAIC,EAAQhU,KAAKo9B,SAASqsB,YAAY11C,EAAGA,EAAEpV,MAE3CqB,KAAK8rB,KAAK/X,EAAEpV,KAAMqV,IAGpB1G,EAAO24E,iBAAmB,SAA0BjxE,GAClDiD,GAAIjD,EAAK6wE,GAAW7lF,KAAKmmF,aAAcnmF,OAGzCsN,EAAOutC,kBAAoB,WACzB,IAAIh9C,EAAMmC,KAAKo9B,SACXuC,EAAiB9hC,EAAIm7C,sBAAsBh5C,KAAK03C,kBAChDxnC,EAAOlQ,KAAK40B,UACZvuB,EAAQ6J,EAAK7J,MACbC,EAAS4J,EAAK5J,OAElB,MADc,CAACzI,EAAIgqD,2BAA2BloB,EAAezxB,KAAK7H,EAAQ,EAAG,IAAKxI,EAAIgqD,2BAA2BloB,EAAezxB,IAAI7H,EAAQ,EAAG,IAAKxI,EAAIgqD,2BAA2BloB,EAAezxB,IAAI,EAAG5H,EAAS,IAAKzI,EAAIgqD,2BAA2BloB,EAAezxB,IAAI,GAAI5H,EAAS,MAIjRw/E,EAnIM,CAoIb72D,GAAY8zD,KAEd+C,GAASr3D,aA/IO,CACd,eAAkB,KAClB,mBAAqB,EACrB,WAAa,EACb,QAAU,EACV,QAAW,OA2Ib,IAAI23D,GAAW15E,GAAU3B,MAAQ,uBAAyB,YAEtDs7E,GAAsB,SAAUv2D,GAGlC,SAASu2D,EAAoBj/D,GAC3B,OAAO0I,EAASx3B,KAAK0H,KAAMonB,IAAWpnB,KAHxC2M,GAAe05E,EAAqBv2D,GAMpC,IAAI0T,EAAU6iD,EAAoBluF,UAmIlC,OAjIAqrC,EAAQtW,SAAW,WACjBltB,KAAKonB,OAAOpP,GAAGouE,GAAUpmF,KAAKsmF,WAAYtmF,OAG5CwjC,EAAQpW,YAAc,WACpBptB,KAAKonB,OAAOnP,IAAImuE,GAAUpmF,KAAKsmF,WAAYtmF,OAG7CwjC,EAAQ8iD,WAAa,SAAoB35D,GACvC,IAAImhC,EAAWnhC,EAAgB,SAE3BmhC,EAAS19B,SAAW09B,EAAS19B,QAAQn5B,OAAS,GAAyB,IAApB62D,EAAS39B,QAI5DnwB,KAAKkmF,eAITlmF,KAAKonB,OAAOpP,GAAG,QAAShY,KAAKumF,SAAUvmF,MACvCA,KAAKwmF,WAAa75D,EAAkB,WACpC3sB,KAAKymF,WAAa95D,EAAsB,eAExC3sB,KAAK0mF,sBAEL1mF,KAAKytD,aAAax9B,YAAYtD,EAAgB,UAE9C3sB,KAAKonB,OAAO0E,KAAK,YAAaa,KAGhC6W,EAAQkjD,oBAAsB,WAC5B1mF,KAAKytD,aAAe,IAAI59B,GAAY7vB,KAAKonB,OAAOq9D,SAAU,CACxD,SAAYzkF,KAAK0tD,UAAUtnB,KAAKpmC,MAChC,kBAAoB,IAGtBA,KAAKytD,aAAaz1C,GAAG,YAAahY,KAAKgwB,aAAchwB,MAErDA,KAAKytD,aAAaz1C,GAAG,WAAYhY,KAAK2mF,UAAW3mF,MAEjDA,KAAKytD,aAAaz1C,GAAG,UAAWhY,KAAKumF,SAAUvmF,MAE/CA,KAAKytD,aAAazgC,UAGpBwW,EAAQkqB,UAAY,SAAmBI,GACrC,IACI/6C,GADS+6C,EAAS4lB,YAAc5lB,EAAS1mC,QACxBrU,QAAQ3J,cAE7B,MAAgB,WAAZ2J,GAAoC,UAAZA,GAAmC,WAAZA,GAAoC,WAAZA,GAAoC,aAAZA,GAOrGywB,EAAQxT,aAAe,SAAsBrD,GAC3C9X,GAAgB8X,EAAgB,WAGlC6W,EAAQmjD,UAAY,SAAmBh6D,GACrC,IAAIvF,EAASpnB,KAAKonB,OAEdwsD,EADMxsD,EAAOgW,SACIqsB,YAAY98B,EAAgB,UAC7CmhC,EAAW8lB,EAAqB,SAEpC,KAAI9lB,EAAS19B,SAAW09B,EAAS19B,QAAQn5B,OAAS,GAIlD,GAAK+I,KAAK4mF,YAAV,CAKA,IAAIz1D,EAAQyiD,EAAuB,WAC/BhmE,EAAQgmE,EAA2B,eAElC5zE,KAAKwmF,aACRxmF,KAAKwmF,WAAar1D,GAGfnxB,KAAKymF,aACRzmF,KAAKymF,WAAa74E,GAGpB,IAAIi5E,EAAc11D,EAAM5iB,IAAIvO,KAAKwmF,YAC7BM,EAAcl5E,EAAMW,IAAIvO,KAAKymF,YACjCzmF,KAAKwmF,WAAar1D,EAClBnxB,KAAKymF,WAAa74E,EAClB5N,KAAKonB,OAAO0yB,eAAe95C,KAAKonB,OAAOswB,iBAAiBxpC,IAAI24E,IAC5DjT,EAAwB,YAAIiT,EAC5BjT,EAAwB,YAAIkT,EAC5B1/D,EAAO0E,KAAK,WAAY8nD,QAtBtB5zE,KAAK4mF,aAAc,GAyBvBpjD,EAAQ+iD,SAAW,SAAkB55D,GACnC,IAAIvF,EAASpnB,KAAKonB,OACdvpB,EAAMupB,EAAOgW,SAcjB,GAZIp9B,KAAKytD,eACPrmC,EAAOnP,IAAI,QAASjY,KAAKumF,SAAUvmF,MAEnCA,KAAKytD,aAAatgC,iBAEXntB,KAAKytD,qBAGPztD,KAAKwmF,kBACLxmF,KAAKymF,WACZzmF,KAAK4mF,aAAc,EAEd/oF,EAAL,CAIA,IAAI+1E,EAAa/1E,EAAI4rD,YAAY98B,EAAgB,UAEjDvF,EAAO0E,KAAK,UAAW8nD,KAGzBpwC,EAAQ0iD,WAAa,WACnB,QAAKlmF,KAAK4mF,aAOLP,EA1IiB,CA2IxBv5D,IAEFg5D,GAAS13D,YAAY,aAAc,YAAai4D,IAChD,IAYIU,GAAa,SAAUC,GAGzB,SAASD,IACP,OAAOC,EAAa7jF,MAAMnD,KAAMhJ,YAAcgJ,KAHhD2M,GAAeo6E,EAAYC,GAM3B,IAAI15E,EAASy5E,EAAW5uF,UA+TxB,OA7TAmV,EAAO83E,cAAgB,WACrB,MAAO,cAGT93E,EAAOsqC,MAAQ,SAAeorC,GAS5B,OARIA,aAAiB7rC,KACf6rC,EAAMiE,iBAAmBjE,EAAMiE,kBAAoBjnF,MACrDgjF,EAAMkE,mBAGRlE,EAAMmE,YAAcnnF,MAGfgnF,EAAa7uF,UAAUy/C,MAAMt/C,KAAK0H,KAAMgjF,IAGjD11E,EAAOs2D,WAAa,SAAoB3yD,GACtC,IAAIywB,EAAM1hC,KAAKuY,QAAiB,QAWhC,OAVAvY,KAAKuY,QAAiB,QAAItH,EAC1BjR,KAAK8rB,KAAK,gBAAiB,CACzB,IAAO4V,EACP,IAAOzwB,IAGLjR,KAAKq9B,aACPr9B,KAAKG,KAAKH,KAAKojF,aAGVpjF,MAGTsN,EAAOo2D,WAAa,WAClB,OAAO1jE,KAAKuY,QAAiB,SAG/BjL,EAAO85E,SAAW,SAAkBC,GAClC,IAAI3lD,EAAM2lD,EAWV,OAVArnF,KAAKuY,QAAe,MAAI8uE,EACxBrnF,KAAK8rB,KAAK,gBAAiB,CACzB,IAAO4V,EACP,IAAO2lD,IAGLrnF,KAAKq9B,aACPr9B,KAAKG,KAAKH,KAAKojF,aAGVpjF,MAGTsN,EAAOg6E,SAAW,WAChB,OAAOtnF,KAAKuY,QAAe,OAG7BjL,EAAOm2E,QAAU,WACf,GAAIzjF,KAAKuY,QAAgB,OAAG,CAC1B,GAAI3gB,EAASoI,KAAKuY,QAAiB,SAAI,CACrC,IAAIgvE,EAAOz0E,GAAS,OAGpB,OADAy0E,EAAK/zE,UAAYxT,KAAKuY,QAAiB,QAChCgvE,EAEP,OAAOvnF,KAAKuY,QAAiB,QAIjC,IAAIvD,EAAMlC,GAAS,OAEf9S,KAAKuY,QAAwB,iBAC/BvD,EAAIhC,UAAYhT,KAAKuY,QAAwB,gBAG/CvD,EAAI3M,MAAMhC,MAAQrG,KAAKwnF,kBAAoB,KAC3CxyE,EAAI3M,MAAM8tC,OAAS,MACnB,IAAIllC,EAAU,iCAEVjR,KAAKuY,QAAe,QACtBtH,GAAW,OAASjR,KAAKuY,QAAe,MAAI,SAG9CtH,GAAW,mGACX+D,EAAIxB,UAAYvC,EAChB,IAAIw2E,EAAazyE,EAAI0yE,cAAc,wBAWnC,OATI9vF,EAASoI,KAAKuY,QAAiB,SACjCkvE,EAAWj0E,UAAYxT,KAAKuY,QAAiB,QAE7CkvE,EAAWn0E,YAAYtT,KAAKuY,QAAiB,SAG/CvY,KAAK2nF,iBAAmB3nF,KAAKI,KAAKgmC,KAAKpmC,MAEvC2T,GADeqB,EAAI0yE,cAAc,mBACX,iBAAkB1nF,KAAK2nF,kBACtC3yE,GAGT1H,EAAO62E,mBAAqB,WAE1B,OADWnkF,KAAK40B,UACJvuB,MAAQ,EAAI,aAG1BiH,EAAOu3E,UAAY,WACjB,IAAI30E,EAAOlQ,KAAK40B,UACZzL,EAAI,IAAIja,IAAOgB,EAAY,MAAI,EAAG,GAEjClQ,KAAKuY,QAAgB,OAGxB4Q,EAAE9a,KAAK,EAAG6B,EAAa,QAFvBiZ,EAAE9a,KAAK,EAAG,IAKZ,IAAI20E,EAAQhjF,KAAK0kF,WAEjB,GAAI1B,aAAiBtmB,IAAUsmB,aAAiBzkB,GAAY,CAC1D,IAAIl5B,EAASuiD,EAEb,GAAI5E,aAAiBtmB,GACnBr3B,EAAU29C,EAAMxtC,cAChBoyC,EAAa5E,EAAMpuD,cACd,CACL,IAAI2hC,EAAWysB,EAAMrhD,gBAErB,IAAK40B,IAAaA,EAASt/D,OACzB,OAAOkyB,EAGTkc,EAAUkxB,EAAS,GAAG/gB,cACtBoyC,EAAarxB,EAAS,GAAG3hC,UAG3B,GAAIyQ,EAAS,CACX,IAAIwiD,EAAYxiD,EAAQqE,iBAExBvgB,EAAElb,KAAK45E,EAAUp0D,KAAOm0D,EAAWvhF,MAAQ,EAAGwhF,EAAUn0D,WAExDvK,EAAElb,KAAK,GAAI25E,EAAWthF,QAI1B,OAAO6iB,GAGT7b,EAAOnN,KAAO,SAAc+mD,GAC1B,OAAKlnD,KAAKo9B,UAILp9B,KAAKo9B,SAAS7kB,QAA0B,iBAItCyuE,EAAa7uF,UAAUgI,KAAK7H,KAAK0H,KAAMknD,GAPrClnD,MAUXsN,EAAO40B,UAAY,WACjB,IAAKliC,KAAKuY,QAAqB,YAC7B,OAAO,KAGT,IAAIizD,EAAS,GAEb,OADAA,EAAOxrE,KAAKuY,QAAqB,aAAKvY,KAAKI,KACpCorE,GAGTl+D,EAAOo4E,eAAiB,WACtB,IAAI1C,EAAQhjF,KAAK0kF,WAEjB,IAAK1kF,KAAKuY,QAAoB,aAAMyqE,EAClC,OAAO,KAGT,IAAIxX,EAAS,GAEb,OADAA,EAAOxrE,KAAKuY,QAAoB,YAAKvY,KAAK8nF,YACnCtc,GAGTl+D,EAAO2xB,SAAW,WAChBj/B,KAAKklF,eAGP53E,EAAO43E,YAAc,WACfllF,KAAK2nF,mBAGPzzE,GAFUlU,KAAKykF,SACIp7B,WAAW,GACL,iBAAkBrpD,KAAK2nF,yBACzC3nF,KAAK2nF,mBAIhBr6E,EAAOw6E,YAAc,SAAqB/zE,GACxC,IAAIgc,EAAQ/vB,KAERgjF,EAAQhjF,KAAK0kF,WACjB9qF,YAAW,WACLopF,aAAiBtmB,IAAUsmB,aAAiBD,GAC9ChzD,EAAM5vB,KAAK6iF,EAAMtrC,kBACRsrC,aAAiBzkB,GAC1BxuC,EAAM5vB,KAAK6iF,EAAMvkB,YAAY1qD,EAAEmzC,aACtB87B,aAAiBjmB,IAAcimB,aAAiBrkB,IACrD5uC,EAAMqN,SAASkoB,YAAc,IAC/BvxC,EAAEmzC,WAAan3B,EAAMg4D,uBAAuB/E,EAAOjvE,EAAEmzC,aAGvDn3B,EAAM5vB,KAAK4T,EAAEmzC,aAEbn3B,EAAM5vB,KAAK4T,EAAEmzC,cAEd,IAGL55C,EAAOy6E,uBAAyB,SAAgC/E,EAAOgF,GACrE,IAAItqD,EAAS19B,KAEb,OAAIgjF,aAAiBjmB,GACZ/8D,KAAKioF,kCAAkCjF,EAAOgF,GAAiB9gC,WAC7D87B,aAAiBrkB,GACnBqkB,EAAMrhD,gBAAgB9jC,KAAI,SAAUqqF,GACzC,OAAOxqD,EAAOuqD,kCAAkCC,EAAYF,MAC3DtmF,MAAK,SAAUjF,EAAGC,GACnB,OAAOD,EAAE0rF,IAAMzrF,EAAEyrF,OAChB,GAAGjhC,WAGD8gC,GAGT16E,EAAO26E,kCAAoC,SAA2CC,EAAYF,GAUhG,IATA,IAAIvpC,EAASz+C,KAETooF,EAAMF,EAAWxwC,iBAAiB75C,KAAI,SAAUqpD,GAClD,OAAOzI,EAAOrhB,SAAS4b,sBAAsBkO,MAE3CmhC,EAAUroF,KAAKo9B,SAAS4b,sBAAsBgvC,GAC9CM,EAASrsD,IACTssD,GAAmB,EAEdxxF,EAAI,EAAG4E,EAAMysF,EAAInxF,OAAQF,EAAI4E,EAAK5E,IAAK,CAC9C,IAAIioB,EAAKopE,EAAIrxF,GACToxF,EAAME,EAAQ16E,WAAWqR,GAEzBmpE,EAAMG,IACRA,EAASH,EACTI,EAAkBxxF,GAItB,IAAIyxF,EAAY,GAEQ,IAApBD,EACFC,EAAU1tF,KAAKstF,EAAI,GAAIA,EAAI,IAClBG,IAAoBH,EAAInxF,OAAS,EAC1CuxF,EAAU1tF,KAAKstF,EAAIG,EAAkB,GAAIH,EAAIG,IAE7CC,EAAU1tF,KAAKstF,EAAIG,EAAkB,GAAIH,EAAIG,GAAkBH,EAAIG,EAAkB,IASvF,IANA,IAAIE,EAAM,GAENC,EAAuB1oF,KAAKo9B,SAASxI,UACrCvuB,EAAQqiF,EAAqBriF,MAC7BC,EAASoiF,EAAqBpiF,OAEzBzB,EAAK,EAAGwpB,EAAOm6D,EAAUvxF,OAAS,EAAG4N,EAAKwpB,EAAMxpB,IAAM,CAC7D,IAAI8jF,EAAMH,EAAU3jF,GAChB+jF,EAAMJ,EAAU3jF,EAAK,GAEzB,GAAI8jF,EAAI3sF,IAAM4sF,EAAI5sF,EAIhB,IAHA,IAAIgxD,EAAOx0D,KAAKsE,IAAI,EAAGtE,KAAKqE,IAAI8rF,EAAIv7E,EAAGw7E,EAAIx7E,IACvC6/C,EAAOz0D,KAAKqE,IAAIyJ,EAAQ9N,KAAKsE,IAAI6rF,EAAIv7E,EAAGw7E,EAAIx7E,IAEvCA,EAAI4/C,EAAM5/C,GAAK6/C,EAAM7/C,IAC5Bq7E,EAAI3tF,KAAK,IAAIoU,GAAMy5E,EAAI3sF,EAAGoR,SAO5B,IAJA,IAAIjW,GAAKyxF,EAAIx7E,EAAIu7E,EAAIv7E,IAAMw7E,EAAI5sF,EAAI2sF,EAAI3sF,GACnC6wD,EAAOr0D,KAAKsE,IAAI,EAAGtE,KAAKqE,IAAI8rF,EAAI3sF,EAAG4sF,EAAI5sF,IACvC8wD,EAAOt0D,KAAKqE,IAAIwJ,EAAO7N,KAAKsE,IAAI6rF,EAAI3sF,EAAG4sF,EAAI5sF,IAEtCA,EAAI6wD,EAAM7wD,GAAK8wD,EAAM9wD,IAAK,CACjC,IAAIy8E,EAAKthF,GAAK6E,EAAI2sF,EAAI3sF,GAAK2sF,EAAIv7E,EAE/Bq7E,EAAI3tF,KAAK,IAAIoU,GAAMlT,EAAGy8E,KAQ5B,IAHA,IAAIoQ,EAAW5sD,IACX6sD,GAAW,EAENz3B,EAAM,EAAG03B,EAAQN,EAAIxxF,OAAQo6D,EAAM03B,EAAO13B,IAAO,CACxD,IAAI23B,EAAMP,EAAIp3B,GAEV43B,EAAOZ,EAAQ16E,WAAWq7E,GAE1BC,EAAOJ,IACTA,EAAWI,EACXH,EAAUz3B,GAId,MAAO,CACL82B,IAAKU,EACL3hC,WAAY4hC,EAAU,EAAId,EAAkBhoF,KAAKo9B,SAASwqB,sBAAsB6gC,EAAIK,MAIxFx7E,EAAOk6E,gBAAkB,WACvB,IACInhF,EAAQrG,KAAKuY,QAAe,MAMhC,OAJKlS,IACHA,EAJiB,KAOZA,GAGF0gF,EAtUQ,CAuUfhE,IAEFgE,GAAWt4D,aArVK,CACd,eAAkB,kBAClB,SAAW,EACX,YAAe,KACf,WAAc,QACd,MAAS,IACT,UAAa,IACb,QAAU,EACV,MAAS,KACT,QAAW,OA6Ub,IAQIy6D,GAAU,SAAUlC,GACtBr6E,GAAeu8E,EAASlC,GAExB,IAAI15E,EAAS47E,EAAQ/wF,UAMrB,SAAS+wF,EAAQj4E,EAASsH,GACxB,IAAIwX,EAQJ,YANgB,IAAZxX,IACFA,EAAU,KAGZwX,EAAQi3D,EAAa1uF,KAAK0H,KAAMuY,IAAYvY,MACtC2jE,SAAW1yD,EACV8e,EA6FT,OA1GAziB,EAAO83E,cAAgB,WACrB,MAAO,WAeT93E,EAAOsqC,MAAQ,SAAeorC,GAC5B,GAAIkG,EAAQtD,UAAU5C,GAGpB,OAFAA,EAAMhrE,GAAG,YAAahY,KAAK4wB,YAAa5wB,MACxCgjF,EAAMhrE,GAAG,WAAYhY,KAAKmpF,WAAYnpF,MAC/BgnF,EAAa7uF,UAAUy/C,MAAMt/C,KAAK0H,KAAMgjF,GAE/C,MAAM,IAAIhlF,MAAM,0DAIpBsP,EAAO+F,SAAW,SAAqB+1E,GAErC,OADAppF,KAAKuY,QAAQ8wE,eAAiBD,EACvBppF,MAGTsN,EAAO27D,SAAW,WAChB,OAAOjpE,KAAKuY,QAAQ8wE,gBAGtB/7E,EAAOo2D,WAAa,WAClB,OAAO1jE,KAAK2jE,UAGdr2D,EAAOm2E,QAAU,WACf,IAAIzuE,EAAMlC,GAAS,OACfyF,EAAUvY,KAAKuY,SAAW,GAE1BA,EAAQjS,SACV0O,EAAI3M,MAAM/B,OAASiS,EAAQjS,OAAS,MAGlCiS,EAAQlS,QACV2O,EAAI3M,MAAMhC,MAAQkS,EAAQlS,MAAQ,MAGpC,IAAI+iF,EAAU7wE,EAAQ8wE,gBAAkB9wE,EAAQ6wE,QAOhD,OALKA,GAAW7wE,EAAQjS,SACtB0O,EAAI3M,MAAMkX,WAAahH,EAAQjS,OAAS,MAG1C0O,EAAIxB,UAAY,eAAkB41E,EAAU,KAAQppF,KAAK2jE,SAAW,SAC7D3uD,GAGT1H,EAAO67E,WAAa,WAClBtvF,aAAamG,KAAK+yD,UAEd/yD,KAAKq9B,aACPr9B,KAAKujF,kBAITj2E,EAAOsjB,YAAc,SAAqB7c,GACxC,IAAI2pB,EAAS19B,KAEbnG,aAAamG,KAAK+yD,UAClB,IAAIl1D,EAAMmC,KAAKo9B,SAEf,GAAKv/B,EAAL,CAIA,IAAIszB,EAAQtzB,EAAIsuD,cAAcp4C,EAAEmzC,YAAa,EAAG,IAEZ,IAAhClnD,KAAKuY,QAAqB,YAC5BvY,KAAKG,KAAKgxB,GAEVnxB,KAAK+yD,SAAWn5D,YAAW,WACrBiE,GACF6/B,EAAOv9B,KAAKgxB,KAEbnxB,KAAKuY,QAAqB,eAIjCjL,EAAO2xB,SAAW,WAChBplC,aAAamG,KAAK+yD,UAEd/yD,KAAKijF,SACPjjF,KAAKijF,OAAOhrE,IAAI,YAAajY,KAAKspF,YAAatpF,MAE/CA,KAAKijF,OAAOhrE,IAAI,WAAYjY,KAAKmpF,WAAYnpF,QAIjDsN,EAAOs3E,cAAgB,WACrB,OAAO5kF,KAAKo9B,SAASkqB,iBAAiBtnD,KAAKojF,iBAAatnF,EAAW,GAAGmS,KAAKjO,KAAKuY,QAAY,GAAGvY,KAAKuY,QAAY,KAG3G2wE,EA/GK,CAgHZnG,IAEFmG,GAAQz6D,aA1HQ,CACd,MAAS,EACT,OAAU,EACV,UAAa,OACb,eAAkB,mBAClB,YAAe,MAsHjB,IAYI86D,GAAO,SAAUvC,GAGnB,SAASuC,EAAKhxE,GACZ,OAAOyuE,EAAa1uF,KAAK0H,KAAMuY,IAAYvY,KAH7C2M,GAAe48E,EAAMvC,GAMrB,IAAI15E,EAASi8E,EAAKpxF,UAuJlB,OArJAmV,EAAO83E,cAAgB,WACrB,MAAO,QAGT93E,EAAOsqC,MAAQ,SAAeorC,GAM5B,OALIA,EAAMwG,OAASxG,EAAMwG,QAAUxpF,MACjCgjF,EAAMyG,aAGRzG,EAAMwG,MAAQxpF,KACP+iF,GAAY5qF,UAAUy/C,MAAMz0C,MAAMnD,KAAMhJ,YAGjDsW,EAAOo8E,SAAW,SAAkBC,GAElC,OADA3pF,KAAKuY,QAAe,MAAIoxE,EACjB3pF,MAGTsN,EAAOs8E,SAAW,WAChB,OAAO5pF,KAAKuY,QAAe,OAAK,IAGlCjL,EAAOm2E,QAAU,WACf,GAAIzjF,KAAKuY,QAAgB,OAAG,CAC1B,GAAI3gB,EAASoI,KAAKuY,QAAe,OAAI,CACnC,IAAInF,EAAYN,GAAS,OAEzB,OADAM,EAAUI,UAAYxT,KAAKuY,QAAe,MACnCnF,EAEP,OAAOpT,KAAKuY,QAAe,MAG7B,IAAIvD,EAAMlC,GAAS,OAEf9S,KAAKuY,QAAwB,gBAC/BrB,GAASlC,EAAKhV,KAAKuY,QAAwB,gBAG7CvD,EAAI3M,MAAMhC,MAAQrG,KAAK6pF,gBAAkB,KAEzC,IAAIC,EAAY9pF,KAAK+pF,qBAIrB,OAFA/0E,EAAI1B,YAAYw2E,GAChB9xE,GAAGhD,EAAK,cAAeL,IAChBK,GAIX1H,EAAOu3E,UAAY,WACjB,IAAK7kF,KAAKo9B,SACR,OAAO,KAGT,IAAIixC,EAAUruE,KAAKo9B,SAASxI,UACxBp5B,EAAIwE,KAAKo9B,SAAS4qB,0BAA0BhoD,KAAK4kF,iBACjD10E,EAAOlQ,KAAK40B,UACZ31B,EAAK,EACLC,EAAK,EAUT,OARI1D,EAAEQ,EAAIkU,EAAY,MAAIm+D,EAAe,QACvCpvE,GAAMiR,EAAY,OAGhB1U,EAAE4R,EAAI8C,EAAa,OAAIm+D,EAAgB,SACzCnvE,GAAMgR,EAAa,QAGd,IAAIhB,GAAMjQ,EAAIC,IAGvBoO,EAAO62E,mBAAqB,WAC1B,IAAI3oF,EAAIwE,KAAK6kF,YAAYn2E,QAAQ,GAEjC,OAAOlT,EAAEQ,EAAI,MAAQR,EAAE4R,EAAI,MAG7BE,EAAO40B,UAAY,WACjB,MAAO,CACL,kDAAmDliC,KAAKujF,iBAI5Dj2E,EAAOy8E,mBAAqB,WAC1B,IAAIhqF,EAAKC,KACLnC,EAAMmC,KAAKo9B,SACX4sD,EAAKl3E,GAAS,MAClBoE,GAAS8yE,EAAI,uBACb,IAoBIC,EAAMC,EApBNP,EAAQ3pF,KAAK4pF,WAEjB,SAASO,EAAY/3C,GACnB,OAAO,SAAUr+B,GACf,IAAI4Y,EAAQ9uB,EAAI4rD,YAAY11C,EAAG,SAE/B4Y,EAAc,OAAI5sB,EAClB4sB,EAAa,MAAI5sB,EAAGkjF,OACpBt2D,EAAa,MAAIylB,GAIF,IAFFpyC,KAAKoqF,UAAUz9D,IAM5B5sB,EAAGK,QAMP,IAAK,IAAIrJ,EAAI,EAAG4E,EAAMguF,EAAM1yF,OAAQF,EAAI4E,EAAK5E,IAAK,CAGhD,GAAa,OAFbkzF,EAAON,EAAM5yF,KAEgB,MAATkzF,EAElB/yE,GADAgzE,EAAUp3E,GAAS,MACD,8BACb,CACLo3E,EAAUp3E,GAAS,MACnB,IAAIu3E,EAAYJ,EAAW,KAEvBlyF,EAAWsyF,KACbA,EAAYA,EAAU,CACpB,MAASrqF,KAAKijF,OACd,MAASlsF,KAIbmzF,EAAQ12E,UAAY62E,EACpBH,EAAQE,UAAYH,EAAY,MAChCjyE,GAAGkyE,EAAS,QAASC,EAAYpzF,IAGnCizF,EAAG12E,YAAY42E,GAGjB,IAAIzqE,EAAYzf,KAAKuY,QAAmB,WAAK,EAM7C,OAJIkH,EAAY,GACdpM,GAAS22E,EAAI,eAAiBvqE,EAAY,yBAGrCuqE,GAGT18E,EAAOu8E,cAAgB,WAGrB,OADY7pF,KAAKuY,QAAe,OADb,KAKdgxE,EA9JE,CA+JTxG,IAEFwG,GAAK96D,aA7KgB,CACnB,eAAkB,gBAClB,UAAa,KACb,eAAkB,GAClB,iBAAmB,EACnB,SAAW,EACX,MAAS,IACT,UAAa,EACb,QAAU,EACV,MAAS,KAqKX,IAAI67D,GAAW,CACbC,QAAS,SAAiBhyE,GASxB,OARAvY,KAAKwqF,aAAejyE,EAEhBvY,KAAKwpF,MACPxpF,KAAKwpF,MAAMh8D,WAAWjV,GAEtBvY,KAAKgY,GAAG,cAAehY,KAAKyqF,iBAAkBzqF,MAGzCA,MAET0qF,SAAU,SAAkBxjC,GAC1B,IAAIrpD,EAAMmC,gBAAgB8/C,GAAQ9/C,KAAOA,KAAKo9B,SAgB9C,OAdK8pB,IACHA,EAAalnD,KAAKsd,aAGftd,KAAKwpF,MAORxpF,KAAKwpF,MAAMrpF,KAAK+mD,GANZlnD,KAAKwqF,cAAgB3sF,IACvBmC,KAAK2qF,UAAU3qF,KAAKwqF,cAEpBxqF,KAAKwpF,MAAMrpF,KAAK+mD,IAMblnD,MAET4qF,aAAc,SAAsBjB,GAWlC,OAVK3pF,KAAKwqF,eACRxqF,KAAKwqF,aAAe,IAGlBlvF,MAAMC,QAAQouF,KAChB3pF,KAAKwqF,aAAqB,QAAI,GAGhCxqF,KAAKwqF,aAAoB,MAAIb,EAC7B3pF,KAAKuqF,QAAQvqF,KAAKwqF,cACXxqF,MAET6qF,aAAc,WACZ,OAAI7qF,KAAKwpF,MACAxpF,KAAKwpF,MAAMI,WACT5pF,KAAKwqF,cACPxqF,KAAKwqF,aAAoB,OAG3B,IAET/tC,UAAW,WAKT,OAJIz8C,KAAKwpF,OACPxpF,KAAKwpF,MAAMppF,OAGNJ,MAETypF,WAAY,WAMV,OALAzpF,KAAKiY,IAAI,cAAejY,KAAKyqF,iBAAkBzqF,MAE/CA,KAAKy7C,qBAEEz7C,KAAKwqF,aACLxqF,MAET2qF,UAAW,SAAmBpyE,GAK5B,OAJAvY,KAAKwpF,MAAQ,IAAID,GAAKhxE,GAEtBvY,KAAKwpF,MAAM5xC,MAAM53C,MAEVA,MAETy7C,YAAa,WASX,OARIz7C,KAAKwpF,QACPxpF,KAAKy8C,YAELz8C,KAAKwpF,MAAMl8D,gBAEJttB,KAAKwpF,OAGPxpF,MAETyqF,iBAAkB,SAA0B99D,GAC1C,OAAI3sB,KAAK0rB,QAAQ,eAAiB,IAGhC1rB,KAAK0qF,SAAS/9D,EAAkB,aACzB,KAIbmzB,GAAMtxB,QAAQ87D,IACdnzC,GAAS3oB,QAAQ87D,IACjB,IASIQ,GAAU,SAAU3f,GAGtB,SAAS2f,EAAQvyE,GAKf,OAJIA,GAAWA,EAAkB,WAAM3gB,EAAS2gB,EAAkB,YAChEA,EAAkB,SAAI1hB,EAAO,GAAI0hB,EAAkB,WAG9C4yD,EAAW7yE,KAAK0H,KAAMuY,IAAYvY,KAP3C2M,GAAem+E,EAAS3f,GAUxB,IAAI79D,EAASw9E,EAAQ3yF,UAuJrB,OArJAmV,EAAOsqC,MAAQ,SAAe/5C,GAG5B,GAFAmC,KAAKstB,UAEAzvB,EAAI0a,QAAiB,QACxB,OAAOvY,KAGTA,KAAKorE,KAAOvtE,EACZ,IAAIktF,EAAmBltF,EAAIwiD,QAAQmzB,QAanC,OAZAxzE,KAAKgrF,gBAAkBl4E,GAAS,OAChCO,GAASrT,KAAKgrF,gBAAiB,uCAC/BhrF,KAAKytE,SACLsd,EAAiBz3E,YAAYtT,KAAKgrF,iBAE9BhrF,KAAKq/B,OACPr/B,KAAKq/B,QAGPr/B,KAAK8rB,KAAK,MAAO,CACf,IAAOi/D,IAEF/qF,MAGTsN,EAAOmgE,OAAS,WAUd,OATAztE,KAAKgrF,gBAAgBx3E,UAAY,GACjCxT,KAAKirF,YAAcjrF,KAAKyjF,QAAQzjF,KAAKo9B,UAEjCp9B,KAAKirF,cACPjrF,KAAK2lF,kBAEL3lF,KAAKgrF,gBAAgB13E,YAAYtT,KAAKirF,cAGjCjrF,MAGTsN,EAAO8vB,OAAS,WACd,OAAOp9B,KAAKorE,MAGd99D,EAAOq3E,YAAc,WACnB,OAAO9tF,EAAO,GAAImJ,KAAKkrF,OAAOlrF,KAAKuY,QAAkB,YAGvDjL,EAAO69E,YAAc,SAAqBpT,GASxC,OARIngF,EAASmgF,GACX/3E,KAAKuY,QAAkB,SAAIw/D,EAE3B/3E,KAAKuY,QAAkB,SAAI1hB,EAAO,GAAIkhF,GAGxC/3E,KAAK2lF,kBAEE3lF,MAGTsN,EAAO89E,kBAAoB,WACzB,IAEIpvF,EAAGoR,EAFH2qE,EAAW/3E,KAAK2kF,cAChBz0E,EAAOlQ,KAAKo9B,SAASxI,UAezB,OAZKx9B,EAAM2gF,EAAe,MAEd3gF,EAAM2gF,EAAgB,SAChC/7E,EAAIkU,EAAY,MAAIyF,SAASoiE,EAAgB,QAF7C/7E,EAAI2Z,SAASoiE,EAAe,MAKzB3gF,EAAM2gF,EAAc,KAEb3gF,EAAM2gF,EAAiB,UACjC3qE,EAAI8C,EAAa,OAAIyF,SAASoiE,EAAiB,SAF/C3qE,EAAIuI,SAASoiE,EAAc,KAKtB,IAAI7oE,GAAMlT,EAAGoR,IAGtBE,EAAO4zC,aAAe,WACpB,OAAOlhD,KAAKgrF,iBAGd19E,EAAOm3E,OAAS,WACd,OAAOzkF,KAAKirF,aAGd39E,EAAOnN,KAAO,WAEZ,OADAH,KAAKgrF,gBAAgB3iF,MAAMi8E,QAAU,GAC9BtkF,MAGTsN,EAAOlN,KAAO,WAEZ,OADAJ,KAAKgrF,gBAAgB3iF,MAAMi8E,QAAU,OAC9BtkF,MAGTsN,EAAO+vB,UAAY,WACjB,OAAOr9B,KAAKgrF,iBAA0D,KAAvChrF,KAAKgrF,gBAAgB3iF,MAAMi8E,SAG5Dh3E,EAAOggB,OAAS,WACd,OAAKttB,KAAKorE,MAIV73D,GAAcvT,KAAKgrF,iBAEfhrF,KAAKi/B,UACPj/B,KAAKi/B,kBAGAj/B,KAAKorE,YACLprE,KAAKgrF,uBACLhrF,KAAKirF,YACZjrF,KAAK8rB,KAAK,UACH9rB,MAbEA,MAgBXsN,EAAO49E,OAAS,SAAgBnT,GAC9B,IAAIv8E,EAAIu8E,EAMR,OAJIngF,EAASmgF,KACXv8E,EAAIsvF,EAAmB,UAAEtvF,IAGpBA,GAGT8R,EAAOq4E,gBAAkB,WACvB,IAAI5N,EAAW/3E,KAAK2kF,cASpB,IAAK,IAAInpF,KAPJu8E,IACHA,EAAW,CACT,IAAO,GACP,KAAQ,KAIEA,EACRA,EAAS9/E,eAAeuD,KAC1Bu8E,EAASv8E,GAAKma,SAASoiE,EAASv8E,IAChCwE,KAAKgrF,gBAAgB3iF,MAAM7M,GAAKu8E,EAASv8E,GAAK,MAIlDwE,KAAK8rB,KAAK,iBAAkB,CAC1B,SAAYj1B,EAAO,GAAIkhF,MAIpB+S,EAlKK,CAmKZvgE,GAAUgD,KAEZu9D,GAAQO,UAAY,CAClB,WAAY,CACV,IAAO,GACP,KAAQ,IAEV,YAAa,CACX,IAAO,GACP,MAAS,IAEX,cAAe,CACb,OAAU,GACV,KAAQ,IAEV,eAAgB,CACd,OAAU,GACV,MAAS,KAGbvrC,GAAMrxB,aAAa,CACjB,SAAW,IAEbqxB,GAAMtxB,QAAQ,CACZ88D,WAAY,SAAoB9X,GAC9B,OAAIxzE,KAAKmhD,cAAc/1C,YAIvBooE,EAAQ57B,MAAM53C,MAHLA,MAMXurF,cAAe,SAAuB/X,GACpC,OAAKA,GAAWA,EAAQp2C,WAAap9B,MAIrCwzE,EAAQlmD,SACDttB,MAJEA,QAOb,IAOIwrF,GAAc,oDAEdC,GAAc,SAAUC,GAG1B,SAASD,IACP,OAAOC,EAASvoF,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAe8+E,EAAaC,GAM5B,IAAIp+E,EAASm+E,EAAYtzF,UAoCzB,OAlCAmV,EAAOm2E,QAAU,WAMf,OALAzjF,KAAK2rF,sBAAwB74E,GAAS,OACtC9S,KAAK2rF,sBAAsB34E,UAAY,uBAEvChT,KAAK4rF,UAEE5rF,KAAK2rF,uBAGdr+E,EAAO+xB,MAAQ,WACbr/B,KAAKo9B,SAASplB,GAAGwzE,GAAaxrF,KAAK4rF,QAAS5rF,OAG9CsN,EAAO2xB,SAAW,WAChBj/B,KAAKo9B,SAASnlB,IAAIuzE,GAAaxrF,KAAK4rF,QAAS5rF,OAG/CsN,EAAOs+E,QAAU,WACf,IAAI/tF,EAAMmC,KAAKo9B,SAEf,GAAKv/B,EAAL,CAIA,IAAIguF,EAAehuF,EAAIkoD,YAAW,SAAUlpB,GAC1C,OAAOA,EAAMtkB,QAAqB,eACjCi/C,UAAU35D,KAAI,SAAUg/B,GACzB,OAAOA,EAAMtkB,QAAqB,eAGhCtH,EAAUjR,KAAKuY,QAAiB,SAAKszE,EAAa50F,OAAS,EAAI,MAAQ40F,EAAarqF,KAAK,MAAQ,IACrGxB,KAAK2rF,sBAAsBn4E,UAAY,iCAAmCvC,EAAU,YAG/Ew6E,EA3CS,CA4ChBX,IAEFW,GAAYh9D,aAvDI,CACd,SAAY,CACV,OAAU,EACV,KAAQ,GAEV,QAAW,+DAmDbqxB,GAAMrxB,aAAa,CACjB,aAAe,IAEjBqxB,GAAMkB,eAAc,WAClB,IAAIvkD,EAAIuD,KAAKuY,QAAqB,aAAKvY,KAAKuY,QAA4B,mBAEpE9b,IACFuD,KAAK8rF,mBAAqB,IAAIL,GAAYhvF,GAC1CuD,KAAKsrF,WAAWtrF,KAAK8rF,wBAGzB,IAQIC,GAAgB,SAAUL,GAG5B,SAASK,IACP,OAAOL,EAASvoF,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAeo/E,EAAeL,GAM9B,IAAIp+E,EAASy+E,EAAc5zF,UAkK3B,OAhKAmV,EAAOm2E,QAAU,WACf,IAAIrwE,EAAYpT,KAAKoT,UAAYN,GAAS,MAAO9S,KAAKuY,QAAwB,gBAC1E0xC,EAAQjqD,KAAKiqD,MAAQn3C,GAAS,MAAO,SACrCqd,EAASnwB,KAAKmwB,OAASrd,GAAS,UAGpC,OAFAM,EAAUE,YAAY6c,GACtB/c,EAAUE,YAAY22C,GACf72C,GAGT9F,EAAO+xB,MAAQ,WACbrnB,GAAGhY,KAAKmwB,OAAQ,YAAanwB,KAAKgsF,MAAOhsF,MACzCgY,GAAGhY,KAAKiqD,MAAO,aAAcjqD,KAAKisF,MAAOjsF,MACzCgY,GAAGhY,KAAKo9B,SAAU,QAASp9B,KAAKisF,MAAOjsF,OAGzCsN,EAAO2xB,SAAW,WACZj/B,KAAKiqD,QACPhyC,GAAIjY,KAAKmwB,OAAQ,YAAanwB,KAAKgsF,MAAOhsF,MAC1CiY,GAAIjY,KAAKiqD,MAAO,aAAcjqD,KAAKisF,MAAOjsF,MAC1CiY,GAAIjY,KAAKo9B,SAAU,QAASp9B,KAAKisF,MAAOjsF,MACxCuT,GAAcvT,KAAKiqD,OACnB12C,GAAcvT,KAAKmwB,eACZnwB,KAAKiqD,aACLjqD,KAAKmwB,cACLnwB,KAAKoT,YAIhB9F,EAAO0+E,MAAQ,WACRn1E,GAAS7W,KAAKoT,UAAW,WAC5B8D,GAASlX,KAAKoT,UAAW,SAEzBpT,KAAKksF,iBAIT5+E,EAAO2+E,MAAQ,SAAel4E,GACvB/T,KAAKiqD,MAAMlzC,SAAShD,EAAEo4E,WAAap4E,EAAEq4E,gBACxCl5E,GAASlT,KAAKoT,UAAWpT,KAAKuY,QAAwB,iBAI1DjL,EAAO4+E,aAAe,WACpBlsF,KAAKiqD,MAAMz2C,UAAY,GACvB,IAAIw2E,EAAKl3E,GAAS,MAClB9S,KAAKiqD,MAAM32C,YAAY02E,GAEvBhqF,KAAKm3E,cAAcn3E,KAAKo9B,SAAU4sD,IAGpC18E,EAAO6pE,cAAgB,SAAuBt5E,EAAKwuF,GACjD,IAAIzpF,EAAO/E,EAAI8nD,eACXtH,EAASxgD,EAAIioD,YACbnqD,EAAM0iD,EAAOpnD,OAEjB,GAAI2L,EAAM,CACR,IAAI0pF,EAAa1pF,EAAKy7C,QAAU,CAACz7C,GAC7B2pF,EAAKz5E,GAAS,KAAM,SACpBk3E,EAAKl3E,GAAS,MACd0yD,EAAQ1yD,GAAS,SACrB0yD,EAAMhyD,UAAYxT,KAAKuY,QAAmB,UAC1Cg0E,EAAGj5E,YAAYkyD,GAEf,IAAK,IAAIzuE,EAAI,EAAGs3B,EAAOi+D,EAAWr1F,OAAQF,EAAIs3B,EAAMt3B,IAAK,CACvD,IAAI8lC,EAAQyvD,EAAWv1F,GAEnBiJ,KAAKwsF,YAAY3vD,KACnBmtD,EAAG12E,YAAYtT,KAAKysF,aAAaH,EAAWv1F,IAAI,IAChDw1F,EAAGj5E,YAAY02E,GACfqC,EAAI/4E,YAAYi5E,KAKtB,GAAI5wF,EAAK,CACP,IAAI+wF,EAAM55E,GAAS,KAAM,SACrB65E,EAAM75E,GAAS,MACf85E,EAAS95E,GAAS,SAEtB85E,EAAOp5E,UAAYxT,KAAKuY,QAAsB,aAE9Cm0E,EAAIp5E,YAAYs5E,GAEhB,IAAK,IAAI/nF,EAAK,EAAGA,EAAKlJ,EAAKkJ,IAAM,CAC/B,IAAIkzC,EAASsG,EAAOx5C,GAEhB7E,KAAKwsF,YAAYz0C,IACnB40C,EAAIr5E,YAAYtT,KAAKysF,aAAa10C,IAItC20C,EAAIp5E,YAAYq5E,GAEhBN,EAAI/4E,YAAYo5E,KAIpBp/E,EAAOk/E,YAAc,SAAqB3vD,GACxC,IAAIziC,EAAKyiC,EAAMqG,QACX2pD,EAAgB7sF,KAAKuY,QAAuB,cAChD,QAASs0E,EAAc51F,QAAU41F,EAAc5xF,QAAQb,IAAO,IAGhEkT,EAAOm/E,aAAe,SAAsB5vD,EAAOiwD,GACjD,IAAI/8D,EAAQ/vB,KAERusF,EAAKz5E,GAAS,KAAM,SACpB0yD,EAAQ1yD,GAAS,SACjBtV,EAAQsV,GAAS,SACjBjV,EAAMmC,KAAKo9B,SACXimD,EAAUxmD,EAAMtkB,QAAiB,QACrCskB,EAAMtkB,QAAiB,SAAI,EAC3B,IAAI8U,EAAUwP,EAAMQ,YA6CpB,OA5CAR,EAAMtkB,QAAiB,QAAI8qE,EAC3BkJ,EAAGv5E,UAAY,QAEX85E,GACFtvF,EAAMmB,KAAO,QACbnB,EAAMtD,KAAO,QAEbsD,EAAMmB,KAAO,WAGfnB,EAAMuvF,QAAU1J,GAAWh2D,EAEtBA,GACH7vB,EAAM2X,aAAa,WAAY,YAGjC3X,EAAMwvF,SAAW,SAAUj5E,GACzB,GAAsB,UAAlBA,EAAEqT,OAAOzoB,KAAkB,CAC7B,IAAIshD,EAAYpiD,EAAI8nD,eAChB2mC,EAAarsC,EAAU5B,OAE3B,GAAIiuC,EACF,IAAK,IAAIv1F,EAAI,EAAG4E,EAAM2wF,EAAWr1F,OAAQF,EAAI4E,EAAK5E,IAAK,CACrD,IAAIupD,EAAagsC,EAAWv1F,GAE5BupD,EAAWA,IAAezjB,EAAQ,OAAS,eAEnCojB,EAAU5iB,aACpB4iB,EAAU9/C,OAGZtC,EAAIq6C,WAAW,qBAEfrb,EAAM9oB,EAAEqT,OAAO2lE,QAAU,OAAS,UAGpCh9D,EAAMjE,KAAK,cAAe,CACxB1E,OAAQyV,KAIZ0vD,EAAGj5E,YAAY9V,GACfgoE,EAAMhyD,UAAYqpB,EAAMqG,QACxBqpD,EAAGj5E,YAAYkyD,GACR+mB,GAGFR,EAzKW,CA0KlBjB,IAEFiB,GAAct9D,aApLE,CACd,SAAY,YACZ,UAAa,cACb,aAAgB,SAChB,cAAiB,GACjB,eAAkB,4BAgLpBqxB,GAAMrxB,aAAa,CACjB,sBAAwB,IAE1BqxB,GAAMkB,eAAc,WACdhhD,KAAKuY,QAA8B,uBACrCvY,KAAKitF,qBAAuB,IAAIlB,GAAc/rF,KAAKuY,QAA8B,sBACjFvY,KAAKsrF,WAAWtrF,KAAKitF,0BAGzB,IAkBIC,GAAW,SAAUxB,GAGvB,SAASwB,IACP,OAAOxB,EAASvoF,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAeugF,EAAUxB,GAMzB,IAAIp+E,EAAS4/E,EAAS/0F,UAiPtB,OA/OAmV,EAAOm2E,QAAU,WACf,IAAIvzE,EAAOlQ,KAAKuY,QAAc,KAEzBvY,KAAKuY,QAAkB,WAC1BrI,EAAO,CAAC,EAAG,IAGb,IAAIkD,EAAYN,GAAS,OACrBq6E,EAAentF,KAAKmtF,aAAer6E,GAAS,OAChDq6E,EAAa9kF,MAAMhC,MAAQ6J,EAAK,GAAK,KACrCi9E,EAAa9kF,MAAM/B,OAAS4J,EAAK,GAAK,KACtCi9E,EAAan6E,UAAYhT,KAAKuY,QAAwB,eACtD,IAAI4X,EAASnwB,KAAKmwB,OAASrd,GAAS,OAIpC,OAHAqd,EAAOnd,UAAYhT,KAAKuY,QAAqB,YAC7CnF,EAAUE,YAAY65E,GACtB/5E,EAAUE,YAAY6c,GACf/c,GAGT9F,EAAO+xB,MAAQ,WACTr/B,KAAKuY,QAAkB,UACzBvY,KAAKotF,kBAGPptF,KAAKo9B,SAASplB,GAAG,uDAAwDhY,KAAK4rF,QAAS5rF,MAAMgY,GAAG,eAAgBhY,KAAKqtF,iBAAkBrtF,MAAMgY,GAAG,yBAA0BhY,KAAKwhD,wBAAyBxhD,MACxMgY,GAAGhY,KAAKmwB,OAAQ,QAASnwB,KAAKstF,eAAgBttF,MAE9CA,KAAKutF,qBAGPjgF,EAAO2xB,SAAW,WAChBj/B,KAAKo9B,SAASnlB,IAAI,uDAAwDjY,KAAK4rF,QAAS5rF,MAAMiY,IAAI,eAAgBjY,KAAKqtF,iBAAkBrtF,MAAMiY,IAAI,yBAA0BjY,KAAKwhD,wBAAyBxhD,MAEvMA,KAAKwtF,YACPxtF,KAAKwtF,UAAUlgE,gBAERttB,KAAKwtF,iBACLxtF,KAAKytF,cAGdx1E,GAAIjY,KAAKmwB,OAAQ,QAASnwB,KAAKstF,eAAgBttF,OAGjDsN,EAAOogF,QAAU,WACf,IAAIx9E,EAAOlQ,KAAKuY,QAAc,KAC1BvD,EAAMhV,KAAKmtF,aAMf,OALAn4E,EAAI3M,MAAMhC,MAAQ6J,EAAK,GAAK,KAC5B8E,EAAI3M,MAAM/B,OAAS4J,EAAK,GAAK,KAE7BlQ,KAAKotF,kBAEEptF,MAGTsN,EAAOqgF,SAAW,WACZ3tF,KAAKwtF,WACPxtF,KAAKwtF,UAAUlgE,gBAGVttB,KAAKwtF,iBACLxtF,KAAKytF,aACZ,IAAIz4E,EAAMhV,KAAKmtF,aAGf,OAFAn4E,EAAI3M,MAAMhC,MAAQ,MAClB2O,EAAI3M,MAAM/B,OAAS,MACZtG,MAGTsN,EAAOsgF,eAAiB,WACtB,OAAO5tF,KAAKwtF,WAGdlgF,EAAOggF,eAAiB,WACjBttF,KAAKwtF,UAGRxtF,KAAK2tF,WAFL3tF,KAAK0tF,UAKP1tF,KAAKutF,qBAGPjgF,EAAOigF,kBAAoB,WACrBvtF,KAAKwtF,UACPxtF,KAAKmwB,OAAO3c,UAAY,IAExBxT,KAAKmwB,OAAO3c,UAAY,KAI5BlG,EAAO8/E,gBAAkB,WACvB,IAAIvvF,EAAMmC,KAAKo9B,SACXpoB,EAAMhV,KAAKmtF,aACX50E,EAAU1a,EAAIgwB,SAClBh3B,EAAO0hB,EAAS,CACd,OAAU1a,EAAIyf,YACd,KAAQtd,KAAK6tF,mBACb,sBAAyB,IACzB,MAAS,EACT,QAAW,EACX,iBAAmB,EACnB,WAAa,EACb,iBAAmB,EACnB,WAAa,EACb,SAAW,EACX,WAAa,EACb,UAAa,OAEf7tF,KAAKwtF,UAAY,IAAI1tC,GAAM9qC,EAAKuD,GAEhCvY,KAAKqtF,mBAELrtF,KAAKytF,aAAe,IAAI/0B,GAAQ14D,KAAK8tF,wBAAyB,CAC5D,WAAa,EACb,OAAU,OACV,OAAU9tF,KAAKuY,QAAgB,SAC9BP,GAAG,UAAWhY,KAAK6tD,WAAY7tD,MAClC,IAAIyqE,GAAY,oBAAqBzqE,KAAKytF,cAAc71C,MAAM53C,KAAKwtF,WACnExtF,KAAK8rB,KAAK,SAGZxe,EAAOugF,iBAAmB,WACxB,IAAIhwF,EAAMmC,KAAKo9B,SACXr3B,EAAOlI,EAAI2hC,UACX0e,EAAUrgD,EAAIm5C,aACdqqC,EAAQrhF,KAAKuY,QAAe,MAEhC,GAAI8oE,EAAQ,GACV,IAAK,IAAItqF,EAAIsqF,EAAOtqF,EAAI,EAAGA,IACzB,GAAIgP,EAAOhP,GAAKmnD,EACd,OAAOn4C,EAAOhP,OAIlB,IAAK,IAAI8N,EAAKw8E,EAAOx8E,EAAK,EAAGA,IAC3B,GAAIkB,EAAOlB,GAAMq5C,EACf,OAAOn4C,EAAOlB,EAKpB,OAAOkB,GAGTuH,EAAOugD,WAAa,WAClB,IAAI/oB,EAAS9kC,KAAKytF,aAAanwE,YAE/Btd,KAAKwtF,UAAUxrC,UAAUld,GAEzB9kC,KAAKo9B,SAAS63C,MAAMnwC,IAGtBx3B,EAAOwgF,sBAAwB,WAC7B,IAAIjwF,EAAMmC,KAAKo9B,SACf,OAAOv/B,EAAIitC,qBAAqB/7B,UAAUlR,KAAI,SAAU2F,GACtD,OAAO3F,EAAIgqD,2BAA2BrkD,OAI1C8J,EAAOs+E,QAAU,WACf,GAAK5rF,KAAKwtF,UAAV,CAIAh4E,GAAmBxV,KAAKwtF,UAAUrsC,eAElC,IAAIjrB,EAASl2B,KAAK8tF,wBAElB9tF,KAAKytF,aAAa3zC,eAAe5jB,GAEjCl2B,KAAKwtF,UAAU1oC,iBAAiB9kD,KAAKo9B,SAAS9f,YAAatd,KAAK6tF,sBAGlEvgF,EAAOk0C,wBAA0B,WAC/B,GAAKxhD,KAAKwtF,UAAV,CAIA,IACI1L,EADM9hF,KAAKo9B,SACM7kB,QAA0B,iBAE/CvY,KAAKwtF,UAAU/sC,oBAAoBqhC,KAGrCx0E,EAAO+/E,iBAAmB,WACxB,GAAKrtF,KAAKwtF,UAAV,CAIA,IACIvtC,EADMjgD,KAAKo9B,SACKuoB,eAEpB,GAAK1F,EAAL,CAMA,IAAI5B,EAAS4B,EAAU5B,OACnB0vC,EAAY,EAEhB,GAAI1vC,EACF,IAAK,IAAItnD,EAAI,EAAGiO,EAAIq5C,EAAOpnD,OAAQF,EAAIiO,EAAGjO,IAAK,CAG7C,GAFasnD,EAAOtnD,GAETsmC,YAAa,CACtB0wD,EAAYh3F,EACZ,OAKN,IAAIgL,EAAOk+C,EAAUhxC,SACjBsJ,EAAU,KAEV8lC,GACF9lC,EAAUxW,EAAKs8C,OAAO0vC,GAAWx1E,SACzB8qE,SAAU,EAElB9qE,EAAUxW,EAAKwW,QAGjBvY,KAAKwtF,UAAU/oC,WAAWlsC,EAAQ2lC,SAAW,MAAMqG,WAAWhsC,EAAQyvB,SAAW,aAE1EzvB,EAAQ2lC,eACR3lC,EAAQyvB,eACRjmC,EAAKwW,QAAQtN,OACpBlJ,EAAKwW,QAAQ8qE,SAAU,EACvBthF,EAAKwW,QAAQg1B,SAAW,SACxB,IAAI1Q,EAAQ2gB,GAAMxD,SAASj4C,GAE3B,IAAK,IAAIvG,KAAKykD,EACRloD,EAAWkoD,EAAUzkD,KAAOykD,EAAUhoD,eAAeuD,IAAMykD,EAAUzkD,KAAOykD,EAAUpoD,YAAYM,UAAUqD,KAC9GqhC,EAAMrhC,GAAKykD,EAAUzkD,IAIzBwE,KAAKwtF,UAAU1sC,aAAajkB,QA5C1B78B,KAAKwtF,UAAU1sC,aAAa,QA+CzBosC,EAxPM,CAyPbpC,IAEFoC,GAASz+D,aA7QO,CACd,MAAS,EACT,SAAY,CACV,MAAS,EACT,OAAU,GAEZ,KAAQ,CAAC,IAAK,KACd,UAAY,EACZ,OAAU,CACR,UAAa,EACb,UAAa,UACb,YAAe,UACf,eAAkB,IAEpB,eAAkB,oBAClB,YAAe,6BA+PjBqxB,GAAMrxB,aAAa,CACjB,iBAAmB,IAErBqxB,GAAMkB,eAAc,WACdhhD,KAAKuY,QAAyB,kBAChCvY,KAAKguF,gBAAkB,IAAId,GAASltF,KAAKuY,QAAyB,iBAClEvY,KAAKsrF,WAAWtrF,KAAKguF,qBAGzB,IAQIC,GAAQ,SAAUvC,GAGpB,SAASuC,IACP,OAAOvC,EAASvoF,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAeshF,EAAOvC,GAMtB,IAAIp+E,EAAS2gF,EAAM91F,UAmInB,OAjIAmV,EAAOm2E,QAAU,WACf,IAAIzuE,EAEJ,GAAIhV,KAAKuY,QAAgB,OACnB3gB,EAASoI,KAAKuY,QAAiB,UACjCvD,EAAMlC,GAAS,QACXU,UAAYxT,KAAKuY,QAAiB,QAEtCvD,EAAMhV,KAAKuY,QAAiB,YAEzB,CAGL,GAFAvD,EAAMlC,GAAS,MAAO,kBAElB9S,KAAKuY,QAAqB,YAAG,CAC/B,IAAI21E,EAAcp7E,GAAS,IAAK,kBAChCo7E,EAAYnnC,KAAO,eAEnBmnC,EAAYC,QAAU,WACpBn5E,EAAI3M,MAAMi8E,QAAU,QAGtBtvE,EAAI1B,YAAY46E,GAGlB,IAAIE,EAAet7E,GAAS,MAAO,0BACnCs7E,EAAa56E,UAAYxT,KAAKuY,QAAiB,QAC/CvD,EAAI1B,YAAY86E,GAalB,OAVApuF,KAAKquF,UAAY,IAAIx+D,GAAY7a,EAAK,CACpC,SAAYhV,KAAK0tD,UAAUtnB,KAAKpmC,MAChC,kBAAoB,IAEtBA,KAAKquF,UAAUr2E,GAAG,YAAahY,KAAK2tD,aAAc3tD,MAAMgY,GAAG,WAAYhY,KAAK4tD,YAAa5tD,MAAMgY,GAAG,UAAWhY,KAAK6tD,WAAY7tD,MAE1HA,KAAKuY,QAAmB,WAC1BvY,KAAKquF,UAAUrhE,SAGVhY,GAGT1H,EAAOmgE,OAAS,WAMd,OALIztE,KAAKquF,YACPruF,KAAKquF,UAAUlhE,iBACRntB,KAAKquF,WAGPvD,GAAQ3yF,UAAUs1E,OAAOn1E,KAAK0H,OAGvCsN,EAAOs2D,WAAa,SAAoB3yD,GACtC,IAAIywB,EAAM1hC,KAAKuY,QAAiB,QAWhC,OAVAvY,KAAKuY,QAAiB,QAAItH,EAC1BjR,KAAK8rB,KAAK,gBAAiB,CACzB,IAAO4V,EACP,IAAOzwB,IAGLjR,KAAKq9B,aACPr9B,KAAKytE,SAGAztE,MAGTsN,EAAOo2D,WAAa,WAClB,OAAO1jE,KAAKuY,QAAiB,SAG/BjL,EAAOogD,UAAY,SAAmBI,GACpC,IACI/6C,GADS+6C,EAAS4lB,YAAc5lB,EAAS1mC,QACxBrU,QAAQ3J,cAE7B,MAAgB,WAAZ2J,GAAoC,UAAZA,GAAmC,WAAZA,GAAoC,WAAZA,GAAoC,aAAZA,GAOrGzF,EAAOqgD,aAAe,SAAsBhhC,GAC1C3sB,KAAKsuF,UAAY3hE,EAAgB,SACjC3sB,KAAKuuF,eAAiB13F,EAAO,GAAImJ,KAAK2kF,eACtC3kF,KAAK8rB,KAAK,YAAaa,IAGzBrf,EAAOsgD,YAAc,SAAqBjhC,GACxC,IACItX,EADMsX,EAAgB,SACTpe,IAAIvO,KAAKsuF,WACtBE,EAAgBxuF,KAAKuuF,eACrBxW,EAAW/3E,KAAK2kF,cAEfvtF,EAAM2gF,EAAc,OACvBA,EAAc,IAAIpiE,SAAS64E,EAAmB,KAAKn5E,EAAOjI,GAGvDhW,EAAM2gF,EAAiB,UAC1BA,EAAiB,OAAIpiE,SAAS64E,EAAsB,QAAKn5E,EAAOjI,GAG7DhW,EAAM2gF,EAAe,QACxBA,EAAe,KAAIpiE,SAAS64E,EAAoB,MAAKn5E,EAAOrZ,GAGzD5E,EAAM2gF,EAAgB,SACzBA,EAAgB,MAAIpiE,SAAS64E,EAAqB,OAAKn5E,EAAOrZ,GAGhEgE,KAAKmrF,YAAYpT,GACjB/3E,KAAK8rB,KAAK,WAAYa,IAGxBrf,EAAOugD,WAAa,SAAoBlhC,UAC/B3sB,KAAKsuF,iBACLtuF,KAAKuuF,eACZvuF,KAAK8rB,KAAK,UAAWa,IAGvBrf,EAAOutC,kBAAoB,WACzB,IAAIh9C,EAAMmC,KAAKo9B,SACXuC,EAAiB3/B,KAAKorF,oBACtBp2E,EAAMhV,KAAKykF,SACXp+E,EAAQsP,SAASX,EAAI2C,aACrBrR,EAASqP,SAASX,EAAI4C,cAE1B,MADc,CAAC/Z,EAAIgqD,2BAA2BloB,EAAezxB,IAAI7H,EAAQ,EAAG,IAAKxI,EAAIgqD,2BAA2BloB,EAAezxB,IAAI7H,EAAOC,EAAS,IAAKzI,EAAIgqD,2BAA2BloB,EAAezxB,IAAI7H,EAAQ,EAAGC,IAAUzI,EAAIgqD,2BAA2BloB,EAAezxB,IAAI,EAAG5H,EAAS,MAIxR2nF,EA1IG,CA2IVnD,IAEFmD,GAAMx/D,aArJU,CACd,SAAY,YACZ,WAAa,EACb,QAAU,EACV,QAAW,GACX,aAAe,IAiJjB,IAQIggE,GAAQ,SAAU/C,GAGpB,SAAS+C,IACP,OAAO/C,EAASvoF,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAe8hF,EAAO/C,GAMtB,IAAIp+E,EAASmhF,EAAMt2F,UAqFnB,OAnFAmV,EAAOm2E,QAAU,SAAiB5lF,GAYhC,OAXAmC,KAAKorE,KAAOvtE,EACZmC,KAAK0uF,gBAAkB57E,GAAS,MAAO9S,KAAKuY,QAAwB,gBAEpEvY,KAAK2uF,aAEL9wF,EAAIma,GAAG,UAAWhY,KAAK4rF,QAAS5rF,MAE5BA,KAAKorE,KAAKtsB,SACZ9+C,KAAK4rF,UAGA5rF,KAAK0uF,iBAGdphF,EAAO2xB,SAAW,WAChBj/B,KAAKo9B,SAASnlB,IAAI,UAAWjY,KAAK4rF,QAAS5rF,OAG7CsN,EAAOqhF,WAAa,WAClB,IAAIC,EAAM,4QAEN5uF,KAAKuY,QAAgB,SACvBvY,KAAK6uF,QAAU17E,GAAW,MAAOnT,KAAKuY,QAAwB,eAAI,KAAOq2E,EAAK5uF,KAAK0uF,kBAGjF1uF,KAAKuY,QAAkB,WACzBvY,KAAK8uF,QAAU37E,GAAW,MAAOnT,KAAKuY,QAAwB,eAAI,KAAOq2E,EAAK5uF,KAAK0uF,mBAIvFphF,EAAOs+E,QAAU,WACf,IACImD,EADM/uF,KAAKorE,KACKpf,gBAAgBhsD,KAAKuY,QAAkB,SAAG,GAE9DvY,KAAKgvF,cAAcD,IAGrBzhF,EAAO0hF,cAAgB,SAAuBD,GACxC/uF,KAAKuY,QAAgB,QAAKw2E,GAC5B/uF,KAAKivF,cAAcF,GAGjB/uF,KAAKuY,QAAkB,UAAKw2E,GAC9B/uF,KAAKkvF,gBAAgBH,IAIzBzhF,EAAO2hF,cAAgB,SAAuBF,GAC5C,IAAII,EAASnvF,KAAKovF,aAAaL,GAC3BvpB,EAAQ2pB,EAAS,IAAOA,EAAS,KAAOA,EAAS,IAAO,MAE5DnvF,KAAKqvF,aAAarvF,KAAK6uF,QAASrpB,EAAO2pB,EAASJ,IAGlDzhF,EAAO4hF,gBAAkB,SAAyBH,GAChD,IACIO,EAAUC,EAAOC,EADjBC,EAAsB,UAAZV,EAGVU,EAAU,MACZH,EAAWG,EAAU,KACrBF,EAAQvvF,KAAKovF,aAAaE,GAE1BtvF,KAAKqvF,aAAarvF,KAAK8uF,QAASS,EAAQ,QAASA,EAAQD,KAEzDE,EAAOxvF,KAAKovF,aAAaK,GAEzBzvF,KAAKqvF,aAAarvF,KAAK8uF,QAASU,EAAO,QAASA,EAAOC,KAI3DniF,EAAO+hF,aAAe,SAAsBv5D,EAAOllB,EAAMnN,GACvDqyB,EAAa,MAAS,MAAIt9B,KAAK8D,MAAM0D,KAAKuY,QAAkB,SAAI9U,GAAS,KACzEqyB,EAAiB,UAAIllB,GAGvBtD,EAAO8hF,aAAe,SAAsBM,GAC1C,IAAIC,EAAQn3F,KAAKoL,IAAI,IAAKpL,KAAKuV,MAAM2hF,GAAO,IAAIz4F,OAAS,GACrD0B,EAAI+2F,EAAMC,EAEd,OAAOA,GADPh3F,EAAIA,GAAK,GAAK,GAAKA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAIA,GAAK,EAAI,EAAI,IAIrD81F,EA5FG,CA6FV3D,IAEF2D,GAAMhgE,aAvGU,CACd,SAAY,cACZ,SAAY,IACZ,QAAU,EACV,UAAY,EACZ,eAAkB,OAmGpBqxB,GAAMrxB,aAAa,CACjB,cAAgB,IAElBqxB,GAAMkB,eAAc,WACdhhD,KAAKuY,QAAsB,eAC7BvY,KAAK4vF,aAAe,IAAInB,GAAMzuF,KAAKuY,QAAsB,cACzDvY,KAAKsrF,WAAWtrF,KAAK4vF,kBAGzB,IAQIC,GAAU,SAAUnE,GAGtB,SAASmE,IACP,OAAOnE,EAASvoF,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAekjF,EAASnE,GAMxB,IAAIp+E,EAASuiF,EAAQ13F,UAuJrB,OArJAmV,EAAOm2E,QAAU,SAAiB5lF,GAChCmC,KAAKorE,KAAOvtE,EACZ,IAAImX,EAAMlC,GAAS,OACfk3E,EAAKl3E,GAAS,KAAM,uBACxBkC,EAAI1B,YAAY02E,GAEZhqF,KAAKuY,QAAkB,SACzBrB,GAASlC,EAAK,6BAEdkC,GAASlC,EAAK,8BAGhB,IAAIjV,EAAKC,KAET,SAAS8vF,EAAcn2F,EAAIy4C,EAAO29C,EAAYC,GAC5C,IAAI/F,EAAOlqF,EAAGkwF,YAAY79C,GAE1B,OAAO,SAAUr+B,GAEf,OADAc,GAAgBd,GACTpa,EAAG,CACR,OAAUswF,EACV,MAAS73C,EACT,WAAc29C,EACd,IAAOC,KAKb,IAAIrG,EAAQ3pF,KAAKuY,QAAe,MAEhC,GAAIvb,EAAe2sF,GACjB,IAAK,IAAI5yF,EAAI,EAAG4E,EAAMguF,EAAM1yF,OAAQF,EAAI4E,EAAK5E,IAAK,CAChD,IAAIkzF,EAAON,EAAM5yF,GACbw1F,EAAKz5E,GAAS,MASlB,GAP+B,KAA3B9S,KAAKuY,QAAgB,SACvBg0E,EAAGlkF,MAAMkX,WAAavf,KAAKuY,QAAgB,OAAI,MAGjDg0E,EAAGlkF,MAAM/B,OAAStG,KAAKuY,QAAgB,OAAI,KAC3Cg0E,EAAGlkF,MAAMs5C,OAAS,UAEdrqC,GAAO2yE,EAAW,MAAI,CACxBsC,EAAGlkF,MAAM6nF,UAAY,SACrB,IAAIC,EAAW54E,GAAW,MAAO0yE,EAAW,MAC5CsC,EAAG/4E,UAAY,2BAA6BxT,KAAKuY,QAAgB,OAAI43E,EAAiB,QAAK,EAAI,QAAUlG,EAAW,KAAI,cAExHsC,EAAG/4E,UAAYy2E,EAAW,KAO5B,GAJIA,EAAY,OACdjyE,GAAGu0E,EAAI,QAASuD,EAAc7F,EAAY,MAAGlzF,EAAG,KAAMw1F,IAGpDvvF,EAAeitF,EAAe,UAAI,CACpC,IAAImG,EAAWpwF,KAAKqwF,gBAAgBt5F,GAEpCw1F,EAAGj5E,YAAY88E,GACf7D,EAAG/C,MAAQ4G,EACXp4E,GAAGu0E,EAAI,aAAa,WAClBvsF,KAAKwpF,MAAMnhF,MAAMi8E,QAAU,MAE7BtsE,GAAGu0E,EAAI,YAAY,WACjBvsF,KAAKwpF,MAAMnhF,MAAMi8E,QAAU,UAI/B0F,EAAG12E,YAAYi5E,GAInB,OAAOv3E,GAGT1H,EAAO+iF,gBAAkB,SAAyBj+C,GAChD,IAAIryC,EAAKC,KAET,SAAS8vF,EAAcn2F,EAAIy4C,EAAO29C,GAChC,IAAI9F,EAAOlqF,EAAGkwF,YAAY79C,GAAiB,SAAE29C,GAE7C,OAAO,SAAUh8E,GAEf,OADAc,GAAgBd,GACTpa,EAAG,CACR,OAAUswF,EACV,MAAS73C,EACT,WAAc29C,KAKpB,IAAIO,EAAUx9E,GAAS,MAAO,qBAC1B62E,EAAQ3pF,KAAKiwF,YACbt0F,EAAMguF,EAAM1yF,OACZs5F,EAASz9E,GAAS,MAClByjD,EAAWozB,EAAMv3C,GAAiB,SAElCA,IAAUz2C,EAAM,GAAK46D,IACvB+5B,EAAQjoF,MAAMuO,QAAU,cACxB25E,EAAOloF,MAAMuO,QAAU,iCAEnB5W,KAAKuY,QAAqB,cAC5Bg4E,EAAOloF,MAAM8tC,OAAS,IAI1Bm6C,EAAQh9E,YAAYR,GAAS,KAAM,iBAGnC,IAFA,IAAI09E,EAAU,EAELz5F,EAAI,EAAGiO,EAAIuxD,EAASt/D,OAAQF,EAAIiO,EAAGjO,IAAK,CAC/C,IAAImZ,EAAOa,GAAawlD,EAASx/D,GAAS,KAAG,QAEzCmZ,EAAK7J,MAAQmqF,IACfA,EAAUtgF,EAAK7J,OAInB,IAAK,IAAIxB,EAAK,EAAG2hD,EAAK+P,EAASt/D,OAAQ4N,EAAK2hD,EAAI3hD,IAAM,CACpD,IAAIwsB,EAAQklC,EAAS1xD,GACjB0nF,EAAKz5E,GAAS,MAClBy5E,EAAG/4E,UAAY,0BAA4B6d,EAAY,KAAI,OAC3Dk7D,EAAGlkF,MAAMs5C,OAAS,UAClB4qC,EAAGlkF,MAAMhC,MAAQmqF,EAAU,GAAK,KAChCx4E,GAAGu0E,EAAGljC,WAAW,GAAI,QAASymC,EAAcz+D,EAAa,MAAG+gB,EAAOvtC,IACnE0rF,EAAOj9E,YAAYi5E,GAGrB,GAAIvsF,KAAKuY,QAAkB,SAAG,CAC5B,IAAIlS,EAAQmqF,EAAU,GAAK,GAAKA,EAE5BxwF,KAAKuY,QAAqB,YAC5B+3E,EAAQjoF,MAAM/G,QAAU+E,EAAQ,IAAU,KAE1CiqF,EAAQjoF,MAAMhH,OAASgF,EAAQ,IAAU,UAElCrG,KAAKuY,QAAqB,YACnC+3E,EAAQjoF,MAAM8tC,OAAS,OAEvBm6C,EAAQjoF,MAAMkN,IAAM,OAKtB,OAFA+6E,EAAQh9E,YAAYi9E,GACpBD,EAAQjoF,MAAMi8E,QAAU,OACjBgM,GAGThjF,EAAO2iF,UAAY,WACjB,OAAOjwF,KAAKuY,QAAe,OAAK,IAG3Bs3E,EA9JK,CA+JZ/E,IAEF+E,GAAQphE,aAzKQ,CACd,OAAU,GACV,UAAY,EACZ,SAAY,YACZ,aAAe,EACf,MAAS,KAqKX,IAQIgiE,GAAO,SAAU/E,GAGnB,SAAS+E,IACP,OAAO/E,EAASvoF,MAAMnD,KAAMhJ,YAAcgJ,KAH5C2M,GAAe8jF,EAAM/E,GAMrB,IAAIp+E,EAASmjF,EAAKt4F,UAmLlB,OAjLAmV,EAAOm2E,QAAU,SAAiB5lF,GAChC,IAAI0a,EAAUvY,KAAKuY,QACfvD,EAAMlC,GAAS,MAAO,iBAE1B,GAAIyF,EAAmB,UAAG,CACxB,IAAIm4E,EAAW59E,GAAS,OAAQ,2BAChCkC,EAAI1B,YAAYo9E,GAChB1wF,KAAK2wF,UAAYD,EAGnB,IAAIE,EAAU99E,GAAS,MAAO,wBAC1B+9E,EAAe/9E,GAAS,IAAK,wBAMjC,GALA+9E,EAAa9pC,KAAO,eACpB8pC,EAAar9E,UAAY,IACzBo9E,EAAQt9E,YAAYu9E,GACpB7wF,KAAK8wF,cAAgBD,EAEjBt4E,EAAgB,OAAG,CACrB,IAAIw4E,EAAMj+E,GAAS,MAAO,4BACtB2E,EAAQ3E,GAAS,MAAO,8BACxBk+E,EAAUl+E,GAAS,OAAQ,gCAC3BqlE,EAAMrlE,GAAS,OAAQ,4BAC3B2E,EAAMnE,YAAY09E,GAClBD,EAAIz9E,YAAYmE,GAChBs5E,EAAIz9E,YAAY6kE,GAChByY,EAAQt9E,YAAYy9E,GACpB/wF,KAAKixF,WAAaF,EAClB/wF,KAAKkxF,aAAez5E,EACpBzX,KAAKmxF,eAAiBH,EACtBhxF,KAAKoxF,WAAajZ,EAGpB,IAAIkZ,EAAgBv+E,GAAS,IAAK,yBAYlC,OAXAu+E,EAActqC,KAAO,eACrBsqC,EAAc79E,UAAY,IAC1Bo9E,EAAQt9E,YAAY+9E,GACpBrxF,KAAKsxF,eAAiBD,EACtBr8E,EAAI1B,YAAYs9E,GAChB/yF,EAAIma,GAAG,uDAAwDhY,KAAK4rF,QAAS5rF,MAE7EA,KAAK4rF,UAEL5rF,KAAKmzE,qBAEEn+D,GAGT1H,EAAO2xB,SAAW,WAChBj/B,KAAKo9B,SAASnlB,IAAI,uDAAwDjY,KAAK4rF,QAAS5rF,MAEpFA,KAAK8wF,eACP74E,GAAIjY,KAAK8wF,cAAe,QAAS9wF,KAAKuxF,eAAgBvxF,MAGpDA,KAAKsxF,gBACPr5E,GAAIjY,KAAKsxF,eAAgB,QAAStxF,KAAKwxF,gBAAiBxxF,MAGtDA,KAAKkxF,eACPj5E,GAAIjY,KAAKkxF,aAAc,QAASlxF,KAAKyxF,cAAezxF,MACpDA,KAAK0xF,WAAWvkE,iBACTntB,KAAK0xF,aAIhBpkF,EAAOs+E,QAAU,WACf,IAAI/tF,EAAMmC,KAAKo9B,SAEf,GAAIp9B,KAAKixF,WAAY,CACnB,IAAIU,EAhFC,IAgFa9zF,EAAIo5C,aAAep5C,EAAIm5C,cACzCh3C,KAAKixF,WAAW5oF,MAAM/B,OAASqrF,EAAa,GAAK,KACjD3xF,KAAKkxF,aAAa7oF,MAAM/B,OAASqrF,EAAa,EAAI,KAClD3xF,KAAKkxF,aAAa7oF,MAAMs5C,OAAS,UACjC,IAAIiwC,EApFC,IAoFY/zF,EAAIo5C,aAAep5C,EAAI2hC,WACxCx/B,KAAKmxF,eAAe9oF,MAAM/B,OArFrB,IAqF+BzI,EAAI2hC,UAAY3hC,EAAIm5C,aAAe,GAAY,KACnFh3C,KAAKoxF,WAAW/oF,MAAMkN,IAAMq8E,EAAY,KAG1C5xF,KAAK6xF,eAGPvkF,EAAOukF,YAAc,WACnB,GAAI7xF,KAAK2wF,UAAW,CAClB,IACI5qF,EADM/F,KAAKo9B,SACAoC,UAEV/nC,EAAUsO,KACbA,EAAOvN,KAAKuV,MAAa,GAAPhI,GAAa,IAGjC/F,KAAK2wF,UAAUn9E,UAAYzN,IAI/BuH,EAAO6lE,mBAAqB,WACtBnzE,KAAK8wF,eACP94E,GAAGhY,KAAK8wF,cAAe,QAAS9wF,KAAKuxF,eAAgBvxF,MAGnDA,KAAKsxF,gBACPt5E,GAAGhY,KAAKsxF,eAAgB,QAAStxF,KAAKwxF,gBAAiBxxF,MAGrDA,KAAKkxF,eACPl5E,GAAGhY,KAAKkxF,aAAc,QAASlxF,KAAKyxF,cAAezxF,MACnDA,KAAK0xF,WAAa,IAAI7hE,GAAY7vB,KAAKoxF,WAAY,CACjD,kBAAoB,IAEtBpxF,KAAK0xF,WAAW15E,GAAG,YAAahY,KAAK8xF,gBAAiB9xF,MAAMgY,GAAG,mBAAoBhY,KAAK+xF,WAAY/xF,MAAMgtB,WAI9G1f,EAAOikF,eAAiB,SAAwBx9E,GAC9CY,GAAeZ,GACf/T,KAAKo9B,SAASunB,UAGhBr3C,EAAOkkF,gBAAkB,SAAyBz9E,GAChDY,GAAeZ,GACf/T,KAAKo9B,SAASwnB,WAGhBt3C,EAAOmkF,cAAgB,SAAuB19E,GAC5CY,GAAeZ,GACf,IAAIlW,EAAMmC,KAAKo9B,SAEXh2B,EADQ+O,GAAuBpC,EAAG/T,KAAKkxF,cAC7B9jF,EACV46B,EAAUnqC,EAAIo5C,aACdlxC,EAAOvN,KAAKuV,MAAMi6B,EAAU5gC,EA3IzB,IA4IPvJ,EAAIumD,QAAQr+C,IAGduH,EAAOwkF,gBAAkB,SAAyB/9E,GAChDY,GAAeZ,EAAE+5C,UAEjB,IAAIjwD,EAAMmC,KAAKo9B,SACX1E,EAAS76B,EAAI+2B,UAAUzkB,UAAUzB,OAAO,IAE5C7Q,EAAIskC,YAAYtkC,EAAI2hC,UAAW9G,IAGjCprB,EAAOykF,WAAa,SAAoBh+E,GACtCY,GAAeZ,EAAE+5C,UAEjB,IAAIjwD,EAAMmC,KAAKo9B,SACX1E,EAAS76B,EAAI+2B,UAAUzkB,UAAUzB,OAAO,IACxCd,EAAQuI,GAAuBpC,EAAE+5C,SAAU9tD,KAAKkxF,cAChDlpD,EAAUnqC,EAAIo5C,aACdiH,EAAUrgD,EAAIm5C,aAEdzhC,EAAM3H,EAAMR,EACZpH,EAAIgiC,EAAUzyB,EAlKX,GAoKHyyB,EAAUhiC,GACZA,EAAIgiC,EACJzyB,EAAM,GACG2oC,EAAUl4C,IACnBA,EAAIk4C,EACJ3oC,EAzKK,IAyKEyyB,EAAUkW,IAGJ,aAAXnqC,EAAEpV,KACJd,EAAIukC,UAAUp8B,EAAG0yB,EAAQ,GACL,YAAX3kB,EAAEpV,OACPqB,KAAKuY,QAAkB,SACzB1a,EAAIwkC,UAAUr8B,EAAG0yB,GAEjB76B,EAAIwkC,UAAU7pC,KAAK8D,MAAM0J,GAAI0yB,IAIjC14B,KAAKoxF,WAAW/oF,MAAMkN,IAAMA,EAAM,KAClCvV,KAAKmxF,eAAe9oF,MAAM/B,OAvLnB,IAuL6BzI,EAAI2hC,UAAY0e,EAAU,GAAY,KAE1El+C,KAAK6xF,eAGApB,EA1LE,CA2LT3F,IAEF2F,GAAKhiE,aArMW,CACd,SAAY,WACZ,QAAU,EACV,WAAa,EACb,UAAY,IAkMdqxB,GAAMrxB,aAAa,CACjB,aAAe,IAEjBqxB,GAAMkB,eAAc,WACdhhD,KAAKuY,QAAqB,cAC5BvY,KAAKgyF,YAAc,IAAIvB,GAAKzwF,KAAKuY,QAAqB,aACtDvY,KAAKsrF,WAAWtrF,KAAKgyF,iBAGzB,IAWIC,GAAa,WACf,SAASA,EAAWx7D,EAAIC,EAAIjQ,EAAIC,GAC1BprB,MAAMC,QAAQk7B,IAChBz2B,KAAK81B,MAAQ,CACX95B,EAAGy6B,EAAG,GACNrpB,EAAGqpB,EAAG,IAERz2B,KAAK04B,OAAS,CACZ18B,EAAGy6B,EAAG,GACNrpB,EAAGqpB,EAAG,MAGRz2B,KAAK81B,MAAQ,CACX95B,EAAGy6B,EACHrpB,EAAGspB,GAEL12B,KAAK04B,OAAS,CACZ18B,EAAGyqB,EACHrZ,EAAGsZ,IAiBT,OAZAurE,EAAWC,WAAa,SAAoB7+D,GAC1C,MAAyC,UAArCA,EAAiB,KAAEjqB,cACd,QACEiqB,EAAiB,KAAEjqB,gBAAkB,YAAYA,cACnD,sBACuC,aAArCiqB,EAAiB,KAAEjqB,cACrB,CAAC,GAAI,EAAG,EAAG,GAEX,gBAIJ6oF,EAnCQ,GAsCbE,GAAa,QAAU35F,KAAKC,GAChC5B,EAAOo7F,GAAY,CACjB,eAAgB,IAAIA,GAAW,CAAC,GAAI,GAAIE,GAAYA,KACpD,sBAAuB,IAAIF,GAAW,CAAC,EAAG,GAAIE,IAAaA,KAC3D,sBAAuB,IAAIF,GAAW,CAAC,EAAG,GAAI,KAAM,KACpD,MAAS,IAAIA,GAAW,CAAC,EAAG,EAAG,EAAG,MAmMpC,IAhMA,IAAIG,GAAa,WACf,SAASA,EAAWv0F,EAAKwiF,EAAYnqC,EAAYiqC,GAC/CngF,KAAKnC,IAAMA,EACXmC,KAAKmgF,SAAWA,EAChBngF,KAAKk2C,WAAaA,EAClBl2C,KAAKqyF,gBAAgBhS,EAAYnqC,GACjCl2C,KAAKsyF,QAAUp8C,EAAkB,OAAKA,EAAiB,KAAI,GAAK,EAChEl2C,KAAKuyF,QAAUr8C,EAAgB,KAAKA,EAAmB,OAAI,GAAK,EAChEl2C,KAAKwyF,aAAe30F,EAAIquC,YAAY,IAAIh9B,GAAMlP,KAAKqgF,WAAmB,QAAIxiF,EAAI6oC,aAC9E1mC,KAAKyyF,OAAS50F,EAAI0xC,cAAc1xC,EAAI6oC,aAGtC,IAAIp5B,EAAS8kF,EAAWj6F,UA+KxB,OA7KAmV,EAAO+kF,gBAAkB,SAAyBhS,EAAYnqC,GAO5D,GANIt+C,EAASyoF,GACXA,EAAa4R,GAAW5R,EAAWj3E,eAC1B9N,MAAMC,QAAQ8kF,KACvBA,EAAa,IAAI4R,GAAW5R,KAGzBA,EACH,MAAM,IAAIriF,MAAM,sBAGlBgC,KAAKqgF,WAAaA,EAClB,IAAI5jF,EAAIy5C,EAAkB,MAAIA,EAAiB,KAAI,GAAK,EACpDx5C,EAAIw5C,EAAgB,IAAIA,EAAmB,QAAK,EAAI,EACpD1yC,EAAI68E,EAAmB,OAAK,EAC5B1nF,EAAI0nF,EAAmB,OAAK,EAChCrgF,KAAK0yF,eAAiB,IAAI/8D,GAAe,CAACl5B,EAAGC,EAAG8G,EAAG7K,KAGrD2U,EAAOqlF,YAAc,SAAqB/kF,EAAO7I,GAC/C,IAAIs7E,EAAargF,KAAKqgF,WAClBF,EAAWngF,KAAe,SAE1B4yF,EAAQp6F,KAAKuV,MADL,KACmBsyE,EAAkB,MAAK,EAAIzyE,EAAM5R,GAAKmkF,EAAgB,MAAIp7E,IACrF8tF,EAAQr6F,KAAKkV,KAFL,KAEkB2yE,EAAkB,MAAK,EAAIzyE,EAAMR,GAAK+yE,EAAiB,OAAIp7E,IACzF,MAAO,CACL,EAAKs7E,EAAkB,MAAK,EAAIuS,EAChC,EAAKvS,EAAkB,MAAK,EAAIwS,IAIpCvlF,EAAOwlF,aAAe,SAAsBxnC,EAAQvmD,EAAKguF,GACvD,IAAI1S,EAAargF,KAAKqgF,WAClBzyE,EAAQ5N,KAAK0yF,eAAe78D,UAAUy1B,EAAQ,GAE9C0nC,EAAYhzF,KAAK2yF,YAAY/kF,EAAO7I,GAUxC,OARIs7E,EAAkB,MAAK,EAAI,IAC7B2S,EAAa,GAAK,GAGhB3S,EAAkB,MAAK,EAAI,IAC7B2S,EAAa,GAAK,GAGbhzF,KAAKizF,oBAAoBD,EAAa,EAAGA,EAAa,EAAG,EAAG,EAAGjuF,EAAKguF,IAG7EzlF,EAAO2lF,oBAAsB,SAA6BL,EAAOC,EAAOvqE,EAASC,EAASxjB,EAAKguF,GAC7F,IAAI1S,EAAargF,KAAKqgF,WAClBrkF,EAAI42F,EAAQvS,EAAkB,MAAK,EAAI/3D,EACvClb,EAAIylF,EAAQxS,EAAkB,MAAK,EAAI93D,EACvCsL,GAAM,EACNj2B,EAAM5B,EACNk3F,EAAM9lF,EAEN2nB,EAAM/0B,KAAKmzF,kBAAkBpuF,GAoCjC,OAlCIguF,KACkB,IAAhBA,GAAwC,MAAhBA,IACtBh+D,EAAU,OAAMA,EAAU,KAC5B/4B,EAAI+4B,EAAU,KACL/4B,EAAI+4B,EAAU,MACvB/4B,EAAI+4B,EAAU,MAAKA,EAAU,KAAI/4B,IAAM+4B,EAAU,KAAIA,EAAU,SAErDA,EAAU,OAClB/4B,EAAI+4B,EAAU,MAEP/4B,GAAK+4B,EAAU,OACxB/4B,EAAI+4B,EAAU,MAAK/4B,EAAI+4B,EAAU,OAAMA,EAAU,KAAIA,EAAU,SAI/C,IAAhBg+D,GAAwC,MAAhBA,IACtBh+D,EAAU,OAAMA,EAAU,KAC5B3nB,EAAI2nB,EAAU,KACL3nB,GAAK2nB,EAAU,KACxB3nB,EAAI2nB,EAAU,MAAK3nB,EAAI2nB,EAAU,OAAMA,EAAU,KAAIA,EAAU,MACtD3nB,EAAI2nB,EAAU,OACvB3nB,EAAI2nB,EAAU,MAAKA,EAAU,KAAI3nB,IAAM2nB,EAAU,KAAIA,EAAU,SAErDA,EAAU,OAClB3nB,EAAI2nB,EAAU,SAMlB/4B,EAAI+4B,EAAU,MAAK/4B,EAAI+4B,EAAU,MAAK3nB,EAAI2nB,EAAU,MAAK3nB,EAAI2nB,EAAU,QACzElB,GAAM,GAGD,CACL,EAAK73B,EACL,EAAKoR,EACL,IAAOxP,EACP,IAAOs1F,EACPr/D,IAAKA,IAITvmB,EAAO6lF,kBAAoB,SAA2BpuF,GAKpD,GAJK/E,KAAKozF,iBACRpzF,KAAKozF,eAAiB,IAGpBpzF,KAAKozF,eAAeruF,GACtB,OAAO/E,KAAKozF,eAAeruF,GAG7B,IAAIgwB,EAAM/0B,KAAKk2C,WACXw8C,EAAiB1yF,KAAK0yF,eAEtBW,EAAUrzF,KAAK2yF,YAAYD,EAAe78D,UAAU,IAAI7E,GAAW+D,EAAU,KAAGA,EAAS,KAAI,GAAIhwB,GAEjGuuF,EAAUtzF,KAAK2yF,YAAYD,EAAe78D,UAAU,IAAI7E,GAAW+D,EAAW,MAAGA,EAAY,QAAI,GAAIhwB,GAErGs7E,EAAargF,KAAKqgF,WAatB,OAXIA,EAAkB,MAAK,EAAI,IAC7BgT,EAAQr3F,GAAK,EACbs3F,EAAQt3F,GAAK,GAGXqkF,EAAkB,MAAK,EAAI,IAC7BgT,EAAQjmF,GAAK,EACbkmF,EAAQlmF,GAAK,GAGfpN,KAAKozF,eAAeruF,GAAO,IAAIkuB,GAAOogE,EAASC,GACxCtzF,KAAKozF,eAAeruF,IAG7BuI,EAAOimF,aAAe,SAAsBX,EAAOC,EAAO9tF,GACxD,IAAIs7E,EAAargF,KAAKqgF,WAClBF,EAAWngF,KAAe,SAC1BoN,EAAIizE,EAAmB,OAAK,EAAIrgF,KAAKuyF,QAAUlS,EAAkB,MAAK,GAAKwS,GAAsC,IAA7BxS,EAAkB,MAAK,EAAU,EAAI,IAAMt7E,EAAMo7E,EAAiB,OACtJnkF,EAAIqkF,EAAmB,OAAK,EAAIrgF,KAAKsyF,QAAUjS,EAAkB,MAAK,GAAKuS,GAAsC,IAA7BvS,EAAkB,MAAK,EAAU,EAAI,IAAMt7E,EAAMo7E,EAAgB,MACzJ,OAAO,IAAInvD,GAAWh1B,EAAGoR,IAG3BE,EAAOkmF,eAAiB,SAAwBZ,EAAOC,EAAO9tF,GAC5D,IAAI+wB,EAAQ91B,KAAKyyF,OAAS1tF,EACtBs7E,EAAargF,KAAKqgF,WAClBF,EAAWngF,KAAe,SAC1BoN,EAAIpN,KAAKwyF,aAAaplF,EAAI0oB,EAAQ91B,KAAKuyF,QAAUlS,EAAkB,MAAK,GAAKwS,GAAsC,IAA7BxS,EAAkB,MAAK,EAAU,EAAI,IAAMF,EAAiB,OAClJnkF,EAAIgE,KAAKwyF,aAAax2F,EAAI85B,EAAQ91B,KAAKsyF,QAAUjS,EAAkB,MAAK,GAAKuS,GAAsC,IAA7BvS,EAAkB,MAAK,EAAU,EAAI,IAAMF,EAAgB,MACrJ,OAAO,IAAIjxE,GAAMlT,EAAGoR,IAGtBE,EAAOmmF,aAAe,SAAsBb,EAAOC,EAAO9tF,GACxD,IAAIs7E,EAAargF,KAAKqgF,WAClBF,EAAWngF,KAAe,SAC1BoN,EAAIizE,EAAmB,OAAK,EAAIrgF,KAAKuyF,QAAUlS,EAAkB,MAAK,GAAKwS,GAAsC,IAA7BxS,EAAkB,MAAK,EAAU,EAAI,IAAMt7E,EAAMo7E,EAAiB,OACtJnkF,EAAIqkF,EAAmB,OAAK,EAAIrgF,KAAKsyF,QAAUjS,EAAkB,MAAK,GAAKuS,GAAsC,IAA7BvS,EAAkB,MAAK,EAAU,EAAI,IAAMt7E,EAAMo7E,EAAgB,MACzJ,OAAO,IAAInvD,GAAWh1B,EAAGoR,IAG3BE,EAAOomF,eAAiB,SAAwBd,EAAOC,EAAO9tF,GAC5D,IAAI+wB,EAAQ91B,KAAKyyF,OAAS1tF,EACtBs7E,EAAargF,KAAKqgF,WAClBF,EAAWngF,KAAe,SAC1BoN,EAAIpN,KAAKwyF,aAAaplF,EAAI0oB,EAAQ91B,KAAKuyF,QAAUlS,EAAkB,MAAK,GAAKwS,GAAsC,IAA7BxS,EAAkB,MAAK,EAAU,EAAI,IAAMF,EAAiB,OAClJnkF,EAAIgE,KAAKwyF,aAAax2F,EAAI85B,EAAQ91B,KAAKsyF,QAAUjS,EAAkB,MAAK,GAAKuS,GAAsC,IAA7BvS,EAAkB,MAAK,EAAU,EAAI,IAAMF,EAAgB,MACrJ,OAAO,IAAIjxE,GAAMlT,EAAGoR,IAGtBE,EAAOqmF,iBAAmB,SAA0Bf,EAAOC,EAAO9tF,GAChE,IAAIi8D,EAAKhhE,KAAKuzF,aAAaX,EAAOC,EAAO9tF,GACrCg7D,EAAK//D,KAAKyzF,aAAab,EAAOC,EAAO9tF,GACzC,OAAO,IAAIkuB,GAAO+tC,EAAIjB,IAGjBqyB,EA3LQ,GA8LbwB,GAAS,GAEJ78F,GAAI,EAAGA,GAAI,EAAGA,KACrB68F,GAAO78F,IAAK,GAGd,IAAIyE,GAAI,GAER,SAASq4F,GAAcj+D,EAAQm7D,EAAK3vD,GAqBpC,IACMrhC,EACA+zF,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAfAf,GADA/zF,EArBM61B,GAsBG,GACTm+D,EAAMh0F,EAAG,GACTi0F,EAAMj0F,EAAG,GACTk0F,EAAMl0F,EAAG,GACTm0F,EAAMn0F,EAAG,GACTo0F,EAAMp0F,EAAG,GACTq0F,EAAMr0F,EAAG,GACTs0F,EAAMt0F,EAAG,GACTu0F,EAAMv0F,EAAG,GACTw0F,EAAMx0F,EAAG,GACTy0F,EAAOz0F,EAAG,IACV00F,EAAO10F,EAAG,IACV20F,EAAO30F,EAAG,IACV40F,EAAO50F,EAAG,IACV60F,EAAO70F,EAAG,IACV80F,EAAO90F,EAAG,IACd+0F,GAAclB,GAAO,GAAIK,EAAMH,EAAKO,EAAMH,EAAKO,EAAOH,EAAKO,EAAOH,GAClEI,GAAclB,GAAO,GAAIK,EAAMH,EAAKO,EAAMH,EAAKO,EAAOH,EAAKO,EAAOH,GAClEI,GAAclB,GAAO,GAAIK,EAAMF,EAAKM,EAAMF,EAAKM,EAAOF,EAAKM,EAAOF,GAClEG,GAAclB,GAAO,GAAIK,EAAMF,EAAKM,EAAMF,EAAKM,EAAOF,EAAKM,EAAOF,GAClEG,GAAclB,GAAO,GAAIK,EAAMD,EAAKK,EAAMD,EAAKK,EAAOD,EAAMK,EAAOD,GACnEE,GAAclB,GAAO,GAAIK,EAAMD,EAAKK,EAAMD,EAAKK,EAAOD,EAAMK,EAAOD,GAzCnE,IAAK,IAAI79F,EAAI,EAAGA,EAAI,EAAGA,IACrB,IAAIqqC,GAA2B,MAAnBA,EAAKtjC,OAAO/G,GAAxB,CAIA,IAAIg+F,EAAQnB,GAAO78F,GAKnB,GAJAyE,GAAE,GAAKu5F,EAAM,GAAK,EAAIhE,EAAI,GAAG,GAAKA,EAAI,GAAG,GACzCv1F,GAAE,GAAKu5F,EAAM,GAAK,EAAIhE,EAAI,GAAG,GAAKA,EAAI,GAAG,GACzCv1F,GAAE,GAAKu5F,EAAM,GAAK,EAAIhE,EAAI,GAAG,GAAKA,EAAI,GAAG,GAErCh8C,GAAgBggD,EAAOv5F,IAAK,EAC9B,OAAO,EAIX,OAAO,EA6BT,SAASs5F,GAAcjhE,EAAK73B,EAAGoR,EAAGpH,EAAGmB,GACnC0sB,EAAI,GAAK73B,EACT63B,EAAI,GAAKzmB,EACTymB,EAAI,GAAK7tB,EACT6tB,EAAI,GAAK1sB,EACT,IAAIlQ,EAYN,SAAoBuzC,GAClB,OAAOhyC,KAAKqV,KAAK28B,EAAG,GAAKA,EAAG,GAAKA,EAAG,GAAKA,EAAG,GAAKA,EAAG,GAAKA,EAAG,IAb/CwqD,CAAWnhE,GAKxB,OAJAA,EAAI,IAAM58B,EACV48B,EAAI,IAAM58B,EACV48B,EAAI,IAAM58B,EACV48B,EAAI,IAAM58B,EACH48B,EAGT,SAASkhB,GAAgBggD,EAAOv5F,GAC9B,OAAOu5F,EAAM,GAAKv5F,EAAE,GAAKu5F,EAAM,GAAKv5F,EAAE,GAAKu5F,EAAM,GAAKv5F,EAAE,GAAKu5F,EAAM,GAOrE,IAAIE,GAAgC,oBAARC,IAExBC,GAAc,WAChB,SAASA,IACPn1F,KAAKo1F,OAASH,GAAiB,IAAIC,IAAQ,GAG7C,IAAI5nF,EAAS6nF,EAAYh9F,UA0BzB,OAxBAmV,EAAOY,IAAM,SAAgB7V,GACvB48F,GACFj1F,KAAKo1F,OAAOlnF,IAAI7V,GAEhB2H,KAAKo1F,OAAO/8F,IAAO,GAIvBiV,EAAO+nF,IAAM,SAAah9F,GACxB,OAAI48F,GACKj1F,KAAKo1F,OAAOC,IAAIh9F,GAEhB2H,KAAKo1F,OAAO/8F,IAIvBiV,EAAOgoF,MAAQ,WACTL,GACFj1F,KAAKo1F,OAAOv1D,QAEZ7/B,KAAKo1F,OAAS,IAIXD,EA/BS,GAkCdI,GAAY,CACd,YAAe,KACf,WAAc,KACd,aAAe,EACf,YAAc,EACd,mBAAsB,EACtB,0BAA6B,EAC7B,eAAkB,EAClB,aAAe,EACf,YAAe,KACf,SAAY,CAAC,IAAK,KAClB,OAAU,CAAC,EAAG,GACd,WAAc,KACd,eAAkBv8F,EAClB,OAAS,EACT,iBAAoB,KACpB,aAAgB,IAChB,SACS0T,GAAU5B,MAAQ,KAAO,SAElC,aAAe,EACf,iBAAoB,KACpB,cAAgB,EAChB,WAAc,GAEZ0qF,GAAgB,oBAChBC,GAAa,IAAIvmF,GAAM,EAAG,GAC1BwmF,GAAgB,IAAIxmF,GAAM,EAAG,GAC7BymF,GAAgB,IAAIzmF,GAAM,EAAG,GAC7B0mF,GAAc,IAAI1mF,GAAM,EAAG,GAC3B2mF,GAAc,IAAI3mF,GAAM,EAAG,GAC3B4mF,GAAc,IAAI5mF,GAAM,EAAG,GAC3B6mF,GAAc,IAAI7mF,GAAM,EAAG,GAC3B8mF,GAAc,IAAI9mF,GAAM,EAAG,GAC3B+mF,GAAW,CAAC,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,IAC9BC,GAAO,GAEPC,GAAY,SAAU5uB,GAGxB,SAAS4uB,IACP,OAAO5uB,EAAOpkE,MAAMnD,KAAMhJ,YAAcgJ,KAH1C2M,GAAewpF,EAAW5uB,GAM1B4uB,EAAUn8C,SAAW,SAAkBo7B,GACrC,OAAKA,GAAmC,cAAtBA,EAAgB,KAI3B,IAAI+gB,EAAU/gB,EAAc,GAAGA,EAAmB,SAHhD,MAMX,IAAI5xC,EAAU2yD,EAAUh+F,UAwpBxB,OAtpBAqrC,EAAQ4yD,YAAc,WACpB,IAAIlmF,EAAOlQ,KAAKuY,QAAkB,SAMlC,OAJIjhB,EAAS4Y,KACXA,EAAO,CAACA,EAAMA,IAGT,IAAID,GAAKC,IAGlBszB,EAAQ6yD,SAAW,SAAkBrwF,EAAGswF,GACtC,IAAIz4F,EAAMmC,KAAKo9B,SACXklB,EAAQzkD,EAAIwgC,WACZk4D,EAAiBD,GAAeA,EAAYn4D,cAC5CoS,EAAY1yC,EAAIitC,qBAChB0rD,EAAY,GACZ32F,EAAQ,EACRq+C,EAAUl+C,KAAKg3C,aACfyiC,EAAgB57E,EAAI0a,QAAwB,eAAE,GAC9CmhE,EAAgB77E,EAAI0a,QAAwB,eAAE,GAC9Ck+E,EAAgBj+F,KAAKuV,MAAMlQ,EAAI2kD,iBAAiBk3B,IAChDgd,EAAWt/F,EAAM4O,GAAKhG,KAAK22F,aAAa94F,EAAI2hC,WAAax5B,EAI7D,GAHAhG,KAAK42F,cAAgB,IAAIzB,GACzBn1F,KAAK62F,YAAc,IAEdz/F,EAAM4O,KAAOhG,KAAKuY,QAAsB,cAAK+pC,GAASm3B,IAAkBriF,EAAM8mD,IAAYw4C,GAAYx4C,EAAS,CAClH,IAAI+G,EAAkB3C,GAASo3B,EAAgBnpC,EAAY,IAAI9a,GAAY,EAAG53B,EAAIyI,OAASmwF,EAAe54F,EAAIwI,MAAOxI,EAAIyI,QAErHwwF,EAAgB92F,KAAK+2F,UAAUL,EAAUzxC,EAAiB,EAAGsxC,GAOjE,OALIO,IACFj3F,GAASi3F,EAAcE,MAAM//F,OAC7Bu/F,EAAU17F,KAAKg8F,IAGV,CACLN,UAAWA,EACX32F,MAAOA,GAIX,IAAIo3F,EAAgBz+F,KAAKuV,MAAMlQ,EAAI2kD,iBAAiBi3B,IAChDyd,EAAU,IAAIzhE,GAAY,EAAG53B,EAAIyI,OAAS2wF,EAAep5F,EAAIwI,MAAOxI,EAAIyI,QAExE6wF,EAAen3F,KAAK+2F,UAAUL,EAAUQ,EAAS,EAAGX,GAExD12F,GAASs3F,EAAeA,EAAaH,MAAM//F,OAAS,EACpDu/F,EAAU17F,KAAKq8F,GACf,IAGIC,EAcAC,EAjBAC,EAAgBJ,EAAQxjE,KACxB/6B,EAAIkF,EAAIujD,sBAAsBlK,mBAC9BqgD,EAAgB5+F,EAGpB,GAAI2pD,EAAQo3B,EAAe,CACrBgd,EAAWa,GAAiBr5C,IAC9Bq5C,EAAgB,GAGlB,IAAIC,EAAU,IAAI/hE,GAAY,EAAG53B,EAAIyI,OAASmwF,EAAe54F,EAAIwI,MAAOixF,GAExEz3F,IADAu3F,EAAgBp3F,KAAK+2F,UAAUL,EAAWa,EAAeC,EAAS,EAAGjB,IAC5Ca,EAAcJ,MAAM//F,OAAS,EACtDqgG,EAAgBE,EAAQ9jE,KACxB6jE,GAAiB,EAAI5+F,EAKvB,GAAI+9F,EAAWa,GAAiBr5C,EAAS,CACvC,IAAI/J,EAAU,IAAI1e,GAAY,EAAG8a,EAAU7c,KAAM71B,EAAIwI,MAAOixF,GAE5Dz3F,IADAw3F,EAAgBr3F,KAAK+2F,UAAUL,EAAWa,EAAepjD,EAAS,EAAGoiD,IAC5Cc,EAAcL,MAAM//F,OAAS,EACtDu/F,EAAU17F,KAAKu8F,GAQjB,OALID,GAAiBC,IACnBb,EAAU,GAAKa,EACfb,EAAU,GAAKY,GAGV,CACLZ,UAAWA,EACX32F,MAAOA,IAIX2jC,EAAQi0D,WAAa,SAAoBz7F,EAAGoR,EAAGpH,GAC7C,IAAI28E,EAAc3iF,KAAKuY,QAAqB,YACxCm/E,EAAS,GAEb,GAAI13F,KAAKuY,QAAoB,WAAG,CAC9B,IAAIo/E,EAAa33F,KAAKuY,QAAoB,WAE1C,GAAIvb,EAAe26F,GAAa,CAC9B,IACI9xF,GAAK7J,EAAIoR,GADGuqF,EAAW1gG,OAGvB4O,EAAI,IACNA,EAAI,GAGN6xF,EAASC,EAAW9xF,IAIxB,GAAI9N,EAAW4qF,GACb,OAAOA,EAAY3mF,EAAGoR,EAAGpH,EAAG0xF,GAG9B,IAAIr/E,EAAO,CACT,EAAKrc,EACL,EAAKoR,EACL,EAAKpH,EACL,EAAK0xF,GAEP,OAAO/U,EAAY95E,QAAQ2sF,IAAe,SAAUh7F,EAAKnC,GACvD,IAAI8I,EAAQkX,EAAKhgB,GAEjB,QAAcyD,IAAVqF,EACF,MAAM,IAAInD,MAAM,kCAAoCxD,GAKtD,MAJ4B,mBAAV2G,IAChBA,EAAQA,EAAMkX,IAGTlX,MAIXqiC,EAAQ3D,MAAQ,WAMd,OALI7/B,KAAK69C,WACP79C,KAAK69C,UAAUhe,QAGjB7/B,KAAK8rB,KAAK,SACH9rB,MAGTwjC,EAAQv0B,OAAS,WAMf,MALc,CACZ,KAAQjP,KAAK8uB,cACb,GAAM9uB,KAAKkjC,QACX,QAAWljC,KAAK6tB,WAKpB2V,EAAQ4d,oBAAsB,WAC5B,IAAIvjD,EAAMmC,KAAKo9B,SAEf,OAAIv/B,GAASmC,KAAKuY,QAA0B,mBAAKq9B,GAAiB/mC,OAAO7O,KAAKuY,QAA0B,iBAAG1a,EAAI0a,QAA0B,mBAIzIvY,KAAK43F,IAAM53F,KAAK43F,KAAO,IAAIhiD,GAAiB51C,KAAKuY,QAA0B,uBAEnDzc,IAApBkE,KAAK63F,aACP73F,KAAK63F,WAAa73F,KAAK43F,IAAI5gD,aAC3Bh3C,KAAK83F,WAAa93F,KAAK43F,IAAI3gD,cAGtBj3C,KAAK43F,KAVH/5F,EAAIujD,uBAaf5d,EAAQwT,WAAa,WAGnB,OAFSh3C,KAAKohD,wBAEHphD,KAAKo9B,SAASgkB,sBAChB5oD,KAAKsE,IAAIyqE,EAAOpvE,UAAU6+C,WAAW1+C,KAAK0H,MAAOA,KAAK63F,YAGxDtwB,EAAOpvE,UAAU6+C,WAAW1+C,KAAK0H,OAG1CwjC,EAAQyT,WAAa,WAGnB,OAFSj3C,KAAKohD,wBAEHphD,KAAKo9B,SAASgkB,sBAChB5oD,KAAKqE,IAAI0qE,EAAOpvE,UAAU8+C,WAAW3+C,KAAK0H,MAAOA,KAAK83F,YAGxDvwB,EAAOpvE,UAAU8+C,WAAW3+C,KAAK0H,OAG1CwjC,EAAQmzD,aAAe,SAAsB5wF,GACtCtO,EAAUsO,KACbA,EAAOvN,KAAK8D,MAAMyJ,IAGpB,IAAIiiC,EAAUhoC,KAAKuY,QAA0B,iBAM7C,OAJKnhB,EAAM4wC,IAAYjiC,EAAOiiC,IAC5BjiC,EAAOiiC,GAGFjiC,GAGTy9B,EAAQuzD,UAAY,SAAmBL,EAAUzxC,EAAiB8yC,EAAcxB,GAC9E,IAAIxmE,EAAQ/vB,KAERnC,EAAMmC,KAAKo9B,SACXp3B,EAAI0wF,EACJsB,EAAgBn6F,EAAI85E,eAEpBogB,EAAe,IACI,IAAjBA,IACF/xF,GAAK,GAGPgyF,EAAiC,IAAjBD,EAAqBl6F,EAAI+7E,sBAAyC,IAAjBme,EAAqBl6F,EAAIi8E,sBAAwBj8E,EAAI85E,gBAGxH,IAAI5xE,EAAOC,EAAIhG,KAAKuY,QAAoB,WAEpClD,EAASrV,KAAKi4F,eAAelyF,GAC7BmyF,EAAY7iF,EAAO,IAAMA,EAAO,GAEhC8iF,EAAY,CACd,KAAQnyF,EACR,OAAU,KACV,OAAUqP,EACV,MAAS,IAGX,GAAItP,EAAO,EACT,OAAOoyF,EAGT,IAAIj6C,EAAUl+C,KAAKg3C,aACfhP,EAAUhoC,KAAKi3C,aAEnB,KAAKp5C,GAAQmC,KAAKq9B,aAAgBx/B,EAAIwI,OAAUxI,EAAIyI,QAClD,OAAO6xF,EAGT,IAAK/gG,EAAM8mD,IAAYl4C,EAAIk4C,IAAY9mD,EAAM4wC,IAAYhiC,EAAIgiC,EAC3D,OAAOmwD,EAGT,IAAIC,EAAap4F,KAAKq4F,iBAEtB,IAAKD,EACH,OAAOD,EAGT,IAAIG,EAAKt4F,KAAKohD,sBACVm3C,EAAQ16F,EAAIujD,sBACZr8C,EAAMuzF,EAAG/oD,cAAcxpC,GACvBiuC,EAAUn2C,EAAIwyC,WAAWrqC,GACzB+sF,EAAcuF,IAAOC,GAASv4F,KAAKuY,QAAqB,YACxDigF,EAAWvzC,EAAgB5vB,WAAU,SAAU7xB,GAGjD,GAAIA,EAAE4J,EAAI,GAAK5J,EAAE4J,EAAIvP,EAAIyI,OAAQ,CAC/B,IAAIjO,GAAe,IAARmL,EAAExH,EAAU,EAAI,GAAKwH,EAAE4J,EAE7B2iB,EAAM8mE,YAAYx+F,KACrB03B,EAAM8mE,YAAYx+F,GAAOwF,EAAI6iC,uBAAuBl9B,IAG7CusB,EAAM8mE,YAAYx+F,GAI7B,OADSwF,EAAI6iC,uBAAuBl9B,OAAG1H,EAAW25F,OAIpD+C,EAASvqF,KAAKoH,GAEd,IAAIojF,EAAaz4F,KAAKq/C,mBAEtB,GAAIo5C,EAAY,CACd,IAAIxjE,EAAewjE,EAAWxjE,aAAaujE,GAE3C,IAAKvjE,EACH,OAAOkjE,EAGTlzC,EAAkBhwB,EAAaI,WAAU,SAAU7xB,GACjD,OAAO3F,EAAI+hC,uBAAuBp8B,OAAG1H,EAAW,EAAG25F,OAIvD,IAIIjyF,EAJA+lD,EAAY1rD,EAAI6qD,qBAAqBzD,EAAgB3nC,YAAao4E,IAElE5d,EAAcj6E,EAAIquC,YAAYqd,OAAWztD,EAAW65F,IAKtDnyF,EADE00F,EACEl4F,KAAKi0B,SAASp2B,EAAIqlD,YAAY40B,EAAY7pE,KAAKoH,QAASvZ,EAAW65F,IAAgBA,IAEnF31F,KAAKi0B,SAASs1B,EAAWosC,IAG/BC,GAAY55F,EAAIw8F,EAAShlE,KACzBoiE,GAAYxoF,EAAIorF,EAAS7kE,KACzBkiE,GAAY75F,EAAIw8F,EAAS/kE,KACzBoiE,GAAYzoF,EAAIorF,EAAS9kE,KAsBzB,IApBA,IAAIglE,EAAO14F,KAAKi0B,SAASp2B,EAAIqlD,YAAY0yC,QAAa95F,EAAW85F,IAAcA,IAE3E+C,EAAO34F,KAAKi0B,SAASp2B,EAAIqlD,YAAY2yC,QAAa/5F,EAAW+5F,IAAcA,IAE3E+C,EAAaR,EAAWtF,aAAatvF,EAAGuB,EAAKguF,GAC7C8F,EAAST,EAAWtF,aAAa4F,EAAM3zF,EAAKguF,GAC5C+F,EAASV,EAAWtF,aAAa6F,EAAM5zF,EAAKguF,GAC5Cx9E,EAAM/c,KAAKkV,KAAKlV,KAAK+D,IAAIq8F,EAAW1F,IAAM2F,EAAO3F,MACjD7xF,EAAO7I,KAAKkV,KAAKlV,KAAK+D,IAAIq8F,EAAWh7F,IAAMi7F,EAAOj7F,MAClDu4C,EAAS39C,KAAKkV,KAAKlV,KAAK+D,IAAIq8F,EAAW1F,IAAM4F,EAAO5F,MACpD5xF,EAAQ9I,KAAKkV,KAAKlV,KAAK+D,IAAIq8F,EAAWh7F,IAAMk7F,EAAOl7F,MACnDm7F,GAAYxjF,EAAM4gC,EAAS,IAAM90C,EAAOC,EAAQ,GAChD6+E,EAAWngF,KAAKo2F,cAEhB7oD,EAAWvtC,KAAKm+B,eAAiBo4D,EACjCzgE,EAAQ91B,KAAKq4F,iBAAiBhY,WAAWvqD,MAEzCkhE,EAAQ,GACRj6E,EAAS,IAAI0Y,GAER1+B,GAAKwe,EAAKxe,GAAKo/C,EAAQp/C,IAK9B,IAJA,IAAI0d,GAAKpT,EACL23F,GAAgB/8D,IAChBg9D,GAAgB,EAEbxkF,GAAKukF,GAAgBvkF,GAAKnT,GAAO,CACtC,IAAI1D,EAAMw6F,EAAWnF,oBAAoB2F,EAAWh7F,IAAKg7F,EAAW1F,IAAKz+E,EAAG1d,EAAGgO,EAAKguF,GAEhFiG,KAAkB/8D,IACpBxnB,IAEAA,IAGF,IAAIykF,EAASl5F,KAAKm5F,WAAWv7F,EAAIA,IAAKA,EAAIs1F,IAAKltF,GAE/C,KAAIpI,EAAIi2B,KAAO7zB,KAAK42F,eAAiB52F,KAAK42F,cAAcvB,IAAI6D,IAA5D,CAIA,IAAIhZ,EAAW3yC,GAAYA,EAAS6rD,sBAAsBF,GAEtDhZ,IACFA,EAAWA,EAAS2C,MAGtB,IAAIrnF,OAAI,EAER,GAAI0kF,EAAU,CACZ,IACImZ,EADYnZ,EACOmZ,OACvB79F,EAAI0kF,EAAStyE,MAAMlJ,IAAI20F,EAAOr9F,EAAGq9F,EAAOjsF,QACnC,GAAKpN,KAAKs5F,UAEV,CACL,IAAIn4B,EAAMi3B,EAAW7E,aAAa31F,EAAI5B,EAAG4B,EAAIwP,EAAGrI,GAChDvJ,EAAIqC,EAAIquC,YAAYlsC,KAAKu5F,WAAWp4B,EAAK00B,IAAc7vF,QAHvDxK,EAAI48F,EAAW5E,eAAe51F,EAAI5B,EAAG4B,EAAIwP,EAAGrI,GAM9C,IAAIsB,OAAQ,EACRC,OAAS,EAEb,GAAIgyF,IAAOC,EACTlyF,EAAQ85E,EAAS95E,MACjBC,EAAS65E,EAAS75E,WACb,CACL,IAAI7K,QAAK,EAET,GAAKuE,KAAKs5F,UAEH,CACL,IAAIE,GAAMpB,EAAW3E,aAAa71F,EAAI5B,EAAG4B,EAAIwP,EAAGrI,GAChDtJ,GAAKoC,EAAIquC,YAAYlsC,KAAKu5F,WAAWC,GAAK3D,IAAc7vF,EAAG6vF,SAH3Dp6F,GAAK28F,EAAW1E,eAAe91F,EAAI5B,EAAG4B,EAAIwP,EAAGrI,GAM/CsB,EAAQ7N,KAAKkV,KAAKlV,KAAK+D,IAAId,GAAGO,EAAIR,EAAEQ,IACpCsK,EAAS9N,KAAKkV,KAAKlV,KAAK+D,IAAId,GAAG2R,EAAI5R,EAAE4R,IAGvC,IAAInO,GAAK62B,EAAM95B,GAAK4B,EAAIA,IAAMA,EAAI5B,GAAKqK,EACnCnH,GAAK42B,EAAM1oB,GAAKxP,EAAIs1F,IAAMt1F,EAAIwP,GAAK9G,GAEnCrH,IAAMC,KACR1D,EAAEyS,KAAKhP,GAAIC,IAGTg5F,GACF18F,EAAE6S,KAAKgH,GAGT,IAAIokF,GAAavZ,GAAYA,EAASsY,UAAY,IAAI/iE,GAAYj6B,EAAEQ,EAAGR,EAAE4R,EAAG5R,EAAEQ,EAAIqK,EAAO7K,EAAE4R,EAAI9G,IAE3FyyF,GAAY,GAAKE,GAAiBj5F,KAAK05F,gBAAgB1B,EAAeyB,GAAYzlD,MAChFh0C,KAAK42F,eAAkC,IAAjBmB,GACxB/3F,KAAK42F,cAAc1oF,IAAIgrF,GAGJ,IAAjBnB,GACF/3F,KAAK25F,YAAY3B,EAAehB,EAAOzpD,EAAU3vC,EAAKoI,EAAI,EAAGyzF,GAAYpkF,EAAQpW,GAAIC,IAErF6d,EAAO+X,SAAS2kE,MAEXvZ,IACHA,EAAW,CACT,OAAU1kF,EAAE0S,IAAImH,GAAQhH,KAAKpP,GAAIC,IACjC,MAAS1D,EACT,EAAKwK,EACL,EAAKpI,EAAI5B,EACT,EAAK4B,EAAIwP,EACT,SAAYqsF,GACZ,KAAQ1B,EACR,KAAQ,CAAC1xF,EAAOC,GAChB,GAAM4yF,EACN,OAAUA,EACV,MAASl5F,KAAKkjC,QACd,IAAOljC,KAAKy3F,WAAW75F,EAAI5B,EAAG4B,EAAIwP,EAAGrH,KAIrCmyF,IACFuB,GAAW/0F,IAAIlJ,EAAEQ,EAAGR,EAAE4R,EAAG5R,EAAEQ,EAAIqK,EAAO7K,EAAE4R,EAAI9G,GAC5C45E,EAAStyE,MAAQpS,EAAEyS,KAAKoH,GAExBokF,GAAWxrF,KAAKoH,IAGlB2hF,EAAMl8F,KAAKolF,GAEXnjE,EAAO+X,SAAS2kE,KAGdT,KAAkB/8D,KACpB+8D,EAAevkF,EACfA,EAAInT,GACM23F,IACVA,GAAgB,KAMxB,GAAIjC,EAAM//F,OAAQ,CAChB,IAAI6tC,GAASjnC,EAAI6iC,uBAAuBukB,EAAgB3nC,YAAatX,EAAGyvF,IAAYxnF,KAAKoH,GAEzF2hF,EAAMt1F,MAAK,SAAUjF,EAAGC,GACtB,OAAOD,EAAEmR,MAAMD,WAAWm3B,IAAUpoC,EAAEkR,MAAMD,WAAWm3B,OAI3D,MAAO,CACL,OAAUzvB,EACV,KAAQqhF,EACR,OAAU35E,EACV,MAASi6E,IAIbxzD,EAAQm2D,YAAc,SAAqB3B,EAAehB,EAAOzpD,EAAUqsD,EAAS5zF,EAAGyzF,EAAYpkF,EAAQpW,EAAIC,GAC7G,IAAI26F,EAAS75F,KAAKq4F,iBAAiBhY,WAAWvqD,MAAM1oB,EAEhD4mC,EAAUh0C,KAAKo9B,SAASiT,WAAWrqC,GACnC8zF,EAAShE,GAAYpxF,IAAsB,EAAlB+0F,EAAWjmE,KAAUqmE,EAAS,EAAsB,EAAlBJ,EAAW9lE,KAA6B,EAAlB8lE,EAAW/lE,MAE5FqmE,EAAUhE,GAAYrxF,IAAI+0F,EAAWjmE,KAAMqmE,EAAS,EAAIJ,EAAW9lE,KAAO8lE,EAAW/lE,MAAMzlB,KAAKoH,GAAQhH,KAAKpP,EAAIC,GAAIwP,OAAO,GAE5HvH,EAAIsyF,EAAWr8E,WACfhW,EAAIqyF,EAAWp8E,YACfzf,EAAoB,EAAdg8F,EAAQh8F,IACds1F,EAAoB,EAAd0G,EAAQ1G,IACdl3F,EAAgB,EAAZ49F,EAAQ59F,EACZoR,EAAgB,EAAZwsF,EAAQxsF,EAEZ4sF,EAAOh6F,KAAKi6F,iBAAiBjC,EAAezqD,EAAU3vC,EAAKs1F,EAAKl3F,EAAGoR,EAAGpH,EAAG,EAAG,EAAGmB,EAAGC,EAAG0yF,EAAQC,EAAS1kF,EAAQ2+B,GAE9GgmD,GAAMhD,EAAMl8F,KAAKk/F,IACrBA,EAAOh6F,KAAKi6F,iBAAiBjC,EAAezqD,EAAU3vC,EAAKs1F,EAAKl3F,EAAGoR,EAAGpH,EAAG,EAAG,EAAGmB,EAAGC,EAAG0yF,EAAQC,EAAS1kF,EAAQ2+B,KACpGgjD,EAAMl8F,KAAKk/F,IACrBA,EAAOh6F,KAAKi6F,iBAAiBjC,EAAezqD,EAAU3vC,EAAKs1F,EAAKl3F,EAAGoR,EAAGpH,EAAG,EAAG,EAAGmB,EAAGC,EAAG0yF,EAAQC,EAAS1kF,EAAQ2+B,KACpGgjD,EAAMl8F,KAAKk/F,IACrBA,EAAOh6F,KAAKi6F,iBAAiBjC,EAAezqD,EAAU3vC,EAAKs1F,EAAKl3F,EAAGoR,EAAGpH,EAAG,EAAG,EAAGmB,EAAGC,EAAG0yF,EAAQC,EAAS1kF,EAAQ2+B,KACpGgjD,EAAMl8F,KAAKk/F,IAGvBx2D,EAAQy2D,iBAAmB,SAA0BjC,EAAezqD,EAAU3vC,EAAKs1F,EAAKl3F,EAAGoR,EAAGpH,EAAGjP,EAAG0d,EAAGtN,EAAGC,EAAG0yF,EAAQC,EAAS1kF,EAAQ2+B,GACpI,IAAIklD,EAASl5F,KAAKm5F,WAAWv7F,EAAM7G,EAAGm8F,EAAMz+E,EAAGzO,GAE/C,GAAIhG,KAAK42F,eAAiB52F,KAAK42F,cAAcvB,IAAI6D,GAC/C,OAAO,KAGT,IAAIW,EAAS75F,KAAKq4F,iBAAiBhY,WAAWvqD,MAAM1oB,EAEhD8sF,EAAc,IAAIzkE,GAAYqkE,EAAO99F,EAAIjF,EAAIoQ,EAAG2yF,EAAO1sF,EAAIysF,EAASplF,EAAIrN,EAAG0yF,EAAO99F,GAAKjF,EAAI,GAAKoQ,EAAG2yF,EAAO1sF,EAAIysF,GAAUplF,EAAI,GAAKrN,GAErI,IAAKpH,KAAKm6F,wBAAwBnC,EAAekC,EAAalmD,GAC5D,OAAO,KAGT,IAAIkkD,EAAY7iF,EAAO,IAAMA,EAAO,GAChC6qE,EAAW3yC,GAAYA,EAAS6rD,sBAAsBF,GA4B1D,OAXEhZ,EAfGA,EAeQA,EAAS2C,KAdT,CACT,OAAUkX,EAAQ7rF,IAAInX,EAAIoQ,EAAG3O,KAAKsE,IAAI+8F,EAASplF,EAAIrN,EAAGyyF,GAAUplF,EAAI,GAAKrN,IACzE,MAAS,IAAI8H,GAAMgrF,EAAY1mE,KAAM0mE,EAAYvmE,MACjD,EAAK3tB,EACL,EAAKhK,EAAIjF,EACT,EAAKqW,EAAIqH,EACT,SAAYylF,EACZ,KAAQ,CAAC/yF,EAAGC,GACZ,GAAM8xF,EACN,OAAUA,EACV,MAASl5F,KAAKkjC,QACd,IAAOljC,KAAKy3F,WAAWz7F,EAAIjF,EAAGqW,EAAIqH,EAAGzO,EAAIhG,KAAKuY,QAAoB,aAMlE2/E,IACFhY,EAASsY,SAAW0B,EAEpBha,EAASsY,SAASvqF,KAAKoH,GAEvB6qE,EAAStyE,MAAMlJ,IAAIw1F,EAAY1mE,KAAM0mE,EAAYvmE,MAAM1lB,KAAKoH,IAGvD6qE,GAGT18C,EAAQy0D,eAAiB,SAAwBjyF,GAC/C,IAAInI,EAAMmC,KAAKo9B,SAEXtH,EAAQj4B,EAAIgmD,iBAAmBhmD,EAAIgmD,eAAe79C,GAElDqP,EAASrV,KAAKuY,QAAgB,OAQlC,OANIxgB,EAAWsd,KACbA,EAASA,EAAOrV,OAGlBqV,EAAO,IAAMygB,EACbzgB,EAAO,IAAMygB,EACNzgB,GAGTmuB,EAAQ21D,WAAa,SAAoBn9F,EAAGoR,EAAGrH,EAAM3L,GACnD,OAAQA,GAAM4F,KAAKkjC,SAAW,IAAM91B,EAAI,IAAMpR,EAAI,IAAM+J,GAG1Dy9B,EAAQvP,SAAW,SAAkBgD,EAAQpD,GAC3C,GAAI7zB,KAAKs5F,UAAW,CAClB,IACIc,EADMp6F,KAAKo9B,SACSyZ,gBAExB,OADiB72C,KAAKohD,sBAAsBvK,gBAC1BliB,QAAQylE,EAAchnE,UAAU6D,EAAQpD,GAAMA,GAEhE,OAAOoD,GAIXuM,EAAQ+1D,WAAa,SAAoBtiE,EAAQpD,GAC/C,GAAI7zB,KAAKs5F,UAAW,CAClB,IAAIz7F,EAAMmC,KAAKo9B,SACXk7D,EAAKt4F,KAAKohD,sBACVg5C,EAAgBv8F,EAAIg5C,gBACpBxjB,EAAailE,EAAGzhD,gBACpB,OAAOujD,EAAczlE,QAAQtB,EAAWD,UAAU6D,EAAQpD,GAAMA,GAEhE,OAAOoD,GAIXuM,EAAQ62D,gBAAkB,WACxB,IAAIx8F,EAAMmC,KAAKo9B,SACX+iD,EAAWngF,KAAKo2F,cAChBkC,EAAKt4F,KAAKohD,sBACV/tB,EAAailE,EAAGzhD,gBAChBX,EAAaoiD,EAAGxhD,gBAOpB,GANA92C,KAAKs6F,mBAAqB,IAAIlI,GAAWv0F,EAAKo0F,GAAWC,WAAW7+D,GAAa6iB,EAAYiqC,GAEzFngF,KAAKuY,QAAoB,aAC3BvY,KAAKu6F,YAAc,IAAInI,GAAWv0F,EAAKmC,KAAKuY,QAAoB,WAAG29B,EAAYiqC,IAG7EtiF,IAAQmC,KAAKu6F,aAAe18F,EAAIujD,wBAA0Bk3C,GAAMz6F,EAAI8nD,gBAAkB9nD,EAAI8nD,iBAAmB3lD,MAAQnC,EAAI8nD,eAAe0yC,eAAgB,CAC1J,IAAIz1F,EAAO/E,EAAI8nD,eAAe0yC,iBAE9Br4F,KAAKu6F,YAAc,IAAInI,GAAWv0F,EAAK+E,EAAKy9E,WAAYz9E,EAAKszC,WAAYiqC,GAG3EngF,KAAKs5F,UAAYhB,IAAOz6F,EAAIujD,uBAG9B5d,EAAQ60D,eAAiB,WAKvB,OAJKr4F,KAAKs6F,oBACRt6F,KAAKq6F,kBAGAr6F,KAAKu6F,aAAev6F,KAAKs6F,oBAGlC92D,EAAQwb,SAAW,SAAkBnhD,GACnC,IAAIoiD,EAAYpiD,EAAI8nD,eAUpB,OARI1F,IAAcjgD,OACXigD,EAAU1nC,QAAQtgB,eAAe,wBACpC+H,KAAK6tB,OAAO,CACV,qBAAuB,KAKtB05C,EAAOpvE,UAAU6mD,SAAS77C,MAAMnD,KAAMhJ,YAG/CwsC,EAAQk2D,gBAAkB,SAAyB1B,EAAeyB,EAAYzlD,GAC5E,IACIpe,EADA/3B,EAAMmC,KAAKo9B,SAGf,GAAI46D,IAAkBn6F,EAAI85E,eAAgB,CACxC,IAAI6iB,EAAaf,EAAWn8E,UAAU04E,IAAatnF,OAAOslC,GAE1Dw+B,GAAM0jB,GAAMsE,EAAWx+F,EAAGw+F,EAAWptF,EAAG,GAExCwoB,EA/nLN,SAAuB/B,EAAKp3B,EAAGs9B,GAC7B,IAAI/9B,EAAIS,EAAE,GACN2Q,EAAI3Q,EAAE,GACNuJ,EAAIvJ,EAAE,GACN0K,EAAI4yB,EAAE,GAAK/9B,EAAI+9B,EAAE,GAAK3sB,EAAI2sB,EAAE,IAAM/zB,EAAI+zB,EAAE,IAK5C,OAJA5yB,EAAIA,GAAK,EACT0sB,EAAI,IAAMkG,EAAE,GAAK/9B,EAAI+9B,EAAE,GAAK3sB,EAAI2sB,EAAE,GAAK/zB,EAAI+zB,EAAE,KAAO5yB,EACpD0sB,EAAI,IAAMkG,EAAE,GAAK/9B,EAAI+9B,EAAE,GAAK3sB,EAAI2sB,EAAE,GAAK/zB,EAAI+zB,EAAE,KAAO5yB,EACpD0sB,EAAI,IAAMkG,EAAE,GAAK/9B,EAAI+9B,EAAE,GAAK3sB,EAAI2sB,EAAE,IAAM/zB,EAAI+zB,EAAE,KAAO5yB,EAC9C0sB,EAqnLO4mE,CAAcvE,GAAMA,GAAMr4F,EAAI85E,gBAC3B,GAAK,EAAI95E,EAAI85E,eAAiBqgB,OAE3CpiE,EAAS/3B,EAAI85E,eAOf,OAJAse,GAAS,GAAG,GAAKwD,EAAWjmE,KAAOwgB,EACnCiiD,GAAS,GAAG,GAAKwD,EAAW/lE,KAAOsgB,EACnCiiD,GAAS,GAAG,GAAKwD,EAAWhmE,KAAOugB,EACnCiiD,GAAS,GAAG,GAAKwD,EAAW9lE,KAAOqgB,EAC5B6/C,GAAcj+D,EAAQqgE,KAG/BzyD,EAAQ22D,wBAA0B,SAAiCnC,EAAeyB,EAAYzlD,GAC5F,IAAIn2C,EAAMmC,KAAKo9B,SAKf,OAJA64D,GAAS,GAAG,GAAKwD,EAAWjmE,KAAOwgB,EACnCiiD,GAAS,GAAG,GAAKwD,EAAW/lE,KAAOsgB,EACnCiiD,GAAS,GAAG,GAAKwD,EAAWhmE,KAAOugB,EACnCiiD,GAAS,GAAG,GAAKwD,EAAW9lE,KAAOqgB,EAC5B6/C,GAAch2F,EAAI85E,eAAgBse,KAG3CzyD,EAAQtB,UAAY,WAClB,MAAO,CACL,uBAA0BliC,KAAK06F,4BAInCl3D,EAAQk3D,0BAA4B,kBAC3B16F,KAAKu6F,mBACLv6F,KAAKs6F,0BACLt6F,KAAK43F,IACZ,IAAIrqD,EAAWvtC,KAAKm+B,cAEhBoP,GACFA,EAAS1N,SAINs2D,EAvqBO,CAwqBd34C,IAEF24C,GAAUvnE,iBAAiB,aAC3BunE,GAAU1nE,aAAa8mE,IAEF,SAAUoF,GAc7B,SAASC,EAAexgG,EAAIikD,EAAQ9lC,GAClC,IAAIwX,EASJ,OAPAA,EAAQ4qE,EAAWriG,KAAK0H,KAAM5F,EAAIme,IAAYvY,MACxCq+C,OAASA,GAAU,GAEzBtuB,EAAM8qE,iBAEN9qE,EAAM+qE,SAAW,GACjB/qE,EAAMgrE,eAAiB,GAChBhrE,EAvBTpjB,GAAeiuF,EAAgBD,GAE/BC,EAAe5gD,SAAW,SAAkBo7B,GAC1C,IAAKA,GAAmC,mBAAtBA,EAAgB,KAChC,OAAO,KAGT,IAAI/2B,EAAS+2B,EAAkB,OAAEv3E,KAAI,SAAUkE,GAC7C,OAAOy7C,GAAMxD,SAASj4C,MAExB,OAAO,IAAI64F,EAAexlB,EAAc,GAAG/2B,EAAQ+2B,EAAmB,UAgBxE,IAAI9nE,EAASstF,EAAeziG,UAwI5B,OAtIAmV,EAAOw4C,UAAY,WACjB,OAAO9lD,KAAKq+C,QAGd/wC,EAAO2B,OAAS,WASd,MARc,CACZ,KAAQjP,KAAK8uB,cACb,GAAM9uB,KAAKkjC,QACX,OAAUljC,KAAKq+C,OAAOxgD,KAAI,SAAUg/B,GAClC,OAAOA,EAAM5tB,YAEf,QAAWjP,KAAK6tB,WAKpBvgB,EAAO+oF,SAAW,SAAkBrwF,GAKlC,IAJA,IAAIq4C,EAASr+C,KAAKq+C,OACd24C,EAAQ,GACRn3F,EAAQ,EAEH9I,EAAI,EAAGiO,EAAIq5C,EAAOpnD,OAAQF,EAAIiO,EAAGjO,IAAK,CAC7C,IAAI8lC,EAAQwhB,EAAOtnD,GAEnB,GAAK8lC,EAAMtkB,QAAiB,QAA5B,CAIA,IAAIyiF,EAAYn+D,EAAMw5D,SAASrwF,EAAGhG,MAE7Bg7F,GAAiC,IAApBA,EAAUn7F,QAI5BA,GAASm7F,EAAUn7F,MACnBlF,EAAOq8F,EAAOgE,EAAUxE,aAG1B,MAAO,CACL32F,MAAOA,EACP22F,UAAWQ,IAIf1pF,EAAO+xB,MAAQ,WACb,IAAI3B,EAAS19B,KAETnC,EAAMmC,KAAKo9B,SACfp9B,KAAKq+C,OAAO5gC,SAAQ,SAAUof,GAC5Ba,EAAOo9D,SAASj+D,EAAMqG,SAAWrG,EAE7BA,EAAMo+D,eACRv9D,EAAOq9D,eAAejgG,KAAK+hC,GAG7BA,EAAMmiB,SAASnhD,GAEfg/B,EAAM7kB,GAAG,YAAa0lB,EAAOw9D,iBAAkBx9D,MAGjDi9D,EAAWxiG,UAAUknC,MAAM/mC,KAAK0H,OAGlCsN,EAAO2xB,SAAW,WAChB,IAAIwf,EAASz+C,KAEbA,KAAKq+C,OAAO5gC,SAAQ,SAAUof,GAC5BA,EAAMqiB,YAENriB,EAAM5kB,IAAI,YAAawmC,EAAOy8C,iBAAkBz8C,MAElDz+C,KAAK86F,SAAW,GAChB96F,KAAK+6F,eAAiB,GAEtBJ,EAAWxiG,UAAU8mC,SAAS3mC,KAAK0H,OAGrCsN,EAAO2tF,cAAgB,SAAuB7gG,GAC5C,IAAIyiC,EAAQ78B,KAAK86F,SAAS1gG,GAE1B,GAAIyiC,EACF,OAAOA,EAGT,IAAK,IAAI9lC,EAAI,EAAGA,EAAIiJ,KAAK+6F,eAAe9jG,OAAQF,IAAK,CACnD,IAAIs6B,EAAQrxB,KAAK+6F,eAAehkG,GAAGkkG,cAAc7gG,GAEjD,GAAIi3B,EACF,OAAOA,EAIX,OAAO,MAGT/jB,EAAO4tF,iBAAmB,WACxB,IAAI3tD,EAAWvtC,KAAKm+B,cAEhBoP,GACFA,EAASvQ,eAIb1vB,EAAO+vB,UAAY,WACjB,IAAKs9D,EAAWxiG,UAAUklC,UAAU/kC,KAAK0H,MACvC,OAAO,EAKT,IAFA,IAAIu2D,EAAWv2D,KAAKq+C,OAEXtnD,EAAI,EAAGiO,EAAIuxD,EAASt/D,OAAQF,EAAIiO,EAAGjO,IAC1C,GAAIw/D,EAASx/D,GAAGsmC,YACd,OAAO,EAIX,OAAO,GAGT/vB,EAAOutF,eAAiB,WACtB,IAAItuC,EAASvsD,KAETm7F,EAAM,GACVn7F,KAAKq+C,OAAO5gC,SAAQ,SAAUof,GAC5B,IAAIqhD,EAAUrhD,EAAMqG,QAEpB,GAAIi4D,EAAIjd,GACN,MAAM,IAAIlgF,MAAM,6BAA+BkgF,EAAU,4BAA8B3xB,EAAOrpB,QAAU,KAExGi4D,EAAIjd,GAAW,MAKd0c,EAnKY,CAoKnBzE,IAEavnE,iBAAiB,kBAChC,IAAIwsE,GAAY,CACdC,IAAK,KACLC,WAAW,EACXC,cAAc,GAEZC,GAAmB,CACrBC,QAAS,MACTC,QAAS,SACTr9C,OAAQ,GACRl8C,OAAQ,GACRw5F,OAAQ,aACRC,aAAa,EACbC,QAAS,SAGPC,GAAe,SAAUnB,GAG3B,SAASmB,EAAa1hG,EAAIme,GACxB,IAAIwX,EAEJA,EAAQ4qE,EAAWriG,KAAK0H,KAAM5F,IAAO4F,KACrC,IAAI+7F,EAAYllG,EAAO,GAAI2kG,IAE3B,IAAK,IAAIhgG,KAAK+c,EACN/c,KAAKu0B,EAAMxX,UACfwjF,EAAUvgG,GAAK+c,EAAQ/c,IAI3Bu0B,EAAMvC,WAAWjV,GAEjBwX,EAAMgQ,UAAUxnB,EAAQ8gC,QAExB,IAAI8mC,EAAWpwD,EAAMqmE,cAMrB,OAJA2F,EAAU11F,MAAQ85E,EAAS95E,MAC3B01F,EAAUz1F,OAAS65E,EAAS75E,OAC5BypB,EAAMgsE,UAAYA,EAClBhsE,EAAMisE,YAAcra,WAAWoa,EAAUF,SAClC9rE,EAxBTpjB,GAAemvF,EAAcnB,GA2B7B,IAAIrtF,EAASwuF,EAAa3jG,UA4C1B,OA1CAmV,EAAO+xB,MAAQ,WACb,IAAI0B,EAAM/gC,KAAKo9B,SAAS8C,sBACpBrnC,EAAIuiG,GAAUG,aAAex6D,EAAM,EACvC/gC,KAAK+7F,UAAU11F,OAASxN,EACxBmH,KAAK+7F,UAAUz1F,QAAUzN,EACzB,IAAIwiG,EAAMr7F,KAAKuY,QAAQ8iF,KAAOr7F,KAAKo9B,SAASyZ,gBAAgBllB,KACxDsqE,EAAgBj8F,KAAKg8F,aAAe,IAAM,MAAQ,MACtDh8F,KAAK+7F,UAAUE,GAAiBZ,EAEhCV,EAAWxiG,UAAUknC,MAAM/mC,KAAK0H,OAGlCsN,EAAOmqF,WAAa,SAAoBz7F,EAAGoR,EAAGpH,GAC5C,IAAIjB,EAAM/E,KAAKohD,sBAAsB7R,cAAcvpC,GAE/CyzF,EADaz5F,KAAKq4F,iBACM1E,iBAAiB33F,EAAGoR,EAAGrI,GAE/CjI,EAAM28F,EAAWt8E,SACjBtgB,EAAM48F,EAAWv8E,SACjBg/E,GAAQl8F,KAAKg8F,aAAe,KAA8B,cAAvBh8F,KAAK+7F,UAAUV,IAAsB,CAACx+F,EAAIuQ,EAAGvQ,EAAIb,EAAGc,EAAIsQ,EAAGtQ,EAAId,GAAK,CAACa,EAAIb,EAAGa,EAAIuQ,EAAGtQ,EAAId,EAAGc,EAAIsQ,IAAI5L,KAAK,KAE1InI,EAAMshG,EAAWxiG,UAAUs/F,WAAWn/F,KAAK0H,KAAMhE,EAAGoR,EAAGpH,GAE3D,OAAO3M,EAyBX,SAAwBhC,EAAK8kG,EAAab,GACxC,IAAI1vD,EAAS,GAEb,IAAK,IAAI70C,KAAKM,EACZu0C,EAAO9wC,KAAKshG,mBAAmBd,EAAYvkG,EAAE66B,cAAgB76B,GAAK,IAAMqlG,mBAAmB/kG,EAAIN,KAGjG,OAASolG,IAA6C,IAA9BA,EAAYlhG,QAAQ,KAAoB,IAAN,KAAa2wC,EAAOpqC,KAAK,KAhCpE66F,CAAer8F,KAAK+7F,UAAW1iG,EAAK2G,KAAKuY,QAAQ+iF,YAAct7F,KAAKuY,QAAQ+iF,UAAY,SAAW,UAAYY,GAG9H5uF,EAAO2B,OAAS,WACd,MAAO,CACL,KAAQ,eACR,GAAMjP,KAAKkjC,QACX,QAAWljC,KAAK6tB,WAIpBiuE,EAAa9hD,SAAW,SAAkBo7B,GACxC,OAAKA,GAAmC,iBAAtBA,EAAgB,KAI3B,IAAI0mB,EAAa1mB,EAAc,GAAGA,EAAmB,SAHnD,MAMJ0mB,EAxEU,CAyEjB3F,IAEF2F,GAAaltE,iBAAiB,gBAC9BktE,GAAartE,aAAa2sE,IAY1B,IAAIkB,GAAkB,SAAU3B,GAG9B,SAAS2B,EAAgBliG,EAAIme,GAC3B,IAAIwX,EAQJ,OANAA,EAAQ4qE,EAAWriG,KAAK0H,KAAM5F,EAAIme,IAAYvY,MAEnCuY,QAAQtgB,eAAe,yBAChC83B,EAAMxX,QAA6B,qBAAI,GAGlCwX,EAXTpjB,GAAe2vF,EAAiB3B,GAchC,IAAIrtF,EAASgvF,EAAgBnkG,UAoB7B,OAlBAmV,EAAOivF,SAAW,aAElBjvF,EAAO2B,OAAS,WACd,MAAO,CACL,KAAQ,kBACR,GAAMjP,KAAKkjC,QACX,QAAWljC,KAAK6tB,WAIpByuE,EAAgBtiD,SAAW,SAAkBo7B,GAC3C,OAAKA,GAAmC,oBAAtBA,EAAgB,KAI3B,IAAIknB,EAAgBlnB,EAAc,GAAGA,EAAmB,SAHtD,MAMJknB,EAnCa,CAoCpBnG,IA2BF,SAASqG,GAAcrxF,EAAIxM,EAAM89F,GAC/B,IAAIC,EAASvxF,EAAGwxF,aAAah+F,GAK7B,GAJAwM,EAAGyxF,aAAaF,EAAQD,GACxBtxF,EAAGqxF,cAAcE,IACFvxF,EAAG0xF,mBAAmBH,EAAQvxF,EAAG2xF,gBAEjC,CACb,IAAIh+E,EAAQ3T,EAAG4xF,iBAAiBL,GAEhC,MADAvxF,EAAG6xF,aAAaN,GACV,IAAI1+F,MAAM,6BAA+B8gB,GAGjD,OAAO49E,EArCTJ,GAAgB1tE,iBAAiB,mBA8FjC,IAAIquE,GACc,qSADdA,GAEgB,gbAEhB1yD,GAAK,CAAC,EAAG,GACTC,GAAK,CAAC,EAAG,EAAG,GACZ0yD,GAAQ,IAAI5hG,MAAM,IAClB6hG,GAAc,IAAIjuF,GAAM,GAAI,IAE5BkuF,GAAoB,SAA2B5yE,GACjD,IA6YQqJ,EA7YJwpE,EAAa,SAAU5yE,GAGzB,SAAS4yE,IACP,OAAO5yE,EAAMtnB,MAAMnD,KAAMhJ,YAAcgJ,KAHzC2M,GAAe0wF,EAAY5yE,GAM3B,IAAInd,EAAS+vF,EAAWllG,UAiYxB,OA/XAmV,EAAOgwF,YAAc,SAAqB3gF,EAAO3gB,EAAGoR,EAAGjG,EAAGC,EAAGsxE,EAAUwL,EAASqZ,GAC1Ev9F,KAAKmL,GAAGqyF,UAAYx9F,KAAKw9F,SAC3Bx9F,KAAKy9F,WAAWz9F,KAAKw9F,SAGvB,IAAIryF,EAAKnL,KAAKmL,GACdnL,KAAK09F,YAAY/gF,GACjB6tB,GAAG,GAAKxuC,GAAK,EACbwuC,GAAG,GAAKp9B,GAAK,EACb,IAAIuwF,EAAUprB,GAAS2qB,IACvBv+E,GAAUg/E,EAASA,EAASnzD,IAC5B1U,GAAM6nE,EAASA,EAAS,CAACjlB,EAAUA,EAAU,IAC7CzH,GAAS0sB,EAAS39F,KAAKo9B,SAASu6C,eAAgBgmB,GAChDxyF,EAAGyyF,iBAAiB59F,KAAKw9F,QAAkB,UAAG,EAAOG,GACrDxyF,EAAG0yF,UAAU79F,KAAKw9F,QAAmB,UAAGtZ,GACxC/4E,EAAG0yF,UAAU79F,KAAKw9F,QAAsB,aAAG,GAC3C,IAAIM,EAAWnhF,EAAMmhF,UAEjBA,GAAaA,EAASz3F,QAAUc,GAAK22F,EAASx3F,SAAWc,IAC3DpH,KAAK+9F,gBAAgBD,UACdnhF,EAAMmhF,UAGVnhF,EAAMmhF,SAGT3yF,EAAG6yF,WAAW7yF,EAAG8yF,aAAcH,GAF/BnhF,EAAMmhF,SAAW99F,KAAKk+F,eAAe,EAAG,EAAG/2F,EAAGC,GAKhDmjC,GAAG,GAAK,aACRA,GAAG,GAAK,EACRA,GAAG,GAAK5tB,EAAMmhF,SAASn/F,KACvBqB,KAAKm+F,mBAAmB5zD,IACxBp/B,EAAGizF,WAAWjzF,EAAGkzF,eAAgB,EAAG,GAEhCd,GACFv9F,KAAKs+F,UAAUX,EAASpzD,GAAI,EAAG,EAAGpjC,EAAGC,EAAGm2F,IAI5CjwF,EAAOgxF,UAAY,SAAmBX,EAASY,EAAQviG,EAAGoR,EAAGjG,EAAGC,EAAGo3F,GACjE,IAAIrzF,EAAKnL,KAAKmL,GACdA,EAAG6yF,WAAW7yF,EAAG8yF,aAAcj+F,KAAKy+F,cACpCz+F,KAAKm+F,mBAAmB,CAAC,aAAc,EAAG,UAC1ChzF,EAAGuzF,WAAWvzF,EAAG8yF,aAAc,IAAIU,aAAa,CAAC3iG,EAAGoR,EAAGpR,EAAImL,EAAGiG,EAAGpR,EAAImL,EAAGiG,EAAIhG,EAAGpL,EAAGoR,EAAIhG,EAAGpL,EAAGoR,IAAKjC,EAAGyzF,cACpGzzF,EAAGyyF,iBAAiB59F,KAAKw9F,QAAkB,UAAG,EAAOG,GACrDxyF,EAAG0yF,UAAU79F,KAAKw9F,QAAsB,aAAG,GAC3CryF,EAAGizF,WAAWjzF,EAAG0zF,WAAY,EAAG,GAChC,IAAI5zF,EAASjL,KAAK8+F,iBAElB,IAAK7zF,EAAQ,CACX,IAAI81B,EAAM/gC,KAAKo9B,SAAS8C,sBAAwB,EAAI,EAAI,GACxDj1B,EAASjL,KAAK8+F,iBAAmBx1F,SAAS4B,cAAc,WACjD7E,MAAQ,IAAM06B,EACrB91B,EAAO3E,OAAS,GAAKy6B,EAErB,IAAIg+D,EAAO9zF,EAAOG,WAAW,MAE7B2zF,EAAKluF,KAAO,iBAEZkuF,EAAKjpE,MAAMiL,EAAKA,GAGlB,IAAI1lB,EAAMpQ,EAAOG,WAAW,MAC5BiQ,EAAI4C,UAAU,EAAG,EAAGhT,EAAO5E,MAAO4E,EAAO3E,QACzC,IAAIsY,EAAQ5e,KAAK68B,MAAMtkB,QAAsB,aAC7CwC,GAAOuF,SAASjF,EAAKmjF,EAAWrB,GAAav+E,GAC7C5e,KAAK09F,YAAYzyF,GACjBE,EAAG6zF,WAAW7zF,EAAG8zF,WAAY,EAAG9zF,EAAG+zF,KAAM/zF,EAAG+zF,KAAM/zF,EAAGg0F,cAAel0F,GAGpE,IAAIlM,EAAK/C,EACLkiB,EAAKliB,GAHTmL,EAAI,KAIAnI,EAAKoO,EACL+Q,EAAK/Q,GAJThG,EAAI,IAKJ+D,EAAGuzF,WAAWvzF,EAAG8yF,aAAcj+F,KAAKo/F,KAAKrgG,EAAIC,EAAID,EAAIof,EAAID,EAAIlf,EAAIkf,EAAIC,GAAKhT,EAAGyzF,cAC7EzzF,EAAG0yF,UAAU79F,KAAKw9F,QAAsB,aAAG,GAC3CryF,EAAGizF,WAAWjzF,EAAGkzF,eAAgB,EAAG,IAGtC/wF,EAAO4wF,eAAiB,SAAwBliG,EAAGoR,EAAGjG,EAAGC,EAAGi4F,GAC1D,IAIIhnF,EAJAtZ,EAAK/C,EACLkiB,EAAKliB,EAAImL,EACTnI,EAAKoO,EACL+Q,EAAK/Q,EAAIhG,EAIXiR,EADE5gB,EAAUsH,IAAOtH,EAAUymB,IAAOzmB,EAAUuH,IAAOvH,EAAU0mB,GACxDne,KAAKs/F,QAAQvgG,EAAIC,EAAID,EAAIof,EAAID,EAAIlf,EAAIkf,EAAIC,GAEzCne,KAAKo/F,KAAKrgG,EAAIC,EAAID,EAAIof,EAAID,EAAIlf,EAAIkf,EAAIC,GAG/C,IAAI2/E,EAAW99F,KAAKu/F,gBAAgBlnF,EAAMgnF,GAI1C,OAHAvB,EAASz3F,MAAQc,EACjB22F,EAASx3F,OAASc,EAClB02F,EAASn/F,KAAO0Z,aAAgBmnF,WAAa,QAAU,QAChD1B,GAGTxwF,EAAOmyF,aAAe,SAAsB9iF,EAAO+iF,EAAUC,EAAWC,EAAS1b,GAC/E,IAAI/4E,EAAKnL,KAAKmL,GACdnL,KAAK09F,YAAY/gF,GACjBxR,EAAGyyF,iBAAiB59F,KAAKw9F,QAAkB,UAAG,EAAOx9F,KAAKo9B,SAASu6C,gBACnExsE,EAAG0yF,UAAU79F,KAAKw9F,QAAmB,UAAGtZ,GACxC/4E,EAAG6yF,WAAW7yF,EAAG8yF,aAAcj+F,KAAK6/F,WACpC7/F,KAAKm+F,mBAAmB,CAAC,aAAc,IACvChzF,EAAGuzF,WAAWvzF,EAAG8yF,aAAc,IAAIU,aAAae,GAAWv0F,EAAGyzF,cAC9DzzF,EAAG6yF,WAAW7yF,EAAG8yF,aAAcj+F,KAAK8/F,WACpC9/F,KAAKm+F,mBAAmB,CAAC,aAAc,IACvChzF,EAAGuzF,WAAWvzF,EAAG8yF,aAAc,IAAIU,aAAagB,GAAYx0F,EAAGyzF,cAC/DzzF,EAAGuzF,WAAWvzF,EAAG40F,qBAAsB,IAAIC,YAAYJ,GAAUz0F,EAAGyzF,cACpEzzF,EAAG80F,aAAa90F,EAAG+0F,UAAWN,EAAQ3oG,OAAQkU,EAAGg1F,eAAgB,IAGnE7yF,EAAO8yF,cAAgB,WACrBpgG,KAAKqgG,QAAUtlF,GAAOG,aAAalb,KAAKiL,OAAO5E,MAAOrG,KAAKiL,OAAO3E,SAGpEgH,EAAOgzF,gBAAkB,WACnBtgG,KAAKiL,OAAOE,IAAMnL,KAAKiL,OAAOE,GAAGvO,KACnCoD,KAAKmL,GAAKnL,KAAKiL,OAAOE,GAAGvO,OAEzBoD,KAAKmL,GA1Ob,SAAyBF,EAAQsN,GAU/B,IATA,IAAIgR,EAAa,CACf,OAAS,EACT,SAAW,EACX,uBAAyB,EACzB,WAAa,GAEXg3E,EAAQ,CAAC,QAAS,sBAClBllG,EAAU,KAELtE,EAAI,EAAGA,EAAIwpG,EAAMtpG,SAAUF,EAAG,CACrC,IACEsE,EAAU4P,EAAOG,WAAWm1F,EAAMxpG,GAAIwhB,GAAWgR,GACjD,MAAOxV,IAET,GAAI1Y,EACF,MAIJ,OAAOA,EAsNSilG,CAAgBtgG,KAAKqgG,SAAWrgG,KAAKiL,OAAQjL,KAAK68B,MAAMtkB,QAAmB,WAGvF,IAAIpN,EAAKnL,KAAKmL,GACdA,EAAGq1F,WAAW,EAAK,EAAK,EAAK,GAC7Br1F,EAAGgiB,QAAQhiB,EAAGs1F,YACdt1F,EAAG6hB,OAAO7hB,EAAGu1F,cACbv1F,EAAG6hB,OAAO7hB,EAAGw1F,OACbx1F,EAAGy1F,UAAUz1F,EAAG01F,IAAK11F,EAAG21F,qBACxB9gG,KAAKw9F,QAAUx9F,KAAK+gG,cAAc9D,GAAyBj9F,KAAK68B,MAAMtkB,QAAwB,gBAAK0kF,GAA2B,CAAC,WAAY,UAAW,YAAa,iBACnKj9F,KAAKy+F,aAAez+F,KAAKghG,eACzBhhG,KAAKy9F,WAAWz9F,KAAKw9F,SACrBx9F,KAAK8/F,UAAY9/F,KAAKghG,eACtB71F,EAAG6yF,WAAW7yF,EAAG8yF,aAAcj+F,KAAK8/F,WACpC9/F,KAAKm+F,mBAAmB,CAAC,aAAc,EAAG,kBAC1ChzF,EAAGuzF,WAAWvzF,EAAG8yF,aAAc,IAAIx/F,WAAW,CAAC,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,EAAK,IAAO0M,EAAG81F,aAC5FjhG,KAAKkhG,cAAc,WACnB/1F,EAAGg2F,cAAch2F,EAAa,UAC9BA,EAAGi2F,YAAYj2F,EAAGk2F,gCAAgC,IAGpD/zF,EAAOg0F,eAAiB,WAClBthG,KAAKmL,IACPnL,KAAKmL,GAAGo2F,SAAS,EAAG,EAAGvhG,KAAKiL,OAAO5E,MAAOrG,KAAKiL,OAAO3E,QAGnDtG,KAAKqgG,UAINrgG,KAAKqgG,QAAQh6F,QAAUrG,KAAKiL,OAAO5E,OAASrG,KAAKqgG,QAAQ/5F,SAAWtG,KAAKiL,OAAO3E,SAClFtG,KAAKqgG,QAAQh6F,MAAQrG,KAAKiL,OAAO5E,MACjCrG,KAAKqgG,QAAQ/5F,OAAStG,KAAKiL,OAAO3E,UAItCgH,EAAOk0F,cAAgB,WACjBxhG,KAAKmL,IACPnL,KAAKmL,GAAG00B,MAAM7/B,KAAKmL,GAAGs2F,iBAAmBzhG,KAAKmL,GAAGu2F,qBAIrDp0F,EAAOq0F,aAAe,SAAsBhlF,GACrCA,IAIDA,EAAMilF,SACR5hG,KAAK6hG,YAAYllF,EAAMilF,SAGrBjlF,EAAMmhF,UACR99F,KAAK+9F,gBAAgBphF,EAAMmhF,iBAGtBnhF,EAAMilF,eACNjlF,EAAMmhF,WAGfxwF,EAAOw0F,eAAiB,SAAwBnlF,GAC9C,IAAIxR,EAAKnL,KAAKmL,GACVy2F,EAAU5hG,KAAK+hG,cAAgB52F,EAAG62F,gBAYtC,OAXA72F,EAAG82F,YAAY92F,EAAG8zF,WAAY2C,GAC9Bz2F,EAAG+2F,cAAc/2F,EAAG8zF,WAAY9zF,EAAGg3F,mBAAoBh3F,EAAGi3F,QAC1Dj3F,EAAG+2F,cAAc/2F,EAAG8zF,WAAY9zF,EAAGk3F,mBAAoBl3F,EAAGi3F,QAC1Dj3F,EAAG+2F,cAAc/2F,EAAG8zF,WAAY9zF,EAAGm3F,eAAgBn3F,EAAGo3F,eACtDp3F,EAAG+2F,cAAc/2F,EAAG8zF,WAAY9zF,EAAGq3F,eAAgBr3F,EAAGo3F,eACtDp3F,EAAG6zF,WAAW7zF,EAAG8zF,WAAY,EAAG9zF,EAAG+zF,KAAM/zF,EAAG+zF,KAAM/zF,EAAGg0F,cAAexiF,GAEhEllB,EAAUyE,EAAKygB,EAAMtW,SAAW5O,EAAUyE,EAAKygB,EAAMtW,SACvD8E,EAAGs3F,eAAet3F,EAAG8zF,YAGhB2C,GAGTt0F,EAAOy0F,WAAa,WACb/hG,KAAK0iG,YACR1iG,KAAK0iG,UAAY,IAGnB,IAAIC,EAAW3iG,KAAK0iG,UACpB,OAAOC,GAAYA,EAAS1rG,OAAS,EAAI0rG,EAASC,MAAQ,MAG5Dt1F,EAAOu0F,YAAc,SAAqBD,GACxC5hG,KAAK0iG,UAAU5nG,KAAK8mG,IAGtBt0F,EAAOowF,YAAc,SAAqB/gF,GACxC,IAAIxR,EAAKnL,KAAKmL,GACVy2F,EAAUjlF,EAAMilF,QAQpB,OANKA,IACHA,EAAU5hG,KAAK8hG,eAAenlF,GAC9BA,EAAMilF,QAAUA,GAGlBz2F,EAAG82F,YAAY92F,EAAG8zF,WAAY2C,GACvBA,GAGTt0F,EAAOu1F,eAAiB,WACjB7iG,KAAK8iG,gBACR9iG,KAAK8iG,cAAgB,IAGvB,IAAIC,EAAe/iG,KAAK8iG,cACxB,OAAOC,GAAgBA,EAAa9rG,OAAS,EAAI8rG,EAAaH,MAAQ,MAGxEt1F,EAAOywF,gBAAkB,SAAyBsB,GAChDr/F,KAAK8iG,cAAchoG,KAAKukG,IAG1B/xF,EAAOiyF,gBAAkB,SAAyBlnF,EAAMylF,GACtD,IAAI3yF,EAAKnL,KAAKmL,GACVk0F,EAASvB,GAAY99F,KAAKgjG,oBAG9B,OAFA73F,EAAG6yF,WAAW7yF,EAAG8yF,aAAcoB,GAC/Bl0F,EAAGuzF,WAAWvzF,EAAG8yF,aAAc5lF,EAAMlN,EAAG81F,aACjC5B,GAGT/xF,EAAO01F,kBAAoB,WACzB,OAAOhjG,KAAK6iG,kBAAoB7iG,KAAKghG,gBAGvC1zF,EAAO21F,eAAiB,WACtB,IAAI93F,EAAKnL,KAAKmL,GAEd,GAAKA,EAAL,CAyBA,GArBInL,KAAKy+F,eACPtzF,EAAG+3F,aAAaljG,KAAKy+F,qBACdz+F,KAAKy+F,cAGVz+F,KAAKmjG,WACPnjG,KAAKmjG,SAAS1lF,SAAQ,SAAU/gB,GAC9ByO,EAAG+3F,aAAaxmG,aAGXsD,KAAKmjG,UAGVnjG,KAAK0iG,YACP1iG,KAAK0iG,UAAUjlF,SAAQ,SAAU9gB,GAC/B,OAAOwO,EAAGi4F,cAAczmG,aAGnBqD,KAAK0iG,WAGV1iG,KAAK8+F,iBAAkB,CACzB,IAAI8C,EAAU5hG,KAAK8+F,iBAAiB8C,QAEhCA,GACFz2F,EAAGi4F,cAAcxB,UAGZ5hG,KAAK8+F,iBAAiB8C,eACtB5hG,KAAK8+F,iBAGd,IAAItB,EAAUryF,EAAGqyF,QACjBryF,EAAG6xF,aAAaQ,EAAQ6F,gBACxBl4F,EAAG6xF,aAAaQ,EAAQ8F,cACxBn4F,EAAGo4F,cAAc/F,UACVx9F,KAAKmL,UACLnL,KAAKqgG,UAGd/yF,EAAO0zF,aAAe,WACpB,IACI3B,EADKr/F,KAAKmL,GACE61F,eAEhB,IAAK3B,EACH,MAAM,IAAIrhG,MAAM,sCASlB,OANKgC,KAAKmjG,WACRnjG,KAAKmjG,SAAW,IAGlBnjG,KAAKmjG,SAASroG,KAAKukG,GAEZA,GAGT/xF,EAAO6wF,mBAAqB,SAA+B50E,IA3W/D,SAA4Bpe,EAAIqyF,EAASj0E,GACvC,GAAIjuB,MAAMC,QAAQguB,EAAW,IAAK,CAIhC,IAHA,IAAIi6E,EAAQ7E,aAAa8E,kBACrBC,EAAS,EAEJ3sG,EAAI,EAAGA,EAAIwyB,EAAWtyB,OAAQF,IACrC2sG,GAAUn6E,EAAWxyB,GAAG,IAAM,EAKhC,IAFA,IAAIse,EAAS,EAEJxQ,EAAK,EAAGA,EAAK0kB,EAAWtyB,OAAQ4N,IAAM,CAC7C,IAAI8+F,EAAOx4F,EAAGy4F,kBAAkBpG,EAASj0E,EAAW1kB,GAAI,IAExD,GAAI8+F,EAAO,EACT,MAAM,IAAI3lG,MAAM,yCAA2CurB,EAAW1kB,GAAI,IAG5EsG,EAAG04F,oBAAoBF,EAAMp6E,EAAW1kB,GAAI,GAAIsG,EAAGoe,EAAW1kB,GAAI,IAAM,UAAU,EAAO2+F,EAAQE,EAAQF,EAAQnuF,GACjHA,GAAUkU,EAAW1kB,GAAI,IAAM,EAC/BsG,EAAG24F,wBAAwBH,QAExB,CACL,IAAII,EAAQ54F,EAAGy4F,kBAAkBpG,EAASj0E,EAAW,IAErDpe,EAAG04F,oBAAoBE,EAAOx6E,EAAW,GAAIpe,EAAGoe,EAAW,IAAM,UAAU,EAAO,EAAG,GACrFpe,EAAG24F,wBAAwBC,IAkVzB5F,CAAmBn+F,KAAKmL,GAAInL,KAAKmL,GAAGqyF,QAASj0E,IAG/Cjc,EAAOyzF,cAAgB,SAA0BiD,EAAMC,EAAMC,GAC3D,IAEIC,EA1YV,SAAuBh5F,EAAI64F,EAAMC,GAC/B,IAAIX,EAAe9G,GAAcrxF,EAAIA,EAAGi5F,cAAeJ,GACnDX,EAAiB7G,GAAcrxF,EAAIA,EAAGk5F,gBAAiBJ,GAE3D,IAAKX,IAAiBD,EACpB,OAAO,KAGT,IAAI7F,EAAUryF,EAAG41F,gBAEjB,OAAKvD,GAILryF,EAAGm5F,aAAa9G,EAAS8F,GACzBn4F,EAAGm5F,aAAa9G,EAAS6F,GACzBl4F,EAAGo5F,YAAY/G,GACR,CACLA,QAASA,EACT8F,aAAcA,EACdD,eAAgBA,IATT,KA+XiBtC,CAFb/gG,KAAKmL,GAE0B64F,EAAMC,GAC1CzG,EAAU2G,EAAgB3G,QAC1B8F,EAAea,EAAgBb,aAC/BD,EAAiBc,EAAgBd,eAOrC,OALA7F,EAAQ8F,aAAeA,EACvB9F,EAAQ6F,eAAiBA,EAEzBrjG,KAAKwkG,cAAchH,EAAS0G,GAErB1G,GAGTlwF,EAAOmwF,WAAa,SAAoBD,GACtC,IAAIryF,EAAKnL,KAAKmL,GAGd,OAFAA,EAAGsyF,WAAWD,GACdryF,EAAGqyF,QAAUA,EACNx9F,MAGTsN,EAAO4zF,cAAgB,SAAuBuD,EAASC,GACrD,IAAIv5F,EAAKnL,KAAKmL,GAEVw5F,EAAW3kG,KAAK4kG,YAAYz5F,EAAGqyF,QAASiH,GAO5C,OALKC,IACHA,EAAS,GAGXv5F,EAAG05F,UAAUF,EAAUD,GAChBC,GAGTr3F,EAAOk3F,cAAgB,SAAuBhH,EAAS0G,GACrD,IAAK,IAAIntG,EAAI,EAAGA,EAAImtG,EAASjtG,OAAQF,IAAK,CACxC,IAAImD,EAAOgqG,EAASntG,GAChB+tG,EAAUZ,EAASntG,GACnB2F,EAAIxC,EAAKe,QAAQ,KAEjByB,GAAK,IACPxC,EAAOA,EAAK+G,UAAU,EAAGvE,GAEpB1D,IACH8rG,EAAUA,EAAQ7jG,UAAU,EAAGvE,KAInC8gG,EAAQtjG,GAAQ8F,KAAK4kG,YAAYpH,EAASsH,KAI9Cx3F,EAAOs3F,YAAc,SAAqBpH,EAASuH,GACjD,IACID,EADK9kG,KAAKmL,GACG65F,mBAAmBxH,EAASuH,GAE7C,IAAKD,EACH,MAAM,IAAI9mG,MAAM,yCAA2C+mG,GAG7D,OAAOD,GAGFzH,EAxYQ,CAyYf7yE,GAgCF,OA9BA3zB,EAAOwmG,EAAWllG,UAAW,CAC3BinG,MACMvrE,EAAMnnB,GAAUH,IAAM,KAAO,IAAIoyF,aAAa,GAC3C,SAAU74D,EAAIC,EAAIk/D,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAS3C,OARAzxE,EAAI,GAAKiS,EACTjS,EAAI,GAAKkS,EACTlS,EAAI,GAAKoxE,EACTpxE,EAAI,GAAKqxE,EACTrxE,EAAI,GAAKsxE,EACTtxE,EAAI,GAAKuxE,EACTvxE,EAAI,GAAKwxE,EACTxxE,EAAI,GAAKyxE,EACFzxE,IAGXyrE,QAAS,WACP,IAAIzrE,EAAMnnB,GAAUH,IAAM,KAAO,IAAIizF,WAAW,GAChD,OAAO,SAAU15D,EAAIC,EAAIk/D,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAS3C,OARAzxE,EAAI,GAAKiS,EACTjS,EAAI,GAAKkS,EACTlS,EAAI,GAAKoxE,EACTpxE,EAAI,GAAKqxE,EACTrxE,EAAI,GAAKsxE,EACTtxE,EAAI,GAAKuxE,EACTvxE,EAAI,GAAKwxE,EACTxxE,EAAI,GAAKyxE,EACFzxE,GAXF,KAeJwpE,GAGLkI,GAAY,CACdh4D,SAAU7gC,GAAU5B,MAAQ,KAAO,SACnCq4B,YAAa,MAEXqiE,GAAe,IAAIt2F,GAAM,EAAG,GAE5Bu2F,GAAa,SAAUl+B,GAGzB,SAASk+B,EAAWrrG,EAAIsrG,EAAQntF,GAC9B,IAAIwX,EASJ,OAPI21E,GAAWpqG,MAAMC,QAAQmqG,IAAYA,EAAOrsG,MAC9Ckf,EAAUmtF,EACVA,EAAS,OAGX31E,EAAQw3C,EAAOjvE,KAAK0H,KAAM5F,EAAIme,IAAYvY,MACpC2lG,QAAUD,EACT31E,EAZTpjB,GAAe84F,EAAYl+B,GAe3B,IAAIj6D,EAASm4F,EAAWttG,UA2CxB,OAzCAmV,EAAO+xB,MAAQ,WACbr/B,KAAK4lG,eAAe5lG,KAAK2lG,UAG3Br4F,EAAOu4F,UAAY,SAAmBH,GAKpC,OAJA1lG,KAAK2lG,QAAUD,EAEf1lG,KAAK4lG,eAAeF,GAEb1lG,MAGTsN,EAAOw4F,UAAY,WACjB,OAAO9lG,KAAK2lG,SAGdr4F,EAAOs4F,eAAiB,SAAwBF,GAC9CA,EAASA,GAAU,GAEdpqG,MAAMC,QAAQmqG,KACjBA,EAAS,CAACA,IAGZ,IAAI7nG,EAAMmC,KAAKo9B,SACfp9B,KAAK+lG,WAAaL,EAAO7nG,KAAI,SAAUrE,GACrC,IAAIujB,EAAS,IAAIkW,GAAOz5B,EAAIujB,QAC5B,OAAOlmB,EAAO,GAAI2C,EAAK,CACrBujB,OAAQA,EACRy7E,SAAUz7E,EAAOsY,WAAU,SAAU7xB,GACnC,OAAO3F,EAAIopD,aAAazjD,EAAG3F,EAAI6oC,qBAIrC1mC,KAAK2lG,QAAUD,EACf,IAAIn4D,EAAWvtC,KAAKm+B,cAEhBoP,GACFA,EAASy4D,iBAINP,EA3DQ,CA4DfjoD,IAEFioD,GAAWh3E,aAAa82E,IACxB,IAAIU,GAAc,GAEdC,GAA2B,SAAUC,GAGvC,SAASD,IACP,OAAOC,EAAgBhjG,MAAMnD,KAAMhJ,YAAcgJ,KAHnD2M,GAAeu5F,EAA0BC,GAMzC,IAAI3iE,EAAU0iE,EAAyB/tG,UAmJvC,OAjJAqrC,EAAQ4iE,WAAa,WACnB,OAAIpmG,KAAKo9B,SAASiB,aACZxhB,SACFA,QAAQC,KAAK,mGAGR,IAMX0mB,EAAQ7F,eAAiB,WACvB,IAAID,EAAS19B,KAEb,GAAIA,KAAKqmG,aACP,OAAOJ,GAGT,IAEIK,EAFQtmG,KAAK68B,MAEAkpE,WAAWloG,KAAI,SAAUrE,GACxC,MAAO,CAACA,EAAIH,IAAK,KAAM,SAGzB,GAAI2G,KAAKqH,UAAW,CAClB,IAAIk/F,EAAW,GACXl/F,EAAY,IAAIi2B,GACpBgpE,EAAK7oF,SAAQ,SAAUpkB,GACrB,GAAIqkC,EAAOr2B,UAAUk5B,iBAAiBlnC,GAAM,CAC1C,IAAIG,EAAMkkC,EAAOr2B,UAAU6S,SAAS7gB,GAEpCgO,EAAU2W,YAAY3kB,EAAKG,QAE3B+sG,EAASzrG,KAAKzB,MAGlB2G,KAAKqH,UAAUoW,SAAQ,SAAUpkB,EAAK0L,GAC/BsC,EAAUk5B,iBAAiBlnC,IAC9BqkC,EAAO8oE,YAAYzhG,EAAI4X,UAG3B3c,KAAKqH,UAAYA,EACjBi/F,EAAOC,EAIT,OADAvmG,KAAKqmG,cAAe,EACbC,GAGT9iE,EAAQgjE,YAAc,aAEtBhjE,EAAQwiE,cAAgB,WACtBhmG,KAAKqmG,cAAe,EACpBrmG,KAAKg9B,eAGPwG,EAAQtF,aAAe,WACrB,IAAIrgC,EAAMmC,KAAKo9B,SAEf,QAAIv/B,EAAI0gC,cAAgB1gC,EAAIwgC,aAIrB8nE,EAAgBhuG,UAAU+lC,aAAa5lC,KAAK0H,OAGrDwjC,EAAQP,KAAO,WACRjjC,KAAKomG,eAIVpmG,KAAK0b,gBACL1b,KAAK88B,UAAW,EAEhB98B,KAAKymG,cAELzmG,KAAKiiC,mBAGPuB,EAAQijE,YAAc,WACpB,IAAItsF,EAAUna,KAAK68B,MAAMkpE,WACrBloG,EAAMmC,KAAKo9B,SAEXmT,EAAY1yC,EAAI4iC,aAAa5iC,EAAI6oC,aAErC,GAAIvsB,GAAWA,EAAQljB,OACrB,IAAK,IAAIF,EAAI,EAAGA,EAAIojB,EAAQljB,OAAQF,IAAK,CACvC,IAAIgmB,EAAS5C,EAAQpjB,GAAGyhG,SACpB77E,EAAQ3c,KAAKqH,WAAarH,KAAKqH,UAAU6S,SAASC,EAAQpjB,GAAGsC,KAE7DsjB,GAAS4zB,EAAUvc,WAAWjX,KAChC/c,KAAK88B,UAAW,EAEhB98B,KAAK0mG,WAAW/pF,EAAOI,EAAQ5C,EAAQpjB,GAAGmtF,SAAW,MAM7D1gD,EAAQkjE,WAAa,SAAoB/pF,EAAOI,EAAQmnE,GACtD,IAAIxlE,EAAc,EACdrD,EAAMrb,KAAK3E,QAEX6oF,EAAU,IACZxlE,EAAcrD,EAAIqD,YAClBrD,EAAIqD,YAAcwlE,GAGpB,IAAIrmF,EAAMmC,KAAKo9B,SACX4jC,EAAKwkC,GAAa9gG,IAAIqY,EAAOyW,KAAMzW,EAAO4W,MAE1C/lB,EAAQ/P,EAAI+hC,uBAAuBohC,EAAInjE,EAAI6oC,aAE3C1qC,EAAI4R,EAAM5R,EACVoR,EAAIQ,EAAMR,EACVurB,EAAU96B,EAAIsoC,aAEdxN,IACFtd,EAAIsG,OACJtG,EAAIsD,UAAU3iB,EAAGoR,GAEburB,GACFtd,EAAIrL,QAAQ2oB,EAAUngC,KAAKC,GAAK,KAGlCuD,EAAIoR,EAAI,GAGV,IAAI0oB,EAAQj4B,EAAIwyC,aAChBh1B,EAAIwD,UAAUlC,EAAO3gB,EAAGoR,EAAG2P,EAAOK,WAAa0Y,EAAO/Y,EAAOM,YAAcyY,GAEvE6C,GACFtd,EAAIwG,UAGFnD,IACFrD,EAAIqD,YAAcA,IAItB8kB,EAAQvF,kBAAoB,WAC1Bj+B,KAAKijC,QAGAijE,EA1JsB,CA2J7BvpE,IAEEgqE,GAAuB,SAAUC,GAGnC,SAASD,IACP,OAAOC,EAAmBzjG,MAAMnD,KAAMhJ,YAAcgJ,KAHtD2M,GAAeg6F,EAAsBC,GAMrC,IAAIC,EAAUF,EAAqBxuG,UA4CnC,OA1CA0uG,EAAQT,WAAa,WACnB,OAAO,GAGTS,EAAQH,WAAa,SAAoB/pF,EAAOI,EAAQmnE,GACtDlkF,KAAKs9F,YAAY3gF,EAAOI,EAAOyW,KAAMzW,EAAO4W,KAAM5W,EAAOK,WAAYL,EAAOM,YAAa,EAAG6mE,IAG9F2iB,EAAQ/lE,cAAgB,WACtB9gC,KAAKsgG,mBAGPuG,EAAQ5lE,aAAe,SAAsBC,GACtClhC,KAAKiL,SAIV27F,EAAmBzuG,UAAU8oC,aAAa3oC,KAAK0H,KAAMkhC,GAErDlhC,KAAKshG,mBAGPuF,EAAQ/mE,YAAc,WACf9/B,KAAKiL,SAIV27F,EAAmBzuG,UAAU2nC,YAAYxnC,KAAK0H,MAE9CA,KAAKwhG,kBAGPqF,EAAQL,YAAc,SAAqB7pF,GACzC3c,KAAK2hG,aAAahlF,IAGpBkqF,EAAQ5nE,SAAW,WACjBj/B,KAAKijG,iBAEL2D,EAAmBzuG,UAAU8mC,SAAS3mC,KAAK0H,OAGtC2mG,EAnDkB,CAoDzBvJ,GAAkB8I,KAEpBT,GAAWjpE,iBAAiB,SAAU0pE,IACtCT,GAAWjpE,iBAAiB,KAAMmqE,IAElC,IAAIG,GAAsB,SAAUX,GAGlC,SAASW,IACP,OAAOX,EAAgBhjG,MAAMnD,KAAMhJ,YAAcgJ,KAHnD2M,GAAem6F,EAAqBX,GAMpC,IAAI74F,EAASw5F,EAAoB3uG,UA6KjC,OA3KAmV,EAAOy5F,iBAAmB,WACxB,MAAO,IAGTz5F,EAAO05F,cAAgB,WACrB,MAAO,IAGT15F,EAAOuzB,eAAiB,WAClB7gC,KAAKiL,QAAUjL,KAAK68B,MAAMtkB,QAAsB,eAClDvY,KAAKq/F,OAAStkF,GAAOG,aAAalb,KAAKiL,OAAO5E,MAAOrG,KAAKiL,OAAO3E,OAAQtG,KAAKo9B,SAASwD,eAI3FtzB,EAAO4wB,aAAe,WACpB,QAAIl+B,KAAK68B,MAAMtkB,QAAmB,aAIxBvY,KAAKo9B,SAEPY,kBAAoBh+B,KAAK68B,MAAMoB,oBAIhCkoE,EAAgBhuG,UAAU+lC,aAAa5lC,KAAK0H,OAGrDsN,EAAO21B,KAAO,WACZjjC,KAAK0b,gBACL1b,KAAKinG,qBAELjnG,KAAKknG,cAGP55F,EAAO2wB,kBAAoB,WACzBj+B,KAAKmnG,2BAGP75F,EAAOgyB,eAAiB,WACtB,IAAI8nE,EAAYjB,EAAgBhuG,UAAUmnC,eAAehnC,KAAK0H,MAE9D,GAAIonG,GAAaA,EAAUzqF,OAAS3c,KAAK68B,MAAMtkB,QAAsB,aAAG,CACtE,IAAItN,EAASm8F,EAAUzqF,MAEnB3c,KAAKq/F,OAAOh5F,QAAU4E,EAAO5E,OAASrG,KAAKq/F,OAAO/4F,SAAW2E,EAAO3E,SACtEtG,KAAKq/F,OAAOh5F,MAAQ4E,EAAO5E,MAC3BrG,KAAKq/F,OAAO/4F,OAAS2E,EAAO3E,QAG9B,IAAI+gG,EAAgBrnG,KAAKq/F,OAAOj0F,WAAW,MACvCk8F,EAAUtnG,KAAK68B,MAAM0qE,aAAaF,EAAernG,KAAK3E,eAE1CS,IAAZwrG,GAAyBA,KAC3BvsF,GAAO4B,MAAM0qF,EAAep8F,EAAQ,EAAG,GACvCm8F,EAAUzqF,MAAQ3c,KAAKq/F,QAI3B,OAAO+H,GAGT95F,EAAOggB,OAAS,WAEd,cADOttB,KAAKwnG,aACLrB,EAAgBhuG,UAAUm1B,OAAOh1B,KAAK0H,OAG/CsN,EAAO60B,YAAc,SAAqBxV,GACxC3sB,KAAK68B,MAAMsF,YAAYxV,GAEvBw5E,EAAgBhuG,UAAUgqC,YAAY7pC,KAAK0H,KAAM2sB,IAGnDrf,EAAO80B,UAAY,SAAmBzV,GACpC3sB,KAAK68B,MAAMuF,UAAUzV,GAErBw5E,EAAgBhuG,UAAUiqC,UAAU9pC,KAAK0H,KAAM2sB,IAGjDrf,EAAO+0B,UAAY,SAAmB1V,GACpC3sB,KAAK68B,MAAMwF,UAAU1V,GAErBw5E,EAAgBhuG,UAAUkqC,UAAU/pC,KAAK0H,KAAM2sB,IAGjDrf,EAAOi1B,YAAc,SAAqB5V,GACxC3sB,KAAK68B,MAAM0F,YAAY5V,GAEvBw5E,EAAgBhuG,UAAUoqC,YAAYjqC,KAAK0H,KAAM2sB,IAGnDrf,EAAOk1B,SAAW,SAAkB7V,GAClC3sB,KAAK68B,MAAM2F,SAAS7V,GAEpBw5E,EAAgBhuG,UAAUqqC,SAASlqC,KAAK0H,KAAM2sB,IAGhDrf,EAAOm1B,UAAY,SAAmB9V,GACpC3sB,KAAK68B,MAAM4F,UAAU9V,GAErBw5E,EAAgBhuG,UAAUsqC,UAAUnqC,KAAK0H,KAAM2sB,IAGjDrf,EAAOg1B,SAAW,SAAkB3V,GAClC3sB,KAAK68B,MAAMyF,SAAS3V,GAEpBw5E,EAAgBhuG,UAAUmqC,SAAShqC,KAAK0H,KAAM2sB,IAGhDrf,EAAO25F,mBAAqB,WAC1B,IAAKjnG,KAAKynG,WAAY,CACpB,IAAI77D,EAAS87D,GAAa1nG,KAAK+mG,oBAC/B/mG,KAAKwnG,aAAexnG,KAAK68B,MAAM8qE,cAAcxkG,MAAMnD,KAAK68B,MAAO,CAAC78B,KAAK3E,SAAS/E,OAAOs1C,IAEhF5rC,KAAKwnG,eACRxnG,KAAKwnG,aAAe,IAGjBlsG,MAAMC,QAAQyE,KAAKwnG,gBACtBxnG,KAAKwnG,aAAe,CAACxnG,KAAKwnG,eAG5BxnG,KAAKynG,YAAa,IAItBn6F,EAAOs6F,mBAAqB,WAC1B,IAAK5nG,KAAKo9B,SACR,OAAO,KAGT,IAAI5+B,EAAOwB,KAAKgiC,gBAEhB,GAAIxjC,EAAiB,aAAMA,EAAa,OAAEw1B,WAAWx1B,EAAiB,YAEpE,OADAwB,KAAKiiC,iBACE,KAGT,IAAI95B,EAAO,CAACnI,KAAK3E,QAASmD,GACtBotC,EAAS87D,GAAa1nG,KAAKgnG,iBAG/B,OAFA7+F,EAAKrN,KAAKqI,MAAMgF,EAAMyjC,GACtBzjC,EAAKrN,KAAKqI,MAAMgF,EAAMnI,KAAKwnG,cACpBr/F,GAGTmF,EAAO45F,WAAa,WAClB,IAAI/+F,EAAOnI,KAAK4nG,qBAEXz/F,IAILnI,KAAK68B,MAAMoG,KAAK9/B,MAAMnD,KAAK68B,MAAO10B,GAClCnI,KAAKiiC,mBAGP30B,EAAO65F,wBAA0B,WAC/B,GAAKnnG,KAAK68B,MAAMoB,kBAAhB,CAIA,IAAI91B,EAAOnI,KAAK4nG,qBAEXz/F,IAILnI,KAAK68B,MAAMoB,kBAAkB96B,MAAMnD,KAAK68B,MAAO10B,GAC/CnI,KAAKiiC,oBAGA6kE,EApLiB,CAqLxBnqE,IAEF,SAAS+qE,GAAa97D,GASpB,OARKA,IACHA,EAAS,IAGNtwC,MAAMC,QAAQqwC,KACjBA,EAAS,CAACA,IAGLA,EAGT,IAKIi8D,GAAc,SAAUtgC,GAG1B,SAASsgC,IACP,OAAOtgC,EAAOpkE,MAAMnD,KAAMhJ,YAAcgJ,KAH1C2M,GAAek7F,EAAatgC,GAM5B,IAAIj6D,EAASu6F,EAAY1vG,UA+EzB,OA7EAmV,EAAOgnC,eAAiB,WACtB,OAAO,GAGThnC,EAAOq6F,cAAgB,aAEvBr6F,EAAO21B,KAAO,aAEd31B,EAAOw6F,OAAS,WAKd,OAJI9nG,KAAKyyC,gBACPzyC,KAAKyyC,eAAezV,cAGfh9B,MAGTsN,EAAO4pD,KAAO,WAEZ,OADAl3D,KAAK6tB,OAAO,aAAa,GAClB7tB,MAGTsN,EAAOgqD,MAAQ,WAEb,OADAt3D,KAAK6tB,OAAO,aAAa,GAClB7tB,MAGTsN,EAAOy6F,UAAY,WACjB,OAAO/nG,KAAKuY,QAAmB,WAGjCjL,EAAOwyB,YAAc,WAKnB,OAJI9/B,KAAKyyC,gBACPzyC,KAAKyyC,eAAe3S,cAGf9/B,MAGTsN,EAAO06F,mBAAqB,WAK1B,OAJIhoG,KAAKyyC,gBACPzyC,KAAKyyC,eAAeu1D,qBAGfhoG,MAGTsN,EAAO20B,eAAiB,WAKtB,OAJIjiC,KAAKyyC,gBACPzyC,KAAKyyC,eAAexQ,iBAGfjiC,MAGTsN,EAAOuzB,eAAiB,WACtB,OAAO7gC,MAGTsN,EAAO60B,YAAc,aAErB70B,EAAO80B,UAAY,aAEnB90B,EAAO+0B,UAAY,aAEnB/0B,EAAOi1B,YAAc,aAErBj1B,EAAOk1B,SAAW,aAElBl1B,EAAOm1B,UAAY,aAEnBn1B,EAAOg1B,SAAW,aAElBh1B,EAAOi6F,aAAe,SAAsBF,GAE1C,OADAA,EAAcppF,UAAU,EAAG,EAAGopF,EAAcp8F,OAAO5E,MAAOghG,EAAcp8F,OAAO3E,QACxEtG,MAGF6nG,EAtFS,CAuFhBrqD,IAEFqqD,GAAYp5E,aA9FI,CACd,cAAgB,EAChB,WAAa,IA6Ffo5E,GAAYrrE,iBAAiB,SAAUsqE,IACvC,IAAImB,GAAe,IAAI/4F,GAAM,EAAG,GAK5Bg5F,GAAgB,SAAUC,GAG5B,SAASD,IACP,OAAOC,EAAahlG,MAAMnD,KAAMhJ,YAAcgJ,KAHhD2M,GAAeu7F,EAAeC,GAM9B,IAAI76F,EAAS46F,EAAc/vG,UA8D3B,OA5DAmV,EAAO86F,aAAe,aAEtB96F,EAAO21B,KAAO,SAAc5nC,EAASmD,GACnC,IAAIoiB,EAAS5gB,KAAKooG,aAAazxG,KAE/B,GAAKiqB,GAA4B,IAAlBA,EAAO3pB,OAAtB,CAUA,IAAI4G,EAAMmC,KAAKo9B,SACXrgB,EAASve,EAAKue,OAEdve,EAAKi6F,aACP17E,EAASve,EAAKue,OAAOkY,aAAaz2B,EAAKi6F,aAGzC17E,EAASA,EAAOsY,WAAU,SAAU7xB,GAClC,OAAO3F,EAAI+hC,uBAAuBp8B,OAAG1H,EAAW,EAAGmsG,OAIrD,IAFA,IAAIl0F,EAAI,EAAIvb,KAAKC,GAER1B,EAAI,EAAGiO,EAAI4b,EAAO3pB,OAAQF,EAAIiO,EAAGjO,IAAK,CAC7C,IAAIsgB,EAAMuJ,EAAO7pB,GAAG6W,MAEpB,GAAImP,EAAOhG,SAASM,GAAM,CACxB,IAAIuH,EAAQgC,EAAO7pB,GAAG6nB,OAAS5e,KAAKuY,QAAmB,WAAK,OACxD1f,EAAI+nB,EAAO7pB,GAAG8B,EAEdwC,EAAQmgB,YAAcoD,IACxBvjB,EAAQmgB,UAAYoD,GAGlB/lB,GAAK,EACPwC,EAAQgtG,SAAShxF,EAAIrb,EAAInD,EAAI,EAAGwe,EAAIjK,EAAIvU,EAAI,EAAGA,EAAGA,IAElDwC,EAAQgmB,YACRhmB,EAAQ0qB,IAAI1O,EAAIrb,EAAGqb,EAAIjK,EAAGvU,EAAI,EAAG,EAAGkb,GACpC1Y,EAAQkgB,SAKdvb,KAAKsoG,YAAYjtG,OA3CjB,CACiB2E,KAAKyyC,iBAGlBzyC,KAAKyyC,eAAe81D,cAAe,KA0CzCj7F,EAAOg7F,YAAc,SAAqBjtG,GACxC,IAAI4G,EAAI5G,EAAQglB,yBAChBhlB,EAAQglB,yBAA2B,kBACnC,IAAImoF,EAAQxoG,KAAKuY,QAAe,OAAK,GACrCld,EAAQmgB,UAAY,iBAAmB,EAAIgtF,EAAQ,IACnDntG,EAAQgtG,SAAS,EAAG,EAAGhtG,EAAQ4P,OAAO5E,MAAOhL,EAAQ4P,OAAO3E,QAC5DjL,EAAQglB,yBAA2Bpe,GAG9BimG,EArEW,CAsElBL,IAEFK,GAAcz5E,aA5EE,CACd,WAAa,IA4Efy5E,GAAc1rE,iBAAiB,SAAU,SAAUisE,GAGjD,SAAS/9E,IACP,OAAO+9E,EAAqBtlG,MAAMnD,KAAMhJ,YAAcgJ,KAHxD2M,GAAe+d,EAAQ+9E,GAMvB,IAAIjlE,EAAU9Y,EAAOvyB,UAsBrB,OApBAqrC,EAAQP,KAAO,WACRjjC,KAAKiL,QAAWjL,KAAK68B,MAAMtkB,QAAmB,YAAKvY,KAAKuoG,eAC3DvoG,KAAK0b,gBACL1b,KAAKuoG,cAAe,GAGtBvoG,KAAKinG,qBAELjnG,KAAKknG,cAGP1jE,EAAQvF,kBAAoB,WAC1Bj+B,KAAKijC,OACLjjC,KAAKuoG,cAAe,GAGtB/kE,EAAQ/E,wBAA0B,WAChCz+B,KAAKuoG,cAAe,GAGf79E,EA7BgC,CA8BvCo8E,KAGF,SAAS4B,GAAmBl/D,EAAY06C,GACtC,MAAO,CACL,WAAc16C,EACd,WAAc,OACd,gBAAmB,OACnB,gBAAmB,EACnB,YAAe,GACf,aAAgB,GAChB,QAAW06C,GAIf,IAAIykB,GAAY,CACd,gBAAkB,EAClB,OAAU,KACV,eAAkB,cAClB,mBAAsBD,GAAmB,UAAW,GACpD,mBAAsBA,GAAmB,SAAU,GACnD,sBAAyBA,GAAmB,SAAU,KAGpDE,GAAiB,SAAUz9B,GAG7B,SAASy9B,EAAe9mG,EAAUu1C,GAChC,IAAItnB,EAKJ,OAHAA,EAAQo7C,EAAW7yE,KAAK0H,KAAMq3C,IAASr3C,MACjCwsE,UAAY1qE,EAEbiuB,EAAMy8C,UAIJz8C,EAHE/iB,GAAuB+iB,GATlCpjB,GAAei8F,EAAgBz9B,GAe/B,IAAI79D,EAASs7F,EAAezwG,UAuoC5B,OAroCAmV,EAAO8vB,OAAS,WACd,OAAOp9B,KAAKwsE,UAAUpvC,UAGxB9vB,EAAOu7F,QAAU,WACL7oG,KAAKo9B,WAMXp9B,KAAKuY,QAAgB,SACvBvY,KAAK89D,gBAAkB99D,KAAKwsE,UAAUz9B,YAEtC/uC,KAAKwsE,UAAUl1B,UAAUt3C,KAAKuY,QAAgB,SAGhDvY,KAAK8oG,2BAGPx7F,EAAOw7F,uBAAyB,WAC9B,IAAIjrG,EAAMmC,KAAKo9B,SACX/iC,EAAMC,IACNyuG,EAhEsBx6B,yCAgEcl0E,EACpC2uG,EAjEsBz6B,yCAiEel0E,EAAM,UAC/C2F,KAAKipG,gBAAkBprG,EAAI4qC,SAASsgE,GACpC/oG,KAAKkpG,aAAerrG,EAAI4qC,SAASugE,GAE5BhpG,KAAKipG,kBACRjpG,KAAKipG,gBAAkB,IAAIx+B,GAAYs+B,GACvClrG,EAAIkgD,SAAS/9C,KAAKipG,kBAGfjpG,KAAKkpG,eACRlpG,KAAKkpG,aAAe,IAAIz+B,GAAYu+B,GACpCnrG,EAAIkgD,SAAS/9C,KAAKkpG,gBAItB57F,EAAO4Y,MAAQ,WACb,IAAIwX,EAAS19B,KAEb,GAAKA,KAAKwsE,WAAcxsE,KAAKwsE,UAAUpvC,WAAYp9B,KAAKwsE,UAAU28B,QAAlE,CAIA,IAAItrG,EAAMmC,KAAKo9B,SACfp9B,KAAKmpG,SAAU,EACf,IAAIrnG,EAAW9B,KAAKwsE,UACpBxsE,KAAKopG,kBAAoBtnG,EAASyW,QAAmB,UACrDzW,EAAS+rB,OAAO,aAAa,GAC7B7tB,KAAK6oG,UACL,IAAIz/D,EAAStnC,EAASkM,OACtBo7B,EAAOkO,UAAUx1C,EAAS0wC,sBAC1BpJ,EAAOxd,mBAAmB9pB,GAEtBA,EAASq2C,cACX/O,EAAOxd,mBAAmB9pB,EAASq2C,cAGrC/O,EAAO3c,gBAAgB3qB,GAEvBsnC,EAAOoO,MAAM,MAAM3pB,OAAO,CACxB,WAAa,IAEf7tB,KAAKqpG,QAAUjgE,EAEfppC,KAAKspG,sBAAsB,MAE3BxnG,EAAS1B,QAEL0B,aAAoB46D,IAAU56D,aAAoB09D,IAAU19D,aAAoB8+D,IAAa9+D,aAAoBw+D,KACnHtgE,KAAKupG,0BAGPvpG,KAAKkpG,aAAa3vD,eAAezB,YAAY1O,GAE7CppC,KAAKipG,gBAAgB1vD,eAErBv5C,KAAKwpG,aAAa,CAAC3rG,EAAK,YAAa,WACnC6/B,EAAOurE,gBAAgB7oG,UAGzBJ,KAAKwpG,aAAa,CAAC3rG,EAAK,UAAW,WACjC6/B,EAAOurE,gBAAgB9oG,UAGnB2B,aAAoB46D,IAGxBtzB,EAAOvb,OAAO,aAAa,GAC3Bub,EAAOpxB,GAAG,UAAWhY,KAAKypG,iBAAkBzpG,OAH5CA,KAAK0pG,sBAMH5nG,aAAoB46D,GACtB18D,KAAK2pG,qBACI7nG,aAAoB09D,GAC7Bx/D,KAAK4pG,qBACI9nG,aAAoB8+D,IAEpB9+D,aAAoBw+D,GAD7BtgE,KAAK6pG,4BAGI/nG,aAAoBy/D,KAAkBz/D,aAAoB42D,IAAW52D,aAAoBi7D,KAClG/8D,KAAK8pG,wBAITx8F,EAAOxH,KAAO,kBACL9F,KAAK+pG,gBACL/pG,KAAKutE,uBACLvtE,KAAKgqG,aAEZhqG,KAAKspG,sBAAsB,OAEjBtpG,KAAKo9B,kBAMRp9B,KAAKqpG,QAEZrpG,KAAKwsE,UAAU3+C,OAAO,YAAa7tB,KAAKopG,0BAEjCppG,KAAKopG,kBAEZppG,KAAKwsE,UAAUrsE,OAEfH,KAAKipG,gBAAgB37E,SAErBttB,KAAKkpG,aAAa57E,SAElBttB,KAAKssB,qBAELtsB,KAAKiqG,cAAgB,GAEjBjqG,KAAKuY,QAAgB,SACvBvY,KAAKwsE,UAAUl1B,UAAUt3C,KAAK89D,wBAEvB99D,KAAK89D,iBAGd99D,KAAKmpG,SAAU,IAGjB77F,EAAOquC,UAAY,WACjB,OAAIvkD,EAAM4I,KAAKmpG,UAIRnpG,KAAKmpG,SAGd77F,EAAO48F,mBAAqB,WAC1B,MAAO,CACL,aAAgBlqG,KAAKmqG,mBACrB,6BAA8BnqG,KAAKoqG,eAIvC98F,EAAOg8F,sBAAwB,SAA+Be,GAC5D,GAAIrqG,KAAKwsE,UAAW,CAClB,IAAIhB,EAASxrE,KAAKkqG,qBAElB,IAAK,IAAI1uG,KAAKgwE,EACZxrE,KAAKwsE,UAAU69B,GAAM7uG,EAAGgwE,EAAOhwE,GAAIwE,QAKzCsN,EAAO68F,mBAAqB,SAA4Bx9E,GAClD3sB,KAAKqpG,SACPrpG,KAAKqpG,QAAQ/xD,UAAU3qB,EAAMvF,OAAOorB,uBAIxCllC,EAAOm8F,iBAAmB,WACxBzpG,KAAK4rF,QAAQ,iBAAkB5rF,KAAKqpG,QAAQ3xD,iBAAiB3oC,WAE7D/O,KAAK6jE,YAGPv2D,EAAOi8F,wBAA0B,WAC/B,IAAIznG,EAAW9B,KAAKwsE,UAChB3hC,EAAU7qC,KAAKgqG,aAiBnB,OAfKn/D,GASHA,EAAQvd,SACRttB,KAAKgqG,aAAen/D,EAAU/oC,EAAS22D,aAEvCz4D,KAAKipG,gBAAgBnxD,YAAYjN,KAXjCA,EAAU/oC,EAAS22D,aAEnBz4D,KAAKipG,gBAAgBnxD,YAAYjN,GAEjC7qC,KAAKgqG,aAAen/D,EAEpB7qC,KAAKsqG,gBAAgBtqG,KAAKupG,0BAQrB1+D,GAGTv9B,EAAOo8F,oBAAsB,WAC3B,IAKItgE,EALAqV,EAASz+C,KAET8kC,EAAS9kC,KAAKqpG,QAAQ/rF,YAEtBlX,EAASpG,KAAKuY,QAA4B,mBAE1CgyF,EAASvqG,KAAKwqG,aAAa1lE,EAAQ,CACrC,OAAU1+B,EACV,OAAU,OACVqkG,OAAQ,WAEN,IAAIrkG,EAASyB,IADbuhC,EAASqV,EAAO4qD,QAAQr7F,QACewkC,qBAAsB,IAC7DpJ,EAAOkO,UAAUlxC,GAAQwxC,MAAM6G,EAAOwqD,kBAExCyB,OAAQ,SAAgB7uG,EAAG8wB,GACzB,IAAItX,EAASsX,EAAmB,YAChCyc,EAAOzqB,UAAUtJ,IAEnBs1F,KAAM,WACJlsD,EAAOmtC,QAAQ,iBAAkB56D,GAAWC,eAAemY,EAAOsO,mBAElEtO,EAAO9b,SAEPmxB,EAAOolB,cAIX7jE,KAAKsqG,iBAAgB,WACnB,IAAIxlE,EAAS2Z,EAAO4qD,QAAQ/rF,YAE5BitF,EAAOzwD,eAAehV,OAI1Bx3B,EAAOs9F,sBAAwB,SAA+B1jD,EAAY7P,GACxE,IAAIjxC,EAASixC,EAAa,OAQ1B,OAPa,IAAIqlB,GAAOxV,EAAY,CAClC,WAAa,EACb,YAAc,EACd,WAAc7P,EAAW,KACzB,OAAUA,EAAa,OACvB,OAAUjxC,KAKdkH,EAAOk9F,aAAe,SAAsBtjD,EAAY7P,GACjDA,IACHA,EAAO,IAGT,IAAIx5C,EAAMmC,KAAKo9B,SAEXmtE,EAASvqG,KAAK4qG,sBAAsB1jD,EAAY7P,GAEhDt3C,EAAKC,KAET,SAAS6qG,EAAkBl+E,GAOzB,OANI0qB,EAAKozD,SACPzqG,KAAKwsE,UAAU1gD,KAAK,mBAEpBurB,EAAKozD,OAAOnyG,KAAKyH,EAAI4sB,EAAiB,UAAGA,KAGpC,EAGT,SAASm+E,EAAiBn+E,GACxB5sB,EAAGgrG,eAEH,IAAItjD,EAAY5pD,EAAI4tD,gBAAgB8+C,EAAOxvC,sBAQ3C,OANI1jB,EAAKqzD,SACP1qG,KAAKwsE,UAAU1gD,KAAK,kBAEpBurB,EAAKqzD,OAAOpyG,KAAKyH,EAAI0nD,EAAW96B,KAG3B,EAGT,SAASq+E,EAAgB50F,GAOvB,OANIihC,EAAKszD,OACP3qG,KAAKwsE,UAAU1gD,KAAK,iBAEpBurB,EAAKszD,KAAKryG,KAAKyH,EAAIqW,KAGd,EAuBT,OAXAm0F,EAAOvyF,GAAG,YAAa6yF,EAAmB7qG,MAC1CuqG,EAAOvyF,GAAG,WAAY8yF,EAAkB9qG,MACxCuqG,EAAOvyF,GAAG,UAAWgzF,EAAiBhrG,MACtCuqG,EAAOvyF,GAAG,eAZV,SAASizF,IACPV,EAAO18E,OAAO,aAAa,GAC3B08E,EAAOtyF,IAAI,YAAa4yF,EAAmB9qG,GAC3CwqG,EAAOtyF,IAAI,WAAY6yF,EAAkB/qG,GACzCwqG,EAAOtyF,IAAI,UAAW+yF,EAAiBjrG,GACvCwqG,EAAOtyF,IAAI,cAAegzF,EAAgBlrG,UACnCwqG,EAAO,iCAMyBvqG,MAErCq3C,EAAK6zD,YACPX,EAAO,+BAAiClzD,EAAK6zD,WAG/ClrG,KAAKipG,gBAAgBnxD,YAAYyyD,GAE1BA,GAGTj9F,EAAO69F,qBAAuB,SAA8BC,EAAWC,EAAcC,GACnF,IAAI/+C,EAASvsD,KAETurG,EAAU,CAAC,YAAa,WAAY,YAAa,WAAY,WAAY,YAAa,WAAY,aAClGC,EAAO,CAAC,KAAM,IAAK,KAAM,IAAK,IAAK,KAAM,IAAK,MAC9C1pG,EAAW9B,KAAKwsE,UAMf4+B,IACHA,EAAY,IAGd,IAAIrrG,EAAKC,KACLyrG,EAAgB,GAChBC,EAAgB,GAChB7tG,EAAMmC,KAAKo9B,SACXuuE,EAAe3rG,KAAKuY,QAA4B,mBAEhDqzF,EAAkB,WA8CpB,IA7CA,IAfwB72E,EAepB82E,EAAO/pG,EAAS0zC,cAAchU,cAC9BsqE,EAfG,CAAC,IAAI58F,IADY6lB,EAgBO82E,GAfH,KAAG92E,EAAU,MAAI,IAAI7lB,IAAO6lB,EAAU,KAAIA,EAAU,MAAK,EAAGA,EAAU,MAAI,IAAI7lB,GAAM6lB,EAAU,KAAGA,EAAU,MAAI,IAAI7lB,GAAM6lB,EAAU,MAAIA,EAAU,KAAIA,EAAU,MAAK,GAAI,IAAI7lB,GAAM6lB,EAAU,MAAIA,EAAU,KAAIA,EAAU,MAAK,GAAI,IAAI7lB,GAAM6lB,EAAU,KAAGA,EAAU,MAAI,IAAI7lB,IAAO6lB,EAAU,KAAIA,EAAU,MAAK,EAAGA,EAAU,MAAI,IAAI7lB,GAAM6lB,EAAU,KAAGA,EAAU,OAiBxXg3E,EAAQ,SAAeh1G,GACzB,GAAIuE,MAAMC,QAAQ6vG,IACFA,EAAUY,MAAK,SAAUC,GACrC,OAAOA,IAAQl1G,KAIf,MAAO,WAIX,IAQsBoqF,EARlBn4C,EAAS8iE,EAAQ/0G,GACjBmwD,EAAarpD,EAAIwpD,kBAAkBre,GAEvC,GAAIyiE,EAAcx0G,OAAS60G,EAAQ70G,OAASm0G,EAAUn0G,OAAQ,CAC5D,IAAIszG,EAASh+C,EAAOi+C,aAAatjD,EAAY,CAC3C,OAAUykD,EACV,OAAUJ,EAAQx0G,GAClB,KAAQy0G,EAAKz0G,GACb2zG,QAAkBvpB,EAMhBpqF,EALO,SAAUm1G,GACfnsG,EAAGosG,WAAY,EACfd,EAAaa,EAAiB/qB,GAC9Br/E,EAASgqB,KAAK,cAGlB6+E,KAAM,WACJ5qG,EAAGosG,WAAY,EACfb,IAEA/+C,EAAOsX,cAIX0mC,EAAO/yD,MAAMzgD,GACb20G,EAAc30G,GAAK00G,EAAcx0G,OACjCw0G,EAAc3wG,KAAKyvG,QAEnBkB,EAAcC,EAAc30G,IAAI+iD,eAAeoN,IAI1CnwD,EAAI,EAAGA,EAAI+0G,EAAQ70G,OAAQF,IACvBg1G,EAAMh1G,IAUrB,OAJA60G,IAEA5rG,KAAKsqG,gBAAgBsB,GAEdH,GAGTn+F,EAAOq8F,mBAAqB,WAC1B,IAAIyC,EAASpsG,KAETqsG,EAAiBrsG,KAAKwsE,UACtBpjC,EAASppC,KAAKqpG,QACdxrG,EAAMmC,KAAKo9B,SAEf,GAAKgM,EAAOwzB,WAAZ,CAQK58D,KAAK+pG,UACR/pG,KAAKssG,eAAeC,KAGtB,IAAInmG,EAASgjC,EAAOoJ,qBAEhBlL,EAAO,IAAIp4B,GAAM,EAAG,GAEpB5X,EAAS8O,EAAiB,YAC5BkhC,EAAKtrC,EAAIoK,EAAiB,UAGxB9O,EAAS8O,EAAiB,YAC5BkhC,EAAKl6B,EAAIhH,EAAiB,UAG5B,IAAIglG,EAAY,KAEZljE,GAAuB9qC,KAAKgJ,GACD,QAAzBA,EAAmB,YAAwC,QAAzBA,EAAmB,YAAwC,QAAzBA,EAAmB,aACzFglG,EAAY,CAAC,EAAG,EAAG,KAEZpgE,GAAsB5tC,KAAKgJ,IAAWinC,GAA2BjwC,KAAKgJ,MAC/EglG,EAAY,CAAC,EAAG,EAAG,IAGrB,IACIoB,EADAC,EAAkB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAG5C,GAAIzsG,KAAKuY,QAAwB,eAAG,CAClC,IAAIrI,EAAOk5B,EAAOxU,UAClB43E,EAAct8F,EAAK7J,MAAQ6J,EAAK5J,OAGlC,IAAImlG,EAAgBzrG,KAAKmrG,qBAAqB,MAAM,SAAUe,EAAiBn1G,GAC7E,GAAIq0G,GAAaA,EAAUnwG,QAAQlE,IAAM,EAAG,CAC1C,IAAI21G,EAAiB7uG,EAAI6pD,sBAAsBwkD,EAAgB39F,IAAI+4B,IAC/DpW,EAAckY,EAAOsO,iBACzBg1D,EAAe1wG,EAAIk1B,EAAYl1B,EAC/BotC,EAAO0Q,eAAe4yD,GAEtBN,EAAOO,wBAAuB,GAE9B,IAAIC,EAAenB,EAAcA,EAAcx0G,OAAS,EAAIF,GAE5Dm1G,EADsBruG,EAAIypD,iBAAiBslD,EAAal1D,kBAI1D,IAAIm1D,EAAahvG,EAAIsvD,kBAAkB/jB,EAAOozB,qBAAqBtuD,IAAIo5B,GACnElhC,EAASgjC,EAAOoJ,qBAEhBs6D,EAAKZ,EAAgB39F,IAAIs+F,GAEzBzB,GAAac,EAAgB9+F,EAAIy/F,EAAWz/F,IAC9C0/F,EAAG1/F,EAAI,GAGT,IAAIvU,EAAIuyG,EAAY,EAAI,EACpB/kG,EAAyB,EAAjB7N,KAAK+D,IAAIuwG,EAAG9wG,GACpBsK,EAAS9N,KAAK+D,IAAIuwG,EAAG1/F,GAAKvU,EAE1B2zG,IAEFlmG,GADAD,EAAQ7N,KAAKsE,IAAIuJ,EAAOC,EAASkmG,IAChBA,GAGnB,IAAIO,EAAUN,EAAgB11G,GAExBqyC,aAAkBu7B,KAYlB6nC,GAA2B,IAAZO,GAA6B,IAAZA,KAClC3jE,EAAOm3B,SAASl6D,GAChBgmG,EAAe9rC,SAASl6D,KAGtBmmG,GAA2B,IAAZO,GAA6B,IAAZA,KAClC3jE,EAAOo3B,UAAUl6D,GACjB+lG,EAAe7rC,UAAUl6D,OAlBvBkmG,GAA2B,IAAZO,GAA6B,IAAZA,KAClC3mG,EAAoB,YAAIC,IAGtBmmG,GAA2B,IAAZO,GAA6B,IAAZA,KAClC3mG,EAAqB,aAAIE,GAG3B8iC,EAAOkO,UAAUlxC,GACjBimG,EAAe/0D,UAAUlxC,OAY1B,WACDgmG,EAAOxgB,QAAQ2gB,QAoBjBvsG,KAAKwpG,aAAa,CAAC3rG,EAAK,UAJxB,WACEmC,KAAK6jE,mBAnHDhnD,SACFA,QAAQC,KAAK,yCAA2CssB,EAAO2F,aAoGnE,SAASw9D,IACP,IAAIS,EAAU,CAAC,CAAC,iBAAkB5jE,EAAOsO,iBAAiB3oC,YAS1D,OAPIq6B,aAAkBu7B,IACpBqoC,EAAQlyG,KAAK,CAAC,WAAYsuC,EAAOhsB,aACjC4vF,EAAQlyG,KAAK,CAAC,YAAasuC,EAAO/rB,eAElC2vF,EAAQlyG,KAAK,CAAC,YAAasuC,EAAO2F,cAG7Bi+D,IAUX1/F,EAAOs8F,mBAAqB,WAC1B,IAAIqD,EAASjtG,KAET0/D,EAAS1/D,KAAKwsE,UACdpjC,EAASppC,KAAKqpG,QACdxrG,EAAMmC,KAAKo9B,SAEVp9B,KAAK+pG,UACR/pG,KAAKssG,eAAe,CAAC,CAAC,iBAAkBljE,EAAOsO,iBAAiB3oC,WAAY,CAAC,YAAaq6B,EAAOu2B,eAGnG3/D,KAAKmrG,qBAAqB,MAAM,SAAUe,GACxC,IAAIpnE,EAAS46B,EAAOpiD,YAChB0qE,EAAkBnqF,EAAI6pD,sBAAsBwkD,GAC5CgB,EAAQ,IAAInwC,GAAW,CAAC,CAACj4B,EAAO9oC,EAAG8oC,EAAO13B,GAAI,CAAC46E,EAAgBhsF,EAAG8oC,EAAO13B,KACzE+/F,EAAQ,IAAIpwC,GAAW,CAAC,CAACj4B,EAAO9oC,EAAG8oC,EAAO13B,GAAI,CAAC03B,EAAO9oC,EAAGgsF,EAAgB56E,KACzEvU,EAAIL,KAAKsE,IAAIe,EAAIg4E,sBAAsBq3B,GAAQrvG,EAAIg4E,sBAAsBs3B,IAC7E/jE,EAAOw2B,UAAU/mE,GACjB6mE,EAAOE,UAAU/mE,MAChB,WACDo0G,EAAOrhB,QAAQ,YAAaxiD,EAAOu2B,iBAIvCryD,EAAOu8F,0BAA4B,WACjC,IAAIuD,EAASptG,KAETysG,EAAkB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACxCJ,EAAiBrsG,KAAKwsE,UACtBpjC,EAASppC,KAAKqpG,QAEbrpG,KAAK+pG,UACR/pG,KAAKssG,eAAeC,KAGtB,IAEIC,EAFA3uG,EAAMmC,KAAKo9B,SACXiwE,EAASrtG,KAAKwsE,qBAAqB5L,GAGnC5gE,KAAKuY,QAAwB,iBAC/Bi0F,EAAcH,EAAejvF,WAAaivF,EAAehvF,aAG3D,IAAIouF,EAAgBzrG,KAAKmrG,qBAAqB,MAAM,SAAUmC,EAAgBv2G,GAC5E,IACIw2G,EAAUpmG,EAAGC,EADbvO,EAAIw0G,EAAS,EAAI,EAEjBG,EAAcF,EACdP,EAAUN,EAAgB11G,GAE9B,GAAIs2G,EAAQ,CACV,IAAII,EAAShC,EAAc,EAAI10G,GAC3B22G,EAAkB7vG,EAAIypD,iBAAiBmmD,EAAO/1D,kBAE9Ci2D,GADJJ,EAAWC,EAAYj/F,IAAIm/F,IACLnxG,MACtB4K,EAAItJ,EAAImuD,gBAAgB2hD,EAAO3xG,EAAG,GAClCoL,EAAIvJ,EAAImuD,gBAAgB,EAAG2hD,EAAOvgG,GAClC,IAAI8C,EAAOm8F,EAAez3E,UACtBg5E,EAAwBnC,EAAc,GAAG/zD,iBACzCswC,EAAkBnqF,EAAI6pD,sBAAsB4lD,GAC5CO,EAAmBJ,EAAO/1D,iBAC1Bw1D,EAAQ,IAAInwC,GAAW,CAAC,CAAC8wC,EAAiB7xG,EAAG6xG,EAAiBzgG,GAAI,CAAC46E,EAAgBhsF,EAAG6xG,EAAiBzgG,KACvG+/F,EAAQ,IAAIpwC,GAAW,CAAC,CAAC8wC,EAAiB7xG,EAAG6xG,EAAiBzgG,GAAI,CAACygG,EAAiB7xG,EAAGgsF,EAAgB56E,KAC3GjG,EAAItJ,EAAIg4E,sBAAsBq3B,GAC9B9lG,EAAIvJ,EAAIg4E,sBAAsBs3B,GAEd,IAAZJ,GACEP,IACFmB,EAAOvgG,EAAIugG,EAAO3xG,EAAIwwG,EACtBt8F,EAAK5J,OAAS9N,KAAK+D,IAAIoxG,EAAOvgG,GAC9BhG,EAAID,EAAIqlG,GAGVgB,EAAYpgG,EAAIsgG,EAAgBtgG,EAAI8C,EAAK5J,OAAS,EAClD0hF,EAAgB56E,EAAIwgG,EAAsBxgG,EAGxC46E,EAAgBhsF,EADR,IAANjF,EACkByB,KAAKqE,IAAImrF,EAAgBhsF,EAAG4xG,EAAsB5xG,GAElDxD,KAAKqE,IAAImrF,EAAgBhsF,EAAG6xG,EAAiB7xG,IAE9C,IAAZ+wG,GACLP,IACFmB,EAAO3xG,EAAI2xG,EAAOvgG,EAAIo/F,EACtBt8F,EAAK7J,MAAQ7N,KAAK+D,IAAIoxG,EAAO3xG,GAC7BmL,EAAIC,EAAIolG,GAGVgB,EAAYxxG,EAAI0xG,EAAgB1xG,EAAIkU,EAAK7J,MAAQ,EACjD2hF,EAAgBhsF,EAAI4xG,EAAsB5xG,EAC1CgsF,EAAgB56E,EAAI5U,KAAKsE,IAAIkrF,EAAgB56E,EAAGygG,EAAiBzgG,KAE7Do/F,IACErlG,EAAIC,EAAIolG,GACVplG,EAAID,EAAIqlG,EACRgB,EAAYpgG,EAAIsgG,EAAgBtgG,EAAIugG,EAAO3xG,EAAID,EAAKwxG,EAASngG,GAAKo/F,IAElErlG,EAAIC,EAAIolG,EACRgB,EAAYxxG,EAAI0xG,EAAgB1xG,EAAI2xG,EAAOvgG,EAAIrR,EAAKwxG,EAASvxG,GAAKwwG,IAItExkB,EAAgBhsF,EAAIxD,KAAKqE,IAAImrF,EAAgBhsF,EAAG6xG,EAAiB7xG,GACjEgsF,EAAgB56E,EAAI5U,KAAKsE,IAAIkrF,EAAgB56E,EAAGygG,EAAiBzgG,IAGnEg8B,EAAO0Q,eAAekuC,GAEtBolB,EAAOT,wBAAuB,OACzB,CACL,IAAI7nE,EAASunE,EAAe/uF,YAExBwwF,EAAmBjwG,EAAI6pD,sBAAsB8lD,GAE7CO,EAAS,IAAIhxC,GAAW,CAAC,CAACj4B,EAAO9oC,EAAG8oC,EAAO13B,GAAI,CAAC0gG,EAAiB9xG,EAAG8oC,EAAO13B,KAE3E4gG,EAAS,IAAIjxC,GAAW,CAAC,CAACj4B,EAAO9oC,EAAG8oC,EAAO13B,GAAI,CAAC03B,EAAO9oC,EAAG8xG,EAAiB1gG,KAE/EjG,EAAItJ,EAAIg4E,sBAAsBk4B,GAC9B3mG,EAAIvJ,EAAIg4E,sBAAsBm4B,GAE1BxB,IAEFplG,GADAD,EAAI3O,KAAKsE,IAAIqK,EAAGC,EAAIolG,IACZA,IAIRA,GAA2B,IAAZO,GAA6B,IAAZA,KAClC3jE,EAAOm3B,SAASp5D,EAAItO,GACpBwzG,EAAe9rC,SAASp5D,EAAItO,KAG1B2zG,GAA2B,IAAZO,GAA6B,IAAZA,KAClC3jE,EAAOo3B,UAAUp5D,EAAIvO,GACrBwzG,EAAe7rC,UAAUp5D,EAAIvO,OAE9B,WACDu0G,EAAOxhB,QAAQ2gB,QAGjB,SAASA,IACP,MAAO,CAAC,CAAC,iBAAkBnjE,EAAOsO,iBAAiB3oC,WAAY,CAAC,WAAYq6B,EAAOhsB,YAAa,CAAC,YAAagsB,EAAO/rB,gBAIzH/P,EAAOw8F,oBAAsB,WAC3B,IAAIjsG,EAAMmC,KAAKo9B,SACXgM,EAASppC,KAAKqpG,QACdtpG,EAAKC,KACLqzB,EAAax1B,EAAIg5C,gBAEhB72C,KAAK+pG,UACR/pG,KAAKssG,eAAe,iBAAkBt7E,GAAWC,eAAemY,EAAOsO,mBAGzE,IAAIu2D,EAAe7kE,aAAkBsvB,GAAU,EAAI,EAE/Cw1C,EAAwB,gCACxBC,EAAgB,CAClBC,EAAG,IAEDC,EAAmB,CACrBD,EAAG,IAGL,SAASE,EAAqBC,GAK5B,QAJkB,IAAdA,IACFA,EAAY,GAGVnlE,aAAkBsvB,GAAS,CAC7B,IAAIxnC,EAAckY,EAAOsO,iBAAiB62D,IAAc,GACxD,OAAOr9E,EAAY53B,MAAM,EAAG43B,EAAYj6B,OAAS,GAEjD,OAAOmyC,EAAOsO,iBAIlB,SAAS82D,EAAwBD,GAK/B,YAJkB,IAAdA,IACFA,EAAY,GAGI,IAAdA,EACKnlE,EAAO2xB,qBAGT3xB,EAAOmyB,eAAegzC,EAAY,GAG3C,SAASE,IACP,IAAK,IAAIF,KAAaJ,EAAe,CACnC,IAAK,IAAIp3G,EAAIo3G,EAAcI,GAAWt3G,OAAS,EAAGF,GAAK,EAAGA,IACxDo3G,EAAcI,GAAWx3G,GAAGm3G,GAAyBn3G,EAGvD,IAAK,IAAI8N,EAAKwpG,EAAiBE,GAAWt3G,OAAS,EAAG4N,GAAM,EAAGA,IAC7DwpG,EAAiBE,GAAW1pG,GAAIqpG,GAAyBrpG,EAI7D9E,EAAG4sG,yBAGL,SAAS+B,EAAa/hF,GACpB,IAyBIgiF,EAzBApE,EAAS59E,EAAc,OACvBylB,EAAQm4D,EAAO2D,GACfK,EAAYj3G,EAASizG,EAAOqE,YAAcrE,EAAOqE,WAAa,EAC9DC,EAAiBL,EAAwBD,GAEzCM,EAAe53G,QAAUg3G,IAI7BY,EAAe3zG,OAAOk3C,EAAO,GAEzBm8D,EAAY,EACdnlE,EAAO6yB,UAAUsyC,EAAY,GAAKM,EAElCzlE,EAAO0wB,mBAAmB+0C,GAG5BzlE,EAAO6xB,eAEPkzC,EAAcI,GAAWrzG,OAAOk3C,EAAO,GAAG,GAAG9kB,SAEzC8kB,EAAQi8D,EAAiBE,GAAWt3G,QACtCo3G,EAAiBE,GAAWrzG,OAAOk3C,EAAO,GAAG,GAAG9kB,SAMhDqhF,EADY,IAAVv8D,EACUi8D,EAAiBE,GAAWt3G,OAAS,EAErCm7C,EAAQ,EAGtBi8D,EAAiBE,GAAWrzG,OAAOyzG,EAAW,GAAG,GAAGrhF,SACpD+gF,EAAiBE,GAAWrzG,OAAOyzG,EAAW,EAAGG,EAAsBx2G,KAAKyH,EAAI4uG,EAAWJ,IAC3FE,IAEA1uG,EAAG8jE,YAGL,SAASkrC,EAAiB7C,EAAiB95D,EAAOm8D,QAC9B,IAAdA,IACFA,EAAY,GAGd,IAcII,EAdAK,EAAUR,EAAwBD,GAElCU,EAAUpxG,EAAI6tD,gBAAgBwgD,GAE9BgD,EAAUF,EAAQ58D,GACtB88D,EAAQlzG,EAAIizG,EAAQjzG,EACpBkzG,EAAQ9hG,EAAI6hG,EAAQ7hG,EAEpBg8B,EAAO6xB,eAEP7xB,EAAOuT,iBAEP58C,EAAG4sG,wBAAuB,GAKxBgC,EADY,IAAVv8D,EACUi8D,EAAiBE,GAAWt3G,OAAS,EAErCm7C,EAAQ,EAGlBi8D,EAAiBE,GAAWn8D,IAC9Bi8D,EAAiBE,GAAWn8D,GArHA,iCAwH1Bi8D,EAAiBE,GAAWI,IAC9BN,EAAiBE,GAAWI,GAzHA,iCA6HhC,SAASQ,EAAmB/8D,EAAOm8D,QACf,IAAdA,IACFA,EAAY,GAGd,IAAIzuC,EAASwuC,EAAqBC,GAAWn8D,GACzCm4D,EAASxqG,EAAGyqG,aAAa1qC,EAAQ,CACnC,OAAU//D,EAAGwY,QAA4B,mBACzC,OAAU,UACV,KAAQ,KACRmyF,OAAQ,SAAgBwB,GACtB6C,EAAiB7C,EAAiB3B,EAAO2D,GAAwBK,IAEnErD,UAAW,WACTprC,EAASwuC,EAAqBC,GAAWhE,EAAO2D,IAChD3D,EAAOzwD,eAAegmB,IAExB6qC,KAAM,WACJ5qG,EAAG8jE,WAEH9jE,EAAG4sG,0BAELlC,OAAQ,SAAgB99E,EAAO5Y,IACzBA,IAAKA,EAAE+5C,UAAY/5C,EAAE+5C,SAAS39B,UAQtC,OAHAo6E,EAAO2D,GAAyB97D,EAChCm4D,EAAOqE,WAAaL,EACpBhE,EAAOvyF,GAAGjY,EAAGwY,QAAwB,eAAGm2F,GACjCnE,EAGT,SAASuE,EAAsB18D,EAAOm8D,QAClB,IAAdA,IACFA,EAAY,GAGd,IACIa,EADAC,EAAoBf,EAAqBC,GAI3Ca,EADEh9D,EAAQ,GAAKi9D,EAAkBp4G,OACpBo4G,EAAkB,GAElBA,EAAkBj9D,EAAQ,GAGzC,IAAI0tB,EAASuvC,EAAkBj9D,GAAOlkC,IAAIkhG,GAAY3gG,MAAM,IACxD87F,EAASxqG,EAAGyqG,aAAa1qC,EAAQ,CACnC,OAAU//D,EAAGwY,QAA+B,sBAC5C,OAAU,UACV,KAAQ,KACRkyF,OAAQ,SAAgB99E,EAAO5Y,GAC7B,IAAIA,IAAKA,EAAE+5C,UAAkC,IAAtB/5C,EAAE+5C,SAAS39B,OAAlC,CAIA,IAAI0+E,EAAiBL,EAAwBD,GACzCe,EAAc/E,EAAO2D,GACrBgB,EAAU77E,EAAWsB,QAAQ41E,EAAO7yD,kBACxCm3D,EAAe3zG,OAAOo0G,EAAc,EAAG,EAAGJ,GAEtCX,EAAY,EACdnlE,EAAO6yB,UAAUsyC,EAAY,GAAKM,EAElCzlE,EAAO0wB,mBAAmB+0C,GAG5BzlE,EAAO6xB,eAEP,IAAI70D,EAASmkG,EAAOx7D,mBACb3oC,EAAgB,QACvBmkG,EAAOjzD,UAAUlxC,GACjBioG,EAAiBE,GAAWrzG,OAAOo0G,EAAa,EAAGR,EAAsBx2G,KAAKyH,EAAIuvG,EAAaf,GAAYO,EAAsBx2G,KAAKyH,EAAIuvG,EAAc,EAAGf,MAE7J7D,OAAQ,SAAgBwB,GACtB6C,EAAiB7C,EAAiB3B,EAAO2D,GAAyB,EAAGK,IAEvE5D,KAAM,SAAc52F,GAClB,IAAIA,IAAKA,EAAE+5C,UAAkC,IAAtB/5C,EAAE+5C,SAAS39B,OAAlC,CAIA,IAAIm/E,EAAc/E,EAAO2D,GACzBnzG,EAAgBwvG,EAAQ8D,EAAiBE,IACzChE,EAAOj9E,SACP6gF,EAAcI,GAAWrzG,OAAOo0G,EAAc,EAAG,EAAGH,EAAmB72G,KAAKyH,EAAIuvG,EAAc,EAAGf,IACjGE,IAEA1uG,EAAG4sG,yBAEH5sG,EAAG8jE,aAELqnC,UAAW,WACTmE,EAAoBf,EAAqBC,GACzC,IACII,EADAW,EAAc/E,EAAO2D,GAIvBS,EADEW,IAAgBD,EAAkBp4G,OAAS,EACjC,EAEAq4G,EAAc,EAG5B,IAAIC,EAAgBF,EAAkBC,GAAaphG,IAAImhG,EAAkBV,IAAYlgG,MAAM,IAC3F87F,EAAOzwD,eAAey1D,MAI1B,OADAhF,EAAO2D,GAAyB97D,EACzBm4D,EAGT,GAAInhE,aAAkBsvB,GAGpB,IAFA,IAAI0C,EAAQhyB,EAAOyI,WAAW56C,OAAS,EAE9Bs3G,EAAY,EAAGA,EAAYnzC,EAAOmzC,IAAa,CACtDJ,EAAcI,GAAa,GAC3BF,EAAiBE,GAAa,GAG9B,IAFA,IAAIc,EAAoBf,EAAqBC,GAEpCx3G,EAAI,EAAG4E,EAAM0zG,EAAkBp4G,OAAQF,EAAI4E,EAAK5E,IACvDo3G,EAAcI,GAAWzzG,KAAKq0G,EAAmB72G,KAAK0H,KAAMjJ,EAAGw3G,IAE3Dx3G,EAAI4E,EAAM,GACZ0yG,EAAiBE,GAAWzzG,KAAKg0G,EAAsBx2G,KAAK0H,KAAMjJ,EAAGw3G,IAIzEF,EAAiBE,GAAWzzG,KAAKg0G,EAAsBx2G,KAAK0H,KAAMqvG,EAAkBp4G,OAAS,EAAGs3G,SAOlG,IAJA,IAISl9C,EAAM,EAAGhjC,EAFOigF,EAFR,GAI2Br3G,OAAQo6D,EAAMhjC,EAAMgjC,IAC9D88C,EALe,GAKWrzG,KAAKq0G,EAAmB72G,KAAK0H,KAAMqxD,EAL9C,IAOXA,EAAMhjC,EAAO,GACfggF,EARa,GAQgBvzG,KAAKg0G,EAAsBx2G,KAAK0H,KAAMqxD,EARtD,IAanBrxD,KAAKsqG,iBAAgB,WACnB,IAAK,IAAIkF,KAAenB,EACtB,IAAK,IAAIoB,EAAMpB,EAAiBmB,GAAav4G,OAAS,EAAGw4G,GAAO,EAAGA,IACjEpB,EAAiBmB,GAAaC,GAjRJ,+BAiRoCD,GAIlE,IAAK,IAAIE,KAAevB,EACtB,IAAK,IAAIwB,EAAMxB,EAAcuB,GAAaz4G,OAAS,EAAG04G,GAAO,EAAGA,IAC9DxB,EAAcuB,GAAaC,GAvRD,+BAuRiCD,OAMnEpiG,EAAOu2D,SAAW,WAChB,GAAI7jE,KAAKiqG,cACP,IAAK,IAAIlzG,EAAIiJ,KAAKiqG,cAAchzG,OAAS,EAAGF,GAAK,EAAGA,IAClDiJ,KAAKiqG,cAAclzG,GAAGuB,KAAK0H,OAKjCsN,EAAOy9F,aAAe,WAChB/qG,KAAKwsE,YACPxsE,KAAKwsE,UAAU/vB,YAEfz8C,KAAKwsE,UAAU9vB,oBAInBpvC,EAAOk8F,aAAe,SAAsB/9E,GACrCzrB,KAAK4vG,kBACR5vG,KAAK4vG,gBAAkB,IAGzB5vG,KAAK4vG,gBAAgB90G,KAAK2wB,GAE1BA,EAAS,GAAGzT,GAAGyT,EAAS,GAAIA,EAAS,GAAIzrB,OAG3CsN,EAAOgf,mBAAqB,WAC1B,GAAItsB,KAAK4vG,iBAAmB5vG,KAAK4vG,gBAAgB34G,OAAS,EAAG,CAC3D,IAAK,IAAIF,EAAIiJ,KAAK4vG,gBAAgB34G,OAAS,EAAGF,GAAK,EAAGA,IAAK,CACzD,IAAI00B,EAAWzrB,KAAK4vG,gBAAgB74G,GACpC00B,EAAS,GAAGxT,IAAIwT,EAAS,GAAIA,EAAS,GAAIzrB,MAG5CA,KAAK4vG,gBAAkB,KAI3BtiG,EAAOg9F,gBAAkB,SAAyB3wG,GAC3CA,IAIAqG,KAAKiqG,gBACRjqG,KAAKiqG,cAAgB,IAGvBjqG,KAAKiqG,cAAcnvG,KAAKnB,KAG1B2T,EAAOs+E,QAAU,SAAiBikB,GAChC,IAAK,IAAI9mB,EAAQ/xF,UAAUC,OAAQkR,EAAO,IAAI7M,MAAMytF,EAAQ,EAAIA,EAAQ,EAAI,GAAIz6D,EAAO,EAAGA,EAAOy6D,EAAOz6D,IACtGnmB,EAAKmmB,EAAO,GAAKt3B,UAAUs3B,GAG7BtuB,KAAK8vG,YAAY,CAACD,EAAQ1nG,IAE1BnI,KAAKssG,eAAenpG,MAAMnD,KAAM,CAAC6vG,GAAQv5G,OAAO6R,KAGlDmF,EAAOq/F,uBAAyB,SAAgCoD,GAC9D,GAAK/vG,KAAKqpG,QAAV,CAIA,IAAInzE,EAASl2B,KAAKqpG,QAAQ3xD,iBAEtBkZ,EAAM5wD,KAAKwsE,UACXwjC,EAAWhwG,KAAKmsG,UACpBnsG,KAAKmsG,WAAY,EACjBv7C,EAAI9W,eAAe5jB,GAEd65E,GACH/vG,KAAKssG,eAAe,iBAAkBt7E,GAAWC,eAAe2/B,EAAIlZ,mBAGtE13C,KAAKmsG,UAAY6D,IAGnB1iG,EAAOg/F,eAAiB,SAAwBuD,GACzC7vG,KAAK+pG,WACR/pG,KAAK+pG,SAAW,GAChB/pG,KAAKutE,gBAAkB,GAGzB,IAAK,IAAI0iC,EAAQj5G,UAAUC,OAAQkR,EAAO,IAAI7M,MAAM20G,EAAQ,EAAIA,EAAQ,EAAI,GAAIC,EAAQ,EAAGA,EAAQD,EAAOC,IACxG/nG,EAAK+nG,EAAQ,GAAKl5G,UAAUk5G,GAG9B,GAAIlwG,KAAK+pG,SAAS9yG,OAAQ,CACxB,IAAIk5G,EAAgBnwG,KAAK+pG,SAAS/pG,KAAK+pG,SAAS9yG,OAAS,GAEzD,GAAIk5G,EAAc,KAAON,GAAUp1G,KAAKyG,UAAUivG,EAAc,MAAQ11G,KAAKyG,UAAUiH,GACrF,OAIAnI,KAAKutE,gBAAkBvtE,KAAK+pG,SAAS9yG,OAAS,GAChD+I,KAAK+pG,SAAS7uG,OAAO8E,KAAKutE,gBAAkB,GAG9CvtE,KAAK+pG,SAASjvG,KAAK,CAAC+0G,EAAQ1nG,IAE5BnI,KAAKutE,gBAAkBvtE,KAAK+pG,SAAS9yG,OAAS,EAE9C+I,KAAKwsE,UAAU1gD,KAAK,eAGtBxe,EAAOiqD,OAAS,WACd,IAAKv3D,KAAK+pG,UAAqC,IAAzB/pG,KAAKutE,gBACzB,OAAOvtE,KAGTA,KAAKutE,gBAAkB,EACvB,IAAI6iC,EAASpwG,KAAK+pG,SAAS,GAI3B,OAFA/pG,KAAKoqG,aAAagG,GAEXpwG,MAGTsN,EAAO6/D,KAAO,WACZ,IAAKntE,KAAK+pG,UAAqC,IAAzB/pG,KAAKutE,gBACzB,OAAOvtE,KAGT,IAAIowG,EAASpwG,KAAK+pG,WAAW/pG,KAAKutE,iBAIlC,OAFAvtE,KAAKoqG,aAAagG,GAEXpwG,MAGTsN,EAAOogE,KAAO,WACZ,IAAK1tE,KAAK+pG,UAAY/pG,KAAKutE,kBAAoBvtE,KAAK+pG,SAAS9yG,OAAS,EACpE,OAAO+I,KAGT,IAAIowG,EAASpwG,KAAK+pG,WAAW/pG,KAAKutE,iBAIlC,OAFAvtE,KAAKoqG,aAAagG,GAEXpwG,MAGTsN,EAAO88F,aAAe,SAAsBgG,GAC1C,IAAIpwG,KAAKmsG,UAAT,CAIAnsG,KAAK8vG,YAAYM,GAEjB,IAAIC,EAAUrwG,KAAK+pG,SACf1/F,EAAUrK,KAAKutE,gBACnBvtE,KAAK8F,OACL9F,KAAK+pG,SAAWsG,EAChBrwG,KAAKutE,gBAAkBljE,EACvBrK,KAAKkmB,UAGP5Y,EAAOwiG,YAAc,SAAqBM,GACxC,IAAIE,EAAStwG,KAEb,GAAK1E,MAAMC,QAAQ60G,GAAnB,CAIA,IAAIJ,EAAWhwG,KAAKmsG,UACpBnsG,KAAKmsG,WAAY,EACjB,IAAIv7C,EAAM5wD,KAAKwsE,UAEXlxE,MAAMC,QAAQ60G,EAAO,IACvBA,EAAO,GAAG3yF,SAAQ,SAAU0L,GAC1B,IAAI4Q,EAAI5Q,EAAE,GACNhhB,EAAOghB,EAAE7vB,MAAM,GAEnBg3G,EAAOjH,QAAQtvE,GAAG52B,MAAMmtG,EAAOjH,QAASlhG,GAExCyoD,EAAI72B,GAAG52B,MAAMytD,EAAKzoD,OAGpBnI,KAAKqpG,QAAQ+G,EAAO,IAAIjtG,MAAMnD,KAAKqpG,QAAS+G,EAAO,IAEnDx/C,EAAIw/C,EAAO,IAAIjtG,MAAMytD,EAAKw/C,EAAO,KAGnCpwG,KAAKmsG,UAAY6D,IAGZpH,EAvpCY,CAwpCnBr+E,GAAUgD,KAEZq7E,GAAen6E,aAAak6E,IAC5B,IAAI4H,GAAe,CACjBC,cAAe,WACb,OAAKxwG,KAAKo9B,UAIVp9B,KAAKI,OACLJ,KAAKywG,cAELzwG,KAAK0wG,iBAEL1wG,KAAKk4C,WAAW,iBAETl4C,MAVEA,MAYXywG,YAAa,WACX,GAAIzwG,KAAK2wG,YAAa,CACpB,IAAIC,EAAO5wG,KAAK2wG,YAAYn9F,UAC5Bo9F,EAAOA,EAAK/nG,QAAQ,QAAS,IAAIA,QAAQ,UAAW,SACpD7I,KAAK2wG,YAAYn9F,UAAYo9F,EAE7B,IAAI3/F,EAAUjR,KAAK2wG,YAAYE,UAAUhoG,QAAQ,aAAc,IAE/D7I,KAAK4jE,WAAW3yD,GAChBgH,GAAIjY,KAAK2wG,YAAa,qBAAsB97F,IAC5C7U,KAAKo9B,SAASnlB,IAAI,YAAajY,KAAKywG,YAAazwG,MAEjDA,KAAK8wG,cAAcxjF,gBAEZttB,KAAK8wG,cACZ9wG,KAAK2wG,YAAYI,QAAU,YACpB/wG,KAAK2wG,YACZ3wG,KAAKG,OAELH,KAAKk4C,WAAW,eAGlB,OAAOl4C,MAETgxG,cAAe,WACb,QAAIhxG,KAAK2wG,aAMXM,cAAe,WACb,OAAOjxG,KAAK8wG,eAEdJ,eAAgB,WACd,IAAI7yG,EAAMmC,KAAKo9B,SAEX8zE,EAAgBlxG,KAAKmxG,gBAEzBnxG,KAAK2wG,YAAcO,EACnBrzG,EAAIma,GAAG,YAAahY,KAAKywG,YAAazwG,MAEtC,IAAIqV,EAASrV,KAAKoxG,mBAElBpxG,KAAK8wG,cAAgB,IAAIhrB,GAAS9lF,KAAK03C,iBAAkB,CACvD,UAAa,KACb,QAAWw5D,EACX,GAAM77F,EAAOpW,GACb,GAAMoW,EAAOnW,KACZ04C,MAAM/5C,GAETmC,KAAKqxG,iBAAiBrxG,KAAK2wG,cAE7BS,iBAAkB,WAChB,IAAIhrG,EAASpG,KAAKwyC,sBAAwB,GACtCvzC,EAAK,EACLC,EAAK,EACLgxF,EAAY9pF,EAAgC,wBAUhD,MARkB,WAAd8pF,GAA0B94F,EAAM84F,IAClCjxF,GAAMmH,EAAe,QAAK,GAAK,EAC/BlH,GAAMkH,EAAe,QAAK,GAAK,IAE/BnH,GAAMmH,EAAiB,UAAK,GAAK,EACjClH,GAAMkH,EAAiB,UAAK,GAAK,GAG5B,CACL,GAAMnH,EACN,GAAMC,IAGViyG,cAAe,WACb,IAAIlgG,EAAUjR,KAAK0jE,aACf4tC,EAAYtxG,KAAK40B,UACjBxuB,EAASpG,KAAKwyC,sBAAwB,GACtCnsC,EAAQirG,EAAUjrG,MAClBkrG,EAAYnrG,EAAiB,UAAK,UAClCgZ,EAAWhZ,EAAiB,UAAK,GACjCE,EAASgrG,EAAUhrG,OACnB+lC,EAAYjmC,EAAwB,iBAAK,OACzCmV,EAAOnV,EAAmB,YAAK,UAC/BorG,EAAUprG,EAAwB,iBAAK,EACvCqrG,EAAS3+F,GAAS,OActB,OAbA2+F,EAAOC,iBAAkB,EACzBD,EAAOppG,MAAMuO,QAAU,cAAgB2E,EAAO,sBAAwB8wB,EAAY,wBAA0BklE,EAAY,cAAgBnyF,EAAW,aAAe/Y,EAAQ,GAAK,cAAgBC,EAAS,GAAK,8CAAgD8Y,EAAWoyF,GAAW,0IACnRC,EAAOZ,UAAY5/F,EACnB+G,GAAGy5F,EAAQ,qBAAsB58F,IAEjC48F,EAAOV,QAAU,SAAU/8F,GACzB,IAAI5M,EAAIqqG,EAAOppG,MAAM/B,QAAU,EAET,KAAlB0N,EAAM29F,UACRF,EAAOppG,MAAM/B,OAASqP,SAASvO,GAAKgY,EAAW,EAAI,OAIhDqyF,GAETJ,iBAAkB,SAA0Bh6G,GAC1C,IAAIu6G,EAEAz3G,OAAO03G,cACTx6G,EAAIy6G,SACJF,EAAQz3G,OAAO03G,gBACTE,kBAAkB16G,GACxBu6G,EAAMI,iBACG1oG,SAAS2oG,aAClBL,EAAQtoG,SAAS2oG,UAAUC,eACrBC,kBAAkB96G,GACxBu6G,EAAMQ,UAAS,GACfR,EAAMS,YAIZ7uC,GAAWh1C,QAAQ+hF,IACnBp5D,GAAS3oB,QAAQ,CACfuoC,QAAS,SAAiB50D,EAAQoW,EAASktC,GACzC,IAAI11B,EAAQ/vB,KAERA,KAAKu7C,aACPv7C,KAAKu7C,YAAYC,SAGfzjD,EAAWwgB,KACbktC,EAAOltC,GAGJA,IACHA,EAAU,IAGZ,IAKI+5F,EALAz0G,EAAMmC,KAAKo9B,SACX/J,EAAarzB,KAAKg1C,iBAClB5uC,EAASpG,KAAK+uC,aAAe,GAC7BwjE,EAAkBvyG,KAAKwyG,wBAAwBrwG,GAG/CswG,EAAal6F,EAAe,MAGhC,UAFOvY,KAAK0yG,kBAER70G,EAAK,CACP,IAAI0vC,EAAW1vC,EAAI40C,eAMnBl6B,EAAgB,OAJH,SAAgB5e,GAC3B4zC,EAASgkB,gBAAgB53D,IAM7B,IAAIw/D,EAAS7D,GAAUyB,QAAQw7C,EAAiBh6F,GAAS,SAAUi7C,GACjE,GAAI31D,GAAOA,EAAIsrD,YACbgQ,EAAO3d,aADT,CAKI39C,IAAQkyB,EAAM2iF,mBAAqBD,GACrC50G,EAAI0kC,cAGN,IAAIpgC,EAASqxD,EAAMrxD,OAEnB,IAAK,IAAI3G,KAAK2G,EACZ,GAAU,WAAN3G,GAAwB,cAANA,GAAqB2G,EAAOlK,eAAeuD,GAAI,CACnE,IAAIm3G,EAAS,MAAQn3G,EAAE,GAAGo2B,cAAgBp2B,EAAElC,MAAM,GAElDy2B,EAAM4iF,GAAQxwG,EAAO3G,IAIzB,IAAImjB,EAAYxc,EAAkB,UAElC,GAAIwc,EAAW,CACb,IAAIi0F,EAAcj0F,EAEd2zF,IACFM,EAAcj0F,EAAUpQ,IAAI+jG,IAG9BA,EAAe3zF,EAEfoR,EAAMpR,UAAUi0F,GAGlB,IAAIC,EAAU1wG,EAAe,OAM7B,GAJI0wG,GACF9iF,EAAMunB,UAAUrvC,GAAa7B,EAAQysG,IAGnCh1G,GAAO40G,EAAY,CACrB,IAAIxwD,EAAU5uB,EAAWsB,QAAQ5E,EAAMzS,aAEvCzf,EAAIskD,cAAcF,GAElB,IAAIluC,EAAIlW,EAAIukD,qBAAqB/uB,EAAWD,UAAU6uB,IAE7B,YAArBkX,EAAO1F,UACT51D,EAAI4kC,UAAU1uB,GAEdlW,EAAI2kC,SAASzuB,GAIjBgc,EAAM+iF,kBAAkB35C,EAAO1F,WAE3BhO,GACFA,EAAK+N,MAENxzD,MAEH,OADAA,KAAKu7C,YAAc4d,EACZn5D,KAAKu7C,YAAY2b,QAE1Bs7C,wBAAyB,SAAiCrwG,GACxD,IAAIiE,EAASpG,KAAKwyC,qBAEd+/D,EAAkB,GAEtB,IAAK,IAAI/2G,KAAK2G,EACZ,GAAIA,EAAOlK,eAAeuD,GAAI,CAC5B,IAAIK,EAAIsG,EAAO3G,GAEf,GAAU,cAANA,GAA2B,WAANA,EAAgB,CACvC,IACI66B,EAAUr2B,KADD,MAAQxE,EAAE,GAAGo2B,cAAgBp2B,EAAEyF,UAAU,MAEtDsxG,EAAgB/2G,GAAK,CAAC66B,EAASx6B,QAC1B,GAAU,WAANL,EAAgB,CACzB,IAAIu3G,OAAkB,EAEtB,GAAIz3G,MAAMC,QAAQ4G,EAAe,QAAI,CACnC,IAAK7G,MAAMC,QAAQ6K,GACjB,MAAM,IAAIpI,MAAM,4EAGlB+0G,EAAkB,GAGlB,IAFA,IAAIC,EAAiB7wG,EAAe,OAE3BpL,EAAI,EAAGA,EAAIi8G,EAAe/7G,OAAQF,IACzC,GAAKi8G,EAAej8G,GAApB,CAKA,IAAI0F,EAAI,GAER,IAAK,IAAIw2G,KAAMD,EAAej8G,GACxBi8G,EAAej8G,GAAGkB,eAAeg7G,KACnCx2G,EAAEw2G,GAAM,CAAC7sG,EAAOrP,GAAGk8G,GAAKD,EAAej8G,GAAGk8G,KAI9CF,EAAgBj4G,KAAK2B,QAZnBs2G,EAAgBj4G,KAAK,UAcpB,CACL,GAAIQ,MAAMC,QAAQ6K,GAChB,MAAM,IAAIpI,MAAM,4EAKlB,IAAK,IAAIk1G,KAFTH,EAAkB,GAEFl3G,EACVA,EAAE5D,eAAei7G,KACnBH,EAAgBG,GAAO,CAAC9sG,EAAO8sG,GAAMr3G,EAAEq3G,KAK7CX,EAAwB,OAAIQ,MACb,cAANv3G,IACT+2G,EAA2B,UAAI,IAAIvhF,GAAWn1B,IAKpD,OAAO02G,GAETO,kBAAmB,SAA2Br/C,GAC1B,aAAdA,UACKzzD,KAAK0yG,kBAEZ1yG,KAAKk4C,WAAW,eACO,YAAdub,IACLzzD,KAAK0yG,kBACP1yG,KAAKk4C,WAAW,cAEhBl4C,KAAKk4C,WAAW,gBAEhBl4C,KAAK0yG,mBAAoB,OAKjC,IACIS,GAAWzmG,GAAU3B,MAAQ,uBAAyB,YAEtDqoG,GAAsB,SAAUtjF,GAGlC,SAASsjF,EAAoBhsF,GAC3B,OAAO0I,EAASx3B,KAAK0H,KAAMonB,IAAWpnB,KAHxC2M,GAAeymG,EAAqBtjF,GAMpC,IAAIxiB,EAAS8lG,EAAoBj7G,UAmUjC,OAjUAmV,EAAO4f,SAAW,WAChBltB,KAAKonB,OAAOpP,GAAGm7F,GAAUnzG,KAAKsmF,WAAYtmF,OAG5CsN,EAAO8f,YAAc,WACnBptB,KAAKumF,WAELvmF,KAAKonB,OAAOnP,IAAIk7F,GAAUnzG,KAAKsmF,WAAYtmF,aACpCA,KAAKoT,WAGd9F,EAAOo5E,oBAAsB,WAC3B1mF,KAAKytD,aAAe,IAAI59B,GAAY7vB,KAAKoT,WAEzCpT,KAAKytD,aAAaz1C,GAAG,WAAYhY,KAAK2mF,UAAW3mF,MAAMgY,GAAG,UAAWhY,KAAKumF,SAAUvmF,MAAMgtB,UAG5F1f,EAAO0lC,eAAiB,WACtB,IAAIjjB,EAAQ/vB,KAERonB,EAASpnB,KAAKonB,OAElBpnB,KAAKqzG,yBAEDrzG,KAAKqpG,SACPrpG,KAAKqpG,QAAQ/7E,SAGf,IAAI8b,EAASppC,KAAKqpG,QAAUjiF,EAAOpZ,OAEnC,GAAIo7B,EAAOzH,cAAe,CACxB,IAAI2xE,EAAUlqE,EAAOzH,gBACjBuvB,EAAO9pC,EAAOua,gBAClB2xE,EAAQ71F,SAAQ,SAAUxb,EAAGlL,GAC3Bg5B,EAAMwjF,oBAAoBtxG,EAAGivD,EAAKn6D,YAGpCiJ,KAAKuzG,oBAAoBnqE,EAAQhiB,GAGnCgiB,EAAOoO,MAAM,MAEbx3C,KAAKwzG,4BAGPlmG,EAAOimG,oBAAsB,SAA6BnqE,EAAQhiB,GAGhE,GAFAgiB,EAAOkO,UAAUlwB,EAAOorB,sBAEpBprB,EAAO7O,QAAoB,WAAG,CAChC,IAAInS,EAASyB,GAAmBuhC,EAAOoJ,qBAAsB,IAC7DpJ,EAAOkO,UAAUlxC,KAIrBkH,EAAOkmG,yBAA2B,WAChC,IAAIpsF,EAASpnB,KAAKonB,OACdgiB,EAASppC,KAAKqpG,QAEdhiG,EAAYrH,KAAKyzG,gBAAgBhhE,eAAeprC,UAEhDqsG,EAAmB,GAEvB,GAAIxsC,GAAcpB,eAAe1+C,GAG/B,IAFA,IAAIusF,EAAazsC,GAAclB,eAAe5+C,GAErCrwB,EAAI,EAAGiO,EAAI2uG,EAAW18G,OAAQF,EAAIiO,EAAGjO,IAAK,CACjD,IAAI68G,EAAaD,EAAW58G,GAExB88G,EAAcD,EAAW/lF,SACzBimF,EAAaF,EAAWphE,qBAE5BqhE,EAAoB,OAAIhsG,GAAmBisG,EAAY,IACvD,IAAIC,OAAO,EAGTA,EADEH,EAAW3tC,qBAAuB7+C,EAC7B,IAAIwsF,EAAW/7G,YAAYuxC,EAAQwqE,EAAWvtC,mBAAoBwtC,GAElE,IAAID,EAAW/7G,YAAY+7G,EAAW3tC,mBAAoB78B,EAAQyqE,GAG3EH,EAAiB54G,KAAKi5G,GAElBH,EAAWnrE,YAAcmrE,EAAWnrE,WAAWgK,gBACjDprC,EAAUs8B,MAAMiwE,EAAWnrE,WAAWgK,eAAeprC,WAK3DrH,KAAKg0G,kBAAoBN,EACzBA,EAAiB54G,KAAKsuC,GAEtBppC,KAAKyzG,gBAAgBl6D,eAAezB,YAAY47D,IAGlDpmG,EAAO2mG,iBAAmB,WACpBj0G,KAAKqpG,SACPrpG,KAAKqpG,QAAQ/xD,UAAUt3C,KAAKonB,OAAOoxB,eAIvClrC,EAAO+lG,uBAAyB,WAC9B,IAAIx1G,EAAMmC,KAAKonB,OAAOgW,SAClBP,EAAQ78B,KAAKonB,OAAOqhB,WACxBzoC,KAAKyzG,gBAAkB51G,EAAI4qC,SAnHL8lC,yCAqHjBvuE,KAAKyzG,kBACRzzG,KAAKyzG,gBAAkB,IAAIhpC,GAtHP8D,wCAsHwC,CAC1D2lC,eAAgBr3E,EAAMtkB,QAAwB,eAC9C47F,iBAAkBt3E,EAAMtkB,QAA0B,mBAEpD1a,EAAIkgD,SAAS/9C,KAAKyzG,kBAGpB,IAAIpsG,EAAY,IAAIi2B,GACpBj2B,EAAUs8B,MAAM9G,EAAM4V,eAAeprC,WACrCrH,KAAKyzG,gBAAgBhhE,eAAeprC,UAAYA,GAGlDiG,EAAOg5E,WAAa,SAAoB35D,GACtC,IAAI9uB,EAAMmC,KAAKonB,OAAOgW,SAEtB,GAAKv/B,KAIQmC,KAAKonB,OAAO+wB,eAMrBn4C,KAAKkmF,cAAT,CAIA,IAAIp4B,EAAWnhC,EAAgB,SAE3BmhC,EAAS19B,SAAW09B,EAAS19B,QAAQn5B,OAAS,GAAyB,IAApB62D,EAAS39B,SAIhEnwB,KAAKoT,UAAYvV,EAAIwiD,QAAQmN,YAAc3vD,EAAIsjD,cAC/CnhD,KAAKonB,OAAOpP,GAAG,QAAShY,KAAKumF,SAAUvmF,MACvCA,KAAKwmF,WAAaxmF,KAAKo0G,cAAcznF,EAAkB,YACvD3sB,KAAKymF,WAAa95D,EAAsB,eAExC3sB,KAAK0mF,sBAEL1mF,KAAKytD,aAAax9B,YAAYtD,EAAgB,UAE9C3U,GAAGhY,KAAKoT,UAAW,aAAcpT,KAAKumF,SAAUvmF,MAChDA,KAAKq0G,YAAc1nF,EACnB3sB,KAAKs0G,QAAS,KAIhBhnG,EAAOq5E,UAAY,SAAmBh6D,GACpC,IAAIvF,EAASpnB,KAAKonB,OAGdrT,EADMqT,EAAOgW,SACLqsB,YAAY98B,EAAgB,UAEpCmhC,EAAW/5C,EAAY,SAE3B,KAAI+5C,EAAS19B,SAAW09B,EAAS19B,QAAQn5B,OAAS,GAAlD,CAIA,IAAK+I,KAAKs0G,OAgBR,OAfAt0G,KAAKs0G,QAAS,EACdltF,EAAOpP,GAAG,eAAgBhY,KAAKi0G,iBAAkBj0G,MACjDA,KAAK4mF,aAAc,EAEnB5mF,KAAKgzC,iBAEA5rB,EAAO7O,QAAoB,YAC9B6O,EAAOhnB,OAGTJ,KAAKqpG,QAAQnxD,WAAW,YAAankC,GAErC/T,KAAKonB,OAAO8wB,WAAW,YAAal4C,KAAKq0G,aAAetgG,eAEjD/T,KAAKq0G,YAId,GAAKr0G,KAAKqpG,QAAV,CAIA,IAAImC,EAAOxrG,KAAKqpG,QAAQ9wF,QAAoB,WACxC4Y,EAAQnxB,KAAKo0G,cAAcrgG,EAAc,YACzCnG,EAAQmG,EAAkB,eAE9B/T,KAAKymF,WAAazmF,KAAKymF,YAAc74E,EACrC5N,KAAKwmF,WAAaxmF,KAAKwmF,YAAcr1D,EACrC,IAAI21D,EAAcl5E,EAAMW,IAAIvO,KAAKymF,YAC7BI,EAAc11D,EAAM5iB,IAAIvO,KAAKwmF,YAEpB,MAATglB,EACF1kB,EAAY15E,EAAIy5E,EAAYz5E,EAAI,EACd,MAATo+F,IACT1kB,EAAY9qF,EAAI6qF,EAAY7qF,EAAI,GAGlCgE,KAAKymF,WAAa74E,EAClB5N,KAAKwmF,WAAar1D,EAElBnxB,KAAKqpG,QAAQ1qF,UAAUkoE,GAElBz/D,EAAO7O,QAAoB,YAC9B6O,EAAOzI,UAAUkoE,GAGnB9yE,EAAe,YAAI8yE,EACnB9yE,EAAe,YAAI+yE,EAEnB9mF,KAAKqpG,QAAQnxD,WAAW,WAAYnkC,GAEpCqT,EAAO8wB,WAAW,WAAYnkC,MAGhCzG,EAAOi5E,SAAW,SAAkB55D,GAWlC,GAVI3sB,KAAKytD,eACPztD,KAAKytD,aAAatgC,iBAEXntB,KAAKytD,cAGVztD,KAAKoT,WACP6E,GAAIjY,KAAKoT,UAAW,aAAcpT,KAAKumF,SAAUvmF,MAG9CA,KAAKonB,OAAV,CAIA,IAAIA,EAASpnB,KAAKonB,OAClBA,EAAOnP,IAAI,QAASjY,KAAKumF,SAAUvmF,MACnConB,EAAOnP,IAAI,eAAgBjY,KAAKi0G,iBAAkBj0G,aAC3CA,KAAKwmF,kBACLxmF,KAAKymF,WACZzmF,KAAK4mF,aAAc,EACnB,IAAI/oF,EAAMupB,EAAOgW,SAEjB,GAAIp9B,KAAKqtB,WAAaxvB,EAAK,CACzB,IAAIkW,EAAIlW,EAAI4rD,YAAY98B,EAAQA,EAAgB,SAAI,MAEpD3sB,KAAKu0G,6BAA6BxgG,GAE9B/T,KAAKs0G,QACPltF,EAAO8wB,WAAW,UAAWnkC,MAKnCzG,EAAO44E,WAAa,WAClB,QAAKlmF,KAAK4mF,aAOZt5E,EAAOinG,6BAA+B,SAAsC3gC,GAC1E,IAAIxsD,EAASpnB,KAAKonB,OACdvpB,EAAMupB,EAAOgW,SAEZhW,EAAO7O,QAAoB,YAC9B6O,EAAOjnB,OAGT,IAAIipC,EAASppC,KAAKqpG,QAElB,GAAIjgE,EAAQ,CACV,GAAIhiB,EAAO7O,QAAoB,WAC7B,GAAI6O,EAAOua,cAAe,CACxB,IAAI2xE,EAAUlqE,EAAOzH,gBACjBuvB,EAAO9pC,EAAOua,gBAClB2xE,EAAQ71F,SAAQ,SAAUxb,EAAGlL,GAC3Bm6D,EAAKn6D,GAAG+iD,eAAew5D,EAAQv8G,GAAG2gD,0BAGpCtwB,EAAO0yB,eAAe1Q,EAAOsO,kBAIjCtO,EAAO8O,WAAW,UAAW07B,GAE7BxqC,EAAO9b,gBACAttB,KAAKqpG,QAGVrpG,KAAKg0G,oBACPn2G,EAAI4qC,SAnTgB8lC,yCAmTc1F,eAAe7oE,KAAKg0G,0BAC/Ch0G,KAAKg0G,mBAGVh0G,KAAKyzG,iBACPzzG,KAAKyzG,gBAAgBnmF,UAIzBhgB,EAAO8mG,cAAgB,SAAuBjjF,GAC5C,IAAItzB,EAAMmC,KAAKonB,OAAOgW,SAEtB,IAAKv/B,EAAIwgC,WACP,OAAOlN,EAGT,IAAIkU,EAAUrlC,KAAKonB,OAAOouB,cAE1B,IAAKnQ,EAAQsN,iBACX,OAAOxhB,EAGT,IAAI4f,GAAO1L,EAAQsN,iBAAmBtN,EAAQ6O,kBAAoB,EAClE,OAAOr2C,EAAIsuD,cAAch7B,EAAO,GAAI4f,IAG/BqiE,EA1UiB,CA2UxBtmF,IAEFqqB,GAAS1oB,aAAa,CACpB,WAAa,EACb,YAAc,EACd,WAAc,OAEhB0oB,GAAS/oB,YAAY,aAAc,YAAaglF,IAChDj8D,GAAS3oB,QAAQ,CACf03D,WAAY,WACV,OAAIlmF,KAAKm4C,aACAn4C,KAAKm4C,aAAa+tC,eAGvBlmF,KAAgB,WACXA,KAAgB,UAAEkmF,gBAM/B/uC,GAAS3oB,QAAQ,CACfqvC,UAAW,SAAmBxmB,GAC5B,OAAKr3C,KAAKo9B,UAAap9B,KAAKuY,QAAkB,UAI9CvY,KAAK47C,UACL57C,KAAKw0G,QAAU,IAAI5L,GAAe5oG,KAAMq3C,GAExCr3C,KAAKw0G,QAAQtuF,QAEblmB,KAAK8rB,KAAK,aACH9rB,MATEA,MAWX47C,QAAS,WAQP,OAPI57C,KAAKw0G,UACPx0G,KAAKw0G,QAAQ1uG,cAEN9F,KAAKw0G,QACZx0G,KAAK8rB,KAAK,YAGL9rB,MAETy0G,SAAU,WACR,OAAKz0G,KAAK27C,aAIV37C,KAAKw0G,QAAQ9mC,OAEb1tE,KAAK8rB,KAAK,YACH9rB,MANEA,MAQX00G,SAAU,WACR,OAAK10G,KAAK27C,aAIV37C,KAAKw0G,QAAQrnC,OAEbntE,KAAK8rB,KAAK,YACH9rB,MANEA,MAQX20G,WAAY,WACV,OAAK30G,KAAK27C,aAIV37C,KAAKw0G,QAAQj9C,SAEbv3D,KAAK8rB,KAAK,cACH9rB,MANEA,MAQX27C,UAAW,WACT,QAAI37C,KAAKw0G,SACAx0G,KAAKw0G,QAAQ74D,eAM1BxE,GAAS3oB,QAAQ,CACfsiC,SAAU,SAAkB98C,EAAOrV,GACjC,GAAKqB,KAAKo9B,SAAV,CAIA,IAAI/R,EAAY1sB,GAAQqB,KAAKywD,oBAAoBz8C,GAE/B,gBAAdqX,GAA+BrrB,KAAK0rB,QAAQ,iBAC9C7W,GAAgBb,GAChBW,GAAeX,IAGjB,IAAI43B,EAAS5rC,KAAK40G,gBAAgB5gG,GAElChU,KAAKk4C,WAAW7sB,EAAWugB,KAE7B6kB,oBAAqB,SAA6B3C,GAChD,OAAOA,EAASnvD,MAElBi2G,gBAAiB,SAAyB7gG,GACxC,IAAIlW,EAAMmC,KAAKo9B,SACXw2C,EAAa,CACf,SAAY7/D,GAEV2c,EAAS3c,EAAEqc,SAAWrc,EAAEqc,QAAQn5B,OAAS,EAAI8c,EAAEqc,QAAQ,GAAKrc,EAAEgd,gBAAkBhd,EAAEgd,eAAe95B,OAAS,EAAI8c,EAAEgd,eAAe,GAAKhd,EAExI,GAAI2c,EAAQ,CACV,IAAIiP,EAAiBxpB,GAAuBua,EAAQ7yB,EAAIsjD,eACxDyyB,EAAuB,WAAI/1E,EAAIgqD,2BAA2BloB,GAC1Di0C,EAA2B,eAAIj0C,EAC/Bi0C,EAAsB,UAAI/1E,EAAIiqD,0BAA0BnoB,GACxDi0C,EAAmB,OAAI/1E,EAAI6iC,uBAAuBf,GAGpD,OAAOi0C,KAGXz8B,GAAS3oB,QAAQ,CACf2mD,cAAe,SAAuB58D,GAGpC,OAFAvY,KAAKknF,mBAED3uE,aAAmBwuE,IACrB/mF,KAAKmnF,YAAc5uE,EACnBvY,KAAKm9C,gBAAkBtmD,EAAO,GAAImJ,KAAKmnF,YAAY5uE,SAEnDvY,KAAKmnF,YAAYvvC,MAAM53C,MAEhBA,OAGTA,KAAKm9C,gBAAkBtmD,EAAO,GAAI0hB,GAE9BvY,KAAKmnF,YACPnnF,KAAKmnF,YAAY35D,WAAWjV,GACnBvY,KAAKo9B,UACdp9B,KAAK60G,gBAAgB70G,KAAKm9C,iBAGrBn9C,OAETinF,cAAe,WACb,OAAKjnF,KAAKmnF,YAIHnnF,KAAKmnF,YAHH,MAKX2tB,eAAgB,SAAwB5tD,GACtC,OAAKlnD,KAAKo9B,UAIL8pB,IACHA,EAAalnD,KAAKsd,aAGftd,KAAKmnF,YAORnnF,KAAKmnF,YAAYhnF,KAAK+mD,GANlBlnD,KAAKm9C,iBAAmBn9C,KAAKo9B,WAC/Bp9B,KAAK60G,gBAAgB70G,KAAKm9C,iBAE1Bn9C,KAAKmnF,YAAYhnF,KAAK+mD,IAMnBlnD,MAjBEA,MAmBX08C,gBAAiB,WAKf,OAJI18C,KAAKmnF,aACPnnF,KAAKmnF,YAAY/mF,OAGZJ,MAETknF,iBAAkB,WAKhB,OAJAlnF,KAAK07C,2BAEE17C,KAAKm9C,uBACLn9C,KAAKmnF,YACLnnF,MAET60G,gBAAiB,SAAyBt8F,GAKxC,OAJAvY,KAAKmnF,YAAc,IAAIJ,GAAWxuE,GAElCvY,KAAKmnF,YAAYvvC,MAAM53C,MAEhBA,MAET07C,kBAAmB,WASjB,OARI17C,KAAKmnF,cACPnnF,KAAK08C,kBAEL18C,KAAKmnF,YAAY75D,gBAEVttB,KAAKmnF,aAGPnnF,QAIX,IAAI+0G,GAAW,WACb,SAASA,EAASj4G,EAAKmiC,GACrBj/B,KAAKlD,IAAMA,EACXkD,KAAKi/B,SAAWA,EAChBj/B,KAAKs1F,QAGP,IAAIhoF,EAASynG,EAAS58G,UAsFtB,OApFAmV,EAAOgoF,MAAQ,WACb,IAAK,IAAIj9F,KAAO2H,KAAKqY,KACnBrY,KAAKi/B,SAASj/B,KAAKqY,KAAKhgB,IAK1B,OAFA2H,KAAKqY,KAAO,GACZrY,KAAKg1G,MAAQ,GACNh1G,MAGTsN,EAAOuyB,MAAQ,WACb7/B,KAAKs1F,eACEt1F,KAAKi/B,UAGd3xB,EAAOY,IAAM,SAAa7V,EAAKggB,GAC7B,GAAIrY,KAAKq1F,IAAIh9F,GACX2H,KAAKg1G,MAAM95G,OAAO8E,KAAKg1G,MAAM/5G,QAAQ5C,GAAM,GAC3C2H,KAAKqY,KAAKhgB,GAAOggB,EACjBrY,KAAKg1G,MAAMl6G,KAAKzC,QAKhB,GAHA2H,KAAKqY,KAAKhgB,GAAOggB,EACjBrY,KAAKg1G,MAAMl6G,KAAKzC,GAEZ2H,KAAKg1G,MAAM/9G,OAAS+I,KAAKlD,IAAK,CAChC,IAAIm4G,EAAcj1G,KAAKk1G,aAAal1G,KAAKg1G,MAAM,IAC3CC,GAAaj1G,KAAKi/B,SAASg2E,GAInC,OAAOj1G,MAGTsN,EAAO+nF,IAAM,SAAah9F,GACxB,OAAOA,KAAO2H,KAAKqY,MAGrB/K,EAAO1F,KAAO,WACZ,OAAO5H,KAAKg1G,OAGd1nG,EAAO4nG,aAAe,SAAsB78G,GAC1C,IAAK2H,KAAKq1F,IAAIh9F,GACZ,OAAO,KAGT,IAAIggB,EAAOrY,KAAKqY,KAAKhgB,GAGrB,cAFO2H,KAAKqY,KAAKhgB,GACjB2H,KAAKg1G,MAAM95G,OAAO8E,KAAKg1G,MAAM/5G,QAAQ5C,GAAM,GACpCggB,GAGT/K,EAAO7I,IAAM,SAAapM,GACxB,OAAK2H,KAAKq1F,IAAIh9F,GAIH2H,KAAKqY,KAAKhgB,GAHZ,MAOXiV,EAAOggB,OAAS,SAAgBj1B,GAC9B,IAAK2H,KAAKq1F,IAAIh9F,GACZ,OAAO2H,KAGT,IAAIqY,EAAOrY,KAAKqY,KAAKhgB,GAIrB,cAHO2H,KAAKqY,KAAKhgB,GACjB2H,KAAKi/B,SAAS5mB,GACdrY,KAAKg1G,MAAM95G,OAAO8E,KAAKg1G,MAAM/5G,QAAQ5C,GAAM,GACpC2H,MAGTsN,EAAO6nG,WAAa,SAAoBr4G,GAGtC,IAFAkD,KAAKlD,IAAMA,EAEJkD,KAAKg1G,MAAM/9G,OAAS+I,KAAKlD,KAAK,CACnC,IAAIm4G,EAAcj1G,KAAKk1G,aAAal1G,KAAKg1G,MAAM,IAC3CC,GAAaj1G,KAAKi/B,SAASg2E,GAGjC,OAAOj1G,MAGF+0G,EA7FM,GAgGXK,GAAe,IAAIlmG,GAAM,EAAG,GAC5BmmG,GAAgB,IAAInmG,GAAM,EAAG,GAC7BomG,GAAgB,IAAIpmG,GAAM,EAAG,GAE7BqmG,GAA0B,SAAUpP,GAGtC,SAASoP,EAAwB14E,GAC/B,IAAI9M,EAQJ,OANAA,EAAQo2E,EAAgB7tG,KAAK0H,KAAM68B,IAAU78B,MACvCw1G,YAAc,GACpBzlF,EAAM0lF,aAAe,GACrB1lF,EAAM2lF,aAAe,GACrB3lF,EAAM4lF,YAAc,GACpB5lF,EAAM6lF,UAAY,IAAIb,GAASl4E,EAAMtkB,QAAsB,aAAGwX,EAAM8lF,WAAWzvE,KAAKp5B,GAAuBA,GAAuB+iB,MAC3HA,EAXTpjB,GAAe4oG,EAAyBpP,GAcxC,IAAI74F,EAASioG,EAAwBp9G,UAswBrC,OApwBAmV,EAAOwoG,mBAAqB,WAC1B,OAAO91G,KAAK+1G,WAGdzoG,EAAO21B,KAAO,WACZ,IAAIplC,EAAMmC,KAAKo9B,SAEf,GAAKp9B,KAAKomG,aAAV,CAIA,IAAI4P,EAAeh2G,KAAK0b,gBAExB,IAAIs6F,GACGA,EAAahiF,WAAWh0B,KAAKm/B,gBADpC,CAOA,IACIq3D,EADQx2F,KAAK68B,MACKw5D,WAAWG,UAEjC,GAAKA,GAAcA,EAAUv/F,OAA7B,CAKA,IAAIg/G,EAAe,EACfC,GAAU,EACVC,EAAe,GACfnf,EAAQ,GACRof,EAAc,GACdC,EAAa,GACbC,EAAa,GACbC,EAAY,GACZC,EAAe,GACfC,EAAkB,GAClBC,EAAY,GAEZC,EAAkB32G,KAAK42G,aACvBC,EAAe72G,KAAK82G,gBAEpB9xG,EAAIwxF,EAAUv/F,OAClB+I,KAAK+1G,UAAYvf,EAAU,GAAS,KACpCx2F,KAAK+2G,YAAcvgB,EAAU,GAAW,OAExC,IAAK,IAAIz/F,EAAI,EAAGA,EAAIiO,EAAGjO,IAMrB,IALA,IAAIigH,EAAWxgB,EAAUz/F,GACrBkgH,EAAWD,EAAgB,MAE3BE,EAAcl3G,KAAKm3G,qBAAqBH,EAASjxG,MAE5ClB,EAAK,EAAG2hD,EAAKywD,EAAShgH,OAAQ4N,EAAK2hD,EAAI3hD,IAAM,CACpD,IAAIm1F,EAAOid,EAASpyG,GAChBq0F,EAASc,EAAS,GAClBod,GAAc,EAElB,GAAIp3G,KAAKq3G,eAAene,GACtBke,EAAclB,GAAU,EACxBl2G,KAAKy1G,aAAavc,GAAQ7iE,SAAU,MAC/B,CACL,IAAIi2B,EAAStsD,KAAKs3G,eAAepe,GAEjC,GAAI5sC,EACEA,EAAO3vC,OAAS3c,KAAKu3G,eAAejrD,EAAO3vC,OAAS,IACtDy6F,EAAclB,GAAU,GAG1Blf,EAAMl8F,KAAKwxD,QAEX8qD,EAAclB,GAAU,EACTW,GAAgBZ,EAAeU,EAAgB,GAAKE,GAEhDh5G,EAAImgC,kBAAmBngC,EAAIygC,aAAczgC,EAAI2gC,eAC9Dy3E,IACAS,EAAUxd,EAAS,IAAMc,EAAY,MAAEjrF,UAAUvN,QAAUw4F,GAKjE,GAAKod,IAEDjB,EAAajd,GAAjB,CAIAid,EAAajd,GAAU,EAEnBge,IAAgBT,EAAgBvd,KAClCc,EAAK15D,OAAQ,EACbk2E,EAAa17G,KAAK,CAChB6hB,MAAOu6F,EACPr0B,KAAMmX,IAERyc,EAAgBvd,GAAU,GAG5B,IAAIse,EAAax3G,KAAKy3G,gBAAgBzd,GAEtC,GAAIwd,EAAY,CACd,IAAIE,EAAWF,EAAW30B,KAAKzoF,QAEF0B,IAAzBu6G,EAAWqB,KACbrB,EAAWqB,GAAYtB,EAAYn/G,OACnCm/G,EAAYt7G,KAAK08G,SAEd,IAAKpB,EAAYn/G,OAAQ,CAC9B,IAAIs/D,EAAWv2D,KAAK23G,gBAAgB3d,GAEhCzjC,EAASt/D,QACXs/D,EAAS94C,SAAQ,SAAUja,GACpB+yG,EAAU/yG,EAAEq/E,KAAKzoF,MACpBk8G,EAAWx7G,KAAK0I,GAChB+yG,EAAU/yG,EAAEq/E,KAAKzoF,IAAM,QAQ/Bg8G,EAAYn/G,SACdq/G,EAAWr/G,OAAS,EACpB+I,KAAK21G,YAAY1+G,OAAS,GAG5B+I,KAAK43G,WAAW5gB,EAAOof,EAAaE,EAAYE,GAE3CP,EAWHj2G,KAAK63G,cAAcnB,GAVdR,IACEr4G,EAAI4xE,gBAAkBzvE,KAAK01G,aAAaz+G,SAAU+I,KAAK21G,YAAY1+G,SACtE+I,KAAK01G,aAAe,GACpB11G,KAAK21G,YAAc,GACnB31G,KAAKg9B,eAGPh9B,KAAKiiC,kBAMTjiC,KAAK83G,oBAvHH93G,KAAKiiC,sBATHjiC,KAAKiiC,mBAmIX30B,EAAO8rF,sBAAwB,SAA+BF,GAC5D,OAAOl5F,KAAKy1G,aAAavc,IAAWl5F,KAAKw1G,YAAYtc,IAAWl5F,KAAK41G,UAAUnxG,IAAIy0F,IAGrF5rF,EAAOsqG,WAAa,SAAoB5gB,EAAOof,EAAaE,EAAYE,GACtE,IAAI94E,EAAS19B,KAETo2G,EAAYn/G,SACdm/G,EAAY10G,MAAK,SAAUgjB,EAAIqzF,GAC7B,OAAOv/G,KAAK+D,IAAIw7G,EAAGl1B,KAAK78E,EAAI03B,EAAOq4E,WAAav9G,KAAK+D,IAAImoB,EAAGm+D,KAAK78E,EAAI03B,EAAOq4E,cAE9E/1G,KAAK01G,aAAeU,GAGlBE,EAAWr/G,SACb+I,KAAK21G,YAAcW,GAGrB,IAAIj7G,EAAU,CACZ27F,MAAOA,EACPof,YAAap2G,KAAK01G,aAClBY,WAAYt2G,KAAK21G,aAEnB31G,KAAKg4G,gBAAgB38G,GAErB2E,KAAK01G,aAAaj4F,SAAQ,SAAU9gB,GAClC,OAAO+gC,EAAOu6E,kBAAkBt7G,MAGlCqD,KAAK21G,YAAYl4F,SAAQ,SAAU9gB,GACjC,OAAO+gC,EAAOw6E,gBAAgBv7G,EAAEkmF,KAAMlmF,EAAEggB,UAG1C65F,EAAa/4F,SAAQ,SAAU9gB,GAC7B,OAAO+gC,EAAOw6E,gBAAgBv7G,EAAEkmF,KAAMlmF,EAAEggB,UAE1C,IAAIkgB,EAAQ78B,KAAK68B,MACbh/B,EAAMmC,KAAKo9B,SAEf,IAAKP,EAAMtkB,QAAsB,cAAK1a,EAAIwgC,YAAcxgC,EAAI0a,QAAwB,eAAE,GACpFy+E,EAAMv5E,SAAQ,SAAU9gB,GACtB,OAAO+gC,EAAOu6E,kBAAkBt7G,UAE7B,CACLqD,KAAKm4G,mBAGL,IAFA,IAAIC,GAAU,EAELrhH,EAAI,EAAGiO,EAAIgyF,EAAM//F,OAAQF,EAAIiO,EAAGjO,IACnCigG,EAAMjgG,GAAG8rF,KAAK78E,IAAMhG,KAAK+1G,UACtBqC,EAIHp4G,KAAKq4G,yBAHLr4G,KAAKs4G,uBACLF,GAAU,GAIHA,GACTp4G,KAAKu4G,uBAGPv4G,KAAKi4G,kBAAkBjhB,EAAMjgG,IAG/BiJ,KAAKw4G,qBAGPx4G,KAAKy4G,cAAcp9G,IAGrBiS,EAAO6qG,iBAAmB,aAE1B7qG,EAAOgrG,qBAAuB,aAE9BhrG,EAAOkrG,mBAAqB,aAE5BlrG,EAAOirG,qBAAuB,aAE9BjrG,EAAO+qG,sBAAwB,aAE/B/qG,EAAO0qG,gBAAkB,aAEzB1qG,EAAOmrG,cAAgB,aAEvBnrG,EAAO4qG,gBAAkB,SAAyBr1B,EAAMlmE,GACtD,GAAKA,EAAL,CAIA,IAAItH,EAASrV,KAAK+2G,YAElB,GAAK1hG,EAAO,IAAOA,EAAO,GAA1B,CAKA,IAAIxX,EAAMmC,KAAKo9B,SAEXtH,EAAQj4B,EAAIgmD,eAAe7jD,KAAK+1G,WAAal4G,EAAIgmD,eAAeg/B,EAAK78E,GAEzEqP,EAAO,IAAMygB,EACbzgB,EAAO,IAAMygB,EAEb+sD,EAAKj1E,MAAMS,KAAKgH,GAEhBwtE,EAAK2V,SAASnqF,KAAKgH,GAEnBrV,KAAKu8F,SAAS1Z,EAAMlmE,GAEpBkmE,EAAKj1E,MAAMK,KAAKoH,GAEhBwtE,EAAK2V,SAASvqF,KAAKoH,GAEnBA,EAAO,IAAMygB,EACbzgB,EAAO,IAAMygB,OAtBX91B,KAAKu8F,SAAS1Z,EAAMlmE,KAyBxBrP,EAAO2qG,kBAAoB,SAA2Bje,GACpDA,EAAK3jE,SAAU,EACfr2B,KAAKw1G,YAAYxb,EAAKnX,KAAKzoF,IAAM4/F,EAEjCh6F,KAAKk4G,gBAAgBle,EAAKnX,KAAMmX,EAAKr9E,OAErC3c,KAAK41G,UAAU1nG,IAAI8rF,EAAKnX,KAAKzoF,GAAI4/F,IAGnC1sF,EAAO2wB,kBAAoB,WACzBj+B,KAAKijC,QAGP31B,EAAO4wB,aAAe,WACpB,IAAIrgC,EAAMmC,KAAKo9B,SAEf,OAAIv/B,EAAIwgC,WACC8nE,EAAgBhuG,UAAU+lC,aAAa5lC,KAAK0H,SAGjDnC,EAAI2gC,eAAgB3gC,EAAI0gC,eAIxB1gC,EAAIygC,aACGt+B,KAAK68B,MAAMtkB,QAA6B,oBAG5C4tF,EAAgBhuG,UAAU+lC,aAAa5lC,KAAK0H,QAGrDsN,EAAO0yB,UAAY,WACjB,OAAO,GAGT1yB,EAAOwpG,cAAgB,WACrB,OAAI92G,KAAKo9B,SAASY,gBACTh+B,KAAK68B,MAAMtkB,QAAmC,0BAGhD,GAGTjL,EAAO84F,WAAa,WAClB,OAAIpmG,KAAKo9B,SAASiB,aACZxhB,SACFA,QAAQC,KAAK,iGAGf9c,KAAK6/B,SACE,IAMXvyB,EAAOuyB,MAAQ,WACb7/B,KAAK83G,cAAa,GAElB93G,KAAK41G,UAAUtgB,QACft1F,KAAKw1G,YAAc,GACnBx1G,KAAKy1G,aAAe,GACpBz1G,KAAK01G,aAAe,GACpB11G,KAAK21G,YAAc,GAEnBxP,EAAgBhuG,UAAU0nC,MAAMvnC,KAAK0H,OAGvCsN,EAAO+pG,eAAiB,SAAwBne,GAC9C,QAASl5F,KAAKy1G,aAAavc,IAG7B5rF,EAAOm0B,WAAa,SAAoBpmC,GACtC,OAAO8qG,EAAgBhuG,UAAUspC,WAAWnpC,KAAK0H,KAAM3E,IAGzDiS,EAAOorG,aAAe,SAAsBr9F,GAC1C,IAAIxd,EAAMmC,KAAKo9B,SAEf,GAAIv/B,EAAIwgC,YAAcxgC,EAAI0a,QAAwB,eAChD,OAAO,EAGT,IAAKvY,KAAK68B,MAAMtkB,QAAqB,YACnC,OAAO,EAGT,IAAIwyD,EAAaltE,EAAIitC,qBACjBjyC,EAAIgF,EAAIqiC,sBAOZ,OANA7kB,EAAIsG,OACJtG,EAAIU,YAAc,mBAClBV,EAAIgG,YACJhG,EAAIzF,KAAK,EAAGpd,KAAKkV,KAAKq9D,EAAWr3C,MAAQ76B,EAAGL,KAAKkV,KAAKq9D,EAAW3tD,YAAcvkB,EAAGL,KAAKkV,KAAKq9D,EAAW1tD,aAAexkB,GACtHwiB,EAAIqF,SACJrF,EAAI0mB,QACG,GAGTz0B,EAAOuqG,cAAgB,SAAuBnB,GAC5C,IAAK,IAAIl7G,KAAKk7G,EACZ,GAAIA,EAAUz+G,eAAeuD,GAAI,CAC/B,IAAIw+F,EAAO0c,EAAUl7G,GACjBm9G,EAAY34G,KAAK44G,SAAS5e,QAEHl+F,IAAvB68G,EAAUE,WACZ74G,KAAKy1G,aAAazb,EAAS,IAAK,CAC9Br9E,MAAOg8F,EACPtiF,SAAS,EACTwsD,KAAMmX,MAOhB1sF,EAAOsrG,SAAW,SAAkB5e,GAClC,IAAI7Z,EAAWngF,KAAK68B,MAAMu5D,cACtBuiB,EAAY,IAAIj8F,MAMpB,OALAi8F,EAAUtyG,MAAQ85E,EAAgB,MAClCw4B,EAAUryG,OAAS65E,EAAiB,OACpCw4B,EAAUp+F,OAASva,KAAK84G,WAAW1yE,KAAKpmC,KAAM24G,EAAW3e,GACzD2e,EAAUv+F,QAAUpa,KAAK+4G,YAAY3yE,KAAKpmC,KAAM24G,EAAW3e,GAC3Dh6F,KAAKg5G,cAAcL,EAAW3e,EAAU,KACjC2e,GAGTrrG,EAAO0rG,cAAgB,SAAuBL,EAAWt/G,GACvD,IAAI8pC,EAAcnjC,KAAK68B,MAAMtkB,QAAqB,YAMlD,OAJKnhB,EAAM+rC,KACTw1E,EAAUx1E,YAAcA,GAGnB5pC,EAAUo/G,EAAW,CAACt/G,KAG/BiU,EAAO2rG,iBAAmB,SAA0BN,GAC7CA,IACLA,EAAUp+F,OAAS2+F,GACnBP,EAAUv+F,QAAU8+F,GACpBP,EAAUzhH,IAAMkI,IAGlBkO,EAAOwrG,WAAa,SAAoBH,EAAWz4B,GACjD,GAAKlgF,KAAK68B,MAAV,CAIA,IAAIziC,EAAK8lF,EAAa,GAEtB,GAAKlgF,KAAKw1G,YAAV,CAIA,IAAIzhG,EAAI,CACNimF,KAAM9Z,EACNy4B,UAAWA,GAEb34G,KAAK68B,MAAM/Q,KAAK,WAAY/X,IAC5B4kG,EAAY5kG,EAAE4kG,WACJE,SAAWliH,WACdqJ,KAAKy1G,aAAar7G,GAEzB4F,KAAKm5G,gBAAgBj5B,EAAUy4B,GAE/B34G,KAAKg9B,iBAGP1vB,EAAOyrG,YAAc,SAAqBJ,EAAWz4B,GACnD,GAAKlgF,KAAK68B,MAAV,CAOA,GAHA87E,EAAUS,YAAcT,EAAUS,aAAe,EAC5Bp5G,KAAK68B,MAAMtkB,QAAwB,eAEnCogG,EAAUS,YAG7B,OAFAT,EAAUS,mBACVT,EAAUzhH,IAAMgpF,EAAS7mF,KAIvBs/G,aAAqBj8F,OACvB1c,KAAKi5G,iBAAiBN,EAAWz4B,GAGnCy4B,EAAUE,SAAW,SACd74G,KAAKy1G,aAAav1B,EAAa,IAEtClgF,KAAKm5G,gBAAgBj5B,EAAUy4B,GAE/B34G,KAAKg9B,cACLh9B,KAAK68B,MAAM/Q,KAAK,YAAa,CAC3BkuE,KAAM9Z,MAIV5yE,EAAOivF,SAAW,SAAkBrc,EAAUy4B,GAC5C,GAAKA,GAAc34G,KAAKo9B,SAAxB,CAIA,IAAIxvB,EAAQsyE,EAAStyE,MACjB8oF,EAAWxW,EAASl6E,EACpBkzF,EAAShZ,EAAS9lF,GAElByD,EAAMmC,KAAKo9B,SACX+iD,EAAWD,EAAShwE,KACpBnK,EAAOlI,EAAI2hC,UACXnkB,EAAMrb,KAAK3E,QACXk3C,EAAK10C,EAAI+hC,uBAAuBhyB,EAAO8oF,EAAU,EAAG0e,IACpDz8E,EAAU96B,EAAIsoC,aACdkzE,EAAc1gF,GAAW5yB,IAAS2wF,EAElCxS,EAAUlkF,KAAKu3G,eAAeoB,GAC9Bp6F,EAAQlD,EAAIqD,YAEZwlE,EAAU,IACZ7oE,EAAIqD,YAAcwlE,EAClBlkF,KAAKg9B,eAGFq8E,GACH9mE,EAAG/kC,SAGL,IAAIxR,EAAIu2C,EAAGv2C,EACPoR,EAAImlC,EAAGnlC,EACPjG,EAAIg5E,EAAS,GACb/4E,EAAI+4E,EAAS,GAEjB,GAAIk5B,EAAa,CAUf,GATAh+F,EAAIsG,OACJtG,EAAIsD,UAAU3iB,EAAGoR,GAEburB,IACFtd,EAAIrL,QAAQ2oB,EAAUngC,KAAKC,GAAK,KAChC0O,GAAK,GACLC,GAAK,IAGHrB,IAAS2wF,EAAU,CACrB,IAAI5gE,EAAQj4B,EAAIgmD,eAAe6yC,GAAY74F,EAAIgmD,iBAE/CxoC,EAAIya,MAAMA,EAAOA,GAGnB95B,EAAIoR,EAAI,EAKV,GAFA2N,GAAO4B,MAAMtB,EAAKs9F,EAAW38G,EAAGoR,EAAGjG,EAAGC,GAElCpH,KAAK68B,MAAMtkB,QAAe,MAAG,CAC/B,IAAIqG,EAAQ5e,KAAK68B,MAAMtkB,QAAsB,aAC7C8C,EAAIsG,OACJtG,EAAIU,YAAc6C,EAClBvD,EAAIG,UAAYoD,EAChBvD,EAAIM,YAAc,GAClBN,EAAIxK,KAAO,iBAEX,IAAIyoG,EAAS,IAAIpqG,GAAMlT,EAAGoR,GAE1B2N,GAAO6L,UAAUvL,EAAKi+F,EAAQ,CAC5BjzG,MAAOc,EACPb,OAAQc,GACP,EAAG,GACN2T,GAAOuF,SAASjF,EAAKrb,KAAKu5G,aAAargB,GAASogB,EAAOrrG,KAAK,GAAI,IAAK2Q,GACrE7D,GAAOoM,UAAU9L,EAAKrf,EAAImL,EAAI,EAAGiG,EAAIhG,EAAI,EAAG,EAAGwX,GAC/CvD,EAAIwG,UAGFw3F,GACFh+F,EAAIwG,UAGFxG,EAAIqD,cAAgBH,IACtBlD,EAAIqD,YAAcH,GAGpBve,KAAK8+B,qBAGPxxB,EAAOisG,aAAe,SAAsBrgB,GAC1C,IAAIsgB,EAAMtgB,EAAOzoF,MAAM,KACnBxZ,EAASuiH,EAAIviH,OACjB,MAAO,KAAOuiH,EAAIviH,EAAS,GAAK,OAASuiH,EAAIviH,EAAS,GAAK,OAASuiH,EAAIviH,EAAS,IAGnFqW,EAAOqqG,gBAAkB,SAAyB90B,GAChD,IAAIhmD,EAAQ78B,KAAKy5G,gBAAgB52B,EAAKhmD,OAEtC,IAAKA,EAAMtkB,QAAoB,WAC7B,MAAO,GAaT,IAVA,IAAI1a,EAAMmC,KAAKo9B,SACXm5B,EAAW,GAEX15D,EAAMgmF,EAAK2V,SAASt7E,SACpBpgB,EAAM+lF,EAAK2V,SAASr7E,SACpBu7E,EAAO77D,EAAM5I,SAASp2B,EAAIqlD,YAAYrmD,EAAKgmF,EAAK78E,EAAGqvG,IAAgBA,IACnE1c,EAAO97D,EAAM5I,SAASp2B,EAAIqlD,YAAYpmD,EAAK+lF,EAAK78E,EAAGsvG,IAAgBA,IAI9Dv+G,EAAI,EAAGA,EAFD,EAEeA,IAC5BiJ,KAAK05G,kBAAkBnjD,EAAUmiC,EAAMC,EAAM97D,EAAOgmD,EAAK78E,EAAIjP,GAG/D,OAAOw/D,GAGTjpD,EAAOosG,kBAAoB,SAA2BnjD,EAAUmiC,EAAMC,EAAM97D,EAAO88E,GACjF,IAAIn0D,EAAa3oB,EAAMtkB,QAAoB,WACvC2lE,EAAUrhD,EAAMqG,QAChBn+B,EAAM83B,EAAMukB,sBAAsB7R,cAAcoqE,EAAYn0D,GAEhE,GAAKzgD,EAaL,IATA,IAOI3K,EAAI4/F,EAPJ4f,EAAO/8E,EAAMw7D,iBAAiBvF,aAAa4F,EAAM3zF,GACjD80G,EAAOh9E,EAAMw7D,iBAAiBvF,aAAa6F,EAAM5zF,GAEjD0xB,EAAKj+B,KAAKqE,IAAI+8G,EAAKh8G,IAAKi8G,EAAKj8G,KAC7Bk8G,EAAKthH,KAAKsE,IAAI88G,EAAKh8G,IAAKi8G,EAAKj8G,KAC7B84B,EAAKl+B,KAAKqE,IAAI+8G,EAAK1mB,IAAK2mB,EAAK3mB,KAC7B6mB,EAAKvhH,KAAKsE,IAAI88G,EAAK1mB,IAAK2mB,EAAK3mB,KAGxBn8F,EAAI0/B,EAAI1/B,EAAI+iH,EAAI/iH,IACvB,IAAK,IAAI6D,EAAK87B,EAAI97B,EAAKm/G,EAAIn/G,IACzBR,EAAKyiC,EAAMs8D,WAAWpiG,EAAG6D,EAAI++G,EAAYn0D,EAAY04B,GAEjDl+E,KAAK41G,UAAUvgB,IAAIj7F,KACrB4/F,EAAOh6F,KAAK41G,UAAUV,aAAa96G,GACnCm8D,EAASz7D,KAAKk/F,GACdh6F,KAAK41G,UAAU1nG,IAAI9T,EAAI4/F,KAM/B1sF,EAAOmqG,gBAAkB,SAAyB50B,GAChD,IAAIhlF,EAAMmC,KAAKo9B,SACXP,EAAQ78B,KAAKy5G,gBAAgB52B,EAAKhmD,OAEtC,IAAKA,EAAMtkB,QAAoB,WAC7B,OAAO,KAWT,IARA,IAAI+/E,EAAKz7D,EAAMukB,sBACXzoD,EAAI2/F,EAAGphD,mBACPsO,EAAa3oB,EAAMtkB,QAAoB,WACvCyhG,EAAWn9E,EAAMtkB,QAA4B,mBAE7CusB,EAAS+9C,EAAK2V,SAASl7E,YACvBsZ,EAAMiG,EAAM5I,SAASp2B,EAAIqlD,YAAYpe,EAAQ+9C,EAAK78E,IAE7Ci0G,EAAO,EAAGA,GAAQD,EAAUC,IAAQ,CAC3C,IAAIj0G,EAAI68E,EAAK78E,EAAIrN,EAAIshH,EACjBl1G,EAAMuzF,EAAG/oD,cAAcvpC,EAAIw/C,GAC/B,GAAKzgD,EAAL,CAEA,IAAIiuF,EAAYn2D,EAAMw7D,iBAAiBvF,aAAal8D,EAAK7xB,GAErD3K,EAAKyiC,EAAMs8D,WAAWnG,EAAUh3F,EAAGg3F,EAAU5lF,EAAGpH,EAAIw/C,EAAYq9B,EAAKhmD,OAEzE,GAAI78B,KAAK41G,UAAUvgB,IAAIj7F,GAAK,CAC1B,IAAI4/F,EAAOh6F,KAAK41G,UAAUV,aAAa96G,GAEvC,OADA4F,KAAK41G,UAAU1nG,IAAI9T,EAAI4/F,GAChBA,IAIX,OAAO,MAGT1sF,EAAOmsG,gBAAkB,SAAyBv7B,GAChD,OAAOl+E,KAAK68B,MAAMo+D,cAAgBj7F,KAAK68B,MAAMo+D,cAAc/c,GAAWl+E,KAAK68B,OAG7EvvB,EAAOgqG,eAAiB,SAAwBpe,GAC9C,IAAIsc,EAAcx1G,KAAKw1G,YACnBlpD,EAAStsD,KAAK41G,UAAUV,aAAahc,GAEzC,GAAI5sC,EAAQ,CACVkpD,EAAYtc,GAAU5sC,EACtB,IAAImpD,EAAez1G,KAAKy1G,aAExB,GAAIA,GAAgBA,EAAavc,GAAS,CACxCuc,EAAavc,GAAQ7iE,SAAU,EAC/B,IAAI6jF,EAAuBzE,EAAavc,GACpCv8E,EAAQu9F,EAAqBv9F,MAC7BkmE,EAAOq3B,EAAqBr3B,KAChC7iF,KAAKi5G,iBAAiBt8F,EAAOkmE,GAC7BhmE,QAAQ1gB,IAAI,yBACLs5G,EAAavc,SAGtB5sC,EAASkpD,EAAYtc,GAGvB,OAAO5sC,GAGTh/C,EAAO6rG,gBAAkB,SAAyBj5B,EAAUy4B,GAC1D34G,KAAKw1G,YAAYt1B,EAAS9lF,IAAM,CAC9BuiB,MAAOg8F,EACPtiF,SAAS,EACTwsD,KAAM3C,IAIV5yE,EAAOiqG,eAAiB,SAAwBoB,GAC9C,OAAK34G,KAAK68B,MAAMtkB,QAAuB,eAAMogG,EAAUE,SAIhDrgH,KAAKqE,IAAI,GAAIlG,IAAQgiH,EAAUE,WAAa,IAAO,GAAK,KAHtD,GAMXvrG,EAAO2xB,SAAW,WAChBj/B,KAAK6/B,eACE7/B,KAAK41G,iBACL51G,KAAKm6G,iBAEZhU,EAAgBhuG,UAAU8mC,SAAS3mC,KAAK0H,OAG1CsN,EAAOspG,WAAa,WAClB,IAAIn6G,EAAI,EACJC,EAAI,EAER,GAAIsD,KAAKy1G,aACP,IAAK,IAAIj6G,KAAKwE,KAAKy1G,aACjBz1G,KAAKy1G,aAAaj6G,GAAG66B,SAAU,EAC/B55B,IAIJ,GAAIuD,KAAKw1G,YACP,IAAK,IAAIhvG,KAAMxG,KAAKw1G,YAClBx1G,KAAKw1G,YAAYhvG,GAAI6vB,SAAU,EAC/B35B,IAIJ,MAAO,CAACD,EAAGC,IAGb4Q,EAAOwqG,aAAe,SAAsBsC,GAC1C,IAAK,IAAIrjH,KAAKiJ,KAAKy1G,aAAc,CAC/B,IAAIzb,EAAOh6F,KAAKy1G,aAAa1+G,IAEzBqjH,GAAUpgB,EAAK3jE,UACb2jE,EAAKr9E,OACP3c,KAAKi5G,iBAAiBjf,EAAKr9E,MAAOq9E,EAAKnX,MAGzC7iF,KAAK61G,WAAW7b,UACTh6F,KAAKy1G,aAAa1+G,IAI7B,IAAK,IAAIs6D,KAAOrxD,KAAKw1G,YAAa,CAChC,IAAI6E,EAAQr6G,KAAKw1G,YAAYnkD,GAExBgpD,EAAMhkF,iBACFr2B,KAAKw1G,YAAYnkD,GAEnBrxD,KAAK41G,UAAUvgB,IAAIhkC,IACtBrxD,KAAK61G,WAAWwE,MAMxB/sG,EAAOuoG,WAAa,SAAoB7b,GACjCA,GAASA,EAAKr9E,QAInBq9E,EAAKr9E,MAAMpC,OAAS,KACpBy/E,EAAKr9E,MAAMvC,QAAU,OAGvB9M,EAAO6pG,qBAAuB,SAA8BnxG,GAC1D,IAAInI,EAAMmC,KAAKo9B,SACX85E,EAAcl3G,KAAK68B,MAAMtkB,QAAqB,YAElD,IAAK2+F,GAAer5G,EAAIwgC,WACtB,OAAO,KAGT,IAAI8hD,EAAWngF,KAAK68B,MAAMu5D,cACtBtgE,EAAQj4B,EAAIgmD,eAAe79C,GAAKnI,EAAIgmD,iBACpC54C,EAASjL,KAAKm6G,iBAAmBn6G,KAAKm6G,kBAAoBp/F,GAAOG,aAAa,EAAG,GAWrF,OATAjQ,EAAO5E,MAAQ85E,EAAS95E,MAAQyvB,EAChC7qB,EAAO3E,OAAS65E,EAAS75E,OAASwvB,EAE9B/9B,EAAWm/G,GACbA,EAAYjsG,GAiBlB,SAA4BA,GAC1B,IAAIoQ,EAAMpQ,EAAOG,WAAW,MACxBkvG,EAAKrvG,EAAO5E,MACZk0G,EAAKtvG,EAAO3E,OACZa,EAAImzG,EAAK,GACTlzG,EAAImzG,EAAK,GACbl/F,EAAIgG,YAEJ,IAAK,IAAItqB,EAAI,EAAGA,EAAI,GAAIA,IACtBskB,EAAIiG,OAAO,EAAGvqB,EAAIqQ,GAClBiU,EAAI8F,OAAOm5F,EAAIvjH,EAAIqQ,GACnBiU,EAAIiG,OAAOvqB,EAAIoQ,EAAG,GAClBkU,EAAI8F,OAAOpqB,EAAIoQ,EAAGozG,GAGpBl/F,EAAIU,YAAc,2BAClBV,EAAIO,UAAY,EAChBP,EAAIqF,SACJrF,EAAIgG,YAGJ,IAFA,IAAI5a,EAAO,CAAC,CAAC,EAAG,GAAI,CAAC6zG,EAAI,GAAI,CAAC,EAAGC,GAAK,CAACD,EAAIC,GAAK,CAAC,EAAG,GAAI,CAAC,EAAGA,GAAK,CAACD,EAAI,GAAI,CAACA,EAAIC,GAAK,CAAC,EAAGA,EAAK,GAAI,CAACD,EAAIC,EAAK,GAAI,CAACD,EAAK,EAAG,GAAI,CAACA,EAAK,EAAGC,IAE5H9K,EAAM,EAAGA,EAAMhpG,EAAKxP,OAAQw4G,GAAO,EAC1Cp0F,EAAIiG,OAAO7a,EAAKgpG,EAAM,GAAG,GAAIhpG,EAAKgpG,EAAM,GAAG,IAC3Cp0F,EAAI8F,OAAO1a,EAAKgpG,GAAK,GAAIhpG,EAAKgpG,GAAK,IAGrCp0F,EAAIO,UAAY,EAChBP,EAAIqF,SA1CA85F,CAAmBvvG,GAGdA,GAGFsqG,EArxBqB,CAsxB5B54E,IAIF,SAASu8E,KACP,OAAO,EAHT/iB,GAAU35D,iBAAiB,SAAU+4E,IAoCrC,IAAIkF,GAAsB,SAAU7T,GAGlC,SAAS6T,IACP,OAAO7T,EAAmBzjG,MAAMnD,KAAMhJ,YAAcgJ,KAHtD2M,GAAe8tG,EAAqB7T,GAMpC,IAAIt5F,EAASmtG,EAAoBtiH,UAsKjC,OApKAmV,EAAO84F,WAAa,WAClB,OAAO,GAGT94F,EAAO4wB,aAAe,WACpB,IAAIrgC,EAAMmC,KAAKo9B,SAEf,SAAIp9B,KAAK06G,OAAU78G,EAAIwgC,aAAcxgC,EAAI0gC,aAAgB1gC,EAAIygC,YAAezgC,EAAI2gC,eAIzEooE,EAAmBzuG,UAAU+lC,aAAa5lC,KAAK0H,OAGxDsN,EAAOivF,SAAW,SAAkBrc,EAAUy4B,GAC5C,IAAI96G,EAAMmC,KAAKo9B,SAEf,GAAK8iD,GAAariF,GAAQ86G,EAA1B,CAIA,IAAI7iF,EAAQoqD,EAASvuC,SAAWuuC,EAASvuC,UAAY9zC,EAAIwyC,WAAW6vC,EAASl6E,GACzEmB,EAAI+4E,EAAShwE,KAAK,GAClB9I,EAAI84E,EAAShwE,KAAK,GAMtB,IAJuB,IAAnBgwE,EAAS5/C,OACXtgC,KAAK26G,cAAchC,EAAWxxG,EAAGC,GAG9BpH,KAAK06G,MAAV,CAMA,IAAI9sG,EAAQsyE,EAAStyE,MACjB5R,EAAI4R,EAAM5R,EAAI85B,EACd1oB,EAAIQ,EAAMR,EAAI0oB,EACdouD,EAAUlkF,KAAKu3G,eAAeoB,GAC9Bna,EAAY,KAEZx+F,KAAK68B,MAAMtkB,QAAe,QAC5BimF,EAAYx+F,KAAKu5G,aAAar5B,EAAS9lF,KAGzC4F,KAAKs9F,YAAYqb,EAAW38G,EAAGoR,EAAGjG,EAAGC,EAAG0uB,EAAOouD,EAASsa,GAEpDta,EAAU,EACZlkF,KAAKg9B,cAELh9B,KAAK8+B,wBApBL8nE,EAAmBzuG,UAAUokG,SAASjkG,KAAK0H,KAAMkgF,EAAUy4B,KAwB/DrrG,EAAO6qG,iBAAmB,WACxB,IAAIhtG,EAAKnL,KAAKmL,GACdA,EAAGyvG,YAAYzvG,EAAG0vG,OAAQ,EAAG,KAC7B1vG,EAAG2vG,UAAU3vG,EAAG4vG,KAAM5vG,EAAG4vG,KAAM5vG,EAAG6vG,UAGpC1tG,EAAOgrG,qBAAuB,WAC5B,IAAIntG,EAAKnL,KAAKmL,GACdA,EAAG2vG,UAAU3vG,EAAG4vG,KAAM5vG,EAAG4vG,KAAM5vG,EAAG4vG,MAClC5vG,EAAGyvG,YAAYzvG,EAAG8vG,MAAO,EAAG,MAG9B3tG,EAAOkrG,mBAAqB,WAC1Bx4G,KAAKu4G,wBAGPjrG,EAAOirG,qBAAuB,WAC5B,IAAIptG,EAAKnL,KAAKmL,GACdA,EAAGyvG,YAAYzvG,EAAG0vG,OAAQ,EAAG,MAG/BvtG,EAAO+qG,sBAAwB,WAC7B,IAAIltG,EAAKnL,KAAKmL,GACdA,EAAGyvG,YAAYzvG,EAAG8vG,MAAO,EAAG,MAG9B3tG,EAAOqtG,cAAgB,SAAuBh+F,EAAOxV,EAAGC,GACjDuV,EAAMmhF,WACTnhF,EAAMmhF,SAAW99F,KAAKk+F,eAAe,EAAG,EAAG/2F,EAAGC,KAIlDkG,EAAO0rG,cAAgB,SAAuBL,EAAWt/G,GACvD,IAAI8pC,EAAcnjC,KAAK68B,MAAMtkB,QAAqB,YAClDogG,EAAUx1E,YAA8B,OAAhBA,EAAuBA,EAAc,GAC7Dw1E,EAAUzhH,IAAMmC,GAIlBiU,EAAOuzB,eAAiB,WACjB7gC,KAAKiL,OAAOE,IAAOnL,KAAKiL,OAAOE,GAAGvO,MACrCoD,KAAKogG,iBAIT9yF,EAAOwzB,cAAgB,WACrB8lE,EAAmBzuG,UAAU2oC,cAAcxoC,KAAK0H,MAEhDA,KAAKsgG,mBAGPhzF,EAAO2zB,aAAe,SAAsBC,GACrClhC,KAAKiL,SAIV27F,EAAmBzuG,UAAU8oC,aAAa3oC,KAAK0H,KAAMkhC,GAErDlhC,KAAKshG,mBAGPh0F,EAAOwyB,YAAc,WACd9/B,KAAKiL,SAIV27F,EAAmBzuG,UAAU2nC,YAAYxnC,KAAK0H,MAE9CA,KAAKwhG,kBAGPl0F,EAAOgyB,eAAiB,WACtB,IAAKt/B,KAAK06G,QAAU16G,KAAKqgG,QACvB,OAAOuG,EAAmBzuG,UAAUmnC,eAAehnC,KAAK0H,MAG1D,IAAIxG,EAAMotG,EAAmBzuG,UAAUmnC,eAAehnC,KAAK0H,MAM3D,OAJIxG,IACFA,EAAImjB,MAAQ3c,KAAKqgG,SAGZ7mG,GAGT8T,EAAOotG,IAAM,WACX,GAAI16G,KAAKiL,OAAOE,IAAMnL,KAAKiL,OAAOE,GAAGvO,KACnC,OAAO,EAGT,IAAIiB,EAAMmC,KAAKo9B,SACf,OAAOv/B,IAAQA,EAAIwgC,YAAcxgC,EAAIsoC,eAAiBnmC,KAAK68B,SAAW78B,KAAK68B,MAAMtkB,QAAwB,gBAG3GjL,EAAOuoG,WAAa,SAAoB7b,GACtC4M,EAAmBzuG,UAAU09G,WAAWv9G,KAAK0H,KAAMg6F,GAE/CA,GAAQA,EAAKr9E,OACf3c,KAAK2hG,aAAa3H,EAAKr9E,cAGlBq9E,EAAKr9E,OAGdrP,EAAO2xB,SAAW,WAChB2nE,EAAmBzuG,UAAU8mC,SAAS3mC,KAAK0H,MAE3CA,KAAKijG,kBAGAwX,EA7KiB,CA8KxBrd,GAAkBmY,KAIpB,SAAS2F,GAAUlhB,GACjB,IAAI7Z,EAAWngF,KAAK68B,MAAMu5D,cACtBj7E,EAAcnb,KAAKiL,OAAOpT,YAC1BgG,EAAMmC,KAAKo9B,SACXvkC,EAAIgF,EAAIqiC,sBACRi7E,EAAapgG,GAAOG,aAAailE,EAAgB,MAAItnF,EAAGsnF,EAAiB,OAAItnF,EAAGsiB,GACpFggG,EAAkB,MAAIn7G,KAAK68B,MAC3B,IAAI98B,EAAKC,KACL+c,EAAS,IAAIkW,GAAOp1B,EAAIwpD,kBAAkB2yC,EAAY,OAAIn8F,EAAIwpD,kBAAkB2yC,EAAY,MAAE9rF,IAAIiyE,EAAShwE,YAAatS,EAAIg5C,iBAiBhI,OAhBA72C,KAAK68B,MAAM0/D,SAAS4e,EAAY,CAC9B,IAAOnhB,EAAU,IACjB,MAASA,EAAY,MACrB,OAAUn8F,EAAIwpD,kBAAkB2yC,EAAY,MAAE9rF,IAAIiyE,EAAgB,MAAI,EAAGA,EAAiB,OAAI,IAC9F,OAAUpjE,EACV,EAAKi9E,EAAQ,EACb,EAAKA,EAAQ,EACb,EAAKA,EAAQ,IACZ,SAAUl7E,GACPA,EACF/e,EAAGg5G,YAAYoC,EAAYnhB,GAI7Bj6F,EAAG+4G,WAAWqC,EAAYnhB,MAErBmhB,EA3BThlB,GAAU35D,iBAAiB,KAAMi+E,IA8BjC,IAAIW,GAAmB,SAAUC,GAG/B,SAAS1+E,IACP,OAAO0+E,EAAsBl4G,MAAMnD,KAAMhJ,YAAcgJ,KASzD,OAZA2M,GAAegwB,EAAgB0+E,GAMlB1+E,EAAexkC,UAErBygH,SAAW,WAChB,OAAOsC,GAAU/3G,MAAMnD,KAAMhJ,YAGxB2lC,EAbc,CAcrB44E,IAEE+F,GAAa,SAAUC,GAGzB,SAASD,IACP,OAAOC,EAAqBp4G,MAAMnD,KAAMhJ,YAAcgJ,KASxD,OAZA2M,GAAe2uG,EAAYC,GAMbD,EAAWnjH,UAEjBygH,SAAW,WACjB,OAAOsC,GAAU/3G,MAAMnD,KAAMhJ,YAGxBskH,EAbQ,CAcfb,IAEFne,GAAgB9/D,iBAAiB,SAAU4+E,IAC3C9e,GAAgB9/D,iBAAiB,KAAM8+E,IAEvC,IAAIE,GAAuB,SAAUrV,GAGnC,SAASqV,IACP,OAAOrV,EAAgBhjG,MAAMnD,KAAMhJ,YAAcgJ,KAHnD2M,GAAe6uG,EAAsBrV,GAMrC,IAAI74F,EAASkuG,EAAqBrjH,UA0GlC,OAxGAmV,EAAOqwB,eAAiB,WACtB,IAAI4X,EAAav1C,KAAKy7G,aAMtB,GAJKz7G,KAAK07G,kBAAqBnmE,IAC7BA,EAAav1C,KAAK68B,MAAMgrC,WAGrB7qE,EAAeu4C,GAClB,MAAO,GAMT,IAHA,IAAIluC,EAAY,GACZi5B,EAAQ,GAEHvpC,EAAIw+C,EAAWt+C,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAC/C,IAEIgO,EAFMwwC,EAAWx+C,GAEPolD,wBAEd,GAAKp3C,EAAI9N,OAIT,GAAK+I,KAAKqH,UAGR,IAAK,IAAIxC,EAAK,EAAGA,EAAKE,EAAI9N,OAAQ4N,IAAM,CACtC,IAAIxL,EAAM0L,EAAIF,GAAI,GAEb7E,KAAKqH,UAAUk5B,iBAAiBx7B,EAAIF,KAASy7B,EAAMjnC,KACtDgO,EAAUvM,KAAKiK,EAAIF,IACnBy7B,EAAMjnC,GAAO,QAPjBgO,EAAUvM,KAAKqI,MAAMkE,EAAWtC,GAepC,OAFA/E,KAAK07G,kBAAmB,SACjB17G,KAAKy7G,aACLp0G,GAGTiG,EAAO2vB,OAAS,WAGd,OAFAj9B,KAAK68B,MAAMssC,kBAEJg9B,EAAgBhuG,UAAU8kC,OAAO95B,MAAMnD,KAAMhJ,YAGtDsW,EAAOquG,kBAAoB,SAA2B52G,GAC/CA,IAIAzJ,MAAMC,QAAQwJ,KACjBA,EAAM,CAACA,IAGJ/E,KAAKy7G,eACRz7G,KAAKy7G,aAAe,IAGtB9gH,EAAOqF,KAAKy7G,aAAc12G,KAG5BuI,EAAO86D,cAAgB,SAAuB7yB,GAC5Cv1C,KAAK27G,kBAAkBpmE,GAEvBuyD,GAAO9nG,OAGTsN,EAAOy7D,iBAAmB,WACxB++B,GAAO9nG,OAGTsN,EAAO68D,uBAAyB,SAAgCp2D,GAC9D/T,KAAK27G,kBAAkB5nG,EAAEqT,QAEzB0gF,GAAO9nG,OAGTsN,EAAO48D,sBAAwB,WAC7B49B,GAAO9nG,OAGTsN,EAAO28D,yBAA2B,WAChC69B,GAAO9nG,OAGTsN,EAAO08D,uBAAyB,WAC9B89B,GAAO9nG,OAGTsN,EAAO88D,eAAiB,WACtB09B,GAAO9nG,OAGTsN,EAAO+8D,eAAiB,WACtBy9B,GAAO9nG,OAGTsN,EAAOg9D,2BAA6B,WAClCw9B,GAAO9nG,OAGFw7G,EAjHkB,CAkHzB7+E,IAEF,SAASmrE,GAAOv6D,GACVA,EAAS1Q,MAAMtkB,QAAuB,eACxCg1B,EAAStQ,SAGXsQ,EAASvQ,cAGX,IAAI4+E,GAAgB,IAAInmF,GAEpBomF,GAAsB,SAAUC,GAGlC,SAASD,IACP,OAAOC,EAAsB34G,MAAMnD,KAAMhJ,YAAcgJ,KAHzD2M,GAAekvG,EAAqBC,GAMpC,IAAIxuG,EAASuuG,EAAoB1jH,UAkMjC,OAhMAmV,EAAOqwB,eAAiB,WACtB,IAAI5N,EAAQ/vB,KAERqH,EAAYy0G,EAAsB3jH,UAAUwlC,eAAex6B,MAAMnD,KAAMhJ,WAEvEqR,EAAQrI,KAAK68B,MAAMosC,WAkBvB,OAhBI5gE,IACG/M,MAAMC,QAAQ8M,KACjBA,EAAQ,CAACA,IAGXA,EAAMoV,SAAQ,SAAU5X,GAGtB,IAFA,IAAId,EAAMgC,GAAqBlB,EAAU,QAAG,GAEnC9O,EAAI,EAAGiO,EAAID,EAAI9N,OAAQF,EAAIiO,EAAGjO,IAChCg5B,EAAM1oB,UAAUk5B,iBAAiBx7B,EAAIhO,KACxCsQ,EAAUvM,KAAKiK,EAAIhO,QAMpBsQ,GAGTiG,EAAO4wB,aAAe,WACpB,IAAIrgC,EAAMmC,KAAKo9B,SAEf,SAAIv/B,EAAImgC,kBAAmBh+B,KAAK68B,MAAMtkB,QAAwB,mBAI1D1a,EAAI0gC,cAAgB1gC,EAAI2gC,eAAiB3gC,EAAIwgC,aAAer+B,KAAKkvC,WAAalvC,KAAK68B,MAAMhlC,cAAgB4yE,KAItGqxC,EAAsB3jH,UAAU+lC,aAAa5lC,KAAK0H,OAG3DsN,EAAO21B,KAAO,WACZ,GAAKjjC,KAAKo9B,SAAV,CAIA,IAAKp9B,KAAK68B,MAAMQ,aAAer9B,KAAK68B,MAAM6C,UAGxC,OAFA1/B,KAAK8/B,mBACL9/B,KAAKiiC,iBAIPjiC,KAAK0b,gBACL1b,KAAK+7G,WACL/7G,KAAKiiC,mBAGP30B,EAAOmyB,QAAU,WACf,QAAKz/B,KAAK3E,UAIF2E,KAAK3E,QAAQ4P,OAAOmT,QAG9B9Q,EAAO2wB,kBAAoB,WACzB,GAAKj+B,KAAKg8G,YAAV,CAIAh8G,KAAKi8G,uBAEL,IAAIp+G,EAAMmC,KAAKo9B,SACXv9B,EAAQG,KAAK68B,MAAMmrC,WACnBjjE,EAAM/E,KAAKo9B,SAASmS,iBAEpB1xC,EAAI0gC,aAAe1gC,EAAI0a,QAAsB,mBAAwBzc,IAAnBkE,KAAKk8G,WAA2Bn3G,EAAuB,IAAjB/E,KAAKk8G,WAAmBl8G,KAAKg8G,YAAY/kH,OAAS4I,GAAShC,EAAIygC,YAAczgC,EAAImgC,mBAC3Kh+B,KAAK2nG,gBACL3nG,KAAKm8G,WAAWn8G,KAAKo8G,SAAUp8G,MAC/BA,KAAKk8G,UAAYn3G,GAGnB,IAAK,IAAIhO,EAAI,EAAGiO,EAAIhF,KAAKg8G,YAAY/kH,OAAQF,EAAIiO,EAAGjO,IAAK,CACvD,IAAI65D,EAAM5wD,KAAKg8G,YAAYjlH,GAEtB65D,EAAIvzB,aAITuzB,EAAIpU,OAAOx8C,KAAKq8G,mBAIpB/uG,EAAOnN,KAAO,WACZH,KAAK68B,MAAMpf,SAAQ,SAAUmzC,GAC3BA,EAAIxY,cAGN0jE,EAAsB3jH,UAAUgI,KAAKgD,MAAMnD,KAAMhJ,YAGnDsW,EAAO6uG,WAAa,SAAoBxiH,EAAI0B,GAC1C2E,KAAK68B,MAAMpf,QAAQ9jB,EAAI0B,IAGzBiS,EAAOyuG,SAAW,WAChB/7G,KAAKk8G,UAAYl8G,KAAKo9B,SAASmS,gBAE/BvvC,KAAKi8G,uBAELj8G,KAAK2nG,gBACL3nG,KAAKm8G,WAAWn8G,KAAKo8G,SAAUp8G,MAE/B,IAAK,IAAIjJ,EAAI,EAAG4E,EAAMqE,KAAKg8G,YAAY/kH,OAAQF,EAAI4E,EAAK5E,IACtDiJ,KAAKg8G,YAAYjlH,GAAGylD,UAIxBlvC,EAAOq6F,cAAgB,WACrB3nG,KAAKkvC,WAAY,EACjBlvC,KAAKg8G,YAAc,IAGrB1uG,EAAO8uG,SAAW,SAAkBxrD,GAClC,GAAKA,GAAQA,EAAIvzB,aAAgBuzB,EAAIxzB,UAAawzB,EAAInoB,YAAemoB,EAAInoB,WAAW6L,iBAApF,CAIA,IAAIjP,EAAUurB,EAAIpb,cAEdjE,EAAWlM,EAAQ7D,YAAYxhC,KAAKqH,UAAWu0G,IAE9CrqE,GAAaA,EAASvd,WAAWh0B,KAAKq8G,kBAIvCh3E,EAAQgK,aACVrvC,KAAKkvC,WAAY,GAGnBlvC,KAAKg8G,YAAYlhH,KAAK81D,MAGxBtjD,EAAO+0B,UAAY,kBACVriC,KAAKm/B,eAEZ28E,EAAsB3jH,UAAUkqC,UAAUl/B,MAAMnD,KAAMhJ,YAGxDsW,EAAO2xB,SAAW,WAChBj/B,KAAKm8G,YAAW,SAAUl6G,GACxBA,EAAEk3C,mBAEGn5C,KAAKg8G,aAGd1uG,EAAOg9D,2BAA6B,SAAoC39C,GAClEA,GACF3sB,KAAK68B,MAAM+rC,eAAej8C,EAAc,QAG1CmvF,EAAsB3jH,UAAUmyE,2BAA2BhyE,KAAK0H,KAAM2sB,IAGxErf,EAAO2uG,qBAAuB,WAC5B,IAAI1qE,EAAWvxC,KAAKm/B,eAEpB,GAAIn/B,KAAKmhC,YAAa,CACpB,IAAKnhC,KAAKmhC,YAAYnN,WAAWud,GAE/B,YADAvxC,KAAKiiC,iBAIPsP,EAAWA,EAAStc,aAAaj1B,KAAKmhC,aAGxCnhC,KAAKq8G,eAAiB9qE,GAGxBjkC,EAAO4iD,SAAW,SAAkBhJ,EAAY3uC,QAC9B,IAAZA,IACFA,EAAU,IAGZ,IAAIg9B,EAAav1C,KAAKg8G,YAEtB,OAAKzmE,EAIEv1C,KAAK68B,MAAM8tC,SAASp1B,EAAY2R,EAAY3uC,GAH1C,IAMJsjG,EAzMiB,CA0MxBL,IAEF/wC,GAAYjuC,iBAAiB,SAAUq/E,IAEvC,IAAIS,GAAc,SAAU1/E,GAG1B,SAAS0/E,EAAYz+G,GACnB,IAAIkyB,EAKJ,OAHAA,EAAQ6M,EAAOtkC,KAAK0H,OAASA,MACvBnC,IAAMA,EACZkyB,EAAMwsF,cAAgB,GACfxsF,EARTpjB,GAAe2vG,EAAa1/E,GAW5B,IAAItvB,EAASgvG,EAAYnkH,UAoGzB,OAlGAmV,EAAOikD,gBAAkB,SAAyB53D,GAChDqG,KAAKu8G,cAAczhH,KAAKnB,IAG1B2T,EAAOkvG,sBAAwB,WAC7B,IAAI1lD,EAAU92D,KAAKu8G,cACnBv8G,KAAKu8G,cAAgB,GAErB,IAAK,IAAIxlH,EAAI,EAAGiO,EAAI8xD,EAAQ7/D,OAAQF,EAAIiO,EAAGjO,IACzC+/D,EAAQ//D,MAIZuW,EAAO09C,eAAiB,SAAwB31C,EAAQ+kG,GACtD,IAAKp6G,KAAKnC,IAAIwiD,QAAQo8D,MACpB,OAAOz8G,KAGT,IAAKo6G,GAAsB,IAAb/kG,EAAOrZ,GAAwB,IAAbqZ,EAAOjI,EACrC,OAAOpN,KAGT,IAAI08G,EAAS18G,KAAKnC,IAAIwiD,QAClBs8D,EAAW38G,KAAK48G,YAAcF,EAAOG,KAAKC,SAASC,kBACnDC,EAAUh9G,KAAKi9G,WAAaP,EAAOD,MAAMK,SAASC,kBAClDG,EAAQl9G,KAAKm9G,SAAWT,EAAOD,MAAMW,MAAML,kBAE/C,GAAIJ,GAAYK,GAAWE,EAAO,CAChC,IAAI7lG,EAAMrX,KAAKnC,IAAImtD,iBAGjB3zC,EADEhC,EACIgC,EAAInJ,IAAImH,GAAQ7H,SAEhB6J,EAAI/a,QAGR0gH,GACF5nG,GAAUsnG,EAAOG,KAAMxlG,IAGrBslG,GAAYO,IACd9nG,GAAUsnG,EAAOD,MAAOplG,GAI5B,OAAOrX,MAGTsN,EAAO+vG,WAAa,WAClB,IAAIX,EAAS18G,KAAKnC,IAAIwiD,QAEtB,IAAKq8D,EAAOD,MACV,OAAO,EAGT,IAAIa,EAAaZ,EAAOG,KAAKC,SAASC,kBAEtC,QAAyBjhH,IAArBkE,KAAK48G,aAA6B58G,KAAK48G,cAAgBU,EACzD,OAAO,EAGT,IAAIC,EAAYb,EAAOD,MAAMK,SAASC,kBAEtC,QAAwBjhH,IAApBkE,KAAKi9G,YAA4Bj9G,KAAKi9G,aAAeM,EACvD,OAAO,EAGT,IAAIC,EAAUd,EAAOD,MAAMW,MAAML,kBAEjC,YAAsBjhH,IAAlBkE,KAAKm9G,UAA0Bn9G,KAAKm9G,WAAaK,GAOvDlwG,EAAOm9C,eAAiB,WACtB,GAAKzqD,KAAKnC,MAIVmC,KAAKnC,IAAIstD,qBAELnrD,KAAKnC,IAAIwiD,QAAQo8D,OAAO,CAC1B,IAAIplG,EAAM,IAAInI,GAAM,EAAG,GACvBkG,GAAUpV,KAAKnC,IAAIwiD,QAAQw8D,KAAMxlG,GACjCjC,GAAUpV,KAAKnC,IAAIwiD,QAAQo8D,MAAOplG,KAItC/J,EAAO+0B,UAAY,WACjBriC,KAAKyqD,kBAGPn9C,EAAOqwC,OAAS,WACd39C,KAAKy9G,cAGAnB,EAhHS,CAiHhB/uF,IAEEmwF,GAAoB,SAAUC,GAGhC,SAASD,EAAkB7/G,GACzB,IAAIkyB,EASJ,OAPAA,EAAQ4tF,EAAarlH,KAAK0H,KAAMnC,IAAQmC,MAClC49G,qBAAuB//G,EAAIsjD,cAAc/1C,WAC/C2kB,EAAM8tF,sBAAwB9tF,EAAM+tF,oBAAoB13E,KAAKp5B,GAAuBA,GAAuB+iB,KAE3GA,EAAMy2C,kBAENz2C,EAAMguF,UAAY,EACXhuF,EAZTpjB,GAAe+wG,EAAmBC,GAelC,IAAIrwG,EAASowG,EAAkBvlH,UA80B/B,OA50BAmV,EAAOowC,KAAO,WACZ19C,KAAKg+G,iBAGP1wG,EAAO2wG,YAAc,SAAqB/gF,GACxC,IAAKl9B,KAAKnC,IACR,OAAO,SAGFmC,KAAKk+G,eACZ,IAAIrgH,EAAMmC,KAAKnC,IAEfA,EAAIq6C,WAAW,cAEfl4C,KAAKm+G,eAEL,IAAI9/D,EAASr+C,KAAKo+G,uBAoBlB,OAlBAp+G,KAAKq+G,WAAWhgE,EAAQnhB,GACVl9B,KAAKs+G,gBAAgBjgE,IAGjCr+C,KAAKu+G,mBAGP1gH,EAAIq6C,WAAW,YAEfl4C,KAAKw+G,cAELx+G,KAAKy+G,SAAWz+G,KAAK0+G,qBACd1+G,KAAK2+G,mBAEZ3+G,KAAK4+G,uBAEL5+G,KAAKw8G,wBACLx8G,KAAK++B,gBAAiB,GACf,GAGTzxB,EAAO6wG,aAAe,WACpB,IAAItgH,EAAMmC,KAAKnC,IAEf,IAAIA,EAAI0gC,YAAR,CAIA,IAAIlpB,EAASxX,EAAIotD,2BAEb51C,EACFxX,EAAImtD,eAAe31C,GACVrV,KAAKq9G,cACdr9G,KAAKgrD,eAAe,MAAM,KAI9B19C,EAAO+wG,WAAa,SAAoBhgE,EAAQnhB,GAY9C,IAXA,IAAIr/B,EAAMmC,KAAKnC,IACXmgC,EAAgBngC,EAAImgC,gBACpB6gF,EAAY,GACZC,EAAa,GACbC,EAAMlhH,EAAI0a,QAA0B,kBAAK,EACzCymG,EAAoB,IAARD,EAAY,EAAI,IAAOA,EACnCE,EAAaj/G,KAAKnC,IAAI0a,QAAuC,8BAC7DvT,EAAIq5C,EAAOpnD,OACXgpD,EAAYpiD,EAAI8nD,eAChBhpD,EAAI,EAEC5F,EAAI,EAAGA,EAAIiO,EAAGjO,IAAK,CAC1B,IAAI8lC,EAAQwhB,EAAOtnD,GAEnB,GAAK8lC,EAAMQ,YAAX,CAIA,IAAI6hF,EAAWriF,EAAMyX,iBAEjB4qE,GACFL,EAAU/jH,KAAK+hC,EAAMqG,SAGvB,IAAIqK,EAAW1Q,EAAM4V,eAErB,GAAKlF,EAAL,CAIA,IAAI4xE,EAAcn/G,KAAKo/G,kBAAkBviF,GAErCqiF,GAAY3xE,EAASvO,oBAClBmgF,GACHL,EAAWhkH,KAAK+hC,EAAMqG,SAGxBljC,KAAKomD,yBAGP,IAAIi5D,EAAkB9xE,EAAS+xE,sBAG/B,UAFO/xE,EAAS+xE,sBAEXH,EAAL,CAaA,GAAInhF,GAAiBkhF,EAAU,CAC7B,GAAID,EAAa,GAAKj6G,EAAI,EAAIjO,EAAIkoH,GAAcpiF,IAAUojB,EAAW,CACnEpjB,EAAM4V,eAAe3S,cAErB,SAGFnjC,GAAKqD,KAAKu/G,8BAA8B1iF,EAAOlgC,EAAGqiH,EAAW9hF,QACpDc,GAAiBuP,EAAStP,mBAC/BsP,EAASpQ,eACXoQ,EAASpQ,gBAGPoQ,EAAShQ,aACXgQ,EAAShQ,aAAagQ,EAAStP,kBAAmBj+B,KAAKw/G,YAAatiF,GAEpEqQ,EAAStP,kBAAkBj+B,KAAKw/G,YAAatiF,KAG/CqQ,EAAStQ,OAAOC,GAEZgiF,GAAYG,GAAmB9xE,EAAS7O,sBAC1C6O,EAAS+xE,sBAAwBD,IAIjCH,IACFJ,EAAWhkH,KAAK+hC,EAAMqG,SACtBljC,KAAKomD,8BAxCD84D,GAAYlhF,IACVngC,EAAI0gC,cAAgB1gC,EAAIwgC,YAC1BkP,EAASpQ,gBACToQ,EAAS+xE,sBAAwBt/G,KAAKy/G,cAC7B5hH,EAAIwgC,YAAcxgC,EAAI2gC,eAC/B+O,EAASzN,iBAuCjB,IAAI4/E,EAAe1/G,KAAK2/G,YAAc,GAClCC,EAAgB5/G,KAAK6/G,aAAe,GAIxC,GAHA7/G,KAAK2/G,WAAad,EAClB7+G,KAAK6/G,YAAcf,GAEd9+G,KAAK8/G,uBAAwB,CAG5BJ,EAAal+G,KAFP,SAEqBq9G,EAAUr9G,KAF/B,QAE4Co+G,EAAcp+G,KAF1D,SAEwEs9G,EAAWt9G,KAFnF,QAGRxB,KAAKomD,0BAKX94C,EAAO8xG,kBAAoB,SAA2BviF,GACpD,GAAI78B,KAAK+/G,4BACP,OAAO,EAGT,IAAIliH,EAAMmC,KAAKnC,IAEX0vC,EAAW1Q,EAAM4V,eAErB,OAAI5V,EAAMyX,iBACD/G,EAASzP,sBAEZyP,EAASrP,eAAgBqP,EAASrP,kBAI/BrgC,EAAImgC,iBAAmBh+B,KAAKo+B,kBAIvC9wB,EAAOiyG,8BAAgC,SAAuC1iF,EAAOlgC,EAAGqiH,EAAW9hF,GACjG,IAAIr/B,EAAMmC,KAAKnC,IACX0vC,EAAW1Q,EAAM4V,eACjButE,EAAWzyE,EAASzK,cACpBm9E,EAAuB,IAAdjB,GAAmBA,EAAY,GAAKriH,EAAIqjH,GAAYhB,EAEjE,GAAIzxE,EAAS1O,yBAA2B0O,EAAS1O,0BAC/C0O,EAAStQ,OAAOC,OACX,IAAIqQ,EAAStP,oBAAsBpB,IAAUh/B,EAAI8nD,gBAAkBs6D,GAAUpiH,EAAI0gC,aAAe1B,EAAMtkB,QAA8B,sBAAK1a,EAAIygC,YAAczB,EAAMtkB,QAA6B,qBAAK1a,EAAI2gC,cAAgB3B,EAAMtkB,QAA+B,uBAUjQ,OATAg1B,EAASpQ,gBACToQ,EAAS7xB,gBAEL6xB,EAAShQ,aACXgQ,EAAShQ,aAAagQ,EAAStP,kBAAmBj+B,KAAKw/G,YAAatiF,GAEpEqQ,EAAStP,kBAAkBj+B,KAAKw/G,YAAatiF,GAGxC8iF,GACEniH,EAAI0gC,aAAgB1gC,EAAIwgC,YAAexgC,EAAI2gC,cAG3C3gC,EAAIwgC,YAAcxgC,EAAI2gC,eAC/B+O,EAASzN,eAHTyN,EAASpQ,gBACToQ,EAAS+xE,sBAAwBt/G,KAAKy/G,aASxC,OAJIlyE,EAAStP,oBAAsBgiF,GACjC1yE,EAAS9O,wBAAwBz+B,KAAKw/G,YAAatiF,GAG9C,GAGT5vB,EAAOsxG,qBAAuB,WAC5B,GAAI5+G,KAAK6/G,aAAe7/G,KAAK6/G,YAAY5oH,OAAS,EAAG,CACnD,IAAI4G,EAAMmC,KAAKnC,IAEfmC,KAAK6/G,YAAYroD,UAAU/5C,SAAQ,SAAUrjB,GAC3C,IAAIyiC,EAAQh/B,EAAI4qC,SAASruC,GAEzB,GAAKyiC,EAAL,CAIA,IAAI0Q,EAAW1Q,EAAM4V,eAEhBlF,GAAaA,EAAS5O,oBAI3B9B,EAAM/Q,KAAK,mBAKjBxe,EAAOwyG,qBAAuB,WAC5B,OAAO9/G,KAAK++B,gBAGdzxB,EAAO84C,sBAAwB,WAC7BpmD,KAAK++B,gBAAiB,GAGxBzxB,EAAOgxG,gBAAkB,SAAyBjgE,GAChD,IAAIxgD,EAAMmC,KAAKnC,IAEf,IAAKA,EACH,OAAO,EAGT,IAAKmC,KAAK8/G,yBAA2B9/G,KAAKo+B,gBACxC,OAAO,EAGJp+B,KAAKiL,QACRjL,KAAKkb,eAGPrd,EAAIq6C,WAAW,cAAe,CAC5B,QAAWl4C,KAAK3E,UAGb2E,KAAKkgH,qBACRlgH,KAAK8/B,cASP,IANA,IAGIqgF,EAHAC,EAAcviH,EAAImgC,gBAClBqiF,EAAQxiH,EAAI0a,QAAuC,8BACnD5c,EAAM0iD,EAAOpnD,OAEbyuG,EAAS,GAEJ3uG,EAAI,EAAGA,EAAI4E,EAAK5E,IAAK,CAC5B,GAAKsnD,EAAOtnD,GAAGsmC,aAAgBghB,EAAOtnD,GAAGu9C,iBAMzC,GAFe+J,EAAOtnD,GAAG07C,eAEzB,CAIA,IAAI6tE,EAAatgH,KAAKugH,eAAeliE,EAAOtnD,IAExCupH,GAAcA,EAAkB,QAC9BjiE,EAAOtnD,KAAO8G,EAAI8nD,eACpBw6D,EAAiB,CAAC9hE,EAAOtnD,GAAIupH,GAE7B5a,EAAO5qG,KAAK,CAACujD,EAAOtnD,GAAIupH,MAK1BH,IACFngH,KAAKwgH,sBAAsBL,EAAe,GAAIA,EAAe,IAE7DngH,KAAKygH,YAGP9kH,EAAM+pG,EAAOzuG,OAGb,IAFA,IAES4N,EAFGu7G,GAAeC,GAAS,GAAK1kH,EAAM0kH,EAAQ1kH,EAAM0kH,EAAQ,EAEhDx7G,EAAKlJ,EAAKkJ,IAC7B7E,KAAKwgH,sBAAsB9a,EAAO7gG,GAAI,GAAI6gG,EAAO7gG,GAAI,IAOvD,OAJAhH,EAAIq6C,WAAW,YAAa,CAC1B,QAAWl4C,KAAK3E,WAGX,GAGTiS,EAAO0vB,YAAc,WAGnB,IAFA,IAAIqhB,EAASr+C,KAAKo+G,uBAETrnH,EAAI,EAAGiO,EAAIq5C,EAAOpnD,OAAQF,EAAIiO,EAAGjO,IAAK,CAC7C,IAAIw2C,EAAW8Q,EAAOtnD,GAAGonC,cAErBoP,GAAYA,EAAStiC,QAAUsiC,EAASvQ,aAC1CuQ,EAASvQ,gBAKf1vB,EAAOs9C,cAAgB,SAAuB16C,GAC5C,GAAKA,IAAQlQ,KAAK49G,mBAAlB,CAIA,IAAIv3G,EAAQ6J,EAAY,MAAI,KACxB5J,EAAS4J,EAAa,OAAI,KAC1BwsG,EAAS18G,KAAKnC,IAAIwiD,QACtBq8D,EAAOlvD,WAAWnlD,MAAMhC,MAAQA,EAChCq2G,EAAOlvD,WAAWnlD,MAAM/B,OAASA,EAEjCtG,KAAKkgH,sBAGP5yG,EAAO27C,aAAe,WACpB,OAAKjpD,KAAKnC,IAINmC,KAAK49G,mBACA59G,KAAKnC,IAAIsjD,cAGdnhD,KAAKnC,IAAIwiD,QACJrgD,KAAKnC,IAAIwiD,QAAQmN,WAGnB,KAXE,MAcXlgD,EAAOm5C,UAAY,SAAmBC,GACpC,OAAK1mD,KAAKiL,OAIHjL,KAAKiL,OAAOw7C,UAAUC,GAHpB,MAMXp5C,EAAOggB,OAAS,WACV5gB,GAAU5B,OAA6B,oBAAbxB,UAC5B4K,GAAe5K,SAAU,mBAAoBtJ,KAAK69G,uBAGhD79G,KAAK0gH,iBACPC,cAAc3gH,KAAK0gH,wBAGd1gH,KAAK3E,eACL2E,KAAKiL,cACLjL,KAAKnC,WACLmC,KAAK2+G,mBAEZ3+G,KAAK4gH,oBAGPtzG,EAAO0yB,UAAY,SAAmBpyB,GACpC,IAAI/P,EAAMmC,KAAKnC,IAEf,GAAKA,GAAQA,EAAI0a,QAAmB,YAAK1a,EAAImgC,gBAA7C,CAUA,IANA,IAAIqgB,EAASxgD,EAAIkoD,aAEbpE,EAAS,UACT0+D,EAAQxiH,EAAI0a,QAAwB,gBAAK,EACzC+hD,EAAU,EAELvjE,EAAIsnD,EAAOpnD,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAC3C,IAAI8lC,EAAQwhB,EAAOtnD,GAEnB,MAAK8lC,EAAMtkB,QAAmB,WAAKskB,EAAM6C,SAAW7C,EAAM6C,WAA1D,CAIA,IAAI6N,EAAW1Q,EAAM4V,eAErB,GAAKlF,GAAaA,EAASvN,aAIvBuN,EAAS9N,UAAW8N,EAAS9N,WAAjC,CAIA,GAAgC,YAA5B5C,EAAMtkB,QAAgB,QAAmBg1B,EAASvN,UAAUpyB,GAAQ,CACtE+zC,EAAS9kB,EAAMtkB,QAAgB,QAAK,UACpC,MAKF,GAFA+hD,IAEI+lD,EAAQ,GAAK/lD,EAAU+lD,EACzB,QAIJxiH,EAAIgkD,cAAcF,KAGpBr0C,EAAOizG,eAAiB,SAAwB1jF,GAC9C,IAAI0Q,EAAW1Q,EAAM4V,eAErB,OAAIlF,EAASjO,eACJiO,EAASjO,iBAGX,MAGThyB,EAAO0wG,cAAgB,WACrB,IAAItB,EAAS18G,KAAKnC,IAAIwiD,QAEtB,SAASwgE,EAAgB3mH,EAAM8Y,EAAW4D,EAASkqG,GACjD,IAAIt9G,EAAIsP,GAAS,MAAOE,GAYxB,OAVI4D,IACFpT,EAAE6E,MAAMuO,QAAUA,GAGpB8lG,EAAOxiH,GAAQsJ,EAEVs9G,GACH/rG,GAAiBvR,GAGZA,EAGT,IAAIknD,EAAe1qD,KAAKnC,IAAIsjD,cAE5B,IAAInhD,KAAK49G,mBAAT,CAIAlzD,EAAal3C,UAAY,GACzB,IAAIutG,EAAY,sCACZvzD,EAAaqzD,EAAgB,aAAc,mBAAoB,sCAAsC,GACrGG,EAAeH,EAAgB,YAAa,sBAAuBE,EAAY,sDAAsD,GACrIE,EAAaJ,EAAgB,aAAc,uBAAwBE,EAAY,cAAc,GAC7FlE,EAAOgE,EAAgB,OAAQ,gBAAiBE,EAAY,cAC5DG,EAAYL,EAAgB,YAAa,sBAAuBE,GAChEI,EAAkBN,EAAgB,kBAAmB,wBAAyBE,EAAY,0BAC1FK,EAAcP,EAAgB,cAAe,wBAAyBE,EAAY,cAAc,GAChGtE,EAAQoE,EAAgB,QAAS,iBAAkBE,EAAY,cAAc,GAC7EM,EAAaR,EAAgB,aAAc,uBAAwBE,EAAY,cAC/EO,EAAKT,EAAgB,KAAM,cAAeE,EAAY,0BAA0B,GAChFvtC,EAAUqtC,EAAgB,UAAW,mBAAoB,aAAa,GAC1En2D,EAAap3C,YAAYk6C,GACzBwzD,EAAa1tG,YAAY2tG,GACzBpE,EAAKvpG,YAAY4tG,GACjBrE,EAAKC,SAAWoE,EAChBF,EAAa1tG,YAAYupG,GACzBmE,EAAa1tG,YAAY6tG,GACzB1E,EAAMnpG,YAAY+tG,GAClB5E,EAAMK,SAAWuE,EACjB5E,EAAMW,MAAQkE,EACdN,EAAa1tG,YAAY8tG,GACzBJ,EAAa1tG,YAAYmpG,GACzBA,EAAMnpG,YAAYguG,GAClB9zD,EAAWl6C,YAAY0tG,GACvBxzD,EAAWl6C,YAAYkgE,GACvBxzE,KAAKkb,eACLlb,KAAKyqD,iBAEL,IAAI4jB,EAAUruE,KAAKnC,IAAIgjD,uBAEvB7gD,KAAK4qD,cAAcyjB,KAGrB/gE,EAAO8wB,cAAgB,WACrB,QAA4BtiC,IAAxBkE,KAAKk+G,eACP,OAAOl+G,KAAKk+G,eAGd,IAAIqD,EAAWvhH,KAAKy+G,SAEhBjgH,EAAOwB,KAAK0+G,cAGhB,OADA1+G,KAAKk+G,gBAAkBqD,IAAaliH,EAAakiH,EAAU/iH,GACpDwB,KAAKk+G,gBAGd5wG,EAAOkxG,YAAc,WACnB,IAAI3gH,EAAMmC,KAAKnC,KAEVA,EAAIs+E,eAAiBt+E,EAAImgC,iBAAmBngC,EAAI4xE,eAIhDpwE,EAAaxB,EAAIqnD,UAAWrnD,EAAIy+E,oBACnCz+E,EAAIs+E,cAAct+E,EAAIqnD,YAI1B53C,EAAOyyG,0BAA4B,WACjC,OAAO//G,KAAK2+G,oBAGdrxG,EAAOoxG,YAAc,WACnB,IAAI7gH,EAAMmC,KAAKnC,IAEXinC,EAASjnC,EAAIylD,gBAEjB,MAAO,CACLtnD,EAAG8oC,EAAO9oC,EACVoR,EAAG03B,EAAO13B,EACVrH,KAAMlI,EAAI2hC,UACV8iB,MAAOzkD,EAAIwgC,WACX1F,QAAS96B,EAAIsoC,aACb9/B,MAAOxI,EAAIwI,MACXC,OAAQzI,EAAIyI,SAIhBgH,EAAOmwG,WAAa,SAAoBvgF,GACtC,IAAIQ,EAAS19B,KAERA,KAAKnC,KAMVmC,KAAKi+G,YAAY/gF,GACjBl9B,KAAKwhH,gBAAkB1oH,GAAiB,SAAUokC,GAChDQ,EAAO+/E,WAAWvgF,OAPlBl9B,KAAK4gH,oBAWTtzG,EAAOszG,iBAAmB,WACpB5gH,KAAKwhH,iBACPzoH,EAAgBiH,KAAKwhH,kBAIzBl0G,EAAOkzG,sBAAwB,SAA+B3jF,EAAOyjF,GACnE,IAAIjlG,EAAMrb,KAAK3E,QACXuS,EAAQ0yG,EAAkB,MAAEhkH,QAC5BykC,EAAM/gC,KAAKnC,IAAIqiC,sBAEP,IAARa,GACFnzB,EAAMc,OAAOqyB,GAGf,IAAI0gF,EAAcnB,EAAkB,MAChCj6G,EAAQo7G,EAAYp7G,MACpBC,EAASm7G,EAAYn7G,OAEzB,KAAIsH,EAAM5R,EAAIqK,GAAS,GAAKuH,EAAMR,EAAI9G,GAAU,GAAhD,CAIA,IAAI7F,EAAKo8B,EAAMtkB,QAAiB,QAMhC,GAJKjhB,EAASmJ,KACZA,EAAK,KAGHA,GAAM,GAAV,CAIA,IAAIihH,EAAQpB,EAAoB,QAMhC,GAJKhpH,EAASoqH,KACZA,EAAQ,KAGNA,GAAS,GAAb,CAIA,IAAInjG,EAAQlD,EAAIqD,YAEZje,EAAK,IACP4a,EAAIqD,aAAeje,GAGjBihH,EAAQ,IACVrmG,EAAIqD,aAAegjG,GAGjB7kF,EAAMtkB,QAAmB,YAC3B8C,EAAI9a,OAASs8B,EAAMtkB,QAAmB,WAGxC,IAAIg1B,EAAW1Q,EAAMsB,cACjBvI,EAAS2X,EAAS+xE,sBAClBpuE,EAAU3D,EAAS9L,WAAWzhC,KAAK3E,SAEnCu6B,IACFva,EAAIsG,OACJtG,EAAI/F,aAAanS,MAAMkY,EAAKua,IAG9Bva,EAAIwD,UAAU4iG,EAAa,EAAG,EAAGp7G,EAAOC,EAAQsH,EAAM5R,EAAG4R,EAAMR,EAAG/G,EAAOC,GAErEsvB,GACFva,EAAIwG,UAGFqvB,GACF71B,EAAIwG,UAGa,SAAfxG,EAAI9a,SACN8a,EAAI9a,OAAS,QAGf8a,EAAIqD,YAAcH,MAGpBjR,EAAOixG,iBAAmB,WACxB,IAAIxzE,EAAQ/qC,KAAKnC,IAAI0a,QAAqB,YAE1C,GAAIwyB,EAAO,CACT,IAAI1vB,EAAMrb,KAAK3E,QACXG,EAAI,IAAI0T,GAAMlP,KAAKiL,OAAO5E,MAAQ,EAAGrG,KAAKiL,OAAO3E,OAAS,GAE1DvO,EAAWgzC,GACbA,EAAM1vB,EAAK7f,GAEXuf,GAAOoM,UAAUnnB,KAAK3E,QAASG,EAAEQ,EAAGR,EAAE4R,EAAG,EAAG,UAKlDE,EAAOq0G,qBAAuB,WAC5B,IAAIC,EAAiB5hH,KAAKnC,IAAI0a,QAAQqpG,eAElCC,EAAM7hH,KAAKnC,IAAIyI,OAAStG,KAAKnC,IAAI2kD,iBAAiBo/D,EAAe,IAEjEE,EAAM9hH,KAAKnC,IAAIyI,OAAStG,KAAKnC,IAAI2kD,iBAAiBo/D,EAAe,IAEjE7kG,EAAS/c,KAAKnC,IAAIitC,qBAClBzvB,EAAMrb,KAAK3E,QACfggB,EAAIgG,YACJhG,EAAIiG,OAAO,EAAGvE,EAAO2W,MACrBrY,EAAI8F,OAAOpE,EAAO0W,KAAM1W,EAAO2W,MAC/BrY,EAAIqF,SACJrF,EAAIgG,YACJhG,EAAIiG,OAAO,EAAGugG,GACdxmG,EAAI8F,OAAOpE,EAAO0W,KAAMouF,GACxBxmG,EAAIqF,SACJrF,EAAIgG,YACJhG,EAAIiG,OAAO,EAAGwgG,GACdzmG,EAAI8F,OAAOpE,EAAO0W,KAAMquF,GACxBzmG,EAAIqF,UAGNpT,EAAOmzG,SAAW,WAChB,IAAI5iH,EAAMmC,KAAKnC,IAEf,KAAIA,EAAIwgC,YAAcxgC,EAAI0a,QAAwB,iBAAM1a,EAAI0a,QAAa,IAAzE,CAIA,IACI1f,EAAIgF,EAAIqiC,sBACR7kB,EAAMrb,KAAK3E,QACX0vE,EAAaltE,EAAIitC,qBACjBv1B,GAAO1X,EAAIyI,OAASzI,EAAI2kD,iBAAiB,KAAO3pD,EAChD0c,EAAM,IAAGA,EAAM,GACnB,IAAI4gC,EAAS40B,EAAWr3C,KAAO76B,EAC3BuO,EAAI5O,KAAKkV,KAAKyoC,EAAS5gC,GACvBqJ,EAAQ/gB,EAAI0a,QAAkB,SAAE/W,OAChCwb,EAAW3B,EAAImC,qBAAqB,EAAGjI,EAAK,EAAG4gC,EAThC,IAUf4rE,EAAY,EAVG,IAUiB36G,EAVjB,IAWnB4V,EAASU,aAAa,EAAG,QAAUkB,EAAQ,QAC3C5B,EAASU,aAAa,GAAK,QAAUkB,EAAQ,UAC7C5B,EAASU,aAAaqkG,EAAW,QAAUnjG,EAAQ,QACnD5B,EAASU,aAAa,EAAG,QAAUkB,EAAQ,QAC3CvD,EAAIgG,YACJhG,EAAIG,UAAYwB,EAChB3B,EAAIgtF,SAAS,EAAG9yF,EAAK/c,KAAKkV,KAAKq9D,EAAW3tD,YAAcvkB,EAAGL,KAAKkV,KAAKtG,EAjBlD,OAoBrBkG,EAAO8wG,qBAAuB,WAC5B,OAAOp+G,KAAKnC,IAAIkoD,cAGlBz4C,EAAOwyB,YAAc,WACd9/B,KAAKiL,QAIV8P,GAAOkD,UAAUje,KAAK3E,QAAS,EAAG,EAAG2E,KAAKiL,OAAO5E,MAAOrG,KAAKiL,OAAO3E,SAGtEgH,EAAO4yG,kBAAoB,WACzB,IAAKlgH,KAAKiL,QAAUjL,KAAK49G,mBACvB,OAAO,EAGT,IAAI//G,EAAMmC,KAAKnC,IACXwwE,EAAUxwE,EAAI+2B,UACd3pB,EAASjL,KAAKiL,OACdpS,EAAIgF,EAAIqiC,sBAEZ,OAAImuC,EAAe,MAAIx1E,IAAMoS,EAAO5E,OAASgoE,EAAgB,OAAIx1E,IAAMoS,EAAO3E,UAI9E2E,EAAO3E,OAASzN,EAAIw1E,EAAgB,OACpCpjE,EAAO5E,MAAQxN,EAAIw1E,EAAe,MAE9BpjE,EAAO5C,QACT4C,EAAO5C,MAAMhC,MAAQgoE,EAAe,MAAI,KACxCpjE,EAAO5C,MAAM/B,OAAS+nE,EAAgB,OAAI,OAGrC,IAGT/gE,EAAO4N,aAAe,WAChBlb,KAAK49G,mBACP59G,KAAKiL,OAASjL,KAAKnC,IAAIsjD,eAEvBnhD,KAAKiL,OAAS6H,GAAS,UAEvB9S,KAAKkgH,oBAELlgH,KAAKnC,IAAIwiD,QAAQ8gE,gBAAgB7tG,YAAYtT,KAAKiL,SAGpDjL,KAAK3E,QAAU2E,KAAKiL,OAAOG,WAAW,OAGxCkC,EAAO00G,WAAa,WACbhiH,KAAKnC,MAAOmC,KAAKnC,IAAImgC,kBAI1BxoB,GAAmBxV,KAAKnC,IAAIsjD,eAC5BnhD,KAAKnC,IAAIoqD,cAGX36C,EAAO20G,sBAAwB,SAA+BriH,GAC5D,IAAI6+C,EAASz+C,KAEb2gH,cAAc3gH,KAAK0gH,iBACnB1gH,KAAKkiH,mBAAqBtiH,EAC1BI,KAAK0gH,gBAAkByB,aAAY,YAC5B1jE,EAAO5gD,KAAO4gD,EAAO5gD,IAAIsrD,YAC5Bw3D,cAAcliE,EAAOiiE,iBAErBjiE,EAAOujE,eAERhiH,KAAKkiH,qBAGV50G,EAAOk5D,gBAAkB,WACvB,IAAIja,EAASvsD,KAETnC,EAAMmC,KAAKnC,IAEXA,EAAI0a,QAAmB,YAAMvf,GAA6B,oBAAXmB,QACjD6F,KAAKiiH,sBAAsBpkH,EAAI0a,QAA2B,mBAGvD7L,GAAU1C,QACbnM,EAAIma,GAAG,aAAchY,KAAKoiH,gBAAiBpiH,MAG7CnC,EAAIma,GAAG,wFAAwF,SAAU2U,GACvG4/B,EAAOizD,YAAc7yF,KAEvB9uB,EAAIma,GAAG,YAAY,SAAU2U,GACtB9uB,EAAIwgC,aACPkuB,EAAOkzD,YAAc9yF,EAAc,OAAa,WAGlD4/B,EAAOizD,YAAc7yF,KAEvB9uB,EAAIma,GAAG,YAAY,SAAU2U,GAC3B4/B,EAAOizD,YAAc7yF,SACd4/B,EAAOkzD,eAEhB5hH,EAAIma,GAAG,2BAA2B,WAChCu0C,EAAOoyD,oBAAqB,KAG1BjyG,GAAU5B,OAA6B,oBAAbxB,UAC5BqK,GAAYrK,SAAU,mBAAoBtJ,KAAK69G,sBAAuB79G,OAI1EsN,EAAO80G,gBAAkB,SAAyBz1F,GAChD,IAAIy/E,EAASpsG,KAETnC,EAAMmC,KAAKnC,KAEXA,EAAImgC,iBAAoBngC,EAAI0a,QAAmB,YAI/CvY,KAAKqiH,iBACPtpH,EAAgBiH,KAAKqiH,iBAGvBriH,KAAKqiH,gBAAkBvpH,GAAiB,WACtCszG,EAAOpsE,UAAUrT,EAAsB,qBAI3Crf,EAAOg1G,iBAAmB,WACxB,OAAOtiH,KAAKnC,IAAIkoD,YAAW,SAAUlpB,GACnC,OAAOA,EAAMyX,qBAIjBhnC,EAAOwwG,oBAAsB,WACM,YAA7Bx0G,SAASi5G,iBAIbviH,KAAKg9B,eAGA0gF,EA91Be,CA+1BtBpB,IAEFx8D,GAAMtjB,iBAAiB,SAAUkhF,IACjC59D,GAAMrxB,aAAa,CACjB,KAAO,EACP,SAAY,CAAC,IAAK,IAAK,OAEzB,IAAI+zF,GAAuBtqH,OAAOmkC,OAAO,CACvCiB,cAAeA,GACfX,eAAgBA,GAChBygE,kBAAmBA,GACnBkf,YAAaA,GACboB,kBAAmBA,GACnBnhF,WAAYA,GACZ2pE,yBAA0BA,GAC1BS,qBAAsBA,GACtB4O,wBAAyBA,GACzBkF,oBAAqBA,GACrBgI,8BAA+BrH,GAC/BsH,0BAA2BpH,GAC3BqH,2BAA4BnH,GAC5BoH,0BAA2B/G,GAC3B/U,oBAAqBA,KAEnB+b,GAAsB,CACxBj8E,iBAAkB,WAChB,MAAO,CAAC,CAAC5mC,KAAKw8D,kBAAkBx8D,KAAKo9B,SAASsJ,cAAe,QAGjEg2B,GAAOluC,QAAQq0F,IACfviD,GAAQ9xC,QAAQq0F,IAChBrjD,GAAOhxC,QAAQq0F,IACfthD,GAAO/yC,QAAQq0F,IACfjiD,GAAUpyC,QAAQ,CAChBoY,iBAAkB,SAA0BI,GAC1C,IAAInpC,EAAMmC,KAAKo9B,SAEf,GAAkB,WAAd4J,EAAwB,CAK1B,IAJA,IAAIm0B,EAAQn7D,KAAK67D,UAAU77D,KAAK4xC,YAE5BhxB,EAAS,GAEJ7pB,EAAI,EAAG4E,EAAMw/D,EAAMlkE,OAAQF,EAAI4E,EAAK5E,IAC3C6pB,EAAO9lB,KAAK+C,EAAIopD,aAAakU,EAAMpkE,GAAI8G,EAAI6oC,cAG7C,MAAO,CAAC9lB,EAAQ,MAGhB,MAAO,CAAC,CADA/iB,EAAIopD,aAAajnD,KAAKsd,YAAazf,EAAI6oC,cAClC,SAInB,IAAIo8E,GAAe,CACjBl8E,iBAAkB,SAA0BI,GAC1C,IAEIpmB,EAFA/iB,EAAMmC,KAAKo9B,SACXqJ,EAAS5oC,EAAI6oC,YAEbmB,EAAY,KAEhB,GAAkB,UAAdb,GACFpmB,EAAS5gB,KAAKu6D,iBAAiBv6D,KAAK+6D,sBAAsB,EAAOt0B,KAEnD7lB,EAAO3pB,OAAS,GAAKqE,MAAMC,QAAQqlB,EAAO,MACtDA,EAASA,EAAO,GAAGtqB,OAAOsqB,EAAO,UAE9B,GAAkB,WAAdomB,EAIT,GAFAa,EAAY,IADZjnB,EAAS5gB,KAAKu6D,iBAAiBv6D,KAAK+6D,sBAAsB,EAAOt0B,KAGnD7lB,EAAO3pB,OAAS,GAAKqE,MAAMC,QAAQqlB,EAAO,IAAK,CAC3D,IAAK,IAAI7pB,EAAI,EAAGiO,EAAI4b,EAAO3pB,OAAQF,EAAIiO,EAAGjO,IACxC,IAAK,IAAI6D,EAAK,EAAGC,EAAK+lB,EAAO7pB,GAAGE,OAAQ2D,EAAKC,EAAID,IACpC,IAAPA,EACFitC,EAAU/sC,KAAK,CAAC8lB,EAAO7pB,GAAG6D,GAAKgmB,EAAO7pB,GAAG6D,EAAK,KAE9CitC,EAAU/sC,KAAK,CAAC8lB,EAAO7pB,GAAG6D,EAAK,GAAIgmB,EAAO7pB,GAAG6D,KAKnDgmB,EAASA,EAAO,GAAGtqB,OAAOsqB,EAAO,SAEjC,IAAK,IAAI/b,EAAK,EAAG2hD,EAAK5lC,EAAO3pB,OAAQ4N,EAAK2hD,EAAI3hD,IACjC,IAAPA,EACFgjC,EAAU/sC,KAAK,CAAC8lB,EAAO/b,GAAK+b,EAAO/b,EAAK,KAExCgjC,EAAU/sC,KAAK,CAAC8lB,EAAO/b,EAAK,GAAI+b,EAAO/b,UAIxC,GAAkB,SAAdmiC,EAAsB,CAC/BpmB,EAAS,GACTinB,EAAY,GAEZ,IAAImnE,EAAUhvG,KAAKu6D,iBAAiBv6D,KAAK+6D,sBAAsB,EAAOt0B,GAGtE,GAFiBuoE,EAAQ/3G,OAAS,GAAKqE,MAAMC,QAAQyzG,EAAQ,IAK3D,IAFA,IAAIxsF,EAEK6uC,EAAM,EAAG0xD,EAAM/T,EAAQ/3G,OAAQo6D,EAAM0xD,EAAK1xD,IAAO,CACxD7uC,EAAOwsF,EAAQ39C,GAEXrxD,gBAAgB04D,IAAWl2C,EAAKvrB,OAAS,IAAMurB,EAAK,GAAG3T,OAAO2T,EAAKA,EAAKvrB,OAAS,KACnFurB,EAAK1nB,KAAK0nB,EAAK,IAGjB,IAAK,IAAIwgG,EAAM,EAAGC,EAAMzgG,EAAKvrB,OAAQ+rH,EAAMC,EAAKD,IAC9CpiG,EAAO9lB,KAAK0nB,EAAKwgG,GAAK90G,IAAIsU,EAAKwgG,EAAM,IAAIt0G,OAAO,KAChDm5B,EAAU/sC,KAAK,CAAC0nB,EAAKwgG,EAAM,GAAIxgG,EAAKwgG,SAGnC,CACDhjH,gBAAgB04D,IAAWs2C,EAAQ/3G,OAAS,IAAM+3G,EAAQ,GAAGngG,OAAOmgG,EAAQA,EAAQ/3G,OAAS,KAC/F+3G,EAAQl0G,KAAKk0G,EAAQ,IAGvB,IAAK,IAAIS,EAAM,EAAGyT,EAAMlU,EAAQ/3G,OAAQw4G,EAAMyT,EAAKzT,IACjD7uF,EAAO9lB,KAAKk0G,EAAQS,GAAKvhG,IAAI8gG,EAAQS,EAAM,IAAI/gG,OAAO,KACtDm5B,EAAU/sC,KAAK,CAACk0G,EAAQS,EAAM,GAAIT,EAAQS,WAGzC,GAAkB,iBAAdzoE,EAA8B,CACvC,IAAI9Q,EAASl2B,KAAK+6D,qBAElBn6C,EAASsV,EAAOj/B,OAAS,CAAC4G,EAAIquC,YAAYhW,EAAO,GAAIuQ,IAAW,GAChEoB,EAAY3R,EAAOj/B,OAAS,CAAC,CAAC4G,EAAIquC,YAAYhW,EAAO,GAAIuQ,GAAS5oC,EAAIquC,YAAYhW,EAAO,GAAIuQ,KAAY,QACpG,GAAkB,gBAAdO,EAA6B,CACtC,IAAIm8E,EAAUnjH,KAAK+6D,qBAEfqoD,EAAMD,EAAQlsH,OAClB2pB,EAASwiG,EAAM,CAACvlH,EAAIquC,YAAYi3E,EAAQC,EAAM,GAAI38E,IAAW,GAC7D,IAAIpQ,EAAU+sF,EAAM,EAChB7B,EAAW6B,EAAM,EAAIA,EAAM,EAAIA,EAAM,EACzCv7E,EAAYu7E,EAAM,CAAC,CAACvlH,EAAIquC,YAAYi3E,EAAQ5B,GAAW96E,GAAS5oC,EAAIquC,YAAYi3E,EAAQ9sF,GAAUoQ,KAAY,OACzG,CACL,IAAIwb,EAAUjiD,KAAKg1C,iBAAiBrgB,QAAQ30B,KAAKsd,aAEjDsD,EAAS,CAAC/iB,EAAIquC,YAAY+V,EAASxb,IAGrC,MAAO,CAAC7lB,EAAQinB,KAGpBk1B,GAAWvuC,QAAQs0F,IACnBpqD,GAAQlqC,QAAQs0F,IAChB3rE,GAAS3oB,QAAQ,CACfwhB,iBAAkB,WAChB,OAAO,GAETE,kBAAmB,WACjB,OAAO,KAGX,IAAIj9B,GAAK,CACP+8B,iBAAkB,WAChB,OAAO,GAETE,kBAAmB,WACjB,OAAOlwC,gBAAgBsgE,IAAWtgE,gBAAgBuhE,IAEpD3xB,aAAc,WACZ,IAAI/xC,EAAMmC,KAAKo9B,SAEf,OADep9B,KAAKixC,cACF,GAAKpzC,EAAIwgC,YAAcr+B,gBAAgBsgE,IAAWziE,EAAIsoC,cAE1EsF,gBAAiB,WACf,IAAI5tC,EAAMmC,KAAKo9B,SAEf,GAAIp9B,KAAK4vC,eACP,OAAO8oB,GAAQvgE,UAAUszC,gBAAgBnzC,KAAK0H,MAAM,GAGtD,IAAIiiD,EAAUjiD,KAAK+6D,qBAEf/7C,EAAKnhB,EAAIquC,YAAY+V,EAASpkD,EAAI6oC,aAElCx2B,EAAOlQ,KAAKqjH,eAAerkG,GAE/B,MAAO,CAACA,GAAI1oB,OAAO4Z,IAErB27B,SAAU,WACR,OAAI7rC,KAAK4vC,eACA70B,GAAOgH,QAAQ5e,MAAM4X,GAAQ/jB,WAE7B+jB,GAAOsL,QAAQljB,MAAM4X,GAAQ/jB,YAGxCqsH,eAAgB,SAAwBrkG,GACtC,IAAInhB,EAAMmC,KAAKo9B,SACXp3B,EAAInI,EAAI6oC,YAER48E,EAAYtjH,KAAK+rC,gBAEjB2sD,EAAO76F,EAAIquC,YAAYo3E,EAAUpmG,SAAUlX,GAC3C2yF,EAAO96F,EAAIquC,YAAYo3E,EAAUnmG,SAAUnX,GAE/C,MAAO,CAACxN,KAAK+D,IAAIo8F,EAAK38F,EAAI08F,EAAK18F,GAAK,EAAGxD,KAAK+D,IAAIo8F,EAAKvrF,EAAI4R,EAAG5R,GAAI5U,KAAK+D,IAAIyiB,EAAG5R,EAAIsrF,EAAKtrF,MAGzFkzD,GAAQ9xC,QAAQvb,IAChBusD,GAAOhxC,QAAQvb,IACf2tD,GAAUpyC,QAAQ,CAChBid,gBAAiB,WACf,IACI83E,EADMvjH,KAAKo9B,SACKsJ,YAEhBy0B,EAAQn7D,KAAKq8D,eAIjB,MAAO,CAFMr8D,KAAKu6D,iBAAiBY,GAAO,EAAOooD,KAInD13E,SAAU9wB,GAAOgH,UAEnBw/C,GAAO/yC,QAAQvb,GAAI,CACjB+8B,iBAAkB,WAChB,OAAO,GAETvE,gBAAiB,WACf,GAAIzrC,KAAK4vC,eACP,OAAO8oB,GAAQvgE,UAAUszC,gBAAgBnzC,KAAK0H,MAAM,GAGtD,IAAInC,EAAMmC,KAAKo9B,SAEXpe,EAAKnhB,EAAIquC,YAAYlsC,KAAK+6D,qBAAsBl9D,EAAI6oC,aAIxD,MAAO,CAAC1nB,EAFGhf,KAAKqjH,eAAerkG,GAEd,GAAI,CAAChf,KAAKyhE,gBAAiBzhE,KAAK2hE,iBAEnD91B,SAAU,WACR,GAAI7rC,KAAK4vC,eACP,OAAO70B,GAAOgH,QAAQ5e,MAAM4X,GAAQ/jB,WAEpC,IAAI6B,EAAImH,KAAKo9B,SAAS+I,aAClBh+B,EAAOnR,UAQX,OANI6B,IACFsP,EAAK,GAAKA,EAAK,GAAG7O,MAAM,GACxB6O,EAAK,GAAG,IAAMtP,EACdsP,EAAK,GAAG,IAAMtP,GAGTkiB,GAAO8L,OAAO1jB,MAAM4X,GAAQ5S,MAIzCowD,GAAK/pC,QAAQ,CACXohB,aAAc,WACZ,OAAO,KAGXmtB,GAAWvuC,QAAQ,CACjBg1F,YAAa,CACX,QAAW,CAAC,EAAG,IAEjB3gD,eAAgB,SAAwB4gD,EAAU71G,EAAOgO,EAAW+mD,EAAY39B,GAC9E,IAAKy+E,IAAa71G,GAAS61G,EAAS50G,OAAOjB,GACzC,OAAO,KAGJo3B,IACHA,EAAY,GAGd,IAGI0+E,EAHAr9G,EAAQuV,EAAY+mD,EAAW,GAC/Br8D,EAASsV,EAAY+mD,EAAW,GAAK39B,EACrC0F,EAAKrkC,EAAQ,EAAI2+B,GAKjB0+E,EAFA91G,EAAM0V,eAAiB1V,EAAMyV,cAC3BzV,EAAMyV,cACCzV,EAAMW,IAAI,IAAIW,GAAMtB,EAAMyV,gBAE1BzV,EAAMW,IAAI,IAAIW,GAAMtB,EAAM0V,gBAG5B1V,EAAMW,IAAIk1G,IAGdl0G,QAEP,IAAIiS,EAAK5T,EAAMW,IAAIm1G,EAAOj1G,MAAMnI,IAEhCo9G,EAAOj0G,QAEP,IAAIq4B,EAAKtmB,EAAGtT,IAAIw1G,EAAOj1G,MAAMi8B,IAK7B,OAHAg5E,EAAOh1G,QAAQ,GAGR,CAACo5B,EAAIl6B,EADH4T,EAAGtT,IAAIw1G,EAAOj1G,MAAMi8B,IACN5C,IAEzB2D,gBAAiB,WACf,IAAIk4E,EAAc3jH,KAAK+6D,qBAIvB,MAAO,CAFM/6D,KAAKu6D,iBAAiBopD,GAAa,EAAO3jH,KAAKo9B,SAASsJ,eAIvEmF,SAAU,SAAkBxwB,EAAKuF,EAAQE,EAAaxC,EAAaslG,GAC7D5jH,KAAKuY,QAAoB,WAC3BwC,GAAOuH,gBAAgBjH,EAAKuF,EAAQE,EAAa9gB,KAAKuY,QAAoB,YAAG,EAAOvY,KAAK64D,SAAU74D,KAAKs5D,gBAExGv+C,GAAOtU,KAAK4U,EAAKuF,EAAQE,EAAa,KAAM8iG,GAG9C5jH,KAAKijE,YAAY5nD,EAAKuF,EAAQE,IAEhC+iG,mBAAoB,WAClB,OAAO7jH,KAAKuY,QAAwB,gBAEtCsyD,eAAgB,WACd,IAAIlI,EAAa3iE,KAAKuY,QAAoB,WAE1C,OAAIoqD,EACKrnE,MAAMC,QAAQonE,GAAcA,EAAa3iE,KAAKwjH,YAAY7gD,GAG5D,MAETmhD,WAAY,SAAoBljG,EAAQhF,EAAWopB,GACjD,IAAI29B,EAAa3iE,KAAK6qE,iBAEtB,IAAKlI,GAAc/hD,EAAO3pB,OAAS,EACjC,MAAO,GAaT,IAVA,IACIyrE,EADa9hD,EAAO3pB,OAAS,GAAKqE,MAAMC,QAAQqlB,EAAO,IAC/BA,EAAS,CAACA,GAElComB,EAAYhnC,KAAK6jH,qBAEjBphD,EAAS,GACT5kE,EAAMmC,KAAKo9B,SACXqY,EAAQ53C,EAAIm7C,sBAAsBh5C,KAAKy3C,sBACvCqgB,EAAOj6D,EAAIm7C,sBAAsBh5C,KAAK23C,qBAEjC5gD,EAAI2rE,EAASzrE,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAC7C,GAAkB,iBAAdiwC,GAA8C,qBAAdA,GAAoC07B,EAAS3rE,GAAG,GAAGqY,QAAQqmC,EAAO,KAAO,CAC3G,IAAImtB,EAAQ5iE,KAAK6iE,eAAeH,EAAS3rE,GAAG,GAAI2rE,EAAS3rE,GAAG,GAAI6kB,EAAW+mD,EAAY39B,GAEnF49B,GACFH,EAAO3nE,KAAK8nE,GAIhB,GAAkB,gBAAd57B,GAA6C,qBAAdA,GAAoC07B,EAAS3rE,GAAG2rE,EAAS3rE,GAAGE,OAAS,GAAGmY,QAAQ0oD,EAAM,KAAO,CAC9H,IAAIgL,EAAS9iE,KAAK6iE,eAAeH,EAAS3rE,GAAG2rE,EAAS3rE,GAAGE,OAAS,GAAIyrE,EAAS3rE,GAAG2rE,EAAS3rE,GAAGE,OAAS,GAAI2kB,EAAW+mD,EAAY39B,GAE9H89B,GACFL,EAAO3nE,KAAKgoE,OAES,UAAd97B,GACThnC,KAAKojE,gBAAgBX,EAAQC,EAAS3rE,GAAI6kB,EAAW+mD,EAAY39B,GAIrE,OAAOy9B,GAETW,gBAAiB,SAAyBX,EAAQC,EAAU9mD,EAAW+mD,EAAY39B,GACjF,IAAK,IAAIpqC,EAAK,EAAGC,EAAK6nE,EAASzrE,OAAS,EAAG2D,EAAKC,EAAID,IAAM,CACxD,IAAIgoE,EAAQ5iE,KAAK6iE,eAAeH,EAAS9nE,GAAK8nE,EAAS9nE,EAAK,GAAIghB,EAAW+mD,EAAY39B,GAEnF49B,GACFH,EAAO3nE,KAAK8nE,KAIlBK,YAAa,SAAqB5nD,EAAKuF,EAAQE,GAC7C,IAAIlF,EAAY5b,KAAKwyC,qBAAgC,YAEhDl7C,EAASskB,IAAcA,EAAY,KACtCA,EAAY,GAGd,IAAI6mD,EAASziE,KAAK8jH,WAAWljG,EAAQhF,GAErC,GAAK6mD,EAAOxrE,OAAZ,CAIIokB,EAAIgB,aACNhB,EAAIgB,YAAY,IAGlB,IAAK,IAAItlB,EAAI0rE,EAAOxrE,OAAS,EAAGF,GAAK,EAAGA,IACtCskB,EAAIG,UAAYH,EAAIU,YACpBhB,GAAOgH,QAAQ1G,EAAKonD,EAAO1rE,GAAI+pB,EAAaA,OAIlD43C,GAAQlqC,QAAQ,CACdid,gBAAiB,SAAyB+uB,GACxC,IAAIxyB,EAAUhoC,KAAKo9B,SAASsJ,YAExBi9E,EAAc3jH,KAAKq8D,eAEnBz7C,EAAS5gB,KAAKu6D,iBAAiBopD,EAAanpD,EAAiBxyB,GAE7D+7E,EAAanjG,EAAO3pB,OAAS,GAAKqE,MAAMC,QAAQqlB,EAAO,IAEvDmjG,IACFnjG,EAAS,CAAC,CAACA,EAAO,IAAK,CAACA,EAAO,MAGjC,IAAIojG,EAAWhkH,KAAKu7D,eAEhB0oD,EAAa,GAEjB,GAAID,GAAYA,EAAS/sH,OAAS,EAAG,CAGnC,IAFA,IAAI8gE,EAAa/3D,KAAKmwC,YAEbp5C,EAAI,EAAGA,EAAIitH,EAAS/sH,OAAQF,IAAK,CACxC,IAAImtH,EAAOlkH,KAAKu6D,iBAAiBypD,EAASjtH,GAAIyjE,EAAiBxyB,GAE3D1sC,MAAMC,QAAQ2oH,IAASH,EACrBzoH,MAAMC,QAAQ2oH,EAAK,KACrBtjG,EAAO,GAAG9lB,KAAKopH,EAAK,IACpBtjG,EAAO,GAAG9lB,KAAKopH,EAAK,KAEpBtjG,EAAO,GAAG9lB,KAAKopH,GAGjBD,EAAWnpH,KAAKopH,GAIhBnsD,IACF/3D,KAAKmwC,YAAc4nB,GASvB,OALKgsD,GAEHppH,EADAimB,EAAS,CAACA,GACKqjG,GAGV,CAACrjG,IAEVirB,SAAU,SAAkBxwB,EAAKuF,EAAQE,EAAaxC,EAAaslG,GACjE7oG,GAAOgH,QAAQ1G,EAAKuF,EAAQE,EAAaxC,EAAaslG,EAAW5jH,KAAKuY,QAAoB,eAG9FunC,GAAMI,QA15gCQ,W","file":"7eba917a-738527fb7aac623c7a49.js","sourcesContent":["import \"core-js/modules/es.math.hypot\";\n\n/*!\n * maptalks v0.49.1\n * LICENSE : BSD-3-Clause\n * (c) 2016-2020 maptalks.org\n */\nvar version = \"0.49.1\";\nvar INTERNAL_LAYER_PREFIX = '_maptalks__internal_layer_';\nvar GEOMETRY_COLLECTION_TYPES = ['MultiPoint', 'MultiLineString', 'MultiPolygon', 'GeometryCollection'];\nvar GEOJSON_TYPES = ['FeatureCollection', 'Feature', 'Point', 'LineString', 'Polygon'].concat(GEOMETRY_COLLECTION_TYPES);\nvar RESOURCE_PROPERTIES = ['markerFile', 'polygonPatternFile', 'linePatternFile', 'markerFillPatternFile', 'markerLinePatternFile'];\nvar RESOURCE_SIZE_PROPERTIES = [['markerWidth', 'markerHeight'], [], [null, 'lineWidth'], [], [null, 'markerLineWidth']];\nvar NUMERICAL_PROPERTIES = {\n  'lineWidth': 1,\n  'lineOpacity': 1,\n  'lineDx': 1,\n  'lineDy': 1,\n  'polygonOpacity': 1,\n  'markerWidth': 1,\n  'markerHeight': 1,\n  'markerDx': 1,\n  'markerDy': 1,\n  'markerOpacity': 1,\n  'markerFillOpacity': 1,\n  'markerLineWidth': 1,\n  'markerLineOpacity': 1,\n  'textSize': 1,\n  'textOpacity': 1,\n  'textHaloRadius': 1,\n  'textWrapWidth': 1,\n  'textLineSpacing': 1,\n  'textDx': 1,\n  'textDy': 1\n};\nvar COLOR_PROPERTIES = ['lineColor', 'polygonFill', 'markerFill', 'markerLineColor', 'textFill'];\nvar DEFAULT_TEXT_SIZE = 14;\n\nfunction now() {\n  return Date.now();\n}\n\nfunction extend(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n\n    for (var k in src) {\n      dest[k] = src[k];\n    }\n  }\n\n  return dest;\n}\n\nfunction isNil(obj) {\n  return obj == null;\n}\n\nfunction isNumber(val) {\n  return typeof val === 'number' && !isNaN(val);\n}\n\nfunction isInteger(n) {\n  return (n | 0) === n;\n}\n\nfunction isObject(obj) {\n  return typeof obj === 'object' && !!obj;\n}\n\nfunction isString(obj) {\n  if (isNil(obj)) {\n    return false;\n  }\n\n  return typeof obj === 'string' || obj.constructor !== null && obj.constructor === String;\n}\n\nfunction isFunction(obj) {\n  if (isNil(obj)) {\n    return false;\n  }\n\n  return typeof obj === 'function' || obj.constructor !== null && obj.constructor === Function;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction hasOwn(obj, key) {\n  return hasOwnProperty.call(obj, key);\n}\n\nfunction join(arr, seperator) {\n  if (arr.join) {\n    return arr.join(seperator || ',');\n  } else {\n    return Array.prototype.join.call(arr, seperator || ',');\n  }\n}\n\nfunction isEmpty(object) {\n  var property;\n\n  for (property in object) {\n    return false;\n  }\n\n  return !property;\n}\n\nvar pi = Math.PI / 180;\n\nfunction toRadian(d) {\n  return d * pi;\n}\n\nfunction toDegree(r) {\n  return r / pi;\n}\n\nvar IS_NODE = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]' && !process.versions['electron'] && !process.versions['nw'] && !process.versions['node-webkit'];\nvar requestAnimFrame, cancelAnimFrame;\n\n(function () {\n  if (IS_NODE) {\n    requestAnimFrame = function requestAnimFrame(fn) {\n      return setTimeout(fn, 16);\n    };\n\n    cancelAnimFrame = clearTimeout;\n    return;\n  }\n\n  var requestFn, cancelFn;\n  var timeToCall = 1000 / 30;\n\n  function timeoutDefer(fn) {\n    return setTimeout(fn, timeToCall);\n  }\n\n  function getPrefixed(name) {\n    return window['webkit' + name] || window['moz' + name] || window['ms' + name];\n  }\n\n  if (typeof window != 'undefined') {\n    requestFn = window['requestAnimationFrame'] || getPrefixed('RequestAnimationFrame') || timeoutDefer;\n\n    cancelFn = window['cancelAnimationFrame'] || getPrefixed('CancelAnimationFrame') || getPrefixed('CancelRequestAnimationFrame') || function (id) {\n      window.clearTimeout(id);\n    };\n  } else {\n    requestFn = timeoutDefer;\n    cancelFn = clearTimeout;\n  }\n\n  requestAnimFrame = function requestAnimFrame(fn) {\n    return requestFn(fn);\n  };\n\n  cancelAnimFrame = function cancelAnimFrame(id) {\n    if (id) {\n      cancelFn(id);\n    }\n  };\n})();\n\nfunction isSVG(url) {\n  var prefix = 'data:image/svg+xml';\n\n  if (url.length > 4 && url.slice(-4) === '.svg') {\n    return 1;\n  } else if (url.slice(0, prefix.length) === prefix) {\n    return 2;\n  }\n\n  return 0;\n}\n\nfunction loadImage(img, imgDesc) {\n  if (IS_NODE && loadImage.node) {\n    loadImage.node(img, imgDesc);\n    return;\n  }\n\n  img.src = imgDesc[0];\n}\n\nvar uid = 0;\n\nfunction UID() {\n  return uid++;\n}\n\nvar GUID = UID;\n\nfunction parseJSON(str) {\n  if (!str || !isString(str)) {\n    return str;\n  }\n\n  return JSON.parse(str);\n}\n\nfunction pushIn(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n\n    if (src) {\n      for (var ii = 0, ll = src.length; ii < ll; ii++) {\n        dest.push(src[ii]);\n      }\n    }\n  }\n\n  return dest.length;\n}\n\nfunction removeFromArray(obj, array) {\n  var i = array.indexOf(obj);\n\n  if (i > -1) {\n    array.splice(i, 1);\n  }\n}\n\nfunction forEachCoord(arr, fn, context) {\n  if (!Array.isArray(arr)) {\n    return context ? fn.call(context, arr) : fn(arr);\n  }\n\n  var result = [];\n  var p, pp;\n\n  for (var i = 0, len = arr.length; i < len; i++) {\n    p = arr[i];\n\n    if (isNil(p)) {\n      result.push(null);\n      continue;\n    }\n\n    if (Array.isArray(p)) {\n      result.push(forEachCoord(p, fn, context));\n    } else {\n      pp = context ? fn.call(context, p) : fn(p);\n      result.push(pp);\n    }\n  }\n\n  return result;\n}\n\nfunction getValueOrDefault(v, d) {\n  return v === undefined ? d : v;\n}\n\nfunction sign(x) {\n  if (Math.sign) {\n    return Math.sign(x);\n  }\n\n  x = +x;\n\n  if (x === 0 || isNaN(x)) {\n    return Number(x);\n  }\n\n  return x > 0 ? 1 : -1;\n}\n\nfunction log2(x) {\n  if (Math.log2) {\n    return Math.log2(x);\n  }\n\n  var v = Math.log(x) * Math.LOG2E;\n  var rounded = Math.round(v);\n\n  if (Math.abs(rounded - v) < 1E-14) {\n    return rounded;\n  } else {\n    return v;\n  }\n}\n\nfunction interpolate(a, b, t) {\n  return a * (1 - t) + b * t;\n}\n\nfunction wrap(n, min, max) {\n  if (n === max || n === min) {\n    return n;\n  }\n\n  var d = max - min;\n  var w = ((n - min) % d + d) % d + min;\n  return w;\n}\n\nfunction clamp(n, min, max) {\n  return Math.min(max, Math.max(min, n));\n}\n\nfunction isArrayHasData(obj) {\n  return Array.isArray(obj) && obj.length > 0;\n}\n\nvar urlPattern = /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i;\n\nfunction isURL(url) {\n  return urlPattern.test(url);\n}\n\nvar cssUrlReWithQuote = /^url\\((['\"])(.+)\\1\\)$/i;\nvar cssUrlRe = /^url\\(([^'\"].*[^'\"])\\)$/i;\n\nfunction isCssUrl(str) {\n  if (!isString(str)) {\n    return 0;\n  }\n\n  if (cssUrlRe.test(str)) {\n    return 1;\n  }\n\n  if (cssUrlReWithQuote.test(str)) {\n    return 2;\n  }\n\n  return 3;\n}\n\nfunction extractCssUrl(str) {\n  var test = isCssUrl(str);\n  var matches;\n\n  if (test === 3) {\n    return str;\n  } else if (test === 1) {\n    matches = cssUrlRe.exec(str);\n    return matches[1];\n  } else if (test === 2) {\n    matches = cssUrlReWithQuote.exec(str);\n    return matches[2];\n  } else {\n    return str;\n  }\n}\n\nvar b64chrs = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction btoa(input) {\n  if (typeof window !== 'undefined' && window.btoa) {\n    return window.btoa(input);\n  }\n\n  var str = String(input);\n  var output = '';\n\n  for (var block, charCode, idx = 0, map = b64chrs; str.charAt(idx | 0) || (map = '=', idx % 1); output += map.charAt(63 & block >> 8 - idx % 1 * 8)) {\n    charCode = str.charCodeAt(idx += 3 / 4);\n\n    if (charCode > 0xFF) {\n      throw new Error('\\'btoa\\' failed: The string to be encoded contains characters outside of the Latin1 range.');\n    }\n\n    block = block << 8 | charCode;\n  }\n\n  return output;\n}\n\nfunction b64toBlob(b64Data, contentType) {\n  var byteCharacters = atob(b64Data);\n  var arraybuffer = new ArrayBuffer(byteCharacters.length);\n  var view = new Uint8Array(arraybuffer);\n\n  for (var i = 0; i < byteCharacters.length; i++) {\n    view[i] = byteCharacters.charCodeAt(i) & 0xff;\n  }\n\n  var blob = new Blob([arraybuffer], {\n    type: contentType\n  });\n  return blob;\n}\n\nfunction computeDegree(x0, y0, x1, y1) {\n  var dx = x1 - x0;\n  var dy = y1 - y0;\n  return Math.atan2(dy, dx);\n}\n\nvar emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\n\nfunction equalMapView(obj1, obj2) {\n  if (!obj1 && !obj2) {\n    return true;\n  } else if (!obj1 || !obj2) {\n    return false;\n  }\n\n  for (var p in obj1) {\n    if (p === 'center') {\n      if (!obj2[p] || !approx(obj1[p][0], obj2[p][0]) || !approx(obj1[p][1], obj2[p][1])) {\n        return false;\n      }\n    } else if (obj1[p] !== obj2[p]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction approx(val, expected, delta) {\n  if (delta == null) {\n    delta = 1e-6;\n  }\n\n  return val >= expected - delta && val <= expected + delta;\n}\n\nfunction flash(interval, count, cb, context) {\n  if (!interval) {\n    interval = 100;\n  }\n\n  if (!count) {\n    count = 4;\n  }\n\n  var me = this;\n  count *= 2;\n\n  if (this._flashTimeout) {\n    clearTimeout(this._flashTimeout);\n  }\n\n  function flashGeo() {\n    if (count === 0) {\n      me.show();\n\n      if (cb) {\n        if (context) {\n          cb.call(context);\n        } else {\n          cb();\n        }\n      }\n\n      return;\n    }\n\n    if (count % 2 === 0) {\n      me.hide();\n    } else {\n      me.show();\n    }\n\n    count--;\n    me._flashTimeout = setTimeout(flashGeo, interval);\n  }\n\n  this._flashTimeout = setTimeout(flashGeo, interval);\n  return this;\n}\n\nfunction _defaults(obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n}\n\nvar types = ['Unknown', 'Point', 'LineString', 'Polygon', 'MultiPoint', 'MultiLineString', 'MultiPolygon', 'GeometryCollection'];\n\nfunction createFilter(filter) {\n  return new Function('f', \"var p = (f && f.properties || {}); return \" + compile(filter));\n}\n\nfunction compile(filter) {\n  if (!filter) return 'true';\n  var op = filter[0];\n  if (filter.length <= 1) return op === 'any' ? 'false' : 'true';\n  var str = op === '==' ? compileComparisonOp(filter[1], filter[2], '===', false) : op === '!=' ? compileComparisonOp(filter[1], filter[2], '!==', false) : op === '<' || op === '>' || op === '<=' || op === '>=' ? compileComparisonOp(filter[1], filter[2], op, true) : op === 'any' ? compileLogicalOp(filter.slice(1), '||') : op === 'all' ? compileLogicalOp(filter.slice(1), '&&') : op === 'none' ? compileNegation(compileLogicalOp(filter.slice(1), '||')) : op === 'in' ? compileInOp(filter[1], filter.slice(2)) : op === '!in' ? compileNegation(compileInOp(filter[1], filter.slice(2))) : op === 'has' ? compileHasOp(filter[1]) : op === '!has' ? compileNegation(compileHasOp(filter[1])) : 'true';\n  return \"(\" + str + \")\";\n}\n\nfunction compilePropertyReference(property) {\n  return property[0] === '$' ? 'f.' + property.substring(1) : 'p[' + JSON.stringify(property) + ']';\n}\n\nfunction compileComparisonOp(property, value, op, checkType) {\n  var left = compilePropertyReference(property);\n  var right = property === '$type' ? types.indexOf(value) : JSON.stringify(value);\n  return (checkType ? \"typeof \" + left + \"=== typeof \" + right + \"&&\" : '') + left + op + right;\n}\n\nfunction compileLogicalOp(expressions, op) {\n  return expressions.map(compile).join(op);\n}\n\nfunction compileInOp(property, values) {\n  if (property === '$type') values = values.map(function (value) {\n    return types.indexOf(value);\n  });\n  var left = JSON.stringify(values.sort(compare));\n  var right = compilePropertyReference(property);\n  if (values.length <= 200) return left + \".indexOf(\" + right + \") !== -1\";\n  return \"function(v, a, i, j) {\\n        while (i <= j) { var m = (i + j) >> 1;\\n            if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;\\n        }\\n    return false; }(\" + right + \", \" + left + \",0,\" + (values.length - 1) + \")\";\n}\n\nfunction compileHasOp(property) {\n  return property === '$id' ? '\"id\" in f' : JSON.stringify(property) + \" in p\";\n}\n\nfunction compileNegation(expression) {\n  return \"!(\" + expression + \")\";\n}\n\nfunction compare(a, b) {\n  return a < b ? -1 : a > b ? 1 : 0;\n}\n\nfunction getFilterFeature(geometry) {\n  var json = geometry._toJSON(),\n      g = json['feature'];\n\n  g['type'] = types.indexOf(g['geometry']['type']);\n  g['subType'] = json['subType'];\n  return g;\n}\n\nfunction compileStyle(styles) {\n  if (!Array.isArray(styles)) {\n    return compileStyle([styles]);\n  }\n\n  var compiled = [];\n\n  for (var i = 0; i < styles.length; i++) {\n    var filter = void 0;\n\n    if (styles[i]['filter'] === true) {\n      filter = function filter() {\n        return true;\n      };\n    } else {\n      filter = createFilter(styles[i]['filter']);\n    }\n\n    compiled.push(extend$1({}, styles[i], {\n      filter: filter\n    }));\n  }\n\n  return compiled;\n}\n\nfunction extend$1(dest) {\n  for (var i = 1; i < arguments.length; i++) {\n    var src = arguments[i];\n\n    for (var k in src) {\n      dest[k] = src[k];\n    }\n  }\n\n  return dest;\n}\n\nfunction createFunction(parameters, defaultType) {\n  var fun;\n  var isFeatureConstant, isZoomConstant;\n\n  if (!isFunctionDefinition(parameters)) {\n    fun = function fun() {\n      return parameters;\n    };\n\n    isFeatureConstant = true;\n    isZoomConstant = true;\n  } else {\n    var zoomAndFeatureDependent = parameters.stops && typeof parameters.stops[0][0] === 'object';\n    var featureDependent = zoomAndFeatureDependent || parameters.property !== undefined;\n    var zoomDependent = zoomAndFeatureDependent || !featureDependent;\n    var type = parameters.type || defaultType || 'exponential';\n    var innerFun;\n\n    if (type === 'exponential') {\n      innerFun = evaluateExponentialFunction;\n    } else if (type === 'interval') {\n      innerFun = evaluateIntervalFunction;\n    } else if (type === 'categorical') {\n      innerFun = evaluateCategoricalFunction;\n    } else if (type === 'identity') {\n      innerFun = evaluateIdentityFunction;\n    } else {\n      throw new Error('Unknown function type \"' + type + '\"');\n    }\n\n    if (zoomAndFeatureDependent) {\n      var featureFunctions = {};\n      var featureFunctionStops = [];\n\n      for (var s = 0; s < parameters.stops.length; s++) {\n        var stop = parameters.stops[s];\n\n        if (featureFunctions[stop[0].zoom] === undefined) {\n          featureFunctions[stop[0].zoom] = {\n            zoom: stop[0].zoom,\n            type: parameters.type,\n            property: parameters.property,\n            default: parameters.default,\n            stops: []\n          };\n        }\n\n        featureFunctions[stop[0].zoom].stops.push([stop[0].value, stop[1]]);\n      }\n\n      for (var z in featureFunctions) {\n        featureFunctionStops.push([featureFunctions[z].zoom, createFunction(featureFunctions[z])]);\n      }\n\n      fun = function fun(zoom, feature) {\n        var value = evaluateExponentialFunction({\n          stops: featureFunctionStops,\n          base: parameters.base\n        }, zoom)(zoom, feature);\n        return typeof value === 'function' ? value(zoom, feature) : value;\n      };\n\n      isFeatureConstant = false;\n      isZoomConstant = false;\n    } else if (zoomDependent) {\n      fun = function fun(zoom) {\n        var value = innerFun(parameters, zoom);\n        return typeof value === 'function' ? value(zoom) : value;\n      };\n\n      isFeatureConstant = true;\n      isZoomConstant = false;\n    } else {\n      fun = function fun(zoom, feature) {\n        var value = innerFun(parameters, feature ? feature[parameters.property] : null);\n        return typeof value === 'function' ? value(zoom, feature) : value;\n      };\n\n      isFeatureConstant = false;\n      isZoomConstant = true;\n    }\n  }\n\n  fun.isZoomConstant = isZoomConstant;\n  fun.isFeatureConstant = isFeatureConstant;\n  return fun;\n}\n\nfunction coalesce(a, b, c) {\n  if (a !== undefined) return a;\n  if (b !== undefined) return b;\n  if (c !== undefined) return c;\n  return null;\n}\n\nfunction evaluateCategoricalFunction(parameters, input) {\n  for (var i = 0; i < parameters.stops.length; i++) {\n    if (input === parameters.stops[i][0]) {\n      return parameters.stops[i][1];\n    }\n  }\n\n  return parameters.default;\n}\n\nfunction evaluateIntervalFunction(parameters, input) {\n  for (var i = 0; i < parameters.stops.length; i++) {\n    if (input < parameters.stops[i][0]) break;\n  }\n\n  return parameters.stops[Math.max(i - 1, 0)][1];\n}\n\nfunction evaluateExponentialFunction(parameters, input) {\n  var base = parameters.base !== undefined ? parameters.base : 1;\n  var i = 0;\n\n  while (true) {\n    if (i >= parameters.stops.length) break;else if (input <= parameters.stops[i][0]) break;else i++;\n  }\n\n  if (i === 0) {\n    return parameters.stops[i][1];\n  } else if (i === parameters.stops.length) {\n    return parameters.stops[i - 1][1];\n  } else {\n    return interpolate$1(input, base, parameters.stops[i - 1][0], parameters.stops[i][0], parameters.stops[i - 1][1], parameters.stops[i][1]);\n  }\n}\n\nfunction evaluateIdentityFunction(parameters, input) {\n  return coalesce(input, parameters.default);\n}\n\nfunction interpolate$1(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  if (typeof outputLower === 'function') {\n    return function () {\n      var evaluatedLower = outputLower.apply(undefined, arguments);\n      var evaluatedUpper = outputUpper.apply(undefined, arguments);\n      return interpolate$1(input, base, inputLower, inputUpper, evaluatedLower, evaluatedUpper);\n    };\n  } else if (outputLower.length) {\n    return interpolateArray(input, base, inputLower, inputUpper, outputLower, outputUpper);\n  } else {\n    return interpolateNumber(input, base, inputLower, inputUpper, outputLower, outputUpper);\n  }\n}\n\nfunction interpolateNumber(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  var difference = inputUpper - inputLower;\n  var progress = input - inputLower;\n  var ratio;\n\n  if (base === 1) {\n    ratio = progress / difference;\n  } else {\n    ratio = (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n  }\n\n  return outputLower * (1 - ratio) + outputUpper * ratio;\n}\n\nfunction interpolateArray(input, base, inputLower, inputUpper, outputLower, outputUpper) {\n  var output = [];\n\n  for (var i = 0; i < outputLower.length; i++) {\n    output[i] = interpolateNumber(input, base, inputLower, inputUpper, outputLower[i], outputUpper[i]);\n  }\n\n  return output;\n}\n\nfunction isFunctionDefinition(obj) {\n  return obj && typeof obj === 'object' && (obj.stops || obj.property && obj.type === 'identity');\n}\n\nfunction hasFunctionDefinition(obj) {\n  for (var p in obj) {\n    if (isFunctionDefinition(obj[p])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction interpolated(parameters) {\n  return createFunction1(parameters, 'exponential');\n}\n\nfunction piecewiseConstant(parameters) {\n  return createFunction1(parameters, 'interval');\n}\n\nfunction loadFunctionTypes(obj, argFn) {\n  if (!obj) {\n    return null;\n  }\n\n  var hit = false;\n\n  if (Array.isArray(obj)) {\n    var multResult = [],\n        loaded;\n\n    for (var i = 0; i < obj.length; i++) {\n      loaded = loadFunctionTypes(obj[i], argFn);\n\n      if (!loaded) {\n        multResult.push(obj[i]);\n      } else {\n        multResult.push(loaded);\n        hit = true;\n      }\n    }\n\n    return hit ? multResult : obj;\n  }\n\n  var result = {\n    '__fn_types_loaded': true\n  },\n      props = [],\n      p;\n\n  for (p in obj) {\n    if (obj.hasOwnProperty(p)) {\n      props.push(p);\n    }\n  }\n\n  var buildFn = function buildFn(p) {\n    Object.defineProperty(result, p, {\n      get: function get() {\n        if (!this['__fn_' + p]) {\n          this['__fn_' + p] = interpolated(this['_' + p]);\n        }\n\n        return this['__fn_' + p].apply(this, argFn());\n      },\n      set: function set(v) {\n        this['_' + p] = v;\n      },\n      configurable: true,\n      enumerable: true\n    });\n  };\n\n  for (var _i = 0, len = props.length; _i < len; _i++) {\n    p = props[_i];\n\n    if (isFunctionDefinition(obj[p])) {\n      hit = true;\n      result['_' + p] = obj[p];\n      buildFn(p);\n    } else {\n      result[p] = obj[p];\n    }\n  }\n\n  return hit ? result : obj;\n}\n\nfunction getFunctionTypeResources(t) {\n  if (!t || !t.stops) {\n    return [];\n  }\n\n  var res = [];\n\n  for (var i = 0, l = t.stops.length; i < l; i++) {\n    res.push(t.stops[i][1]);\n  }\n\n  return res;\n}\n\nfunction createFunction1(parameters, defaultType) {\n  if (!isFunctionDefinition(parameters)) {\n    return function () {\n      return parameters;\n    };\n  }\n\n  parameters = JSON.parse(JSON.stringify(parameters));\n  var isZoomConstant = true;\n  var isFeatureConstant = true;\n  var stops = parameters.stops;\n\n  if (stops) {\n    for (var i = 0; i < stops.length; i++) {\n      if (isFunctionDefinition(stops[i][1])) {\n        var _fn = createFunction1(stops[i][1], defaultType);\n\n        isZoomConstant = isZoomConstant && _fn.isZoomConstant;\n        isFeatureConstant = isFeatureConstant && _fn.isFeatureConstant;\n        stops[i] = [stops[i][0], _fn];\n      }\n    }\n  }\n\n  var fn = createFunction(parameters, defaultType);\n  fn.isZoomConstant = isZoomConstant && fn.isZoomConstant;\n  fn.isFeatureConstant = isFeatureConstant && fn.isFeatureConstant;\n  return fn;\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  createFilter: createFilter,\n  getFilterFeature: getFilterFeature,\n  compileStyle: compileStyle,\n  isFunctionDefinition: isFunctionDefinition,\n  hasFunctionDefinition: hasFunctionDefinition,\n  interpolated: interpolated,\n  piecewiseConstant: piecewiseConstant,\n  loadFunctionTypes: loadFunctionTypes,\n  getFunctionTypeResources: getFunctionTypeResources\n});\n\nfunction translateToSVGStyles(s) {\n  var result = {\n    'stroke': {\n      'stroke': s['markerLineColor'],\n      'stroke-width': s['markerLineWidth'],\n      'stroke-opacity': s['markerLineOpacity'],\n      'stroke-dasharray': null,\n      'stroke-linecap': 'butt',\n      'stroke-linejoin': 'round'\n    },\n    'fill': {\n      'fill': s['markerFill'],\n      'fill-opacity': s['markerFillOpacity']\n    }\n  };\n\n  if (result['stroke']['stroke-width'] === 0) {\n    result['stroke']['stroke-opacity'] = 0;\n  }\n\n  return result;\n}\n\nfunction getMarkerPathBase64(symbol, width, height) {\n  if (!symbol['markerPath']) {\n    return null;\n  }\n\n  var op = 1;\n  var styles = translateToSVGStyles(symbol);\n\n  if (isNumber(symbol['markerOpacity'])) {\n    op = symbol['markerOpacity'];\n  }\n\n  if (isNumber(symbol['opacity'])) {\n    op *= symbol['opacity'];\n  }\n\n  var svgStyles = {};\n\n  if (styles) {\n    for (var p in styles['stroke']) {\n      if (styles['stroke'].hasOwnProperty(p)) {\n        if (!isNil(styles['stroke'][p])) {\n          svgStyles[p] = styles['stroke'][p];\n        }\n      }\n    }\n\n    for (var _p in styles['fill']) {\n      if (styles['fill'].hasOwnProperty(_p)) {\n        if (!isNil(styles['fill'][_p])) {\n          svgStyles[_p] = styles['fill'][_p];\n        }\n      }\n    }\n  }\n\n  var pathes = Array.isArray(symbol['markerPath']) ? symbol['markerPath'] : [symbol['markerPath']];\n  var path;\n  var pathesToRender = [];\n\n  for (var i = 0; i < pathes.length; i++) {\n    path = isString(pathes[i]) ? {\n      'path': pathes[i]\n    } : pathes[i];\n    path = extend({}, path, svgStyles);\n    path['d'] = path['path'];\n    delete path['path'];\n    pathesToRender.push(path);\n  }\n\n  var svg = ['<svg version=\"1.1\"', 'xmlns=\"http://www.w3.org/2000/svg\"'];\n\n  if (op < 1) {\n    svg.push('opacity=\"' + op + '\"');\n  }\n\n  if (symbol['markerPathWidth'] && symbol['markerPathHeight']) {\n    svg.push('viewBox=\"0 0 ' + symbol['markerPathWidth'] + ' ' + symbol['markerPathHeight'] + '\"');\n  }\n\n  svg.push('preserveAspectRatio=\"none\"');\n\n  if (width) {\n    svg.push('width=\"' + width + '\"');\n  }\n\n  if (height) {\n    svg.push('height=\"' + height + '\"');\n  }\n\n  svg.push('><defs></defs>');\n\n  for (var _i = 0; _i < pathesToRender.length; _i++) {\n    var strPath = '<path ';\n\n    for (var _p2 in pathesToRender[_i]) {\n      if (pathesToRender[_i].hasOwnProperty(_p2)) {\n        strPath += ' ' + _p2 + '=\"' + pathesToRender[_i][_p2] + '\"';\n      }\n    }\n\n    strPath += '></path>';\n    svg.push(strPath);\n  }\n\n  svg.push('</svg>');\n  var b64 = 'data:image/svg+xml;base64,' + btoa(svg.join(' '));\n  return b64;\n}\n\nfunction getExternalResources(symbol, toAbsolute) {\n  if (!symbol) {\n    return [];\n  }\n\n  var symbols = symbol;\n\n  if (!Array.isArray(symbol)) {\n    symbols = [symbol];\n  }\n\n  var resources = [];\n  var props = RESOURCE_PROPERTIES;\n  var res, resSizeProp;\n  var w, h;\n\n  for (var i = symbols.length - 1; i >= 0; i--) {\n    symbol = symbols[i];\n\n    if (!symbol) {\n      continue;\n    }\n\n    if (toAbsolute) {\n      symbol = convertResourceUrl(symbol);\n    }\n\n    for (var ii = 0; ii < props.length; ii++) {\n      res = symbol[props[ii]];\n\n      if (isFunctionDefinition(res)) {\n        res = getFunctionTypeResources(res);\n      }\n\n      if (!res) {\n        continue;\n      }\n\n      if (!Array.isArray(res)) {\n        res = [res];\n      }\n\n      for (var iii = 0; iii < res.length; iii++) {\n        if (res[iii].slice(0, 4) === 'url(') {\n          res[iii] = extractCssUrl(res[iii]);\n        }\n\n        resSizeProp = RESOURCE_SIZE_PROPERTIES[ii];\n        resources.push([res[iii], symbol[resSizeProp[0]], symbol[resSizeProp[1]]]);\n      }\n    }\n\n    if (symbol['markerType'] === 'path' && symbol['markerPath']) {\n      w = isFunctionDefinition(symbol['markerWidth']) ? 200 : symbol['markerWidth'];\n      h = isFunctionDefinition(symbol['markerHeight']) ? 200 : symbol['markerHeight'];\n\n      if (isFunctionDefinition(symbol['markerPath'])) {\n        res = getFunctionTypeResources(symbol['markerPath']);\n        var path = symbol['markerPath'];\n\n        for (var _iii = 0; _iii < res.length; _iii++) {\n          symbol['markerPath'] = res[_iii];\n          resources.push([getMarkerPathBase64(symbol), w, h]);\n        }\n\n        symbol['markerPath'] = path;\n      } else {\n        resources.push([getMarkerPathBase64(symbol), w, h]);\n      }\n    }\n  }\n\n  return resources;\n}\n\nfunction convertResourceUrl(symbol) {\n  if (!symbol) {\n    return null;\n  }\n\n  var s = symbol;\n\n  if (IS_NODE) {\n    return s;\n  }\n\n  var props = RESOURCE_PROPERTIES;\n  var res;\n\n  for (var ii = 0, len = props.length; ii < len; ii++) {\n    res = s[props[ii]];\n\n    if (!res) {\n      continue;\n    }\n\n    s[props[ii]] = _convertUrl(res);\n  }\n\n  return s;\n}\n\nfunction _convertUrl(res) {\n  if (isFunctionDefinition(res)) {\n    var stops = res.stops;\n\n    for (var i = 0; i < stops.length; i++) {\n      stops[i][1] = _convertUrl(stops[i][1]);\n    }\n\n    return res;\n  }\n\n  if (res.slice(0, 4) === 'url(') {\n    res = extractCssUrl(res);\n  }\n\n  return res;\n}\n\nfunction isGradient(g) {\n  return g && g['colorStops'];\n}\n\nfunction getGradientStamp(g) {\n  var keys = [g['type']];\n\n  if (g['places']) {\n    keys.push(g['places'].join());\n  }\n\n  if (g['colorStops']) {\n    var stops = [];\n\n    for (var i = g['colorStops'].length - 1; i >= 0; i--) {\n      stops.push(g['colorStops'][i].join());\n    }\n\n    keys.push(stops.join(','));\n  }\n\n  return keys.join('_');\n}\n\nfunction getSymbolStamp(symbol) {\n  var keys = [];\n\n  if (Array.isArray(symbol)) {\n    for (var i = 0; i < symbol.length; i++) {\n      keys.push(getSymbolStamp(symbol[i]));\n    }\n\n    return '[ ' + keys.join(' , ') + ' ]';\n  }\n\n  for (var p in symbol) {\n    if (hasOwn(symbol, p)) {\n      if (!isFunction(symbol[p])) {\n        if (isGradient(symbol[p])) {\n          keys.push(p + '=' + getGradientStamp(symbol[p]));\n        } else {\n          keys.push(p + '=' + symbol[p]);\n        }\n      }\n    }\n  }\n\n  return keys.join(';');\n}\n\nfunction lowerSymbolOpacity(symbol, ratio) {\n  function s(_symbol, _ratio) {\n    var op = _symbol['opacity'];\n\n    if (isNil(op)) {\n      _symbol['opacity'] = _ratio;\n    } else {\n      _symbol['opacity'] *= _ratio;\n    }\n  }\n\n  var lower;\n\n  if (Array.isArray(symbol)) {\n    lower = [];\n\n    for (var i = 0; i < symbol.length; i++) {\n      var d = extend({}, symbol[i]);\n      s(d, ratio);\n      lower.push(d);\n    }\n  } else {\n    lower = extend({}, symbol);\n    s(lower, ratio);\n  }\n\n  return lower;\n}\n\nfunction extendSymbol(symbol) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n\n  if (!sources || !sources.length) {\n    sources = [{}];\n  }\n\n  if (Array.isArray(symbol)) {\n    var s, dest;\n    var result = [];\n\n    for (var i = 0, l = symbol.length; i < l; i++) {\n      s = symbol[i];\n      dest = {};\n\n      for (var ii = 0, ll = sources.length; ii < ll; ii++) {\n        if (!Array.isArray(sources[ii])) {\n          extend(dest, s, sources[ii] ? sources[ii] : {});\n        } else if (!isNil(sources[ii][i])) {\n          extend(dest, s, sources[ii][i]);\n        } else {\n          extend(dest, s ? s : {});\n        }\n      }\n\n      result.push(dest);\n    }\n\n    return result;\n  } else {\n    var args = [{}, symbol];\n    args.push.apply(args, sources);\n    return extend.apply(this, args);\n  }\n}\n\nfunction parseStyleRootPath(style) {\n  if (style.symbol) {\n    style = [style];\n  }\n\n  if (Array.isArray(style)) {\n    return style;\n  }\n\n  var root = style['$root'];\n  var iconset = style['$iconset'];\n  style = style.style;\n\n  if (root || iconset) {\n    if (root && root[root.length - 1] === '/') {\n      root = root.substring(0, root.length - 1);\n    }\n\n    if (iconset && iconset[iconset.length - 1] === '/') {\n      iconset = iconset.substring(0, iconset.length - 1);\n    }\n\n    var replacer = function replacer(match) {\n      if (match === '{$root}') {\n        return root;\n      } else if (match === '{$iconset}') {\n        return iconset;\n      }\n\n      return null;\n    };\n\n    style = convertStylePath(style, replacer);\n  }\n\n  return style;\n}\n\nfunction convertStylePath(styles, replacer) {\n  for (var i = 0; i < styles.length; i++) {\n    var symbol = styles[i].symbol;\n\n    if (symbol) {\n      parseSymbolPath(symbol, replacer);\n    }\n  }\n}\n\nvar URL_PATTERN = /(\\{\\$root\\}|\\{\\$iconset\\})/g;\n\nfunction parseSymbolPath(symbol, replacer) {\n  for (var p in symbol) {\n    if (symbol.hasOwnProperty(p) && p !== 'textName') {\n      if (isString(symbol[p]) && symbol[p].length > 2) {\n        symbol[p] = symbol[p].replace(URL_PATTERN, replacer);\n      } else if (isFunctionDefinition(symbol[p])) {\n        symbol[p] = parseStops(symbol[p], replacer);\n      } else if (isObject(symbol[p])) {\n        parseSymbolPath(symbol[p], replacer);\n      }\n    }\n  }\n}\n\nfunction parseStops(value, replacer) {\n  var defaultValue = value['default'];\n\n  if (isString(defaultValue)) {\n    value['default'] = defaultValue.replace(URL_PATTERN, replacer);\n  }\n\n  var stops = value.stops;\n\n  for (var i = 0; i < stops.length; i++) {\n    if (!Array.isArray(stops[i])) {\n      continue;\n    }\n\n    if (isString(stops[i][1])) {\n      stops[i][1] = stops[i][1].replace(URL_PATTERN, replacer);\n    } else if (isFunctionDefinition(stops[i][1])) {\n      stops[i][1] = parseStops(stops[i][1], replacer);\n    }\n  }\n\n  return value;\n}\n\nvar index$1 = /*#__PURE__*/Object.freeze({\n  now: now,\n  extend: extend,\n  isNil: isNil,\n  isNumber: isNumber,\n  isInteger: isInteger,\n  isObject: isObject,\n  isString: isString,\n  isFunction: isFunction,\n  hasOwn: hasOwn,\n  join: join,\n  isEmpty: isEmpty,\n  toRadian: toRadian,\n  toDegree: toDegree,\n  IS_NODE: IS_NODE,\n\n  get requestAnimFrame() {\n    return requestAnimFrame;\n  },\n\n  get cancelAnimFrame() {\n    return cancelAnimFrame;\n  },\n\n  isSVG: isSVG,\n  loadImage: loadImage,\n  UID: UID,\n  GUID: GUID,\n  parseJSON: parseJSON,\n  pushIn: pushIn,\n  removeFromArray: removeFromArray,\n  forEachCoord: forEachCoord,\n  getValueOrDefault: getValueOrDefault,\n  sign: sign,\n  log2: log2,\n  interpolate: interpolate,\n  wrap: wrap,\n  clamp: clamp,\n  isArrayHasData: isArrayHasData,\n  isURL: isURL,\n  isCssUrl: isCssUrl,\n  extractCssUrl: extractCssUrl,\n  btoa: btoa,\n  b64toBlob: b64toBlob,\n  computeDegree: computeDegree,\n  emptyImageUrl: emptyImageUrl,\n  equalMapView: equalMapView,\n  flash: flash,\n  _defaults: _defaults,\n  translateToSVGStyles: translateToSVGStyles,\n  getMarkerPathBase64: getMarkerPathBase64,\n  getExternalResources: getExternalResources,\n  convertResourceUrl: convertResourceUrl,\n  isGradient: isGradient,\n  getGradientStamp: getGradientStamp,\n  getSymbolStamp: getSymbolStamp,\n  lowerSymbolOpacity: lowerSymbolOpacity,\n  extendSymbol: extendSymbol,\n  parseStyleRootPath: parseStyleRootPath,\n  convertStylePath: convertStylePath\n});\nvar Browser = {};\n\nif (!IS_NODE) {\n  var ua = navigator.userAgent.toLowerCase(),\n      doc = document.documentElement,\n      ie = ('ActiveXObject' in window),\n      webkit = ua.indexOf('webkit') !== -1,\n      phantomjs = ua.indexOf('phantom') !== -1,\n      android23 = ua.search('android [23]') !== -1,\n      chrome = ua.indexOf('chrome') !== -1,\n      gecko = ua.indexOf('gecko') !== -1 && !webkit && !window.opera && !ie,\n      mobile = typeof orientation !== 'undefined' || ua.indexOf('mobile') !== -1,\n      msPointer = !window.PointerEvent && window.MSPointerEvent,\n      pointer = window.PointerEvent && navigator.pointerEnabled || msPointer,\n      ie3d = ie && 'transition' in doc.style,\n      webkit3d = 'WebKitCSSMatrix' in window && 'm11' in new window.WebKitCSSMatrix() && !android23,\n      gecko3d = ('MozPerspective' in doc.style),\n      opera12 = ('OTransition' in doc.style),\n      any3d = (ie3d || webkit3d || gecko3d) && !opera12 && !phantomjs;\n  var chromeVersion = 0;\n\n  if (chrome) {\n    chromeVersion = ua.match(/chrome\\/([\\d.]+)/)[1];\n  }\n\n  var touch = !phantomjs && (pointer || 'ontouchstart' in window || window.DocumentTouch && document instanceof window.DocumentTouch);\n  var webgl;\n\n  try {\n    var canvas = document.createElement('canvas');\n    var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n    webgl = gl && gl instanceof WebGLRenderingContext;\n  } catch (err) {\n    webgl = false;\n  }\n\n  var devicePixelRatio = window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI;\n  Browser = {\n    ie: ie,\n    ielt9: ie && !document.addEventListener,\n    edge: 'msLaunchUri' in navigator && !('documentMode' in document),\n    webkit: webkit,\n    gecko: gecko,\n    android: ua.indexOf('android') !== -1,\n    android23: android23,\n    chrome: chrome,\n    chromeVersion: chromeVersion,\n    safari: !chrome && ua.indexOf('safari') !== -1,\n    phantomjs: phantomjs,\n    ie3d: ie3d,\n    webkit3d: webkit3d,\n    gecko3d: gecko3d,\n    opera12: opera12,\n    any3d: any3d,\n    mobile: mobile,\n    mobileWebkit: mobile && webkit,\n    mobileWebkit3d: mobile && webkit3d,\n    mobileOpera: mobile && window.opera,\n    mobileGecko: mobile && gecko,\n    touch: !!touch,\n    msPointer: !!msPointer,\n    pointer: !!pointer,\n    retina: devicePixelRatio > 1,\n    devicePixelRatio: devicePixelRatio,\n    language: navigator.browserLanguage ? navigator.browserLanguage : navigator.language,\n    ie9: ie && document.documentMode === 9,\n    ie10: ie && document.documentMode === 10,\n    webgl: webgl\n  };\n}\n\nvar Browser$1 = Browser;\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nvar Position = function () {\n  function Position(x, y) {\n    if (!isNil(x) && !isNil(y)) {\n      this.x = +x;\n      this.y = +y;\n    } else if (!isNil(x.x) && !isNil(x.y)) {\n      this.x = +x.x;\n      this.y = +x.y;\n    } else if (Array.isArray(x)) {\n      this.x = +x[0];\n      this.y = +x[1];\n    }\n\n    if (this._isNaN()) {\n      throw new Error('Position is NaN');\n    }\n  }\n\n  var _proto = Position.prototype;\n\n  _proto.set = function set(x, y) {\n    this.x = x;\n    this.y = y;\n    return this;\n  };\n\n  _proto.abs = function abs() {\n    return new this.constructor(Math.abs(this.x), Math.abs(this.y));\n  };\n\n  _proto._abs = function _abs() {\n    this.x = Math.abs(this.x);\n    this.y = Math.abs(this.y);\n    return this;\n  };\n\n  _proto._round = function _round() {\n    this.x = Math.round(this.x);\n    this.y = Math.round(this.y);\n    return this;\n  };\n\n  _proto.round = function round() {\n    return new this.constructor(Math.round(this.x), Math.round(this.y));\n  };\n\n  _proto._ceil = function _ceil() {\n    this.x = Math.ceil(this.x);\n    this.y = Math.ceil(this.y);\n    return this;\n  };\n\n  _proto.ceil = function ceil() {\n    return new this.constructor(Math.ceil(this.x), Math.ceil(this.y));\n  };\n\n  _proto.distanceTo = function distanceTo(point) {\n    var x = point.x - this.x,\n        y = point.y - this.y;\n    return Math.sqrt(x * x + y * y);\n  };\n\n  _proto._floor = function _floor() {\n    this.x = Math.floor(this.x);\n    this.y = Math.floor(this.y);\n    return this;\n  };\n\n  _proto.floor = function floor() {\n    return new this.constructor(Math.floor(this.x), Math.floor(this.y));\n  };\n\n  _proto.copy = function copy() {\n    return new this.constructor(this.x, this.y);\n  };\n\n  _proto._add = function _add(x, y) {\n    if (!isNil(x.x)) {\n      this.x += x.x;\n      this.y += x.y;\n    } else if (!isNil(x[0])) {\n      this.x += x[0];\n      this.y += x[1];\n    } else {\n      this.x += x;\n      this.y += y;\n    }\n\n    return this;\n  };\n\n  _proto.add = function add(x, y) {\n    var nx, ny;\n\n    if (!isNil(x.x)) {\n      nx = this.x + x.x;\n      ny = this.y + x.y;\n    } else if (!isNil(x[0])) {\n      nx = this.x + x[0];\n      ny = this.y + x[1];\n    } else {\n      nx = this.x + x;\n      ny = this.y + y;\n    }\n\n    return new this.constructor(nx, ny);\n  };\n\n  _proto._sub = function _sub(x, y) {\n    if (!isNil(x.x)) {\n      this.x -= x.x;\n      this.y -= x.y;\n    } else if (!isNil(x[0])) {\n      this.x -= x[0];\n      this.y -= x[1];\n    } else {\n      this.x -= x;\n      this.y -= y;\n    }\n\n    return this;\n  };\n\n  _proto._substract = function _substract() {\n    return this._sub.apply(this, arguments);\n  };\n\n  _proto.sub = function sub(x, y) {\n    var nx, ny;\n\n    if (!isNil(x.x)) {\n      nx = this.x - x.x;\n      ny = this.y - x.y;\n    } else if (!isNil(x[0])) {\n      nx = this.x - x[0];\n      ny = this.y - x[1];\n    } else {\n      nx = this.x - x;\n      ny = this.y - y;\n    }\n\n    return new this.constructor(nx, ny);\n  };\n\n  _proto.substract = function substract() {\n    return this.sub.apply(this, arguments);\n  };\n\n  _proto.multi = function multi(ratio) {\n    return new this.constructor(this.x * ratio, this.y * ratio);\n  };\n\n  _proto._multi = function _multi(ratio) {\n    this.x *= ratio;\n    this.y *= ratio;\n    return this;\n  };\n\n  _proto.div = function div(n) {\n    return this.multi(1 / n);\n  };\n\n  _proto._div = function _div(n) {\n    return this._multi(1 / n);\n  };\n\n  _proto.equals = function equals(c) {\n    if (!(c instanceof this.constructor)) {\n      return false;\n    }\n\n    return this.x === c.x && this.y === c.y;\n  };\n\n  _proto._isNaN = function _isNaN() {\n    return isNaN(this.x) || isNaN(this.y);\n  };\n\n  _proto.isZero = function isZero() {\n    return this.x === 0 && this.y === 0;\n  };\n\n  _proto.toArray = function toArray() {\n    return [this.x, this.y];\n  };\n\n  _proto.toFixed = function toFixed(n) {\n    return new this.constructor(this.x.toFixed(n), this.y.toFixed(n));\n  };\n\n  _proto.toJSON = function toJSON() {\n    return {\n      x: this.x,\n      y: this.y\n    };\n  };\n\n  return Position;\n}();\n\nvar Point = function (_Position) {\n  _inheritsLoose(Point, _Position);\n\n  function Point() {\n    return _Position.apply(this, arguments) || this;\n  }\n\n  var _proto = Point.prototype;\n\n  _proto.closeTo = function closeTo(p, delta) {\n    if (!delta) {\n      delta = 0;\n    }\n\n    return this.x >= p.x - delta && this.x <= p.x + delta && this.y >= p.y - delta && this.y <= p.y + delta;\n  };\n\n  _proto.mag = function mag() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  };\n\n  _proto.unit = function unit() {\n    return this.copy()._unit();\n  };\n\n  _proto._unit = function _unit() {\n    this._div(this.mag());\n\n    return this;\n  };\n\n  _proto.perp = function perp() {\n    return this.copy()._perp();\n  };\n\n  _proto._perp = function _perp() {\n    var y = this.y;\n    this.y = this.x;\n    this.x = -y;\n    return this;\n  };\n\n  _proto.angleWith = function angleWith(b) {\n    return this.angleWithSep(b.x, b.y);\n  };\n\n  _proto.angleWithSep = function angleWithSep(x, y) {\n    return Math.atan2(this.x * y - this.y * x, this.x * x + this.y * y);\n  };\n\n  _proto._rotate = function _rotate(angle) {\n    var cos = Math.cos(angle),\n        sin = Math.sin(angle),\n        x = cos * this.x - sin * this.y,\n        y = sin * this.x + cos * this.y;\n    this.x = x;\n    this.y = y;\n    return this;\n  };\n\n  _proto.rotate = function rotate(a) {\n    return this.copy()._rotate(a);\n  };\n\n  return Point;\n}(Position);\n\nvar Size = function () {\n  function Size(width, height) {\n    if (isNumber(width) && isNumber(height)) {\n      this.width = width;\n      this.height = height;\n    } else if (isNumber(width['width'])) {\n      this.width = width.width;\n      this.height = width.height;\n    } else if (Array.isArray(width)) {\n      this.width = width[0];\n      this.height = width[1];\n    }\n  }\n\n  var _proto = Size.prototype;\n\n  _proto.copy = function copy() {\n    return new Size(this['width'], this['height']);\n  };\n\n  _proto.add = function add(x, y) {\n    var w, h;\n\n    if (x instanceof Size) {\n      w = this.width + x.width;\n      h = this.height + x.height;\n    } else {\n      w = this.width + x;\n      h = this.height + y;\n    }\n\n    return new Size(w, h);\n  };\n\n  _proto.equals = function equals(size) {\n    return this['width'] === size['width'] && this['height'] === size['height'];\n  };\n\n  _proto.multi = function multi(ratio) {\n    return new Size(this['width'] * ratio, this['height'] * ratio);\n  };\n\n  _proto._multi = function _multi(ratio) {\n    this['width'] *= ratio;\n    this['height'] *= ratio;\n    return this;\n  };\n\n  _proto._round = function _round() {\n    this['width'] = Math.round(this['width']);\n    this['height'] = Math.round(this['height']);\n    return this;\n  };\n\n  _proto.toPoint = function toPoint() {\n    return new Point(this['width'], this['height']);\n  };\n\n  _proto.toArray = function toArray() {\n    return [this['width'], this['height']];\n  };\n\n  _proto.toJSON = function toJSON() {\n    return {\n      'width': this['width'],\n      'height': this['height']\n    };\n  };\n\n  return Size;\n}();\n\nfunction trim(str) {\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\n\nvar specialPattern = /[\\b\\t\\r\\v\\f]/igm;\n\nfunction escapeSpecialChars(str) {\n  if (!isString(str)) {\n    return str;\n  }\n\n  return str.replace(specialPattern, '');\n}\n\nfunction splitWords(chr) {\n  return trim(chr).split(/\\s+/);\n}\n\nvar rulerCtx = typeof document !== 'undefined' ? document.createElement('canvas').getContext('2d') : null;\n\nfunction stringWidth(text, font) {\n  if (stringWidth.node) {\n    return stringWidth.node(text, font);\n  }\n\n  rulerCtx.font = font;\n  return rulerCtx.measureText(text).width;\n}\n\nfunction stringLength(text, font, size) {\n  var w = stringWidth(text, font);\n  return new Size(w, size || DEFAULT_TEXT_SIZE);\n}\n\nfunction getFontHeight(font) {\n  var domRuler = getDomRuler('span');\n\n  if (font !== '_default_') {\n    domRuler.style.font = font;\n  }\n\n  domRuler.innerHTML = '';\n  var h = domRuler.clientHeight;\n  removeDomNode(domRuler);\n  return h;\n}\n\nfunction splitContent(content, font, wrapWidth, textWidth) {\n  if (!content || content.length === 0) {\n    return [{\n      'text': '',\n      'width': 0\n    }];\n  }\n\n  var width = isNil(textWidth) ? stringWidth(content, font) : textWidth;\n  var chrWidth = width / content.length,\n      minChrCount = Math.floor(wrapWidth / chrWidth / 2);\n\n  if (chrWidth >= wrapWidth || minChrCount <= 0) {\n    return [{\n      'text': '',\n      'width': wrapWidth\n    }];\n  }\n\n  if (width <= wrapWidth) return [{\n    'text': content,\n    'width': width\n  }];\n  var result = [];\n  var testStr = content.substring(0, minChrCount),\n      prew = chrWidth * minChrCount;\n\n  for (var i = minChrCount, l = content.length; i < l; i++) {\n    var chr = content[i];\n    var w = stringWidth(testStr + chr);\n\n    if (w >= wrapWidth) {\n      result.push({\n        'text': testStr,\n        'width': prew\n      });\n      testStr = content.substring(i, minChrCount + i);\n      i += minChrCount - 1;\n      prew = chrWidth * minChrCount;\n    } else {\n      testStr += chr;\n      prew = w;\n    }\n\n    if (i >= l - 1) {\n      prew = stringWidth(testStr);\n      result.push({\n        'text': testStr,\n        'width': prew\n      });\n    }\n  }\n\n  return result;\n}\n\nvar contentExpRe = /\\{([\\w_]+)\\}/g;\n\nfunction replaceVariable(str, props) {\n  if (!isString(str)) {\n    return str;\n  }\n\n  return str.replace(contentExpRe, function (str, key) {\n    if (!props) {\n      return '';\n    }\n\n    var value = props[key];\n\n    if (isNil(value)) {\n      return '';\n    } else if (Array.isArray(value)) {\n      return value.join();\n    }\n\n    return value;\n  });\n}\n\nfunction getAlignPoint(size, horizontalAlignment, verticalAlignment) {\n  var width = size['width'],\n      height = size['height'];\n  var alignW, alignH;\n\n  if (horizontalAlignment === 'left') {\n    alignW = -width;\n  } else if (horizontalAlignment === 'right') {\n    alignW = 0;\n  } else {\n    alignW = -width / 2;\n  }\n\n  if (verticalAlignment === 'top') {\n    alignH = -height;\n  } else if (verticalAlignment === 'bottom') {\n    alignH = 0;\n  } else {\n    alignH = -height / 2;\n  }\n\n  return new Point(alignW, alignH);\n}\n\nvar DEFAULT_FONT = 'monospace';\n\nfunction getFont(style) {\n  if (style['textFont']) {\n    return style['textFont'];\n  } else {\n    return (style['textStyle'] && style['textStyle'] !== 'normal' ? style['textStyle'] + ' ' : '') + (style['textWeight'] && style['textWeight'] !== 'normal' ? style['textWeight'] + ' ' : '') + style['textSize'] + 'px ' + (!style['textFaceName'] ? DEFAULT_FONT : style['textFaceName'][0] === '\"' ? style['textFaceName'] : '\"' + style['textFaceName'] + '\"');\n  }\n}\n\nfunction splitTextToRow(text, style) {\n  var font = getFont(style),\n      lineSpacing = style['textLineSpacing'] || 0,\n      size = stringLength(text, font, style['textSize']),\n      textWidth = size['width'],\n      textHeight = size['height'],\n      wrapChar = style['textWrapCharacter'],\n      textRows = [];\n  var wrapWidth = style['textWrapWidth'];\n\n  if (!wrapWidth || wrapWidth > textWidth) {\n    wrapWidth = textWidth;\n  }\n\n  if (!isString(text)) {\n    text += '';\n  }\n\n  var actualWidth = 0;\n\n  if (wrapChar && text.indexOf(wrapChar) >= 0) {\n    var texts = text.split(wrapChar);\n\n    for (var i = 0, l = texts.length; i < l; i++) {\n      var t = texts[i];\n      var tWidth = stringWidth(t, font);\n\n      if (tWidth > wrapWidth) {\n        var contents = splitContent(t, font, wrapWidth, tWidth);\n\n        for (var ii = 0, ll = contents.length; ii < ll; ii++) {\n          var w = contents[ii].width;\n\n          if (w > actualWidth) {\n            actualWidth = w;\n          }\n\n          textRows.push({\n            'text': contents[ii].text,\n            'size': new Size(w, textHeight)\n          });\n        }\n      } else {\n        if (tWidth > actualWidth) {\n          actualWidth = tWidth;\n        }\n\n        textRows.push({\n          'text': t,\n          'size': new Size(tWidth, textHeight)\n        });\n      }\n    }\n  } else if (textWidth > wrapWidth) {\n    var _contents = splitContent(text, font, wrapWidth, textWidth);\n\n    for (var _i = 0; _i < _contents.length; _i++) {\n      var _w = _contents[_i].width;\n\n      if (_w > actualWidth) {\n        actualWidth = _w;\n      }\n\n      textRows.push({\n        'text': _contents[_i].text,\n        'size': new Size(_w, textHeight)\n      });\n    }\n  } else {\n    if (textWidth > actualWidth) {\n      actualWidth = textWidth;\n    }\n\n    textRows.push({\n      'text': text,\n      'size': size\n    });\n  }\n\n  var rowNum = textRows.length;\n  var textSize = new Size(actualWidth, textHeight * rowNum + lineSpacing * (rowNum - 1));\n  return {\n    'total': rowNum,\n    'size': textSize,\n    'rows': textRows,\n    'rawSize': size\n  };\n}\n\nvar strings = /*#__PURE__*/Object.freeze({\n  trim: trim,\n  escapeSpecialChars: escapeSpecialChars,\n  splitWords: splitWords,\n  stringWidth: stringWidth,\n  stringLength: stringLength,\n  getFontHeight: getFontHeight,\n  splitContent: splitContent,\n  replaceVariable: replaceVariable,\n  getAlignPoint: getAlignPoint,\n  getFont: getFont,\n  splitTextToRow: splitTextToRow\n});\n\nvar first = function first(props) {\n  return props[0];\n};\n\nvar testProp = IS_NODE ? first : function (props) {\n  var style = document.documentElement.style;\n\n  for (var i = 0; i < props.length; i++) {\n    if (props[i] in style) {\n      return props[i];\n    }\n  }\n\n  return false;\n};\nvar TRANSFORM = testProp(['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nvar TRANSFORMORIGIN = testProp(['transformOrigin', 'WebkitTransformOrigin', 'OTransformOrigin', 'MozTransformOrigin', 'msTransformOrigin']);\nvar TRANSITION = testProp(['transition', 'WebkitTransition', 'OTransition', 'MozTransition', 'msTransition']);\nvar CSSFILTER = testProp(['filter', 'WebkitFilter', 'OFilter', 'MozFilter', 'msFilter']);\n\nfunction createEl(tagName, className) {\n  var el = document.createElement(tagName);\n\n  if (className) {\n    setClass(el, className);\n  }\n\n  return el;\n}\n\nfunction createElOn(tagName, style, container) {\n  var el = createEl(tagName);\n\n  if (style) {\n    setStyle(el, style);\n  }\n\n  if (container) {\n    container.appendChild(el);\n  }\n\n  return el;\n}\n\nfunction removeDomNode(node) {\n  if (!node) {\n    return this;\n  }\n\n  if (Browser$1.ielt9 || Browser$1.ie9) {\n    var d = createEl('div');\n    d.appendChild(node);\n    d.innerHTML = '';\n    d = null;\n  } else if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n\n  return this;\n}\n\nfunction addDomEvent(obj, typeArr, handler, context) {\n  if (!obj || !obj.addEventListener || !typeArr || !handler) {\n    return this;\n  }\n\n  var eventHandler = function eventHandler(e) {\n    if (!e) {\n      e = window.event;\n    }\n\n    handler.call(context || obj, e);\n    return;\n  };\n\n  var types = typeArr.split(' ');\n\n  for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n\n    if (!type) {\n      continue;\n    }\n\n    if (!obj['Z__' + type]) {\n      obj['Z__' + type] = [];\n    }\n\n    var hit = listensDomEvent(obj, type, handler);\n\n    if (hit >= 0) {\n      removeDomEvent(obj, type, handler);\n    }\n\n    obj['Z__' + type].push({\n      callback: eventHandler,\n      src: handler\n    });\n\n    if (Browser$1.ie) {\n      obj.addEventListener(type, eventHandler, false);\n    } else {\n      obj.addEventListener(type, eventHandler, {\n        capture: false,\n        passive: false\n      });\n    }\n  }\n\n  return this;\n}\n\nfunction removeDomEvent(obj, typeArr, handler) {\n  function doRemove(type, callback) {\n    if (type === 'mousewheel' && Browser$1.gecko) {\n      type = 'DOMMouseScroll';\n    }\n\n    obj.removeEventListener(type, callback, false);\n  }\n\n  if (!obj || !obj.removeEventListener || !typeArr) {\n    return this;\n  }\n\n  var types = typeArr.split(' ');\n\n  for (var i = types.length - 1; i >= 0; i--) {\n    var type = types[i];\n\n    if (!type) {\n      continue;\n    }\n\n    if (!handler && obj['Z__' + type]) {\n      var handlers = obj['Z__' + type];\n\n      for (var j = 0, jlen = handlers.length; j < jlen; j++) {\n        doRemove(handlers[j].callback);\n      }\n\n      delete obj['Z__' + type];\n      return this;\n    }\n\n    var hit = listensDomEvent(obj, type, handler);\n\n    if (hit < 0) {\n      return this;\n    }\n\n    var hitHandler = obj['Z__' + type][hit];\n    doRemove(type, hitHandler.callback);\n    obj['Z__' + type].splice(hit, 1);\n  }\n\n  return this;\n}\n\nfunction listensDomEvent(obj, type, handler) {\n  if (!obj || !obj['Z__' + type] || !handler) {\n    return -1;\n  }\n\n  var handlers = obj['Z__' + type];\n\n  for (var i = 0, len = handlers.length; i < len; i++) {\n    if (handlers[i].src === handler) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\nfunction preventDefault(event) {\n  if (event.preventDefault) {\n    event.preventDefault();\n  } else {\n    event.returnValue = false;\n  }\n\n  return this;\n}\n\nfunction stopPropagation(e) {\n  if (e.stopPropagation) {\n    e.stopPropagation();\n  } else {\n    e.cancelBubble = true;\n  }\n\n  return this;\n}\n\nfunction preventSelection(dom) {\n  dom.onselectstart = function () {\n    return false;\n  };\n\n  dom.ondragstart = function () {\n    return false;\n  };\n\n  dom.setAttribute('unselectable', 'on');\n  return this;\n}\n\nfunction offsetDom(dom, offset) {\n  if (!dom) {\n    return null;\n  }\n\n  if (Browser$1.any3d) {\n    setTransform(dom, offset);\n  } else {\n    dom.style.left = offset.x + 'px';\n    dom.style.top = offset.y + 'px';\n  }\n\n  return offset;\n}\n\nfunction computeDomPosition(dom) {\n  var style = window.getComputedStyle(dom);\n  var padding = [parseInt(style['padding-left']), parseInt(style['padding-top'])];\n  var rect = dom.getBoundingClientRect();\n  var offsetWidth = dom.offsetWidth,\n      offsetHeight = dom.offsetHeight;\n  var scaleX = offsetWidth ? rect.width / offsetWidth : 1,\n      scaleY = offsetHeight ? rect.height / offsetHeight : 1;\n  dom.__position = [rect.left + padding[0], rect.top + padding[1], scaleX, scaleY];\n  return dom.__position;\n}\n\nfunction getEventContainerPoint(ev, dom) {\n  if (!ev) {\n    ev = window.event;\n  }\n\n  var domPos = dom.__position;\n\n  if (!domPos) {\n    domPos = computeDomPosition(dom);\n  }\n\n  return new Point((ev.clientX - domPos[0] - dom.clientLeft) / domPos[2], (ev.clientY - domPos[1] - dom.clientTop) / domPos[3]);\n}\n\nfunction endsWith(str, suffix) {\n  var l = str.length - suffix.length;\n  return l >= 0 && str.indexOf(suffix, l) === l;\n}\n\nfunction setStyle(dom, strCss) {\n  var cssText = dom.style.cssText;\n\n  if (!endsWith(cssText, ';')) {\n    cssText += ';';\n  }\n\n  dom.style.cssText = cssText + strCss;\n  return this;\n}\n\nfunction hasClass(el, name) {\n  if (el.classList !== undefined) {\n    return el.classList.contains(name);\n  }\n\n  var className = getClass(el);\n  return className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\n}\n\nfunction addClass(el, name) {\n  if (el.classList !== undefined && !hasClass(el, name)) {\n    var classes = splitWords(name);\n\n    for (var i = 0, len = classes.length; i < len; i++) {\n      el.classList.add(classes[i]);\n    }\n  } else {\n    var className = getClass(el);\n    setClass(el, (className ? className + ' ' : '') + name);\n  }\n\n  return this;\n}\n\nfunction setClass(el, name) {\n  if (isNil(el.className.baseVal)) {\n    el.className = name;\n  } else {\n    el.className.baseVal = name;\n  }\n\n  return this;\n}\n\nfunction getClass(el) {\n  return isNil(el.className.baseVal) ? el.className : el.className.baseVal;\n}\n\nfunction setOpacity(el, value) {\n  el.style.opacity = value;\n  return this;\n}\n\nfunction setTransform(el, offset) {\n  var pos = offset || new Point(0, 0);\n  el.style[TRANSFORM] = Browser$1.any3d ? 'translate3d(' + pos.x + 'px,' + pos.y + 'px,0px)' : 'translate(' + pos.x + 'px,' + pos.y + 'px)';\n  return this;\n}\n\nfunction setTransformMatrix(el, m) {\n  var text = 'matrix(' + (isString(m) ? m : m.join()) + ')';\n\n  if (el.style[TRANSFORM] !== text) {\n    el.style[TRANSFORM] = text;\n  }\n\n  return this;\n}\n\nfunction removeTransform(el) {\n  if (el.style[TRANSFORM]) {\n    el.style[TRANSFORM] = '';\n  }\n\n  return this;\n}\n\nfunction isHTML(str) {\n  return /<[a-z\\][\\s\\S]*>/i.test(str);\n}\n\nfunction measureDom(parentTag, dom) {\n  var ruler = getDomRuler(parentTag);\n\n  if (isString(dom)) {\n    ruler.innerHTML = dom;\n  } else {\n    ruler.appendChild(dom);\n  }\n\n  var result = new Size(ruler.clientWidth, ruler.clientHeight);\n  removeDomNode(ruler);\n  return result;\n}\n\nfunction getDomRuler(tag) {\n  var span = document.createElement(tag);\n  span.style.cssText = 'position:absolute;left:-10000px;top:-10000px;';\n  document.body.appendChild(span);\n  return span;\n}\n\nvar on = addDomEvent;\nvar off = removeDomEvent;\nvar dom = /*#__PURE__*/Object.freeze({\n  TRANSFORM: TRANSFORM,\n  TRANSFORMORIGIN: TRANSFORMORIGIN,\n  TRANSITION: TRANSITION,\n  CSSFILTER: CSSFILTER,\n  createEl: createEl,\n  createElOn: createElOn,\n  removeDomNode: removeDomNode,\n  addDomEvent: addDomEvent,\n  removeDomEvent: removeDomEvent,\n  listensDomEvent: listensDomEvent,\n  preventDefault: preventDefault,\n  stopPropagation: stopPropagation,\n  preventSelection: preventSelection,\n  offsetDom: offsetDom,\n  computeDomPosition: computeDomPosition,\n  getEventContainerPoint: getEventContainerPoint,\n  setStyle: setStyle,\n  hasClass: hasClass,\n  addClass: addClass,\n  setClass: setClass,\n  getClass: getClass,\n  setOpacity: setOpacity,\n  setTransform: setTransform,\n  setTransformMatrix: setTransformMatrix,\n  removeTransform: removeTransform,\n  isHTML: isHTML,\n  measureDom: measureDom,\n  getDomRuler: getDomRuler,\n  on: on,\n  off: off\n});\nvar Ajax = {\n  jsonp: function jsonp(url, callback) {\n    var name = '_maptalks_jsonp_' + UID();\n    if (url.match(/\\?/)) url += '&callback=' + name;else url += '?callback=' + name;\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = url;\n\n    window[name] = function (data) {\n      callback(null, data);\n      document.getElementsByTagName('head')[0].removeChild(script);\n      script = null;\n      delete window[name];\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n    return this;\n  },\n  get: function get(url, options, cb) {\n    if (isFunction(options)) {\n      var t = cb;\n      cb = options;\n      options = t;\n    }\n\n    if (IS_NODE && Ajax.get.node) {\n      return Ajax.get.node(url, cb, options);\n    }\n\n    var client = Ajax._getClient(cb);\n\n    client.open('GET', url, true);\n\n    if (options) {\n      for (var k in options.headers) {\n        client.setRequestHeader(k, options.headers[k]);\n      }\n\n      client.withCredentials = options.credentials === 'include';\n\n      if (options['responseType']) {\n        client.responseType = options['responseType'];\n      }\n    }\n\n    client.send(null);\n    return client;\n  },\n  post: function post(url, options, cb) {\n    var postData;\n\n    if (!isString(url)) {\n      var t = cb;\n      postData = options;\n      options = url;\n      url = options.url;\n      cb = t;\n    } else {\n      if (isFunction(options)) {\n        var _t = cb;\n        cb = options;\n        options = _t;\n      }\n\n      options = options || {};\n      postData = options.postData;\n    }\n\n    if (IS_NODE && Ajax.post.node) {\n      options.url = url;\n      return Ajax.post.node(options, postData, cb);\n    }\n\n    var client = Ajax._getClient(cb);\n\n    client.open('POST', options.url, true);\n\n    if (!options.headers) {\n      options.headers = {};\n    }\n\n    if (!options.headers['Content-Type']) {\n      options.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    }\n\n    if ('setRequestHeader' in client) {\n      for (var p in options.headers) {\n        if (options.headers.hasOwnProperty(p)) {\n          client.setRequestHeader(p, options.headers[p]);\n        }\n      }\n    }\n\n    if (!isString(postData)) {\n      postData = JSON.stringify(postData);\n    }\n\n    client.send(postData);\n    return client;\n  },\n  _wrapCallback: function _wrapCallback(client, cb) {\n    return function () {\n      if (client.readyState === 4) {\n        if (client.status === 200) {\n          if (client.responseType === 'arraybuffer') {\n            var response = client.response;\n\n            if (response.byteLength === 0) {\n              cb(new Error('http status 200 returned without content.'));\n            } else {\n              cb(null, {\n                data: client.response,\n                cacheControl: client.getResponseHeader('Cache-Control'),\n                expires: client.getResponseHeader('Expires'),\n                contentType: client.getResponseHeader('Content-Type')\n              });\n            }\n          } else {\n            cb(null, client.responseText);\n          }\n        } else {\n          cb(new Error(client.statusText + ',' + client.status));\n        }\n      }\n    };\n  },\n  _getClient: function _getClient(cb) {\n    var client;\n\n    try {\n      client = new XMLHttpRequest();\n    } catch (e) {\n      try {\n        client = new ActiveXObject('Msxml2.XMLHTTP');\n      } catch (e) {\n        try {\n          client = new ActiveXObject('Microsoft.XMLHTTP');\n        } catch (e) {}\n      }\n    }\n\n    client.onreadystatechange = Ajax._wrapCallback(client, cb);\n    return client;\n  },\n  getArrayBuffer: function getArrayBuffer(url, options, cb) {\n    if (isFunction(options)) {\n      var t = cb;\n      cb = options;\n      options = t;\n    }\n\n    if (!options) {\n      options = {};\n    }\n\n    options['responseType'] = 'arraybuffer';\n    return Ajax.get(url, options, cb);\n  },\n  getImage: function getImage(img, url, options) {\n    return Ajax.getArrayBuffer(url, options, function (err, imgData) {\n      if (err) {\n        if (img.onerror) {\n          img.onerror(err);\n        }\n      } else if (imgData) {\n        var URL = window.URL || window.webkitURL;\n        var onload = img.onload;\n\n        img.onload = function () {\n          if (onload) {\n            onload();\n          }\n\n          URL.revokeObjectURL(img.src);\n        };\n\n        var blob = new Blob([new Uint8Array(imgData.data)], {\n          type: imgData.contentType\n        });\n        img.cacheControl = imgData.cacheControl;\n        img.expires = imgData.expires;\n        img.src = imgData.data.byteLength ? URL.createObjectURL(blob) : emptyImageUrl;\n      }\n    });\n  }\n};\n\nAjax.getJSON = function (url, options, cb) {\n  if (isFunction(options)) {\n    var t = cb;\n    cb = options;\n    options = t;\n  }\n\n  var callback = function callback(err, resp) {\n    var data = resp ? parseJSON(resp) : null;\n    cb(err, data);\n  };\n\n  if (options && options['jsonp']) {\n    return Ajax.jsonp(url, callback);\n  }\n\n  return Ajax.get(url, options, callback);\n};\n\nvar DEFAULT_STROKE_COLOR = '#000';\nvar DEFAULT_FILL_COLOR = 'rgba(255,255,255,0)';\nvar DEFAULT_TEXT_COLOR = '#000';\nvar hitTesting = false;\nvar TEMP_CANVAS = null;\nvar RADIAN = Math.PI / 180;\nvar textOffsetY = 1;\nvar Canvas = {\n  setHitTesting: function setHitTesting(testing) {\n    hitTesting = testing;\n  },\n  createCanvas: function createCanvas(width, height, canvasClass) {\n    var canvas;\n\n    if (!IS_NODE) {\n      canvas = createEl('canvas');\n      canvas.width = width;\n      canvas.height = height;\n    } else {\n      canvas = new canvasClass(width, height);\n    }\n\n    return canvas;\n  },\n  prepareCanvasFont: function prepareCanvasFont(ctx, style) {\n    ctx.textBaseline = 'top';\n    ctx.font = getFont(style);\n    var fill = style['textFill'];\n\n    if (!fill) {\n      fill = DEFAULT_TEXT_COLOR;\n    }\n\n    ctx.fillStyle = Canvas.getRgba(fill, style['textOpacity']);\n  },\n  prepareCanvas: function prepareCanvas(ctx, style, resources, testing) {\n    if (!style) {\n      return;\n    }\n\n    var strokeWidth = style['lineWidth'];\n\n    if (!isNil(strokeWidth) && ctx.lineWidth !== strokeWidth) {\n      ctx.lineWidth = strokeWidth;\n    }\n\n    var strokePattern = style['linePatternFile'];\n    var strokeColor = style['lineColor'] || DEFAULT_STROKE_COLOR;\n\n    if (testing) {\n      ctx.strokeStyle = '#000';\n    } else if (strokePattern && resources) {\n      var patternOffset;\n\n      if (style['linePatternDx'] || style['linePatternDy']) {\n        patternOffset = [style['linePatternDx'], style['linePatternDy']];\n      }\n\n      Canvas._setStrokePattern(ctx, strokePattern, strokeWidth, patternOffset, resources);\n\n      style['lineDasharray'] = [];\n    } else if (isGradient(strokeColor)) {\n      if (style['lineGradientExtent']) {\n        ctx.strokeStyle = Canvas._createGradient(ctx, strokeColor, style['lineGradientExtent']);\n      } else {\n        ctx.strokeStyle = DEFAULT_STROKE_COLOR;\n      }\n    } else {\n      ctx.strokeStyle = strokeColor;\n    }\n\n    if (style['lineJoin']) {\n      ctx.lineJoin = style['lineJoin'];\n    }\n\n    if (style['lineCap']) {\n      ctx.lineCap = style['lineCap'];\n    }\n\n    if (ctx.setLineDash && isArrayHasData(style['lineDasharray'])) {\n      ctx.setLineDash(style['lineDasharray']);\n    }\n\n    var polygonPattern = style['polygonPatternFile'];\n    var fill = style['polygonFill'] || DEFAULT_FILL_COLOR;\n\n    if (testing) {\n      ctx.fillStyle = '#000';\n    } else if (polygonPattern && resources) {\n      var fillImgUrl = extractImageUrl(polygonPattern);\n      var fillTexture = resources.getImage([fillImgUrl, null, null]);\n\n      if (!fillTexture) {\n        fillTexture = resources.getImage([fillImgUrl + '-texture', null, strokeWidth]);\n      }\n\n      if (isSVG(fillImgUrl) && fillTexture instanceof Image && (Browser$1.edge || Browser$1.ie)) {\n        var w = fillTexture.width || 20,\n            h = fillTexture.height || 20;\n        var canvas = Canvas.createCanvas(w, h);\n        Canvas.image(canvas.getContext('2d'), fillTexture, 0, 0, w, h);\n        fillTexture = canvas;\n      }\n\n      if (!fillTexture) {\n        if (typeof console !== 'undefined') {\n          console.warn('img not found for', fillImgUrl);\n        }\n      } else {\n        ctx.fillStyle = ctx.createPattern(fillTexture, 'repeat');\n\n        if (style['polygonPatternDx'] || style['polygonPatternDy']) {\n          ctx.fillStyle['polygonPatternOffset'] = [style['polygonPatternDx'], style['polygonPatternDy']];\n        }\n      }\n    } else if (isGradient(fill)) {\n      if (style['polygonGradientExtent']) {\n        ctx.fillStyle = Canvas._createGradient(ctx, fill, style['polygonGradientExtent']);\n      } else {\n        ctx.fillStyle = 'rgba(255,255,255,0)';\n      }\n    } else {\n      ctx.fillStyle = fill;\n    }\n  },\n  _createGradient: function _createGradient(ctx, g, extent) {\n    var gradient = null,\n        places = g['places'];\n    var min = extent.getMin(),\n        max = extent.getMax(),\n        width = extent.getWidth(),\n        height = extent.getHeight();\n\n    if (!g['type'] || g['type'] === 'linear') {\n      if (!places) {\n        places = [min.x, min.y, max.x, min.y];\n      } else {\n        if (places.length !== 4) {\n          throw new Error('A linear gradient\\'s places should have 4 numbers.');\n        }\n\n        places = [min.x + places[0] * width, min.y + places[1] * height, min.x + places[2] * width, min.y + places[3] * height];\n      }\n\n      gradient = ctx.createLinearGradient.apply(ctx, places);\n    } else if (g['type'] === 'radial') {\n      if (!places) {\n        var c = extent.getCenter()._round();\n\n        places = [c.x, c.y, Math.abs(c.x - min.x), c.x, c.y, 0];\n      } else {\n        if (places.length !== 6) {\n          throw new Error('A radial gradient\\'s places should have 6 numbers.');\n        }\n\n        places = [min.x + places[0] * width, min.y + places[1] * height, width * places[2], min.x + places[3] * width, min.y + places[4] * height, width * places[5]];\n      }\n\n      gradient = ctx.createRadialGradient.apply(ctx, places);\n    }\n\n    g['colorStops'].forEach(function (stop) {\n      gradient.addColorStop.apply(gradient, stop);\n    });\n    return gradient;\n  },\n  _setStrokePattern: function _setStrokePattern(ctx, strokePattern, strokeWidth, linePatternOffset, resources) {\n    var imgUrl = extractImageUrl(strokePattern);\n    var imageTexture;\n\n    if (IS_NODE) {\n      imageTexture = resources.getImage([imgUrl, null, strokeWidth]);\n    } else {\n      var key = imgUrl + '-texture-' + strokeWidth;\n      imageTexture = resources.getImage(key);\n\n      if (!imageTexture) {\n        var imageRes = resources.getImage([imgUrl, null, null]);\n\n        if (imageRes) {\n          var w;\n\n          if (!imageRes.width || !imageRes.height) {\n            w = strokeWidth;\n          } else {\n            w = Math.round(imageRes.width * strokeWidth / imageRes.height);\n          }\n\n          var patternCanvas = Canvas.createCanvas(w, strokeWidth, ctx.canvas.constructor);\n          Canvas.image(patternCanvas.getContext('2d'), imageRes, 0, 0, w, strokeWidth);\n          resources.addResource([key, null, strokeWidth], patternCanvas);\n          imageTexture = patternCanvas;\n        }\n      }\n    }\n\n    if (imageTexture) {\n      ctx.strokeStyle = ctx.createPattern(imageTexture, 'repeat');\n      ctx.strokeStyle['linePatternOffset'] = linePatternOffset;\n    } else if (typeof console !== 'undefined') {\n      console.warn('img not found for', imgUrl);\n    }\n  },\n  clearRect: function clearRect(ctx, x1, y1, x2, y2) {\n    ctx.canvas._drawn = false;\n    ctx.clearRect(x1, y1, x2, y2);\n  },\n  fillCanvas: function fillCanvas(ctx, fillOpacity, x, y) {\n    if (hitTesting) {\n      fillOpacity = 1;\n    }\n\n    ctx.canvas._drawn = true;\n\n    if (fillOpacity === 0) {\n      return;\n    }\n\n    var isPattern = Canvas._isPattern(ctx.fillStyle);\n\n    var offset = ctx.fillStyle && ctx.fillStyle['polygonPatternOffset'];\n    var dx = offset ? offset[0] : 0,\n        dy = offset ? offset[1] : 0;\n\n    if (isNil(fillOpacity)) {\n      fillOpacity = 1;\n    }\n\n    var alpha;\n\n    if (fillOpacity < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= fillOpacity;\n    }\n\n    if (isPattern) {\n      x = x || 0;\n      y = y || 0;\n      ctx.translate(x + dx, y + dy);\n    }\n\n    ctx.fill();\n\n    if (isPattern) {\n      ctx.translate(-x - dx, -y - dy);\n    }\n\n    if (fillOpacity < 1) {\n      ctx.globalAlpha = alpha;\n    }\n  },\n  getRgba: function getRgba(color, op) {\n    if (isNil(op)) {\n      op = 1;\n    }\n\n    if (color[0] !== '#') {\n      return color;\n    }\n\n    var r, g, b;\n\n    if (color.length === 7) {\n      r = parseInt(color.substring(1, 3), 16);\n      g = parseInt(color.substring(3, 5), 16);\n      b = parseInt(color.substring(5, 7), 16);\n    } else {\n      r = parseInt(color.substring(1, 2), 16) * 17;\n      g = parseInt(color.substring(2, 3), 16) * 17;\n      b = parseInt(color.substring(3, 4), 16) * 17;\n    }\n\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + op + ')';\n  },\n  image: function image(ctx, img, x, y, width, height) {\n    ctx.canvas._drawn = true;\n\n    try {\n      if (isNumber(width) && isNumber(height)) {\n        ctx.drawImage(img, x, y, width, height);\n      } else {\n        ctx.drawImage(img, x, y);\n      }\n    } catch (error) {\n      if (console) {\n        console.warn('error when drawing image on canvas:', error);\n        console.warn(img);\n      }\n    }\n  },\n  text: function text(ctx, _text, pt, style, textDesc) {\n    Canvas._textOnMultiRow(ctx, textDesc['rows'], style, pt, textDesc['size'], textDesc['rawSize']);\n  },\n  _textOnMultiRow: function _textOnMultiRow(ctx, texts, style, point, splitTextSize, textSize) {\n    var ptAlign = getAlignPoint(splitTextSize, style['textHorizontalAlignment'], style['textVerticalAlignment']),\n        lineHeight = textSize['height'] + style['textLineSpacing'],\n        basePoint = point.add(0, ptAlign.y),\n        maxHeight = style['textMaxHeight'];\n    var text,\n        rowAlign,\n        height = 0;\n\n    for (var i = 0, len = texts.length; i < len; i++) {\n      text = texts[i]['text'];\n      rowAlign = getAlignPoint(texts[i]['size'], style['textHorizontalAlignment'], style['textVerticalAlignment']);\n\n      Canvas._textOnLine(ctx, text, basePoint.add(rowAlign.x, i * lineHeight), style['textHaloRadius'], style['textHaloFill'], style['textHaloOpacity']);\n\n      if (maxHeight > 0) {\n        height += lineHeight;\n\n        if (height + textSize['height'] >= maxHeight) {\n          break;\n        }\n      }\n    }\n  },\n  _textOnLine: function _textOnLine(ctx, text, pt, textHaloRadius, textHaloFill, textHaloAlpha) {\n    if (hitTesting) {\n      textHaloAlpha = 1;\n    }\n\n    var drawHalo = textHaloAlpha !== 0 && textHaloRadius !== 0;\n    ctx.textBaseline = 'top';\n    var gco, fill;\n    var shadowBlur = ctx.shadowBlur,\n        shadowOffsetX = ctx.shadowOffsetX,\n        shadowOffsetY = ctx.shadowOffsetY;\n\n    if (drawHalo) {\n      var alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= textHaloAlpha;\n      ctx.miterLimit = 2;\n      ctx.lineJoin = 'round';\n      ctx.lineCap = 'round';\n      ctx.lineWidth = textHaloRadius * 2;\n      ctx.strokeStyle = textHaloFill;\n      ctx.strokeText(text, pt.x, pt.y + textOffsetY);\n      ctx.miterLimit = 10;\n      ctx.globalAlpha = alpha;\n      gco = ctx.globalCompositeOperation;\n      ctx.globalCompositeOperation = 'destination-out';\n      fill = ctx.fillStyle;\n      ctx.fillStyle = '#000';\n    }\n\n    if (shadowBlur && drawHalo) {\n      ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n    }\n\n    Canvas.fillText(ctx, text, pt);\n\n    if (gco) {\n      ctx.globalCompositeOperation = gco;\n      Canvas.fillText(ctx, text, pt, fill);\n\n      if (shadowBlur) {\n        ctx.shadowBlur = shadowBlur;\n        ctx.shadowOffsetX = shadowOffsetX;\n        ctx.shadowOffsetY = shadowOffsetY;\n      }\n    }\n  },\n  fillText: function fillText(ctx, text, pt, rgba) {\n    ctx.canvas._drawn = true;\n\n    if (rgba) {\n      ctx.fillStyle = rgba;\n    }\n\n    ctx.fillText(text, pt.x, pt.y + textOffsetY);\n  },\n  _stroke: function _stroke(ctx, strokeOpacity, x, y) {\n    if (hitTesting) {\n      strokeOpacity = 1;\n    }\n\n    ctx.canvas._drawn = true;\n\n    if (strokeOpacity === 0) {\n      return;\n    }\n\n    var offset = ctx.strokeStyle && ctx.strokeStyle['linePatternOffset'];\n    var dx = offset ? offset[0] : 0,\n        dy = offset ? offset[1] : 0;\n    var isPattern = Canvas._isPattern(ctx.strokeStyle) && (!isNil(x) && !isNil(y) || !isNil(dx) && !isNil(dy));\n\n    if (isNil(strokeOpacity)) {\n      strokeOpacity = 1;\n    }\n\n    var alpha;\n\n    if (strokeOpacity < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= strokeOpacity;\n    }\n\n    if (isPattern) {\n      x = x || 0;\n      y = y || 0;\n      ctx.translate(x + dx, y + dy);\n    }\n\n    ctx.stroke();\n\n    if (isPattern) {\n      ctx.translate(-x - dx, -y - dy);\n    }\n\n    if (strokeOpacity < 1) {\n      ctx.globalAlpha = alpha;\n    }\n  },\n  _path: function _path(ctx, points, lineDashArray, lineOpacity, ignoreStrokePattern) {\n    if (!isArrayHasData(points)) {\n      return;\n    }\n\n    function fillWithPattern(p1, p2) {\n      var degree = computeDegree(p1.x, p1.y, p2.x, p2.y);\n      ctx.save();\n      var cosd = Math.cos(degree);\n\n      if (Math.abs(cosd) < 1E-7) {\n        ctx.translate(p1.x - ctx.lineWidth / 2, p1.y);\n      } else {\n        ctx.translate(p1.x, p1.y - ctx.lineWidth / 2 / cosd);\n      }\n\n      ctx.rotate(degree);\n\n      Canvas._stroke(ctx, lineOpacity);\n\n      ctx.restore();\n    }\n\n    var isDashed = isArrayHasData(lineDashArray);\n    var isPatternLine = ignoreStrokePattern === true ? false : Canvas._isPattern(ctx.strokeStyle);\n    var point, prePoint, nextPoint;\n\n    for (var i = 0, len = points.length; i < len; i++) {\n      point = points[i];\n\n      if (!isDashed || ctx.setLineDash) {\n        ctx.lineTo(point.x, point.y);\n\n        if (isPatternLine && i > 0) {\n          prePoint = points[i - 1];\n          fillWithPattern(prePoint, point);\n          ctx.beginPath();\n          ctx.moveTo(point.x, point.y);\n        }\n      } else if (isDashed) {\n        if (i === len - 1) {\n          break;\n        }\n\n        nextPoint = points[i + 1];\n        drawDashLine(ctx, point, nextPoint, lineDashArray, isPatternLine);\n      }\n    }\n  },\n  path: function path(ctx, points, lineOpacity, fillOpacity, lineDashArray) {\n    if (!isArrayHasData(points)) {\n      return;\n    }\n\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n\n    Canvas._path(ctx, points, lineDashArray, lineOpacity);\n\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _multiClip: function _multiClip(ctx, points) {\n    if (!points || points.length === 0) return;\n    points = points[0];\n\n    for (var i = 0, len = points.length; i < len; i++) {\n      var point = points[i];\n      var x = point.x,\n          y = point.y;\n\n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n\n      if (i === len - 1) {\n        x = points[0].x;\n        y = points[0].y;\n        ctx.lineTo(x, y);\n      }\n    }\n  },\n  polygon: function polygon(ctx, points, lineOpacity, fillOpacity, lineDashArray, smoothness) {\n    if (ctx.isMultiClip) {\n      Canvas._multiClip(ctx, points);\n\n      return;\n    }\n\n    if (!isArrayHasData(points)) {\n      return;\n    }\n\n    var isPatternLine = Canvas._isPattern(ctx.strokeStyle),\n        fillFirst = isArrayHasData(lineDashArray) && !ctx.setLineDash || isPatternLine && !smoothness;\n\n    if (!isArrayHasData(points[0])) {\n      points = [points];\n    }\n\n    var savedCtx = ctx;\n\n    if (points.length > 1 && !IS_NODE) {\n      if (!TEMP_CANVAS) {\n        TEMP_CANVAS = Canvas.createCanvas(1, 1);\n      }\n\n      ctx.canvas._drawn = false;\n      TEMP_CANVAS.width = ctx.canvas.width;\n      TEMP_CANVAS.height = ctx.canvas.height;\n      ctx = TEMP_CANVAS.getContext('2d');\n      copyProperties(ctx, savedCtx);\n    }\n\n    var op, i, len;\n\n    if (fillFirst) {\n      ctx.save();\n\n      for (i = 0, len = points.length; i < len; i++) {\n        if (!isArrayHasData(points[i])) {\n          continue;\n        }\n\n        Canvas._ring(ctx, points[i], null, 0, true);\n\n        op = fillOpacity;\n\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'destination-out';\n          op = 1;\n        }\n\n        Canvas.fillCanvas(ctx, op, points[i][0].x, points[i][0].y);\n\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'source-over';\n        } else if (len > 1) {\n          ctx.fillStyle = '#fff';\n        }\n\n        Canvas._stroke(ctx, 0);\n      }\n\n      ctx.restore();\n    }\n\n    for (i = 0, len = points.length; i < len; i++) {\n      if (!isArrayHasData(points[i])) {\n        continue;\n      }\n\n      if (smoothness) {\n        Canvas.paintSmoothLine(ctx, points[i], lineOpacity, smoothness, true);\n        ctx.closePath();\n      } else {\n        Canvas._ring(ctx, points[i], lineDashArray, lineOpacity);\n      }\n\n      if (!fillFirst) {\n        op = fillOpacity;\n\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'destination-out';\n          op = 1;\n        }\n\n        Canvas.fillCanvas(ctx, op, points[i][0].x, points[i][0].y);\n\n        if (i > 0) {\n          ctx.globalCompositeOperation = 'source-over';\n        } else if (len > 1) {\n          ctx.fillStyle = '#fff';\n        }\n      }\n\n      Canvas._stroke(ctx, lineOpacity);\n    }\n\n    if (points.length > 1 && !IS_NODE) {\n      savedCtx.drawImage(TEMP_CANVAS, 0, 0);\n      savedCtx.canvas._drawn = ctx.canvas._drawn;\n      copyProperties(savedCtx, ctx);\n    }\n  },\n  _ring: function _ring(ctx, ring, lineDashArray, lineOpacity, ignorePattern) {\n    var isPattern = Canvas._isPattern(ctx.strokeStyle);\n\n    if (!ignorePattern && isPattern && !ring[0].equals(ring[ring.length - 1])) {\n      ring = ring.concat([ring[0]]);\n    }\n\n    ctx.beginPath();\n    ctx.moveTo(ring[0].x, ring[0].y);\n\n    Canvas._path(ctx, ring, lineDashArray, lineOpacity, ignorePattern);\n\n    if (!isPattern) {\n      ctx.closePath();\n    }\n  },\n  paintSmoothLine: function paintSmoothLine(ctx, points, lineOpacity, smoothValue, close, tailIdx, tailRatio) {\n    if (!points) {\n      return;\n    }\n\n    if (points.length <= 2 || !smoothValue) {\n      Canvas.path(ctx, points, lineOpacity);\n      return;\n    }\n\n    function interpolate$$1(t0, t1, x1, y1, bx1, by1, bx2, by2, x2, y2) {\n      var u0 = 1.0 - t0;\n      var u1 = 1.0 - t1;\n      var qxa = x1 * u0 * u0 + bx1 * 2 * t0 * u0 + bx2 * t0 * t0;\n      var qxb = x1 * u1 * u1 + bx1 * 2 * t1 * u1 + bx2 * t1 * t1;\n      var qxc = bx1 * u0 * u0 + bx2 * 2 * t0 * u0 + x2 * t0 * t0;\n      var qxd = bx1 * u1 * u1 + bx2 * 2 * t1 * u1 + x2 * t1 * t1;\n      var qya = y1 * u0 * u0 + by1 * 2 * t0 * u0 + by2 * t0 * t0;\n      var qyb = y1 * u1 * u1 + by1 * 2 * t1 * u1 + by2 * t1 * t1;\n      var qyc = by1 * u0 * u0 + by2 * 2 * t0 * u0 + y2 * t0 * t0;\n      var qyd = by1 * u1 * u1 + by2 * 2 * t1 * u1 + y2 * t1 * t1;\n      var xb = qxa * u1 + qxc * t1;\n      var xc = qxb * u0 + qxd * t0;\n      var xd = qxb * u1 + qxd * t1;\n      var yb = qya * u1 + qyc * t1;\n      var yc = qyb * u0 + qyd * t0;\n      var yd = qyb * u1 + qyd * t1;\n      return [xb, yb, xc, yc, xd, yd];\n    }\n\n    function getCubicControlPoints(x0, y0, x1, y1, x2, y2, x3, y3, smoothValue, t) {\n      var xc1 = (x0 + x1) / 2.0,\n          yc1 = (y0 + y1) / 2.0;\n      var xc2 = (x1 + x2) / 2.0,\n          yc2 = (y1 + y2) / 2.0;\n      var xc3 = (x2 + x3) / 2.0,\n          yc3 = (y2 + y3) / 2.0;\n      var len1 = Math.sqrt((x1 - x0) * (x1 - x0) + (y1 - y0) * (y1 - y0));\n      var len2 = Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      var len3 = Math.sqrt((x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2));\n      var k1 = len1 / (len1 + len2);\n      var k2 = len2 / (len2 + len3);\n      var xm1 = xc1 + (xc2 - xc1) * k1,\n          ym1 = yc1 + (yc2 - yc1) * k1;\n      var xm2 = xc2 + (xc3 - xc2) * k2,\n          ym2 = yc2 + (yc3 - yc2) * k2;\n      var ctrl1X = xm1 + (xc2 - xm1) * smoothValue + x1 - xm1,\n          ctrl1Y = ym1 + (yc2 - ym1) * smoothValue + y1 - ym1,\n          ctrl2X = xm2 + (xc2 - xm2) * smoothValue + x2 - xm2,\n          ctrl2Y = ym2 + (yc2 - ym2) * smoothValue + y2 - ym2;\n      var ctrlPoints = [ctrl1X, ctrl1Y, ctrl2X, ctrl2Y];\n\n      if (t < 1) {\n        return interpolate$$1(0, t, x1, y1, ctrl1X, ctrl1Y, ctrl2X, ctrl2Y, x2, y2);\n      } else {\n        return ctrlPoints;\n      }\n    }\n\n    var count = points.length;\n    var l = close ? count : count - 1;\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n    if (tailRatio !== undefined) l -= Math.max(l - tailIdx - 1, 0);\n    var preCtrlPoints;\n\n    for (var i = 0; i < l; i++) {\n      var x1 = points[i].x,\n          y1 = points[i].y;\n      var x0 = void 0,\n          y0 = void 0,\n          x2 = void 0,\n          y2 = void 0,\n          x3 = void 0,\n          y3 = void 0;\n\n      if (i - 1 < 0) {\n        if (!close) {\n          x0 = points[i + 1].x;\n          y0 = points[i + 1].y;\n        } else {\n          x0 = points[l - 1].x;\n          y0 = points[l - 1].y;\n        }\n      } else {\n        x0 = points[i - 1].x;\n        y0 = points[i - 1].y;\n      }\n\n      if (i + 1 < count) {\n        x2 = points[i + 1].x;\n        y2 = points[i + 1].y;\n      } else {\n        x2 = points[i + 1 - count].x;\n        y2 = points[i + 1 - count].y;\n      }\n\n      if (i + 2 < count) {\n        x3 = points[i + 2].x;\n        y3 = points[i + 2].y;\n      } else if (!close) {\n        x3 = points[i].x;\n        y3 = points[i].y;\n      } else {\n        x3 = points[i + 2 - count].x;\n        y3 = points[i + 2 - count].y;\n      }\n\n      var ctrlPoints = getCubicControlPoints(x0, y0, x1, y1, x2, y2, x3, y3, smoothValue, i === l - 1 ? tailRatio : 1);\n\n      if (i === l - 1 && tailRatio >= 0 && tailRatio < 1) {\n        ctx.bezierCurveTo(ctrlPoints[0], ctrlPoints[1], ctrlPoints[2], ctrlPoints[3], ctrlPoints[4], ctrlPoints[5]);\n        points.splice(l - 1, count - (l - 1) - 1);\n        var lastPoint = new Point(ctrlPoints[4], ctrlPoints[5]);\n        lastPoint.prevCtrlPoint = new Point(ctrlPoints[2], ctrlPoints[3]);\n        points.push(lastPoint);\n        count = points.length;\n      } else {\n        ctx.bezierCurveTo(ctrlPoints[0], ctrlPoints[1], ctrlPoints[2], ctrlPoints[3], x2, y2);\n      }\n\n      points[i].nextCtrlPoint = ctrlPoints.slice(0, 2);\n      points[i].prevCtrlPoint = preCtrlPoints ? preCtrlPoints.slice(2) : null;\n      preCtrlPoints = ctrlPoints;\n    }\n\n    if (!close && points[1].prevCtrlPoint) {\n      points[0].nextCtrlPoint = points[1].prevCtrlPoint;\n      delete points[0].prevCtrlPoint;\n    }\n\n    if (!points[count - 1].prevCtrlPoint) {\n      points[count - 1].prevCtrlPoint = points[count - 2].nextCtrlPoint;\n    }\n\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _arcBetween: function _arcBetween(ctx, p1, p2, degree) {\n    var a = degree,\n        dist = p1.distanceTo(p2),\n        r = dist / 2 / Math.sin(a / 2);\n    var p1p2 = Math.asin((p2.y - p1.y) / dist);\n\n    if (p1.x > p2.x) {\n      p1p2 = Math.PI - p1p2;\n    }\n\n    var cp2 = 90 * RADIAN - a / 2,\n        da = p1p2 - cp2;\n    var dx = Math.cos(da) * r,\n        dy = Math.sin(da) * r,\n        cx = p1.x + dx,\n        cy = p1.y + dy;\n    var startAngle = Math.asin((p2.y - cy) / r);\n\n    if (cx > p2.x) {\n      startAngle = Math.PI - startAngle;\n    }\n\n    var endAngle = startAngle + a;\n    ctx.beginPath();\n    ctx.arc(cx, cy, r, startAngle, endAngle);\n    return [cx, cy];\n  },\n  _lineTo: function _lineTo(ctx, p) {\n    ctx.lineTo(p.x, p.y);\n  },\n  bezierCurveAndFill: function bezierCurveAndFill(ctx, points, lineOpacity, fillOpacity) {\n    ctx.beginPath();\n    var start = points[0];\n    ctx.moveTo(start.x, start.y);\n    var args = [ctx];\n    args.push.apply(args, points.splice(1));\n\n    Canvas._bezierCurveTo.apply(Canvas, args);\n\n    Canvas.fillCanvas(ctx, fillOpacity);\n\n    Canvas._stroke(ctx, lineOpacity);\n  },\n  _bezierCurveTo: function _bezierCurveTo(ctx, p1, p2, p3) {\n    ctx.bezierCurveTo(p1.x, p1.y, p2.x, p2.y, p3.x, p3.y);\n  },\n  ellipse: function ellipse(ctx, pt, width, heightTop, heightBottom, lineOpacity, fillOpacity) {\n    function bezierEllipse(x, y, a, b, b1) {\n      var k = 0.5522848,\n          ox = a * k,\n          oy = b * k,\n          oy1 = b1 * k;\n      ctx.moveTo(x - a, y);\n      ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n      ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n      ctx.bezierCurveTo(x + a, y + oy1, x + ox, y + b1, x, y + b1);\n      ctx.bezierCurveTo(x - ox, y + b1, x - a, y + oy1, x - a, y);\n      ctx.closePath();\n    }\n\n    ctx.beginPath();\n\n    if (width === heightTop && width === heightBottom) {\n      ctx.arc(pt.x, pt.y, width, 0, 2 * Math.PI);\n    } else if (ctx.ellipse) {\n      if (heightTop !== heightBottom) {\n        ctx.ellipse(pt.x, pt.y, width, heightTop, 0, RADIAN * 180, RADIAN * 360, false);\n        ctx.ellipse(pt.x, pt.y, width, heightBottom, 0, 0, RADIAN * 180, false);\n      } else {\n        ctx.ellipse(pt.x, pt.y, width, heightTop, 0, 0, RADIAN * 360, false);\n      }\n    } else {\n      bezierEllipse(pt.x, pt.y, width, heightTop, heightBottom);\n    }\n\n    Canvas.fillCanvas(ctx, fillOpacity, pt.x - width, pt.y - heightTop);\n\n    Canvas._stroke(ctx, lineOpacity, pt.x - width, pt.y - heightTop);\n  },\n  rectangle: function rectangle(ctx, pt, size, lineOpacity, fillOpacity) {\n    var x = pt.x,\n        y = pt.y;\n    ctx.beginPath();\n    ctx.rect(x, y, size['width'], size['height']);\n    Canvas.fillCanvas(ctx, fillOpacity, x, y);\n\n    Canvas._stroke(ctx, lineOpacity, x, y);\n  },\n  sector: function sector(ctx, pt, size, angles, lineOpacity, fillOpacity) {\n    var rad = RADIAN;\n    var startAngle = angles[0],\n        endAngle = angles[1];\n\n    function sector(ctx, x, y, radius, startAngle, endAngle) {\n      var sDeg = rad * -endAngle;\n      var eDeg = rad * -startAngle;\n      ctx.beginPath();\n      ctx.moveTo(x, y);\n      ctx.arc(x, y, radius, sDeg, eDeg);\n      ctx.lineTo(x, y);\n      Canvas.fillCanvas(ctx, fillOpacity, x - radius, y - radius);\n\n      Canvas._stroke(ctx, lineOpacity, x - radius, y - radius);\n    }\n\n    sector(ctx, pt.x, pt.y, size, startAngle, endAngle);\n  },\n  _isPattern: function _isPattern(style) {\n    return !isString(style) && !('addColorStop' in style);\n  },\n  drawCross: function drawCross(ctx, x, y, lineWidth, color) {\n    ctx.canvas._drawn = true;\n    ctx.strokeStyle = color;\n    ctx.lineWidth = lineWidth;\n    ctx.beginPath();\n    ctx.moveTo(x - 5, y);\n    ctx.lineTo(x + 5, y);\n    ctx.moveTo(x, y - 5);\n    ctx.lineTo(x, y + 5);\n    ctx.stroke();\n  },\n  copy: function copy(canvas, c) {\n    var target = c || createEl('canvas');\n    target.width = canvas.width;\n    target.height = canvas.height;\n    target.getContext('2d').drawImage(canvas, 0, 0);\n    return target;\n  }\n};\n\nfunction drawDashLine(ctx, startPoint, endPoint, dashArray) {\n  var fromX = startPoint.x,\n      fromY = startPoint.y,\n      toX = endPoint.x,\n      toY = endPoint.y;\n  var pattern = dashArray;\n\n  var lt = function lt(a, b) {\n    return a <= b;\n  };\n\n  var gt = function gt(a, b) {\n    return a >= b;\n  };\n\n  var capmin = function capmin(a, b) {\n    return Math.min(a, b);\n  };\n\n  var capmax = function capmax(a, b) {\n    return Math.max(a, b);\n  };\n\n  var checkX = {\n    thereYet: gt,\n    cap: capmin\n  };\n  var checkY = {\n    thereYet: gt,\n    cap: capmin\n  };\n\n  if (fromY - toY > 0) {\n    checkY.thereYet = lt;\n    checkY.cap = capmax;\n  }\n\n  if (fromX - toX > 0) {\n    checkX.thereYet = lt;\n    checkX.cap = capmax;\n  }\n\n  ctx.moveTo(fromX, fromY);\n  var offsetX = fromX;\n  var offsetY = fromY;\n  var idx = 0,\n      dash = true;\n  var ang, len;\n\n  while (!(checkX.thereYet(offsetX, toX) && checkY.thereYet(offsetY, toY))) {\n    ang = Math.atan2(toY - fromY, toX - fromX);\n    len = pattern[idx];\n    offsetX = checkX.cap(toX, offsetX + Math.cos(ang) * len);\n    offsetY = checkY.cap(toY, offsetY + Math.sin(ang) * len);\n\n    if (dash) {\n      ctx.lineTo(offsetX, offsetY);\n    } else {\n      ctx.moveTo(offsetX, offsetY);\n    }\n\n    idx = (idx + 1) % pattern.length;\n    dash = !dash;\n  }\n}\n\nvar prefix = 'data:image/';\n\nfunction extractImageUrl(url) {\n  if (url.substring(0, prefix.length) === prefix) {\n    return url;\n  }\n\n  return extractCssUrl(url);\n}\n\nfunction copyProperties(ctx, savedCtx) {\n  ctx.filter = savedCtx.filter;\n  ctx.fillStyle = savedCtx.fillStyle;\n  ctx.globalAlpha = savedCtx.globalAlpha;\n  ctx.lineCap = savedCtx.lineCap;\n  ctx.lineDashOffset = savedCtx.lineDashOffset;\n  ctx.lineJoin = savedCtx.lineJoin;\n  ctx.lineWidth = savedCtx.lineWidth;\n  ctx.shadowBlur = savedCtx.shadowBlur;\n  ctx.shadowColor = savedCtx.shadowColor;\n  ctx.shadowOffsetX = savedCtx.shadowOffsetX;\n  ctx.shadowOffsetY = savedCtx.shadowOffsetY;\n  ctx.strokeStyle = savedCtx.strokeStyle;\n}\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n\nvar zousanMin = createCommonjsModule(function (module) {\n  !function (t) {\n    function e(t) {\n      if (t) {\n        var e = this;\n        t(function (t) {\n          e.resolve(t);\n        }, function (t) {\n          e.reject(t);\n        });\n      }\n    }\n\n    function n(t, e) {\n      if (\"function\" == typeof t.y) try {\n        var n = t.y.call(i, e);\n        t.p.resolve(n);\n      } catch (o) {\n        t.p.reject(o);\n      } else t.p.resolve(e);\n    }\n\n    function o(t, e) {\n      if (\"function\" == typeof t.n) try {\n        var n = t.n.call(i, e);\n        t.p.resolve(n);\n      } catch (o) {\n        t.p.reject(o);\n      } else t.p.reject(e);\n    }\n\n    var r,\n        i,\n        c = \"fulfilled\",\n        u = \"rejected\",\n        s = \"undefined\",\n        f = function () {\n      function e() {\n        for (; n.length - o;) {\n          try {\n            n[o]();\n          } catch (e) {\n            t.console && t.console.error(e);\n          }\n\n          n[o++] = i, o == r && (n.splice(0, r), o = 0);\n        }\n      }\n\n      var n = [],\n          o = 0,\n          r = 1024,\n          c = function () {\n        if (typeof MutationObserver !== s) {\n          var t = document.createElement(\"div\"),\n              n = new MutationObserver(e);\n          return n.observe(t, {\n            attributes: !0\n          }), function () {\n            t.setAttribute(\"a\", 0);\n          };\n        }\n\n        return typeof setImmediate !== s ? function () {\n          setImmediate(e);\n        } : function () {\n          setTimeout(e, 0);\n        };\n      }();\n\n      return function (t) {\n        n.push(t), n.length - o == 1 && c();\n      };\n    }();\n\n    e.prototype = {\n      resolve: function resolve(t) {\n        if (this.state === r) {\n          if (t === this) return this.reject(new TypeError(\"Attempt to resolve promise with self\"));\n          var e = this;\n          if (t && (\"function\" == typeof t || \"object\" == typeof t)) try {\n            var o = !0,\n                i = t.then;\n            if (\"function\" == typeof i) return void i.call(t, function (t) {\n              o && (o = !1, e.resolve(t));\n            }, function (t) {\n              o && (o = !1, e.reject(t));\n            });\n          } catch (u) {\n            return void (o && this.reject(u));\n          }\n          this.state = c, this.v = t, e.c && f(function () {\n            for (var o = 0, r = e.c.length; r > o; o++) {\n              n(e.c[o], t);\n            }\n          });\n        }\n      },\n      reject: function reject(n) {\n        if (this.state === r) {\n          this.state = u, this.v = n;\n          var i = this.c;\n          i ? f(function () {\n            for (var t = 0, e = i.length; e > t; t++) {\n              o(i[t], n);\n            }\n          }) : !e.suppressUncaughtRejectionError && t.console && t.console.log(\"You upset Zousan. Please catch rejections: \", n, n ? n.stack : null);\n        }\n      },\n      then: function then(t, i) {\n        var u = new e(),\n            s = {\n          y: t,\n          n: i,\n          p: u\n        };\n        if (this.state === r) this.c ? this.c.push(s) : this.c = [s];else {\n          var l = this.state,\n              a = this.v;\n          f(function () {\n            l === c ? n(s, a) : o(s, a);\n          });\n        }\n        return u;\n      },\n      \"catch\": function _catch(t) {\n        return this.then(null, t);\n      },\n      \"finally\": function _finally(t) {\n        return this.then(t, t);\n      },\n      timeout: function timeout(t, n) {\n        n = n || \"Timeout\";\n        var o = this;\n        return new e(function (e, r) {\n          setTimeout(function () {\n            r(Error(n));\n          }, t), o.then(function (t) {\n            e(t);\n          }, function (t) {\n            r(t);\n          });\n        });\n      }\n    }, e.resolve = function (t) {\n      var n = new e();\n      return n.resolve(t), n;\n    }, e.reject = function (t) {\n      var n = new e();\n      return n.reject(t), n;\n    }, e.all = function (t) {\n      function n(n, c) {\n        n && \"function\" == typeof n.then || (n = e.resolve(n)), n.then(function (e) {\n          o[c] = e, r++, r == t.length && i.resolve(o);\n        }, function (t) {\n          i.reject(t);\n        });\n      }\n\n      for (var o = [], r = 0, i = new e(), c = 0; c < t.length; c++) {\n        n(t[c], c);\n      }\n\n      return t.length || i.resolve(o), i;\n    }, module.exports && (module.exports = e), t.define && t.define.amd && t.define([], function () {\n      return e;\n    }), t.Zousan = e, e.soon = f;\n  }(\"undefined\" != typeof commonjsGlobal ? commonjsGlobal : commonjsGlobal);\n});\nvar promise;\n\nif (typeof Promise !== 'undefined') {\n  promise = Promise;\n} else {\n  promise = zousanMin;\n}\n\nvar Promise$1 = promise;\n\nvar Eventable = function Eventable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    var _proto = _class.prototype;\n\n    _proto.on = function on$$1(eventsOn, handler, context) {\n      if (!eventsOn) {\n        return this;\n      }\n\n      if (!isString(eventsOn)) {\n        return this._switch('on', eventsOn, handler);\n      }\n\n      if (!handler) {\n        return this;\n      }\n\n      if (!this._eventMap) {\n        this._eventMap = {};\n      }\n\n      var eventTypes = eventsOn.toLowerCase().split(' ');\n      var evtType;\n\n      if (!context) {\n        context = this;\n      }\n\n      var handlerChain;\n\n      for (var ii = 0, ll = eventTypes.length; ii < ll; ii++) {\n        evtType = eventTypes[ii];\n        handlerChain = this._eventMap[evtType];\n\n        if (!handlerChain) {\n          handlerChain = [];\n          this._eventMap[evtType] = handlerChain;\n        }\n\n        var l = handlerChain.length;\n\n        if (l > 0) {\n          for (var i = 0; i < l; i++) {\n            if (handler === handlerChain[i].handler && handlerChain[i].context === context) {\n              return this;\n            }\n          }\n        }\n\n        handlerChain.push({\n          handler: handler,\n          context: context\n        });\n      }\n\n      return this;\n    };\n\n    _proto.addEventListener = function addEventListener() {\n      return this.on.apply(this, arguments);\n    };\n\n    _proto.once = function once(eventTypes, handler, context) {\n      if (!isString(eventTypes)) {\n        var once = {};\n\n        for (var p in eventTypes) {\n          if (eventTypes.hasOwnProperty(p)) {\n            once[p] = this._wrapOnceHandler(p, eventTypes[p], context);\n          }\n        }\n\n        return this._switch('on', once);\n      }\n\n      var evetTypes = eventTypes.split(' ');\n\n      for (var i = 0, l = evetTypes.length; i < l; i++) {\n        this.on(evetTypes[i], this._wrapOnceHandler(evetTypes[i], handler, context));\n      }\n\n      return this;\n    };\n\n    _proto.off = function off$$1(eventsOff, handler, context) {\n      if (!this._eventMap || !eventsOff) {\n        return this;\n      }\n\n      if (!isString(eventsOff)) {\n        return this._switch('off', eventsOff, handler);\n      }\n\n      if (!handler) {\n        return this;\n      }\n\n      var eventTypes = eventsOff.split(' ');\n      var eventType, listeners, wrapKey;\n\n      if (!context) {\n        context = this;\n      }\n\n      for (var j = 0, jl = eventTypes.length; j < jl; j++) {\n        eventType = eventTypes[j].toLowerCase();\n        wrapKey = 'Z__' + eventType;\n        listeners = this._eventMap[eventType];\n\n        if (!listeners) {\n          return this;\n        }\n\n        for (var i = listeners.length - 1; i >= 0; i--) {\n          var listener = listeners[i];\n\n          if ((handler === listener.handler || handler === listener.handler[wrapKey]) && listener.context === context) {\n            delete listener.handler[wrapKey];\n            listeners.splice(i, 1);\n          }\n        }\n\n        if (!listeners.length) {\n          delete this._eventMap[eventType];\n        }\n      }\n\n      return this;\n    };\n\n    _proto.removeEventListener = function removeEventListener() {\n      return this.off.apply(this, arguments);\n    };\n\n    _proto.listens = function listens(eventType, handler, context) {\n      if (!this._eventMap || !isString(eventType)) {\n        return 0;\n      }\n\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n\n      if (!handlerChain || !handlerChain.length) {\n        return 0;\n      }\n\n      if (!handler) {\n        return handlerChain.length;\n      }\n\n      for (var i = 0, len = handlerChain.length; i < len; i++) {\n        if (handler === handlerChain[i].handler && (isNil(context) || handlerChain[i].context === context)) {\n          return 1;\n        }\n      }\n\n      return 0;\n    };\n\n    _proto.getListeningEvents = function getListeningEvents() {\n      if (!this._eventMap) {\n        return [];\n      }\n\n      return Object.keys(this._eventMap);\n    };\n\n    _proto.copyEventListeners = function copyEventListeners(target) {\n      var eventMap = target._eventMap;\n\n      if (!eventMap) {\n        return this;\n      }\n\n      var handlerChain;\n\n      for (var eventType in eventMap) {\n        handlerChain = eventMap[eventType];\n\n        for (var i = 0, len = handlerChain.length; i < len; i++) {\n          this.on(eventType, handlerChain[i].handler, handlerChain[i].context);\n        }\n      }\n\n      return this;\n    };\n\n    _proto.fire = function fire() {\n      if (this._eventParent) {\n        return this._eventParent.fire.apply(this._eventParent, arguments);\n      }\n\n      return this._fire.apply(this, arguments);\n    };\n\n    _proto._wrapOnceHandler = function _wrapOnceHandler(evtType, handler, context) {\n      var me = this;\n      var key = 'Z__' + evtType;\n      var called = false;\n\n      var fn = function onceHandler() {\n        if (called) {\n          return;\n        }\n\n        delete fn[key];\n        called = true;\n\n        if (context) {\n          handler.apply(context, arguments);\n        } else {\n          handler.apply(this, arguments);\n        }\n\n        me.off(evtType, onceHandler, this);\n      };\n\n      fn[key] = handler;\n      return fn;\n    };\n\n    _proto._switch = function _switch(to, eventKeys, context) {\n      for (var p in eventKeys) {\n        if (eventKeys.hasOwnProperty(p)) {\n          this[to](p, eventKeys[p], context);\n        }\n      }\n\n      return this;\n    };\n\n    _proto._clearListeners = function _clearListeners(eventType) {\n      if (!this._eventMap || !isString(eventType)) {\n        return;\n      }\n\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n\n      if (!handlerChain) {\n        return;\n      }\n\n      this._eventMap[eventType] = null;\n    };\n\n    _proto._clearAllListeners = function _clearAllListeners() {\n      this._eventMap = null;\n    };\n\n    _proto._setEventParent = function _setEventParent(parent) {\n      this._eventParent = parent;\n      return this;\n    };\n\n    _proto._setEventTarget = function _setEventTarget(target) {\n      this._eventTarget = target;\n      return this;\n    };\n\n    _proto._fire = function _fire(eventType, param) {\n      if (!this._eventMap) {\n        return this;\n      }\n\n      var handlerChain = this._eventMap[eventType.toLowerCase()];\n\n      if (!handlerChain) {\n        return this;\n      }\n\n      if (!param) {\n        param = {};\n      }\n\n      param['type'] = eventType;\n      param['target'] = this._eventTarget || this;\n      var queue = handlerChain.slice(0);\n      var context, bubble, passed;\n\n      for (var i = 0, len = queue.length; i < len; i++) {\n        if (!queue[i]) {\n          continue;\n        }\n\n        context = queue[i].context;\n        bubble = true;\n        passed = extend({}, param);\n\n        if (context) {\n          bubble = queue[i].handler.call(context, passed);\n        } else {\n          bubble = queue[i].handler(passed);\n        }\n\n        if (bubble === false) {\n          if (param['domEvent']) {\n            stopPropagation(param['domEvent']);\n          }\n        }\n      }\n\n      return this;\n    };\n\n    return _class;\n  }(Base);\n};\n\nvar Handler = function () {\n  function Handler(target) {\n    this.target = target;\n  }\n\n  var _proto = Handler.prototype;\n\n  _proto.enable = function enable() {\n    if (this._enabled) {\n      return this;\n    }\n\n    this._enabled = true;\n    this.addHooks();\n    return this;\n  };\n\n  _proto.disable = function disable() {\n    if (!this._enabled) {\n      return this;\n    }\n\n    this._enabled = false;\n    this.removeHooks();\n    return this;\n  };\n\n  _proto.enabled = function enabled() {\n    return !!this._enabled;\n  };\n\n  _proto.remove = function remove() {\n    this.disable();\n    delete this.target;\n    delete this.dom;\n  };\n\n  return Handler;\n}();\n\nvar Handler$1 = Eventable(Handler);\n\nvar Class = function () {\n  function Class(options) {\n    if (!this || !this.setOptions) {\n      throw new Error('Class instance is being created without \"new\" operator.');\n    }\n\n    this.setOptions(options);\n    this.callInitHooks();\n  }\n\n  var _proto = Class.prototype;\n\n  _proto.callInitHooks = function callInitHooks() {\n    var proto = Object.getPrototypeOf(this);\n\n    this._visitInitHooks(proto);\n\n    return this;\n  };\n\n  _proto.setOptions = function setOptions(options) {\n    if (!this.hasOwnProperty('options')) {\n      this.options = this.options ? Object.create(this.options) : {};\n    }\n\n    if (!options) {\n      return this;\n    }\n\n    for (var i in options) {\n      this.options[i] = options[i];\n    }\n\n    return this;\n  };\n\n  _proto.config = function config(conf) {\n    if (!conf) {\n      var config = {};\n\n      for (var p in this.options) {\n        if (this.options.hasOwnProperty(p)) {\n          config[p] = this.options[p];\n        }\n      }\n\n      return config;\n    } else {\n      if (arguments.length === 2) {\n        var t = {};\n        t[conf] = arguments[1];\n        conf = t;\n      }\n\n      for (var i in conf) {\n        this.options[i] = conf[i];\n\n        if (this[i] && this[i] instanceof Handler$1) {\n          if (conf[i]) {\n            this[i].enable();\n          } else {\n            this[i].disable();\n          }\n        }\n      }\n\n      this.onConfig(conf);\n    }\n\n    return this;\n  };\n\n  _proto.onConfig = function onConfig() {};\n\n  _proto._visitInitHooks = function _visitInitHooks(proto) {\n    if (this._initHooksCalled) {\n      return;\n    }\n\n    var parentProto = Object.getPrototypeOf(proto);\n\n    if (parentProto._visitInitHooks) {\n      parentProto._visitInitHooks.call(this, parentProto);\n    }\n\n    this._initHooksCalled = true;\n    var hooks = proto._initHooks;\n\n    if (hooks && hooks !== parentProto._initHooks) {\n      for (var i = 0; i < hooks.length; i++) {\n        hooks[i].call(this);\n      }\n    }\n  };\n\n  Class.addInitHook = function addInitHook(fn) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var init = typeof fn === 'function' ? fn : function () {\n      this[fn].apply(this, args);\n    };\n    var proto = this.prototype;\n    var parentProto = Object.getPrototypeOf(proto);\n\n    if (!proto._initHooks || proto._initHooks === parentProto._initHooks) {\n      proto._initHooks = [];\n    }\n\n    proto._initHooks.push(init);\n\n    return this;\n  };\n\n  Class.include = function include() {\n    for (var i = 0; i < arguments.length; i++) {\n      extend(this.prototype, i < 0 || arguments.length <= i ? undefined : arguments[i]);\n    }\n\n    return this;\n  };\n\n  Class.mergeOptions = function mergeOptions(options) {\n    var proto = this.prototype;\n    var parentProto = Object.getPrototypeOf(proto);\n\n    if (!proto.options || proto.options === parentProto.options) {\n      proto.options = proto.options ? Object.create(proto.options) : {};\n    }\n\n    extend(proto.options, options);\n    return this;\n  };\n\n  return Class;\n}();\n\nvar registeredTypes = {};\n\nvar JSONAble = function JSONAble(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    _class.registerJSONType = function registerJSONType(type) {\n      if (!type) {\n        return this;\n      }\n\n      registeredTypes[type] = this;\n      return this;\n    };\n\n    _class.getJSONClass = function getJSONClass(type) {\n      if (!type) {\n        return null;\n      }\n\n      return registeredTypes[type];\n    };\n\n    var _proto = _class.prototype;\n\n    _proto.getJSONType = function getJSONType() {\n      if (this._jsonType === undefined) {\n        var clazz = Object.getPrototypeOf(this).constructor;\n\n        for (var p in registeredTypes) {\n          if (registeredTypes[p] === clazz) {\n            this._jsonType = p;\n            break;\n          }\n        }\n      }\n\n      if (!this._jsonType) {\n        throw new Error('Found an unregistered geometry class!');\n      }\n\n      return this._jsonType;\n    };\n\n    return _class;\n  }(Base);\n};\n\nfunction Handlerable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    var _proto = _class.prototype;\n\n    _proto.addHandler = function addHandler(name, handlerClass) {\n      if (!handlerClass) {\n        return this;\n      }\n\n      if (!this._handlers) {\n        this._handlers = [];\n      }\n\n      if (this[name]) {\n        this[name].enable();\n        return this;\n      }\n\n      var handler = this[name] = new handlerClass(this);\n\n      this._handlers.push(handler);\n\n      if (this.options[name]) {\n        handler.enable();\n      }\n\n      return this;\n    };\n\n    _proto.removeHandler = function removeHandler(name) {\n      if (!name) {\n        return this;\n      }\n\n      var handler = this[name];\n\n      if (handler) {\n        var hit = this._handlers.indexOf(handler);\n\n        if (hit >= 0) {\n          this._handlers.splice(hit, 1);\n        }\n\n        this[name].remove();\n        delete this[name];\n      }\n\n      return this;\n    };\n\n    _proto._clearHandlers = function _clearHandlers() {\n      for (var i = 0, len = this._handlers.length; i < len; i++) {\n        this._handlers[i].remove();\n      }\n\n      this._handlers = [];\n    };\n\n    return _class;\n  }(Base);\n}\n\nvar START_EVENTS = 'touchstart mousedown';\nvar MOVE_EVENTS = {\n  mousedown: 'mousemove',\n  touchstart: 'touchmove',\n  pointerdown: 'touchmove',\n  MSPointerDown: 'touchmove'\n};\nvar END_EVENTS = {\n  mousedown: 'mouseup',\n  touchstart: 'touchend',\n  pointerdown: 'touchend',\n  MSPointerDown: 'touchend'\n};\n\nvar DragHandler = function (_Handler) {\n  _inheritsLoose(DragHandler, _Handler);\n\n  function DragHandler(dom, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _Handler.call(this, null) || this;\n    _this.dom = dom;\n    _this.options = options;\n    return _this;\n  }\n\n  var _proto = DragHandler.prototype;\n\n  _proto.enable = function enable() {\n    if (!this.dom) {\n      return this;\n    }\n\n    this._onMouseDown = function (e) {\n      return this.onMouseDown(e);\n    };\n\n    on(this.dom, START_EVENTS, this._onMouseDown, this);\n    return this;\n  };\n\n  _proto.disable = function disable() {\n    if (!this.dom) {\n      return this;\n    }\n\n    this._offEvents();\n\n    off(this.dom, START_EVENTS, this._onMouseDown);\n    delete this._onMouseDown;\n    return this;\n  };\n\n  _proto.onMouseDown = function onMouseDown(event) {\n    if (!this.options['rightclick'] && event.button === 2) {\n      return;\n    }\n\n    if (event.touches && event.touches.length > 1) {\n      return;\n    }\n\n    if (this.options['cancelOn'] && this.options['cancelOn'](event) === true) {\n      return;\n    }\n\n    var dom = this.dom;\n\n    if (dom.setCapture) {\n      dom.setCapture();\n    } else if (window.captureEvents) {\n      window.captureEvents(window['Event'].MOUSEMOVE | window['Event'].MOUSEUP);\n    }\n\n    dom['ondragstart'] = function () {\n      return false;\n    };\n\n    delete this.moved;\n    var actual = event.touches ? event.touches[0] : event;\n    this.startPos = new Point(actual.clientX, actual.clientY);\n    on(document, MOVE_EVENTS[event.type], this.onMouseMove, this);\n    on(document, END_EVENTS[event.type], this.onMouseUp, this);\n\n    if (!this.options['ignoreMouseleave']) {\n      on(this.dom, 'mouseleave', this.onMouseUp, this);\n    }\n\n    this.fire('mousedown', {\n      'domEvent': event,\n      'mousePos': new Point(actual.clientX, actual.clientY)\n    });\n  };\n\n  _proto.onMouseMove = function onMouseMove(event) {\n    if (event.touches && event.touches.length > 1) {\n      if (this.moved) {\n        this.interupted = true;\n        this.onMouseUp(event);\n      }\n\n      return;\n    }\n\n    var actual = event.touches ? event.touches[0] : event;\n    var newPos = new Point(actual.clientX, actual.clientY),\n        offset = newPos.sub(this.startPos);\n\n    if (!offset.x && !offset.y) {\n      return;\n    }\n\n    if (!this.moved) {\n      this.fire('dragstart', {\n        'domEvent': event,\n        'mousePos': this.startPos.copy()\n      });\n      this.moved = true;\n    } else {\n      this.fire('dragging', {\n        'domEvent': event,\n        'mousePos': new Point(actual.clientX, actual.clientY)\n      });\n    }\n  };\n\n  _proto.onMouseUp = function onMouseUp(event) {\n    var actual = event.changedTouches ? event.changedTouches[0] : event;\n\n    this._offEvents();\n\n    var param = {\n      'domEvent': event\n    };\n\n    if (isNumber(actual.clientX)) {\n      param['mousePos'] = new Point(parseInt(actual.clientX, 0), parseInt(actual.clientY, 0));\n    }\n\n    if (this.moved) {\n      param.interupted = this.interupted;\n      this.fire('dragend', param);\n      delete this.interupted;\n      delete this.moved;\n    }\n\n    this.fire('mouseup', param);\n  };\n\n  _proto._offEvents = function _offEvents() {\n    var dom = this.dom;\n    off(dom, 'mouseleave', this.onMouseUp, this);\n\n    if (typeof document === 'undefined' || typeof window === 'undefined') {\n      return;\n    }\n\n    for (var i in MOVE_EVENTS) {\n      off(document, MOVE_EVENTS[i], this.onMouseMove, this);\n      off(document, END_EVENTS[i], this.onMouseUp, this);\n    }\n\n    if (dom['releaseCapture']) {\n      dom['releaseCapture']();\n    } else if (window.captureEvents) {\n      window.captureEvents(window['Event'].MOUSEMOVE | window['Event'].MOUSEUP);\n    }\n  };\n\n  return DragHandler;\n}(Handler$1);\n\nvar Coordinate = function (_Position) {\n  _inheritsLoose(Coordinate, _Position);\n\n  function Coordinate() {\n    return _Position.apply(this, arguments) || this;\n  }\n\n  Coordinate.toNumberArrays = function toNumberArrays(coordinates) {\n    if (!Array.isArray(coordinates)) {\n      return [coordinates.x, coordinates.y];\n    }\n\n    return forEachCoord(coordinates, function (coord) {\n      return [coord.x, coord.y];\n    });\n  };\n\n  Coordinate.toCoordinates = function toCoordinates(coordinates) {\n    if (isNumber(coordinates[0]) && isNumber(coordinates[1])) {\n      return new Coordinate(coordinates);\n    }\n\n    var result = [];\n\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      var child = coordinates[i];\n\n      if (Array.isArray(child)) {\n        if (isNumber(child[0])) {\n          result.push(new Coordinate(child));\n        } else {\n          result.push(Coordinate.toCoordinates(child));\n        }\n      } else {\n        result.push(new Coordinate(child));\n      }\n    }\n\n    return result;\n  };\n\n  return Coordinate;\n}(Position);\n\nvar CRS = function () {\n  function CRS(type, properties) {\n    this.type = type;\n    this.properties = properties;\n  }\n\n  CRS.createProj4 = function createProj4(proj) {\n    return new CRS('proj4', {\n      'proj': proj\n    });\n  };\n\n  CRS.fromProjectionCode = function fromProjectionCode(code) {\n    if (!code) {\n      return null;\n    }\n\n    code = code.toUpperCase().replace(':', '');\n    return CRS[code] || null;\n  };\n\n  return CRS;\n}();\n\nCRS.WGS84 = CRS.createProj4('+proj=longlat +datum=WGS84 +no_defs');\nCRS.EPSG4326 = CRS.WGS84;\nCRS.EPSG3857 = CRS.createProj4('+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs');\nCRS.IDENTITY = CRS.createProj4('+proj=identity +no_defs');\nCRS.CGCS2000 = CRS.createProj4('+proj=longlat +datum=CGCS2000');\nCRS.EPSG4490 = CRS.CGCS2000;\nCRS.BD09LL = CRS.createProj4('+proj=longlat +datum=BD09');\nCRS.GCJ02 = CRS.createProj4('+proj=longlat +datum=GCJ02');\nvar TEMP_POINT0 = new Point(0, 0);\nvar TEMP_COORD0 = new Coordinate(0, 0);\nvar TEMP_COORD1 = new Coordinate(0, 0);\nvar TEMP_COORD2 = new Coordinate(0, 0);\nvar TEMP_COORD3 = new Coordinate(0, 0);\nvar TEMP_COORD4 = new Coordinate(0, 0);\nvar TEMP_COORD5 = new Coordinate(0, 0);\nvar TEMP_COORD6 = new Coordinate(0, 0);\nvar TEMP_COORD7 = new Coordinate(0, 0);\nvar MINMAX = [];\nvar TEMP_EXTENT;\nvar TEMP_COMBINE = [];\n\nvar Extent = function () {\n  function Extent(p1, p2, p3, p4) {\n    this._clazz = Coordinate;\n    var l = arguments.length;\n    var proj = l > 0 ? arguments[l - 1] : null;\n\n    if (proj && proj.unproject) {\n      this.projection = arguments[l - 1];\n    }\n\n    this._dirty = true;\n\n    this._initialize(p1, p2, p3, p4);\n  }\n\n  var _proto = Extent.prototype;\n\n  _proto._initialize = function _initialize(p1, p2, p3, p4) {\n    this.xmin = null;\n    this.xmax = null;\n    this.ymin = null;\n    this.ymax = null;\n\n    if (isNil(p1)) {\n      return;\n    }\n\n    var projection = this.projection;\n\n    if (isNumber(p1) && isNumber(p2) && isNumber(p3) && isNumber(p4)) {\n      if (projection) {\n        this.set(p1, p2, p3, p4);\n      } else {\n        this.set(Math.min(p1, p3), Math.min(p2, p4), Math.max(p1, p3), Math.max(p2, p4));\n      }\n\n      return;\n    } else if (Array.isArray(p1)) {\n      if (projection) {\n        this.set(p1[0], p1[1], p1[2], p1[3]);\n      } else {\n        this.set(Math.min(p1[0], p1[2]), Math.min(p1[1], p1[3]), Math.max(p1[0], p1[2]), Math.max(p1[1], p1[3]));\n      }\n    } else if (isNumber(p1.x) && isNumber(p2.x) && isNumber(p1.y) && isNumber(p2.y)) {\n      if (projection) {\n        this.set(p1.x, p1.y, p2.x, p2.y);\n      } else {\n        if (p1.x > p2.x) {\n          this['xmin'] = p2.x;\n          this['xmax'] = p1.x;\n        } else {\n          this['xmin'] = p1.x;\n          this['xmax'] = p2.x;\n        }\n\n        if (p1.y > p2.y) {\n          this['ymin'] = p2.y;\n          this['ymax'] = p1.y;\n        } else {\n          this['ymin'] = p1.y;\n          this['ymax'] = p2.y;\n        }\n      }\n    } else if (isNumber(p1['xmin']) && isNumber(p1['xmax']) && isNumber(p1['ymin']) && isNumber(p1['ymax'])) {\n      this.set(p1['xmin'], p1['ymin'], p1['xmax'], p1['ymax']);\n    }\n  };\n\n  _proto._add = function _add(p) {\n    this._dirty = true;\n\n    if (!isNil(p.x)) {\n      this['xmin'] += p.x;\n      this['ymin'] += p.y;\n      this['xmax'] += p.x;\n      this['ymax'] += p.y;\n    } else if (!isNil(p.xmin)) {\n      this['xmin'] += p.xmin;\n      this['ymin'] += p.ymin;\n      this['xmax'] += p.xmax;\n      this['ymax'] += p.ymax;\n    } else if (!isNil(p[0])) {\n      this['xmin'] += p[0];\n      this['ymin'] += p[1];\n      this['xmax'] += p[0];\n      this['ymax'] += p[1];\n    }\n\n    return this;\n  };\n\n  _proto.add = function add() {\n    var e = new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n    return e._add.apply(e, arguments);\n  };\n\n  _proto._scale = function _scale(s) {\n    this._dirty = true;\n    this['xmin'] *= s;\n    this['ymin'] *= s;\n    this['xmax'] *= s;\n    this['ymax'] *= s;\n    return this;\n  };\n\n  _proto._sub = function _sub(p) {\n    this._dirty = true;\n\n    if (!isNil(p.x)) {\n      this['xmin'] -= p.x;\n      this['ymin'] -= p.y;\n      this['xmax'] -= p.x;\n      this['ymax'] -= p.y;\n    } else if (!isNil(p.xmin)) {\n      this['xmin'] -= p.xmin;\n      this['ymin'] -= p.ymin;\n      this['xmax'] -= p.xmax;\n      this['ymax'] -= p.ymax;\n    } else if (!isNil(p[0])) {\n      this['xmin'] -= p[0];\n      this['ymin'] -= p[1];\n      this['xmax'] -= p[0];\n      this['ymax'] -= p[1];\n    }\n\n    return this;\n  };\n\n  _proto._substract = function _substract() {\n    return this._sub.apply(this, arguments);\n  };\n\n  _proto.sub = function sub() {\n    var e = new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n    return e._sub.apply(e, arguments);\n  };\n\n  _proto.substract = function substract() {\n    return this.sub.apply(this, arguments);\n  };\n\n  _proto.round = function round() {\n    return new this.constructor(Math.round(this['xmin']), Math.round(this['ymin']), Math.round(this['xmax']), Math.round(this['ymax']), this.projection);\n  };\n\n  _proto._round = function _round() {\n    this._dirty = true;\n    this['xmin'] = Math.round(this['xmin']);\n    this['ymin'] = Math.round(this['ymin']);\n    this['xmax'] = Math.round(this['xmax']);\n    this['ymax'] = Math.round(this['ymax']);\n    return this;\n  };\n\n  _proto.getMin = function getMin(out) {\n    if (out) {\n      out.set(this['xmin'], this['ymin']);\n      return out;\n    }\n\n    return new this._clazz(this['xmin'], this['ymin']);\n  };\n\n  _proto.getMax = function getMax(out) {\n    if (out) {\n      out.set(this['xmax'], this['ymax']);\n      return out;\n    }\n\n    return new this._clazz(this['xmax'], this['ymax']);\n  };\n\n  _proto.getCenter = function getCenter(out) {\n    var x = (this['xmin'] + this['xmax']) / 2;\n    var y = (this['ymin'] + this['ymax']) / 2;\n\n    if (out) {\n      out.set(x, y);\n      return out;\n    }\n\n    return new this._clazz(x, y);\n  };\n\n  _proto.isValid = function isValid() {\n    return !isNil(this['xmin']) && !isNil(this['ymin']) && !isNil(this['xmax']) && !isNil(this['ymax']);\n  };\n\n  _proto.equals = function equals(ext2) {\n    return this['xmin'] === ext2['xmin'] && this['xmax'] === ext2['xmax'] && this['ymin'] === ext2['ymin'] && this['ymax'] === ext2['ymax'];\n  };\n\n  _proto.intersects = function intersects(ext2) {\n    this._project(this);\n\n    this._project(ext2);\n\n    var rxmin = Math.max(this['pxmin'], ext2['pxmin']);\n    var rymin = Math.max(this['pymin'], ext2['pymin']);\n    var rxmax = Math.min(this['pxmax'], ext2['pxmax']);\n    var rymax = Math.min(this['pymax'], ext2['pymax']);\n    var intersects = !(rxmin > rxmax || rymin > rymax);\n    return intersects;\n  };\n\n  _proto.within = function within(extent) {\n    this._project(this);\n\n    this._project(extent);\n\n    return this.pxmin >= extent.pxmin && this.pxmax <= extent.pxmax && this.pymin >= extent.pymin && this.pymax <= extent.pymax;\n  };\n\n  _proto.contains = function contains(c) {\n    if (!c) {\n      return false;\n    }\n\n    this._project(this);\n\n    var proj = this.projection;\n\n    if (proj) {\n      if (c.x !== undefined) {\n        var coord = TEMP_COORD0;\n\n        if (Array.isArray(c)) {\n          coord.x = c[0];\n          coord.y = c[1];\n        } else {\n          coord.x = c.x;\n          coord.y = c.y;\n        }\n\n        c = proj.project(coord, coord);\n      } else if (c.xmin !== undefined) {\n        this._project(c);\n      }\n    }\n\n    return (c.x || c.pxmin || 0) >= this.pxmin && (c.x || c.pxmax || 0) <= this.pxmax && (c.y || c.pymin || 0) >= this.pymin && (c.y || c.pymax || 0) <= this.pymax;\n  };\n\n  _proto.getWidth = function getWidth() {\n    return Math.abs(this['xmax'] - this['xmin']);\n  };\n\n  _proto.getHeight = function getHeight() {\n    return Math.abs(this['ymax'] - this['ymin']);\n  };\n\n  _proto.getSize = function getSize() {\n    return new Size(this.getWidth(), this.getHeight());\n  };\n\n  _proto.set = function set(xmin, ymin, xmax, ymax) {\n    this.xmin = xmin;\n    this.ymin = ymin;\n    this.xmax = xmax;\n    this.ymax = ymax;\n    this._dirty = true;\n    return this;\n  };\n\n  _proto.__combine = function __combine(extent) {\n    if (extent.x !== undefined) {\n      TEMP_EXTENT.xmin = TEMP_EXTENT.xmax = extent.x;\n      TEMP_EXTENT.ymin = TEMP_EXTENT.ymax = extent.y;\n      extent = TEMP_EXTENT;\n    }\n\n    this._project(extent);\n\n    this._project(this);\n\n    var inited = isNumber(this.pxmin);\n    var xmin, ymin, xmax, ymax;\n\n    if (!inited) {\n      xmin = extent['pxmin'];\n      ymin = extent['pymin'];\n      xmax = extent['pxmax'];\n      ymax = extent['pymax'];\n    } else {\n      xmin = Math.min(this['pxmin'], extent['pxmin']);\n      ymin = Math.min(this['pymin'], extent['pymin']);\n      xmax = Math.max(this['pxmax'], extent['pxmax']);\n      ymax = Math.max(this['pymax'], extent['pymax']);\n    }\n\n    var proj = this.projection;\n\n    if (proj) {\n      TEMP_COORD1.set(xmin, ymin);\n      TEMP_COORD2.set(xmax, ymax);\n      var min = proj.unproject(TEMP_COORD1, TEMP_COORD1),\n          max = proj.unproject(TEMP_COORD2, TEMP_COORD2);\n      xmin = min.x;\n      ymin = min.y;\n      xmax = max.x;\n      ymax = max.y;\n    }\n\n    TEMP_COMBINE[0] = xmin;\n    TEMP_COMBINE[1] = ymin;\n    TEMP_COMBINE[2] = xmax;\n    TEMP_COMBINE[3] = ymax;\n    return TEMP_COMBINE;\n  };\n\n  _proto._combine = function _combine(extent) {\n    if (!extent || extent.isValid && !extent.isValid()) {\n      return this;\n    }\n\n    var ext = this.__combine(extent);\n\n    this.set(ext[0], ext[1], ext[2], ext[3]);\n    this._dirty = true;\n    return this;\n  };\n\n  _proto.combine = function combine(extent) {\n    if (!extent || extent.isValid && !extent.isValid()) {\n      return this;\n    }\n\n    var ext = this.__combine(extent);\n\n    return new this.constructor(ext[0], ext[1], ext[2], ext[3], this.projection);\n  };\n\n  _proto.intersection = function intersection(extent) {\n    if (!this.intersects(extent)) {\n      return null;\n    }\n\n    TEMP_COORD3.x = Math.max(this['pxmin'], extent['pxmin']);\n    TEMP_COORD3.y = Math.max(this['pymin'], extent['pymin']);\n    TEMP_COORD4.x = Math.min(this['pxmax'], extent['pxmax']);\n    TEMP_COORD4.y = Math.min(this['pymax'], extent['pymax']);\n    var min = TEMP_COORD3,\n        max = TEMP_COORD4;\n    var proj = this.projection;\n\n    if (proj) {\n      min = proj.unproject(min, min);\n      max = proj.unproject(max, max);\n    }\n\n    return new this.constructor(min, max, proj);\n  };\n\n  _proto.expand = function expand(distance) {\n    var w, h;\n\n    if (!isNumber(distance)) {\n      w = distance['width'] || distance['x'] || distance[0] || 0;\n      h = distance['height'] || distance['y'] || distance[1] || 0;\n    } else {\n      w = h = distance;\n    }\n\n    return new this.constructor(this['xmin'] - w, this['ymin'] - h, this['xmax'] + w, this['ymax'] + h, this.projection);\n  };\n\n  _proto._expand = function _expand(distance) {\n    var w, h;\n\n    if (!isNumber(distance)) {\n      w = distance['width'] || distance['x'] || distance[0] || 0;\n      h = distance['height'] || distance['y'] || distance[1] || 0;\n    } else {\n      w = h = distance;\n    }\n\n    this['xmin'] -= w;\n    this['ymin'] -= h;\n    this['xmax'] += w;\n    this['ymax'] += h;\n    this._dirty = true;\n    return this;\n  };\n\n  _proto.toJSON = function toJSON() {\n    return {\n      'xmin': this['xmin'],\n      'ymin': this['ymin'],\n      'xmax': this['xmax'],\n      'ymax': this['ymax']\n    };\n  };\n\n  _proto.toArray = function toArray() {\n    var xmin = this['xmin'],\n        ymin = this['ymin'],\n        xmax = this['xmax'],\n        ymax = this['ymax'];\n    return [new this._clazz([xmin, ymax]), new this._clazz([xmax, ymax]), new this._clazz([xmax, ymin]), new this._clazz([xmin, ymin]), new this._clazz([xmin, ymax])];\n  };\n\n  _proto.toString = function toString() {\n    return this.xmin + \",\" + this.ymin + \",\" + this.xmax + \",\" + this.ymax;\n  };\n\n  _proto.copy = function copy() {\n    return new this.constructor(this['xmin'], this['ymin'], this['xmax'], this['ymax'], this.projection);\n  };\n\n  _proto.convertTo = function convertTo(fn, out) {\n    if (!this.isValid()) {\n      return null;\n    }\n\n    var e = out || new this.constructor();\n\n    if (out) {\n      e.set(null, null, null, null);\n    }\n\n    var coord;\n\n    if (this._clazz === Coordinate) {\n      coord = TEMP_COORD5;\n    } else if (this._clazz === Point) {\n      coord = TEMP_POINT0;\n    }\n\n    coord.x = this.xmin;\n    coord.y = this.ymax;\n\n    e._combine(fn(coord));\n\n    coord.x = this.xmax;\n\n    e._combine(fn(coord));\n\n    coord.y = this.ymin;\n\n    e._combine(fn(coord));\n\n    coord.x = this.xmin;\n\n    e._combine(fn(coord));\n\n    return e;\n  };\n\n  _proto._project = function _project(ext) {\n    if (!ext || !ext.isValid()) {\n      if (ext) {\n        ext.pxmin = ext.pxmax = ext.pymin = ext.pymax = null;\n      }\n\n      return;\n    }\n\n    var proj = this.projection;\n\n    if (proj) {\n      if (ext._dirty) {\n        TEMP_COORD6.set(ext.xmax, ext.ymin);\n        TEMP_COORD7.set(ext.xmin, ext.ymax);\n        MINMAX[0] = TEMP_COORD6;\n        MINMAX[1] = TEMP_COORD7;\n        var minmax = proj.projectCoords(MINMAX);\n        var min = minmax[0],\n            max = minmax[1];\n        ext.pxmin = Math.min(min.x, max.x);\n        ext.pymin = Math.min(min.y, max.y);\n        ext.pxmax = Math.max(min.x, max.x);\n        ext.pymax = Math.max(min.y, max.y);\n      }\n\n      delete ext._dirty;\n    } else {\n      ext.pxmin = ext.xmin;\n      ext.pxmax = ext.xmax;\n      ext.pymin = ext.ymin;\n      ext.pymax = ext.ymax;\n    }\n  };\n\n  return Extent;\n}();\n\nTEMP_EXTENT = new Extent(0, 0, 0, 0);\n\nvar PointExtent = function (_Extent) {\n  _inheritsLoose(PointExtent, _Extent);\n\n  function PointExtent(p1, p2, p3, p4) {\n    var _this;\n\n    _this = _Extent.call(this, p1, p2, p3, p4) || this;\n    _this._clazz = Point;\n    return _this;\n  }\n\n  return PointExtent;\n}(Extent);\n\nvar Transformation = function () {\n  function Transformation(matrix) {\n    this.matrix = matrix;\n  }\n\n  var _proto = Transformation.prototype;\n\n  _proto.transform = function transform(coordinates, scale, out) {\n    var x = this.matrix[0] * (coordinates.x - this.matrix[2]) / scale;\n    var y = -this.matrix[1] * (coordinates.y - this.matrix[3]) / scale;\n\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n\n    return new Point(x, y);\n  };\n\n  _proto.untransform = function untransform(point, scale, out) {\n    var x = point.x * scale / this.matrix[0] + this.matrix[2];\n    var y = point.y * scale / -this.matrix[1] + this.matrix[3];\n\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n\n    return new Coordinate(x, y);\n  };\n\n  return Transformation;\n}();\n\nvar Common = {\n  project: function project() {},\n  unproject: function unproject() {},\n  projectCoords: function projectCoords(coordinates) {\n    var _this = this;\n\n    if (!coordinates) {\n      return [];\n    }\n\n    if (!Array.isArray(coordinates)) {\n      return this.project(coordinates);\n    }\n\n    if (coordinates.length === 0) {\n      return [];\n    }\n\n    if (!this.isSphere()) {\n      return forEachCoord(coordinates, this.project, this);\n    }\n\n    if (Array.isArray(coordinates[0])) {\n      return coordinates.map(function (coords) {\n        return _this.projectCoords(coords);\n      });\n    } else {\n      var circum = this.getCircum();\n      var extent = this.getSphereExtent(),\n          sx = extent.sx,\n          sy = extent.sy;\n      var wrapX, wrapY;\n      var pre = coordinates[0],\n          current,\n          dx,\n          dy,\n          p;\n      var prj = [this.project(pre)];\n\n      for (var i = 1, l = coordinates.length; i < l; i++) {\n        current = coordinates[i];\n        dx = current.x - pre.x;\n        dy = current.y - pre.y;\n        p = this.project(current);\n\n        if (Math.abs(dx) > 180) {\n          if (wrapX === undefined) {\n            wrapX = current.x > pre.x;\n          }\n\n          if (wrapX) {\n            p._add(-circum.x * sign(dx) * sx, 0);\n\n            current._add(-360 * sign(dx), 0);\n          }\n        }\n\n        if (Math.abs(dy) > 90) {\n          if (wrapY === undefined) {\n            wrapY = current.y < pre.y;\n          }\n\n          if (wrapY) {\n            p._add(0, -circum.y * sign(dy) * sy);\n\n            current._add(0, -180 * sign(dy));\n          }\n        }\n\n        pre = current;\n        prj.push(p);\n      }\n\n      return prj;\n    }\n  },\n  unprojectCoords: function unprojectCoords(projCoords) {\n    if (!projCoords) {\n      return [];\n    }\n\n    if (!Array.isArray(projCoords)) {\n      return this.unproject(projCoords);\n    }\n\n    return forEachCoord(projCoords, this.unproject, this);\n  },\n  isSphere: function isSphere() {\n    return !!this.sphere;\n  },\n  isOutSphere: function isOutSphere(pcoord) {\n    if (!this.isSphere()) {\n      return false;\n    }\n\n    var extent = this.getSphereExtent();\n    return !extent.contains(pcoord);\n  },\n  wrapCoord: function wrapCoord(pcoord) {\n    if (!this.isSphere()) {\n      return pcoord;\n    }\n\n    var extent = this.getSphereExtent();\n    var wrapped = new Coordinate(pcoord);\n\n    if (!extent.contains(wrapped)) {\n      wrapped.x = wrap(pcoord.x, extent.xmin, extent.xmax);\n      wrapped.y = wrap(pcoord.y, extent.ymin, extent.ymax);\n    }\n\n    return wrapped;\n  },\n  getCircum: function getCircum() {\n    if (!this.circum && this.isSphere()) {\n      var extent = this.getSphereExtent();\n      this.circum = {\n        x: extent.getWidth(),\n        y: extent.getHeight()\n      };\n    }\n\n    return this.circum;\n  },\n  getSphereExtent: function getSphereExtent() {\n    if (!this.extent && this.isSphere()) {\n      var max = this.project(new Coordinate(180, 90)),\n          min = this.project(new Coordinate(-180, -90));\n      this.extent = new Extent(min, max, this);\n      this.extent.sx = max.x > min.x ? 1 : -1;\n      this.extent.sy = max.y > min.y ? 1 : -1;\n    }\n\n    return this.extent;\n  }\n};\nvar Common$1 = {\n  measureLength: function measureLength(c1, c2) {\n    if (!Array.isArray(c1)) {\n      return this.measureLenBetween(c1, c2);\n    }\n\n    var len = 0;\n\n    for (var i = 0, l = c1.length; i < l - 1; i++) {\n      len += this.measureLenBetween(c1[i], c1[i + 1]);\n    }\n\n    return len;\n  }\n};\nvar Identity = extend({\n  'measure': 'IDENTITY',\n  measureLenBetween: function measureLenBetween(c1, c2) {\n    if (!c1 || !c2) {\n      return 0;\n    }\n\n    try {\n      return Math.sqrt(Math.pow(c1.x - c2.x, 2) + Math.pow(c1.y - c2.y, 2));\n    } catch (err) {\n      return 0;\n    }\n  },\n  measureArea: function measureArea(coordinates) {\n    if (!Array.isArray(coordinates)) {\n      return 0;\n    }\n\n    var area = 0;\n\n    for (var i = 0, len = coordinates.length; i < len; i++) {\n      var c1 = coordinates[i];\n      var c2 = null;\n\n      if (i === len - 1) {\n        c2 = coordinates[0];\n      } else {\n        c2 = coordinates[i + 1];\n      }\n\n      area += c1.x * c2.y - c1.y * c2.x;\n    }\n\n    return Math.abs(area / 2);\n  },\n  locate: function locate(c, xDist, yDist) {\n    c = new Coordinate(c.x, c.y);\n    return this._locate(c, xDist, yDist);\n  },\n  _locate: function _locate(c, xDist, yDist) {\n    if (!c) {\n      return null;\n    }\n\n    if (!xDist) {\n      xDist = 0;\n    }\n\n    if (!yDist) {\n      yDist = 0;\n    }\n\n    if (!xDist && !yDist) {\n      return c;\n    }\n\n    c.x = c.x + xDist;\n    c.y = c.y + yDist;\n    return c;\n  },\n  rotate: function rotate(c, pivot, angle) {\n    c = new Coordinate(c.x, c.y);\n    return this._rotate(c, pivot, angle);\n  },\n  _rotate: function () {\n    var tmp = new Point(0, 0);\n    return function (c, pivot, angle) {\n      tmp.x = c.x - pivot.x;\n      tmp.y = c.y - pivot.y;\n\n      tmp._rotate(angle * Math.PI / 180);\n\n      c.x = pivot.x + tmp.x;\n      c.y = pivot.y + tmp.y;\n      return c;\n    };\n  }()\n}, Common$1);\n\nvar Sphere = function () {\n  function Sphere(radius) {\n    this.radius = radius;\n  }\n\n  var _proto = Sphere.prototype;\n\n  _proto.measureLenBetween = function measureLenBetween(c1, c2) {\n    if (!c1 || !c2) {\n      return 0;\n    }\n\n    var b = toRadian(c1.y);\n    var d = toRadian(c2.y),\n        e = b - d,\n        f = toRadian(c1.x) - toRadian(c2.x);\n    b = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(e / 2), 2) + Math.cos(b) * Math.cos(d) * Math.pow(Math.sin(f / 2), 2)));\n    b *= this.radius;\n    return Math.round(b * 1E5) / 1E5;\n  };\n\n  _proto.measureArea = function measureArea(coordinates) {\n    var a = toRadian(this.radius);\n    var b = 0,\n        c = coordinates,\n        d = c.length;\n\n    if (d < 3) {\n      return 0;\n    }\n\n    var i;\n\n    for (i = 0; i < d - 1; i++) {\n      var e = c[i],\n          f = c[i + 1];\n      b += e.x * a * Math.cos(toRadian(e.y)) * f.y * a - f.x * a * Math.cos(toRadian(f.y)) * e.y * a;\n    }\n\n    d = c[i];\n    c = c[0];\n    b += d.x * a * Math.cos(toRadian(d.y)) * c.y * a - c.x * a * Math.cos(toRadian(c.y)) * d.y * a;\n    return 0.5 * Math.abs(b);\n  };\n\n  _proto.locate = function locate(c, xDist, yDist) {\n    c = new Coordinate(c.x, c.y);\n    return this._locate(c, xDist, yDist);\n  };\n\n  _proto._locate = function _locate(c, xDist, yDist) {\n    if (!c) {\n      return null;\n    }\n\n    if (!xDist) {\n      xDist = 0;\n    }\n\n    if (!yDist) {\n      yDist = 0;\n    }\n\n    if (!xDist && !yDist) {\n      return c;\n    }\n\n    var x, y;\n    var ry = toRadian(c.y);\n\n    if (yDist !== 0) {\n      var dy = Math.abs(yDist);\n      var sy = Math.sin(dy / (2 * this.radius)) * 2;\n      ry = ry + sy * (yDist > 0 ? 1 : -1);\n      y = wrap(ry * 180 / Math.PI, -90, 90);\n    } else {\n      y = c.y;\n    }\n\n    if (xDist !== 0) {\n      var dx = Math.abs(xDist);\n      var rx = toRadian(c.x);\n      var sx = 2 * Math.sqrt(Math.pow(Math.sin(dx / (2 * this.radius)), 2) / Math.pow(Math.cos(ry), 2));\n      rx = rx + sx * (xDist > 0 ? 1 : -1);\n      x = wrap(rx * 180 / Math.PI, -180, 180);\n    } else {\n      x = c.x;\n    }\n\n    c.x = x;\n    c.y = y;\n    return c;\n  };\n\n  _proto.rotate = function rotate(c, pivot, angle) {\n    c = new Coordinate(c);\n    return this._rotate(c, pivot, angle);\n  };\n\n  _proto._rotate = function _rotate(c, pivot, angle) {\n    var initialAngle = rhumbBearing(pivot, c);\n    var finalAngle = initialAngle - angle;\n    var distance = this.measureLenBetween(pivot, c);\n    c.x = pivot.x;\n    c.y = pivot.y;\n    return calculateRhumbDestination(c, distance, finalAngle, this.radius);\n  };\n\n  return Sphere;\n}();\n\nfunction rhumbBearing(start, end, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var bear360;\n  if (options.final) bear360 = calculateRhumbBearing(end, start);else bear360 = calculateRhumbBearing(start, end);\n  var bear180 = bear360 > 180 ? -(360 - bear360) : bear360;\n  return bear180;\n}\n\nfunction calculateRhumbBearing(from, to) {\n  var phi1 = toRadian(from.y);\n  var phi2 = toRadian(to.y);\n  var deltaLambda = toRadian(to.x - from.x);\n  if (deltaLambda > Math.PI) deltaLambda -= 2 * Math.PI;\n  if (deltaLambda < -Math.PI) deltaLambda += 2 * Math.PI;\n  var deltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n  var theta = Math.atan2(deltaLambda, deltaPsi);\n  return (toDegree(theta) + 360) % 360;\n}\n\nfunction calculateRhumbDestination(origin, distance, bearing, radius) {\n  var delta = distance / radius;\n  var lambda1 = origin.x * Math.PI / 180;\n  var phi1 = toRadian(origin.y);\n  var theta = toRadian(bearing);\n  var DeltaPhi = delta * Math.cos(theta);\n  var phi2 = phi1 + DeltaPhi;\n  if (Math.abs(phi2) > Math.PI / 2) phi2 = phi2 > 0 ? Math.PI - phi2 : -Math.PI - phi2;\n  var DeltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n  var q = Math.abs(DeltaPsi) > 10e-12 ? DeltaPhi / DeltaPsi : Math.cos(phi1);\n  var DeltaLambda = delta * Math.sin(theta) / q;\n  var lambda2 = lambda1 + DeltaLambda;\n  origin.x = (lambda2 * 180 / Math.PI + 540) % 360 - 180;\n  origin.y = phi2 * 180 / Math.PI;\n  return origin;\n}\n\nvar WGS84Sphere = extend({\n  'measure': 'EPSG:4326',\n  sphere: new Sphere(6378137),\n  measureLenBetween: function measureLenBetween() {\n    return this.sphere.measureLenBetween.apply(this.sphere, arguments);\n  },\n  measureArea: function measureArea() {\n    return this.sphere.measureArea.apply(this.sphere, arguments);\n  },\n  _locate: function _locate() {\n    return this.sphere._locate.apply(this.sphere, arguments);\n  },\n  locate: function locate() {\n    return this.sphere.locate.apply(this.sphere, arguments);\n  },\n  _rotate: function _rotate() {\n    return this.sphere._rotate.apply(this.sphere, arguments);\n  },\n  rotate: function rotate() {\n    return this.sphere.rotate.apply(this.sphere, arguments);\n  }\n}, Common$1);\nvar BaiduSphere = extend({\n  'measure': 'BAIDU',\n  sphere: new Sphere(6370996.81),\n  measureLenBetween: function measureLenBetween() {\n    return this.sphere.measureLenBetween.apply(this.sphere, arguments);\n  },\n  measureArea: function measureArea() {\n    return this.sphere.measureArea.apply(this.sphere, arguments);\n  },\n  _locate: function _locate() {\n    return this.sphere._locate.apply(this.sphere, arguments);\n  },\n  locate: function locate() {\n    return this.sphere.locate.apply(this.sphere, arguments);\n  },\n  _rotate: function _rotate() {\n    return this.sphere._rotate.apply(this.sphere, arguments);\n  },\n  rotate: function rotate() {\n    return this.sphere.rotate.apply(this.sphere, arguments);\n  }\n}, Common$1);\nvar DEFAULT = WGS84Sphere;\nvar measurers = {};\n\nfunction registerMeasurer(m) {\n  measurers[m.measure] = m;\n}\n\nregisterMeasurer(Identity);\nregisterMeasurer(WGS84Sphere);\nregisterMeasurer(BaiduSphere);\nvar Measurer = {\n  getInstance: function getInstance(name) {\n    if (!name) {\n      return DEFAULT;\n    }\n\n    for (var p in measurers) {\n      if (hasOwn(measurers, p)) {\n        var mName = measurers[p]['measure'];\n\n        if (!mName) {\n          continue;\n        }\n\n        if (name.toLowerCase() === mName.toLowerCase()) {\n          return measurers[p];\n        }\n      }\n    }\n\n    return null;\n  }\n};\nvar index$2 = /*#__PURE__*/Object.freeze({\n  Identity: Identity,\n  DEFAULT: DEFAULT,\n  Measurer: Measurer,\n  WGS84Sphere: WGS84Sphere,\n  BaiduSphere: BaiduSphere\n});\nvar delta = 1E-7;\nvar EPSG3857 = extend({}, Common, {\n  code: 'EPSG:3857',\n  rad: Math.PI / 180,\n  metersPerDegree: 6378137 * Math.PI / 180,\n  maxLatitude: 85.0511287798,\n  project: function project(lnglat, out) {\n    var rad = this.rad,\n        metersPerDegree = this.metersPerDegree,\n        max = this.maxLatitude;\n    var lng = lnglat.x,\n        lat = Math.max(Math.min(max, lnglat.y), -max);\n    var c;\n\n    if (lat === 0) {\n      c = 0;\n    } else {\n      c = Math.log(Math.tan((90 + lat) * rad / 2)) / rad;\n    }\n\n    var x = lng * metersPerDegree;\n    var y = c * metersPerDegree;\n\n    if (out) {\n      out.x = x;\n      out.y = y;\n      return out;\n    }\n\n    return new Coordinate(x, y);\n  },\n  unproject: function unproject(pLnglat, out) {\n    var rad = this.rad;\n    var metersPerDegree = this.metersPerDegree;\n    var x = pLnglat.x / metersPerDegree;\n    var y = pLnglat.y;\n    var c;\n\n    if (y === 0) {\n      c = 0;\n    } else {\n      c = y / metersPerDegree;\n      c = (2 * Math.atan(Math.exp(c * rad)) - Math.PI / 2) / rad;\n    }\n\n    if (Math.abs(Math.abs(x) - 180) < delta) {\n      x = sign(x) * 180;\n    }\n\n    if (Math.abs(Math.abs(c) - this.maxLatitude) < delta) {\n      c = sign(c) * this.maxLatitude;\n    }\n\n    var rx = wrap(x, -180, 180);\n    var ry = wrap(c, -this.maxLatitude, this.maxLatitude);\n\n    if (out) {\n      out.x = rx;\n      out.y = ry;\n      return out;\n    }\n\n    return new Coordinate(rx, ry);\n  }\n}, WGS84Sphere);\nvar PROJ4326 = extend({}, Common, {\n  code: 'EPSG:4326',\n  project: function project(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n\n    return new Coordinate(p);\n  },\n  unproject: function unproject(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n\n    return new Coordinate(p);\n  }\n}, WGS84Sphere);\nvar Projection_EPSG4490 = extend({}, PROJ4326, {\n  code: 'EPSG:4490'\n});\nvar Projection_Baidu = extend({}, Common, {\n  code: 'BAIDU',\n  project: function project(p, out) {\n    return this.convertLL2MC(p, out);\n  },\n  unproject: function unproject(p, out) {\n    return this.convertMC2LL(p, out);\n  }\n}, BaiduSphere, {\n  EARTHRADIUS: 6370996.81,\n  MCBAND: [12890594.86, 8362377.87, 5591021, 3481989.83, 1678043.12, 0],\n  LLBAND: [75, 60, 45, 30, 15, 0],\n  MC2LL: [[1.410526172116255e-8, 0.00000898305509648872, -1.9939833816331, 200.9824383106796, -187.2403703815547, 91.6087516669843, -23.38765649603339, 2.57121317296198, -0.03801003308653, 17337981.2], [-7.435856389565537e-9, 0.000008983055097726239, -0.78625201886289, 96.32687599759846, -1.85204757529826, -59.36935905485877, 47.40033549296737, -16.50741931063887, 2.28786674699375, 10260144.86], [-3.030883460898826e-8, 0.00000898305509983578, 0.30071316287616, 59.74293618442277, 7.357984074871, -25.38371002664745, 13.45380521110908, -3.29883767235584, 0.32710905363475, 6856817.37], [-1.981981304930552e-8, 0.000008983055099779535, 0.03278182852591, 40.31678527705744, 0.65659298677277, -4.44255534477492, 0.85341911805263, 0.12923347998204, -0.04625736007561, 4482777.06], [3.09191371068437e-9, 0.000008983055096812155, 0.00006995724062, 23.10934304144901, -0.00023663490511, -0.6321817810242, -0.00663494467273, 0.03430082397953, -0.00466043876332, 2555164.4], [2.890871144776878e-9, 0.000008983055095805407, -3.068298e-8, 7.47137025468032, -0.00000353937994, -0.02145144861037, -0.00001234426596, 0.00010322952773, -0.00000323890364, 826088.5]],\n  LL2MC: [[-0.0015702102444, 111320.7020616939, 1704480524535203, -10338987376042340, 26112667856603880, -35149669176653700, 26595700718403920, -10725012454188240, 1800819912950474, 82.5], [0.0008277824516172526, 111320.7020463578, 647795574.6671607, -4082003173.641316, 10774905663.51142, -15171875531.51559, 12053065338.62167, -5124939663.577472, 913311935.9512032, 67.5], [0.00337398766765, 111320.7020202162, 4481351.045890365, -23393751.19931662, 79682215.47186455, -115964993.2797253, 97236711.15602145, -43661946.33752821, 8477230.501135234, 52.5], [0.00220636496208, 111320.7020209128, 51751.86112841131, 3796837.749470245, 992013.7397791013, -1221952.21711287, 1340652.697009075, -620943.6990984312, 144416.9293806241, 37.5], [-0.0003441963504368392, 111320.7020576856, 278.2353980772752, 2485758.690035394, 6070.750963243378, 54821.18345352118, 9540.606633304236, -2710.55326746645, 1405.483844121726, 22.5], [-0.0003218135878613132, 111320.7020701615, 0.00369383431289, 823725.6402795718, 0.46104986909093, 2351.343141331292, 1.58060784298199, 8.77738589078284, 0.37238884252424, 7.45]],\n  convertMC2LL: function convertMC2LL(cB, out) {\n    var cE;\n\n    for (var cD = 0, len = this.MCBAND.length; cD < len; cD++) {\n      if (Math.abs(cB.y) >= this.MCBAND[cD]) {\n        cE = this.MC2LL[cD];\n        break;\n      }\n    }\n\n    var T = this.convertor(cB, cE, out);\n    return T;\n  },\n  convertLL2MC: function convertLL2MC(T, out) {\n    var cD, cC, len;\n    T.x = this.getLoop(T.x, -180, 180);\n    T.y = this.getRange(T.y, -74, 74);\n    var cB = new Coordinate(T.x, T.y);\n\n    for (cC = 0, len = this.LLBAND.length; cC < len; cC++) {\n      if (cB.y >= this.LLBAND[cC]) {\n        cD = this.LL2MC[cC];\n        break;\n      }\n    }\n\n    if (!cD) {\n      for (cC = this.LLBAND.length - 1; cC >= 0; cC--) {\n        if (cB.y <= -this.LLBAND[cC]) {\n          cD = this.LL2MC[cC];\n          break;\n        }\n      }\n    }\n\n    var cE = this.convertor(T, cD, out);\n    return cE;\n  },\n  convertor: function convertor(cC, cD, out) {\n    if (!cC || !cD) {\n      return null;\n    }\n\n    var T = cD[0] + cD[1] * Math.abs(cC.x);\n    var cB = Math.abs(cC.y) / cD[9];\n    var cE = cD[2] + cD[3] * cB + cD[4] * cB * cB + cD[5] * cB * cB * cB + cD[6] * cB * cB * cB * cB + cD[7] * cB * cB * cB * cB * cB + cD[8] * cB * cB * cB * cB * cB * cB;\n    T *= cC.x < 0 ? -1 : 1;\n    cE *= cC.y < 0 ? -1 : 1;\n\n    if (out) {\n      out.x = T;\n      out.y = cE;\n      return out;\n    }\n\n    return new Coordinate(T, cE);\n  },\n  toRadians: function toRadians(T) {\n    return Math.PI * T / 180;\n  },\n  toDegrees: function toDegrees(T) {\n    return 180 * T / Math.PI;\n  },\n  getRange: function getRange(cC, cB, T) {\n    if (cB != null) {\n      cC = Math.max(cC, cB);\n    }\n\n    if (T != null) {\n      cC = Math.min(cC, T);\n    }\n\n    return cC;\n  },\n  getLoop: function getLoop(cC, cB, T) {\n    if (cC === Infinity) {\n      return T;\n    } else if (cC === -Infinity) {\n      return cB;\n    }\n\n    while (cC > T) {\n      cC -= T - cB;\n    }\n\n    while (cC < cB) {\n      cC += T - cB;\n    }\n\n    return cC;\n  }\n});\nvar Projection_IDENTITY = extend({}, Common, {\n  code: 'IDENTITY',\n  project: function project(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n\n    return p.copy();\n  },\n  unproject: function unproject(p, out) {\n    if (out) {\n      out.x = p.x;\n      out.y = p.y;\n      return out;\n    }\n\n    return p.copy();\n  }\n}, Identity);\nvar DEFAULT$1 = EPSG3857;\nvar projections = /*#__PURE__*/Object.freeze({\n  EPSG3857: EPSG3857,\n  DEFAULT: DEFAULT$1,\n  EPSG4326: PROJ4326,\n  EPSG4490: Projection_EPSG4490,\n  BAIDU: Projection_Baidu,\n  IDENTITY: Projection_IDENTITY,\n  Common: Common\n});\n\nvar Renderable = function Renderable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    _class.registerRenderer = function registerRenderer(name, clazz) {\n      var proto = this.prototype;\n      var parentProto = Object.getPrototypeOf(proto);\n\n      if (!proto._rendererClasses || proto._rendererClasses === parentProto._rendererClasses) {\n        proto._rendererClasses = proto._rendererClasses ? Object.create(proto._rendererClasses) : {};\n      }\n\n      proto._rendererClasses[name.toLowerCase()] = clazz;\n      return this;\n    };\n\n    _class.getRendererClass = function getRendererClass(name) {\n      var proto = this.prototype;\n\n      if (!proto._rendererClasses) {\n        return null;\n      }\n\n      return proto._rendererClasses[name.toLowerCase()];\n    };\n\n    return _class;\n  }(Base);\n};\n\nvar CanvasRenderer = function (_Class) {\n  _inheritsLoose(CanvasRenderer, _Class);\n\n  function CanvasRenderer(layer) {\n    var _this;\n\n    _this = _Class.call(this) || this;\n    _this.layer = layer;\n    _this._painted = false;\n    _this._drawTime = 0;\n\n    _this.setToRedraw();\n\n    return _this;\n  }\n\n  var _proto = CanvasRenderer.prototype;\n\n  _proto.render = function render(framestamp) {\n    this.prepareRender();\n\n    if (!this.getMap() || !this.layer.isVisible()) {\n      return;\n    }\n\n    if (!this.resources) {\n      this.resources = new ResourceCache();\n    }\n\n    this.checkAndDraw(this._tryToDraw, framestamp);\n  };\n\n  _proto.checkAndDraw = function checkAndDraw(drawFn) {\n    var _this2 = this;\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (this.checkResources) {\n      var resources = this.checkResources();\n\n      if (resources.length > 0) {\n        this._loadingResource = true;\n        this.loadResources(resources).then(function () {\n          _this2._loadingResource = false;\n\n          if (_this2.layer) {\n            _this2.layer.fire('resourceload');\n\n            _this2.setToRedraw();\n          }\n        });\n      } else {\n        drawFn.call.apply(drawFn, [this].concat(args));\n      }\n    } else {\n      drawFn.call.apply(drawFn, [this].concat(args));\n    }\n  };\n\n  _proto.testIfNeedRedraw = function testIfNeedRedraw() {\n    var map = this.getMap();\n\n    if (this._loadingResource) {\n      return false;\n    }\n\n    if (this._toRedraw) {\n      return true;\n    }\n\n    if (map.isInteracting() && !this.drawOnInteracting) {\n      return false;\n    }\n\n    if (this.needToRedraw()) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n\n    if (map.isInteracting() || map.getRenderer().isViewChanged()) {\n      return !(!map.getPitch() && map.isMoving() && !map.isZooming() && !map.isRotating() && !this.layer.options['forceRenderOnMoving']);\n    }\n\n    return false;\n  };\n\n  _proto.onSkipDrawOnInteracting = function onSkipDrawOnInteracting() {};\n\n  _proto.isLoadingResource = function isLoadingResource() {\n    return this._loadingResource;\n  };\n\n  _proto.isRenderComplete = function isRenderComplete() {\n    return !!this._renderComplete;\n  };\n\n  _proto.mustRenderOnInteracting = function mustRenderOnInteracting() {\n    return !this._painted;\n  };\n\n  _proto.setToRedraw = function setToRedraw() {\n    this._toRedraw = true;\n    return this;\n  };\n\n  _proto.setCanvasUpdated = function setCanvasUpdated() {\n    this._canvasUpdated = true;\n    return this;\n  };\n\n  _proto.isCanvasUpdated = function isCanvasUpdated() {\n    return !!this._canvasUpdated;\n  };\n\n  _proto.remove = function remove() {\n    this.onRemove();\n    delete this._loadingResource;\n    delete this.southWest;\n    delete this.canvas;\n    delete this.context;\n    delete this.canvasExtent2D;\n    delete this._extent2D;\n    delete this.resources;\n    delete this.layer;\n  };\n\n  _proto.onRemove = function onRemove() {};\n\n  _proto.onAdd = function onAdd() {};\n\n  _proto.getMap = function getMap() {\n    if (!this.layer) {\n      return null;\n    }\n\n    return this.layer.getMap();\n  };\n\n  _proto.getCanvasImage = function getCanvasImage() {\n    var map = this.getMap();\n    this._canvasUpdated = false;\n\n    if (this._renderZoom !== map.getZoom() || !this.canvas || !this._extent2D) {\n      return null;\n    }\n\n    if (this.isBlank()) {\n      return null;\n    }\n\n    if (this.layer.isEmpty && this.layer.isEmpty()) {\n      return null;\n    }\n\n    var containerPoint = map._pointToContainerPoint(this.southWest)._add(0, -map.height);\n\n    return {\n      'image': this.canvas,\n      'layer': this.layer,\n      'point': containerPoint\n    };\n  };\n\n  _proto.clear = function clear() {\n    this.clearCanvas();\n  };\n\n  _proto.isBlank = function isBlank() {\n    if (!this._painted) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.show = function show() {\n    this.setToRedraw();\n  };\n\n  _proto.hide = function hide() {\n    this.clear();\n    this.setToRedraw();\n  };\n\n  _proto.setZIndex = function setZIndex() {\n    this.setToRedraw();\n  };\n\n  _proto.hitDetect = function hitDetect(point) {\n    if (!this.context || this.layer.isEmpty && this.layer.isEmpty() || this.isBlank() || this._errorThrown) {\n      return false;\n    }\n\n    var map = this.getMap();\n    var r = map.getDevicePixelRatio();\n    var size = map.getSize();\n\n    if (point.x < 0 || point.x > size['width'] * r || point.y < 0 || point.y > size['height'] * r) {\n      return false;\n    }\n\n    try {\n      var imgData = this.context.getImageData(r * point.x, r * point.y, 1, 1).data;\n\n      if (imgData[3] > 0) {\n        return true;\n      }\n    } catch (error) {\n      if (!this._errorThrown) {\n        if (console) {\n          console.warn('hit detect failed with tainted canvas, some geometries have external resources in another domain:\\n', error);\n        }\n\n        this._errorThrown = true;\n      }\n\n      return false;\n    }\n\n    return false;\n  };\n\n  _proto.loadResources = function loadResources(resourceUrls) {\n    if (!this.resources) {\n      this.resources = new ResourceCache();\n    }\n\n    var resources = this.resources,\n        promises = [];\n\n    if (isArrayHasData(resourceUrls)) {\n      var cache = {};\n\n      for (var i = resourceUrls.length - 1; i >= 0; i--) {\n        var url = resourceUrls[i];\n\n        if (!url || !url.length || cache[url.join('-')]) {\n          continue;\n        }\n\n        cache[url.join('-')] = 1;\n\n        if (!resources.isResourceLoaded(url, true)) {\n          promises.push(new Promise$1(this._promiseResource(url)));\n        }\n      }\n    }\n\n    return Promise$1.all(promises);\n  };\n\n  _proto.prepareRender = function prepareRender() {\n    delete this._renderComplete;\n    var map = this.getMap();\n    this._renderZoom = map.getZoom();\n    this.canvasExtent2D = this._extent2D = map._get2DExtent();\n    this.southWest = map._containerPointToPoint(new Point(0, map.height));\n  };\n\n  _proto.createCanvas = function createCanvas() {\n    if (this.canvas) {\n      return;\n    }\n\n    var map = this.getMap();\n    var size = map.getSize();\n    var r = map.getDevicePixelRatio(),\n        w = r * size.width,\n        h = r * size.height;\n\n    if (this.layer._canvas) {\n      var canvas = this.layer._canvas;\n      canvas.width = w;\n      canvas.height = h;\n\n      if (canvas.style) {\n        canvas.style.width = size.width + 'px';\n        canvas.style.height = size.height + 'px';\n      }\n\n      this.canvas = this.layer._canvas;\n    } else {\n      this.canvas = Canvas.createCanvas(w, h, map.CanvasClass);\n    }\n\n    this.onCanvasCreate();\n  };\n\n  _proto.onCanvasCreate = function onCanvasCreate() {};\n\n  _proto.createContext = function createContext() {\n    if (this.gl && this.gl.canvas === this.canvas || this.context) {\n      return;\n    }\n\n    this.context = this.canvas.getContext('2d');\n\n    if (!this.context) {\n      return;\n    }\n\n    if (this.layer.options['globalCompositeOperation']) {\n      this.context.globalCompositeOperation = this.layer.options['globalCompositeOperation'];\n    }\n\n    var dpr = this.getMap().getDevicePixelRatio();\n\n    if (dpr !== 1) {\n      this.context.scale(dpr, dpr);\n    }\n  };\n\n  _proto.resetCanvasTransform = function resetCanvasTransform() {\n    if (!this.context) {\n      return;\n    }\n\n    var dpr = this.getMap().getDevicePixelRatio();\n    this.context.setTransform(dpr, 0, 0, dpr, 0, 0);\n  };\n\n  _proto.resizeCanvas = function resizeCanvas(canvasSize) {\n    var canvas = this.canvas;\n\n    if (!canvas) {\n      return;\n    }\n\n    var size = canvasSize || this.getMap().getSize();\n    var r = this.getMap().getDevicePixelRatio();\n\n    if (canvas.width === r * size.width && canvas.height === r * size.height) {\n      return;\n    }\n\n    canvas.height = r * size.height;\n    canvas.width = r * size.width;\n\n    if (r !== 1 && this.context) {\n      this.context.scale(r, r);\n    }\n\n    if (this.layer._canvas && canvas.style) {\n      canvas.style.width = size.width + 'px';\n      canvas.style.height = size.height + 'px';\n    }\n  };\n\n  _proto.clearCanvas = function clearCanvas() {\n    if (!this.context) {\n      return;\n    }\n\n    Canvas.clearRect(this.context, 0, 0, this.canvas.width, this.canvas.height);\n  };\n\n  _proto.prepareCanvas = function prepareCanvas() {\n    if (!this.canvas) {\n      this.createCanvas();\n      this.createContext();\n      this.layer.onCanvasCreate();\n      this.layer.fire('canvascreate', {\n        'context': this.context,\n        'gl': this.gl\n      });\n    } else {\n      this.resetCanvasTransform();\n      this.clearCanvas();\n      this.resizeCanvas();\n    }\n\n    delete this._maskExtent;\n    var mask = this.layer.getMask();\n\n    if (!mask) {\n      this.layer.fire('renderstart', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      return null;\n    }\n\n    var maskExtent2D = this._maskExtent = mask._getMaskPainter().get2DExtent();\n\n    if (!maskExtent2D.intersects(this._extent2D)) {\n      this.layer.fire('renderstart', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      return maskExtent2D;\n    }\n\n    this.layer.fire('renderstart', {\n      'context': this.context,\n      'gl': this.gl\n    });\n    return maskExtent2D;\n  };\n\n  _proto.clipCanvas = function clipCanvas(context) {\n    var mask = this.layer.getMask();\n\n    if (!mask) {\n      return false;\n    }\n\n    var old = this.southWest;\n    var map = this.getMap();\n    this.southWest = map._containerPointToPoint(new Point(0, map.height));\n    context.save();\n    var dpr = map.getDevicePixelRatio();\n\n    if (dpr !== 1) {\n      context.save();\n      context.scale(dpr, dpr);\n    }\n\n    if (mask.getGeometries) {\n      context.isMultiClip = true;\n      var masks = mask.getGeometries() || [];\n      context.beginPath();\n      masks.forEach(function (_mask) {\n        var painter = _mask._getMaskPainter();\n\n        painter.paint(null, context);\n      });\n      context.stroke();\n      delete context.isMultiClip;\n    } else {\n      var painter = mask._getMaskPainter();\n\n      painter.paint(null, context);\n    }\n\n    if (dpr !== 1) {\n      context.restore();\n    }\n\n    context.clip();\n    this.southWest = old;\n    return true;\n  };\n\n  _proto.getViewExtent = function getViewExtent() {\n    return {\n      'extent': this._extent2D,\n      'maskExtent': this._maskExtent,\n      'zoom': this._renderZoom,\n      'southWest': this.southWest\n    };\n  };\n\n  _proto.completeRender = function completeRender() {\n    if (this.getMap()) {\n      this._renderComplete = true;\n      this.layer.fire('renderend', {\n        'context': this.context,\n        'gl': this.gl\n      });\n      this.setCanvasUpdated();\n    }\n  };\n\n  _proto.getEvents = function getEvents() {\n    return {\n      '_zoomstart': this.onZoomStart,\n      '_zooming': this.onZooming,\n      '_zoomend': this.onZoomEnd,\n      '_resize': this.onResize,\n      '_movestart': this.onMoveStart,\n      '_moving': this.onMoving,\n      '_moveend': this.onMoveEnd,\n      '_dragrotatestart': this.onDragRotateStart,\n      '_dragrotating': this.onDragRotating,\n      '_dragrotateend': this.onDragRotateEnd,\n      '_spatialreferencechange': this.onSpatialReferenceChange\n    };\n  };\n\n  _proto.onZoomStart = function onZoomStart() {};\n\n  _proto.onZoomEnd = function onZoomEnd() {\n    this.setToRedraw();\n  };\n\n  _proto.onZooming = function onZooming() {};\n\n  _proto.onMoveStart = function onMoveStart() {};\n\n  _proto.onMoving = function onMoving() {};\n\n  _proto.onMoveEnd = function onMoveEnd() {\n    this.setToRedraw();\n  };\n\n  _proto.onResize = function onResize() {\n    delete this._extent2D;\n    this.resizeCanvas();\n    this.setToRedraw();\n  };\n\n  _proto.onDragRotateStart = function onDragRotateStart() {};\n\n  _proto.onDragRotating = function onDragRotating() {};\n\n  _proto.onDragRotateEnd = function onDragRotateEnd() {\n    this.setToRedraw();\n  };\n\n  _proto.onSpatialReferenceChange = function onSpatialReferenceChange() {};\n\n  _proto.getDrawTime = function getDrawTime() {\n    return this._drawTime;\n  };\n\n  _proto._tryToDraw = function _tryToDraw(framestamp) {\n    this._toRedraw = false;\n\n    if (!this.canvas && this.layer.isEmpty && this.layer.isEmpty()) {\n      this._renderComplete = true;\n      return;\n    }\n\n    this._drawAndRecord(framestamp);\n  };\n\n  _proto._drawAndRecord = function _drawAndRecord(framestamp) {\n    if (!this.getMap()) {\n      return;\n    }\n\n    var painted = this._painted;\n    this._painted = true;\n    var t = now();\n    this.draw(framestamp);\n    t = now() - t;\n    this._drawTime = painted ? t : t / 2;\n\n    if (painted && this.layer && this.layer.options['logDrawTime']) {\n      console.log(this.layer.getId(), 'frameTimeStamp:', framestamp, 'drawTime:', this._drawTime);\n    }\n  };\n\n  _proto._promiseResource = function _promiseResource(url) {\n    var me = this,\n        resources = this.resources,\n        crossOrigin = this.layer.options['crossOrigin'];\n    return function (resolve) {\n      if (resources.isResourceLoaded(url, true)) {\n        resolve(url);\n        return;\n      }\n\n      var img = new Image();\n\n      if (!isNil(crossOrigin)) {\n        img['crossOrigin'] = crossOrigin;\n      }\n\n      if (isSVG(url[0]) && !IS_NODE) {\n        if (url[1]) {\n          url[1] *= 2;\n        }\n\n        if (url[2]) {\n          url[2] *= 2;\n        }\n      }\n\n      img.onload = function () {\n        me._cacheResource(url, img);\n\n        resolve(url);\n      };\n\n      img.onabort = function (err) {\n        if (console) {\n          console.warn('image loading aborted: ' + url[0]);\n        }\n\n        if (err) {\n          if (console) {\n            console.warn(err);\n          }\n        }\n\n        resolve(url);\n      };\n\n      img.onerror = function (err) {\n        if (err && typeof console !== 'undefined') {\n          console.warn(err);\n        }\n\n        resources.markErrorResource(url);\n        resolve(url);\n      };\n\n      loadImage(img, url);\n    };\n  };\n\n  _proto._cacheResource = function _cacheResource(url, img) {\n    if (!this.layer || !this.resources) {\n      return;\n    }\n\n    var w = url[1],\n        h = url[2];\n\n    if (this.layer.options['cacheSvgOnCanvas'] && isSVG(url[0]) === 1 && (Browser$1.edge || Browser$1.ie)) {\n      if (isNil(w)) {\n        w = img.width || this.layer.options['defaultIconSize'][0];\n      }\n\n      if (isNil(h)) {\n        h = img.height || this.layer.options['defaultIconSize'][1];\n      }\n\n      var canvas = Canvas.createCanvas(w, h);\n      Canvas.image(canvas.getContext('2d'), img, 0, 0, w, h);\n      img = canvas;\n    }\n\n    this.resources.addResource(url, img);\n  };\n\n  return CanvasRenderer;\n}(Class);\n\nvar ResourceCache = function () {\n  function ResourceCache() {\n    this.resources = {};\n    this._errors = {};\n  }\n\n  var _proto2 = ResourceCache.prototype;\n\n  _proto2.addResource = function addResource(url, img) {\n    this.resources[url[0]] = {\n      image: img,\n      width: +url[1],\n      height: +url[2]\n    };\n  };\n\n  _proto2.isResourceLoaded = function isResourceLoaded(url, checkSVG) {\n    if (!url) {\n      return false;\n    }\n\n    var imgUrl = this._getImgUrl(url);\n\n    if (this._errors[imgUrl]) {\n      return true;\n    }\n\n    var img = this.resources[imgUrl];\n\n    if (!img) {\n      return false;\n    }\n\n    if (checkSVG && isSVG(url[0]) && (+url[1] > img.width || +url[2] > img.height)) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto2.getImage = function getImage(url) {\n    var imgUrl = this._getImgUrl(url);\n\n    if (!this.isResourceLoaded(url) || this._errors[imgUrl]) {\n      return null;\n    }\n\n    return this.resources[imgUrl].image;\n  };\n\n  _proto2.markErrorResource = function markErrorResource(url) {\n    this._errors[this._getImgUrl(url)] = 1;\n  };\n\n  _proto2.merge = function merge(res) {\n    if (!res) {\n      return this;\n    }\n\n    for (var p in res.resources) {\n      var img = res.resources[p];\n      this.addResource([p, img.width, img.height], img.image);\n    }\n\n    return this;\n  };\n\n  _proto2.forEach = function forEach(fn) {\n    if (!this.resources) {\n      return this;\n    }\n\n    for (var p in this.resources) {\n      if (hasOwn(this.resources, p)) {\n        fn(p, this.resources[p]);\n      }\n    }\n\n    return this;\n  };\n\n  _proto2._getImgUrl = function _getImgUrl(url) {\n    if (!Array.isArray(url)) {\n      return url;\n    }\n\n    return url[0];\n  };\n\n  return ResourceCache;\n}();\n\nfunction clipLine(points, bounds, round, noCut) {\n  var parts = [];\n  var k = 0,\n      segment;\n\n  for (var j = 0, l = points.length; j < l - 1; j++) {\n    segment = clipSegment(points[j], points[j + 1], bounds, j, round, noCut);\n\n    if (!segment) {\n      continue;\n    }\n\n    parts[k] = parts[k] || [];\n    parts[k].push({\n      'point': segment[0],\n      'index': j\n    });\n\n    if (segment[1] !== points[j + 1] || j === l - 2) {\n      parts[k].push({\n        'point': segment[1],\n        'index': j + 1\n      });\n      k++;\n    }\n  }\n\n  return parts;\n}\n\nvar _lastCode;\n\nfunction clipSegment(a, b, bounds, useLastCode, round, noCut) {\n  var codeA = useLastCode ? _lastCode : _getBitCode(a, bounds),\n      codeB = _getBitCode(b, bounds),\n      codeOut,\n      p,\n      newCode;\n\n  _lastCode = codeB;\n\n  while (true) {\n    if (!(codeA | codeB)) {\n      return [a, b];\n    }\n\n    if (codeA & codeB) {\n      return false;\n    }\n\n    if (noCut) {\n      return [a, b];\n    }\n\n    codeOut = codeA || codeB;\n    p = _getEdgeIntersection(a, b, codeOut, bounds, round);\n    newCode = _getBitCode(p, bounds);\n\n    if (codeOut === codeA) {\n      a = p;\n      codeA = newCode;\n    } else {\n      b = p;\n      codeB = newCode;\n    }\n  }\n}\n\nfunction clipPolygon(points, bounds, round) {\n  var edges = [1, 4, 2, 8];\n  var clippedPoints, i, j, k, a, b, len, edge, p;\n\n  for (i = 0, len = points.length; i < len; i++) {\n    points[i]._code = _getBitCode(points[i], bounds);\n  }\n\n  for (k = 0; k < 4; k++) {\n    edge = edges[k];\n    clippedPoints = [];\n\n    for (i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n      a = points[i];\n      b = points[j];\n\n      if (!(a._code & edge)) {\n        if (b._code & edge) {\n          p = _getEdgeIntersection(b, a, edge, bounds, round);\n          p._code = _getBitCode(p, bounds);\n          clippedPoints.push(p);\n        }\n\n        clippedPoints.push(a);\n      } else if (!(b._code & edge)) {\n        p = _getEdgeIntersection(b, a, edge, bounds, round);\n        p._code = _getBitCode(p, bounds);\n        clippedPoints.push(p);\n      }\n    }\n\n    points = clippedPoints;\n  }\n\n  return points;\n}\n\nfunction _getEdgeIntersection(a, b, code, bounds, round) {\n  var dx = b.x - a.x,\n      dy = b.y - a.y,\n      min = bounds.getMin(),\n      max = bounds.getMax();\n  var x, y;\n\n  if (code & 8) {\n    x = a.x + dx * (max.y - a.y) / dy;\n    y = max.y;\n  } else if (code & 4) {\n    x = a.x + dx * (min.y - a.y) / dy;\n    y = min.y;\n  } else if (code & 2) {\n    x = max.x;\n    y = a.y + dy * (max.x - a.x) / dx;\n  } else if (code & 1) {\n    x = min.x;\n    y = a.y + dy * (min.x - a.x) / dx;\n  }\n\n  var p = new Point(x, y);\n\n  if (round) {\n    p._round();\n  }\n\n  return p;\n}\n\nfunction _getBitCode(p, bounds) {\n  var code = 0;\n\n  if (p.x < bounds.getMin().x) {\n    code |= 1;\n  } else if (p.x > bounds.getMax().x) {\n    code |= 2;\n  }\n\n  if (p.y < bounds.getMin().y) {\n    code |= 4;\n  } else if (p.y > bounds.getMax().y) {\n    code |= 8;\n  }\n\n  return code;\n}\n\nfunction withInEllipse(point, center, southeast, tolerance) {\n  point = new Point(point);\n  var a = Math.abs(southeast.x - center.x),\n      b = Math.abs(southeast.y - center.y),\n      c = Math.sqrt(Math.abs(a * a - b * b)),\n      xfocus = a >= b;\n  var f1, f2, d;\n\n  if (xfocus) {\n    f1 = new Point(center.x - c, center.y);\n    f2 = new Point(center.x + c, center.y);\n    d = a * 2;\n  } else {\n    f1 = new Point(center.x, center.y - c);\n    f2 = new Point(center.x, center.y + c);\n    d = b * 2;\n  }\n\n  return point.distanceTo(f1) + point.distanceTo(f2) <= d + 2 * tolerance;\n}\n\nvar Symbolizer = function () {\n  function Symbolizer() {}\n\n  var _proto = Symbolizer.prototype;\n\n  _proto.getMap = function getMap() {\n    return this.geometry.getMap();\n  };\n\n  _proto.getPainter = function getPainter() {\n    return this.painter;\n  };\n\n  _proto.isDynamicSize = function isDynamicSize() {\n    return false;\n  };\n\n  Symbolizer.testColor = function testColor(prop) {\n    if (!prop || !isString(prop)) {\n      return false;\n    }\n\n    if (COLOR_PROPERTIES.indexOf(prop) >= 0) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return Symbolizer;\n}();\n\nvar CanvasSymbolizer = function (_Symbolizer) {\n  _inheritsLoose(CanvasSymbolizer, _Symbolizer);\n\n  function CanvasSymbolizer() {\n    return _Symbolizer.apply(this, arguments) || this;\n  }\n\n  var _proto = CanvasSymbolizer.prototype;\n\n  _proto._prepareContext = function _prepareContext(ctx) {\n    if (isNumber(this.symbol['opacity'])) {\n      if (ctx.globalAlpha !== this.symbol['opacity']) {\n        ctx.globalAlpha = this.symbol['opacity'];\n      }\n    } else if (ctx.globalAlpha !== 1) {\n      ctx.globalAlpha = 1;\n    }\n  };\n\n  _proto.prepareCanvas = function prepareCanvas(ctx, style, resources) {\n    Canvas.prepareCanvas(ctx, style, resources, this.getPainter().isHitTesting());\n  };\n\n  _proto.remove = function remove() {};\n\n  _proto.setZIndex = function setZIndex() {};\n\n  _proto.show = function show() {};\n\n  _proto.hide = function hide() {};\n\n  _proto._defineStyle = function _defineStyle(style) {\n    return function () {\n      var _this = this;\n\n      var arr = [],\n          prop = {};\n      return loadFunctionTypes(style, function () {\n        var map = _this.getMap();\n\n        return set$1(arr, map.getZoom(), extend({}, _this.geometry.getProperties(), setProp(prop, map.getBearing(), map.getPitch(), map.getZoom())));\n      });\n    }.bind(this)();\n  };\n\n  return CanvasSymbolizer;\n}(Symbolizer);\n\nfunction set$1(arr, a0, a1) {\n  arr[0] = a0;\n  arr[1] = a1;\n  return arr;\n}\n\nfunction setProp(prop, b, p, z) {\n  prop['{bearing}'] = b;\n  prop['{pitch}'] = p;\n  prop['{zoom}'] = z;\n  return prop;\n}\n\nvar TEMP_POINT0$1 = new Point(0, 0);\nvar TEMP_POINT1 = new Point(0, 0);\n\nvar PointSymbolizer = function (_CanvasSymbolizer) {\n  _inheritsLoose(PointSymbolizer, _CanvasSymbolizer);\n\n  function PointSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _CanvasSymbolizer.call(this) || this;\n    _this.symbol = symbol;\n    _this.geometry = geometry;\n    _this.painter = painter;\n    return _this;\n  }\n\n  var _proto = PointSymbolizer.prototype;\n\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n    var glZoom = map.getGLZoom();\n    var extent = new PointExtent();\n\n    var renderPoints = this._getRenderPoints()[0];\n\n    for (var i = renderPoints.length - 1; i >= 0; i--) {\n      if (renderPoints[i]) {\n        extent._combine(map._pointToPoint(renderPoints[i], glZoom));\n      }\n    }\n\n    return extent;\n  };\n\n  _proto.isDynamicSize = function isDynamicSize() {\n    var symbol = this.symbol;\n    return isFunctionDefinition(symbol['markerWidth']) || isFunctionDefinition(symbol['markerHeight']) || isFunctionDefinition(symbol['textSize']);\n  };\n\n  _proto._rotateExtent = function _rotateExtent(fixedExtent, angle) {\n    return fixedExtent.convertTo(function (p) {\n      return p._rotate(angle);\n    });\n  };\n\n  _proto._getRenderPoints = function _getRenderPoints() {\n    var painter = this.getPainter();\n    var placement = painter.isSpriting() ? 'center' : this.getPlacement();\n    return this.getPainter().getRenderPoints(placement);\n  };\n\n  _proto._getRenderContainerPoints = function _getRenderContainerPoints(ignoreAltitude) {\n    var painter = this.getPainter(),\n        points = this._getRenderPoints()[0];\n\n    if (painter.isSpriting()) {\n      return points;\n    }\n\n    var dxdy = this.getDxDy();\n\n    var cpoints = this.painter._pointContainerPoints(points, dxdy.x, dxdy.y, ignoreAltitude, true, this.getPlacement());\n\n    if (!cpoints || !Array.isArray(cpoints[0])) {\n      return cpoints;\n    }\n\n    var flat = [];\n\n    for (var i = 0, l = cpoints.length; i < l; i++) {\n      for (var ii = 0, ll = cpoints[i].length; ii < ll; ii++) {\n        flat.push(cpoints[i][ii]);\n      }\n    }\n\n    return flat;\n  };\n\n  _proto._getRotationAt = function _getRotationAt(i) {\n    var r = this.getRotation();\n\n    if (!r) {\n      r = 0;\n    }\n\n    var rotations = this._getRenderPoints()[1];\n\n    if (!rotations || !rotations[i]) {\n      return r;\n    }\n\n    var map = this.getMap();\n    var p0 = rotations[i][0],\n        p1 = rotations[i][1];\n\n    if (map.isTransforming()) {\n      var maxZoom = map.getGLZoom();\n      p0 = map._pointToContainerPoint(rotations[i][0], maxZoom, 0, TEMP_POINT0$1);\n      p1 = map._pointToContainerPoint(rotations[i][1], maxZoom, 0, TEMP_POINT1);\n      return r + computeDegree(p0.x, p0.y, p1.x, p1.y);\n    } else {\n      return r + -computeDegree(p0.x, p0.y, p1.x, p1.y);\n    }\n  };\n\n  _proto._rotate = function _rotate(ctx, origin, rotation) {\n    if (rotation) {\n      var dxdy = this.getDxDy();\n      var p = origin.sub(dxdy);\n      ctx.save();\n      ctx.translate(p.x, p.y);\n      ctx.rotate(rotation);\n      return this.getDxDy();\n    }\n\n    return null;\n  };\n\n  return PointSymbolizer;\n}(CanvasSymbolizer);\n\nvar VectorMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(VectorMarkerSymbolizer, _PointSymbolizer);\n\n  VectorMarkerSymbolizer.test = function test(symbol) {\n    if (!symbol) {\n      return false;\n    }\n\n    if (isNil(symbol['markerFile']) && !isNil(symbol['markerType']) && symbol['markerType'] !== 'path') {\n      return true;\n    }\n\n    return false;\n  };\n\n  function VectorMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    _this._dynamic = hasFunctionDefinition(symbol);\n    _this.style = _this._defineStyle(_this.translate());\n    _this.strokeAndFill = _this._defineStyle(VectorMarkerSymbolizer.translateLineAndFill(_this.style));\n    var lineWidth = _this.strokeAndFill['lineWidth'];\n\n    if (lineWidth % 2 === 0) {\n      _this.padding = 2;\n    } else {\n      _this.padding = 1.5;\n    }\n\n    return _this;\n  }\n\n  var _proto = VectorMarkerSymbolizer.prototype;\n\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n\n    if (!this.painter.isHitTesting() && (style['markerWidth'] === 0 || style['markerHeight'] === 0 || style['polygonOpacity'] === 0 && style['lineOpacity'] === 0)) {\n      return;\n    }\n\n    var cookedPoints = this._getRenderContainerPoints();\n\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n\n    this._prepareContext(ctx);\n\n    if (this.getPainter().isSpriting() || this.geometry.getLayer().getMask() === this.geometry || this._dynamic || this.geometry.getLayer().options['cacheVectorOnCanvas'] === false) {\n      this._drawMarkers(ctx, cookedPoints, resources);\n    } else {\n      this._drawMarkersWithCache(ctx, cookedPoints, resources);\n    }\n  };\n\n  _proto.getDxDy = function getDxDy() {\n    var s = this.style;\n    var dx = s['markerDx'],\n        dy = s['markerDy'];\n    return new Point(dx, dy);\n  };\n\n  _proto._drawMarkers = function _drawMarkers(ctx, cookedPoints, resources) {\n    var strokeAndFill = this.strokeAndFill;\n    var gradient = isGradient(strokeAndFill['lineColor']) || isGradient(strokeAndFill['polygonFill']);\n\n    if (!gradient) {\n      this.prepareCanvas(ctx, strokeAndFill, resources);\n    }\n\n    for (var i = cookedPoints.length - 1; i >= 0; i--) {\n      var point = cookedPoints[i];\n\n      var origin = this._rotate(ctx, point, this._getRotationAt(i));\n\n      if (origin) {\n        point = origin;\n      }\n\n      this._drawVectorMarker(ctx, point, resources);\n\n      if (origin) {\n        ctx.restore();\n      }\n    }\n  };\n\n  _proto._drawMarkersWithCache = function _drawMarkersWithCache(ctx, cookedPoints, resources) {\n    var stamp = this._stampSymbol();\n\n    var image = resources.getImage(stamp);\n\n    if (!image) {\n      image = this._createMarkerImage(ctx, resources);\n      resources.addResource([stamp, image.width, image.height], image);\n    }\n\n    var anchor = this._getAnchor(image.width, image.height);\n\n    for (var i = cookedPoints.length - 1; i >= 0; i--) {\n      var point = cookedPoints[i];\n\n      var origin = this._rotate(ctx, point, this._getRotationAt(i));\n\n      if (origin) {\n        point = origin;\n      }\n\n      Canvas.image(ctx, image, point.x + anchor.x, point.y + anchor.y);\n\n      if (origin) {\n        ctx.restore();\n      }\n    }\n  };\n\n  _proto._calMarkerSize = function _calMarkerSize() {\n    if (!this._size) {\n      var lineWidth = this.strokeAndFill['lineWidth'],\n          shadow = 2 * (this.symbol['shadowBlur'] || 0),\n          w = Math.round(this.style['markerWidth'] + lineWidth + 2 * shadow + this.padding * 2),\n          h = Math.round(this.style['markerHeight'] + lineWidth + 2 * shadow + this.padding * 2);\n\n      if (isFunctionDefinition(this.symbol['markerWidth']) || isFunctionDefinition(this.symbol['markerHeight'])) {\n        return [w, h];\n      }\n\n      this._size = [w, h];\n    }\n\n    return this._size;\n  };\n\n  _proto._createMarkerImage = function _createMarkerImage(ctx, resources) {\n    var canvasClass = ctx.canvas.constructor,\n        size = this._calMarkerSize(),\n        canvas = Canvas.createCanvas(size[0], size[1], canvasClass),\n        point = this._getCacheImageAnchor(size[0], size[1]);\n\n    var context = canvas.getContext('2d');\n    var gradient = isGradient(this.strokeAndFill['lineColor']) || isGradient(this.strokeAndFill['polygonFill']);\n\n    if (!gradient) {\n      this.prepareCanvas(context, this.strokeAndFill, resources);\n    }\n\n    this._drawVectorMarker(context, point, resources);\n\n    return canvas;\n  };\n\n  _proto._stampSymbol = function _stampSymbol() {\n    if (!this._stamp) {\n      this._stamp = [this.style['markerType'], isGradient(this.style['markerFill']) ? getGradientStamp(this.style['markerFill']) : this.style['markerFill'], this.style['markerFillOpacity'], this.style['markerFillPatternFile'], isGradient(this.style['markerLineColor']) ? getGradientStamp(this.style['markerLineColor']) : this.style['markerLineColor'], this.style['markerLineWidth'], this.style['markerLineOpacity'], this.style['markerLineDasharray'] ? this.style['markerLineDasharray'].join(',') : '', this.style['markerLinePatternFile'], this.style['markerWidth'], this.style['markerHeight'], this.style['markerHorizontalAlignment'], this.style['markerVerticalAlignment']].join('_');\n    }\n\n    return this._stamp;\n  };\n\n  _proto._getAnchor = function _getAnchor(w, h) {\n    var shadow = 2 * (this.symbol['shadowBlur'] || 0),\n        margin = shadow + this.padding;\n    var p = getAlignPoint(new Size(w, h), this.style['markerHorizontalAlignment'], this.style['markerVerticalAlignment']);\n\n    if (p.x !== -w / 2) {\n      p.x -= sign(p.x + w / 2) * margin;\n    }\n\n    if (p.y !== -h / 2) {\n      p.y -= sign(p.y + h / 2) * margin;\n    }\n\n    return p;\n  };\n\n  _proto._getCacheImageAnchor = function _getCacheImageAnchor(w, h) {\n    var shadow = 2 * (this.symbol['shadowBlur'] || 0),\n        margin = shadow + this.padding;\n    var markerType = this.style['markerType'];\n\n    if (markerType === 'bar' || markerType === 'pie' || markerType === 'pin') {\n      return new Point(w / 2, h - margin);\n    } else if (markerType === 'rectangle') {\n      return new Point(margin, margin);\n    } else {\n      return new Point(w / 2, h / 2);\n    }\n  };\n\n  _proto._getGraidentExtent = function _getGraidentExtent(points) {\n    var e = new PointExtent(),\n        dxdy = this.getDxDy(),\n        m = this.getFixedExtent();\n\n    if (Array.isArray(points)) {\n      for (var i = points.length - 1; i >= 0; i--) {\n        e._combine(points[i]);\n      }\n    } else {\n      e._combine(points);\n    }\n\n    e['xmin'] += m['xmin'] - dxdy.x;\n    e['ymin'] += m['ymin'] - dxdy.y;\n    e['xmax'] += m['xmax'] - dxdy.x;\n    e['ymax'] += m['ymax'] - dxdy.y;\n    return e;\n  };\n\n  _proto._drawVectorMarker = function _drawVectorMarker(ctx, point, resources) {\n    var style = this.style,\n        strokeAndFill = this.strokeAndFill,\n        markerType = style['markerType'].toLowerCase(),\n        vectorArray = VectorMarkerSymbolizer._getVectorPoints(markerType, style['markerWidth'], style['markerHeight']),\n        lineOpacity = strokeAndFill['lineOpacity'],\n        fillOpacity = strokeAndFill['polygonOpacity'];\n\n    var gradient = isGradient(strokeAndFill['lineColor']) || isGradient(strokeAndFill['polygonFill']);\n\n    if (gradient) {\n      var gradientExtent;\n\n      if (isGradient(strokeAndFill['lineColor'])) {\n        gradientExtent = this._getGraidentExtent(point);\n        strokeAndFill['lineGradientExtent'] = gradientExtent.expand(strokeAndFill['lineWidth']);\n      }\n\n      if (isGradient(strokeAndFill['polygonFill'])) {\n        if (!gradientExtent) {\n          gradientExtent = this._getGraidentExtent(point);\n        }\n\n        strokeAndFill['polygonGradientExtent'] = gradientExtent;\n      }\n\n      this.prepareCanvas(ctx, strokeAndFill, resources);\n    }\n\n    var width = style['markerWidth'],\n        height = style['markerHeight'],\n        hLineWidth = style['markerLineWidth'] / 2;\n\n    if (markerType === 'ellipse') {\n      Canvas.ellipse(ctx, point, width / 2, height / 2, height / 2, lineOpacity, fillOpacity);\n    } else if (markerType === 'cross' || markerType === 'x') {\n      for (var j = vectorArray.length - 1; j >= 0; j--) {\n        vectorArray[j]._add(point);\n      }\n\n      Canvas.path(ctx, vectorArray.slice(0, 2), lineOpacity);\n      Canvas.path(ctx, vectorArray.slice(2, 4), lineOpacity);\n    } else if (markerType === 'diamond' || markerType === 'bar' || markerType === 'square' || markerType === 'rectangle' || markerType === 'triangle') {\n      if (markerType === 'bar') {\n        point = point.add(0, -hLineWidth);\n      } else if (markerType === 'rectangle') {\n        point = point.add(hLineWidth, hLineWidth);\n      }\n\n      for (var _j = vectorArray.length - 1; _j >= 0; _j--) {\n        vectorArray[_j]._add(point);\n      }\n\n      Canvas.polygon(ctx, vectorArray, lineOpacity, fillOpacity);\n    } else if (markerType === 'pin') {\n      point = point.add(0, -hLineWidth);\n\n      for (var _j2 = vectorArray.length - 1; _j2 >= 0; _j2--) {\n        vectorArray[_j2]._add(point);\n      }\n\n      var lineCap = ctx.lineCap;\n      ctx.lineCap = 'round';\n      Canvas.bezierCurveAndFill(ctx, vectorArray, lineOpacity, fillOpacity);\n      ctx.lineCap = lineCap;\n    } else if (markerType === 'pie') {\n      point = point.add(0, hLineWidth);\n      var angle = Math.atan(width / 2 / height) * 180 / Math.PI;\n      var _lineCap = ctx.lineCap;\n      ctx.lineCap = 'round';\n      Canvas.sector(ctx, point, height, [90 - angle, 90 + angle], lineOpacity, fillOpacity);\n      ctx.lineCap = _lineCap;\n    } else {\n      throw new Error('unsupported markerType: ' + markerType);\n    }\n  };\n\n  _proto.getPlacement = function getPlacement() {\n    return this.symbol['markerPlacement'];\n  };\n\n  _proto.getRotation = function getRotation() {\n    var r = this.style['markerRotation'];\n\n    if (!isNumber(r)) {\n      return null;\n    }\n\n    return -r * Math.PI / 180;\n  };\n\n  _proto.getFixedExtent = function getFixedExtent() {\n    var dxdy = this.getDxDy(),\n        padding = this.padding * 2;\n\n    var size = this._calMarkerSize().map(function (d) {\n      return d - padding;\n    });\n\n    var alignPoint = this._getAnchor(size[0], size[1]);\n\n    var result = new PointExtent(dxdy.add(0, 0), dxdy.add(size[0], size[1]));\n\n    result._add(alignPoint);\n\n    var rotation = this.getRotation();\n\n    if (rotation) {\n      result = this._rotateExtent(result, rotation);\n    }\n\n    return result;\n  };\n\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'markerType': getValueOrDefault(s['markerType'], 'ellipse'),\n      'markerFill': getValueOrDefault(s['markerFill'], '#00f'),\n      'markerFillOpacity': getValueOrDefault(s['markerFillOpacity'], 1),\n      'markerFillPatternFile': getValueOrDefault(s['markerFillPatternFile'], null),\n      'markerLineColor': getValueOrDefault(s['markerLineColor'], '#000'),\n      'markerLineWidth': getValueOrDefault(s['markerLineWidth'], 1),\n      'markerLineOpacity': getValueOrDefault(s['markerLineOpacity'], 1),\n      'markerLineDasharray': getValueOrDefault(s['markerLineDasharray'], []),\n      'markerLinePatternFile': getValueOrDefault(s['markerLinePatternFile'], null),\n      'markerDx': getValueOrDefault(s['markerDx'], 0),\n      'markerDy': getValueOrDefault(s['markerDy'], 0),\n      'markerWidth': getValueOrDefault(s['markerWidth'], 10),\n      'markerHeight': getValueOrDefault(s['markerHeight'], 10),\n      'markerRotation': getValueOrDefault(s['markerRotation'], 0)\n    };\n    var markerType = result['markerType'];\n    var ha, va;\n\n    if (markerType === 'bar' || markerType === 'pie' || markerType === 'pin') {\n      ha = 'middle';\n      va = 'top';\n    } else if (markerType === 'rectangle') {\n      ha = 'right';\n      va = 'bottom';\n    } else {\n      ha = 'middle';\n      va = 'middle';\n    }\n\n    result['markerHorizontalAlignment'] = getValueOrDefault(s['markerHorizontalAlignment'], ha);\n    result['markerVerticalAlignment'] = getValueOrDefault(s['markerVerticalAlignment'], va);\n\n    if (isNumber(s['markerOpacity'])) {\n      if (isNumber(s['markerFillOpacity'])) {\n        result['markerFillOpacity'] *= s['markerOpacity'];\n      }\n\n      if (isNumber(s['markerLineOpacity'])) {\n        result['markerLineOpacity'] *= s['markerOpacity'];\n      }\n    }\n\n    return result;\n  };\n\n  VectorMarkerSymbolizer.translateLineAndFill = function translateLineAndFill(s) {\n    var result = {\n      'lineColor': s['markerLineColor'],\n      'linePatternFile': s['markerLinePatternFile'],\n      'lineWidth': s['markerLineWidth'],\n      'lineOpacity': s['markerLineOpacity'],\n      'lineDasharray': s['markerLineDasharray'],\n      'lineCap': 'butt',\n      'lineJoin': 'round',\n      'polygonFill': s['markerFill'],\n      'polygonPatternFile': s['markerFillPatternFile'],\n      'polygonOpacity': s['markerFillOpacity']\n    };\n\n    if (result['lineWidth'] === 0) {\n      result['lineOpacity'] = 0;\n    }\n\n    return result;\n  };\n\n  VectorMarkerSymbolizer._getVectorPoints = function _getVectorPoints(markerType, width, height) {\n    var hh = height / 2,\n        hw = width / 2;\n    var left = 0,\n        top = 0;\n    var v0, v1, v2, v3;\n\n    if (markerType === 'triangle') {\n      v0 = new Point(left, top - hh);\n      v1 = new Point(left - hw, top + hh);\n      v2 = new Point(left + hw, top + hh);\n      return [v0, v1, v2];\n    } else if (markerType === 'cross') {\n      v0 = new Point(left - hw, top);\n      v1 = new Point(left + hw, top);\n      v2 = new Point(left, top - hh);\n      v3 = new Point(left, top + hh);\n      return [v0, v1, v2, v3];\n    } else if (markerType === 'diamond') {\n      v0 = new Point(left - hw, top);\n      v1 = new Point(left, top - hh);\n      v2 = new Point(left + hw, top);\n      v3 = new Point(left, top + hh);\n      return [v0, v1, v2, v3];\n    } else if (markerType === 'square') {\n      v0 = new Point(left - hw, top + hh);\n      v1 = new Point(left + hw, top + hh);\n      v2 = new Point(left + hw, top - hh);\n      v3 = new Point(left - hw, top - hh);\n      return [v0, v1, v2, v3];\n    } else if (markerType === 'rectangle') {\n      v0 = new Point(left, top);\n      v1 = v0.add(width, 0);\n      v2 = v0.add(width, height);\n      v3 = v0.add(0, height);\n      return [v0, v1, v2, v3];\n    } else if (markerType === 'x') {\n      v0 = new Point(left - hw, top + hh);\n      v1 = new Point(left + hw, top - hh);\n      v2 = new Point(left + hw, top + hh);\n      v3 = new Point(left - hw, top - hh);\n      return [v0, v1, v2, v3];\n    } else if (markerType === 'bar') {\n      v0 = new Point(left - hw, top - height);\n      v1 = new Point(left + hw, top - height);\n      v2 = new Point(left + hw, top);\n      v3 = new Point(left - hw, top);\n      return [v0, v1, v2, v3];\n    } else if (markerType === 'pin') {\n      var extWidth = height * Math.atan(hw / hh);\n      v0 = new Point(left, top);\n      v1 = new Point(left - extWidth, top - height);\n      v2 = new Point(left + extWidth, top - height);\n      v3 = new Point(left, top);\n      return [v0, v1, v2, v3];\n    }\n\n    return [];\n  };\n\n  return VectorMarkerSymbolizer;\n}(PointSymbolizer);\n\nvar DebugSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(DebugSymbolizer, _PointSymbolizer);\n\n  function DebugSymbolizer() {\n    return _PointSymbolizer.apply(this, arguments) || this;\n  }\n\n  var _proto = DebugSymbolizer.prototype;\n\n  _proto.getPlacement = function getPlacement() {\n    return 'point';\n  };\n\n  _proto.getDxDy = function getDxDy() {\n    return new Point(0, 0);\n  };\n\n  _proto.symbolize = function symbolize(ctx) {\n    var geometry = this.geometry,\n        layer = geometry.getLayer();\n\n    if (!geometry.options['debug'] && layer && !layer.options['debug']) {\n      return;\n    }\n\n    var map = this.getMap();\n\n    if (!map || map.isZooming()) {\n      return;\n    }\n\n    var color = layer.options['debugOutline'],\n        op = 1;\n    ctx.strokeStyle = color;\n    ctx.fillStyle = color;\n    var outline = this.getPainter().getContainerExtent().toArray();\n    Canvas.polygon(ctx, [outline], op, 0);\n\n    var points = this._getRenderContainerPoints(),\n        id = this.geometry.getId(),\n        cross = VectorMarkerSymbolizer._getVectorPoints('cross', 10, 10);\n\n    for (var i = 0; i < points.length; i++) {\n      var p = points[i];\n\n      if (!isNil(id)) {\n        Canvas.fillText(ctx, id, p.add(8, -4), color);\n      }\n\n      var c = [];\n\n      for (var ii = 0; ii < cross.length; ii++) {\n        c.push(cross[ii].add(p));\n      }\n\n      Canvas.path(ctx, c.slice(0, 2), op);\n      Canvas.path(ctx, c.slice(2, 4), op);\n    }\n  };\n\n  return DebugSymbolizer;\n}(PointSymbolizer);\n\nvar ImageMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(ImageMarkerSymbolizer, _PointSymbolizer);\n\n  ImageMarkerSymbolizer.test = function test(symbol) {\n    if (!symbol) {\n      return false;\n    }\n\n    if (!isNil(symbol['markerFile'])) {\n      return true;\n    }\n\n    return false;\n  };\n\n  function ImageMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    _this.style = _this._defineStyle(_this.translate());\n    return _this;\n  }\n\n  var _proto = ImageMarkerSymbolizer.prototype;\n\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n\n    if (!this.painter.isHitTesting() && (style['markerWidth'] === 0 || style['markerHeight'] === 0 || style['markerOpacity'] === 0)) {\n      return;\n    }\n\n    var cookedPoints = this._getRenderContainerPoints();\n\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n\n    var img = this._getImage(resources);\n\n    if (!img) {\n      if (typeof console !== 'undefined') {\n        console.warn('no img found for ' + (this.style['markerFile'] || this._url[0]));\n      }\n\n      return;\n    }\n\n    this._prepareContext(ctx);\n\n    var width = style['markerWidth'];\n    var height = style['markerHeight'];\n\n    if (!isNumber(width) || !isNumber(height)) {\n      width = img.width;\n      height = img.height;\n      style['markerWidth'] = width;\n      style['markerHeight'] = height;\n      var imgURL = [style['markerFile'], style['markerWidth'], style['markerHeight']];\n\n      if (!resources.isResourceLoaded(imgURL)) {\n        resources.addResource(imgURL, img);\n      }\n\n      var painter = this.getPainter();\n\n      if (!painter.isSpriting()) {\n        painter.removeCache();\n      }\n    }\n\n    var alpha;\n\n    if (this.symbol['markerType'] !== 'path' && isNumber(style['markerOpacity']) && style['markerOpacity'] < 1) {\n      alpha = ctx.globalAlpha;\n      ctx.globalAlpha *= style['markerOpacity'];\n    }\n\n    var alignPoint = getAlignPoint(new Size(width, height), style['markerHorizontalAlignment'], style['markerVerticalAlignment']);\n\n    for (var i = 0, len = cookedPoints.length; i < len; i++) {\n      var p = cookedPoints[i];\n\n      var origin = this._rotate(ctx, p, this._getRotationAt(i));\n\n      if (origin) {\n        p = origin;\n      }\n\n      Canvas.image(ctx, img, p.x + alignPoint.x, p.y + alignPoint.y, width, height);\n\n      if (origin) {\n        ctx.restore();\n      }\n    }\n\n    if (alpha !== undefined) {\n      ctx.globalAlpha = alpha;\n    }\n  };\n\n  _proto._getImage = function _getImage(resources) {\n    var img = !resources ? null : resources.getImage([this.style['markerFile'], this.style['markerWidth'], this.style['markerHeight']]);\n    return img;\n  };\n\n  _proto.getPlacement = function getPlacement() {\n    return this.symbol['markerPlacement'];\n  };\n\n  _proto.getRotation = function getRotation() {\n    var r = this.style['markerRotation'];\n\n    if (!isNumber(r)) {\n      return null;\n    }\n\n    return -r * Math.PI / 180;\n  };\n\n  _proto.getDxDy = function getDxDy() {\n    var s = this.style;\n    var dx = s['markerDx'],\n        dy = s['markerDy'];\n    return new Point(dx, dy);\n  };\n\n  _proto.getFixedExtent = function getFixedExtent(resources) {\n    var style = this.style;\n    var url = style['markerFile'],\n        img = resources ? resources.getImage(url) : null;\n    var width = style['markerWidth'] || (img ? img.width : 0),\n        height = style['markerHeight'] || (img ? img.height : 0);\n    var dxdy = this.getDxDy();\n    var alignPoint = getAlignPoint(new Size(width, height), style['markerHorizontalAlignment'], style['markerVerticalAlignment']);\n    var result = new PointExtent(dxdy.add(0, 0), dxdy.add(width, height));\n\n    result._add(alignPoint);\n\n    var rotation = this.getRotation();\n\n    if (rotation) {\n      result = this._rotateExtent(result, rotation);\n    }\n\n    return result;\n  };\n\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    return {\n      'markerFile': s['markerFile'],\n      'markerOpacity': getValueOrDefault(s['markerOpacity'], 1),\n      'markerWidth': getValueOrDefault(s['markerWidth'], null),\n      'markerHeight': getValueOrDefault(s['markerHeight'], null),\n      'markerRotation': getValueOrDefault(s['markerRotation'], 0),\n      'markerDx': getValueOrDefault(s['markerDx'], 0),\n      'markerDy': getValueOrDefault(s['markerDy'], 0),\n      'markerHorizontalAlignment': getValueOrDefault(s['markerHorizontalAlignment'], 'middle'),\n      'markerVerticalAlignment': getValueOrDefault(s['markerVerticalAlignment'], 'top')\n    };\n  };\n\n  return ImageMarkerSymbolizer;\n}(PointSymbolizer);\n\nvar TEMP_COORD0$1 = new Coordinate(0, 0);\nvar TEMP_COORD1$1 = new Coordinate(0, 0);\n\nvar StrokeAndFillSymbolizer = function (_CanvasSymbolizer) {\n  _inheritsLoose(StrokeAndFillSymbolizer, _CanvasSymbolizer);\n\n  StrokeAndFillSymbolizer.test = function test(symbol, geometry) {\n    if (!symbol) {\n      return false;\n    }\n\n    if (geometry && geometry.type === 'Point') {\n      return false;\n    }\n\n    for (var p in symbol) {\n      var f = p.slice(0, 4);\n\n      if (f === 'line' || f === 'poly') {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  function StrokeAndFillSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _CanvasSymbolizer.call(this) || this;\n    _this.symbol = symbol;\n    _this.geometry = geometry;\n    _this.painter = painter;\n\n    if (geometry.type === 'Point') {\n      return _assertThisInitialized(_this);\n    }\n\n    _this.style = _this._defineStyle(_this.translate());\n    return _this;\n  }\n\n  var _proto = StrokeAndFillSymbolizer.prototype;\n\n  _proto.symbolize = function symbolize(ctx, resources) {\n    var style = this.style;\n\n    if (style['polygonOpacity'] === 0 && style['lineOpacity'] === 0 && !this.painter.isHitTesting()) {\n      return;\n    }\n\n    var paintParams = this._getPaintParams();\n\n    if (!paintParams) {\n      return;\n    }\n\n    this._prepareContext(ctx);\n\n    var isGradient$$1 = isGradient(style['lineColor']),\n        isPath = this.geometry.getJSONType() === 'Polygon' || this.geometry.type === 'LineString';\n\n    if (isGradient$$1 && (style['lineColor']['places'] || !isPath)) {\n      style['lineGradientExtent'] = this.getPainter().getContainerExtent()._expand(style['lineWidth']);\n    }\n\n    if (isGradient(style['polygonFill'])) {\n      style['polygonGradientExtent'] = this.getPainter().getContainerExtent();\n    }\n\n    var points = paintParams[0],\n        isSplitted = this.geometry.getJSONType() === 'Polygon' && points.length > 0 && Array.isArray(points[0][0]) || this.geometry.type === 'LineString' && points.length > 0 && Array.isArray(points[0]);\n\n    if (isSplitted) {\n      for (var i = 0; i < points.length; i++) {\n        this.prepareCanvas(ctx, style, resources);\n\n        if (isGradient$$1 && isPath && !style['lineColor']['places']) {\n          this._createGradient(ctx, points[i], style['lineColor']);\n        }\n\n        var params = [ctx, points[i]];\n\n        if (paintParams.length > 1) {\n          params.push.apply(params, paintParams.slice(1));\n        }\n\n        params.push(style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n\n        this.geometry._paintOn.apply(this.geometry, params);\n      }\n    } else {\n      this.prepareCanvas(ctx, style, resources);\n\n      if (isGradient$$1 && isPath && !style['lineColor']['places']) {\n        this._createGradient(ctx, points, style['lineColor']);\n      }\n\n      var _params = [ctx];\n\n      _params.push.apply(_params, paintParams);\n\n      _params.push(style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n\n      this.geometry._paintOn.apply(this.geometry, _params);\n    }\n\n    if (ctx.setLineDash && Array.isArray(style['lineDasharray'])) {\n      ctx.setLineDash([]);\n    }\n  };\n\n  _proto.get2DExtent = function get2DExtent() {\n    var map = this.getMap();\n\n    var extent = this.geometry._getPrjExtent();\n\n    if (!extent) {\n      return null;\n    }\n\n    if (!this._extMin || !this._extMax) {\n      this._extMin = new Coordinate(0, 0);\n      this._extMax = new Coordinate(0, 0);\n    }\n\n    this._extMin.x = extent['xmin'];\n    this._extMin.y = extent['ymin'];\n    this._extMax.x = extent['xmax'];\n    this._extMax.y = extent['ymax'];\n\n    var min = map._prjToPoint(this._extMin, undefined, TEMP_COORD0$1),\n        max = map._prjToPoint(this._extMax, undefined, TEMP_COORD1$1);\n\n    if (!this._pxExtent) {\n      this._pxExtent = new PointExtent(min, max);\n    } else {\n      this._pxExtent.set(Math.min(min.x, max.x), Math.min(min.y, max.y), Math.max(min.x, max.x), Math.max(min.y, max.y));\n    }\n\n    return this._pxExtent;\n  };\n\n  _proto.getFixedExtent = function getFixedExtent() {\n    var t = this.style['lineWidth'] / 2;\n    return new PointExtent(-t, -t, t, t);\n  };\n\n  _proto._getPaintParams = function _getPaintParams() {\n    return this.getPainter().getPaintParams(this.style['lineDx'], this.style['lineDy']);\n  };\n\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'lineColor': getValueOrDefault(s['lineColor'], '#000'),\n      'lineWidth': getValueOrDefault(s['lineWidth'], 2),\n      'lineOpacity': getValueOrDefault(s['lineOpacity'], 1),\n      'lineDasharray': getValueOrDefault(s['lineDasharray'], []),\n      'lineCap': getValueOrDefault(s['lineCap'], 'butt'),\n      'lineJoin': getValueOrDefault(s['lineJoin'], 'miter'),\n      'linePatternFile': getValueOrDefault(s['linePatternFile'], null),\n      'lineDx': getValueOrDefault(s['lineDx'], 0),\n      'lineDy': getValueOrDefault(s['lineDy'], 0),\n      'polygonFill': getValueOrDefault(s['polygonFill'], null),\n      'polygonOpacity': getValueOrDefault(s['polygonOpacity'], 1),\n      'polygonPatternFile': getValueOrDefault(s['polygonPatternFile'], null),\n      'polygonPatternDx': getValueOrDefault(s['polygonPatternDx'], 0),\n      'polygonPatternDy': getValueOrDefault(s['polygonPatternDy'], 0),\n      'linePatternDx': getValueOrDefault(s['linePatternDx'], 0),\n      'linePatternDy': getValueOrDefault(s['linePatternDy'], 0)\n    };\n\n    if (result['lineWidth'] === 0) {\n      result['lineOpacity'] = 0;\n    }\n\n    if (this.geometry.type === 'LineString' && !result['polygonFill']) {\n      result['polygonFill'] = result['lineColor'];\n    }\n\n    return result;\n  };\n\n  _proto._createGradient = function _createGradient(ctx, points, lineColor) {\n    if (!Array.isArray(points) || !points.length) {\n      return;\n    }\n\n    var len = points.length;\n    var grad = ctx.createLinearGradient(points[0].x, points[0].y, points[len - 1].x, points[len - 1].y);\n    lineColor['colorStops'].forEach(function (stop) {\n      grad.addColorStop.apply(grad, stop);\n    });\n    ctx.strokeStyle = grad;\n  };\n\n  return StrokeAndFillSymbolizer;\n}(CanvasSymbolizer);\n\nvar CACHE_KEY = '___text_symbol_cache';\n\nvar TextMarkerSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(TextMarkerSymbolizer, _PointSymbolizer);\n\n  TextMarkerSymbolizer.test = function test(symbol) {\n    if (!symbol) {\n      return false;\n    }\n\n    if (!isNil(symbol['textName'])) {\n      return true;\n    }\n\n    return false;\n  };\n\n  function TextMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    _this._dynamic = hasFunctionDefinition(symbol);\n    _this.style = _this._defineStyle(_this.translate());\n\n    if (_this.style['textWrapWidth'] === 0) {\n      return _assertThisInitialized(_this);\n    }\n\n    _this.strokeAndFill = _this._defineStyle(_this.translateLineAndFill(_this.style));\n    var textContent = replaceVariable(_this.style['textName'], _this.geometry.getProperties());\n\n    if (!_this._dynamic) {\n      _this._cacheKey = genCacheKey(textContent, _this.style);\n    }\n\n    _this._descText(textContent);\n\n    return _this;\n  }\n\n  var _proto = TextMarkerSymbolizer.prototype;\n\n  _proto.symbolize = function symbolize(ctx, resources) {\n    if (!this.painter.isHitTesting() && (this.style['textSize'] === 0 || !this.style['textOpacity'] && (!this.style['textHaloRadius'] || !this.style['textHaloOpacity']) || this.style['textWrapWidth'] === 0)) {\n      return;\n    }\n\n    var cookedPoints = this._getRenderContainerPoints();\n\n    if (!isArrayHasData(cookedPoints)) {\n      return;\n    }\n\n    var style = this.style,\n        strokeAndFill = this.strokeAndFill;\n    var textContent = replaceVariable(this.style['textName'], this.geometry.getProperties());\n\n    this._descText(textContent);\n\n    this._prepareContext(ctx);\n\n    this.prepareCanvas(ctx, strokeAndFill, resources);\n    Canvas.prepareCanvasFont(ctx, style);\n\n    for (var i = 0, len = cookedPoints.length; i < len; i++) {\n      var p = cookedPoints[i];\n\n      var origin = this._rotate(ctx, p, this._getRotationAt(i));\n\n      if (origin) {\n        p = origin;\n      }\n\n      Canvas.text(ctx, textContent, p, style, this.textDesc);\n\n      if (origin) {\n        ctx.restore();\n      }\n    }\n  };\n\n  _proto.getPlacement = function getPlacement() {\n    return this.symbol['textPlacement'];\n  };\n\n  _proto.getRotation = function getRotation() {\n    var r = this.style['textRotation'];\n\n    if (!isNumber(r)) {\n      return null;\n    }\n\n    return -r * Math.PI / 180;\n  };\n\n  _proto.getDxDy = function getDxDy() {\n    var s = this.style;\n    return new Point(s['textDx'], s['textDy']);\n  };\n\n  _proto.getFixedExtent = function getFixedExtent() {\n    var dxdy = this.getDxDy(),\n        style = this.style;\n    var size = this.textDesc['size'];\n    var alignPoint = getAlignPoint(size, style['textHorizontalAlignment'], style['textVerticalAlignment']);\n    var alignW = alignPoint.x,\n        alignH = alignPoint.y;\n\n    if (style['textHaloRadius']) {\n      var r = style['textHaloRadius'];\n      size = size.add(r * 2, r * 2);\n    }\n\n    var result = new PointExtent(dxdy.add(alignW, alignH), dxdy.add(alignW + size['width'], alignH + size['height']));\n    var rotation = this.getRotation();\n\n    if (rotation) {\n      result = this._rotateExtent(result, rotation);\n    }\n\n    return result;\n  };\n\n  _proto.translate = function translate() {\n    var s = this.symbol;\n    var result = {\n      'textName': s['textName'],\n      'textFaceName': getValueOrDefault(s['textFaceName'], 'monospace'),\n      'textWeight': getValueOrDefault(s['textWeight'], 'normal'),\n      'textStyle': getValueOrDefault(s['textStyle'], 'normal'),\n      'textSize': getValueOrDefault(s['textSize'], DEFAULT_TEXT_SIZE),\n      'textFont': getValueOrDefault(s['textFont'], null),\n      'textFill': getValueOrDefault(s['textFill'], '#000'),\n      'textOpacity': getValueOrDefault(s['textOpacity'], 1),\n      'textHaloFill': getValueOrDefault(s['textHaloFill'], '#ffffff'),\n      'textHaloRadius': getValueOrDefault(s['textHaloRadius'], 0),\n      'textHaloOpacity': getValueOrDefault(s['textHaloOpacity'], 1),\n      'textWrapWidth': getValueOrDefault(s['textWrapWidth'], null),\n      'textWrapCharacter': getValueOrDefault(s['textWrapCharacter'], '\\n'),\n      'textLineSpacing': getValueOrDefault(s['textLineSpacing'], 0),\n      'textDx': getValueOrDefault(s['textDx'], 0),\n      'textDy': getValueOrDefault(s['textDy'], 0),\n      'textHorizontalAlignment': getValueOrDefault(s['textHorizontalAlignment'], 'middle'),\n      'textVerticalAlignment': getValueOrDefault(s['textVerticalAlignment'], 'middle'),\n      'textAlign': getValueOrDefault(s['textAlign'], 'center'),\n      'textRotation': getValueOrDefault(s['textRotation'], 0),\n      'textMaxWidth': getValueOrDefault(s['textMaxWidth'], 0),\n      'textMaxHeight': getValueOrDefault(s['textMaxHeight'], 0)\n    };\n\n    if (result['textMaxWidth'] > 0 && (!result['textWrapWidth'] || result['textWrapWidth'] > result['textMaxWidth'])) {\n      if (!result['textWrapWidth']) {\n        result['textMaxHeight'] = 1;\n      }\n\n      result['textWrapWidth'] = result['textMaxWidth'];\n    }\n\n    return result;\n  };\n\n  _proto.translateLineAndFill = function translateLineAndFill(s) {\n    return {\n      'lineColor': s['textHaloRadius'] ? s['textHaloFill'] : s['textFill'],\n      'lineWidth': s['textHaloRadius'],\n      'lineOpacity': s['textOpacity'],\n      'lineDasharray': null,\n      'lineCap': 'butt',\n      'lineJoin': 'round',\n      'polygonFill': s['textFill'],\n      'polygonOpacity': s['textOpacity']\n    };\n  };\n\n  _proto._descText = function _descText(textContent) {\n    if (this._dynamic) {\n      this.textDesc = this._measureText(textContent);\n      return;\n    }\n\n    this.textDesc = this._loadFromCache();\n\n    if (!this.textDesc) {\n      this.textDesc = this._measureText(textContent);\n\n      this._storeToCache(this.textDesc);\n    }\n  };\n\n  _proto._measureText = function _measureText(textContent) {\n    var maxHeight = this.style['textMaxHeight'];\n    var textDesc = splitTextToRow(textContent, this.style);\n\n    if (maxHeight && maxHeight < textDesc.size.height) {\n      textDesc.size.height = maxHeight;\n    }\n\n    return textDesc;\n  };\n\n  _proto._storeToCache = function _storeToCache(textDesc) {\n    if (IS_NODE) {\n      return;\n    }\n\n    if (!this.geometry[CACHE_KEY]) {\n      this.geometry[CACHE_KEY] = {};\n    }\n\n    this.geometry[CACHE_KEY][this._cacheKey] = {\n      'desc': textDesc,\n      'active': true\n    };\n  };\n\n  _proto._loadFromCache = function _loadFromCache() {\n    if (!this.geometry[CACHE_KEY]) {\n      return null;\n    }\n\n    var cache = this.geometry[CACHE_KEY][this._cacheKey];\n\n    if (!cache) {\n      return null;\n    }\n\n    cache.active = true;\n    return cache.desc;\n  };\n\n  return TextMarkerSymbolizer;\n}(PointSymbolizer);\n\nTextMarkerSymbolizer.CACHE_KEY = CACHE_KEY;\n\nfunction genCacheKey(textContent, style) {\n  var key = [textContent];\n\n  for (var p in style) {\n    if (style.hasOwnProperty(p) && p.length > 4 && p.substring(0, 4) === 'text') {\n      key.push(p + '=' + style[p]);\n    }\n  }\n\n  return key.join('-');\n}\n\nvar VectorPathMarkerSymbolizer = function (_ImageMarkerSymbolize) {\n  _inheritsLoose(VectorPathMarkerSymbolizer, _ImageMarkerSymbolize);\n\n  VectorPathMarkerSymbolizer.test = function test(symbol) {\n    if (!symbol) {\n      return false;\n    }\n\n    if (isNil(symbol['markerFile']) && symbol['markerType'] === 'path') {\n      return true;\n    }\n\n    return false;\n  };\n\n  function VectorPathMarkerSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    if (isNil(symbol['markerWidth'])) {\n      symbol['markerWidth'] = 80;\n    }\n\n    if (isNil(symbol['markerHeight'])) {\n      symbol['markerHeight'] = 80;\n    }\n\n    _this = _ImageMarkerSymbolize.call(this, symbol, geometry, painter) || this;\n    symbol = extend(symbol, _this.translate());\n\n    var style = _this.style = _this._defineStyle(symbol);\n\n    if (Browser$1.gecko) {\n      _this._url = [getMarkerPathBase64(style, style['markerWidth'], style['markerHeight']), style['markerWidth'], style['markerHeight']];\n    } else {\n      _this._url = [getMarkerPathBase64(style), style['markerWidth'], style['markerHeight']];\n    }\n\n    return _this;\n  }\n\n  var _proto = VectorPathMarkerSymbolizer.prototype;\n\n  _proto._prepareContext = function _prepareContext() {};\n\n  _proto._getImage = function _getImage(resources) {\n    var _this2 = this;\n\n    if (resources && resources.isResourceLoaded(this._url)) {\n      return resources.getImage(this._url);\n    }\n\n    var painter = this.painter;\n    var image = new Image();\n\n    image.onload = function () {\n      var renderer = painter.getLayer() && painter.getLayer().getRenderer();\n\n      if (renderer) {\n        renderer.setToRedraw();\n      }\n    };\n\n    image.onerror = function (err) {\n      if (err && typeof console !== 'undefined') {\n        console.warn(err);\n      }\n\n      resources.markErrorResource(_this2._url);\n    };\n\n    image.src = this._url[0];\n\n    if (resources) {\n      resources.addResource(this._url, image);\n    }\n\n    return image;\n  };\n\n  return VectorPathMarkerSymbolizer;\n}(ImageMarkerSymbolizer);\n\nvar defaultSymbol = {\n  lineWidth: 1,\n  polygonFill: '#fff',\n  polygonOpacity: 0.5\n};\n\nvar DrawAltitudeSymbolizer = function (_PointSymbolizer) {\n  _inheritsLoose(DrawAltitudeSymbolizer, _PointSymbolizer);\n\n  DrawAltitudeSymbolizer.test = function test(symbol, geometry) {\n    var layer = geometry.getLayer();\n\n    if (!layer) {\n      return false;\n    }\n\n    var type = geometry.getJSONType();\n    return type === 'Marker' || type === 'LineString';\n  };\n\n  function DrawAltitudeSymbolizer(symbol, geometry, painter) {\n    var _this;\n\n    _this = _PointSymbolizer.call(this, symbol, geometry, painter) || this;\n    _this.style = geometry.getLayer().options['drawAltitude'];\n\n    if (!_this.style || !isObject(_this.style)) {\n      _this.style = {\n        'lineWidth': 2\n      };\n    }\n\n    if (!_this.style['lineWidth']) {\n      _this.style['lineWidth'] = 0;\n    }\n\n    _this.dxdy = _this._defineStyle({\n      'dx': symbol['textDx'] || symbol['markerDx'],\n      'dy': symbol['textDy'] || symbol['markerDy']\n    });\n    return _this;\n  }\n\n  var _proto = DrawAltitudeSymbolizer.prototype;\n\n  _proto.symbolize = function symbolize(ctx) {\n    var layer = this.geometry.getLayer();\n\n    if (!layer.options['drawAltitude']) {\n      return;\n    }\n\n    var properties = this.geometry.getProperties();\n\n    if (!properties || !properties[layer.options['altitudeProperty']]) {\n      return;\n    }\n\n    var style = this._getStyle();\n\n    this._prepareContext(ctx);\n\n    if (this.geometry.type === 'LineString') {\n      var paintParams = this._getPaintParams(style['lineDx'], style['lineDy']);\n\n      if (!paintParams) {\n        return;\n      }\n\n      var groundPoints = this.getPainter().getPaintParams(style['lineDx'], style['lineDy'], true)[0];\n\n      this._drawLineAltitude(ctx, paintParams[0], groundPoints);\n    } else {\n      var point = this._getRenderContainerPoints(),\n          groundPoint = this._getRenderContainerPoints(true);\n\n      if (!point || point.length === 0) {\n        return;\n      }\n\n      this._drawMarkerAltitude(ctx, point[0], groundPoint[0]);\n    }\n  };\n\n  _proto.getDxDy = function getDxDy() {\n    var s = this.dxdy;\n    return new Point(s['dx'] || 0, s['dy'] || 0);\n  };\n\n  _proto.get2DExtent = function get2DExtent() {\n    if (this.geometry.type === 'LineString') {\n      return StrokeAndFillSymbolizer.prototype.get2DExtent.apply(this);\n    } else {\n      return _PointSymbolizer.prototype.get2DExtent.call(this);\n    }\n  };\n\n  _proto.getPlacement = function getPlacement() {\n    return 'point';\n  };\n\n  _proto._getPaintParams = function _getPaintParams(dx, dy) {\n    return this.getPainter().getPaintParams(dx || 0, dy || 0);\n  };\n\n  _proto._drawMarkerAltitude = function _drawMarkerAltitude(ctx, point, groundPoint) {\n    var style = this._getStyle();\n\n    this.prepareCanvas(ctx, style);\n    Canvas.path(ctx, [point, groundPoint], style['lineOpacity'], null, style['lineDasharray']);\n  };\n\n  _proto._drawLineAltitude = function _drawLineAltitude(ctx, points, groundPoints) {\n    var style = this._getStyle();\n\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n\n    if (isSplitted) {\n      for (var i = 0; i < points.length; i++) {\n        this._drawLine(ctx, points[i], groundPoints[i]);\n      }\n    } else {\n      this._drawLine(ctx, points, groundPoints);\n    }\n\n    if (ctx.setLineDash && Array.isArray(style['lineDasharray'])) {\n      ctx.setLineDash([]);\n    }\n  };\n\n  _proto._drawLine = function _drawLine(ctx, points, groundPoints) {\n    var style = this._getStyle();\n\n    this.prepareCanvas(ctx, style);\n\n    for (var i = 0, l = points.length - 1; i < l; i++) {\n      Canvas.polygon(ctx, [points[i], points[i + 1], groundPoints[i + 1], groundPoints[i]], style['lineOpacity'], style['polygonOpacity'], style['lineDasharray']);\n    }\n  };\n\n  _proto._getStyle = function _getStyle() {\n    var style = this.geometry.getLayer().options['drawAltitude'];\n\n    if (!isObject(style)) {\n      style = defaultSymbol;\n    }\n\n    if (!style['lineWidth']) {\n      style['lineWidth'] = 0;\n      style['lineOpacity'] = 0;\n    }\n\n    return style;\n  };\n\n  return DrawAltitudeSymbolizer;\n}(PointSymbolizer);\n\nvar index$3 = /*#__PURE__*/Object.freeze({\n  Symbolizer: Symbolizer,\n  CanvasSymbolizer: CanvasSymbolizer,\n  DebugSymbolizer: DebugSymbolizer,\n  ImageMarkerSymbolizer: ImageMarkerSymbolizer,\n  PointSymbolizer: PointSymbolizer,\n  StrokeAndFillSymbolizer: StrokeAndFillSymbolizer,\n  TextMarkerSymbolizer: TextMarkerSymbolizer,\n  VectorMarkerSymbolizer: VectorMarkerSymbolizer,\n  VectorPathMarkerSymbolizer: VectorPathMarkerSymbolizer,\n  DrawAltitudeSymbolizer: DrawAltitudeSymbolizer\n});\nvar registerSymbolizers = [DrawAltitudeSymbolizer, StrokeAndFillSymbolizer, ImageMarkerSymbolizer, VectorPathMarkerSymbolizer, VectorMarkerSymbolizer, TextMarkerSymbolizer];\nvar testCanvas;\nvar TEMP_POINT0$2 = new Point(0, 0);\nvar TEMP_PAINT_EXTENT = new PointExtent();\nvar TEMP_EXTENT$1 = new PointExtent();\nvar TEMP_FIXED_EXTENT = new PointExtent();\nvar TEMP_CLIP_EXTENT0 = new PointExtent();\nvar TEMP_CLIP_EXTENT1 = new PointExtent();\n\nvar Painter = function (_Class) {\n  _inheritsLoose(Painter, _Class);\n\n  function Painter(geometry) {\n    var _this;\n\n    _this = _Class.call(this) || this;\n    _this.geometry = geometry;\n    _this.symbolizers = _this._createSymbolizers();\n    _this._altAtGLZoom = _this._getGeometryAltitude();\n    return _this;\n  }\n\n  var _proto = Painter.prototype;\n\n  _proto.getMap = function getMap() {\n    return this.geometry.getMap();\n  };\n\n  _proto.getLayer = function getLayer() {\n    return this.geometry.getLayer();\n  };\n\n  _proto._createSymbolizers = function _createSymbolizers() {\n    var geoSymbol = this.getSymbol(),\n        symbolizers = [],\n        regSymbolizers = registerSymbolizers;\n    var symbols = geoSymbol;\n\n    if (!Array.isArray(geoSymbol)) {\n      symbols = [geoSymbol];\n    }\n\n    for (var ii = symbols.length - 1; ii >= 0; ii--) {\n      var symbol = symbols[ii];\n\n      for (var i = regSymbolizers.length - 1; i >= 0; i--) {\n        if (regSymbolizers[i].test(symbol, this.geometry)) {\n          var symbolizer = new regSymbolizers[i](symbol, this.geometry, this);\n          symbolizers.push(symbolizer);\n\n          if (symbolizer instanceof PointSymbolizer) {\n            this._hasPoint = true;\n          }\n        }\n      }\n    }\n\n    if (!symbolizers.length) {\n      if (console) {\n        var id = this.geometry.getId();\n        console.warn('invalid symbol for geometry(' + (this.geometry ? this.geometry.getType() + (id ? ':' + id : '') : '') + ') to draw : ' + JSON.stringify(geoSymbol));\n      }\n    }\n\n    this._debugSymbolizer = new DebugSymbolizer(geoSymbol, this.geometry, this);\n    return symbolizers;\n  };\n\n  _proto.hasPoint = function hasPoint() {\n    return !!this._hasPoint;\n  };\n\n  _proto.getRenderPoints = function getRenderPoints(placement) {\n    if (!this._renderPoints) {\n      this._renderPoints = {};\n    }\n\n    if (!placement) {\n      placement = 'center';\n    }\n\n    if (!this._renderPoints[placement]) {\n      this._renderPoints[placement] = this.geometry._getRenderPoints(placement);\n    }\n\n    return this._renderPoints[placement];\n  };\n\n  _proto.getPaintParams = function getPaintParams(dx, dy, ignoreAltitude) {\n    var map = this.getMap(),\n        geometry = this.geometry,\n        res = map.getResolution(),\n        pitched = map.getPitch() !== 0,\n        rotated = map.getBearing() !== 0;\n    var params = this._cachedParams;\n\n    var paintAsPath = geometry._paintAsPath && geometry._paintAsPath();\n\n    if (paintAsPath && this._unsimpledParams && res <= this._unsimpledParams._res) {\n      params = this._unsimpledParams;\n    } else if (!params || params._res !== map.getResolution() || this._pitched !== pitched && geometry._redrawWhenPitch() || this._rotated !== rotated && geometry._redrawWhenRotate()) {\n      params = geometry._getPaintParams();\n\n      if (!params) {\n        return null;\n      }\n\n      params._res = res;\n\n      if (!geometry._simplified && paintAsPath) {\n        if (!this._unsimpledParams) {\n          this._unsimpledParams = params;\n        }\n\n        if (res > this._unsimpledParams._res) {\n          this._unsimpledParams._res = res;\n        }\n      }\n\n      this._cachedParams = params;\n    }\n\n    if (!params) {\n      return null;\n    }\n\n    this._pitched = pitched;\n    this._rotated = rotated;\n    var zoomScale = map.getGLScale(),\n        tr = [],\n        points = params[0];\n    var mapExtent = map.getContainerExtent();\n\n    var cPoints = this._pointContainerPoints(points, dx, dy, ignoreAltitude, this._hitPoint && !mapExtent.contains(this._hitPoint));\n\n    if (!cPoints) {\n      return null;\n    }\n\n    tr.push(cPoints);\n\n    for (var i = 1, l = params.length; i < l; i++) {\n      if (isNumber(params[i]) || params[i] instanceof Size) {\n        if (isNumber(params[i])) {\n          tr.push(params[i] / zoomScale);\n        } else {\n          tr.push(params[i].multi(1 / zoomScale));\n        }\n      } else {\n        tr.push(params[i]);\n      }\n    }\n\n    return tr;\n  };\n\n  _proto._pointContainerPoints = function _pointContainerPoints(points, dx, dy, ignoreAltitude, disableClip, pointPlacement) {\n    if (this._aboveCamera()) {\n      return null;\n    }\n\n    var map = this.getMap(),\n        glZoom = map.getGLZoom(),\n        containerOffset = this.containerOffset;\n    var cPoints;\n\n    function pointContainerPoint(point, alt) {\n      var p = map._pointToContainerPoint(point, glZoom, alt)._sub(containerOffset);\n\n      if (dx || dy) {\n        p._add(dx || 0, dy || 0);\n      }\n\n      return p;\n    }\n\n    var altitude = this.getAltitude();\n\n    if (Array.isArray(points)) {\n      var geometry = this.geometry;\n      var clipped;\n\n      if (!disableClip && geometry.options['enableClip']) {\n        clipped = this._clip(points, altitude);\n      } else {\n        clipped = {\n          points: points,\n          altitude: altitude\n        };\n      }\n\n      var clipPoints = clipped.points;\n      altitude = clipped.altitude;\n\n      if (ignoreAltitude) {\n        altitude = 0;\n      }\n\n      var alt = altitude;\n      cPoints = [];\n\n      for (var i = 0, l = clipPoints.length; i < l; i++) {\n        var c = clipPoints[i];\n\n        if (Array.isArray(c)) {\n          var cring = [];\n\n          for (var ii = 0, ll = c.length; ii < ll; ii++) {\n            var cc = c[ii];\n\n            if (Array.isArray(altitude)) {\n              if (altitude[i]) {\n                alt = altitude[i][ii];\n              } else {\n                alt = 0;\n              }\n            }\n\n            cring.push(pointContainerPoint(cc, alt));\n          }\n\n          cPoints.push(cring);\n        } else {\n          if (Array.isArray(altitude)) {\n            if (pointPlacement === 'vertex-last') {\n              alt = altitude[altitude.length - 1 - i];\n            } else if (pointPlacement === 'line') {\n              alt = (altitude[i] + altitude[i + 1]) / 2;\n            } else {\n              alt = altitude[i];\n            }\n          }\n\n          cPoints.push(pointContainerPoint(c, alt));\n        }\n      }\n    } else if (points instanceof Point) {\n      if (ignoreAltitude) {\n        altitude = 0;\n      }\n\n      cPoints = map._pointToContainerPoint(points, glZoom, altitude)._sub(containerOffset);\n\n      if (dx || dy) {\n        cPoints._add(dx, dy);\n      }\n    }\n\n    return cPoints;\n  };\n\n  _proto._clip = function _clip(points, altitude) {\n    var map = this.getMap(),\n        geometry = this.geometry;\n    var lineWidth = this.getSymbol()['lineWidth'];\n\n    if (!isNumber(lineWidth)) {\n      lineWidth = 4;\n    }\n\n    var extent2D = map._get2DExtent(undefined, TEMP_CLIP_EXTENT0)._expand(lineWidth);\n\n    if (map.getPitch() > 0 && altitude) {\n      var c = map.cameraLookAt;\n      var pos = map.cameraPosition;\n      TEMP_POINT0$2.set(pos.x, pos.y);\n      extent2D = extent2D._combine(TEMP_POINT0$2._add(sign(c[0] - pos[0]), sign(c[1] - pos[1])));\n    }\n\n    var e = this.get2DExtent(null, TEMP_CLIP_EXTENT1);\n    var clipPoints = points;\n\n    if (e.within(extent2D)) {\n      return {\n        points: clipPoints,\n        altitude: altitude\n      };\n    }\n\n    var glExtent2D = map._get2DExtent(map.getGLZoom(), TEMP_CLIP_EXTENT0)._expand(lineWidth * map._glScale);\n\n    var smoothness = geometry.options['smoothness'];\n\n    if (geometry.getShell && this.geometry.getHoles && !smoothness) {\n      if (!Array.isArray(points[0])) {\n        clipPoints = clipPolygon(points, glExtent2D);\n      } else {\n        clipPoints = [];\n\n        for (var i = 0; i < points.length; i++) {\n          var part = clipPolygon(points[i], glExtent2D);\n\n          if (part.length) {\n            clipPoints.push(part);\n          }\n        }\n      }\n    } else if (geometry.getJSONType() === 'LineString' && !smoothness) {\n      if (!Array.isArray(points[0])) {\n        clipPoints = clipLine(points, glExtent2D, false, !!smoothness);\n      } else {\n        clipPoints = [];\n\n        for (var _i = 0; _i < points.length; _i++) {\n          pushIn(clipPoints, clipLine(points[_i], glExtent2D, false, !!smoothness));\n        }\n      }\n\n      return this._interpolateSegAlt(clipPoints, points, altitude);\n    }\n\n    return {\n      points: clipPoints,\n      altitude: altitude\n    };\n  };\n\n  _proto._interpolateSegAlt = function _interpolateSegAlt(clipSegs, orig, altitude) {\n    if (!Array.isArray(altitude)) {\n      var fn = function fn(cc) {\n        return cc.point;\n      };\n\n      return {\n        points: clipSegs.map(function (c) {\n          if (Array.isArray(c)) {\n            return c.map(fn);\n          }\n\n          return c.point;\n        }),\n        altitude: altitude\n      };\n    }\n\n    var segsWithAlt = interpolateAlt(clipSegs, orig, altitude);\n    altitude = [];\n    var points = segsWithAlt.map(function (p) {\n      if (Array.isArray(p)) {\n        var alt = [];\n        var cp = p.map(function (pp) {\n          alt.push(pp.altitude);\n          return pp.point;\n        });\n        altitude.push(alt);\n        return cp;\n      }\n\n      altitude.push(p.altitude);\n      return p.point;\n    });\n    return {\n      points: points,\n      altitude: altitude\n    };\n  };\n\n  _proto.getSymbol = function getSymbol() {\n    return this.geometry._getInternalSymbol();\n  };\n\n  _proto.paint = function paint(extent, context, offset) {\n    if (!this.symbolizers) {\n      return;\n    }\n\n    var renderer = this.getLayer()._getRenderer();\n\n    if (!renderer || !renderer.context && !context) {\n      return;\n    }\n\n    if (extent && !extent.intersects(this.get2DExtent(renderer.resources, TEMP_PAINT_EXTENT))) {\n      return;\n    }\n\n    var map = this.getMap();\n    var minAltitude = this.getMinAltitude();\n    var frustumAlt = map.getFrustumAltitude();\n\n    if (minAltitude && frustumAlt && frustumAlt < minAltitude) {\n      return;\n    }\n\n    this.containerOffset = offset || map._pointToContainerPoint(renderer.southWest)._add(0, -map.height);\n\n    this._beforePaint();\n\n    var ctx = context || renderer.context;\n    var contexts = [ctx, renderer.resources];\n\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      this._prepareShadow(ctx, this.symbolizers[i].symbol);\n\n      this.symbolizers[i].symbolize.apply(this.symbolizers[i], contexts);\n    }\n\n    this._afterPaint();\n\n    this._painted = true;\n\n    this._debugSymbolizer.symbolize.apply(this._debugSymbolizer, contexts);\n  };\n\n  _proto.getSprite = function getSprite(resources, canvasClass) {\n    if (this.geometry.type !== 'Point') {\n      return null;\n    }\n\n    this._spriting = true;\n\n    if (!this._sprite && this.symbolizers.length > 0) {\n      var extent = new PointExtent();\n      this.symbolizers.forEach(function (s) {\n        var markerExtent = s.getFixedExtent(resources);\n\n        extent._combine(markerExtent);\n      });\n      var origin = extent.getMin().multi(-1);\n      var clazz = canvasClass || (this.getMap() ? this.getMap().CanvasClass : null);\n      var canvas = Canvas.createCanvas(extent.getWidth(), extent.getHeight(), clazz);\n      var bak;\n\n      if (this._renderPoints) {\n        bak = this._renderPoints;\n      }\n\n      var ctx = canvas.getContext('2d');\n      var contexts = [ctx, resources];\n\n      for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n        var dxdy = this.symbolizers[i].getDxDy();\n        this._renderPoints = {\n          'center': [[origin.add(dxdy)]]\n        };\n\n        this._prepareShadow(ctx, this.symbolizers[i].symbol);\n\n        this.symbolizers[i].symbolize.apply(this.symbolizers[i], contexts);\n      }\n\n      if (bak) {\n        this._renderPoints = bak;\n      }\n\n      this._sprite = {\n        'canvas': canvas,\n        'offset': extent.getCenter()\n      };\n    }\n\n    this._spriting = false;\n    return this._sprite;\n  };\n\n  _proto.isSpriting = function isSpriting() {\n    return !!this._spriting;\n  };\n\n  _proto.hitTest = function hitTest(cp, tolerance) {\n    if (!tolerance || tolerance < 0.5) {\n      tolerance = 0.5;\n    }\n\n    if (!testCanvas) {\n      testCanvas = Canvas.createCanvas(1, 1);\n    }\n\n    Canvas.setHitTesting(true);\n    testCanvas.width = testCanvas.height = 2 * tolerance;\n    var ctx = testCanvas.getContext('2d');\n    this._hitPoint = cp.sub(tolerance, tolerance);\n\n    try {\n      this.paint(null, ctx, this._hitPoint);\n    } catch (e) {\n      throw e;\n    } finally {\n      Canvas.setHitTesting(false);\n    }\n\n    delete this._hitPoint;\n    var imgData = ctx.getImageData(0, 0, testCanvas.width, testCanvas.height).data;\n\n    for (var i = 3, l = imgData.length; i < l; i += 4) {\n      if (imgData[i] > 0) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.isHitTesting = function isHitTesting() {\n    return !!this._hitPoint;\n  };\n\n  _proto._prepareShadow = function _prepareShadow(ctx, symbol) {\n    if (symbol['shadowBlur']) {\n      ctx.shadowBlur = this.isHitTesting() ? 0 : symbol['shadowBlur'];\n      ctx.shadowColor = symbol['shadowColor'] || '#000';\n      ctx.shadowOffsetX = symbol['shadowOffsetX'] || 0;\n      ctx.shadowOffsetY = symbol['shadowOffsetY'] || 0;\n    } else if (ctx.shadowBlur) {\n      ctx.shadowBlur = null;\n      ctx.shadowColor = null;\n      ctx.shadowOffsetX = null;\n      ctx.shadowOffsetY = null;\n    }\n  };\n\n  _proto._eachSymbolizer = function _eachSymbolizer(fn, context) {\n    if (!this.symbolizers) {\n      return;\n    }\n\n    if (!context) {\n      context = this;\n    }\n\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      fn.apply(context, [this.symbolizers[i]]);\n    }\n  };\n\n  _proto.get2DExtent = function get2DExtent(resources, out) {\n    this._verifyProjection();\n\n    var map = this.getMap();\n    resources = resources || this.getLayer()._getRenderer().resources;\n    var zoom = map.getZoom();\n\n    var isDynamicSize = this._isDynamicSize();\n\n    if (!this._extent2D || this._extent2D._zoom !== zoom || !this._fixedExtent) {\n      if (this._extent2D && this._extent2D._zoom !== zoom) {\n        delete this._extent2D;\n      }\n\n      if (this.symbolizers) {\n        if (!this._extent2D) {\n          this._extent2D = this._computeExtent2D(new PointExtent());\n          this._extent2D._zoom = zoom;\n        }\n\n        if (!this._fixedExtent) {\n          this._fixedExtent = this._computeFixedExtent(resources, new PointExtent());\n        }\n      }\n    }\n\n    if (!this._extent2D) {\n      if (isDynamicSize) {\n        delete this._fixedExtent;\n      }\n\n      return null;\n    }\n\n    var _this$_fixedExtent = this._fixedExtent,\n        xmin = _this$_fixedExtent.xmin,\n        ymin = _this$_fixedExtent.ymin,\n        xmax = _this$_fixedExtent.xmax,\n        ymax = _this$_fixedExtent.ymax;\n\n    if (isDynamicSize) {\n      delete this._fixedExtent;\n    }\n\n    TEMP_FIXED_EXTENT.set(xmin, -ymax, xmax, -ymin);\n\n    if (out) {\n      out.set(this._extent2D['xmin'], this._extent2D['ymin'], this._extent2D['xmax'], this._extent2D['ymax']);\n\n      out._add(TEMP_FIXED_EXTENT);\n\n      return out;\n    }\n\n    return this._extent2D.add(TEMP_FIXED_EXTENT);\n  };\n\n  _proto._computeExtent2D = function _computeExtent2D(extent) {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n\n      extent._combine(symbolizer.get2DExtent());\n    }\n\n    return extent;\n  };\n\n  _proto._computeFixedExtent = function _computeFixedExtent(resources, extent) {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n\n      if (symbolizer.getFixedExtent) {\n        extent._combine(symbolizer.getFixedExtent(resources));\n      }\n    }\n\n    return extent;\n  };\n\n  _proto._isDynamicSize = function _isDynamicSize() {\n    for (var i = this.symbolizers.length - 1; i >= 0; i--) {\n      var symbolizer = this.symbolizers[i];\n\n      if (symbolizer.isDynamicSize()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.getContainerExtent = function getContainerExtent(out) {\n    if (this._aboveCamera()) {\n      return null;\n    }\n\n    this._verifyProjection();\n\n    var map = this.getMap();\n    var zoom = map.getZoom();\n    var glScale = map._glScale;\n\n    if (!this._extent2D || this._extent2D._zoom !== zoom) {\n      this.get2DExtent(null, TEMP_EXTENT$1);\n    }\n\n    var altitude = this.getMinAltitude();\n\n    var extent = this._extent2D.convertTo(function (c) {\n      return map._pointToContainerPoint(c, zoom, altitude / glScale, TEMP_POINT0$2);\n    }, out);\n\n    var maxAltitude = this.getMaxAltitude();\n\n    if (maxAltitude !== altitude) {\n      var extent2 = this._extent2D.convertTo(function (c) {\n        return map._pointToContainerPoint(c, zoom, maxAltitude / glScale, TEMP_POINT0$2);\n      }, TEMP_EXTENT$1);\n\n      extent._combine(extent2);\n    }\n\n    var layer = this.geometry.getLayer();\n\n    if (this.geometry.type === 'LineString' && maxAltitude && layer.options['drawAltitude']) {\n      var groundExtent = this._extent2D.convertTo(function (c) {\n        return map._pointToContainerPoint(c, zoom, 0, TEMP_POINT0$2);\n      }, TEMP_EXTENT$1);\n\n      extent._combine(groundExtent);\n    }\n\n    if (extent) {\n      extent._add(this._fixedExtent || this._computeFixedExtent(null, new PointExtent()));\n    }\n\n    var smoothness = this.geometry.options['smoothness'];\n\n    if (smoothness) {\n      extent._expand(extent.getWidth() * 0.15);\n    }\n\n    return extent;\n  };\n\n  _proto._aboveCamera = function _aboveCamera() {\n    var altitude = this.getMinAltitude();\n    var map = this.getMap();\n    var frustumAlt = map.getFrustumAltitude();\n    return altitude && frustumAlt && frustumAlt < altitude;\n  };\n\n  _proto.getFixedExtent = function getFixedExtent() {\n    var map = this.getMap();\n    var zoom = map.getZoom();\n\n    if (this._isDynamicSize()) {\n      return this._computeFixedExtent(null, new PointExtent());\n    }\n\n    if (!this._extent2D || this._extent2D._zoom !== zoom) {\n      this.get2DExtent(null, TEMP_FIXED_EXTENT);\n    }\n\n    return this._fixedExtent;\n  };\n\n  _proto.setZIndex = function setZIndex(change) {\n    this._eachSymbolizer(function (symbolizer) {\n      symbolizer.setZIndex(change);\n    });\n  };\n\n  _proto.show = function show() {\n    if (!this._painted) {\n      var layer = this.getLayer();\n\n      if (!layer.isCanvasRender()) {\n        this.paint();\n      }\n    } else {\n      this.removeCache();\n\n      this._eachSymbolizer(function (symbolizer) {\n        symbolizer.show();\n      });\n    }\n  };\n\n  _proto.hide = function hide() {\n    this._eachSymbolizer(function (symbolizer) {\n      symbolizer.hide();\n    });\n  };\n\n  _proto.repaint = function repaint() {\n    this._altAtGLZoom = this._getGeometryAltitude();\n    this.removeCache();\n    var layer = this.getLayer();\n\n    if (!layer) {\n      return;\n    }\n\n    var renderer = layer.getRenderer();\n\n    if (!renderer || !renderer.setToRedraw()) {\n      return;\n    }\n\n    renderer.setToRedraw();\n  };\n\n  _proto.refreshSymbol = function refreshSymbol() {\n    this.removeCache();\n\n    this._removeSymbolizers();\n\n    this.symbolizers = this._createSymbolizers();\n  };\n\n  _proto.remove = function remove() {\n    this.removeCache();\n\n    this._removeSymbolizers();\n  };\n\n  _proto._removeSymbolizers = function _removeSymbolizers() {\n    this._eachSymbolizer(function (symbolizer) {\n      delete symbolizer.painter;\n      symbolizer.remove();\n    });\n\n    delete this.symbolizers;\n  };\n\n  _proto.removeCache = function removeCache() {\n    delete this._renderPoints;\n    delete this._paintParams;\n    delete this._sprite;\n    delete this._extent2D;\n    delete this._fixedExtent;\n    delete this._cachedParams;\n    delete this._unsimpledParams;\n\n    if (this.geometry) {\n      delete this.geometry[TextMarkerSymbolizer.CACHE_KEY];\n    }\n  };\n\n  _proto.getAltitude = function getAltitude() {\n    var propAlt = this.geometry.getAltitude();\n\n    if (propAlt !== this._propAlt) {\n      this._altAtGLZoom = this._getGeometryAltitude();\n    }\n\n    if (!this._altAtGLZoom) {\n      return 0;\n    }\n\n    return this._altAtGLZoom;\n  };\n\n  _proto.getMinAltitude = function getMinAltitude() {\n    if (!this.minAltitude) {\n      return 0;\n    }\n\n    return this.minAltitude;\n  };\n\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    if (!this.maxAltitude) {\n      return 0;\n    }\n\n    return this.maxAltitude;\n  };\n\n  _proto._getGeometryAltitude = function _getGeometryAltitude() {\n    var _this2 = this;\n\n    var map = this.getMap();\n\n    if (!map) {\n      return 0;\n    }\n\n    var altitude = this.geometry.getAltitude();\n    this._propAlt = altitude;\n\n    if (!altitude) {\n      this.minAltitude = this.maxAltitude = 0;\n      return 0;\n    }\n\n    var center = this.geometry.getCenter();\n\n    if (!center) {\n      return 0;\n    }\n\n    if (Array.isArray(altitude)) {\n      this.minAltitude = Number.MAX_VALUE;\n      this.maxAltitude = Number.MIN_VALUE;\n      return altitude.map(function (alt) {\n        var a = _this2._meterToPoint(center, alt);\n\n        if (a < _this2.minAltitude) {\n          _this2.minAltitude = a;\n        }\n\n        if (a > _this2.maxAltitude) {\n          _this2.maxAltitude = a;\n        }\n\n        return a;\n      });\n    } else {\n      this.minAltitude = this.maxAltitude = this._meterToPoint(center, altitude);\n      return this.minAltitude;\n    }\n  };\n\n  _proto._meterToPoint = function _meterToPoint(center, altitude) {\n    var map = this.getMap();\n    var z = map.getGLZoom();\n    return map.distanceToPoint(altitude, 0, z, center).x * sign(altitude);\n  };\n\n  _proto._verifyProjection = function _verifyProjection() {\n    var projection = this.geometry._getProjection();\n\n    if (this._projCode && this._projCode !== projection.code) {\n      this.removeCache();\n    }\n\n    this._projCode = projection.code;\n  };\n\n  _proto._beforePaint = function _beforePaint() {\n    var textcache = this.geometry[TextMarkerSymbolizer.CACHE_KEY];\n\n    if (!textcache) {\n      return;\n    }\n\n    for (var p in textcache) {\n      if (hasOwn(textcache, p)) {\n        textcache[p].active = false;\n      }\n    }\n  };\n\n  _proto._afterPaint = function _afterPaint() {\n    var textcache = this.geometry[TextMarkerSymbolizer.CACHE_KEY];\n\n    if (!textcache) {\n      return;\n    }\n\n    for (var p in textcache) {\n      if (hasOwn(textcache, p)) {\n        if (!textcache[p].active) {\n          delete textcache[p];\n        }\n      }\n    }\n  };\n\n  return Painter;\n}(Class);\n\nfunction interpolateAlt(points, orig, altitude) {\n  if (!Array.isArray(altitude)) {\n    return points;\n  }\n\n  var parts = [];\n\n  for (var i = 0, l = points.length; i < l; i++) {\n    if (Array.isArray(points[i])) {\n      parts.push(interpolateAlt(points[i], orig, altitude));\n    } else {\n      var p = points[i];\n\n      if (!p.point.equals(orig[p.index])) {\n        var w0 = void 0,\n            w1 = void 0;\n\n        if (p.index === 0) {\n          w0 = p.index;\n          w1 = p.index + 1;\n        } else {\n          w0 = p.index - 1;\n          w1 = p.index;\n        }\n\n        var t0 = p.point.distanceTo(orig[w1]);\n        var t = t0 / (t0 + orig[w0].distanceTo(p.point));\n        var alt = interpolate(altitude[w0], altitude[w1], 1 - t);\n        p.altitude = alt;\n        parts.push(p);\n      } else {\n        p.altitude = altitude[p.index];\n        parts.push(p);\n      }\n    }\n  }\n\n  return parts;\n}\n\nvar TEMP_EXTENT$2 = new PointExtent();\n\nvar CollectionPainter = function (_Class) {\n  _inheritsLoose(CollectionPainter, _Class);\n\n  function CollectionPainter(geometry, isMask) {\n    var _this;\n\n    _this = _Class.call(this) || this;\n    _this.geometry = geometry;\n    _this.isMask = isMask;\n    return _this;\n  }\n\n  var _proto = CollectionPainter.prototype;\n\n  _proto._eachPainter = function _eachPainter(fn) {\n    var geometries = this.geometry.getGeometries();\n    var painter;\n\n    for (var i = 0, len = geometries.length; i < len; i++) {\n      painter = this.isMask ? geometries[i]._getMaskPainter() : geometries[i]._getPainter();\n\n      if (!painter) {\n        continue;\n      }\n\n      if (painter) {\n        if (fn.call(this, painter) === false) {\n          break;\n        }\n      }\n    }\n  };\n\n  _proto.paint = function paint(extent) {\n    if (!this.geometry) {\n      return;\n    }\n\n    this._eachPainter(function (painter) {\n      painter.paint(extent);\n    });\n  };\n\n  _proto.get2DExtent = function get2DExtent(resources, out) {\n    if (out) {\n      out.set(null, null, null, null);\n    }\n\n    var extent = out || new PointExtent();\n\n    this._eachPainter(function (painter) {\n      extent = extent._combine(painter.get2DExtent(resources, TEMP_EXTENT$2));\n    });\n\n    return extent;\n  };\n\n  _proto.getContainerExtent = function getContainerExtent() {\n    var extent = new PointExtent();\n\n    this._eachPainter(function (painter) {\n      extent = extent.combine(painter.getContainerExtent());\n    });\n\n    return extent;\n  };\n\n  _proto.remove = function remove() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.remove.apply(painter, args);\n    });\n  };\n\n  _proto.setZIndex = function setZIndex() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.setZIndex.apply(painter, args);\n    });\n  };\n\n  _proto.show = function show() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.show.apply(painter, args);\n    });\n  };\n\n  _proto.hide = function hide() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.hide.apply(painter, args);\n    });\n  };\n\n  _proto.repaint = function repaint() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.repaint.apply(painter, args);\n    });\n  };\n\n  _proto.refreshSymbol = function refreshSymbol() {\n    var args = arguments;\n\n    this._eachPainter(function (painter) {\n      painter.refreshSymbol.apply(painter, args);\n    });\n  };\n\n  _proto.hasPoint = function hasPoint() {\n    var result = false;\n\n    this._eachPainter(function (painter) {\n      if (painter.hasPoint()) {\n        result = true;\n        return false;\n      }\n\n      return true;\n    });\n\n    return result;\n  };\n\n  _proto.getMinAltitude = function getMinAltitude() {\n    var first = true;\n    var result = 0;\n\n    this._eachPainter(function (painter) {\n      var alt = painter.getMinAltitude();\n\n      if (first || alt < result) {\n        first = false;\n        result = alt;\n      }\n    });\n\n    return result;\n  };\n\n  _proto.getMaxAltitude = function getMaxAltitude() {\n    var result = 0;\n\n    this._eachPainter(function (painter) {\n      var alt = painter.getMaxAltitude();\n\n      if (alt > result) {\n        result = alt;\n      }\n    });\n\n    return result;\n  };\n\n  return CollectionPainter;\n}(Class);\n\nvar DefaultSpatialReference = {\n  'EPSG:3857': {\n    'resolutions': function () {\n      var resolutions = [];\n      var d = 2 * 6378137 * Math.PI;\n\n      for (var i = 0; i < 21; i++) {\n        resolutions[i] = d / (256 * Math.pow(2, i));\n      }\n\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 6378137 * Math.PI,\n      'left': -6378137 * Math.PI,\n      'bottom': -6378137 * Math.PI,\n      'right': 6378137 * Math.PI\n    }\n  },\n  'EPSG:4326': {\n    'fullExtent': {\n      'top': 90,\n      'left': -180,\n      'bottom': -90,\n      'right': 180\n    },\n    'resolutions': function () {\n      var resolutions = [];\n\n      for (var i = 0; i < 20; i++) {\n        resolutions[i] = 180 / (Math.pow(2, i) * 128);\n      }\n\n      return resolutions;\n    }()\n  },\n  'BAIDU': {\n    'resolutions': function () {\n      var res = Math.pow(2, 18);\n      var resolutions = [];\n\n      for (var i = 0; i < 20; i++) {\n        resolutions[i] = res;\n        res *= 0.5;\n      }\n\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 33554432,\n      'left': -33554432,\n      'bottom': -33554432,\n      'right': 33554432\n    }\n  },\n  'IDENTITY': {\n    'resolutions': function () {\n      var res = Math.pow(2, 8);\n      var resolutions = [];\n\n      for (var i = 0; i < 18; i++) {\n        resolutions[i] = res;\n        res *= 0.5;\n      }\n\n      return resolutions;\n    }(),\n    'fullExtent': {\n      'top': 200000,\n      'left': -200000,\n      'bottom': -200000,\n      'right': 200000\n    }\n  }\n};\nDefaultSpatialReference['EPSG:4490'] = DefaultSpatialReference['EPSG:4326'];\n\nvar SpatialReference = function () {\n  function SpatialReference(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.options = options;\n\n    this._initSpatialRef();\n  }\n\n  SpatialReference.getProjectionInstance = function getProjectionInstance(prjName) {\n    if (!prjName) {\n      return null;\n    }\n\n    if (isObject(prjName)) {\n      return prjName;\n    }\n\n    prjName = (prjName + '').toLowerCase();\n\n    for (var p in projections) {\n      if (hasOwn(projections, p)) {\n        var code = projections[p]['code'];\n\n        if (code && code.toLowerCase() === prjName) {\n          return projections[p];\n        }\n      }\n    }\n\n    return null;\n  };\n\n  SpatialReference.equals = function equals(sp1, sp2) {\n    if (!sp1 && !sp2) {\n      return true;\n    } else if (!sp1 || !sp2) {\n      return false;\n    }\n\n    if (sp1.projection !== sp2.projection) {\n      return false;\n    }\n\n    var f1 = sp1.fullExtent,\n        f2 = sp2.fullExtent;\n\n    if (f1 && !f2 || !f1 && f2) {\n      return false;\n    }\n\n    if (f1 && f2) {\n      if (f1.top !== f2.top || f1.bottom !== f2.bottom || f1.left !== f2.left || f1.right !== f2.right) {\n        return false;\n      }\n    }\n\n    var r1 = sp1.resolutions,\n        r2 = sp2.resolutions;\n\n    if (r1 && r2) {\n      if (r1.length !== r2.length) {\n        return false;\n      }\n\n      for (var i = 0; i < r1.length; i++) {\n        if (r1[i] !== r2[i]) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  };\n\n  var _proto = SpatialReference.prototype;\n\n  _proto._initSpatialRef = function _initSpatialRef() {\n    var projection = this.options['projection'];\n\n    if (projection) {\n      projection = SpatialReference.getProjectionInstance(projection);\n    } else {\n      projection = DEFAULT$1;\n    }\n\n    if (!projection) {\n      throw new Error('must provide a valid projection in map\\'s spatial reference.');\n    }\n\n    projection = extend({}, Common, projection);\n\n    if (!projection.measureLength) {\n      extend(projection, Measurer.DEFAULT);\n    }\n\n    this._projection = projection;\n    var defaultSpatialRef,\n        resolutions = this.options['resolutions'];\n\n    if (!resolutions) {\n      if (projection['code']) {\n        defaultSpatialRef = DefaultSpatialReference[projection['code']];\n\n        if (defaultSpatialRef) {\n          resolutions = defaultSpatialRef['resolutions'];\n          this.isEPSG = projection['code'] !== 'IDENTITY';\n        }\n      }\n\n      if (!resolutions) {\n        throw new Error('must provide valid resolutions in map\\'s spatial reference.');\n      }\n    }\n\n    this._resolutions = resolutions;\n    var fullExtent = this.options['fullExtent'];\n\n    if (!fullExtent) {\n      if (projection['code']) {\n        defaultSpatialRef = DefaultSpatialReference[projection['code']];\n\n        if (defaultSpatialRef) {\n          fullExtent = defaultSpatialRef['fullExtent'];\n        }\n      }\n\n      if (!fullExtent) {\n        throw new Error('must provide a valid fullExtent in map\\'s spatial reference.');\n      }\n    }\n\n    if (!isNil(fullExtent['left'])) {\n      this._fullExtent = new Extent(new Coordinate(fullExtent['left'], fullExtent['top']), new Coordinate(fullExtent['right'], fullExtent['bottom']));\n    } else {\n      this._fullExtent = new Extent(fullExtent);\n      fullExtent['left'] = fullExtent['xmin'];\n      fullExtent['right'] = fullExtent['xmax'];\n      fullExtent['top'] = fullExtent['ymax'];\n      fullExtent['bottom'] = fullExtent['ymin'];\n    }\n\n    if (isNil(fullExtent['top']) || isNil(fullExtent['bottom']) || isNil(fullExtent['left']) || isNil(fullExtent['right'])) {\n      throw new Error('must provide valid top/bottom/left/right in fullExtent.');\n    }\n\n    extend(this._fullExtent, fullExtent);\n    this._projection.fullExtent = fullExtent;\n    var a = fullExtent['right'] >= fullExtent['left'] ? 1 : -1,\n        b = fullExtent['top'] >= fullExtent['bottom'] ? -1 : 1;\n    this._transformation = new Transformation([a, b, 0, 0]);\n  };\n\n  _proto.getResolutions = function getResolutions() {\n    return this._resolutions || [];\n  };\n\n  _proto.getResolution = function getResolution(zoom) {\n    var z = zoom | 0;\n\n    if (z < 0) {\n      z = 0;\n    } else if (z > this._resolutions.length - 1) {\n      z = this._resolutions.length - 1;\n    }\n\n    var res = this._resolutions[z];\n\n    if (z !== zoom && zoom > 0 && z < this._resolutions.length - 1) {\n      var next = this._resolutions[z + 1];\n      return res + (next - res) * (zoom - z);\n    }\n\n    return res;\n  };\n\n  _proto.getProjection = function getProjection() {\n    return this._projection;\n  };\n\n  _proto.getFullExtent = function getFullExtent() {\n    return this._fullExtent;\n  };\n\n  _proto.getTransformation = function getTransformation() {\n    return this._transformation;\n  };\n\n  _proto.getMinZoom = function getMinZoom() {\n    for (var i = 0; i < this._resolutions.length; i++) {\n      if (!isNil(this._resolutions[i])) {\n        return i;\n      }\n    }\n\n    return 0;\n  };\n\n  _proto.getMaxZoom = function getMaxZoom() {\n    for (var i = this._resolutions.length - 1; i >= 0; i--) {\n      if (!isNil(this._resolutions[i])) {\n        return i;\n      }\n    }\n\n    return this._resolutions.length - 1;\n  };\n\n  _proto.getZoomDirection = function getZoomDirection() {\n    return sign(this._resolutions[this.getMinZoom()] - this._resolutions[this.getMaxZoom()]);\n  };\n\n  _proto.toJSON = function toJSON() {\n    if (!this.json) {\n      this.json = {\n        'resolutions': this._resolutions,\n        'fullExtent': {\n          'top': this._fullExtent.top,\n          'left': this._fullExtent.left,\n          'bottom': this._fullExtent.bottom,\n          'right': this._fullExtent.right\n        },\n        'projection': this._projection.code\n      };\n    }\n\n    return this.json;\n  };\n\n  return SpatialReference;\n}();\n\nvar options = {\n  'id': null,\n  'visible': true,\n  'interactive': true,\n  'editable': true,\n  'cursor': null,\n  'defaultProjection': 'EPSG:4326'\n};\n\nvar Geometry = function (_JSONAble) {\n  _inheritsLoose(Geometry, _JSONAble);\n\n  function Geometry(options) {\n    var _this;\n\n    var opts = extend({}, options);\n    var symbol = opts['symbol'];\n    var properties = opts['properties'];\n    var id = opts['id'];\n    delete opts['symbol'];\n    delete opts['id'];\n    delete opts['properties'];\n    _this = _JSONAble.call(this, opts) || this;\n\n    if (symbol) {\n      _this.setSymbol(symbol);\n    }\n\n    if (properties) {\n      _this.setProperties(properties);\n    }\n\n    if (!isNil(id)) {\n      _this.setId(id);\n    }\n\n    return _this;\n  }\n\n  var _proto = Geometry.prototype;\n\n  _proto.getFirstCoordinate = function getFirstCoordinate() {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n\n      if (!geometries.length) {\n        return null;\n      }\n\n      return geometries[0].getFirstCoordinate();\n    }\n\n    var coordinates = this.getCoordinates();\n\n    if (!Array.isArray(coordinates)) {\n      return coordinates;\n    }\n\n    do {\n      coordinates = coordinates[0];\n    } while (Array.isArray(coordinates) && coordinates.length > 0);\n\n    return coordinates;\n  };\n\n  _proto.getLastCoordinate = function getLastCoordinate() {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n\n      if (!geometries.length) {\n        return null;\n      }\n\n      return geometries[geometries.length - 1].getLastCoordinate();\n    }\n\n    var coordinates = this.getCoordinates();\n\n    if (!Array.isArray(coordinates)) {\n      return coordinates;\n    }\n\n    do {\n      coordinates = coordinates[coordinates.length - 1];\n    } while (Array.isArray(coordinates) && coordinates.length > 0);\n\n    return coordinates;\n  };\n\n  _proto.addTo = function addTo(layer, fitview) {\n    layer.addGeometry(this, fitview);\n    return this;\n  };\n\n  _proto.getLayer = function getLayer() {\n    if (!this._layer) {\n      return null;\n    }\n\n    return this._layer;\n  };\n\n  _proto.getMap = function getMap() {\n    if (!this._layer) {\n      return null;\n    }\n\n    return this._layer.getMap();\n  };\n\n  _proto.getId = function getId() {\n    return this._id;\n  };\n\n  _proto.setId = function setId(id) {\n    var oldId = this.getId();\n    this._id = id;\n\n    this._fireEvent('idchange', {\n      'old': oldId,\n      'new': id\n    });\n\n    return this;\n  };\n\n  _proto.getProperties = function getProperties() {\n    if (!this.properties) {\n      if (this._getParent()) {\n        return this._getParent().getProperties();\n      }\n\n      return null;\n    }\n\n    return this.properties;\n  };\n\n  _proto.setProperties = function setProperties(properties) {\n    var old = this.properties;\n    this.properties = isObject(properties) ? extend({}, properties) : properties;\n\n    this._repaint();\n\n    this._fireEvent('propertieschange', {\n      'old': old,\n      'new': properties\n    });\n\n    return this;\n  };\n\n  _proto.getType = function getType() {\n    return this.type;\n  };\n\n  _proto.getSymbol = function getSymbol() {\n    var s = this._symbol;\n\n    if (s) {\n      if (!Array.isArray(s)) {\n        return extend({}, s);\n      } else {\n        return extendSymbol(s);\n      }\n    }\n\n    return null;\n  };\n\n  _proto.setSymbol = function setSymbol(symbol) {\n    this._symbol = this._prepareSymbol(symbol);\n    this.onSymbolChanged();\n    return this;\n  };\n\n  _proto.updateSymbol = function updateSymbol(props) {\n    if (!props) {\n      return this;\n    }\n\n    var s = this._getSymbol();\n\n    if (s) {\n      s = extendSymbol(s, props);\n    } else {\n      s = extendSymbol(this._getInternalSymbol(), props);\n    }\n\n    this._eventSymbolProperties = props;\n    return this.setSymbol(s);\n  };\n\n  _proto.getCenter = function getCenter() {\n    return this._computeCenter(this._getMeasurer());\n  };\n\n  _proto.getExtent = function getExtent() {\n    var prjExt = this._getPrjExtent();\n\n    var projection = this._getProjection();\n\n    if (prjExt && projection) {\n      var min = projection.unproject(new Coordinate(prjExt['xmin'], prjExt['ymin'])),\n          max = projection.unproject(new Coordinate(prjExt['xmax'], prjExt['ymax']));\n      return new Extent(min, max, projection);\n    } else {\n      return this._computeExtent(this._getMeasurer());\n    }\n  };\n\n  _proto.getContainerExtent = function getContainerExtent(out) {\n    var painter = this._getPainter();\n\n    return painter ? painter.getContainerExtent(out) : null;\n  };\n\n  _proto.getSize = function getSize() {\n    var extent = this.getContainerExtent();\n    return extent ? extent.getSize() : null;\n  };\n\n  _proto.containsPoint = function containsPoint(containerPoint, t) {\n    if (!this.getMap()) {\n      throw new Error('The geometry is required to be added on a map to perform \"containsPoint\".');\n    }\n\n    if (containerPoint instanceof Coordinate) {\n      containerPoint = this.getMap().coordToContainerPoint(containerPoint);\n    }\n\n    return this._containsPoint(containerPoint, t);\n  };\n\n  _proto._containsPoint = function _containsPoint(containerPoint, t) {\n    var painter = this._getPainter();\n\n    if (!painter) {\n      return false;\n    }\n\n    if (isNil(t) && this._hitTestTolerance) {\n      t = this._hitTestTolerance();\n    }\n\n    return painter.hitTest(containerPoint, t);\n  };\n\n  _proto.show = function show() {\n    this.options['visible'] = true;\n\n    if (this.getMap()) {\n      var painter = this._getPainter();\n\n      if (painter) {\n        painter.show();\n      }\n\n      this._fireEvent('show');\n    }\n\n    return this;\n  };\n\n  _proto.hide = function hide() {\n    this.options['visible'] = false;\n\n    if (this.getMap()) {\n      this.onHide();\n\n      var painter = this._getPainter();\n\n      if (painter) {\n        painter.hide();\n      }\n\n      this._fireEvent('hide');\n    }\n\n    return this;\n  };\n\n  _proto.isVisible = function isVisible() {\n    if (!this.options['visible']) {\n      return false;\n    }\n\n    var symbol = this._getInternalSymbol();\n\n    if (!symbol) {\n      return true;\n    }\n\n    if (Array.isArray(symbol)) {\n      if (!symbol.length) {\n        return true;\n      }\n\n      for (var i = 0, l = symbol.length; i < l; i++) {\n        if (isNil(symbol[i]['opacity']) || symbol[i]['opacity'] > 0) {\n          return true;\n        }\n      }\n\n      return false;\n    } else {\n      return isNil(symbol['opacity']) || isNumber(symbol['opacity']) && symbol['opacity'] > 0;\n    }\n  };\n\n  _proto.getZIndex = function getZIndex() {\n    return this.options['zIndex'] || 0;\n  };\n\n  _proto.setZIndex = function setZIndex(zIndex) {\n    var old = this.options['zIndex'];\n    this.options['zIndex'] = zIndex;\n\n    this._fireEvent('zindexchange', {\n      'old': old,\n      'new': zIndex\n    });\n\n    return this;\n  };\n\n  _proto.setZIndexSilently = function setZIndexSilently(zIndex) {\n    this.options['zIndex'] = zIndex;\n    return this;\n  };\n\n  _proto.bringToFront = function bringToFront() {\n    var layer = this.getLayer();\n\n    if (!layer || !layer.getGeoMaxZIndex) {\n      return this;\n    }\n\n    var topZ = layer.getGeoMaxZIndex();\n    this.setZIndex(topZ + 1);\n    return this;\n  };\n\n  _proto.bringToBack = function bringToBack() {\n    var layer = this.getLayer();\n\n    if (!layer || !layer.getGeoMinZIndex) {\n      return this;\n    }\n\n    var bottomZ = layer.getGeoMinZIndex();\n    this.setZIndex(bottomZ - 1);\n    return this;\n  };\n\n  _proto.translate = function translate(x, y) {\n    if (isNil(x)) {\n      return this;\n    }\n\n    var offset = new Coordinate(x, y);\n\n    if (offset.x === 0 && offset.y === 0) {\n      return this;\n    }\n\n    var coordinates = this.getCoordinates();\n\n    if (coordinates) {\n      if (Array.isArray(coordinates)) {\n        var translated = forEachCoord(coordinates, function (coord) {\n          return coord.add(offset);\n        });\n        this.setCoordinates(translated);\n      } else {\n        this.setCoordinates(coordinates.add(offset));\n      }\n    }\n\n    return this;\n  };\n\n  _proto.flash = function flash$$1(interval, count, cb, context) {\n    return flash.call(this, interval, count, cb, context);\n  };\n\n  _proto.copy = function copy() {\n    var json = this.toJSON();\n    var ret = Geometry.fromJSON(json);\n    ret.options['visible'] = true;\n    return ret;\n  };\n\n  _proto.remove = function remove() {\n    var layer = this.getLayer();\n\n    if (!layer) {\n      return this;\n    }\n\n    this._fireEvent('removestart');\n\n    this._unbind();\n\n    this._fireEvent('removeend');\n\n    this._fireEvent('remove');\n\n    return this;\n  };\n\n  _proto.toGeoJSONGeometry = function toGeoJSONGeometry() {\n    var gJson = this._exportGeoJSONGeometry();\n\n    return gJson;\n  };\n\n  _proto.toGeoJSON = function toGeoJSON(opts) {\n    if (!opts) {\n      opts = {};\n    }\n\n    var feature = {\n      'type': 'Feature',\n      'geometry': null\n    };\n\n    if (isNil(opts['geometry']) || opts['geometry']) {\n      var geoJSON = this._exportGeoJSONGeometry();\n\n      feature['geometry'] = geoJSON;\n    }\n\n    var id = this.getId();\n\n    if (!isNil(id)) {\n      feature['id'] = id;\n    }\n\n    var properties;\n\n    if (isNil(opts['properties']) || opts['properties']) {\n      properties = this._exportProperties();\n    }\n\n    feature['properties'] = properties;\n    return feature;\n  };\n\n  _proto.toJSON = function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n\n    var json = this._toJSON(options);\n\n    var other = this._exportGraphicOptions(options);\n\n    extend(json, other);\n    return json;\n  };\n\n  _proto.getLength = function getLength() {\n    return this._computeGeodesicLength(this._getMeasurer());\n  };\n\n  _proto.getArea = function getArea() {\n    return this._computeGeodesicArea(this._getMeasurer());\n  };\n\n  _proto.rotate = function rotate(angle, pivot) {\n    if (this.type === 'GeometryCollection') {\n      var geometries = this.getGeometries();\n      geometries.forEach(function (g) {\n        return g.rotate(angle, pivot);\n      });\n      return this;\n    }\n\n    if (!pivot) {\n      pivot = this.getCenter();\n    } else {\n      pivot = new Coordinate(pivot);\n    }\n\n    var measurer = this._getMeasurer();\n\n    var coordinates = this.getCoordinates();\n\n    if (!Array.isArray(coordinates)) {\n      if (pivot.x !== coordinates.x || pivot.y !== coordinates.y) {\n        var c = measurer._rotate(coordinates, pivot, angle);\n\n        this.setCoordinates(c);\n      }\n\n      return this;\n    }\n\n    forEachCoord(coordinates, function (c) {\n      return measurer._rotate(c, pivot, angle);\n    });\n    this.setCoordinates(coordinates);\n    return this;\n  };\n\n  _proto._getConnectPoints = function _getConnectPoints() {\n    return [this.getCenter()];\n  };\n\n  _proto._initOptions = function _initOptions(options) {\n    var opts = extend({}, options);\n    var symbol = opts['symbol'];\n    var properties = opts['properties'];\n    var id = opts['id'];\n    delete opts['symbol'];\n    delete opts['id'];\n    delete opts['properties'];\n    this.setOptions(opts);\n\n    if (symbol) {\n      this.setSymbol(symbol);\n    }\n\n    if (properties) {\n      this.setProperties(properties);\n    }\n\n    if (!isNil(id)) {\n      this.setId(id);\n    }\n  };\n\n  _proto._bindLayer = function _bindLayer(layer) {\n    if (this.getLayer()) {\n      throw new Error('Geometry cannot be added to two or more layers at the same time.');\n    }\n\n    this._layer = layer;\n\n    this._clearCache();\n  };\n\n  _proto._prepareSymbol = function _prepareSymbol(symbol) {\n    if (Array.isArray(symbol)) {\n      var cookedSymbols = [];\n\n      for (var i = 0; i < symbol.length; i++) {\n        cookedSymbols.push(convertResourceUrl(this._checkAndCopySymbol(symbol[i])));\n      }\n\n      return cookedSymbols;\n    } else if (symbol) {\n      symbol = this._checkAndCopySymbol(symbol);\n      return convertResourceUrl(symbol);\n    }\n\n    return null;\n  };\n\n  _proto._checkAndCopySymbol = function _checkAndCopySymbol(symbol) {\n    var s = {};\n\n    for (var i in symbol) {\n      if (NUMERICAL_PROPERTIES[i] && isString(symbol[i])) {\n        s[i] = +symbol[i];\n      } else {\n        s[i] = symbol[i];\n      }\n    }\n\n    return s;\n  };\n\n  _proto._getSymbol = function _getSymbol() {\n    return this._symbol;\n  };\n\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    this._eventSymbolProperties = symbol;\n    this._externSymbol = this._prepareSymbol(symbol);\n    this.onSymbolChanged();\n    return this;\n  };\n\n  _proto._getInternalSymbol = function _getInternalSymbol() {\n    if (this._symbol) {\n      return this._symbol;\n    } else if (this._externSymbol) {\n      return this._externSymbol;\n    } else if (this.options['symbol']) {\n      return this.options['symbol'];\n    }\n\n    return null;\n  };\n\n  _proto._getPrjExtent = function _getPrjExtent() {\n    var p = this._getProjection();\n\n    this._verifyProjection();\n\n    if (!this._extent && p) {\n      this._extent = this._computePrjExtent(p);\n    }\n\n    return this._extent;\n  };\n\n  _proto._unbind = function _unbind() {\n    var layer = this.getLayer();\n\n    if (!layer) {\n      return;\n    }\n\n    if (this._animPlayer) {\n      this._animPlayer.finish();\n    }\n\n    this._clearHandlers();\n\n    this._unbindMenu();\n\n    this._unbindInfoWindow();\n\n    if (this.isEditing()) {\n      this.endEdit();\n    }\n\n    this._removePainter();\n\n    if (this.onRemove) {\n      this.onRemove();\n    }\n\n    if (layer.onRemoveGeometry) {\n      layer.onRemoveGeometry(this);\n    }\n\n    delete this._layer;\n    delete this._internalId;\n    delete this._extent;\n  };\n\n  _proto._getInternalId = function _getInternalId() {\n    return this._internalId;\n  };\n\n  _proto._setInternalId = function _setInternalId(id) {\n    this._internalId = id;\n  };\n\n  _proto._getMeasurer = function _getMeasurer() {\n    if (this._getProjection()) {\n      return this._getProjection();\n    }\n\n    return SpatialReference.getProjectionInstance(this.options['defaultProjection']);\n  };\n\n  _proto._getProjection = function _getProjection() {\n    var map = this.getMap();\n\n    if (map) {\n      return map.getProjection();\n    }\n\n    return null;\n  };\n\n  _proto._verifyProjection = function _verifyProjection() {\n    var projection = this._getProjection();\n\n    if (this._projCode && projection && this._projCode !== projection.code) {\n      this._clearProjection();\n    }\n\n    this._projCode = projection ? projection.code : this._projCode;\n  };\n\n  _proto._getExternalResources = function _getExternalResources() {\n    var symbol = this._getInternalSymbol();\n\n    return getExternalResources(symbol);\n  };\n\n  _proto._getPainter = function _getPainter() {\n    var layer = this.getLayer();\n\n    if (!this._painter && layer) {\n      if (GEOMETRY_COLLECTION_TYPES.indexOf(this.type) !== -1) {\n        if (layer.constructor.getCollectionPainterClass) {\n          var clazz = layer.constructor.getCollectionPainterClass();\n          this._painter = new clazz(this);\n        }\n      } else if (layer.constructor.getPainterClass) {\n        var _clazz = layer.constructor.getPainterClass();\n\n        this._painter = new _clazz(this);\n      }\n    }\n\n    return this._painter;\n  };\n\n  _proto._getMaskPainter = function _getMaskPainter() {\n    if (this._maskPainter) {\n      return this._maskPainter;\n    }\n\n    this._maskPainter = this.getGeometries && this.getGeometries() ? new CollectionPainter(this, true) : new Painter(this);\n    return this._maskPainter;\n  };\n\n  _proto._removePainter = function _removePainter() {\n    if (this._painter) {\n      this._painter.remove();\n    }\n\n    delete this._painter;\n  };\n\n  _proto._paint = function _paint(extent) {\n    if (this._painter) {\n      this._painter.paint(extent);\n    }\n  };\n\n  _proto._clearCache = function _clearCache() {\n    delete this._extent;\n  };\n\n  _proto._clearProjection = function _clearProjection() {\n    delete this._extent;\n  };\n\n  _proto._repaint = function _repaint() {\n    if (this._painter) {\n      this._painter.repaint();\n    }\n  };\n\n  _proto.onHide = function onHide() {\n    this.closeMenu();\n    this.closeInfoWindow();\n  };\n\n  _proto.onShapeChanged = function onShapeChanged() {\n    this._clearCache();\n\n    this._repaint();\n\n    this._fireEvent('shapechange');\n  };\n\n  _proto.onPositionChanged = function onPositionChanged() {\n    this._clearCache();\n\n    this._repaint();\n\n    this._fireEvent('positionchange');\n  };\n\n  _proto.onSymbolChanged = function onSymbolChanged() {\n    if (this._painter) {\n      this._painter.refreshSymbol();\n    }\n\n    var e = {};\n\n    if (this._eventSymbolProperties) {\n      e.properties = extend({}, this._eventSymbolProperties);\n      delete this._eventSymbolProperties;\n    }\n\n    this._fireEvent('symbolchange', e);\n  };\n\n  _proto.onConfig = function onConfig(conf) {\n    var properties;\n\n    if (conf['properties']) {\n      properties = conf['properties'];\n      delete conf['properties'];\n    }\n\n    var needRepaint = false;\n\n    for (var p in conf) {\n      if (conf.hasOwnProperty(p)) {\n        var prefix = p.slice(0, 5);\n\n        if (prefix === 'arrow' || prefix === 'smoot') {\n          needRepaint = true;\n          break;\n        }\n      }\n    }\n\n    if (properties) {\n      this.setProperties(properties);\n\n      this._repaint();\n    } else if (needRepaint) {\n      this._repaint();\n    }\n  };\n\n  _proto._setParent = function _setParent(geometry) {\n    if (geometry) {\n      this._parent = geometry;\n    }\n  };\n\n  _proto._getParent = function _getParent() {\n    return this._parent;\n  };\n\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (this.getLayer() && this.getLayer()._onGeometryEvent) {\n      if (!param) {\n        param = {};\n      }\n\n      param['type'] = eventName;\n      param['target'] = this;\n\n      this.getLayer()._onGeometryEvent(param);\n    }\n\n    this.fire(eventName, param);\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options)\n    };\n  };\n\n  _proto._exportGraphicOptions = function _exportGraphicOptions(options) {\n    var json = {};\n\n    if (isNil(options['options']) || options['options']) {\n      json['options'] = this.config();\n    }\n\n    if (isNil(options['symbol']) || options['symbol']) {\n      json['symbol'] = this.getSymbol();\n    }\n\n    if (isNil(options['infoWindow']) || options['infoWindow']) {\n      if (this._infoWinOptions) {\n        json['infoWindow'] = this._infoWinOptions;\n      }\n    }\n\n    return json;\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var points = this.getCoordinates();\n    var coordinates = Coordinate.toNumberArrays(points);\n    return {\n      'type': this.getType(),\n      'coordinates': coordinates\n    };\n  };\n\n  _proto._exportProperties = function _exportProperties() {\n    var properties = null;\n    var geoProperties = this.getProperties();\n\n    if (!isNil(geoProperties)) {\n      if (isObject(geoProperties)) {\n        properties = extend({}, geoProperties);\n      } else {\n        properties = geoProperties;\n      }\n    }\n\n    return properties;\n  };\n\n  _proto.getAltitude = function getAltitude() {\n    var layer = this.getLayer();\n\n    if (!layer) {\n      return 0;\n    }\n\n    var layerOpts = layer.options,\n        properties = this.getProperties();\n    var altitude = layerOpts['enableAltitude'] ? properties ? properties[layerOpts['altitudeProperty']] : 0 : 0;\n    var layerAltitude = layer.getAltitude ? layer.getAltitude() : 0;\n\n    if (Array.isArray(altitude)) {\n      return altitude.map(function (alt) {\n        return alt + layerAltitude;\n      });\n    }\n\n    return altitude + layerAltitude;\n  };\n\n  return Geometry;\n}(JSONAble(Eventable(Handlerable(Class))));\n\nGeometry.mergeOptions(options);\nvar options$1 = {\n  'attribution': null,\n  'minZoom': null,\n  'maxZoom': null,\n  'visible': true,\n  'opacity': 1,\n  'globalCompositeOperation': null,\n  'renderer': 'canvas',\n  'debugOutline': '#0f0',\n  'cssFilter': null,\n  'forceRenderOnMoving': false,\n  'forceRenderOnZooming': false,\n  'forceRenderOnRotating': false,\n  'hitDetect': function () {\n    return !Browser$1.mobile;\n  }()\n};\n\nvar Layer = function (_JSONAble) {\n  _inheritsLoose(Layer, _JSONAble);\n\n  function Layer(id, options) {\n    var _this;\n\n    var canvas;\n\n    if (options) {\n      canvas = options.canvas;\n      delete options.canvas;\n    }\n\n    _this = _JSONAble.call(this, options) || this;\n    _this._canvas = canvas;\n\n    _this.setId(id);\n\n    if (options) {\n      _this.setZIndex(options.zIndex);\n\n      if (options.mask) {\n        _this.setMask(Geometry.fromJSON(options.mask));\n      }\n    }\n\n    return _this;\n  }\n\n  var _proto = Layer.prototype;\n\n  _proto.load = function load() {\n    if (!this.getMap()) {\n      return this;\n    }\n\n    if (this.onLoad()) {\n      this._initRenderer();\n\n      var zIndex = this.getZIndex();\n\n      if (!isNil(zIndex)) {\n        this._renderer.setZIndex(zIndex);\n\n        if (!this.isCanvasRender()) {\n          this._renderer.render();\n        }\n      }\n\n      this.onLoadEnd();\n    }\n\n    return this;\n  };\n\n  _proto.getId = function getId() {\n    return this._id;\n  };\n\n  _proto.setId = function setId(id) {\n    var old = this._id;\n\n    if (!isNil(id)) {\n      id = id + '';\n    }\n\n    this._id = id;\n    this.fire('idchange', {\n      'old': old,\n      'new': id\n    });\n    return this;\n  };\n\n  _proto.addTo = function addTo(map) {\n    map.addLayer(this);\n    return this;\n  };\n\n  _proto.setZIndex = function setZIndex(zIndex) {\n    this._zIndex = zIndex;\n\n    if (isNil(zIndex)) {\n      delete this.options['zIndex'];\n    } else {\n      this.options.zIndex = zIndex;\n    }\n\n    if (this.map) {\n      this.map._sortLayersByZIndex();\n    }\n\n    if (this._renderer) {\n      this._renderer.setZIndex(zIndex);\n    }\n\n    return this;\n  };\n\n  _proto.getZIndex = function getZIndex() {\n    return this._zIndex || 0;\n  };\n\n  _proto.getMinZoom = function getMinZoom() {\n    var map = this.getMap();\n    var minZoom = this.options['minZoom'];\n    return map ? Math.max(map.getMinZoom(), minZoom || 0) : minZoom;\n  };\n\n  _proto.getMaxZoom = function getMaxZoom() {\n    var map = this.getMap();\n    var maxZoom = this.options['maxZoom'];\n    return map ? Math.min(map.getMaxZoom(), isNil(maxZoom) ? Infinity : maxZoom) : maxZoom;\n  };\n\n  _proto.getOpacity = function getOpacity() {\n    return this.options['opacity'];\n  };\n\n  _proto.setOpacity = function setOpacity(op) {\n    this.config('opacity', op);\n    return this;\n  };\n\n  _proto.isCanvasRender = function isCanvasRender() {\n    var renderer = this._getRenderer();\n\n    return renderer && renderer instanceof CanvasRenderer;\n  };\n\n  _proto.getMap = function getMap() {\n    if (this.map) {\n      return this.map;\n    }\n\n    return null;\n  };\n\n  _proto.getProjection = function getProjection() {\n    var map = this.getMap();\n    return map ? map.getProjection() : null;\n  };\n\n  _proto.bringToFront = function bringToFront() {\n    var layers = this._getLayerList();\n\n    if (!layers.length) {\n      return this;\n    }\n\n    var topLayer = layers[layers.length - 1];\n\n    if (layers.length === 1 || topLayer === this) {\n      return this;\n    }\n\n    var max = topLayer.getZIndex();\n    this.setZIndex(max + 1);\n    return this;\n  };\n\n  _proto.bringToBack = function bringToBack() {\n    var layers = this._getLayerList();\n\n    if (!layers.length) {\n      return this;\n    }\n\n    var bottomLayer = layers[0];\n\n    if (layers.length === 1 || bottomLayer === this) {\n      return this;\n    }\n\n    var min = bottomLayer.getZIndex();\n    this.setZIndex(min - 1);\n    return this;\n  };\n\n  _proto.show = function show() {\n    var _this2 = this;\n\n    if (!this.options['visible']) {\n      this.options['visible'] = true;\n      var renderer = this.getRenderer();\n\n      if (renderer) {\n        renderer.show();\n      }\n\n      var map = this.getMap();\n\n      if (renderer && map) {\n        map.once('renderend', function () {\n          _this2.fire('show');\n        });\n      } else {\n        this.fire('show');\n      }\n    }\n\n    return this;\n  };\n\n  _proto.hide = function hide() {\n    var _this3 = this;\n\n    if (this.options['visible']) {\n      this.options['visible'] = false;\n      var renderer = this.getRenderer();\n\n      if (renderer) {\n        renderer.hide();\n      }\n\n      var map = this.getMap();\n\n      if (renderer && map) {\n        map.once('renderend', function () {\n          _this3.fire('hide');\n        });\n      } else {\n        this.fire('hide');\n      }\n    }\n\n    return this;\n  };\n\n  _proto.isVisible = function isVisible() {\n    if (isNumber(this.options['opacity']) && this.options['opacity'] <= 0) {\n      return false;\n    }\n\n    var map = this.getMap();\n\n    if (map) {\n      var zoom = map.getZoom();\n\n      if (!isNil(this.options['maxZoom']) && this.options['maxZoom'] < zoom || !isNil(this.options['minZoom']) && this.options['minZoom'] > zoom) {\n        return false;\n      }\n    }\n\n    if (isNil(this.options['visible'])) {\n      this.options['visible'] = true;\n    }\n\n    return this.options['visible'];\n  };\n\n  _proto.remove = function remove() {\n    if (this.map) {\n      this.map.removeLayer(this);\n    }\n\n    return this;\n  };\n\n  _proto.getMask = function getMask() {\n    return this._mask;\n  };\n\n  _proto.setMask = function setMask(mask) {\n    if (!(mask.type === 'Point' && mask._isVectorMarker() || mask.type === 'Polygon' || mask.type === 'MultiPolygon')) {\n      throw new Error('Mask for a layer must be a marker with vector marker symbol or a Polygon(MultiPolygon).');\n    }\n\n    mask._bindLayer(this);\n\n    if (mask.type === 'Point') {\n      mask.updateSymbol({\n        'markerLineColor': 'rgba(0, 0, 0, 0)',\n        'markerFillOpacity': 0\n      });\n    } else {\n      mask.setSymbol({\n        'lineColor': 'rgba(0, 0, 0, 0)',\n        'polygonOpacity': 0\n      });\n    }\n\n    this._mask = mask;\n    this.options.mask = mask.toJSON();\n\n    if (!this.getMap() || this.getMap().isZooming()) {\n      return this;\n    }\n\n    var renderer = this._getRenderer();\n\n    if (renderer && renderer.setToRedraw) {\n      this._getRenderer().setToRedraw();\n    }\n\n    return this;\n  };\n\n  _proto.removeMask = function removeMask() {\n    delete this._mask;\n    delete this.options.mask;\n\n    if (!this.getMap() || this.getMap().isZooming()) {\n      return this;\n    }\n\n    var renderer = this._getRenderer();\n\n    if (renderer && renderer.setToRedraw) {\n      this._getRenderer().setToRedraw();\n    }\n\n    return this;\n  };\n\n  _proto.onLoad = function onLoad() {\n    return true;\n  };\n\n  _proto.onLoadEnd = function onLoadEnd() {};\n\n  _proto.isLoaded = function isLoaded() {\n    return !!this._loaded;\n  };\n\n  _proto.getRenderer = function getRenderer() {\n    return this._getRenderer();\n  };\n\n  _proto.onConfig = function onConfig(conf) {\n    if (isNumber(conf['opacity']) || conf['cssFilter']) {\n      var renderer = this.getRenderer();\n\n      if (renderer) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n\n  _proto.onAdd = function onAdd() {};\n\n  _proto.onRendererCreate = function onRendererCreate() {};\n\n  _proto.onCanvasCreate = function onCanvasCreate() {};\n\n  _proto.onRemove = function onRemove() {};\n\n  _proto._bindMap = function _bindMap(map, zIndex) {\n    if (!map) {\n      return;\n    }\n\n    this.map = map;\n\n    if (!isNil(zIndex)) {\n      this.setZIndex(zIndex);\n    }\n\n    this._switchEvents('on', this);\n\n    this.onAdd();\n    this.fire('add');\n  };\n\n  _proto._initRenderer = function _initRenderer() {\n    var renderer = this.options['renderer'];\n\n    if (!this.constructor.getRendererClass) {\n      return;\n    }\n\n    var clazz = this.constructor.getRendererClass(renderer);\n\n    if (!clazz) {\n      throw new Error('Invalid renderer for Layer(' + this.getId() + '):' + renderer);\n    }\n\n    this._renderer = new clazz(this);\n    this._renderer.layer = this;\n\n    this._renderer.setZIndex(this.getZIndex());\n\n    this._switchEvents('on', this._renderer);\n\n    if (this._renderer.onAdd) {\n      this._renderer.onAdd();\n    }\n\n    this.onRendererCreate();\n    this.fire('renderercreate', {\n      'renderer': this._renderer\n    });\n  };\n\n  _proto._doRemove = function _doRemove() {\n    this._loaded = false;\n    this.onRemove();\n\n    this._switchEvents('off', this);\n\n    if (this._renderer) {\n      this._switchEvents('off', this._renderer);\n\n      this._renderer.remove();\n\n      delete this._renderer;\n    }\n\n    delete this.map;\n  };\n\n  _proto._switchEvents = function _switchEvents(to, emitter) {\n    if (emitter && emitter.getEvents) {\n      this.getMap()[to](emitter.getEvents(), emitter);\n    }\n  };\n\n  _proto._getRenderer = function _getRenderer() {\n    return this._renderer;\n  };\n\n  _proto._getLayerList = function _getLayerList() {\n    if (!this.map) {\n      return [];\n    }\n\n    return this.map._layers;\n  };\n\n  _proto._getMask2DExtent = function _getMask2DExtent() {\n    if (!this._mask || !this.getMap()) {\n      return null;\n    }\n\n    var painter = this._mask._getMaskPainter();\n\n    if (!painter) {\n      return null;\n    }\n\n    return painter.get2DExtent();\n  };\n\n  return Layer;\n}(JSONAble(Eventable(Renderable(Class))));\n\nLayer.mergeOptions(options$1);\nvar fire = Layer.prototype.fire;\n\nLayer.prototype.fire = function (eventType, param) {\n  if (eventType === 'layerload') {\n    this._loaded = true;\n  }\n\n  if (this.map) {\n    if (!param) {\n      param = {};\n    }\n\n    param['type'] = eventType;\n    param['target'] = this;\n\n    this.map._onLayerEvent(param);\n  }\n\n  return fire.apply(this, arguments);\n};\n\nvar options$2 = {\n  'maxVisualPitch': 70,\n  'maxPitch': 80,\n  'centerCross': false,\n  'zoomInCenter': false,\n  'zoomOrigin': null,\n  'zoomAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'zoomAnimationDuration': 330,\n  'panAnimation': function () {\n    return !IS_NODE;\n  }(),\n  'panAnimationDuration': 600,\n  'zoomable': true,\n  'enableInfoWindow': true,\n  'hitDetect': function () {\n    return !Browser$1.mobile;\n  }(),\n  'hitDetectLimit': 5,\n  'fpsOnInteracting': 25,\n  'layerCanvasLimitOnInteracting': -1,\n  'maxZoom': null,\n  'minZoom': null,\n  'maxExtent': null,\n  'fixCenterOnResize': true,\n  'checkSize': true,\n  'checkSizeInterval': 1000,\n  'renderer': 'canvas',\n  'cascadePitches': [10, 60]\n};\n\nvar Map$1 = function (_Handlerable) {\n  _inheritsLoose(Map, _Handlerable);\n\n  function Map(container, options) {\n    var _this;\n\n    if (!options) {\n      throw new Error('Invalid options when creating map.');\n    }\n\n    if (!options['center']) {\n      throw new Error('Invalid center when creating map.');\n    }\n\n    var opts = extend({}, options);\n    var zoom = opts['zoom'];\n    delete opts['zoom'];\n    var center = new Coordinate(opts['center']);\n    delete opts['center'];\n    var baseLayer = opts['baseLayer'];\n    delete opts['baseLayer'];\n    var layers = opts['layers'];\n    delete opts['layers'];\n    _this = _Handlerable.call(this, opts) || this;\n    _this.VERSION = Map.VERSION;\n    Object.defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), 'id', {\n      value: UID(),\n      writable: false\n    });\n    _this._loaded = false;\n\n    _this._initContainer(container);\n\n    _this._panels = {};\n    _this._baseLayer = null;\n    _this._layers = [];\n    _this._zoomLevel = zoom;\n    _this._center = center;\n\n    _this.setSpatialReference(opts['spatialReference'] || opts['view']);\n\n    _this.setMaxExtent(opts['maxExtent']);\n\n    _this._mapViewPoint = new Point(0, 0);\n\n    _this._initRenderer();\n\n    _this._updateMapSize(_this._getContainerDomSize());\n\n    if (baseLayer) {\n      _this.setBaseLayer(baseLayer);\n    }\n\n    if (layers) {\n      _this.addLayer(layers);\n    }\n\n    _this._Load();\n\n    return _this;\n  }\n\n  Map.addOnLoadHook = function addOnLoadHook(fn) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    var onload = typeof fn === 'function' ? fn : function () {\n      this[fn].apply(this, args);\n    };\n    this.prototype._onLoadHooks = this.prototype._onLoadHooks || [];\n\n    this.prototype._onLoadHooks.push(onload);\n\n    return this;\n  };\n\n  var _proto = Map.prototype;\n\n  _proto.isLoaded = function isLoaded() {\n    return !!this._loaded;\n  };\n\n  _proto.getContainer = function getContainer() {\n    return this._containerDOM;\n  };\n\n  _proto.getSpatialReference = function getSpatialReference() {\n    return this._spatialReference;\n  };\n\n  _proto.setSpatialReference = function setSpatialReference(ref) {\n    var oldRef = this.options['spatialReference'];\n\n    if (this._loaded && SpatialReference.equals(oldRef, ref)) {\n      return this;\n    }\n\n    this._updateSpatialReference(ref, oldRef);\n\n    return this;\n  };\n\n  _proto._updateSpatialReference = function _updateSpatialReference(ref, oldRef) {\n    ref = extend({}, ref);\n    this._center = this.getCenter();\n    this.options['spatialReference'] = ref;\n    this._spatialReference = new SpatialReference(ref);\n\n    if (this.options['spatialReference'] && isFunction(this.options['spatialReference']['projection'])) {\n      var projection = this._spatialReference.getProjection();\n\n      this.options['spatialReference']['projection'] = projection['code'];\n    }\n\n    this._resetMapStatus();\n\n    this._fireEvent('spatialreferencechange', {\n      'old': oldRef,\n      'new': extend({}, this.options['spatialReference'])\n    });\n\n    return this;\n  };\n\n  _proto.onConfig = function onConfig(conf) {\n    var ref = conf['spatialReference'] || conf['view'];\n\n    if (!isNil(ref)) {\n      this._updateSpatialReference(ref, null);\n    }\n\n    return this;\n  };\n\n  _proto.getProjection = function getProjection() {\n    if (!this._spatialReference) {\n      return null;\n    }\n\n    return this._spatialReference.getProjection();\n  };\n\n  _proto.getFullExtent = function getFullExtent() {\n    if (!this._spatialReference) {\n      return null;\n    }\n\n    return this._spatialReference.getFullExtent();\n  };\n\n  _proto.setCursor = function setCursor(cursor) {\n    delete this._cursor;\n\n    this._trySetCursor(cursor);\n\n    this._cursor = cursor;\n    return this;\n  };\n\n  _proto.resetCursor = function resetCursor() {\n    return this.setCursor(null);\n  };\n\n  _proto.getCenter = function getCenter() {\n    if (!this._loaded || !this._prjCenter) {\n      return this._center;\n    }\n\n    var projection = this.getProjection();\n    return projection.unproject(this._prjCenter);\n  };\n\n  _proto.setCenter = function setCenter(center) {\n    if (!center) {\n      return this;\n    }\n\n    center = new Coordinate(center);\n    var projection = this.getProjection();\n    var pcenter = projection.project(center);\n\n    if (!this._verifyExtent(pcenter)) {\n      return this;\n    }\n\n    if (!this._loaded) {\n      this._center = center;\n      return this;\n    }\n\n    this.onMoveStart();\n\n    this._setPrjCenter(pcenter);\n\n    this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));\n    return this;\n  };\n\n  _proto.getSize = function getSize() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return this._getContainerDomSize();\n    }\n\n    return new Size(this.width, this.height);\n  };\n\n  _proto.getContainerExtent = function getContainerExtent() {\n    var visualHeight = this.height;\n    var pitch = this.getPitch(),\n        maxVisualPitch = this.options['maxVisualPitch'];\n\n    if (maxVisualPitch && pitch > maxVisualPitch) {\n      visualHeight = this._getVisualHeight(maxVisualPitch);\n    }\n\n    return new PointExtent(0, this.height - visualHeight, this.width, this.height);\n  };\n\n  _proto._getVisualHeight = function _getVisualHeight(visualPitch) {\n    visualPitch = visualPitch || 1E-2;\n    var pitch = (90 - this.getPitch()) * Math.PI / 180;\n    var fov = this.getFov() * Math.PI / 180;\n    visualPitch *= Math.PI / 180;\n    var cameraToCenter = this.cameraCenterDistance / this.getGLScale();\n    var tanB = Math.tan(fov / 2);\n    var tanP = Math.tan(visualPitch);\n    var visualDistance = cameraToCenter * tanB / (1 / tanP - tanB) / Math.sin(visualPitch);\n    var x = cameraToCenter * (Math.sin(pitch) * visualDistance / (cameraToCenter + Math.cos(pitch) * visualDistance));\n    return this.height / 2 + x;\n  };\n\n  _proto.getExtent = function getExtent() {\n    return this._pointToExtent(this._get2DExtent());\n  };\n\n  _proto.getProjExtent = function getProjExtent() {\n    var extent2D = this._get2DExtent();\n\n    return new Extent(this._pointToPrj(extent2D.getMin()), this._pointToPrj(extent2D.getMax()));\n  };\n\n  _proto.getPrjExtent = function getPrjExtent() {\n    return this.getProjExtent();\n  };\n\n  _proto.getMaxExtent = function getMaxExtent() {\n    if (!this.options['maxExtent']) {\n      return null;\n    }\n\n    return new Extent(this.options['maxExtent'], this.getProjection());\n  };\n\n  _proto.setMaxExtent = function setMaxExtent(extent) {\n    if (extent) {\n      var maxExt = new Extent(extent, this.getProjection());\n      this.options['maxExtent'] = maxExt;\n\n      if (!this._verifyExtent(this._getPrjCenter())) {\n        this._panTo(this._prjMaxExtent().getCenter());\n      }\n\n      var projection = this.getProjection();\n      this._prjMaxExtent = maxExt.convertTo(function (c) {\n        return projection.project(c);\n      });\n    } else {\n      delete this.options['maxExtent'];\n      delete this._prjMaxExtent;\n    }\n\n    return this;\n  };\n\n  _proto.getZoom = function getZoom() {\n    return this._zoomLevel;\n  };\n\n  _proto.getZoomForScale = function getZoomForScale(scale, fromZoom, isFraction) {\n    var zoom = this.getZoom();\n\n    if (isNil(fromZoom)) {\n      fromZoom = zoom;\n    }\n\n    if (scale === 1 && fromZoom === zoom) {\n      return zoom;\n    }\n\n    var res = this._getResolution(fromZoom),\n        targetRes = res / scale;\n\n    var scaleZoom = this.getZoomFromRes(targetRes);\n\n    if (isFraction) {\n      return scaleZoom;\n    } else {\n      var delta = 1E-6;\n      return this.getSpatialReference().getZoomDirection() < 0 ? Math.ceil(scaleZoom - delta) : Math.floor(scaleZoom + delta);\n    }\n  };\n\n  _proto.getZoomFromRes = function getZoomFromRes(res) {\n    var resolutions = this._getResolutions(),\n        minRes = this._getResolution(this.getMinZoom()),\n        maxRes = this._getResolution(this.getMaxZoom());\n\n    if (minRes <= maxRes) {\n      if (res <= minRes) {\n        return this.getMinZoom();\n      } else if (res >= maxRes) {\n        return this.getMaxZoom();\n      }\n    } else if (res >= minRes) {\n      return this.getMinZoom();\n    } else if (res <= maxRes) {\n      return this.getMaxZoom();\n    }\n\n    var l = resolutions.length;\n\n    for (var i = 0; i < l - 1; i++) {\n      if (!resolutions[i]) {\n        continue;\n      }\n\n      var gap = resolutions[i + 1] - resolutions[i];\n      var test = res - resolutions[i];\n\n      if (sign(gap) === sign(test) && Math.abs(gap) >= Math.abs(test)) {\n        return i + test / gap;\n      }\n    }\n\n    return l - 1;\n  };\n\n  _proto.setZoom = function setZoom(zoom, options) {\n    if (options === void 0) {\n      options = {\n        'animation': true\n      };\n    }\n\n    if (isNaN(zoom) || isNil(zoom)) {\n      return this;\n    }\n\n    zoom = +zoom;\n\n    if (this._loaded && this.options['zoomAnimation'] && options['animation']) {\n      this._zoomAnimation(zoom);\n    } else {\n      this._zoom(zoom);\n    }\n\n    return this;\n  };\n\n  _proto.getMaxZoom = function getMaxZoom() {\n    if (!isNil(this.options['maxZoom'])) {\n      return this.options['maxZoom'];\n    }\n\n    return this.getMaxNativeZoom();\n  };\n\n  _proto.setMaxZoom = function setMaxZoom(maxZoom) {\n    var viewMaxZoom = this.getMaxNativeZoom();\n\n    if (maxZoom > viewMaxZoom) {\n      maxZoom = viewMaxZoom;\n    }\n\n    if (maxZoom !== null && maxZoom < this._zoomLevel) {\n      this.setZoom(maxZoom);\n      maxZoom = +maxZoom;\n    }\n\n    this.options['maxZoom'] = maxZoom;\n    return this;\n  };\n\n  _proto.getMinZoom = function getMinZoom() {\n    if (!isNil(this.options['minZoom'])) {\n      return this.options['minZoom'];\n    }\n\n    return this._spatialReference.getMinZoom();\n  };\n\n  _proto.setMinZoom = function setMinZoom(minZoom) {\n    if (minZoom !== null) {\n      minZoom = +minZoom;\n\n      var viewMinZoom = this._spatialReference.getMinZoom();\n\n      if (minZoom < viewMinZoom) {\n        minZoom = viewMinZoom;\n      }\n\n      if (minZoom > this._zoomLevel) {\n        this.setZoom(minZoom);\n      }\n    }\n\n    this.options['minZoom'] = minZoom;\n    return this;\n  };\n\n  _proto.getMaxNativeZoom = function getMaxNativeZoom() {\n    var ref = this.getSpatialReference();\n\n    if (!ref) {\n      return null;\n    }\n\n    return ref.getMaxZoom();\n  };\n\n  _proto.getGLZoom = function getGLZoom() {\n    return this.getMaxNativeZoom() / 2;\n  };\n\n  _proto.getGLScale = function getGLScale(zoom) {\n    if (isNil(zoom)) {\n      zoom = this.getZoom();\n    }\n\n    return this._getResolution(zoom) / this._getResolution(this.getGLZoom());\n  };\n\n  _proto.zoomIn = function zoomIn() {\n    return this.setZoom(this.getZoom() + 1);\n  };\n\n  _proto.zoomOut = function zoomOut() {\n    return this.setZoom(this.getZoom() - 1);\n  };\n\n  _proto.isZooming = function isZooming() {\n    return !!this._zooming;\n  };\n\n  _proto.isInteracting = function isInteracting() {\n    return this.isZooming() || this.isMoving() || this.isRotating();\n  };\n\n  _proto.setCenterAndZoom = function setCenterAndZoom(center, zoom) {\n    if (!isNil(zoom) && this._zoomLevel !== zoom) {\n      this.setCenter(center);\n      this.setZoom(zoom, {\n        animation: false\n      });\n    } else {\n      this.setCenter(center);\n    }\n\n    return this;\n  };\n\n  _proto.getFitZoom = function getFitZoom(extent, isFraction) {\n    var _this2 = this;\n\n    if (!extent || !(extent instanceof Extent)) {\n      return this._zoomLevel;\n    }\n\n    if (extent['xmin'] === extent['xmax'] && extent['ymin'] === extent['ymax']) {\n      return this.getMaxZoom();\n    }\n\n    var size = this.getSize();\n    var containerExtent = extent.convertTo(function (p) {\n      return _this2.coordToContainerPoint(p);\n    });\n    var w = containerExtent.getWidth(),\n        h = containerExtent.getHeight();\n    var scaleX = size['width'] / w,\n        scaleY = size['height'] / h;\n    var scale = this.getSpatialReference().getZoomDirection() < 0 ? Math.max(scaleX, scaleY) : Math.min(scaleX, scaleY);\n    var zoom = this.getZoomForScale(scale, null, isFraction);\n    return zoom;\n  };\n\n  _proto.getView = function getView() {\n    return {\n      'center': this.getCenter().toArray(),\n      'zoom': this.getZoom(),\n      'pitch': this.getPitch(),\n      'bearing': this.getBearing()\n    };\n  };\n\n  _proto.setView = function setView(view) {\n    if (!view) {\n      return this;\n    }\n\n    if (view['center']) {\n      this.setCenter(view['center']);\n    }\n\n    if (view['zoom'] !== null && !isNaN(+view['zoom'])) {\n      this.setZoom(+view['zoom'], {\n        'animation': false\n      });\n    }\n\n    if (view['pitch'] !== null && !isNaN(+view['pitch'])) {\n      this.setPitch(+view['pitch']);\n    }\n\n    if (view['pitch'] !== null && !isNaN(+view['bearing'])) {\n      this.setBearing(+view['bearing']);\n    }\n\n    return this;\n  };\n\n  _proto.getResolution = function getResolution(zoom) {\n    return this._getResolution(zoom);\n  };\n\n  _proto.getScale = function getScale(zoom) {\n    var z = isNil(zoom) ? this.getZoom() : zoom;\n\n    var max = this._getResolution(this.getMaxNativeZoom()),\n        res = this._getResolution(z);\n\n    return res / max;\n  };\n\n  _proto.fitExtent = function fitExtent(extent, zoomOffset, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!extent) {\n      return this;\n    }\n\n    extent = new Extent(extent, this.getProjection());\n    var zoom = this.getFitZoom(extent) + (zoomOffset || 0);\n    var center = extent.getCenter();\n    if (typeof options['animation'] === 'undefined' || options['animation']) return this._animateTo({\n      center: center,\n      zoom: zoom\n    }, {\n      'duration': options['duration'] || this.options['zoomAnimationDuration'],\n      'easing': options['easing'] || 'out'\n    }, step);else return this.setCenterAndZoom(center, zoom);\n  };\n\n  _proto.getBaseLayer = function getBaseLayer() {\n    return this._baseLayer;\n  };\n\n  _proto.setBaseLayer = function setBaseLayer(baseLayer) {\n    var isChange = false;\n\n    if (this._baseLayer) {\n      isChange = true;\n\n      this._fireEvent('baselayerchangestart');\n\n      this._baseLayer.remove();\n    }\n\n    if (!baseLayer) {\n      delete this._baseLayer;\n\n      this._fireEvent('baselayerchangeend');\n\n      this._fireEvent('setbaselayer');\n\n      return this;\n    }\n\n    this._baseLayer = baseLayer;\n\n    baseLayer._bindMap(this, -1);\n\n    function onbaseLayerload() {\n      this._fireEvent('baselayerload');\n\n      if (isChange) {\n        isChange = false;\n\n        this._fireEvent('baselayerchangeend');\n      }\n    }\n\n    this._baseLayer.on('layerload', onbaseLayerload, this);\n\n    if (this._loaded) {\n      this._baseLayer.load();\n    }\n\n    this._fireEvent('setbaselayer');\n\n    return this;\n  };\n\n  _proto.removeBaseLayer = function removeBaseLayer() {\n    if (this._baseLayer) {\n      this._baseLayer.remove();\n\n      delete this._baseLayer;\n\n      this._fireEvent('baselayerremove');\n    }\n\n    return this;\n  };\n\n  _proto.getLayers = function getLayers(filter) {\n    return this._getLayers(function (layer) {\n      if (layer === this._baseLayer || layer.getId().indexOf(INTERNAL_LAYER_PREFIX) >= 0) {\n        return false;\n      }\n\n      if (filter) {\n        return filter(layer);\n      }\n\n      return true;\n    });\n  };\n\n  _proto.getLayer = function getLayer(id) {\n    if (!id) {\n      return null;\n    }\n\n    var layer = this._layerCache ? this._layerCache[id] : null;\n\n    if (layer) {\n      return layer;\n    }\n\n    var baseLayer = this.getBaseLayer();\n\n    if (baseLayer && baseLayer.getId() === id) {\n      return baseLayer;\n    }\n\n    return null;\n  };\n\n  _proto.addLayer = function addLayer(layers) {\n    if (!layers) {\n      return this;\n    }\n\n    if (!Array.isArray(layers)) {\n      layers = Array.prototype.slice.call(arguments, 0);\n      return this.addLayer(layers);\n    }\n\n    if (!this._layerCache) {\n      this._layerCache = {};\n    }\n\n    var mapLayers = this._layers;\n\n    for (var i = 0, len = layers.length; i < len; i++) {\n      var layer = layers[i];\n      var id = layer.getId();\n\n      if (isNil(id)) {\n        throw new Error('Invalid id for the layer: ' + id);\n      }\n\n      if (layer.getMap() === this) {\n        continue;\n      }\n\n      if (this._layerCache[id]) {\n        throw new Error('Duplicate layer id in the map: ' + id);\n      }\n\n      this._layerCache[id] = layer;\n\n      layer._bindMap(this);\n\n      mapLayers.push(layer);\n\n      if (this._loaded) {\n        layer.load();\n      }\n    }\n\n    this._sortLayersByZIndex();\n\n    this._fireEvent('addlayer', {\n      'layers': layers\n    });\n\n    return this;\n  };\n\n  _proto.removeLayer = function removeLayer(layers) {\n    if (!layers) {\n      return this;\n    }\n\n    if (!Array.isArray(layers)) {\n      return this.removeLayer([layers]);\n    }\n\n    var removed = [];\n\n    for (var i = 0, len = layers.length; i < len; i++) {\n      var layer = layers[i];\n\n      if (!(layer instanceof Layer)) {\n        layer = this.getLayer(layer);\n      }\n\n      if (!layer) {\n        continue;\n      }\n\n      var map = layer.getMap();\n\n      if (!map || map !== this) {\n        continue;\n      }\n\n      removed.push(layer);\n\n      this._removeLayer(layer, this._layers);\n\n      if (this._loaded) {\n        layer._doRemove();\n      }\n\n      var id = layer.getId();\n\n      if (this._layerCache) {\n        delete this._layerCache[id];\n      }\n    }\n\n    if (removed.length > 0) {\n      var renderer = this.getRenderer();\n\n      if (renderer) {\n        renderer.setLayerCanvasUpdated();\n      }\n\n      this.once('frameend', function () {\n        removed.forEach(function (layer) {\n          layer.fire('remove');\n        });\n      });\n    }\n\n    this._fireEvent('removelayer', {\n      'layers': layers\n    });\n\n    return this;\n  };\n\n  _proto.sortLayers = function sortLayers(layers) {\n    if (!layers || !Array.isArray(layers)) {\n      return this;\n    }\n\n    var layersToOrder = [];\n    var minZ = Number.MAX_VALUE;\n\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var layer = layers[i];\n\n      if (isString(layers[i])) {\n        layer = this.getLayer(layer);\n      }\n\n      if (!(layer instanceof Layer) || !layer.getMap() || layer.getMap() !== this) {\n        throw new Error('It must be a layer added to this map to order.');\n      }\n\n      if (layer.getZIndex() < minZ) {\n        minZ = layer.getZIndex();\n      }\n\n      layersToOrder.push(layer);\n    }\n\n    for (var _i = 0, _l = layersToOrder.length; _i < _l; _i++) {\n      layersToOrder[_i].setZIndex(minZ + _i);\n    }\n\n    return this;\n  };\n\n  _proto.toDataURL = function toDataURL(options) {\n    if (!options) {\n      options = {};\n    }\n\n    var mimeType = options['mimeType'];\n\n    if (!mimeType) {\n      mimeType = 'image/png';\n    }\n\n    var save = options['save'];\n\n    var renderer = this._getRenderer();\n\n    if (renderer && renderer.toDataURL) {\n      var file = options['fileName'];\n\n      if (!file) {\n        file = 'export';\n      }\n\n      var dataURL = renderer.toDataURL(mimeType);\n\n      if (save && dataURL) {\n        var imgURL;\n\n        if (typeof Blob !== 'undefined' && typeof atob !== 'undefined') {\n          var blob = b64toBlob(dataURL.replace(/^data:image\\/(png|jpeg|jpg);base64,/, ''), mimeType);\n          imgURL = URL.createObjectURL(blob);\n        } else {\n          imgURL = dataURL;\n        }\n\n        var dlLink = document.createElement('a');\n        dlLink.download = file;\n        dlLink.href = imgURL;\n        document.body.appendChild(dlLink);\n        dlLink.click();\n        document.body.removeChild(dlLink);\n      }\n\n      return dataURL;\n    }\n\n    return null;\n  };\n\n  _proto.coordToPoint = function coordToPoint(coordinate, zoom, out) {\n    return this.coordinateToPoint(coordinate, zoom, out);\n  };\n\n  _proto.pointToCoord = function pointToCoord(point, zoom, out) {\n    return this.pointToCoordinate(point, zoom, out);\n  };\n\n  _proto.coordToViewPoint = function coordToViewPoint(coordinate, out, altitude) {\n    return this.coordinateToViewPoint(coordinate, out, altitude);\n  };\n\n  _proto.viewPointToCoord = function viewPointToCoord(viewPoint, out) {\n    return this.viewPointToCoordinate(viewPoint, out);\n  };\n\n  _proto.coordToContainerPoint = function coordToContainerPoint(coordinate, zoom, out) {\n    return this.coordinateToContainerPoint(coordinate, zoom, out);\n  };\n\n  _proto.containerPointToCoord = function containerPointToCoord(containerPoint, out) {\n    return this.containerPointToCoordinate(containerPoint, out);\n  };\n\n  _proto.containerPointToViewPoint = function containerPointToViewPoint(containerPoint, out) {\n    if (out) {\n      out.set(containerPoint.x, containerPoint.y);\n    } else {\n      out = containerPoint.copy();\n    }\n\n    return out._sub(this.getViewPoint());\n  };\n\n  _proto.viewPointToContainerPoint = function viewPointToContainerPoint(viewPoint, out) {\n    if (out) {\n      out.set(viewPoint.x, viewPoint.y);\n    } else {\n      out = viewPoint.copy();\n    }\n\n    return out._add(this.getViewPoint());\n  };\n\n  _proto.checkSize = function checkSize() {\n    var justStart = now() - this._initTime < 1500 && this.width === 0 || this.height === 0;\n\n    var watched = this._getContainerDomSize(),\n        oldHeight = this.height,\n        oldWidth = this.width;\n\n    if (watched['width'] === oldWidth && watched['height'] === oldHeight) {\n      return this;\n    }\n\n    var center = this.getCenter();\n\n    if (!this.options['fixCenterOnResize']) {\n      var vh = this._getVisualHeight(this.getPitch());\n\n      var nwCP = new Point(0, this.height - vh);\n\n      var nwCoord = this._containerPointToPrj(nwCP);\n\n      this._updateMapSize(watched);\n\n      var vhAfter = this._getVisualHeight(this.getPitch());\n\n      var nwCPAfter = new Point(0, this.height - vhAfter);\n\n      this._setPrjCoordAtContainerPoint(nwCoord, nwCPAfter);\n\n      this._mapViewCoord = this._getPrjCenter();\n    } else {\n      this._updateMapSize(watched);\n    }\n\n    var hided = watched['width'] === 0 || watched['height'] === 0 || oldWidth === 0 || oldHeight === 0;\n\n    if (justStart || hided) {\n      this._eventSilence = true;\n      this.setCenter(center);\n      delete this._eventSilence;\n    }\n\n    this._fireEvent('resize');\n\n    return this;\n  };\n\n  _proto.locate = function locate(coordinate, dx, dy) {\n    return this.getProjection()._locate(new Coordinate(coordinate), dx, dy);\n  };\n\n  _proto.getMainPanel = function getMainPanel() {\n    return this._getRenderer().getMainPanel();\n  };\n\n  _proto.getPanels = function getPanels() {\n    return this._panels;\n  };\n\n  _proto.remove = function remove() {\n    var _this3 = this;\n\n    if (this.isRemoved()) {\n      return this;\n    }\n\n    this._fireEvent('removestart');\n\n    this._removeDomEvents();\n\n    this._clearHandlers();\n\n    this.removeBaseLayer();\n    var layers = this.getLayers();\n\n    for (var i = 0; i < layers.length; i++) {\n      layers[i].remove();\n    }\n\n    if (this._getRenderer()) {\n      this._getRenderer().remove();\n    }\n\n    if (this._containerDOM.childNodes && this._containerDOM.childNodes.length > 0) {\n      Array.prototype.slice.call(this._containerDOM.childNodes, 0).filter(function (node) {\n        return node.className === 'maptalks-wrapper';\n      }).forEach(function (node) {\n        return _this3._containerDOM.removeChild(node);\n      });\n    }\n\n    delete this._panels;\n    delete this._containerDOM;\n    delete this.renderer;\n\n    this._fireEvent('removeend');\n\n    this._clearAllListeners();\n\n    return this;\n  };\n\n  _proto.isRemoved = function isRemoved() {\n    return !this._containerDOM;\n  };\n\n  _proto.isMoving = function isMoving() {\n    return !!this._moving;\n  };\n\n  _proto.onMoveStart = function onMoveStart(param) {\n    var prjCenter = this._getPrjCenter();\n\n    if (!this._originCenter || this._verifyExtent(prjCenter)) {\n      this._originCenter = prjCenter;\n    }\n\n    this._moving = true;\n\n    this._trySetCursor('move');\n\n    this._fireEvent('movestart', this._parseEvent(param ? param['domEvent'] : null, 'movestart'));\n  };\n\n  _proto.onMoving = function onMoving(param) {\n    this._fireEvent('moving', this._parseEvent(param ? param['domEvent'] : null, 'moving'));\n  };\n\n  _proto.onMoveEnd = function onMoveEnd(param) {\n    this._moving = false;\n\n    this._trySetCursor('default');\n\n    this._fireEvent('moveend', param && param['domEvent'] ? this._parseEvent(param['domEvent'], 'moveend') : param);\n\n    if (!this._verifyExtent(this._getPrjCenter()) && this._originCenter) {\n      var moveTo = this._originCenter;\n\n      this._panTo(moveTo);\n    }\n  };\n\n  _proto.onDragRotateStart = function onDragRotateStart(param) {\n    this._dragRotating = true;\n\n    this._fireEvent('dragrotatestart', this._parseEvent(param ? param['domEvent'] : null, 'dragrotatestart'));\n  };\n\n  _proto.onDragRotating = function onDragRotating(param) {\n    this._fireEvent('dragrotating', this._parseEvent(param ? param['domEvent'] : null, 'dragrotating'));\n  };\n\n  _proto.onDragRotateEnd = function onDragRotateEnd(param) {\n    this._dragRotating = false;\n\n    this._fireEvent('dragrotateend', this._parseEvent(param ? param['domEvent'] : null, 'dragrotateend'));\n  };\n\n  _proto.isDragRotating = function isDragRotating() {\n    return !!this._dragRotating;\n  };\n\n  _proto.getRenderer = function getRenderer() {\n    return this._getRenderer();\n  };\n\n  _proto.getDevicePixelRatio = function getDevicePixelRatio() {\n    return this.options['devicePixelRatio'] || Browser$1.devicePixelRatio || 1;\n  };\n\n  _proto._initContainer = function _initContainer(container) {\n    if (isString(container)) {\n      this._containerDOM = document.getElementById(container);\n\n      if (!this._containerDOM) {\n        throw new Error('Invalid container when creating map: \\'' + container + '\\'');\n      }\n    } else {\n      this._containerDOM = container;\n\n      if (IS_NODE) {\n        this.CanvasClass = this._containerDOM.constructor;\n      }\n    }\n\n    if (this._containerDOM.childNodes && this._containerDOM.childNodes.length > 0) {\n      if (this._containerDOM.childNodes[0].className === 'maptalks-wrapper') {\n        throw new Error('Container is already loaded with another map instance, use map.remove() to clear it.');\n      }\n    }\n  };\n\n  _proto._trySetCursor = function _trySetCursor(cursor) {\n    if (!this._cursor && !this._priorityCursor) {\n      if (!cursor) {\n        cursor = 'default';\n      }\n\n      this._setCursorToPanel(cursor);\n    }\n\n    return this;\n  };\n\n  _proto._setPriorityCursor = function _setPriorityCursor(cursor) {\n    if (!cursor) {\n      var hasCursor = false;\n\n      if (this._priorityCursor) {\n        hasCursor = true;\n      }\n\n      delete this._priorityCursor;\n\n      if (hasCursor) {\n        this.setCursor(this._cursor);\n      }\n    } else {\n      this._priorityCursor = cursor;\n\n      this._setCursorToPanel(cursor);\n    }\n\n    return this;\n  };\n\n  _proto._setCursorToPanel = function _setCursorToPanel(cursor) {\n    var panel = this.getMainPanel();\n\n    if (panel && panel.style && panel.style.cursor !== cursor) {\n      panel.style.cursor = cursor;\n    }\n  };\n\n  _proto._removeLayer = function _removeLayer(layer, layerList) {\n    if (!layer || !layerList) {\n      return;\n    }\n\n    var index = layerList.indexOf(layer);\n\n    if (index > -1) {\n      layerList.splice(index, 1);\n    }\n  };\n\n  _proto._sortLayersByZIndex = function _sortLayersByZIndex() {\n    if (!this._layers) {\n      return;\n    }\n\n    for (var i = 0, l = this._layers.length; i < l; i++) {\n      this._layers[i]._order = i;\n    }\n\n    this._layers.sort(function (a, b) {\n      var c = a.getZIndex() - b.getZIndex();\n\n      if (c === 0) {\n        return a._order - b._order;\n      }\n\n      return c;\n    });\n  };\n\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (this._eventSilence) {\n      return;\n    }\n\n    this.fire('_' + eventName, param);\n    this.fire(eventName, param);\n  };\n\n  _proto._Load = function _Load() {\n    this._resetMapStatus();\n\n    if (this.options['pitch']) {\n      this.setPitch(this.options['pitch']);\n      delete this.options['pitch'];\n    }\n\n    if (this.options['bearing']) {\n      this.setBearing(this.options['bearing']);\n      delete this.options['bearing'];\n    }\n\n    this._loadAllLayers();\n\n    this._getRenderer().onLoad();\n\n    this._loaded = true;\n\n    this._callOnLoadHooks();\n\n    this._initTime = now();\n  };\n\n  _proto._initRenderer = function _initRenderer() {\n    var renderer = this.options['renderer'];\n    var clazz = Map.getRendererClass(renderer);\n    this._renderer = new clazz(this);\n\n    this._renderer.load();\n  };\n\n  _proto._getRenderer = function _getRenderer() {\n    return this._renderer;\n  };\n\n  _proto._loadAllLayers = function _loadAllLayers() {\n    function loadLayer(layer) {\n      if (layer) {\n        layer.load();\n      }\n    }\n\n    if (this._baseLayer) {\n      this._baseLayer.load();\n    }\n\n    this._eachLayer(loadLayer, this.getLayers());\n  };\n\n  _proto._getLayers = function _getLayers(filter) {\n    var layers = this._baseLayer ? [this._baseLayer].concat(this._layers) : this._layers;\n    var result = [];\n\n    for (var i = 0; i < layers.length; i++) {\n      if (!filter || filter.call(this, layers[i])) {\n        result.push(layers[i]);\n      }\n    }\n\n    return result;\n  };\n\n  _proto._eachLayer = function _eachLayer(fn) {\n    if (arguments.length < 2) {\n      return;\n    }\n\n    var layerLists = Array.prototype.slice.call(arguments, 1);\n\n    if (layerLists && !Array.isArray(layerLists)) {\n      layerLists = [layerLists];\n    }\n\n    var layers = [];\n\n    for (var i = 0, len = layerLists.length; i < len; i++) {\n      layers = layers.concat(layerLists[i]);\n    }\n\n    for (var j = 0, jlen = layers.length; j < jlen; j++) {\n      fn.call(fn, layers[j]);\n    }\n  };\n\n  _proto._onLayerEvent = function _onLayerEvent(param) {\n    if (!param) {\n      return;\n    }\n\n    if (param['type'] === 'idchange') {\n      delete this._layerCache[param['old']];\n      this._layerCache[param['new']] = param['target'];\n    }\n  };\n\n  _proto._resetMapStatus = function _resetMapStatus() {\n    var maxZoom = this.getMaxZoom(),\n        minZoom = this.getMinZoom();\n\n    var viewMaxZoom = this._spatialReference.getMaxZoom(),\n        viewMinZoom = this._spatialReference.getMinZoom();\n\n    if (isNil(maxZoom) || maxZoom === -1 || maxZoom > viewMaxZoom) {\n      this.setMaxZoom(viewMaxZoom);\n    }\n\n    if (isNil(minZoom) || minZoom === -1 || minZoom < viewMinZoom) {\n      this.setMinZoom(viewMinZoom);\n    }\n\n    maxZoom = this.getMaxZoom();\n    minZoom = this.getMinZoom();\n\n    if (maxZoom < minZoom) {\n      this.setMaxZoom(minZoom);\n    }\n\n    if (isNil(this._zoomLevel) || this._zoomLevel > maxZoom) {\n      this._zoomLevel = maxZoom;\n    }\n\n    if (this._zoomLevel < minZoom) {\n      this._zoomLevel = minZoom;\n    }\n\n    delete this._prjCenter;\n    var projection = this.getProjection();\n    this._prjCenter = projection.project(this._center);\n\n    this._calcMatrices();\n\n    var renderer = this._getRenderer();\n\n    if (renderer) {\n      renderer.resetContainer();\n    }\n  };\n\n  _proto._getContainerDomSize = function _getContainerDomSize() {\n    if (!this._containerDOM) {\n      return null;\n    }\n\n    var containerDOM = this._containerDOM;\n    var width, height;\n\n    if (!isNil(containerDOM.width) && !isNil(containerDOM.height)) {\n      width = containerDOM.width;\n      height = containerDOM.height;\n      var dpr = this.getDevicePixelRatio();\n\n      if (dpr !== 1 && containerDOM['layer']) {\n        width /= dpr;\n        height /= dpr;\n      }\n    } else if (!isNil(containerDOM.clientWidth) && !isNil(containerDOM.clientHeight)) {\n      width = parseInt(containerDOM.clientWidth, 0);\n      height = parseInt(containerDOM.clientHeight, 0);\n    } else {\n      throw new Error('can not get size of container');\n    }\n\n    return new Size(width, height);\n  };\n\n  _proto._updateMapSize = function _updateMapSize(mSize) {\n    this.width = mSize['width'];\n    this.height = mSize['height'];\n\n    this._getRenderer().updateMapSize(mSize);\n\n    this._calcMatrices();\n\n    return this;\n  };\n\n  _proto._getPrjCenter = function _getPrjCenter() {\n    return this._prjCenter;\n  };\n\n  _proto._setPrjCenter = function _setPrjCenter(pcenter) {\n    this._prjCenter = pcenter;\n\n    if (this.isInteracting() && !this.isMoving()) {\n      this._mapViewCoord = pcenter;\n    }\n\n    this._calcMatrices();\n  };\n\n  _proto._setPrjCoordAtContainerPoint = function _setPrjCoordAtContainerPoint(coordinate, point) {\n    if (point.x === this.width / 2 && point.y === this.height / 2) {\n      return this;\n    }\n\n    var t = this._containerPointToPoint(point)._sub(this._prjToPoint(this._getPrjCenter()));\n\n    var pcenter = this._pointToPrj(this._prjToPoint(coordinate).sub(t));\n\n    this._setPrjCenter(pcenter);\n\n    return this;\n  };\n\n  _proto._verifyExtent = function _verifyExtent(prjCenter) {\n    if (!prjCenter) {\n      return false;\n    }\n\n    var maxExt = this._prjMaxExtent;\n\n    if (!maxExt) {\n      return true;\n    }\n\n    return maxExt.contains(prjCenter);\n  };\n\n  _proto._offsetCenterByPixel = function _offsetCenterByPixel(pixel) {\n    var pos = new Point(this.width / 2 - pixel.x, this.height / 2 - pixel.y);\n\n    var pCenter = this._containerPointToPrj(pos);\n\n    this._setPrjCenter(pCenter);\n\n    return pCenter;\n  };\n\n  _proto.offsetPlatform = function offsetPlatform(offset) {\n    if (!offset) {\n      return this._mapViewPoint;\n    } else {\n      this._getRenderer().offsetPlatform(offset);\n\n      this._mapViewCoord = this._getPrjCenter();\n      this._mapViewPoint = this._mapViewPoint.add(offset);\n      return this;\n    }\n  };\n\n  _proto.getViewPoint = function getViewPoint() {\n    var offset = this._getViewPointFrameOffset();\n\n    var panelOffset = this.offsetPlatform();\n\n    if (offset) {\n      panelOffset = panelOffset.add(offset);\n    }\n\n    return panelOffset;\n  };\n\n  _proto._resetMapViewPoint = function _resetMapViewPoint() {\n    this._mapViewPoint = new Point(0, 0);\n    this._mapViewCoord = this._getPrjCenter();\n  };\n\n  _proto._getResolution = function _getResolution(zoom) {\n    if ((zoom === undefined || zoom === this._zoomLevel) && this._mapRes !== undefined) {\n      return this._mapRes;\n    } else if (zoom === this.getGLZoom() && this._mapGlRes !== undefined) {\n      return this._mapGlRes;\n    }\n\n    if (isNil(zoom)) {\n      zoom = this._zoomLevel;\n    }\n\n    return this._spatialReference.getResolution(zoom);\n  };\n\n  _proto._getResolutions = function _getResolutions() {\n    return this._spatialReference.getResolutions();\n  };\n\n  _proto._prjToPoint = function _prjToPoint(pCoord, zoom, out) {\n    zoom = isNil(zoom) ? this.getZoom() : zoom;\n    return this._spatialReference.getTransformation().transform(pCoord, this._getResolution(zoom), out);\n  };\n\n  _proto._pointToPrj = function _pointToPrj(point, zoom, out) {\n    zoom = isNil(zoom) ? this.getZoom() : zoom;\n    return this._spatialReference.getTransformation().untransform(point, this._getResolution(zoom), out);\n  };\n\n  _proto._pointToPoint = function _pointToPoint(point, zoom, out) {\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n\n    if (!isNil(zoom)) {\n      return out._multi(this._getResolution(zoom) / this._getResolution());\n    }\n\n    return out;\n  };\n\n  _proto._pointToPointAtZoom = function _pointToPointAtZoom(point, zoom, out) {\n    if (out) {\n      out.x = point.x;\n      out.y = point.y;\n    } else {\n      out = point.copy();\n    }\n\n    if (!isNil(zoom)) {\n      return out._multi(this._getResolution() / this._getResolution(zoom));\n    }\n\n    return out;\n  };\n\n  _proto._containerPointToPrj = function _containerPointToPrj(containerPoint, out) {\n    return this._pointToPrj(this._containerPointToPoint(containerPoint, undefined, out), undefined, out);\n  };\n\n  _proto._callOnLoadHooks = function _callOnLoadHooks() {\n    var proto = Map.prototype;\n\n    if (!proto._onLoadHooks) {\n      return;\n    }\n\n    for (var i = 0, l = proto._onLoadHooks.length; i < l; i++) {\n      proto._onLoadHooks[i].call(this);\n    }\n  };\n\n  return Map;\n}(Handlerable(Eventable(Renderable(Class))));\n\nMap$1.include({\n  coordinateToPoint: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, zoom, out) {\n      var prjCoord = this.getProjection().project(coordinate, COORD);\n      return this._prjToPoint(prjCoord, zoom, out);\n    };\n  }(),\n  pointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, zoom, out) {\n      var prjCoord = this._pointToPrj(point, zoom, COORD);\n\n      return this.getProjection().unproject(prjCoord, out);\n    };\n  }(),\n  coordinateToViewPoint: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, out, altitude) {\n      return this._prjToViewPoint(this.getProjection().project(coordinate, COORD), out, altitude);\n    };\n  }(),\n  viewPointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (viewPoint, out) {\n      return this.getProjection().unproject(this._viewPointToPrj(viewPoint, COORD), out);\n    };\n  }(),\n  coordinateToContainerPoint: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (coordinate, zoom, out) {\n      var pCoordinate = this.getProjection().project(coordinate, COORD);\n      return this._prjToContainerPoint(pCoordinate, zoom, out);\n    };\n  }(),\n  containerPointToCoordinate: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (containerPoint, out) {\n      var pCoordinate = this._containerPointToPrj(containerPoint, COORD);\n\n      return this.getProjection().unproject(pCoordinate, out);\n    };\n  }(),\n  containerToExtent: function () {\n    var POINT0 = new Point(0, 0);\n    var POINT1 = new Point(0, 0);\n    return function (containerExtent) {\n      var extent2D = new PointExtent(this._containerPointToPoint(containerExtent.getMin(POINT0), undefined, POINT0), this._containerPointToPoint(containerExtent.getMax(POINT1), undefined, POINT1));\n      return this._pointToExtent(extent2D);\n    };\n  }(),\n  distanceToPixel: function () {\n    var POINT0 = new Point(0, 0);\n    var POINT1 = new Point(0, 0);\n    return function (xDist, yDist, zoom) {\n      var projection = this.getProjection();\n\n      if (!projection) {\n        return null;\n      }\n\n      var scale = this.getScale() / this.getScale(zoom);\n      var center = this.getCenter(),\n          target = projection.locate(center, xDist, yDist);\n      var p0 = this.coordToContainerPoint(center, undefined, POINT0),\n          p1 = this.coordToContainerPoint(target, undefined, POINT1);\n\n      p1._sub(p0)._multi(scale)._abs();\n\n      return new Size(p1.x, p1.y);\n    };\n  }(),\n  distanceToPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (xDist, yDist, zoom, paramCenter) {\n      var projection = this.getProjection();\n\n      if (!projection) {\n        return null;\n      }\n\n      var center = paramCenter || this.getCenter(),\n          target = projection.locate(center, xDist, yDist);\n      var p0 = this.coordToPoint(center, zoom, POINT),\n          p1 = this.coordToPoint(target, zoom);\n\n      p1._sub(p0)._abs();\n\n      return p1;\n    };\n  }(),\n  pixelToDistance: function () {\n    var COORD0 = new Coordinate(0, 0);\n    var COORD1 = new Coordinate(0, 0);\n    return function (width, height) {\n      var projection = this.getProjection();\n\n      if (!projection) {\n        return null;\n      }\n\n      var fullExt = this.getFullExtent();\n      var d = fullExt['top'] > fullExt['bottom'] ? -1 : 1;\n      var target = COORD0.set(this.width / 2 + width, this.height / 2 + d * height);\n      var coord = this.containerPointToCoord(target, COORD1);\n      return projection.measureLength(this.getCenter(), coord);\n    };\n  }(),\n  pointToDistance: function () {\n    var POINT = new Point(0, 0);\n    var COORD = new Coordinate(0, 0);\n    return function (dx, dy, zoom) {\n      var projection = this.getProjection();\n\n      if (!projection) {\n        return null;\n      }\n\n      var c = this._prjToPoint(this._getPrjCenter(), zoom, POINT);\n\n      c._add(dx, dy);\n\n      var target = this.pointToCoord(c, zoom, COORD);\n      return projection.measureLength(this.getCenter(), target);\n    };\n  }(),\n  locateByPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (coordinate, px, py) {\n      var point = this.coordToContainerPoint(coordinate, undefined, POINT);\n      return this.containerPointToCoord(point._add(px, py));\n    };\n  }(),\n  _get2DExtent: function () {\n    var POINT = new Point(0, 0);\n    return function (zoom, out) {\n      var _this4 = this;\n\n      var cached;\n\n      if ((zoom === undefined || zoom === this._zoomLevel) && this._mapExtent2D) {\n        cached = this._mapExtent2D;\n      } else if (zoom === this.getGLZoom() && this._mapGlExtent2D) {\n        cached = this._mapGlExtent2D;\n      }\n\n      if (cached) {\n        if (out) {\n          out.set(cached['xmin'], cached['ymin'], cached['xmax'], cached['ymax']);\n          return out;\n        }\n\n        return cached.copy();\n      }\n\n      var cExtent = this.getContainerExtent();\n      return cExtent.convertTo(function (c) {\n        return _this4._containerPointToPoint(c, zoom, POINT);\n      }, out);\n    };\n  }(),\n  _pointToExtent: function () {\n    var COORD0 = new Coordinate(0, 0);\n    var COORD1 = new Coordinate(0, 0);\n    return function (extent2D) {\n      var min2d = extent2D.getMin(),\n          max2d = extent2D.getMax();\n      var fullExtent = this.getFullExtent();\n\n      var _ref = !fullExtent || fullExtent.left <= fullExtent.right ? [min2d.x, max2d.x] : [max2d.x, min2d.x],\n          minx = _ref[0],\n          maxx = _ref[1];\n\n      var _ref2 = !fullExtent || fullExtent.top > fullExtent.bottom ? [max2d.y, min2d.y] : [min2d.y, max2d.y],\n          miny = _ref2[0],\n          maxy = _ref2[1];\n\n      var min = min2d.set(minx, maxy);\n      var max = max2d.set(maxx, miny);\n      return new Extent(this.pointToCoord(min, undefined, COORD0), this.pointToCoord(max, undefined, COORD1), this.getProjection());\n    };\n  }(),\n  _getViewPointFrameOffset: function () {\n    var POINT = new Point(0, 0);\n    return function () {\n      if (this.isZooming()) {\n        return null;\n      }\n\n      var pcenter = this._getPrjCenter();\n\n      if (this._mapViewCoord && !this._mapViewCoord.equals(pcenter)) {\n        return this._prjToContainerPoint(this._mapViewCoord)._sub(this._prjToContainerPoint(pcenter, undefined, POINT));\n      }\n\n      return null;\n    };\n  }(),\n  _viewPointToPrj: function () {\n    var POINT = new Point(0, 0);\n    return function (viewPoint, out) {\n      return this._containerPointToPrj(this.viewPointToContainerPoint(viewPoint, POINT), out);\n    };\n  }(),\n  _prjToContainerPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (pCoordinate, zoom, out, altitude) {\n      return this._pointToContainerPoint(this._prjToPoint(pCoordinate, zoom, POINT), zoom, altitude || 0, out);\n    };\n  }(),\n  _prjToViewPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (pCoordinate, out, altitude) {\n      var containerPoint = this._prjToContainerPoint(pCoordinate, undefined, POINT, altitude);\n\n      return this.containerPointToViewPoint(containerPoint, out);\n    };\n  }(),\n  _viewPointToPoint: function () {\n    var POINT = new Point(0, 0);\n    return function (viewPoint, zoom, out) {\n      return this._containerPointToPoint(this.viewPointToContainerPoint(viewPoint, POINT), zoom, out);\n    };\n  }(),\n  _pointToViewPoint: function () {\n    var COORD = new Coordinate(0, 0);\n    return function (point, zoom, out) {\n      return this._prjToViewPoint(this._pointToPrj(point, zoom, COORD), out);\n    };\n  }()\n});\nMap$1.mergeOptions(options$2);\n\nvar MapDoubleClickZoomHandler = function (_Handler) {\n  _inheritsLoose(MapDoubleClickZoomHandler, _Handler);\n\n  function MapDoubleClickZoomHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n\n  var _proto = MapDoubleClickZoomHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    if (!this.target) {\n      return;\n    }\n\n    this.target.on('_dblclick', this._onDoubleClick, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    if (!this.target) {\n      return;\n    }\n\n    this.target.off('_dblclick', this._onDoubleClick, this);\n  };\n\n  _proto._onDoubleClick = function _onDoubleClick(param) {\n    var map = this.target;\n\n    if (map.options['doubleClickZoom']) {\n      var oldZoom = map.getZoom(),\n          zoom = param['domEvent']['shiftKey'] ? Math.ceil(oldZoom) - 1 : Math.floor(oldZoom) + 1;\n\n      map._zoomAnimation(zoom, param['containerPoint']);\n    }\n  };\n\n  return MapDoubleClickZoomHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'doubleClickZoom': true\n});\nMap$1.addOnLoadHook('addHandler', 'doubleClickZoom', MapDoubleClickZoomHandler);\n\nvar MapDragHandler = function (_Handler) {\n  _inheritsLoose(MapDragHandler, _Handler);\n\n  function MapDragHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n\n  var _proto = MapDragHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    var map = this.target;\n\n    if (!map) {\n      return;\n    }\n\n    var dom = map._panels.mapWrapper || map._containerDOM;\n    this._dragHandler = new DragHandler(dom, {\n      'cancelOn': this._cancelOn.bind(this),\n      'rightclick': true\n    });\n\n    this._dragHandler.on('mousedown', this._onMouseDown, this).on('dragstart', this._onDragStart, this).on('dragging', this._onDragging, this).on('dragend', this._onDragEnd, this).enable();\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    this._dragHandler.off('mousedown', this._onMouseDown, this).off('dragstart', this._onDragStart, this).off('dragging', this._onDragging, this).off('dragend', this._onDragEnd, this);\n\n    this._dragHandler.remove();\n\n    delete this._dragHandler;\n  };\n\n  _proto._cancelOn = function _cancelOn(domEvent) {\n    if (this.target.isZooming() || this._ignore(domEvent)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto._ignore = function _ignore(param) {\n    if (!param) {\n      return false;\n    }\n\n    if (param.domEvent) {\n      param = param.domEvent;\n    }\n\n    return this.target._ignoreEvent(param);\n  };\n\n  _proto._onMouseDown = function _onMouseDown(param) {\n    delete this.startDragTime;\n    delete this._mode;\n\n    if (param.domEvent.button === 2 || param.domEvent.ctrlKey) {\n      if (this.target.options['dragRotate'] || this.target.options['dragPitch']) {\n        this._mode = 'rotatePitch';\n      }\n    } else if (this.target.options['dragPan']) {\n      this._mode = 'move';\n    }\n\n    this.target._stopAnim(this.target._mapAnimPlayer);\n\n    preventDefault(param['domEvent']);\n  };\n\n  _proto._onDragStart = function _onDragStart(param) {\n    this.startDragTime = now();\n\n    if (this._mode === 'move') {\n      this._moveStart(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotateStart(param);\n    }\n  };\n\n  _proto._onDragging = function _onDragging(param) {\n    var map = this.target;\n\n    if (map._isEventOutMap(param['domEvent'])) {\n      return;\n    }\n\n    if (this._mode === 'move') {\n      this._moving(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotating(param);\n    }\n  };\n\n  _proto._onDragEnd = function _onDragEnd(param) {\n    if (this._mode === 'move') {\n      this._moveEnd(param);\n    } else if (this._mode === 'rotatePitch') {\n      this._rotateEnd(param);\n    }\n\n    delete this.startDragTime;\n    delete this.startBearing;\n  };\n\n  _proto._start = function _start(param) {\n    this.preX = param['mousePos'].x;\n    this.preY = param['mousePos'].y;\n    this.startX = this.preX;\n    this.startY = this.preY;\n  };\n\n  _proto._moveStart = function _moveStart(param) {\n    this._start(param);\n\n    var map = this.target;\n    map.onMoveStart(param);\n    var p = getEventContainerPoint(map._getActualEvent(param.domEvent), map.getContainer());\n    this.startPrjCoord = map._containerPointToPrj(p);\n  };\n\n  _proto._moving = function _moving(param) {\n    if (!this.startDragTime) {\n      return;\n    }\n\n    var map = this.target;\n    var p = getEventContainerPoint(map._getActualEvent(param.domEvent), map.getContainer());\n\n    map._setPrjCoordAtContainerPoint(this.startPrjCoord, p);\n\n    map.onMoving(param);\n  };\n\n  _proto._moveEnd = function _moveEnd(param) {\n    if (!this.startDragTime) {\n      return;\n    }\n\n    var map = this.target;\n    var t = now() - this.startDragTime;\n    var mx = param['mousePos'].x,\n        my = param['mousePos'].y;\n    var dx = mx - this.startX;\n    var dy = my - this.startY;\n\n    this._clear();\n\n    if (map.options['panAnimation'] && !param.interupted && map._verifyExtent(map._getPrjCenter()) && t < 280 && Math.abs(dy) + Math.abs(dx) > 5) {\n      t = 5 * t * (Math.abs(dx) + Math.abs(dy)) / 500;\n      map.panBy(new Point(dx, dy), {\n        'duration': t\n      });\n    } else {\n      map.onMoveEnd(param);\n    }\n  };\n\n  _proto._rotateStart = function _rotateStart(param) {\n    this._start(param);\n\n    delete this._rotateMode;\n    this.startBearing = this.target.getBearing();\n    this.target.onDragRotateStart(param);\n    this._db = 0;\n  };\n\n  _proto._rotating = function _rotating(param) {\n    var map = this.target;\n    var mx = param['mousePos'].x,\n        my = param['mousePos'].y;\n    var prePitch = map.getPitch(),\n        preBearing = map.getBearing();\n    var dx = Math.abs(mx - this.preX),\n        dy = Math.abs(my - this.preY);\n\n    if (!this._rotateMode) {\n      if (map.options['dragRotatePitch']) {\n        this._rotateMode = 'rotate_pitch';\n      } else if (dx > dy) {\n        this._rotateMode = 'rotate';\n      } else if (dx < dy) {\n        this._rotateMode = 'pitch';\n      } else {\n        this._rotateMode = 'rotate';\n      }\n    }\n\n    if (this._rotateMode === 'pitch' && prePitch === 0 && dy < 10) {\n      return;\n    }\n\n    if (this._rotateMode.indexOf('rotate') >= 0 && map.options['dragRotate']) {\n      var db = 0;\n\n      if (map.options['dragPitch'] || dx > dy) {\n        db = -0.6 * (this.preX - mx);\n      } else if (mx > map.width / 2) {\n        db = 0.6 * (this.preY - my);\n      } else {\n        db = -0.6 * (this.preY - my);\n      }\n\n      var bearing = map.getBearing() + db;\n      this._db = this._db || 0;\n      this._db += db;\n      map.setBearing(bearing);\n    }\n\n    if (this._rotateMode.indexOf('pitch') >= 0 && map.options['dragPitch']) {\n      map.setPitch(map.getPitch() + (this.preY - my) * 0.4);\n    }\n\n    this.preX = mx;\n    this.preY = my;\n\n    if (map.getBearing() !== preBearing || map.getPitch() !== prePitch) {\n      map.onDragRotating(param);\n    }\n  };\n\n  _proto._rotateEnd = function _rotateEnd(param) {\n    var map = this.target;\n    var bearing = map.getBearing();\n\n    this._clear();\n\n    var t = now() - this.startDragTime;\n    map.onDragRotateEnd(param);\n\n    if (Math.abs(bearing - this.startBearing) > 20 && (this._rotateMode === 'rotate' || this._rotateMode === 'rotate_pitch') && !param.interupted && t < 400) {\n      var _bearing = map.getBearing();\n\n      map._animateTo({\n        'bearing': _bearing + this._db / 2\n      }, {\n        'easing': 'out',\n        'duration': 800\n      });\n    }\n  };\n\n  _proto._clear = function _clear() {\n    delete this.startPrjCoord;\n    delete this.preX;\n    delete this.preY;\n    delete this.startX;\n    delete this.startY;\n  };\n\n  return MapDragHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'draggable': true,\n  'dragPan': true,\n  'dragRotatePitch': true,\n  'dragRotate': true,\n  'dragPitch': true\n});\nMap$1.addOnLoadHook('addHandler', 'draggable', MapDragHandler);\nvar EVENTS = 'mousedown ' + 'mouseup ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'touchstart ' + 'touchmove ' + 'touchend';\n\nvar MapGeometryEventsHandler = function (_Handler) {\n  _inheritsLoose(MapGeometryEventsHandler, _Handler);\n\n  function MapGeometryEventsHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n\n  var _proto = MapGeometryEventsHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    var map = this.target;\n    var dom = map._panels.allLayers || map._containerDOM;\n    on(dom, EVENTS, this._identifyGeometryEvents, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    var map = this.target;\n    var dom = map._panels.allLayers || map._containerDOM;\n    off(dom, EVENTS, this._identifyGeometryEvents, this);\n  };\n\n  _proto._identifyGeometryEvents = function _identifyGeometryEvents(domEvent, type) {\n    var map = this.target;\n\n    if (map.isInteracting() || map._ignoreEvent(domEvent)) {\n      return;\n    }\n\n    var layers = map._getLayers(function (layer) {\n      if (layer.identify && layer.options['geometryEvents']) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (!layers.length) {\n      return;\n    }\n\n    var oneMoreEvent = null;\n    var eventType = type || domEvent.type;\n\n    if (eventType === 'mousedown' || eventType === 'touchstart' && domEvent.touches.length === 1) {\n      this._mouseDownTime = now();\n    } else if ((eventType === 'click' || eventType === 'touchend') && this._mouseDownTime) {\n      var downTime = this._mouseDownTime;\n      delete this._mouseDownTime;\n      var time = now();\n\n      if (time - downTime > 300) {\n        if (eventType === 'click') {\n          return;\n        }\n      } else if (eventType === 'touchend') {\n        oneMoreEvent = 'click';\n      }\n    }\n\n    var actual = domEvent.touches && domEvent.touches.length > 0 ? domEvent.touches[0] : domEvent.changedTouches && domEvent.changedTouches.length > 0 ? domEvent.changedTouches[0] : domEvent;\n\n    if (!actual) {\n      return;\n    }\n\n    var containerPoint = getEventContainerPoint(actual, map._containerDOM),\n        coordinate = map.containerPointToCoordinate(containerPoint);\n\n    if (eventType === 'touchstart') {\n      preventDefault(domEvent);\n    }\n\n    var geometryCursorStyle = null;\n    var identifyOptions = {\n      'includeInternals': true,\n      'filter': function filter(geometry) {\n        if (!(geometry instanceof Geometry)) {\n          return false;\n        }\n\n        var eventToFire = geometry._getEventTypeToFire(domEvent);\n\n        if (eventType === 'mousemove') {\n          if (!geometryCursorStyle && geometry.options['cursor']) {\n            geometryCursorStyle = geometry.options['cursor'];\n          }\n\n          if (!geometry.listens('mousemove') && !geometry.listens('mouseover') && !geometry.listens('mouseenter')) {\n            return false;\n          }\n        } else if (!geometry.listens(eventToFire) && !geometry.listens(oneMoreEvent)) {\n          return false;\n        }\n\n        return true;\n      },\n      'count': 1,\n      'coordinate': coordinate,\n      'onlyVisible': map.options['onlyVisibleGeometryEvents'],\n      'layers': layers\n    };\n    var callback = fireGeometryEvent.bind(this);\n\n    if (eventType === 'mousemove' || eventType === 'touchmove') {\n      this._queryIdentifyTimeout = map.getRenderer().callInNextFrame(function () {\n        if (map.isInteracting()) {\n          return;\n        }\n\n        map.identify(identifyOptions, callback);\n      });\n    } else {\n      map.identify(identifyOptions, callback);\n    }\n\n    function fireGeometryEvent(geometries) {\n      var propagation = true;\n\n      if (eventType === 'mousemove') {\n        var geoMap = {};\n\n        if (geometries.length > 0) {\n          for (var i = geometries.length - 1; i >= 0; i--) {\n            var geo = geometries[i];\n\n            if (!(geo instanceof Geometry)) {\n              continue;\n            }\n\n            var iid = geo._getInternalId();\n\n            geoMap[iid] = geo;\n\n            geo._onEvent(domEvent);\n\n            if (!this._prevOverGeos || !this._prevOverGeos.geomap[iid]) {\n              geo._onEvent(domEvent, 'mouseenter');\n            }\n\n            propagation = geo._onEvent(domEvent, 'mouseover');\n          }\n        }\n\n        map._setPriorityCursor(geometryCursorStyle);\n\n        var oldTargets = this._prevOverGeos && this._prevOverGeos.geos;\n        this._prevOverGeos = {\n          'geos': geometries,\n          'geomap': geoMap\n        };\n\n        if (oldTargets && oldTargets.length > 0) {\n          for (var _i = oldTargets.length - 1; _i >= 0; _i--) {\n            var oldTarget = oldTargets[_i];\n\n            if (!(oldTarget instanceof Geometry)) {\n              continue;\n            }\n\n            var oldTargetId = oldTargets[_i]._getInternalId();\n\n            if (!geoMap[oldTargetId]) {\n              propagation = oldTarget._onEvent(domEvent, 'mouseout');\n            }\n          }\n        }\n      } else {\n        if (!geometries || !geometries.length) {\n          return;\n        }\n\n        for (var _i2 = geometries.length - 1; _i2 >= 0; _i2--) {\n          if (!(geometries[_i2] instanceof Geometry)) {\n            continue;\n          }\n\n          propagation = geometries[_i2]._onEvent(domEvent);\n\n          if (oneMoreEvent) {\n            geometries[_i2]._onEvent(domEvent, oneMoreEvent);\n          }\n\n          break;\n        }\n      }\n\n      if (propagation === false) {\n        stopPropagation(domEvent);\n      }\n    }\n  };\n\n  return MapGeometryEventsHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'geometryEvents': true,\n  'onlyVisibleGeometryEvents': true\n});\nMap$1.addOnLoadHook('addHandler', 'geometryEvents', MapGeometryEventsHandler);\nvar wheelZoomDelta = 4.000244140625;\nvar defaultZoomRate = 1 / 100;\nvar wheelZoomRate = 1 / 450;\nvar maxScalePerFrame = 2;\n\nvar MapScrollWheelZoomHandler = function (_Handler) {\n  _inheritsLoose(MapScrollWheelZoomHandler, _Handler);\n\n  function MapScrollWheelZoomHandler(target) {\n    var _this;\n\n    _this = _Handler.call(this, target) || this;\n    _this._thisScrollZoom = _this._scrollZoom.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this._wheelZoomRate = wheelZoomRate;\n    _this._defaultZoomRate = defaultZoomRate;\n    _this._delta = 0;\n    return _this;\n  }\n\n  var _proto = MapScrollWheelZoomHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    addDomEvent(this.target._containerDOM, 'wheel', this._onWheelScroll, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    removeDomEvent(this.target._containerDOM, 'wheel', this._onWheelScroll);\n  };\n\n  _proto._onWheelScroll = function _onWheelScroll(evt) {\n    preventDefault(evt);\n    stopPropagation(evt);\n    var map = this.target;\n\n    if (map._ignoreEvent(evt) || !map.options['zoomable']) {\n      return false;\n    }\n\n    var container = map._containerDOM;\n\n    var origin = map._checkZoomOrigin(getEventContainerPoint(evt, container));\n\n    if (map.options['seamlessZoom']) {\n      if (!this._zooming) {\n        this._trackPadSuspect = 0;\n        this._ensureTrackpad = false;\n      }\n\n      return this._seamless(evt, origin);\n    } else {\n      return this._interval(evt, origin);\n    }\n  };\n\n  _proto._seamless = function _seamless(evt, origin) {\n    var value = evt.deltaMode === window.WheelEvent.DOM_DELTA_LINE ? evt.deltaY * 60 : evt.deltaY;\n\n    if (value % wheelZoomDelta !== 0) {\n      if (!this._ensureTrackpad) {\n        if (Math.abs(value) < 60) {\n          this._trackPadSuspect++;\n        } else {\n          this._trackPadSuspect = 0;\n        }\n\n        if (this._trackPadSuspect >= 2) {\n          this._ensureTrackpad = true;\n        }\n      }\n\n      if (this._ensureTrackpad) {\n        value *= 14;\n      }\n    }\n\n    if (evt.shiftKey && value) value = value / 4;\n    this._lastWheelEvent = evt;\n    this._delta -= value;\n\n    if (!this._zooming && this._delta) {\n      var map = this.target;\n      this._zoomOrigin = origin;\n      map.onZoomStart(null, origin);\n    }\n\n    this._start();\n  };\n\n  _proto._start = function _start() {\n    if (!this._delta) return;\n    this._zooming = true;\n    var map = this.target;\n\n    if (!this._active) {\n      map.getRenderer().callInNextFrame(this._thisScrollZoom);\n      this._active = true;\n    }\n  };\n\n  _proto._scrollZoom = function _scrollZoom() {\n    var _this2 = this;\n\n    this._active = false;\n\n    if (!this._delta) {\n      return;\n    }\n\n    var zoomRate = Math.abs(this._delta) > wheelZoomDelta ? this._wheelZoomRate : this._defaultZoomRate;\n    var scale = maxScalePerFrame / (1 + Math.exp(-Math.abs(this._delta * zoomRate)));\n\n    if (this._delta < 0 && scale !== 0) {\n      scale = 1 / scale;\n    }\n\n    var map = this.target;\n    var zoom = map.getZoom();\n    var targetZoom = map.getZoomForScale(scale, zoom, true);\n    this._delta = 0;\n    map.onZooming(targetZoom, this._zoomOrigin);\n\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    this._timeout = setTimeout(function () {\n      _this2._zooming = false;\n      delete _this2._timeout;\n      map.onZoomEnd(map.getZoom(), _this2._zoomOrigin);\n    }, 210);\n  };\n\n  _proto._interval = function _interval(evt, origin) {\n    var _this3 = this;\n\n    var map = this.target;\n\n    if (this._zooming) {\n      this._requesting++;\n      return false;\n    }\n\n    this._requesting = 0;\n    var levelValue = (evt.deltaY ? evt.deltaY * -1 : evt.wheelDelta ? evt.wheelDelta : evt.detail) > 0 ? 1 : -1;\n\n    if (evt.detail) {\n      levelValue *= -1;\n    }\n\n    var zoom = map.getZoom();\n    var nextZoom = zoom + levelValue;\n    nextZoom = map._checkZoom(levelValue > 0 ? Math.ceil(nextZoom) : Math.floor(nextZoom));\n\n    if (nextZoom === zoom) {\n      return false;\n    }\n\n    this._zooming = true;\n\n    if (!this._delta) {\n      map.onZoomStart(null, origin);\n      this._origin = origin;\n      this._delta = levelValue;\n      this._startZoom = map.getZoom();\n    }\n\n    var duration = 90;\n\n    map._animateTo({\n      'zoom': nextZoom - this._delta * 1 / 2,\n      'around': this._origin\n    }, {\n      'continueOnViewChanged': true,\n      'easing': 'linear',\n      'duration': duration,\n      'wheelZoom': true\n    }, function (frame) {\n      if (frame.state.playState !== 'finished') {\n        if (frame.state.playState !== 'running') {\n          delete _this3._zooming;\n          delete _this3._requesting;\n        }\n\n        return;\n      }\n\n      if (_this3._requesting < 1 || Math.abs(nextZoom - _this3._startZoom) > 2 || nextZoom === map.getMaxZoom() || nextZoom === map.getMinZoom()) {\n        map._animateTo({\n          'zoom': nextZoom,\n          'around': _this3._origin\n        }, {\n          'continueOnViewChanged': true,\n          'duration': 100\n        }, function (frame) {\n          if (frame.state.playState !== 'running') {\n            delete _this3._zooming;\n            delete _this3._requesting;\n          }\n        });\n\n        delete _this3._startZoom;\n        delete _this3._origin;\n        delete _this3._delta;\n        _this3._requesting = 0;\n      } else if (!isNil(_this3._requesting)) {\n        delete _this3._zooming;\n\n        _this3._onWheelScroll(evt);\n      }\n    });\n\n    return false;\n  };\n\n  return MapScrollWheelZoomHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'scrollWheelZoom': true,\n  'seamlessZoom': false\n});\nMap$1.addOnLoadHook('addHandler', 'scrollWheelZoom', MapScrollWheelZoomHandler);\n\nvar MapTouchZoomHandler = function (_Handler) {\n  _inheritsLoose(MapTouchZoomHandler, _Handler);\n\n  function MapTouchZoomHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n\n  var _proto = MapTouchZoomHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    addDomEvent(this.target.getContainer(), 'touchstart', this._onTouchStart, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    removeDomEvent(this.target.getContainer(), 'touchstart', this._onTouchStart);\n  };\n\n  _proto._onTouchStart = function _onTouchStart(event) {\n    var map = this.target;\n\n    if (!event.touches || event.touches.length < 2) {\n      return;\n    }\n\n    var container = map.getContainer();\n    var p1 = getEventContainerPoint(event.touches[0], container),\n        p2 = getEventContainerPoint(event.touches[1], container);\n    this.preY = p1.y;\n    this._startP1 = p1;\n    this._startP2 = p2;\n    this._startDist = p1.distanceTo(p2);\n    this._startVector = p1.sub(p2);\n    this._startZoom = map.getZoom();\n    this._startBearing = map.getBearing();\n    off(document, 'touchmove', this._onTouchMove, this);\n    off(document, 'touchend', this._onTouchEnd, this);\n    addDomEvent(document, 'touchmove', this._onTouchMove, this);\n    addDomEvent(document, 'touchend', this._onTouchEnd, this);\n    preventDefault(event);\n\n    map._fireEvent('touchactstart');\n  };\n\n  _proto._onTouchMove = function _onTouchMove(event) {\n    var map = this.target;\n\n    if (!event.touches || event.touches.length < 2) {\n      return;\n    }\n\n    var container = map.getContainer(),\n        p1 = getEventContainerPoint(event.touches[0], container),\n        p2 = getEventContainerPoint(event.touches[1], container),\n        d1 = p1.sub(this._startP1),\n        d2 = p2.sub(this._startP2),\n        vector = p1.sub(p2),\n        scale = p1.distanceTo(p2) / this._startDist,\n        bearing = vector.angleWith(this._startVector) * 180 / Math.PI,\n        preY = this.preY || p1.y,\n        pitch = (preY - p1.y) * 0.4;\n\n    this.preY = p1.y;\n    var param = {\n      'domEvent': event,\n      'mousePos': [p1, p2]\n    };\n\n    if (!this.mode) {\n      if (map.options['touchRotate'] && Math.abs(bearing) > 8) {\n        this.mode = map.options['touchZoomRotate'] ? 'rotate_zoom' : 'rotate';\n      } else if (map.options['touchPitch'] && d1.y * d2.y > 0 && Math.abs(d1.y) > 10 && Math.abs(d2.y) > 10) {\n        this.mode = 'pitch';\n      } else if (map.options['zoomable'] && map.options['touchZoom'] && Math.abs(1 - scale) > 0.15) {\n        this.mode = map.options['touchZoomRotate'] && map.options['touchRotate'] ? 'rotate_zoom' : 'zoom';\n      }\n\n      this._startTouching(param);\n    }\n\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      this._scale = scale;\n      var res = map._getResolution(this._startZoom) / scale;\n      var zoom = map.getZoomFromRes(res);\n      map.onZooming(zoom, this._Origin);\n    }\n\n    if (this.mode === 'rotate' || this.mode === 'rotate_zoom') {\n      map.setBearing(this._startBearing + bearing);\n      map.onDragRotating(param);\n    } else if (this.mode === 'pitch') {\n      map.setPitch(map.getPitch() + pitch);\n      map.onDragRotating(param);\n    }\n\n    map._fireEvent('touchactinging');\n  };\n\n  _proto._startTouching = function _startTouching(param) {\n    var map = this.target;\n\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      var size = map.getSize();\n      this._Origin = new Point(size['width'] / 2, size['height'] / 2);\n      map.onZoomStart(null, this._Origin);\n    }\n\n    if (this.mode === 'rotate' || this.mode === 'pitch' || this.mode === 'rotate_zoom') {\n      map.onDragRotateStart(param);\n    }\n  };\n\n  _proto._onTouchEnd = function _onTouchEnd(event) {\n    delete this.preY;\n    var map = this.target;\n    off(document, 'touchmove', this._onTouchMove, this);\n    off(document, 'touchend', this._onTouchEnd, this);\n\n    if (this.mode === 'zoom' || this.mode === 'rotate_zoom') {\n      var scale = this._scale;\n      var res = map._getResolution(this._startZoom) / scale;\n      var zoom = map.getZoomFromRes(res);\n      map.onZoomEnd(zoom, this._Origin);\n    }\n\n    if (this.mode === 'pitch' || this.mode === 'rotate' || this.mode === 'rotate_zoom') {\n      map.onDragRotateEnd({\n        'domEvent': event\n      });\n    }\n\n    delete this.mode;\n\n    map._fireEvent('touchactend');\n  };\n\n  return MapTouchZoomHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'touchGesture': true,\n  'touchZoom': true,\n  'touchPitch': true,\n  'touchRotate': true,\n  'touchZoomRotate': false\n});\nMap$1.addOnLoadHook('addHandler', 'touchGesture', MapTouchZoomHandler);\nvar KEY = '__anim_player';\nvar Easing = {\n  in: function _in(t) {\n    return Math.pow(t, 2);\n  },\n  out: function out(t) {\n    return 1 - Easing.in(1 - t);\n  },\n  inAndOut: function inAndOut(t) {\n    return 3 * t * t - 2 * t * t * t;\n  },\n  linear: function linear(t) {\n    return t;\n  },\n  upAndDown: function upAndDown(t) {\n    if (t < 0.5) {\n      return Easing.inAndOut(2 * t);\n    } else {\n      return 1 - Easing.inAndOut(2 * (t - 0.5));\n    }\n  }\n};\n\nvar Frame = function Frame(state, styles) {\n  this.state = state;\n  this.styles = styles;\n};\n\nvar Player = function Player(animation, options, onFrame, target) {\n  this._animation = animation;\n  this.options = options;\n  this._onFrame = onFrame;\n  this.playState = 'idle';\n  this.ready = true;\n  this.finished = false;\n  this.target = target;\n};\n\nvar Animation = {\n  speed: {\n    'slow': 2000,\n    'normal': 1000,\n    'fast': 500\n  },\n  _resolveStyles: function _resolveStyles(styles) {\n    if (!styles) {\n      return null;\n    }\n\n    function resolveChild(child) {\n      if (!Array.isArray(child)) {\n        return Animation._resolveStyles(child);\n      }\n\n      var start = [],\n          d = [],\n          dest = [];\n\n      for (var i = 0; i < child.length; i++) {\n        var _styles = Animation._resolveStyles(child[i]);\n\n        if (_styles) {\n          start.push(_styles[0]);\n          d.push(_styles[1]);\n          dest.push(_styles[2]);\n        }\n      }\n\n      if (!start.length) {\n        return null;\n      } else {\n        return [start, d, dest];\n      }\n    }\n\n    function resolveVal(val) {\n      var values = val;\n      var clazz;\n\n      if (!Array.isArray(val)) {\n        if (isNumber(val)) {\n          values = [0, val];\n        } else if (val instanceof Point || val instanceof Coordinate) {\n          clazz = val.constructor;\n          values = [new clazz(0, 0), val];\n        } else {\n          values = [val, val];\n        }\n      }\n\n      var v1 = values[0],\n          v2 = values[1];\n\n      if (isNumber(v1) && isNumber(v2)) {\n        if (v1 === v2) {\n          return null;\n        }\n\n        return [v1, v2 - v1, v2];\n      } else if (Array.isArray(v1) && isNumber(v1[0]) || v1 instanceof Coordinate || v1 instanceof Point) {\n        if (Array.isArray(v1)) {\n          v1 = new Coordinate(v1);\n          v2 = new Coordinate(v2);\n        } else {\n          clazz = v1.constructor;\n          v1 = new clazz(v1);\n          v2 = new clazz(v2);\n        }\n\n        if (v1.equals(v2)) {\n          return null;\n        }\n\n        return [v1, v2.sub(v1), v2];\n      } else {\n        return [v1, v2, v2];\n      }\n    }\n\n    function isChild(val) {\n      if (!Array.isArray(val) && val.constructor === Object) {\n        return true;\n      } else if (Array.isArray(val) && val[0].constructor === Object) {\n        return true;\n      }\n\n      return false;\n    }\n\n    var d = {},\n        start = {},\n        dest = {};\n\n    for (var p in styles) {\n      if (styles.hasOwnProperty(p)) {\n        var values = styles[p];\n\n        if (!values) {\n          continue;\n        } else if (Array.isArray(values)) {\n          if (isNil(values[0]) || isNil(values[1])) {\n            continue;\n          }\n        }\n\n        var childStyles = void 0;\n\n        if (isChild(values)) {\n          childStyles = resolveChild(values);\n        } else {\n          childStyles = resolveVal(values);\n        }\n\n        if (childStyles) {\n          start[p] = childStyles[0];\n          d[p] = childStyles[1];\n          dest[p] = childStyles[2];\n        }\n      }\n    }\n\n    return [start, d, dest];\n  },\n  framing: function framing(styles, options) {\n    if (!options) {\n      options = {};\n    }\n\n    var easing = options['easing'] ? Easing[options['easing']] : Easing.linear;\n\n    if (!easing) {\n      easing = Easing.linear;\n    }\n\n    var dStyles, startStyles, destStyles;\n    styles = Animation._resolveStyles(styles);\n\n    if (styles) {\n      startStyles = styles[0];\n      dStyles = styles[1];\n      destStyles = styles[2];\n    }\n\n    var deltaStyles = function deltaStyles(delta, _startStyles, _dStyles) {\n      if (!_startStyles || !_dStyles) {\n        return null;\n      }\n\n      var result = {};\n\n      for (var p in _dStyles) {\n        if (_dStyles.hasOwnProperty(p)) {\n          if (_startStyles[p] === destStyles[p]) {\n            result[p] = _startStyles[p];\n            continue;\n          }\n\n          var s = _startStyles[p],\n              d = _dStyles[p];\n\n          if (isNumber(d)) {\n            result[p] = s + delta * d;\n          } else if (Array.isArray(d)) {\n            var children = [];\n\n            for (var i = 0; i < d.length; i++) {\n              children.push(deltaStyles(delta, s[i], d[i]));\n            }\n\n            result[p] = children;\n          } else {\n            var clazz = d.constructor;\n\n            if (clazz === Object) {\n              result[p] = deltaStyles(delta, s, d);\n            } else if (s instanceof Point || s instanceof Coordinate) {\n              result[p] = s.add(d.multi(delta));\n            } else {\n              result[p] = d;\n            }\n          }\n        }\n      }\n\n      return result;\n    };\n\n    return function (elapsed, duration) {\n      var state, d;\n\n      if (elapsed < 0) {\n        state = {\n          'playState': 'idle',\n          'delta': 0\n        };\n        d = startStyles;\n      } else if (elapsed < duration) {\n        var delta = easing(elapsed / duration);\n        state = {\n          'playState': 'running',\n          'delta': delta\n        };\n        d = deltaStyles(delta, startStyles, dStyles);\n      } else {\n        state = {\n          'playState': 'finished',\n          'delta': 1\n        };\n        d = destStyles;\n      }\n\n      state['startStyles'] = startStyles;\n      state['destStyles'] = destStyles;\n      state['progress'] = elapsed;\n      state['remainingMs'] = duration - elapsed;\n      return new Frame(state, d);\n    };\n  },\n  _requestAnimFrame: function _requestAnimFrame(fn) {\n    if (!this._frameQueue) {\n      this._frameQueue = [];\n    }\n\n    this._frameQueue.push(fn);\n\n    this._a();\n  },\n  _a: function _a() {\n    if (!this._animationFrameId) {\n      this._animationFrameId = requestAnimFrame(Animation._frameFn);\n    }\n  },\n  _run: function _run() {\n    if (this._frameQueue.length) {\n      var running = this._frameQueue;\n      this._frameQueue = [];\n\n      for (var i = 0, len = running.length; i < len; i++) {\n        running[i]();\n      }\n\n      if (this._frameQueue.length) {\n        this._animationFrameId = requestAnimFrame(Animation._frameFn);\n      } else {\n        delete this._animationFrameId;\n      }\n    }\n  },\n  animate: function animate(styles, options, step, target) {\n    if (!options) {\n      options = {};\n    }\n\n    var animation = Animation.framing(styles, options);\n    var player = new Player(animation, options, step, target);\n    return player;\n  }\n};\nAnimation._frameFn = Animation._run.bind(Animation);\nextend(Player.prototype, {\n  _prepare: function _prepare() {\n    var options = this.options;\n    var duration = options['speed'] || options['duration'];\n\n    if (isString(duration)) {\n      duration = Animation.speed[duration];\n\n      if (!duration) {\n        duration = +duration;\n      }\n    }\n\n    if (!duration) {\n      duration = Animation.speed['normal'];\n    }\n\n    this.duration = duration;\n    this._framer = options['framer'] || Animation._requestAnimFrame.bind(Animation);\n  },\n  play: function play() {\n    if (this.playState !== 'idle' && this.playState !== 'paused' || this.target && this.target[KEY]) {\n      return this;\n    }\n\n    if (this.target) {\n      this.target[KEY] = 1;\n    }\n\n    if (this.playState === 'idle') {\n      this.currentTime = 0;\n\n      this._prepare();\n    }\n\n    var t = now();\n\n    if (!this.startTime) {\n      var options = this.options;\n      this.startTime = options['startTime'] ? options['startTime'] : t;\n    }\n\n    this._playStartTime = Math.max(t, this.startTime);\n\n    if (this.playState === 'paused') {\n      this._playStartTime -= this.currentTime;\n    }\n\n    this.playState = 'running';\n\n    this._run();\n\n    return this;\n  },\n  pause: function pause() {\n    if (this.playState === 'paused') {\n      return this;\n    }\n\n    this.playState = 'paused';\n\n    this._run();\n\n    return this;\n  },\n  cancel: function cancel() {\n    if (this.playState === 'idle') {\n      return this;\n    }\n\n    this.playState = 'idle';\n    this.finished = false;\n\n    this._run();\n\n    return this;\n  },\n  finish: function finish() {\n    if (this.playState === 'finished') {\n      return this;\n    }\n\n    this.playState = 'finished';\n    this.finished = true;\n\n    this._run();\n\n    return this;\n  },\n  reverse: function reverse() {},\n  _run: function _run() {\n    var _this = this;\n\n    var onFrame = this._onFrame;\n    var t = now();\n    var elapsed = t - this._playStartTime;\n\n    if (this.options['repeat'] && elapsed >= this.duration) {\n      this._playStartTime = t;\n      elapsed = 0;\n    }\n\n    if (this.playState !== 'running') {\n      if (this.target) {\n        delete this.target[KEY];\n      }\n\n      if (onFrame) {\n        if (this.playState === 'finished') {\n          elapsed = this.duration;\n        } else if (this.playState === 'idle') {\n          elapsed = 0;\n        }\n\n        var _frame = this._animation(elapsed, this.duration);\n\n        _frame.state.playState = this.playState;\n        onFrame(_frame);\n      }\n\n      return;\n    }\n\n    var frame = this._animation(elapsed, this.duration);\n\n    this.playState = frame.state['playState'];\n\n    if (this.playState !== 'running' && this.target) {\n      delete this.target[KEY];\n    }\n\n    if (this.playState === 'idle') {\n      if (this.startTime > t) {\n        setTimeout(this._run.bind(this), this.startTime - t);\n      }\n    } else if (this.playState === 'running') {\n      this._framer(function () {\n        if (_this.playState !== 'running') {\n          return;\n        }\n\n        _this.currentTime = elapsed;\n\n        if (onFrame) {\n          onFrame(frame);\n        }\n\n        _this._run();\n      });\n    } else if (this.playState === 'finished') {\n      this.finished = true;\n\n      if (onFrame) {\n        onFrame(frame);\n      }\n    }\n  }\n});\nvar Animation$1 = /*#__PURE__*/Object.freeze({\n  Animation: Animation,\n  Easing: Easing,\n  Player: Player,\n  Frame: Frame\n});\nvar simplify = createCommonjsModule(function (module) {\n  (function () {\n    function getSqDist(p1, p2) {\n      var dx = p1.x - p2.x,\n          dy = p1.y - p2.y;\n      return dx * dx + dy * dy;\n    }\n\n    function getSqSegDist(p, p1, p2) {\n      var x = p1.x,\n          y = p1.y,\n          dx = p2.x - x,\n          dy = p2.y - y;\n\n      if (dx !== 0 || dy !== 0) {\n        var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n          x = p2.x;\n          y = p2.y;\n        } else if (t > 0) {\n          x += dx * t;\n          y += dy * t;\n        }\n      }\n\n      dx = p.x - x;\n      dy = p.y - y;\n      return dx * dx + dy * dy;\n    }\n\n    function simplifyRadialDist(points, sqTolerance) {\n      var prevPoint = points[0],\n          newPoints = [prevPoint],\n          point;\n\n      for (var i = 1, len = points.length; i < len; i++) {\n        point = points[i];\n\n        if (getSqDist(point, prevPoint) > sqTolerance) {\n          newPoints.push(point);\n          prevPoint = point;\n        }\n      }\n\n      if (prevPoint !== point) newPoints.push(point);\n      return newPoints;\n    }\n\n    function simplifyDPStep(points, first, last, sqTolerance, simplified) {\n      var maxSqDist = sqTolerance,\n          index;\n\n      for (var i = first + 1; i < last; i++) {\n        var sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n        if (sqDist > maxSqDist) {\n          index = i;\n          maxSqDist = sqDist;\n        }\n      }\n\n      if (maxSqDist > sqTolerance) {\n        if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);\n        simplified.push(points[index]);\n        if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);\n      }\n    }\n\n    function simplifyDouglasPeucker(points, sqTolerance) {\n      var last = points.length - 1;\n      var simplified = [points[0]];\n      simplifyDPStep(points, 0, last, sqTolerance, simplified);\n      simplified.push(points[last]);\n      return simplified;\n    }\n\n    function simplify(points, tolerance, highestQuality) {\n      if (points.length <= 2) return points;\n      var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n      points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\n      points = simplifyDouglasPeucker(points, sqTolerance);\n      return points;\n    }\n\n    {\n      module.exports = simplify;\n      module.exports.default = simplify;\n    }\n  })();\n});\nvar options$3 = {\n  'smoothness': 0,\n  'enableClip': true,\n  'enableSimplify': true,\n  'simplifyTolerance': 2,\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'polygonFill': '#fff',\n    'polygonOpacity': 1,\n    'opacity': 1\n  }\n};\n\nvar Path = function (_Geometry) {\n  _inheritsLoose(Path, _Geometry);\n\n  function Path() {\n    return _Geometry.apply(this, arguments) || this;\n  }\n\n  var _proto = Path.prototype;\n\n  _proto.getOutline = function getOutline() {\n    var painter = this._getPainter();\n\n    if (!painter) {\n      return null;\n    }\n\n    var extent = this.getExtent();\n    return new Polygon(extent.toArray(), {\n      symbol: {\n        'lineWidth': 1,\n        'lineColor': '6b707b'\n      }\n    });\n  };\n\n  _proto.animateShow = function animateShow(options, cb) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this._showPlayer) {\n      this._showPlayer.finish();\n    }\n\n    if (isFunction(options)) {\n      options = {};\n      cb = options;\n    }\n\n    var coordinates = this.getCoordinates();\n\n    if (coordinates.length === 0) {\n      return this;\n    }\n\n    this._animIdx = 0;\n    this._animLenSoFar = 0;\n    this.show();\n    var isPolygon = !!this.getShell;\n    var animCoords = isPolygon ? this.getShell().concat(this.getShell()[0]) : this.getCoordinates();\n\n    var projection = this._getProjection();\n\n    var prjAnimCoords = projection.projectCoords(animCoords);\n    this._prjAniShowCenter = this._getPrjExtent().getCenter();\n    this._aniShowCenter = projection.unproject(this._prjAniShowCenter);\n    var duration = options['duration'] || 1000,\n        easing = options['easing'] || 'out';\n    this.setCoordinates([]);\n    var length = 0;\n\n    for (var i = 1; i < prjAnimCoords.length; i++) {\n      length += prjAnimCoords[i].distanceTo(prjAnimCoords[i - 1]);\n    }\n\n    var player = this._showPlayer = Animation.animate({\n      't': duration\n    }, {\n      'duration': duration,\n      'easing': easing\n    }, function (frame) {\n      if (!_this.getMap()) {\n        if (player.playState !== 'finished') {\n          player.finish();\n\n          if (cb) {\n            var _coordinates = _this.getCoordinates();\n\n            cb(frame, _coordinates[_coordinates.length - 1]);\n          }\n        }\n\n        return;\n      }\n\n      var currentCoord = _this._drawAnimShowFrame(frame.styles.t, duration, length, animCoords, prjAnimCoords);\n\n      if (frame.state.playState === 'finished') {\n        delete _this._showPlayer;\n        delete _this._aniShowCenter;\n        delete _this._prjAniShowCenter;\n        delete _this._animIdx;\n        delete _this._animLenSoFar;\n        delete _this._animTailRatio;\n\n        _this.setCoordinates(coordinates);\n      }\n\n      if (cb) {\n        cb(frame, currentCoord);\n      }\n    }, this);\n    player.play();\n    return player;\n  };\n\n  _proto._drawAnimShowFrame = function _drawAnimShowFrame(t, duration, length, coordinates, prjCoords) {\n    if (t === 0) {\n      return coordinates[0];\n    }\n\n    var projection = this._getProjection();\n\n    var targetLength = t / duration * length;\n    var segLen = 0;\n    var i, l;\n\n    for (i = this._animIdx, l = prjCoords.length; i < l - 1; i++) {\n      segLen = prjCoords[i].distanceTo(prjCoords[i + 1]);\n\n      if (this._animLenSoFar + segLen > targetLength) {\n        break;\n      }\n\n      this._animLenSoFar += segLen;\n    }\n\n    this._animIdx = i;\n\n    if (this._animIdx >= l - 1) {\n      this.setCoordinates(coordinates);\n      return coordinates[coordinates.length - 1];\n    }\n\n    var idx = this._animIdx;\n    var p1 = prjCoords[idx],\n        p2 = prjCoords[idx + 1],\n        span = targetLength - this._animLenSoFar,\n        r = span / segLen;\n    this._animTailRatio = r;\n    var x = p1.x + (p2.x - p1.x) * r,\n        y = p1.y + (p2.y - p1.y) * r,\n        lastCoord = new Coordinate(x, y);\n    var targetCoord = projection.unproject(lastCoord);\n    var isPolygon = !!this.getShell;\n\n    if (!isPolygon && this.options['smoothness'] > 0) {\n      var animCoords = coordinates.slice(0, this._animIdx + 3);\n      this.setCoordinates(animCoords);\n      var prjAnimCoords = prjCoords.slice(0, this._animIdx + 3);\n\n      this._setPrjCoordinates(prjAnimCoords);\n    } else {\n      var _animCoords = coordinates.slice(0, this._animIdx + 1);\n\n      _animCoords.push(targetCoord);\n\n      var _prjAnimCoords = prjCoords.slice(0, this._animIdx + 1);\n\n      _prjAnimCoords.push(lastCoord);\n\n      if (isPolygon) {\n        this.setCoordinates([this._aniShowCenter].concat(_animCoords));\n\n        this._setPrjCoordinates([this._prjAniShowCenter].concat(_prjAnimCoords));\n      } else {\n        this.setCoordinates(_animCoords);\n\n        this._setPrjCoordinates(_prjAnimCoords);\n      }\n    }\n\n    return targetCoord;\n  };\n\n  _proto._getCenterInExtent = function _getCenterInExtent(extent, coordinates, clipFn) {\n    var meExtent = this.getExtent();\n\n    if (!extent.intersects(meExtent)) {\n      return null;\n    }\n\n    var clipped = clipFn(coordinates, extent);\n\n    if (clipped.length === 0) {\n      return null;\n    }\n\n    var sumx = 0,\n        sumy = 0,\n        counter = 0;\n    clipped.forEach(function (part) {\n      if (Array.isArray(part)) {\n        part.forEach(function (c) {\n          if (c.point) {\n            c = c.point;\n          }\n\n          sumx += c.x;\n          sumy += c.y;\n          counter++;\n        });\n      } else {\n        if (part.point) {\n          part = part.point;\n        }\n\n        sumx += part.x;\n        sumy += part.y;\n        counter++;\n      }\n    });\n\n    var c = new Coordinate(sumx, sumy)._multi(1 / counter);\n\n    c.count = counter;\n    return c;\n  };\n\n  _proto._getPath2DPoints = function _getPath2DPoints(prjCoords, disableSimplify, zoom) {\n    if (!isArrayHasData(prjCoords)) {\n      return [];\n    }\n\n    var map = this.getMap(),\n        isSimplify = !disableSimplify && this._shouldSimplify(),\n        tolerance = this.options['simplifyTolerance'] * map._getResolution(),\n        isMulti = Array.isArray(prjCoords[0]);\n\n    delete this._simplified;\n\n    if (isSimplify && !isMulti) {\n      var count = prjCoords.length;\n      prjCoords = simplify(prjCoords, tolerance, false);\n      this._simplified = prjCoords.length < count;\n    }\n\n    if (isNil(zoom)) {\n      zoom = map.getZoom();\n    }\n\n    return forEachCoord(prjCoords, function (c) {\n      return map._prjToPoint(c, zoom);\n    });\n  };\n\n  _proto._shouldSimplify = function _shouldSimplify() {\n    var layer = this.getLayer(),\n        properties = this.getProperties();\n    var hasAltitude = properties && layer.options['enableAltitude'] && !isNil(properties[layer.options['altitudeProperty']]);\n    return layer && layer.options['enableSimplify'] && !hasAltitude && this.options['enableSimplify'] && !this._showPlayer;\n  };\n\n  _proto._setPrjCoordinates = function _setPrjCoordinates(prjPoints) {\n    this._prjCoords = prjPoints;\n    this.onShapeChanged();\n  };\n\n  _proto._getPrjCoordinates = function _getPrjCoordinates() {\n    this._verifyProjection();\n\n    if (!this._prjCoords && this._getProjection()) {\n      this._prjCoords = this._projectCoords(this._coordinates);\n    }\n\n    return this._prjCoords;\n  };\n\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n\n    var projection = this._getProjection();\n\n    if (!projection) {\n      return;\n    }\n\n    if (this._prjCoords) {\n      this._coordinates = this._unprojectCoords(this._getPrjCoordinates());\n    }\n  };\n\n  _proto._clearProjection = function _clearProjection() {\n    this._prjCoords = null;\n\n    _Geometry.prototype._clearProjection.call(this);\n  };\n\n  _proto._projectCoords = function _projectCoords(points) {\n    var projection = this._getProjection();\n\n    if (projection) {\n      return projection.projectCoords(points);\n    }\n\n    return [];\n  };\n\n  _proto._unprojectCoords = function _unprojectCoords(prjPoints) {\n    var projection = this._getProjection();\n\n    if (projection) {\n      return projection.unprojectCoords(prjPoints);\n    }\n\n    return [];\n  };\n\n  _proto._computeCenter = function _computeCenter() {\n    var ring = this._coordinates;\n\n    if (!isArrayHasData(ring)) {\n      return null;\n    }\n\n    var sumx = 0,\n        sumy = 0,\n        counter = 0;\n    var size = ring.length;\n\n    for (var i = 0; i < size; i++) {\n      if (ring[i]) {\n        if (isNumber(ring[i].x) && isNumber(ring[i].y)) {\n          sumx += ring[i].x;\n          sumy += ring[i].y;\n          counter++;\n        }\n      }\n    }\n\n    return new Coordinate(sumx / counter, sumy / counter);\n  };\n\n  _proto._computeExtent = function _computeExtent() {\n    var shell = this._coordinates;\n\n    if (!isArrayHasData(shell)) {\n      return null;\n    }\n\n    var rings = [shell];\n\n    if (this.hasHoles && this.hasHoles()) {\n      rings.push.apply(rings, this.getHoles());\n    }\n\n    return this._coords2Extent(rings, this._getProjection());\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent() {\n    var coords = [this._getPrjCoordinates()];\n\n    if (this.hasHoles && this.hasHoles()) {\n      coords.push.apply(coords, this._getPrjHoles());\n    }\n\n    return this._coords2Extent(coords);\n  };\n\n  _proto._get2DLength = function _get2DLength() {\n    var vertexes = this._getPath2DPoints(this._getPrjCoordinates(), true);\n\n    var len = 0;\n\n    for (var i = 1, l = vertexes.length; i < l; i++) {\n      len += vertexes[i].distanceTo(vertexes[i - 1]);\n    }\n\n    return len;\n  };\n\n  _proto._hitTestTolerance = function _hitTestTolerance() {\n    var symbol = this._getInternalSymbol();\n\n    var w;\n\n    if (Array.isArray(symbol)) {\n      w = 0;\n\n      for (var i = 0; i < symbol.length; i++) {\n        if (isNumber(symbol[i]['lineWidth'])) {\n          if (symbol[i]['lineWidth'] > w) {\n            w = symbol[i]['lineWidth'];\n          }\n        }\n      }\n    } else {\n      w = symbol['lineWidth'];\n    }\n\n    return isNumber(w) ? w / 2 : 1.5;\n  };\n\n  _proto._coords2Extent = function _coords2Extent(coords, proj) {\n    var result = new Extent(proj);\n\n    for (var i = 0, l = coords.length; i < l; i++) {\n      for (var j = 0, ll = coords[i].length; j < ll; j++) {\n        result._combine(coords[i][j]);\n      }\n    }\n\n    return result;\n  };\n\n  return Path;\n}(Geometry);\n\nPath.mergeOptions(options$3);\nvar JSON_TYPE = 'Polygon';\n\nvar Polygon = function (_Path) {\n  _inheritsLoose(Polygon, _Path);\n\n  function Polygon(coordinates, opts) {\n    var _this;\n\n    _this = _Path.call(this, opts) || this;\n    _this.type = 'Polygon';\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    return _this;\n  }\n\n  var _proto = Polygon.prototype;\n\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    if (!coordinates) {\n      this._coordinates = null;\n      this._holes = null;\n\n      this._projectRings();\n\n      return this;\n    }\n\n    var rings = Coordinate.toCoordinates(coordinates);\n    var len = rings.length;\n\n    if (!Array.isArray(rings[0])) {\n      this._coordinates = this._trimRing(rings);\n    } else {\n      this._coordinates = this._trimRing(rings[0]);\n\n      if (len > 1) {\n        var holes = [];\n\n        for (var i = 1; i < len; i++) {\n          if (!rings[i]) {\n            continue;\n          }\n\n          holes.push(this._trimRing(rings[i]));\n        }\n\n        this._holes = holes;\n      }\n    }\n\n    this._projectRings();\n\n    return this;\n  };\n\n  _proto.getCoordinates = function getCoordinates() {\n    if (!this._coordinates) {\n      return [];\n    }\n\n    var holes = this.getHoles();\n    var rings = [this._copyAndCloseRing(this._coordinates)];\n\n    for (var i = 0, l = holes.length; i < l; i++) {\n      rings.push(this._copyAndCloseRing(holes[i]));\n    }\n\n    return rings;\n  };\n\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    return this._getCenterInExtent(extent, this.getShell(), clipPolygon);\n  };\n\n  _proto.getShell = function getShell() {\n    return this._coordinates || [];\n  };\n\n  _proto.getHoles = function getHoles() {\n    return this._holes || [];\n  };\n\n  _proto.hasHoles = function hasHoles() {\n    return this.getHoles().length > 0;\n  };\n\n  _proto._projectRings = function _projectRings() {\n    if (!this.getMap()) {\n      this.onShapeChanged();\n      return;\n    }\n\n    this._prjCoords = this._projectCoords(this._coordinates);\n    this._prjHoles = this._projectCoords(this._holes);\n    this.onShapeChanged();\n  };\n\n  _proto._setPrjCoordinates = function _setPrjCoordinates(prjCoords) {\n    this._prjCoords = prjCoords;\n    this.onShapeChanged();\n  };\n\n  _proto._cleanRing = function _cleanRing(ring) {\n    for (var i = ring.length - 1; i >= 0; i--) {\n      if (!ring[i]) {\n        ring.splice(i, 1);\n      }\n    }\n  };\n\n  _proto._checkRing = function _checkRing(ring) {\n    this._cleanRing(ring);\n\n    if (!ring || !isArrayHasData(ring)) {\n      return false;\n    }\n\n    var lastPoint = ring[ring.length - 1];\n    var isClose = true;\n\n    if (ring[0].x !== lastPoint.x || ring[0].y !== lastPoint.y) {\n      isClose = false;\n    }\n\n    return isClose;\n  };\n\n  _proto._trimRing = function _trimRing(ring) {\n    var isClose = this._checkRing(ring);\n\n    if (isArrayHasData(ring) && isClose) {\n      ring.splice(ring.length - 1, 1);\n    }\n\n    return ring;\n  };\n\n  _proto._copyAndCloseRing = function _copyAndCloseRing(ring) {\n    ring = ring.slice(0);\n\n    var isClose = this._checkRing(ring);\n\n    if (isArrayHasData(ring) && !isClose) {\n      ring.push(ring[0].copy());\n      return ring;\n    } else {\n      return ring;\n    }\n  };\n\n  _proto._getPrjShell = function _getPrjShell() {\n    if (this.getJSONType() === JSON_TYPE) {\n      return this._getPrjCoordinates();\n    }\n\n    this._verifyProjection();\n\n    if (this._getProjection() && !this._prjShell) {\n      this._prjShell = this._projectCoords(this.getShell());\n    }\n\n    return this._prjShell;\n  };\n\n  _proto._getPrjHoles = function _getPrjHoles() {\n    var projection = this._getProjection();\n\n    this._verifyProjection();\n\n    if (projection && !this._prjHoles) {\n      this._prjHoles = this._projectCoords(this.getHoles());\n    }\n\n    return this._prjHoles;\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength(measurer) {\n    var rings = this.getCoordinates();\n\n    if (!isArrayHasData(rings)) {\n      return 0;\n    }\n\n    var result = 0;\n\n    for (var i = 0, len = rings.length; i < len; i++) {\n      result += measurer.measureLength(rings[i]);\n    }\n\n    return result;\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea(measurer) {\n    var rings = this.getCoordinates();\n\n    if (!isArrayHasData(rings)) {\n      return 0;\n    }\n\n    var result = measurer.measureArea(rings[0]);\n\n    for (var i = 1, len = rings.length; i < len; i++) {\n      result -= measurer.measureArea(rings[i]);\n    }\n\n    return result;\n  };\n\n  _proto._updateCache = function _updateCache() {\n    _Path.prototype._updateCache.call(this);\n\n    if (this._prjHoles) {\n      this._holes = this._unprojectCoords(this._getPrjHoles());\n    }\n  };\n\n  _proto._clearCache = function _clearCache() {\n    delete this._prjShell;\n    return _Path.prototype._clearCache.call(this);\n  };\n\n  _proto._clearProjection = function _clearProjection() {\n    if (this._prjHoles) {\n      this._prjHoles = null;\n    }\n\n    if (this._prjShell) {\n      this._prjShell = null;\n    }\n\n    _Path.prototype._clearProjection.call(this);\n  };\n\n  return Polygon;\n}(Path);\n\nPolygon.registerJSONType(JSON_TYPE);\n\nfunction CenterMixin(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    var _proto = _class.prototype;\n\n    _proto.getCoordinates = function getCoordinates() {\n      return this._coordinates;\n    };\n\n    _proto.setCoordinates = function setCoordinates(coordinates) {\n      var center = coordinates instanceof Coordinate ? coordinates : new Coordinate(coordinates);\n\n      if (center.equals(this._coordinates)) {\n        return this;\n      }\n\n      this._coordinates = center;\n\n      if (!this.getMap()) {\n        this.onPositionChanged();\n        return this;\n      }\n\n      var projection = this._getProjection();\n\n      this._setPrjCoordinates(projection.project(this._coordinates));\n\n      return this;\n    };\n\n    _proto._getCenter2DPoint = function _getCenter2DPoint(zoom) {\n      var map = this.getMap();\n\n      if (!map) {\n        return null;\n      }\n\n      var z = isNil(zoom) ? map.getZoom() : map.getGLZoom();\n\n      var pcenter = this._getPrjCoordinates();\n\n      if (!pcenter) {\n        return null;\n      }\n\n      return map._prjToPoint(pcenter, z);\n    };\n\n    _proto._getPrjCoordinates = function _getPrjCoordinates() {\n      var projection = this._getProjection();\n\n      this._verifyProjection();\n\n      if (!this._pcenter && projection) {\n        if (this._coordinates) {\n          this._pcenter = projection.project(this._coordinates);\n        }\n      }\n\n      return this._pcenter;\n    };\n\n    _proto._setPrjCoordinates = function _setPrjCoordinates(pcenter) {\n      this._pcenter = pcenter;\n      this.onPositionChanged();\n    };\n\n    _proto._updateCache = function _updateCache() {\n      this._clearCache();\n\n      var projection = this._getProjection();\n\n      if (this._pcenter && projection) {\n        this._coordinates = projection.unproject(this._pcenter);\n      }\n    };\n\n    _proto._clearProjection = function _clearProjection() {\n      this._pcenter = null;\n\n      _Base.prototype._clearProjection.call(this);\n    };\n\n    _proto._computeCenter = function _computeCenter() {\n      return this._coordinates ? this._coordinates.copy() : null;\n    };\n\n    return _class;\n  }(Base);\n}\n\nvar options$4 = {\n  'symbol': {\n    'markerType': 'path',\n    'markerPath': [{\n      'path': 'M8 23l0 0 0 0 0 0 0 0 0 0c-4,-5 -8,-10 -8,-14 0,-5 4,-9 8,-9l0 0 0 0c4,0 8,4 8,9 0,4 -4,9 -8,14z M3,9 a5,5 0,1,0,0,-0.9Z',\n      'fill': '#DE3333'\n    }],\n    'markerPathWidth': 16,\n    'markerPathHeight': 23,\n    'markerWidth': 24,\n    'markerHeight': 34\n  },\n  'hitTestForEvent': false\n};\n\nvar Marker = function (_CenterMixin) {\n  _inheritsLoose(Marker, _CenterMixin);\n\n  function Marker(coordinates, opts) {\n    var _this;\n\n    _this = _CenterMixin.call(this, opts) || this;\n    _this.type = 'Point';\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    return _this;\n  }\n\n  var _proto = Marker.prototype;\n\n  _proto.getOutline = function getOutline() {\n    var painter = this._getPainter();\n\n    if (!painter) {\n      return null;\n    }\n\n    var coord = this.getCoordinates();\n    var extent = painter.getContainerExtent();\n    var anchor = this.getMap().coordToContainerPoint(coord);\n    return new Marker(coord, {\n      'symbol': {\n        'markerType': 'square',\n        'markerWidth': extent.getWidth(),\n        'markerHeight': extent.getHeight(),\n        'markerLineWidth': 1,\n        'markerLineColor': '6b707b',\n        'markerFill': 'rgba(0, 0, 0, 0)',\n        'markerDx': extent.xmin - (anchor.x - extent.getWidth() / 2),\n        'markerDy': extent.ymin - (anchor.y - extent.getHeight() / 2)\n      }\n    });\n  };\n\n  _proto._isVectorMarker = function _isVectorMarker() {\n    var symbol = this._getInternalSymbol();\n\n    if (Array.isArray(symbol)) {\n      return false;\n    }\n\n    return VectorMarkerSymbolizer.test(symbol);\n  };\n\n  _proto._canEdit = function _canEdit() {\n    var symbol = this._getInternalSymbol();\n\n    if (Array.isArray(symbol)) {\n      return false;\n    }\n\n    return VectorMarkerSymbolizer.test(symbol) || VectorPathMarkerSymbolizer.test(symbol) || ImageMarkerSymbolizer.test(symbol);\n  };\n\n  _proto._containsPoint = function _containsPoint(point, t) {\n    var extent = this.getContainerExtent();\n\n    if (t) {\n      extent = extent.expand(t);\n    }\n\n    if (extent.contains(point)) {\n      if (this.options['hitTestForEvent']) {\n        return _CenterMixin.prototype._containsPoint.call(this, point, t);\n      } else {\n        return true;\n      }\n    } else {\n      return false;\n    }\n  };\n\n  _proto._computeExtent = function _computeExtent() {\n    return computeExtent.call(this, 'getCenter');\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent() {\n    return computeExtent.call(this, '_getPrjCoordinates');\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    return 0;\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    return 0;\n  };\n\n  _proto._getSprite = function _getSprite(resources, canvasClass) {\n    if (this._getPainter()) {\n      return this._getPainter().getSprite(resources, canvasClass);\n    }\n\n    return new Painter(this).getSprite(resources, canvasClass);\n  };\n\n  return Marker;\n}(CenterMixin(Geometry));\n\nMarker.mergeOptions(options$4);\nMarker.registerJSONType('Marker');\n\nfunction computeExtent(fn) {\n  var coordinates = this[fn]();\n\n  if (!coordinates) {\n    return null;\n  }\n\n  return new Extent(coordinates, coordinates, this._getProjection());\n}\n\nvar options$5 = {\n  'arrowStyle': null,\n  'arrowPlacement': 'vertex-last'\n};\n\nvar LineString = function (_Path) {\n  _inheritsLoose(LineString, _Path);\n\n  function LineString(coordinates, options) {\n    var _this;\n\n    _this = _Path.call(this, options) || this;\n    _this.type = 'LineString';\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    return _this;\n  }\n\n  var _proto = LineString.prototype;\n\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    if (!coordinates) {\n      this._coordinates = null;\n\n      this._setPrjCoordinates(null);\n\n      return this;\n    }\n\n    this._coordinates = Coordinate.toCoordinates(coordinates);\n\n    if (this.getMap()) {\n      this._setPrjCoordinates(this._projectCoords(this._coordinates));\n    } else {\n      this.onShapeChanged();\n    }\n\n    return this;\n  };\n\n  _proto.getCoordinates = function getCoordinates() {\n    return this._coordinates || [];\n  };\n\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    return this._getCenterInExtent(extent, this.getCoordinates(), clipLine);\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength(measurer) {\n    return measurer.measureLength(this.getCoordinates());\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    return 0;\n  };\n\n  return LineString;\n}(Path);\n\nLineString.mergeOptions(options$5);\nLineString.registerJSONType('LineString');\n\nvar GeometryCollection = function (_Geometry) {\n  _inheritsLoose(GeometryCollection, _Geometry);\n\n  function GeometryCollection(geometries, opts) {\n    var _this;\n\n    _this = _Geometry.call(this, opts) || this;\n    _this.type = 'GeometryCollection';\n\n    _this.setGeometries(geometries);\n\n    return _this;\n  }\n\n  var _proto = GeometryCollection.prototype;\n\n  _proto.setGeometries = function setGeometries(_geometries) {\n    var geometries = this._checkGeometries(_geometries || []);\n\n    var symbol = this._getSymbol();\n\n    var options = this.config();\n\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      geometries[i]._initOptions(options);\n\n      geometries[i]._setParent(this);\n\n      geometries[i]._setEventParent(this);\n\n      if (symbol) {\n        geometries[i].setSymbol(symbol);\n      }\n    }\n\n    this._geometries = geometries;\n\n    if (this.getLayer()) {\n      this._bindGeometriesToLayer();\n\n      this.onShapeChanged();\n    }\n\n    return this;\n  };\n\n  _proto.getGeometries = function getGeometries() {\n    return this._geometries || [];\n  };\n\n  _proto.forEach = function forEach(fn, context) {\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      if (!context) {\n        fn(geometries[i], i);\n      } else {\n        fn.call(context, geometries[i], i);\n      }\n    }\n\n    return this;\n  };\n\n  _proto.filter = function filter(fn, context) {\n    if (!fn) {\n      return new GeometryCollection();\n    }\n\n    var selected = [];\n    var isFn = isFunction(fn);\n    var filter = isFn ? fn : createFilter(fn);\n    this.forEach(function (geometry) {\n      var g = isFn ? geometry : getFilterFeature(geometry);\n\n      if (context ? filter.call(context, g) : filter(g)) {\n        selected.push(geometry);\n      }\n    }, this);\n    return new GeometryCollection(selected);\n  };\n\n  _proto.translate = function translate(offset) {\n    if (!offset) {\n      return this;\n    }\n\n    if (this.isEmpty()) {\n      return this;\n    }\n\n    var args = arguments;\n    this.forEach(function (geometry) {\n      if (geometry && geometry.translate) {\n        geometry.translate.apply(geometry, args);\n      }\n    });\n    return this;\n  };\n\n  _proto.isEmpty = function isEmpty$$1() {\n    return !isArrayHasData(this.getGeometries());\n  };\n\n  _proto.remove = function remove() {\n    this.forEach(function (geometry) {\n      geometry._unbind();\n    });\n    return Geometry.prototype.remove.apply(this, arguments);\n  };\n\n  _proto.show = function show() {\n    this.options['visible'] = true;\n    this.forEach(function (geometry) {\n      geometry.show();\n    });\n    return this;\n  };\n\n  _proto.hide = function hide() {\n    this.options['visible'] = false;\n    this.forEach(function (geometry) {\n      geometry.hide();\n    });\n    return this;\n  };\n\n  _proto.onConfig = function onConfig(config) {\n    this.forEach(function (geometry) {\n      geometry.config(config);\n    });\n  };\n\n  _proto.getSymbol = function getSymbol() {\n    var s = _Geometry.prototype.getSymbol.call(this);\n\n    if (!s) {\n      var symbols = [];\n      var is = false;\n      this.forEach(function (g) {\n        var symbol = g.getSymbol();\n\n        if (symbol && !is) {\n          is = true;\n        }\n\n        symbols.push(g.getSymbol());\n      });\n\n      if (is) {\n        s = {\n          'children': symbols\n        };\n      }\n    }\n\n    return s;\n  };\n\n  _proto.setSymbol = function setSymbol(s) {\n    if (s && s['children']) {\n      this._symbol = null;\n      this.forEach(function (g, i) {\n        g.setSymbol(s['children'][i]);\n      });\n    } else {\n      var symbol = this._prepareSymbol(s);\n\n      this._symbol = symbol;\n      this.forEach(function (g) {\n        g.setSymbol(symbol);\n      });\n    }\n\n    this.onSymbolChanged();\n    return this;\n  };\n\n  _proto._setExternSymbol = function _setExternSymbol(symbol) {\n    symbol = this._prepareSymbol(symbol);\n    this._externSymbol = symbol;\n    this.forEach(function (geometry) {\n      geometry._setExternSymbol(symbol);\n    });\n    this.onSymbolChanged();\n    return this;\n  };\n\n  _proto._bindLayer = function _bindLayer() {\n    _Geometry.prototype._bindLayer.apply(this, arguments);\n\n    this._bindGeometriesToLayer();\n  };\n\n  _proto._bindGeometriesToLayer = function _bindGeometriesToLayer() {\n    var layer = this.getLayer();\n    this.forEach(function (geometry) {\n      geometry._bindLayer(layer);\n    });\n  };\n\n  _proto._checkGeometries = function _checkGeometries(geometries) {\n    var invalidGeoError = 'The geometry added to collection is invalid.';\n\n    if (geometries && !Array.isArray(geometries)) {\n      if (geometries instanceof Geometry) {\n        return [geometries];\n      } else {\n        throw new Error(invalidGeoError);\n      }\n    } else {\n      for (var i = 0, l = geometries.length; i < l; i++) {\n        if (!this._checkGeo(geometries[i])) {\n          throw new Error(invalidGeoError + ' Index: ' + i);\n        }\n      }\n\n      return geometries;\n    }\n  };\n\n  _proto._checkGeo = function _checkGeo(geo) {\n    return geo instanceof Geometry;\n  };\n\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n\n    if (this.isEmpty()) {\n      return;\n    }\n\n    this.forEach(function (geometry) {\n      if (geometry && geometry._updateCache) {\n        geometry._updateCache();\n      }\n    });\n  };\n\n  _proto._removePainter = function _removePainter() {\n    if (this._painter) {\n      this._painter.remove();\n    }\n\n    delete this._painter;\n    this.forEach(function (geometry) {\n      geometry._removePainter();\n    });\n  };\n\n  _proto._computeCenter = function _computeCenter(projection) {\n    if (!projection || this.isEmpty()) {\n      return null;\n    }\n\n    var sumX = 0,\n        sumY = 0,\n        counter = 0;\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      var center = geometries[i]._computeCenter(projection);\n\n      if (center) {\n        sumX += center.x;\n        sumY += center.y;\n        counter++;\n      }\n    }\n\n    if (counter === 0) {\n      return null;\n    }\n\n    return new Coordinate(sumX / counter, sumY / counter);\n  };\n\n  _proto._containsPoint = function _containsPoint(point, t) {\n    if (this.isEmpty()) {\n      return false;\n    }\n\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (geometries[i]._containsPoint(point, t)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto._computeExtent = function _computeExtent(projection) {\n    return computeExtent$1.call(this, projection, '_computeExtent');\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    return computeExtent$1.call(this, projection, '_computePrjExtent');\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength(projection) {\n    if (!projection || this.isEmpty()) {\n      return 0;\n    }\n\n    var geometries = this.getGeometries();\n    var result = 0;\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      result += geometries[i]._computeGeodesicLength(projection);\n    }\n\n    return result;\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea(projection) {\n    if (!projection || this.isEmpty()) {\n      return 0;\n    }\n\n    var geometries = this.getGeometries();\n    var result = 0;\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      result += geometries[i]._computeGeodesicArea(projection);\n    }\n\n    return result;\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var children = [];\n\n    if (!this.isEmpty()) {\n      var geometries = this.getGeometries();\n\n      for (var i = 0, l = geometries.length; i < l; i++) {\n        if (!geometries[i]) {\n          continue;\n        }\n\n        children.push(geometries[i]._exportGeoJSONGeometry());\n      }\n    }\n\n    return {\n      'type': 'GeometryCollection',\n      'geometries': children\n    };\n  };\n\n  _proto._clearProjection = function _clearProjection() {\n    if (this.isEmpty()) {\n      return;\n    }\n\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      geometries[i]._clearProjection();\n    }\n  };\n\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var extent = this.getExtent();\n    var anchors = [new Coordinate(extent.xmin, extent.ymax), new Coordinate(extent.xmax, extent.ymin), new Coordinate(extent.xmin, extent.ymin), new Coordinate(extent.xmax, extent.ymax)];\n    return anchors;\n  };\n\n  _proto._getExternalResources = function _getExternalResources() {\n    if (this.isEmpty()) {\n      return [];\n    }\n\n    var geometries = this.getGeometries(),\n        resources = [];\n    var cache = {};\n    var symbol, res, key;\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      if (!geometries[i]) {\n        continue;\n      }\n\n      symbol = geometries[i]._getInternalSymbol();\n      res = getExternalResources(symbol);\n\n      for (var ii = 0, ll = res.length; ii < ll; ii++) {\n        key = res[ii].join();\n\n        if (!cache[key]) {\n          resources.push(res[ii]);\n          cache[key] = 1;\n        }\n      }\n    }\n\n    return resources;\n  };\n\n  _proto.startEdit = function startEdit(opts) {\n    var _this2 = this;\n\n    if (this.isEmpty()) {\n      return this;\n    }\n\n    if (!opts) {\n      opts = {};\n    }\n\n    if (opts['symbol']) {\n      this._originalSymbol = this.getSymbol();\n      this.setSymbol(opts['symbol']);\n    }\n\n    this._draggbleBeforeEdit = this.options['draggable'];\n    this.config('draggable', false);\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      geometries[i].startEdit(opts);\n    }\n\n    this._editing = true;\n    this.hide();\n    setTimeout(function () {\n      _this2.fire('editstart');\n    }, 1);\n    return this;\n  };\n\n  _proto.endEdit = function endEdit() {\n    if (this.isEmpty()) {\n      return this;\n    }\n\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      geometries[i].endEdit();\n    }\n\n    if (this._originalSymbol) {\n      this.setSymbol(this._originalSymbol);\n      delete this._originalSymbol;\n    }\n\n    this._editing = false;\n    this.show();\n    this.config('draggable', this._draggbleBeforeEdit);\n    this.fire('editend');\n    return this;\n  };\n\n  _proto.isEditing = function isEditing() {\n    if (!this._editing) {\n      return false;\n    }\n\n    return true;\n  };\n\n  return GeometryCollection;\n}(Geometry);\n\nGeometryCollection.registerJSONType('GeometryCollection');\n\nfunction computeExtent$1(projection, fn) {\n  if (this.isEmpty()) {\n    return null;\n  }\n\n  var geometries = this.getGeometries();\n  var result = null;\n\n  for (var i = 0, l = geometries.length; i < l; i++) {\n    var geo = geometries[i];\n\n    if (!geo) {\n      continue;\n    }\n\n    var geoExtent = geo[fn](projection);\n\n    if (geoExtent) {\n      result = geoExtent.combine(result);\n    }\n  }\n\n  return result;\n}\n\nvar MultiGeometry = function (_GeometryCollection) {\n  _inheritsLoose(MultiGeometry, _GeometryCollection);\n\n  function MultiGeometry(geoType, type, data, options) {\n    var _this;\n\n    _this = _GeometryCollection.call(this, null, options) || this;\n    _this.GeometryType = geoType;\n    _this.type = type;\n\n    _this._initData(data);\n\n    return _this;\n  }\n\n  var _proto = MultiGeometry.prototype;\n\n  _proto.getCoordinates = function getCoordinates() {\n    var coordinates = [];\n    var geometries = this.getGeometries();\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      var child = geometries[i];\n      coordinates.push(child.getShell && child.getJSONType() !== 'Polygon' ? [child.getShell()] : child.getCoordinates());\n    }\n\n    return coordinates;\n  };\n\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    coordinates = coordinates || [];\n    var geometries = [];\n\n    for (var i = 0, l = coordinates.length; i < l; i++) {\n      var g = new this.GeometryType(coordinates[i], this.config());\n      geometries.push(g);\n    }\n\n    this.setGeometries(geometries);\n    return this;\n  };\n\n  _proto._initData = function _initData(data) {\n    data = data || [];\n\n    if (data.length) {\n      if (data[0] instanceof this.GeometryType) {\n        this.setGeometries(data);\n      } else {\n        this.setCoordinates(data);\n      }\n    }\n  };\n\n  _proto._checkGeo = function _checkGeo(geo) {\n    return geo instanceof this.GeometryType;\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var points = this.getCoordinates();\n    var coordinates = Coordinate.toNumberArrays(points);\n    return {\n      'type': this.getType(),\n      'coordinates': coordinates\n    };\n  };\n\n  return MultiGeometry;\n}(GeometryCollection);\n\nvar MultiPoint = function (_MultiGeometry) {\n  _inheritsLoose(MultiPoint, _MultiGeometry);\n\n  function MultiPoint(data, opts) {\n    return _MultiGeometry.call(this, Marker, 'MultiPoint', data, opts) || this;\n  }\n\n  var _proto = MultiPoint.prototype;\n\n  _proto.findClosest = function findClosest(coordinate) {\n    if (!coordinate) {\n      return null;\n    }\n\n    var coords = this.getCoordinates();\n    var hit = null;\n    var max = Infinity;\n    coords.forEach(function (c) {\n      var dist = distanceTo(c, coordinate);\n\n      if (dist < max) {\n        hit = c;\n        max = dist;\n      }\n    });\n    return hit;\n  };\n\n  return MultiPoint;\n}(MultiGeometry);\n\nMultiPoint.registerJSONType('MultiPoint');\n\nfunction distanceTo(p0, p1) {\n  var x = p1.x - p0.x,\n      y = p1.y - p0.y;\n  return Math.sqrt(x * x + y * y);\n}\n\nvar MultiPath = function (_MultiGeometry) {\n  _inheritsLoose(MultiPath, _MultiGeometry);\n\n  function MultiPath() {\n    return _MultiGeometry.apply(this, arguments) || this;\n  }\n\n  var _proto = MultiPath.prototype;\n\n  _proto.getCenterInExtent = function getCenterInExtent(extent) {\n    var children = this.getGeometries();\n    var sumx = 0,\n        sumy = 0,\n        counter = 0;\n    children.forEach(function (l) {\n      var c = l.getCenterInExtent(extent);\n\n      if (c) {\n        sumx += c.x * c.count;\n        sumy += c.y * c.count;\n        counter += c.count;\n      }\n    });\n\n    if (counter === 0) {\n      return null;\n    }\n\n    return new Coordinate(sumx, sumy)._multi(1 / counter);\n  };\n\n  return MultiPath;\n}(MultiGeometry);\n\nvar MultiLineString = function (_MultiPath) {\n  _inheritsLoose(MultiLineString, _MultiPath);\n\n  function MultiLineString(data, options) {\n    return _MultiPath.call(this, LineString, 'MultiLineString', data, options) || this;\n  }\n\n  return MultiLineString;\n}(MultiPath);\n\nMultiLineString.registerJSONType('MultiLineString');\n\nvar MultiPolygon = function (_MultiPath) {\n  _inheritsLoose(MultiPolygon, _MultiPath);\n\n  function MultiPolygon(data, opts) {\n    return _MultiPath.call(this, Polygon, 'MultiPolygon', data, opts) || this;\n  }\n\n  return MultiPolygon;\n}(MultiPath);\n\nMultiPolygon.registerJSONType('MultiPolygon');\nvar types$1 = {\n  'Marker': Marker,\n  'LineString': LineString,\n  'Polygon': Polygon,\n  'MultiPoint': MultiPoint,\n  'MultiLineString': MultiLineString,\n  'MultiPolygon': MultiPolygon\n};\nvar GeoJSON = {\n  toGeometry: function toGeometry(geoJSON, foreachFn) {\n    if (isString(geoJSON)) {\n      geoJSON = parseJSON(geoJSON);\n    }\n\n    if (Array.isArray(geoJSON)) {\n      var resultGeos = [];\n\n      for (var i = 0, len = geoJSON.length; i < len; i++) {\n        var geo = GeoJSON._convert(geoJSON[i], foreachFn);\n\n        if (Array.isArray(geo)) {\n          pushIn(resultGeos, geo);\n        } else {\n          resultGeos.push(geo);\n        }\n      }\n\n      return resultGeos;\n    } else {\n      var resultGeo = GeoJSON._convert(geoJSON, foreachFn);\n\n      return resultGeo;\n    }\n  },\n  _convert: function _convert(json, foreachFn) {\n    if (!json || isNil(json['type'])) {\n      return null;\n    }\n\n    var type = json['type'];\n\n    if (type === 'Feature') {\n      var g = json['geometry'];\n\n      var geometry = GeoJSON._convert(g);\n\n      if (!geometry) {\n        return null;\n      }\n\n      geometry.setId(json['id']);\n      geometry.setProperties(json['properties']);\n\n      if (foreachFn) {\n        foreachFn(geometry);\n      }\n\n      return geometry;\n    } else if (type === 'FeatureCollection') {\n      var features = json['features'];\n\n      if (!features) {\n        return null;\n      }\n\n      return GeoJSON.toGeometry(features, foreachFn);\n    } else if (['Point', 'LineString', 'Polygon', 'MultiPoint', 'MultiLineString', 'MultiPolygon'].indexOf(type) >= 0) {\n      var clazz = type === 'Point' ? 'Marker' : type;\n      var result = new types$1[clazz](json['coordinates']);\n\n      if (foreachFn) {\n        foreachFn(result);\n      }\n\n      return result;\n    } else if (type === 'GeometryCollection') {\n      var geometries = json['geometries'];\n\n      if (!isArrayHasData(geometries)) {\n        var _result2 = new GeometryCollection();\n\n        if (foreachFn) {\n          foreachFn(_result2);\n        }\n\n        return _result2;\n      }\n\n      var mGeos = [];\n      var size = geometries.length;\n\n      for (var i = 0; i < size; i++) {\n        mGeos.push(GeoJSON._convert(geometries[i]));\n      }\n\n      var _result = new GeometryCollection(mGeos);\n\n      if (foreachFn) {\n        foreachFn(_result);\n      }\n\n      return _result;\n    }\n\n    return null;\n  }\n};\nvar options$6 = {\n  'numberOfShellPoints': 60\n};\n\nvar Circle = function (_CenterMixin) {\n  _inheritsLoose(Circle, _CenterMixin);\n\n  Circle.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var circle = new Circle(json['coordinates'], json['radius'], json['options']);\n    circle.setProperties(feature['properties']);\n    return circle;\n  };\n\n  function Circle(coordinates, radius, opts) {\n    var _this;\n\n    _this = _CenterMixin.call(this, null, opts) || this;\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    _this._radius = radius;\n    return _this;\n  }\n\n  var _proto = Circle.prototype;\n\n  _proto.getRadius = function getRadius() {\n    return this._radius;\n  };\n\n  _proto.setRadius = function setRadius(radius) {\n    this._radius = radius;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n        center = this.getCoordinates(),\n        numberOfPoints = this.options['numberOfShellPoints'],\n        radius = this.getRadius();\n\n    var shell = [];\n    var rad, dx, dy;\n\n    for (var i = 0, len = numberOfPoints - 1; i < len; i++) {\n      rad = 360 * i / len * Math.PI / 180;\n      dx = radius * Math.cos(rad);\n      dy = radius * Math.sin(rad);\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n\n    shell.push(shell[0]);\n    return shell;\n  };\n\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n\n    if (map.getPitch()) {\n      return _CenterMixin.prototype._containsPoint.call(this, point, tolerance);\n    }\n\n    var center = map._pointToContainerPoint(this._getCenter2DPoint()),\n        size = this.getSize(),\n        t = isNil(tolerance) ? this._hitTestTolerance() : tolerance,\n        se = center.add(size.width / 2, size.height / 2);\n\n    return withInEllipse(point, center, se, t);\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    var minmax = this._getMinMax(projection);\n\n    if (!minmax) {\n      return null;\n    }\n\n    var pcenter = this._getPrjCoordinates();\n\n    var pminmax = minmax.map(function (c) {\n      return projection.project(c);\n    });\n    var leftx = pminmax[0].x - pcenter.x;\n    var rightx = pminmax[1].x - pcenter.x;\n    var topy = pminmax[2].y - pcenter.y;\n    var bottomy = pminmax[3].y - pcenter.y;\n    return new Extent(pcenter.add(leftx, topy), pcenter.add(rightx, bottomy));\n  };\n\n  _proto._computeExtent = function _computeExtent(measurer) {\n    var minmax = this._getMinMax(measurer);\n\n    if (!minmax) {\n      return null;\n    }\n\n    return new Extent(minmax[0].x, minmax[2].y, minmax[1].x, minmax[3].y, this._getProjection());\n  };\n\n  _proto._getMinMax = function _getMinMax(measurer) {\n    if (!measurer || !this._coordinates || isNil(this._radius)) {\n      return null;\n    }\n\n    var radius = this._radius;\n    var p1 = measurer.locate(this._coordinates, -radius, 0),\n        p2 = measurer.locate(this._coordinates, radius, 0),\n        p3 = measurer.locate(this._coordinates, 0, radius),\n        p4 = measurer.locate(this._coordinates, 0, -radius);\n    return [p1, p2, p3, p4];\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n\n    return Math.PI * 2 * this._radius;\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n\n    return Math.PI * Math.pow(this._radius, 2);\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    var center = this.getCenter();\n    var opts = extend({}, options);\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Circle',\n      'coordinates': [center.x, center.y],\n      'radius': this.getRadius()\n    };\n  };\n\n  return Circle;\n}(CenterMixin(Polygon));\n\nCircle.mergeOptions(options$6);\nCircle.registerJSONType('Circle');\nvar options$7 = {\n  'numberOfShellPoints': 80\n};\n\nvar Ellipse = function (_CenterMixin) {\n  _inheritsLoose(Ellipse, _CenterMixin);\n\n  Ellipse.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var ellipse = new Ellipse(json['coordinates'], json['width'], json['height'], json['options']);\n    ellipse.setProperties(feature['properties']);\n    return ellipse;\n  };\n\n  function Ellipse(coordinates, width, height, opts) {\n    var _this;\n\n    _this = _CenterMixin.call(this, null, opts) || this;\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    _this.width = width;\n    _this.height = height;\n    return _this;\n  }\n\n  var _proto = Ellipse.prototype;\n\n  _proto.getWidth = function getWidth() {\n    return this.width;\n  };\n\n  _proto.setWidth = function setWidth(width) {\n    this.width = width;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getHeight = function getHeight() {\n    return this.height;\n  };\n\n  _proto.setHeight = function setHeight(height) {\n    this.height = height;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n        center = this.getCoordinates(),\n        numberOfPoints = this.options['numberOfShellPoints'],\n        width = this.getWidth(),\n        height = this.getHeight();\n\n    var shell = [];\n    var s = Math.pow(width / 2, 2) * Math.pow(height / 2, 2),\n        sx = Math.pow(width / 2, 2),\n        sy = Math.pow(height / 2, 2);\n    var deg, rad, dx, dy;\n\n    for (var i = 0; i < numberOfPoints; i++) {\n      deg = 360 * i / numberOfPoints;\n      rad = deg * Math.PI / 180;\n      dx = Math.sqrt(s / (sx * Math.pow(Math.tan(rad), 2) + sy));\n      dy = Math.sqrt(s / (sy * Math.pow(1 / Math.tan(rad), 2) + sx));\n\n      if (deg > 90 && deg < 270) {\n        dx *= -1;\n      }\n\n      if (deg > 180 && deg < 360) {\n        dy *= -1;\n      }\n\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n\n    return shell;\n  };\n\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n\n    if (map.isTransforming()) {\n      return _CenterMixin.prototype._containsPoint.call(this, point, tolerance);\n    }\n\n    var projection = map.getProjection();\n\n    var t = isNil(tolerance) ? this._hitTestTolerance() : tolerance,\n        pps = projection.projectCoords([this._coordinates, map.locate(this._coordinates, this.getWidth() / 2, this.getHeight() / 2)]),\n        p0 = map._prjToContainerPoint(pps[0]),\n        p1 = map._prjToContainerPoint(pps[1]);\n\n    return withInEllipse(point, p0, p1, t);\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent() {\n    return Circle.prototype._computePrjExtent.apply(this, arguments);\n  };\n\n  _proto._computeExtent = function _computeExtent() {\n    return Circle.prototype._computeExtent.apply(this, arguments);\n  };\n\n  _proto._getMinMax = function _getMinMax(measurer) {\n    if (!measurer || !this._coordinates || isNil(this.width) || isNil(this.height)) {\n      return null;\n    }\n\n    var width = this.getWidth(),\n        height = this.getHeight();\n    var p1 = measurer.locate(this._coordinates, -width / 2, 0),\n        p2 = measurer.locate(this._coordinates, width / 2, 0),\n        p3 = measurer.locate(this._coordinates, 0, -height / 2),\n        p4 = measurer.locate(this._coordinates, 0, height / 2);\n    return [p1, p2, p3, p4];\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return 0;\n    }\n\n    var longer = this.width > this.height ? this.width : this.height;\n    return 2 * Math.PI * longer / 2 - 4 * Math.abs(this.width - this.height);\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this.width) || isNil(this.height)) {\n      return 0;\n    }\n\n    return Math.PI * this.width * this.height / 4;\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var center = this.getCenter();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Ellipse',\n      'coordinates': [center.x, center.y],\n      'width': this.getWidth(),\n      'height': this.getHeight()\n    };\n  };\n\n  return Ellipse;\n}(CenterMixin(Polygon));\n\nEllipse.mergeOptions(options$7);\nEllipse.registerJSONType('Ellipse');\n\nvar Rectangle = function (_Polygon) {\n  _inheritsLoose(Rectangle, _Polygon);\n\n  Rectangle.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var rect = new Rectangle(json['coordinates'], json['width'], json['height'], json['options']);\n    rect.setProperties(feature['properties']);\n    return rect;\n  };\n\n  function Rectangle(coordinates, width, height, opts) {\n    var _this;\n\n    _this = _Polygon.call(this, null, opts) || this;\n\n    if (coordinates) {\n      _this.setCoordinates(coordinates);\n    }\n\n    _this._width = width;\n    _this._height = height;\n    return _this;\n  }\n\n  var _proto = Rectangle.prototype;\n\n  _proto.getCoordinates = function getCoordinates() {\n    return this._coordinates;\n  };\n\n  _proto.setCoordinates = function setCoordinates(nw) {\n    this._coordinates = nw instanceof Coordinate ? nw : new Coordinate(nw);\n\n    if (!this._coordinates || !this.getMap()) {\n      this.onPositionChanged();\n      return this;\n    }\n\n    var projection = this._getProjection();\n\n    this._setPrjCoordinates(projection.project(this._coordinates));\n\n    return this;\n  };\n\n  _proto.getWidth = function getWidth() {\n    return this._width;\n  };\n\n  _proto.setWidth = function setWidth(width) {\n    this._width = width;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getHeight = function getHeight() {\n    return this._height;\n  };\n\n  _proto.setHeight = function setHeight(height) {\n    this._height = height;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer();\n\n    var nw = this._coordinates;\n    var map = this.getMap();\n    var sx = 1,\n        sy = -1;\n\n    if (map) {\n      var fExt = map.getFullExtent();\n\n      if (fExt['left'] > fExt['right']) {\n        sx = -1;\n      }\n\n      if (fExt['bottom'] > fExt['top']) {\n        sy = 1;\n      }\n    }\n\n    var points = [];\n    points.push(nw);\n    points.push(measurer.locate(nw, sx * this._width, 0));\n    points.push(measurer.locate(nw, sx * this._width, sy * this._height));\n    points.push(measurer.locate(nw, 0, sy * this._height));\n    points.push(nw);\n    return points;\n  };\n\n  _proto.getHoles = function getHoles() {\n    return [];\n  };\n\n  _proto.animateShow = function animateShow() {\n    return this.show();\n  };\n\n  _proto._getPrjCoordinates = function _getPrjCoordinates() {\n    var projection = this._getProjection();\n\n    this._verifyProjection();\n\n    if (!this._pnw && projection) {\n      if (this._coordinates) {\n        this._pnw = projection.project(this._coordinates);\n      }\n    }\n\n    return this._pnw;\n  };\n\n  _proto._setPrjCoordinates = function _setPrjCoordinates(pnw) {\n    this._pnw = pnw;\n    this.onPositionChanged();\n  };\n\n  _proto._getPrjShell = function _getPrjShell() {\n    var shell = _Polygon.prototype._getPrjShell.call(this);\n\n    var projection = this._getProjection();\n\n    if (!projection.isSphere()) {\n      return shell;\n    }\n\n    var sphereExtent = projection.getSphereExtent(),\n        sx = sphereExtent.sx,\n        sy = sphereExtent.sy;\n\n    var circum = this._getProjection().getCircum();\n\n    var nw = shell[0];\n\n    for (var i = 1, l = shell.length; i < l; i++) {\n      var p = shell[i];\n      var dx = 0,\n          dy = 0;\n\n      if (sx * (nw.x - p.x) > 0) {\n        dx = circum.x * sx;\n      }\n\n      if (sy * (nw.y - p.y) < 0) {\n        dy = circum.y * sy;\n      }\n\n      shell[i]._add(dx, dy);\n    }\n\n    return shell;\n  };\n\n  _proto._updateCache = function _updateCache() {\n    this._clearCache();\n\n    var projection = this._getProjection();\n\n    if (this._pnw && projection) {\n      this._coordinates = projection.unproject(this._pnw);\n    }\n  };\n\n  _proto._clearProjection = function _clearProjection() {\n    this._pnw = null;\n\n    _Polygon.prototype._clearProjection.call(this);\n  };\n\n  _proto._computeCenter = function _computeCenter(measurer) {\n    return measurer.locate(this._coordinates, this._width / 2, -this._height / 2);\n  };\n\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n\n    if (map.isTransforming()) {\n      return _Polygon.prototype._containsPoint.call(this, point, tolerance);\n    }\n\n    var t = isNil(tolerance) ? this._hitTestTolerance() : tolerance,\n        r = map._getResolution() * t;\n\n    var extent = this._getPrjExtent().expand(r);\n\n    var p = map._containerPointToPrj(point);\n\n    return extent.contains(p);\n  };\n\n  _proto._computePrjExtent = function _computePrjExtent(projection) {\n    var se = this._getSouthEast(projection);\n\n    if (!se) {\n      return null;\n    }\n\n    var prjs = projection.projectCoords([new Coordinate(this._coordinates.x, se.y), new Coordinate(se.x, this._coordinates.y)]);\n    return new Extent(prjs[0], prjs[1]);\n  };\n\n  _proto._computeExtent = function _computeExtent(measurer) {\n    var se = this._getSouthEast(measurer);\n\n    if (!se) {\n      return null;\n    }\n\n    return new Extent(this._coordinates, se, this._getProjection());\n  };\n\n  _proto._getSouthEast = function _getSouthEast(measurer) {\n    if (!measurer || !this._coordinates || isNil(this._width) || isNil(this._height)) {\n      return null;\n    }\n\n    var width = this.getWidth(),\n        height = this.getHeight();\n    var w = width,\n        h = -height;\n\n    if (measurer.fullExtent) {\n      var fullExtent = measurer.fullExtent,\n          sx = fullExtent.right > fullExtent.left ? 1 : -1,\n          sy = fullExtent.top > fullExtent.bottom ? 1 : -1;\n      w *= sx;\n      h *= sy;\n    }\n\n    var se = measurer.locate(this._coordinates, w, h);\n    return se;\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._width) || isNil(this._height)) {\n      return 0;\n    }\n\n    return 2 * (this._width + this._height);\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._width) || isNil(this._height)) {\n      return 0;\n    }\n\n    return this._width * this._height;\n  };\n\n  _proto._exportGeoJSONGeometry = function _exportGeoJSONGeometry() {\n    var coordinates = Coordinate.toNumberArrays([this.getShell()]);\n    return {\n      'type': 'Polygon',\n      'coordinates': coordinates\n    };\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var nw = this.getCoordinates();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Rectangle',\n      'coordinates': [nw.x, nw.y],\n      'width': this.getWidth(),\n      'height': this.getHeight()\n    };\n  };\n\n  return Rectangle;\n}(Polygon);\n\nRectangle.registerJSONType('Rectangle');\nvar options$8 = {\n  'numberOfShellPoints': 60\n};\n\nvar Sector = function (_Circle) {\n  _inheritsLoose(Sector, _Circle);\n\n  Sector.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var sector = new Sector(json['coordinates'], json['radius'], json['startAngle'], json['endAngle'], json['options']);\n    sector.setProperties(feature['properties']);\n    return sector;\n  };\n\n  function Sector(coordinates, radius, startAngle, endAngle, opts) {\n    var _this;\n\n    _this = _Circle.call(this, coordinates, radius, opts) || this;\n    _this.startAngle = startAngle;\n    _this.endAngle = endAngle;\n    return _this;\n  }\n\n  var _proto = Sector.prototype;\n\n  _proto.getStartAngle = function getStartAngle() {\n    return this.startAngle;\n  };\n\n  _proto.setStartAngle = function setStartAngle(startAngle) {\n    this.startAngle = startAngle;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getEndAngle = function getEndAngle() {\n    return this.endAngle;\n  };\n\n  _proto.setEndAngle = function setEndAngle(endAngle) {\n    this.endAngle = endAngle;\n    this.onShapeChanged();\n    return this;\n  };\n\n  _proto.getShell = function getShell() {\n    var measurer = this._getMeasurer(),\n        center = this.getCoordinates(),\n        numberOfPoints = this.options['numberOfShellPoints'] - 2,\n        radius = this.getRadius(),\n        shell = [center.copy()],\n        startAngle = this.getStartAngle(),\n        angle = this.getEndAngle() - startAngle;\n\n    var rad, dx, dy;\n\n    for (var i = 0; i < numberOfPoints; i++) {\n      rad = (angle * i / (numberOfPoints - 1) + startAngle) * Math.PI / 180;\n      dx = radius * Math.cos(rad);\n      dy = radius * Math.sin(rad);\n      var vertex = measurer.locate(center, dx, dy);\n      shell.push(vertex);\n    }\n\n    shell.push(center.copy());\n    return shell;\n  };\n\n  _proto._containsPoint = function _containsPoint(point, tolerance) {\n    var map = this.getMap();\n\n    if (map.isTransforming()) {\n      return _Circle.prototype._containsPoint.call(this, point, tolerance);\n    }\n\n    var center = map._pointToContainerPoint(this._getCenter2DPoint()),\n        t = isNil(tolerance) ? this._hitTestTolerance() : tolerance,\n        size = this.getSize(),\n        pc = center,\n        pp = point,\n        x = pp.x - pc.x,\n        y = pc.y - pp.y,\n        atan2 = Math.atan2(y, x),\n        angle = atan2 < 0 ? (atan2 + 2 * Math.PI) * 360 / (2 * Math.PI) : atan2 * 360 / (2 * Math.PI);\n\n    var sAngle = this.startAngle % 360,\n        eAngle = this.endAngle % 360;\n    var between = false;\n\n    if (sAngle > eAngle) {\n      between = !(angle > eAngle && angle < sAngle);\n    } else {\n      between = angle >= sAngle && angle <= eAngle;\n    }\n\n    return pp.distanceTo(pc) <= size.width / 2 + t && between;\n  };\n\n  _proto._computeGeodesicLength = function _computeGeodesicLength() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n\n    return Math.PI * 2 * this._radius * Math.abs(this.startAngle - this.endAngle) / 360 + 2 * this._radius;\n  };\n\n  _proto._computeGeodesicArea = function _computeGeodesicArea() {\n    if (isNil(this._radius)) {\n      return 0;\n    }\n\n    return Math.PI * Math.pow(this._radius, 2) * Math.abs(this.startAngle - this.endAngle) / 360;\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    var opts = extend({}, options);\n    var center = this.getCenter();\n    opts.geometry = false;\n    var feature = this.toGeoJSON(opts);\n    feature['geometry'] = {\n      'type': 'Polygon'\n    };\n    return {\n      'feature': feature,\n      'subType': 'Sector',\n      'coordinates': [center.x, center.y],\n      'radius': this.getRadius(),\n      'startAngle': this.getStartAngle(),\n      'endAngle': this.getEndAngle()\n    };\n  };\n\n  return Sector;\n}(Circle);\n\nSector.mergeOptions(options$8);\nSector.registerJSONType('Sector');\nvar options$9 = {\n  'enableSimplify': false,\n  'enableClip': false\n};\n\nvar Curve = function (_LineString) {\n  _inheritsLoose(Curve, _LineString);\n\n  function Curve() {\n    return _LineString.apply(this, arguments) || this;\n  }\n\n  var _proto = Curve.prototype;\n\n  _proto._arc = function _arc(ctx, points, lineOpacity) {\n    var degree = this.options['arcDegree'] * Math.PI / 180;\n\n    for (var i = 1, l = points.length; i < l; i++) {\n      var c = Canvas._arcBetween(ctx, points[i - 1], points[i], degree);\n\n      var ctrlPoint = [points[i - 1].x + points[i].x - c[0], points[i - 1].y + points[i].y - c[1]];\n      points[i - 1].nextCtrlPoint = ctrlPoint;\n      points[i].prevCtrlPoint = ctrlPoint;\n\n      Canvas._stroke(ctx, lineOpacity);\n    }\n  };\n\n  _proto._quadraticCurve = function _quadraticCurve(ctx, points) {\n    if (points.length <= 2) {\n      Canvas._path(ctx, points);\n\n      return;\n    }\n\n    var i, l;\n\n    for (i = 2, l = points.length; i < l; i += 2) {\n      ctx.quadraticCurveTo(points[i - 1].x, points[i - 1].y, points[i].x, points[i].y);\n    }\n\n    i -= 1;\n\n    if (i < l) {\n      for (; i < l; i++) {\n        ctx.lineTo(points[i].x, points[i].y);\n      }\n    }\n  };\n\n  _proto._bezierCurve = function _bezierCurve(ctx, points) {\n    if (points.length <= 3) {\n      Canvas._path(ctx, points);\n\n      return;\n    }\n\n    var i, l;\n\n    for (i = 1, l = points.length; i + 2 < l; i += 3) {\n      ctx.bezierCurveTo(points[i].x, points[i].y, points[i + 1].x, points[i + 1].y, points[i + 2].x, points[i + 2].y);\n    }\n\n    if (i < l) {\n      for (; i < l; i++) {\n        ctx.lineTo(points[i].x, points[i].y);\n      }\n    }\n  };\n\n  _proto._getCurveArrowPoints = function _getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, step) {\n    var l = segments.length;\n    var i;\n\n    for (i = step; i < l; i += step) {\n      var arrow = this._getArrowShape(segments[i - 1], segments[i], lineWidth, arrowStyle, tolerance);\n\n      if (arrow) {\n        arrows.push(arrow);\n      }\n    }\n\n    i -= step;\n\n    if (i < l - 1) {\n      for (i += 1; i < l; i++) {\n        var _arrow = this._getArrowShape(segments[i - 1], segments[i], lineWidth, arrowStyle, tolerance);\n\n        if (_arrow) {\n          arrows.push(_arrow);\n        }\n      }\n    }\n  };\n\n  return Curve;\n}(LineString);\n\nCurve.mergeOptions(options$9);\nvar options$a = {\n  'arcDegree': 90\n};\n\nvar ArcCurve = function (_Curve) {\n  _inheritsLoose(ArcCurve, _Curve);\n\n  function ArcCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n\n  var _proto = ArcCurve.prototype;\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'ArcCurve'\n    };\n  };\n\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n\n    this._arc(ctx, points, lineOpacity);\n\n    Canvas._stroke(ctx, lineOpacity);\n\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n\n  ArcCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var arc = new ArcCurve(feature['geometry']['coordinates'], json['options']);\n    arc.setProperties(feature['properties']);\n    return arc;\n  };\n\n  return ArcCurve;\n}(Curve);\n\nArcCurve.registerJSONType('ArcCurve');\nArcCurve.mergeOptions(options$a);\n\nvar CubicBezierCurve = function (_Curve) {\n  _inheritsLoose(CubicBezierCurve, _Curve);\n\n  function CubicBezierCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n\n  CubicBezierCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var curve = new CubicBezierCurve(feature['geometry']['coordinates'], json['options']);\n    curve.setProperties(feature['properties']);\n    return curve;\n  };\n\n  var _proto = CubicBezierCurve.prototype;\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'CubicBezierCurve'\n    };\n  };\n\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n\n    this._bezierCurve(ctx, points);\n\n    Canvas._stroke(ctx, lineOpacity);\n\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n\n  _proto._getArrowPoints = function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    return this._getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, 3);\n  };\n\n  return CubicBezierCurve;\n}(Curve);\n\nCubicBezierCurve.registerJSONType('CubicBezierCurve');\n\nvar QuadBezierCurve = function (_Curve) {\n  _inheritsLoose(QuadBezierCurve, _Curve);\n\n  function QuadBezierCurve() {\n    return _Curve.apply(this, arguments) || this;\n  }\n\n  QuadBezierCurve.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var curve = new QuadBezierCurve(feature['geometry']['coordinates'], json['options']);\n    curve.setProperties(feature['properties']);\n    return curve;\n  };\n\n  var _proto = QuadBezierCurve.prototype;\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'QuadBezierCurve'\n    };\n  };\n\n  _proto._paintOn = function _paintOn(ctx, points, lineOpacity) {\n    ctx.beginPath();\n    ctx.moveTo(points[0].x, points[0].y);\n\n    this._quadraticCurve(ctx, points, lineOpacity);\n\n    Canvas._stroke(ctx, lineOpacity);\n\n    this._paintArrow(ctx, points, lineOpacity);\n  };\n\n  _proto._getArrowPoints = function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    return this._getCurveArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance, 2);\n  };\n\n  return QuadBezierCurve;\n}(Curve);\n\nQuadBezierCurve.registerJSONType('QuadBezierCurve');\nvar defaultSymbol$1 = {\n  'textFaceName': 'monospace',\n  'textSize': 12,\n  'textLineSpacing': 8,\n  'textWrapCharacter': '\\n',\n  'textHorizontalAlignment': 'middle',\n  'textVerticalAlignment': 'middle'\n};\nvar defaultBoxSymbol = {\n  'markerType': 'square',\n  'markerLineColor': '#000',\n  'markerLineWidth': 2,\n  'markerLineOpacity': 1,\n  'markerFill': '#fff',\n  'markerOpacity': 1\n};\n\nvar TextMarker = function (_Marker) {\n  _inheritsLoose(TextMarker, _Marker);\n\n  function TextMarker() {\n    return _Marker.apply(this, arguments) || this;\n  }\n\n  var _proto = TextMarker.prototype;\n\n  _proto.getContent = function getContent() {\n    return this._content;\n  };\n\n  _proto.setContent = function setContent(content) {\n    var old = this._content;\n    this._content = escapeSpecialChars(content);\n\n    this._refresh();\n\n    this._fireEvent('contentchange', {\n      'old': old,\n      'new': content\n    });\n\n    return this;\n  };\n\n  _proto.onAdd = function onAdd() {\n    this._refresh();\n  };\n\n  _proto.toJSON = function toJSON() {\n    var json = _Marker.prototype.toJSON.call(this);\n\n    delete json['symbol'];\n    return json;\n  };\n\n  _proto.setSymbol = function setSymbol(symbol) {\n    if (this._refreshing || !symbol) {\n      return _Marker.prototype.setSymbol.call(this, symbol);\n    }\n\n    var s = this._parseSymbol(symbol);\n\n    if (this.setTextStyle) {\n      var style = this.getTextStyle() || {};\n      style.symbol = s[0];\n      this.setTextStyle(style);\n    } else if (this.setTextSymbol) {\n      this.setTextSymbol(s[0]);\n    }\n\n    if (this.setBoxStyle) {\n      var _style = this.getBoxStyle() || {};\n\n      _style.symbol = s[1];\n      this.setBoxStyle(_style);\n    } else if (this.setBoxSymbol) {\n      this.setBoxSymbol(s[1]);\n    }\n\n    return this;\n  };\n\n  _proto._parseSymbol = function _parseSymbol(symbol) {\n    var t = {};\n    var b = {};\n\n    for (var p in symbol) {\n      if (hasOwn(symbol, p)) {\n        if (p.indexOf('text') === 0) {\n          t[p] = symbol[p];\n        } else {\n          b[p] = symbol[p];\n        }\n      }\n    }\n\n    return [t, b];\n  };\n\n  _proto._getTextSize = function _getTextSize(symbol) {\n    return splitTextToRow(this._content, symbol)['size'];\n  };\n\n  _proto._getInternalSymbol = function _getInternalSymbol() {\n    return this._symbol;\n  };\n\n  _proto._getDefaultTextSymbol = function _getDefaultTextSymbol() {\n    return extend({}, defaultSymbol$1);\n  };\n\n  _proto._getDefaultBoxSymbol = function _getDefaultBoxSymbol() {\n    return extend({}, defaultBoxSymbol);\n  };\n\n  _proto._getDefaultPadding = function _getDefaultPadding() {\n    return [12, 8];\n  };\n\n  return TextMarker;\n}(Marker);\n\nvar options$b = {\n  'textStyle': {\n    'wrap': true,\n    'padding': [12, 8],\n    'verticalAlignment': 'middle',\n    'horizontalAlignment': 'middle'\n  },\n  'boxSymbol': null\n};\n\nvar TextBox = function (_TextMarker) {\n  _inheritsLoose(TextBox, _TextMarker);\n\n  function TextBox(content, coordinates, width, height, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _TextMarker.call(this, coordinates, options) || this;\n    _this._content = escapeSpecialChars(content);\n    _this._width = isNil(width) ? 100 : width;\n    _this._height = isNil(height) ? 40 : height;\n\n    if (options.boxSymbol) {\n      _this.setBoxSymbol(options.boxSymbol);\n    }\n\n    if (options.textStyle) {\n      _this.setTextStyle(options.textStyle);\n    }\n\n    _this._refresh();\n\n    return _this;\n  }\n\n  var _proto = TextBox.prototype;\n\n  _proto.getWidth = function getWidth() {\n    return this._width;\n  };\n\n  _proto.setWidth = function setWidth(width) {\n    this._width = width;\n\n    this._refresh();\n\n    return this;\n  };\n\n  _proto.getHeight = function getHeight() {\n    return this._height;\n  };\n\n  _proto.setHeight = function setHeight(height) {\n    this._height = height;\n\n    this._refresh();\n\n    return this;\n  };\n\n  _proto.getBoxSymbol = function getBoxSymbol() {\n    return extend({}, this.options.boxSymbol);\n  };\n\n  _proto.setBoxSymbol = function setBoxSymbol(symbol) {\n    this.options.boxSymbol = symbol ? extend({}, symbol) : symbol;\n\n    if (this.getSymbol()) {\n      this._refresh();\n    }\n\n    return this;\n  };\n\n  _proto.getTextStyle = function getTextStyle() {\n    if (!this.options.textStyle) {\n      return null;\n    }\n\n    return extend({}, this.options.textStyle);\n  };\n\n  _proto.setTextStyle = function setTextStyle(style) {\n    this.options.textStyle = style ? extend({}, style) : style;\n\n    if (this.getSymbol()) {\n      this._refresh();\n    }\n\n    return this;\n  };\n\n  TextBox.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var textBox = new TextBox(json['content'], feature['geometry']['coordinates'], json['width'], json['height'], json['options']);\n    textBox.setProperties(feature['properties']);\n    textBox.setId(feature['id']);\n\n    if (json['symbol']) {\n      textBox.setSymbol(json['symbol']);\n    }\n\n    return textBox;\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'width': this.getWidth(),\n      'height': this.getHeight(),\n      'subType': 'TextBox',\n      'content': this._content\n    };\n  };\n\n  _proto._refresh = function _refresh() {\n    var textStyle = this.getTextStyle() || {},\n        padding = textStyle['padding'] || [12, 8],\n        maxWidth = this._width - 2 * padding[0],\n        maxHeight = this._height - 2 * padding[1];\n    var symbol = extend({}, textStyle.symbol || this._getDefaultTextSymbol(), this.options.boxSymbol || this._getDefaultBoxSymbol(), {\n      'textName': this._content,\n      'markerWidth': this._width,\n      'markerHeight': this._height,\n      'textHorizontalAlignment': 'middle',\n      'textVerticalAlignment': 'middle',\n      'textMaxWidth': maxWidth,\n      'textMaxHeight': maxHeight\n    });\n\n    if (textStyle['wrap'] && !symbol['textWrapWidth']) {\n      symbol['textWrapWidth'] = maxWidth;\n    }\n\n    var hAlign = textStyle['horizontalAlignment'];\n    symbol['textDx'] = symbol['markerDx'] || 0;\n    var offsetX = symbol['markerWidth'] / 2 - padding[0];\n\n    if (hAlign === 'left') {\n      symbol['textHorizontalAlignment'] = 'right';\n      symbol['textDx'] = symbol['textDx'] - offsetX;\n    } else if (hAlign === 'right') {\n      symbol['textHorizontalAlignment'] = 'left';\n      symbol['textDx'] = symbol['textDx'] + offsetX;\n    }\n\n    var vAlign = textStyle['verticalAlignment'];\n    symbol['textDy'] = symbol['markerDy'] || 0;\n    var offsetY = symbol['markerHeight'] / 2 - padding[1];\n\n    if (vAlign === 'top') {\n      symbol['textVerticalAlignment'] = 'bottom';\n      symbol['textDy'] -= offsetY;\n    } else if (vAlign === 'bottom') {\n      symbol['textVerticalAlignment'] = 'top';\n      symbol['textDy'] += offsetY;\n    }\n\n    this._refreshing = true;\n    this.updateSymbol(symbol);\n    delete this._refreshing;\n  };\n\n  return TextBox;\n}(TextMarker);\n\nTextBox.mergeOptions(options$b);\nTextBox.registerJSONType('TextBox');\nvar options$c = {\n  'boxStyle': null,\n  textSymbol: null\n};\n\nvar Label = function (_TextMarker) {\n  _inheritsLoose(Label, _TextMarker);\n\n  function Label(content, coordinates, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _TextMarker.call(this, coordinates, options) || this;\n\n    if (options.textSymbol) {\n      _this.setTextSymbol(options.textSymbol);\n    }\n\n    if (options.boxStyle) {\n      _this.setBoxStyle(options.boxStyle);\n    }\n\n    _this._content = escapeSpecialChars(content);\n\n    _this._refresh();\n\n    return _this;\n  }\n\n  var _proto = Label.prototype;\n\n  _proto.getBoxStyle = function getBoxStyle() {\n    if (!this.options.boxStyle) {\n      return null;\n    }\n\n    return extend({}, this.options.boxStyle);\n  };\n\n  _proto.setBoxStyle = function setBoxStyle(style) {\n    this.options.boxStyle = style ? extend({}, style) : style;\n\n    this._refresh();\n\n    return this;\n  };\n\n  _proto.getTextSymbol = function getTextSymbol() {\n    return extend({}, this._getDefaultTextSymbol(), this.options.textSymbol);\n  };\n\n  _proto.setTextSymbol = function setTextSymbol(symbol) {\n    this.options.textSymbol = symbol ? extend({}, symbol) : symbol;\n\n    this._refresh();\n\n    return this;\n  };\n\n  Label.fromJSON = function fromJSON(json) {\n    var feature = json['feature'];\n    var label = new Label(json['content'], feature['geometry']['coordinates'], json['options']);\n    label.setProperties(feature['properties']);\n    label.setId(feature['id']);\n\n    if (json['symbol']) {\n      label.setSymbol(json['symbol']);\n    }\n\n    return label;\n  };\n\n  _proto._canEdit = function _canEdit() {\n    return false;\n  };\n\n  _proto._toJSON = function _toJSON(options) {\n    return {\n      'feature': this.toGeoJSON(options),\n      'subType': 'Label',\n      'content': this._content\n    };\n  };\n\n  _proto._refresh = function _refresh() {\n    var symbol = extend({}, this.getTextSymbol(), {\n      'textName': this._content\n    });\n    var boxStyle = this.getBoxStyle();\n\n    if (boxStyle) {\n      extend(symbol, boxStyle.symbol);\n\n      var sizes = this._getBoxSize(symbol),\n          textSize = sizes[1],\n          padding = boxStyle['padding'] || this._getDefaultPadding();\n\n      var boxSize = sizes[0];\n      symbol['markerWidth'] = boxSize['width'];\n      symbol['markerHeight'] = boxSize['height'];\n\n      var dx = symbol['textDx'] || 0,\n          dy = symbol['textDy'] || 0,\n          textAlignPoint = getAlignPoint(textSize, symbol['textHorizontalAlignment'], symbol['textVerticalAlignment'])._add(dx, dy);\n\n      var hAlign = boxStyle['horizontalAlignment'] || 'middle';\n      symbol['markerDx'] = textAlignPoint.x;\n\n      if (hAlign === 'left') {\n        symbol['markerDx'] += symbol['markerWidth'] / 2 - padding[0];\n      } else if (hAlign === 'right') {\n        symbol['markerDx'] -= symbol['markerWidth'] / 2 - textSize['width'] - padding[0];\n      } else {\n        symbol['markerDx'] += textSize['width'] / 2;\n      }\n\n      var vAlign = boxStyle['verticalAlignment'] || 'middle';\n      symbol['markerDy'] = textAlignPoint.y;\n\n      if (vAlign === 'top') {\n        symbol['markerDy'] += symbol['markerHeight'] / 2 - padding[1];\n      } else if (vAlign === 'bottom') {\n        symbol['markerDy'] -= symbol['markerHeight'] / 2 - textSize['height'] - padding[1];\n      } else {\n        symbol['markerDy'] += textSize['height'] / 2;\n      }\n    }\n\n    this._refreshing = true;\n    this.updateSymbol(symbol);\n    delete this._refreshing;\n  };\n\n  _proto._getBoxSize = function _getBoxSize(symbol) {\n    if (!symbol['markerType']) {\n      symbol['markerType'] = 'square';\n    }\n\n    var boxStyle = this.getBoxStyle();\n\n    var size = this._getTextSize(symbol);\n\n    var width, height;\n\n    var padding = boxStyle['padding'] || this._getDefaultPadding();\n\n    width = size['width'] + padding[0] * 2;\n    height = size['height'] + padding[1] * 2;\n\n    if (boxStyle['minWidth']) {\n      if (!width || width < boxStyle['minWidth']) {\n        width = boxStyle['minWidth'];\n      }\n    }\n\n    if (boxStyle['minHeight']) {\n      if (!height || height < boxStyle['minHeight']) {\n        height = boxStyle['minHeight'];\n      }\n    }\n\n    return [new Size(width, height), size];\n  };\n\n  return Label;\n}(TextMarker);\n\nLabel.mergeOptions(options$c);\nLabel.registerJSONType('Label');\n\nvar Connectable = function Connectable(Base) {\n  return function (_Base) {\n    _inheritsLoose(_class, _Base);\n\n    function _class() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    _class._hasConnectors = function _hasConnectors(geometry) {\n      return !isNil(geometry.__connectors) && geometry.__connectors.length > 0;\n    };\n\n    _class._getConnectors = function _getConnectors(geometry) {\n      return geometry.__connectors;\n    };\n\n    var _proto = _class.prototype;\n\n    _proto.getConnectSource = function getConnectSource() {\n      return this._connSource;\n    };\n\n    _proto.setConnectSource = function setConnectSource(src) {\n      var target = this._connTarget;\n      this.onRemove();\n      this._connSource = src;\n      this._connTarget = target;\n      this.onAdd();\n      return this;\n    };\n\n    _proto.getConnectTarget = function getConnectTarget() {\n      return this._connTarget;\n    };\n\n    _proto.setConnectTarget = function setConnectTarget(target) {\n      var src = this._connSource;\n      this.onRemove();\n      this._connSource = src;\n      this._connTarget = target;\n\n      this._updateCoordinates();\n\n      this._registerEvents();\n\n      return this;\n    };\n\n    _proto._updateCoordinates = function _updateCoordinates() {\n      var map = this.getMap();\n\n      if (!map && this._connSource) {\n        map = this._connSource.getMap();\n      }\n\n      if (!map && this._connTarget) {\n        map = this._connTarget.getMap();\n      }\n\n      if (!map) {\n        return;\n      }\n\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n\n      var srcPoints = this._connSource._getConnectPoints();\n\n      var targetPoints = this._connTarget._getConnectPoints();\n\n      var minDist = 0;\n      var oldCoordinates = this.getCoordinates();\n      var c1, c2;\n\n      for (var i = 0, len = srcPoints.length; i < len; i++) {\n        var p1 = srcPoints[i];\n\n        for (var j = 0, length = targetPoints.length; j < length; j++) {\n          var p2 = targetPoints[j];\n          var dist = map.computeLength(p1, p2);\n\n          if (i === 0 && j === 0) {\n            c1 = p1;\n            c2 = p2;\n            minDist = dist;\n          } else if (dist < minDist) {\n            c1 = p1;\n            c2 = p2;\n          }\n        }\n      }\n\n      if (!isArrayHasData(oldCoordinates) || !oldCoordinates[0].equals(c1) || !oldCoordinates[1].equals(c2)) {\n        this.setCoordinates([c1, c2]);\n      }\n    };\n\n    _proto.onAdd = function onAdd() {\n      this._registerEvents();\n\n      this._updateCoordinates();\n    };\n\n    _proto.onRemove = function onRemove() {\n      if (this._connSource) {\n        if (this._connSource.__connectors) {\n          removeFromArray(this, this._connSource.__connectors);\n        }\n\n        this._connSource.off('dragging positionchange', this._updateCoordinates, this).off('remove', this.onRemove, this);\n\n        this._connSource.off('dragstart mousedown mouseover', this._showConnect, this);\n\n        this._connSource.off('dragend mouseup mouseout', this.hide, this);\n\n        this._connSource.off('show', this._showConnect, this).off('hide', this.hide, this);\n\n        delete this._connSource;\n      }\n\n      if (this._connTarget) {\n        removeFromArray(this, this._connTarget.__connectors);\n\n        this._connTarget.off('dragging positionchange', this._updateCoordinates, this).off('remove', this.onRemove, this);\n\n        this._connTarget.off('show', this._showConnect, this).off('hide', this.hide, this);\n\n        delete this._connTarget;\n      }\n\n      if (!(this._connSource instanceof Geometry) || !(this._connTarget instanceof Geometry)) {\n        var map = this.getMap();\n\n        if (map) {\n          map.off('movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange', this._updateCoordinates, this);\n        }\n      }\n    };\n\n    _proto._showConnect = function _showConnect() {\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n\n      if (this._connSource.isVisible() && this._connTarget.isVisible()) {\n        this._updateCoordinates();\n\n        this.show();\n      }\n    };\n\n    _proto._registerEvents = function _registerEvents() {\n      if (!this._connSource || !this._connTarget) {\n        return;\n      }\n\n      if (!this._connSource.__connectors) {\n        this._connSource.__connectors = [];\n      }\n\n      if (!this._connTarget.__connectors) {\n        this._connTarget.__connectors = [];\n      }\n\n      this._connSource.__connectors.push(this);\n\n      this._connTarget.__connectors.push(this);\n\n      this._connSource.on('dragging positionchange', this._updateCoordinates, this).on('remove', this.remove, this);\n\n      this._connTarget.on('dragging positionchange', this._updateCoordinates, this).on('remove', this.remove, this);\n\n      this._connSource.on('show', this._showConnect, this).on('hide', this.hide, this);\n\n      this._connTarget.on('show', this._showConnect, this).on('hide', this.hide, this);\n\n      var trigger = this.options['showOn'];\n      this.hide();\n\n      if (trigger === 'moving') {\n        this._connSource.on('dragstart', this._showConnect, this).on('dragend', this.hide, this);\n\n        this._connTarget.on('dragstart', this._showConnect, this).on('dragend', this.hide, this);\n      } else if (trigger === 'click') {\n        this._connSource.on('mousedown', this._showConnect, this).on('mouseup', this.hide, this);\n\n        this._connTarget.on('mousedown', this._showConnect, this).on('mouseup', this.hide, this);\n      } else if (trigger === 'mouseover') {\n        this._connSource.on('mouseover', this._showConnect, this).on('mouseout', this.hide, this);\n\n        this._connTarget.on('mouseover', this._showConnect, this).on('mouseout', this.hide, this);\n      } else {\n        this._showConnect();\n      }\n\n      if (!(this._connSource instanceof Geometry) || !(this._connTarget instanceof Geometry)) {\n        var map = this.getMap();\n\n        if (map) {\n          map.on('movestart moving moveend zoomstart zooming zoomend rotate pitch fovchange spatialreferencechange', this._updateCoordinates, this);\n        }\n      }\n    };\n\n    return _class;\n  }(Base);\n};\n\nvar options$d = {\n  showOn: 'always'\n};\n\nvar ConnectorLine = function (_Connectable) {\n  _inheritsLoose(ConnectorLine, _Connectable);\n\n  function ConnectorLine(src, target, options) {\n    var _this;\n\n    _this = _Connectable.call(this, null, options) || this;\n\n    if (arguments.length === 1) {\n      options = src;\n      src = null;\n      target = null;\n    }\n\n    _this._connSource = src;\n    _this._connTarget = target;\n    return _this;\n  }\n\n  return ConnectorLine;\n}(Connectable(LineString));\n\nConnectorLine.mergeOptions(options$d);\nConnectorLine.registerJSONType('ConnectorLine');\n\nvar ArcConnectorLine = function (_Connectable2) {\n  _inheritsLoose(ArcConnectorLine, _Connectable2);\n\n  function ArcConnectorLine(src, target, options) {\n    var _this2;\n\n    _this2 = _Connectable2.call(this, null, options) || this;\n\n    if (arguments.length === 1) {\n      options = src;\n      src = null;\n      target = null;\n    }\n\n    _this2._connSource = src;\n    _this2._connTarget = target;\n    return _this2;\n  }\n\n  return ArcConnectorLine;\n}(Connectable(ArcCurve));\n\nArcConnectorLine.mergeOptions(options$d);\nArcConnectorLine.registerJSONType('ArcConnectorLine');\nvar options$e = {\n  'drawImmediate': false\n};\n\nvar OverlayLayer = function (_Layer) {\n  _inheritsLoose(OverlayLayer, _Layer);\n\n  function OverlayLayer(id, geometries, options) {\n    var _this;\n\n    if (geometries && !(geometries instanceof Geometry) && !Array.isArray(geometries) && GEOJSON_TYPES.indexOf(geometries.type) < 0) {\n      options = geometries;\n      geometries = null;\n    }\n\n    _this = _Layer.call(this, id, options) || this;\n    _this._maxZIndex = 0;\n    _this._minZIndex = 0;\n\n    _this._initCache();\n\n    if (geometries) {\n      _this.addGeometry(geometries);\n    }\n\n    var style = _this.options['style'];\n\n    if (style) {\n      _this.setStyle(style);\n    }\n\n    return _this;\n  }\n\n  var _proto = OverlayLayer.prototype;\n\n  _proto.getGeometryById = function getGeometryById(id) {\n    if (isNil(id) || id === '') {\n      return null;\n    }\n\n    if (!this._geoMap[id]) {\n      return null;\n    }\n\n    return this._geoMap[id];\n  };\n\n  _proto.getGeometries = function getGeometries(filter, context) {\n    if (!filter) {\n      return this._geoList.slice(0);\n    }\n\n    var result = [];\n    var geometry, filtered;\n\n    for (var i = 0, l = this._geoList.length; i < l; i++) {\n      geometry = this._geoList[i];\n\n      if (context) {\n        filtered = filter.call(context, geometry);\n      } else {\n        filtered = filter(geometry);\n      }\n\n      if (filtered) {\n        result.push(geometry);\n      }\n    }\n\n    return result;\n  };\n\n  _proto.getFirstGeometry = function getFirstGeometry() {\n    if (!this._geoList.length) {\n      return null;\n    }\n\n    return this._geoList[0];\n  };\n\n  _proto.getLastGeometry = function getLastGeometry() {\n    var len = this._geoList.length;\n\n    if (len === 0) {\n      return null;\n    }\n\n    return this._geoList[len - 1];\n  };\n\n  _proto.getCount = function getCount() {\n    return this._geoList.length;\n  };\n\n  _proto.getExtent = function getExtent() {\n    if (this.getCount() === 0) {\n      return null;\n    }\n\n    var extent = new Extent(this.getProjection());\n    this.forEach(function (g) {\n      extent._combine(g.getExtent());\n    });\n    return extent;\n  };\n\n  _proto.forEach = function forEach(fn, context) {\n    var copyOnWrite = this._geoList.slice(0);\n\n    for (var i = 0, l = copyOnWrite.length; i < l; i++) {\n      if (!context) {\n        fn(copyOnWrite[i], i);\n      } else {\n        fn.call(context, copyOnWrite[i], i);\n      }\n    }\n\n    return this;\n  };\n\n  _proto.filter = function filter(fn, context) {\n    var selected = [];\n    var isFn = isFunction(fn);\n    var filter = isFn ? fn : createFilter(fn);\n    this.forEach(function (geometry) {\n      var g = isFn ? geometry : getFilterFeature(geometry);\n\n      if (context ? filter.call(context, g) : filter(g)) {\n        selected.push(geometry);\n      }\n    }, this);\n    return selected;\n  };\n\n  _proto.isEmpty = function isEmpty$$1() {\n    return !this._geoList.length;\n  };\n\n  _proto.addGeometry = function addGeometry(geometries, fitView) {\n    if (!geometries) {\n      return this;\n    }\n\n    if (geometries.type === 'FeatureCollection') {\n      return this.addGeometry(GeoJSON.toGeometry(geometries), fitView);\n    } else if (!Array.isArray(geometries)) {\n      var count = arguments.length;\n      var last = arguments[count - 1];\n      geometries = Array.prototype.slice.call(arguments, 0, count - 1);\n      fitView = last;\n\n      if (last && isObject(last) && ('type' in last || last instanceof Geometry)) {\n        geometries.push(last);\n        fitView = false;\n      }\n\n      return this.addGeometry(geometries, fitView);\n    } else if (geometries.length === 0) {\n      return this;\n    }\n\n    this._initCache();\n\n    var extent;\n\n    if (fitView) {\n      extent = new Extent();\n    }\n\n    this._toSort = this._maxZIndex > 0;\n    var geos = [];\n\n    for (var i = 0, l = geometries.length; i < l; i++) {\n      var geo = geometries[i];\n\n      if (!geo) {\n        throw new Error('Invalid geometry to add to layer(' + this.getId() + ') at index:' + i);\n      }\n\n      if (!(geo instanceof Geometry)) {\n        geo = Geometry.fromJSON(geo);\n\n        if (Array.isArray(geo)) {\n          for (var ii = 0, ll = geo.length; ii < ll; ii++) {\n            this._add(geo[ii], extent, i);\n\n            geos.push(geo[ii]);\n          }\n        }\n      }\n\n      if (!Array.isArray(geo)) {\n        this._add(geo, extent, i);\n\n        geos.push(geo);\n      }\n    }\n\n    var map = this.getMap();\n\n    if (map) {\n      this._getRenderer().onGeometryAdd(geos);\n\n      if (extent && !isNil(extent.xmin)) {\n        var center = extent.getCenter();\n        var z = map.getFitZoom(extent);\n\n        if (isObject(fitView)) {\n          var step = isFunction(fitView.step) ? fitView.step : function () {\n            return undefined;\n          };\n          map.animateTo({\n            center: center,\n            zoom: z\n          }, extend({\n            duration: map.options.zoomAnimationDuration,\n            easing: 'out'\n          }, fitView), step);\n        } else if (fitView === true) {\n          map.setCenterAndZoom(center, z);\n        }\n      }\n    }\n\n    this.fire('addgeo', {\n      'geometries': geometries\n    });\n    return this;\n  };\n\n  _proto.getGeoMinZIndex = function getGeoMinZIndex() {\n    return this._minZIndex;\n  };\n\n  _proto.getGeoMaxZIndex = function getGeoMaxZIndex() {\n    return this._maxZIndex;\n  };\n\n  _proto._add = function _add(geo, extent, i) {\n    if (!this._toSort) {\n      this._toSort = geo.getZIndex() !== 0;\n    }\n\n    this._updateZIndex(geo.getZIndex());\n\n    var geoId = geo.getId();\n\n    if (!isNil(geoId)) {\n      if (!isNil(this._geoMap[geoId])) {\n        throw new Error('Duplicate geometry id in layer(' + this.getId() + '):' + geoId + ', at index:' + i);\n      }\n\n      this._geoMap[geoId] = geo;\n    }\n\n    var internalId = UID();\n\n    geo._setInternalId(internalId);\n\n    this._geoList.push(geo);\n\n    this.onAddGeometry(geo);\n\n    geo._bindLayer(this);\n\n    if (geo.onAdd) {\n      geo.onAdd();\n    }\n\n    if (extent) {\n      extent._combine(geo.getExtent());\n    }\n\n    geo._fireEvent('add', {\n      'layer': this\n    });\n\n    if (this._cookedStyles) {\n      this._styleGeometry(geo);\n    }\n  };\n\n  _proto.removeGeometry = function removeGeometry(geometries) {\n    if (!Array.isArray(geometries)) {\n      return this.removeGeometry([geometries]);\n    }\n\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      if (!(geometries[i] instanceof Geometry)) {\n        geometries[i] = this.getGeometryById(geometries[i]);\n      }\n\n      if (!geometries[i] || this !== geometries[i].getLayer()) continue;\n      geometries[i].remove();\n    }\n\n    this.fire('removegeo', {\n      'geometries': geometries\n    });\n    return this;\n  };\n\n  _proto.clear = function clear() {\n    this._clearing = true;\n    this.forEach(function (geo) {\n      geo.remove();\n    });\n    this._geoMap = {};\n    var old = this._geoList;\n    this._geoList = [];\n\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryRemove(old);\n    }\n\n    this._clearing = false;\n    this.fire('clear');\n    return this;\n  };\n\n  _proto.onRemoveGeometry = function onRemoveGeometry(geometry) {\n    if (!geometry || this._clearing) {\n      return;\n    }\n\n    if (this !== geometry.getLayer()) {\n      return;\n    }\n\n    var internalId = geometry._getInternalId();\n\n    if (isNil(internalId)) {\n      return;\n    }\n\n    var geoId = geometry.getId();\n\n    if (!isNil(geoId)) {\n      delete this._geoMap[geoId];\n    }\n\n    var idx = this._findInList(geometry);\n\n    if (idx >= 0) {\n      this._geoList.splice(idx, 1);\n    }\n\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryRemove([geometry]);\n    }\n  };\n\n  _proto.getStyle = function getStyle() {\n    if (!this.options['style']) {\n      return null;\n    }\n\n    return this.options['style'];\n  };\n\n  _proto.setStyle = function setStyle(style) {\n    this.options.style = style;\n    style = parseStyleRootPath(style);\n    this._cookedStyles = compileStyle(style);\n    this.forEach(function (geometry) {\n      this._styleGeometry(geometry);\n    }, this);\n    this.fire('setstyle', {\n      'style': style\n    });\n    return this;\n  };\n\n  _proto._styleGeometry = function _styleGeometry(geometry) {\n    if (!this._cookedStyles) {\n      return false;\n    }\n\n    var g = getFilterFeature(geometry);\n\n    for (var i = 0, len = this._cookedStyles.length; i < len; i++) {\n      if (this._cookedStyles[i]['filter'](g) === true) {\n        geometry._setExternSymbol(this._cookedStyles[i]['symbol']);\n\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto.removeStyle = function removeStyle() {\n    if (!this.options.style) {\n      return this;\n    }\n\n    delete this.options.style;\n    delete this._cookedStyles;\n    this.forEach(function (geometry) {\n      geometry._setExternSymbol(null);\n    }, this);\n    this.fire('removestyle');\n    return this;\n  };\n\n  _proto.onAddGeometry = function onAddGeometry(geo) {\n    var style = this.getStyle();\n\n    if (style) {\n      this._styleGeometry(geo);\n    }\n  };\n\n  _proto.hide = function hide() {\n    for (var i = 0, l = this._geoList.length; i < l; i++) {\n      this._geoList[i].onHide();\n    }\n\n    return Layer.prototype.hide.call(this);\n  };\n\n  _proto._initCache = function _initCache() {\n    if (!this._geoList) {\n      this._geoList = [];\n      this._geoMap = {};\n    }\n  };\n\n  _proto._updateZIndex = function _updateZIndex() {\n    for (var _len = arguments.length, zIndex = new Array(_len), _key = 0; _key < _len; _key++) {\n      zIndex[_key] = arguments[_key];\n    }\n\n    this._maxZIndex = Math.max(this._maxZIndex, Math.max.apply(Math, zIndex));\n    this._minZIndex = Math.min(this._minZIndex, Math.min.apply(Math, zIndex));\n  };\n\n  _proto._sortGeometries = function _sortGeometries() {\n    var _this2 = this;\n\n    if (!this._toSort) {\n      return;\n    }\n\n    this._maxZIndex = 0;\n    this._minZIndex = 0;\n\n    this._geoList.sort(function (a, b) {\n      _this2._updateZIndex(a.getZIndex(), b.getZIndex());\n\n      return _this2._compare(a, b);\n    });\n\n    this._toSort = false;\n  };\n\n  _proto._compare = function _compare(a, b) {\n    if (a.getZIndex() === b.getZIndex()) {\n      return a._getInternalId() - b._getInternalId();\n    }\n\n    return a.getZIndex() - b.getZIndex();\n  };\n\n  _proto._findInList = function _findInList(geo) {\n    var len = this._geoList.length;\n\n    if (len === 0) {\n      return -1;\n    }\n\n    var low = 0,\n        high = len - 1,\n        middle;\n\n    while (low <= high) {\n      middle = Math.floor((low + high) / 2);\n\n      if (this._geoList[middle] === geo) {\n        return middle;\n      } else if (this._compare(this._geoList[middle], geo) > 0) {\n        high = middle - 1;\n      } else {\n        low = middle + 1;\n      }\n    }\n\n    return -1;\n  };\n\n  _proto._onGeometryEvent = function _onGeometryEvent(param) {\n    if (!param || !param['target']) {\n      return;\n    }\n\n    var type = param['type'];\n\n    if (type === 'idchange') {\n      this._onGeometryIdChange(param);\n    } else if (type === 'zindexchange') {\n      this._onGeometryZIndexChange(param);\n    } else if (type === 'positionchange') {\n      this._onGeometryPositionChange(param);\n    } else if (type === 'shapechange') {\n      this._onGeometryShapeChange(param);\n    } else if (type === 'symbolchange') {\n      this._onGeometrySymbolChange(param);\n    } else if (type === 'show') {\n      this._onGeometryShow(param);\n    } else if (type === 'hide') {\n      this._onGeometryHide(param);\n    } else if (type === 'propertieschange') {\n      this._onGeometryPropertiesChange(param);\n    }\n  };\n\n  _proto._onGeometryIdChange = function _onGeometryIdChange(param) {\n    if (param['new'] === param['old']) {\n      if (this._geoMap[param['old']] && this._geoMap[param['old']] === param['target']) {\n        return;\n      }\n    }\n\n    if (!isNil(param['new'])) {\n      if (this._geoMap[param['new']]) {\n        throw new Error('Duplicate geometry id in layer(' + this.getId() + '):' + param['new']);\n      }\n\n      this._geoMap[param['new']] = param['target'];\n    }\n\n    if (!isNil(param['old']) && param['new'] !== param['old']) {\n      delete this._geoMap[param['old']];\n    }\n  };\n\n  _proto._onGeometryZIndexChange = function _onGeometryZIndexChange(param) {\n    if (param['old'] !== param['new']) {\n      this._updateZIndex(param['new']);\n\n      this._toSort = true;\n\n      if (this._getRenderer()) {\n        this._getRenderer().onGeometryZIndexChange(param);\n      }\n    }\n  };\n\n  _proto._onGeometryPositionChange = function _onGeometryPositionChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryPositionChange(param);\n    }\n  };\n\n  _proto._onGeometryShapeChange = function _onGeometryShapeChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryShapeChange(param);\n    }\n  };\n\n  _proto._onGeometrySymbolChange = function _onGeometrySymbolChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometrySymbolChange(param);\n    }\n  };\n\n  _proto._onGeometryShow = function _onGeometryShow(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryShow(param);\n    }\n  };\n\n  _proto._onGeometryHide = function _onGeometryHide(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryHide(param);\n    }\n  };\n\n  _proto._onGeometryPropertiesChange = function _onGeometryPropertiesChange(param) {\n    if (this._getRenderer()) {\n      this._getRenderer().onGeometryPropertiesChange(param);\n    }\n  };\n\n  return OverlayLayer;\n}(Layer);\n\nOverlayLayer.mergeOptions(options$e);\nvar TEMP_EXTENT$3 = new PointExtent();\nvar options$f = {\n  'debug': false,\n  'enableSimplify': true,\n  'geometryEvents': true,\n  'defaultIconSize': [20, 20],\n  'cacheVectorOnCanvas': true,\n  'cacheSvgOnCanvas': Browser$1.gecko,\n  'enableAltitude': false,\n  'altitudeProperty': 'altitude',\n  'drawAltitude': false,\n  'altitude': 0\n};\n\nvar VectorLayer = function (_OverlayLayer) {\n  _inheritsLoose(VectorLayer, _OverlayLayer);\n\n  function VectorLayer(id, geometries, options) {\n    return _OverlayLayer.call(this, id, geometries, options) || this;\n  }\n\n  var _proto = VectorLayer.prototype;\n\n  _proto.onConfig = function onConfig(conf) {\n    _OverlayLayer.prototype.onConfig.call(this, conf);\n\n    if (conf['enableAltitude'] || conf['drawAltitude'] || conf['altitudeProperty']) {\n      var renderer = this.getRenderer();\n\n      if (renderer && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n\n  _proto.identify = function identify(coordinate, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var renderer = this.getRenderer();\n\n    if (options['onlyVisible'] && renderer && renderer.identify) {\n      return renderer.identify(coordinate, options);\n    }\n\n    if (!(coordinate instanceof Coordinate)) {\n      coordinate = new Coordinate(coordinate);\n    }\n\n    return this._hitGeos(this._geoList, coordinate, options);\n  };\n\n  _proto._hitGeos = function _hitGeos(geometries, coordinate, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var filter = options['filter'],\n        tolerance = options['tolerance'],\n        hits = [];\n    var map = this.getMap();\n    var point = map.coordToPoint(coordinate);\n\n    var cp = map._pointToContainerPoint(point, undefined, 0, point);\n\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      var geo = geometries[i];\n\n      if (!geo || !geo.isVisible() || !geo._getPainter() || !geo.options['interactive']) {\n        continue;\n      }\n\n      if (!(geo instanceof LineString) || !geo._getArrowStyle() && !(geo instanceof Curve)) {\n        var extent = geo.getContainerExtent(TEMP_EXTENT$3);\n\n        if (tolerance) {\n          extent = extent._expand(tolerance);\n        }\n\n        if (!extent || !extent.contains(cp)) {\n          continue;\n        }\n      }\n\n      if (geo._containsPoint(cp, tolerance) && (!filter || filter(geo))) {\n        hits.push(geo);\n\n        if (options['count']) {\n          if (hits.length >= options['count']) {\n            break;\n          }\n        }\n      }\n    }\n\n    return hits;\n  };\n\n  _proto.getAltitude = function getAltitude() {\n    return this.options['altitude'] || 0;\n  };\n\n  _proto.toJSON = function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'options': this.config()\n    };\n\n    if (isNil(options['geometries']) || options['geometries']) {\n      var clipExtent;\n\n      if (options['clipExtent']) {\n        var map = this.getMap();\n        var projection = map ? map.getProjection() : null;\n        clipExtent = new Extent(options['clipExtent'], projection);\n      }\n\n      var geoJSONs = [];\n      var geometries = this.getGeometries();\n\n      for (var i = 0, len = geometries.length; i < len; i++) {\n        var geo = geometries[i];\n        var geoExt = geo.getExtent();\n\n        if (!geoExt || clipExtent && !clipExtent.intersects(geoExt)) {\n          continue;\n        }\n\n        var json = geo.toJSON(options['geometries']);\n        geoJSONs.push(json);\n      }\n\n      profile['geometries'] = geoJSONs;\n    }\n\n    return profile;\n  };\n\n  VectorLayer.fromJSON = function fromJSON(json) {\n    if (!json || json['type'] !== 'VectorLayer') {\n      return null;\n    }\n\n    var layer = new VectorLayer(json['id'], json['options']);\n    var geoJSONs = json['geometries'];\n    var geometries = [];\n\n    for (var i = 0; i < geoJSONs.length; i++) {\n      var geo = Geometry.fromJSON(geoJSONs[i]);\n\n      if (geo) {\n        geometries.push(geo);\n      }\n    }\n\n    layer.addGeometry(geometries);\n    return layer;\n  };\n\n  VectorLayer.getPainterClass = function getPainterClass() {\n    return Painter;\n  };\n\n  VectorLayer.getCollectionPainterClass = function getCollectionPainterClass() {\n    return CollectionPainter;\n  };\n\n  return VectorLayer;\n}(OverlayLayer);\n\nVectorLayer.mergeOptions(options$f);\nVectorLayer.registerJSONType('VectorLayer');\nvar key = '_map_tool';\n\nvar MapTool = function (_Eventable) {\n  _inheritsLoose(MapTool, _Eventable);\n\n  function MapTool() {\n    return _Eventable.apply(this, arguments) || this;\n  }\n\n  var _proto = MapTool.prototype;\n\n  _proto.addTo = function addTo(map) {\n    if (!map) {\n      return this;\n    }\n\n    this._map = map;\n\n    if (map[key]) {\n      map[key].disable();\n    }\n\n    if (this.onAdd) {\n      this.onAdd();\n    }\n\n    this.enable();\n    map[key] = this;\n\n    this._fireEvent('add');\n\n    return this;\n  };\n\n  _proto.getMap = function getMap() {\n    return this._map;\n  };\n\n  _proto.enable = function enable() {\n    var map = this._map;\n\n    if (!map || this._enabled) {\n      return this;\n    }\n\n    this._enabled = true;\n\n    this._switchEvents('off');\n\n    this._registerEvents();\n\n    if (this.onEnable) {\n      this.onEnable();\n    }\n\n    this._fireEvent('enable');\n\n    return this;\n  };\n\n  _proto.disable = function disable() {\n    if (!this._enabled || !this._map) {\n      return this;\n    }\n\n    this._enabled = false;\n\n    this._switchEvents('off');\n\n    if (this.onDisable) {\n      this.onDisable();\n    }\n\n    this._fireEvent('disable');\n\n    return this;\n  };\n\n  _proto.isEnabled = function isEnabled() {\n    if (!this._enabled) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto.remove = function remove() {\n    if (!this._map) {\n      return this;\n    }\n\n    this.disable();\n\n    if (this._map) {\n      delete this._map[key];\n      delete this._map;\n    }\n\n    this._fireEvent('remove');\n\n    return this;\n  };\n\n  _proto._registerEvents = function _registerEvents() {\n    this._switchEvents('on');\n  };\n\n  _proto._switchEvents = function _switchEvents(to) {\n    var events = this.getEvents();\n\n    if (events) {\n      this._map[to](events, this);\n    }\n  };\n\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (!param) {\n      param = {};\n    }\n\n    this.fire(eventName, param);\n  };\n\n  return MapTool;\n}(Eventable(Class));\n\nvar options$g = {\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'polygonFill': '#fff',\n    'polygonOpacity': 0.3\n  },\n  'doubleClickZoom': false,\n  'mode': null,\n  'once': false,\n  'autoPanAtEdge': false,\n  'ignoreMouseleave': true\n};\nvar registeredMode = {};\n\nvar DrawTool = function (_MapTool) {\n  _inheritsLoose(DrawTool, _MapTool);\n\n  DrawTool.registerMode = function registerMode(name, modeAction) {\n    registeredMode[name.toLowerCase()] = modeAction;\n  };\n\n  DrawTool.getRegisterMode = function getRegisterMode(name) {\n    return registeredMode[name.toLowerCase()];\n  };\n\n  function DrawTool(options) {\n    var _this;\n\n    _this = _MapTool.call(this, options) || this;\n\n    _this._checkMode();\n\n    _this._events = {\n      'click': _this._clickHandler,\n      'mousemove': _this._mouseMoveHandler,\n      'dblclick': _this._doubleClickHandler,\n      'mousedown': _this._mouseDownHandler,\n      'mouseup': _this._mouseUpHandler\n    };\n    return _this;\n  }\n\n  var _proto = DrawTool.prototype;\n\n  _proto.getMode = function getMode() {\n    if (this.options['mode']) {\n      return this.options['mode'].toLowerCase();\n    }\n\n    return null;\n  };\n\n  _proto.setMode = function setMode(mode) {\n    if (this._geometry) {\n      this._geometry.remove();\n\n      delete this._geometry;\n    }\n\n    this._clearStage();\n\n    this._switchEvents('off');\n\n    this.options['mode'] = mode;\n\n    this._checkMode();\n\n    if (this.isEnabled()) {\n      this._switchEvents('on');\n\n      this._restoreMapCfg();\n\n      this._saveMapCfg();\n    }\n\n    return this;\n  };\n\n  _proto.getSymbol = function getSymbol() {\n    var symbol = this.options['symbol'];\n\n    if (symbol) {\n      return extendSymbol(symbol);\n    } else {\n      return extendSymbol(this.options['symbol']);\n    }\n  };\n\n  _proto.setSymbol = function setSymbol(symbol) {\n    if (!symbol) {\n      return this;\n    }\n\n    this.options['symbol'] = symbol;\n\n    if (this._geometry) {\n      this._geometry.setSymbol(symbol);\n    }\n\n    return this;\n  };\n\n  _proto.getCurrentGeometry = function getCurrentGeometry() {\n    return this._geometry;\n  };\n\n  _proto.onAdd = function onAdd() {\n    this._checkMode();\n  };\n\n  _proto.onEnable = function onEnable() {\n    this._saveMapCfg();\n\n    this._drawToolLayer = this._getDrawLayer();\n\n    this._clearStage();\n\n    this._loadResources();\n\n    if (this.options['autoPanAtEdge']) {\n      var map = this.getMap();\n      this._mapAutoPanAtEdge = map.options['autoPanAtEdge'];\n\n      if (!this._mapAutoPanAtEdge) {\n        map.config({\n          autoPanAtEdge: true\n        });\n      }\n    }\n\n    return this;\n  };\n\n  _proto.onDisable = function onDisable() {\n    var map = this.getMap();\n\n    this._restoreMapCfg();\n\n    this.endDraw();\n\n    if (this._map) {\n      map.removeLayer(this._getDrawLayer());\n\n      if (this.options['autoPanAtEdge']) {\n        if (!this._mapAutoPanAtEdge) {\n          map.config({\n            autoPanAtEdge: false\n          });\n        }\n      }\n    }\n\n    return this;\n  };\n\n  _proto.undo = function undo() {\n    var registerMode = this._getRegisterMode();\n\n    var action = registerMode.action;\n\n    if (!this._shouldRecordHistory(action) || !this._historyPointer) {\n      return this;\n    }\n\n    var coords = this._clickCoords.slice(0, --this._historyPointer);\n\n    registerMode.update(this.getMap().getProjection(), coords, this._geometry);\n    return this;\n  };\n\n  _proto.redo = function redo() {\n    var registerMode = this._getRegisterMode();\n\n    var action = registerMode.action;\n\n    if (!this._shouldRecordHistory(action) || isNil(this._historyPointer) || this._historyPointer === this._clickCoords.length) {\n      return this;\n    }\n\n    var coords = this._clickCoords.slice(0, ++this._historyPointer);\n\n    registerMode.update(this.getMap().getProjection(), coords, this._geometry);\n    return this;\n  };\n\n  _proto._shouldRecordHistory = function _shouldRecordHistory(actions) {\n    return Array.isArray(actions) && actions[0] === 'click' && actions[1] === 'mousemove' && actions[2] === 'dblclick';\n  };\n\n  _proto._checkMode = function _checkMode() {\n    this._getRegisterMode();\n  };\n\n  _proto._saveMapCfg = function _saveMapCfg() {\n    var map = this.getMap();\n    this._mapDoubleClickZoom = map.options['doubleClickZoom'];\n    map.config({\n      'doubleClickZoom': this.options['doubleClickZoom']\n    });\n\n    var actions = this._getRegisterMode()['action'];\n\n    if (actions.indexOf('mousedown') > -1) {\n      var _map = this.getMap();\n\n      this._mapDraggable = _map.options['draggable'];\n\n      _map.config({\n        'draggable': false\n      });\n    }\n  };\n\n  _proto._restoreMapCfg = function _restoreMapCfg() {\n    var map = this.getMap();\n    map.config({\n      'doubleClickZoom': this._mapDoubleClickZoom\n    });\n\n    if (!isNil(this._mapDraggable)) {\n      map.config('draggable', this._mapDraggable);\n    }\n\n    delete this._mapDraggable;\n    delete this._mapDoubleClickZoom;\n  };\n\n  _proto._loadResources = function _loadResources() {\n    var symbol = this.getSymbol();\n    var resources = getExternalResources(symbol);\n\n    if (resources.length > 0) {\n      this._drawToolLayer._getRenderer().loadResources(resources);\n    }\n  };\n\n  _proto._getProjection = function _getProjection() {\n    return this._map.getProjection();\n  };\n\n  _proto._getRegisterMode = function _getRegisterMode() {\n    var mode = this.getMode();\n    var registerMode = DrawTool.getRegisterMode(mode);\n\n    if (!registerMode) {\n      throw new Error(mode + ' is not a valid mode of DrawTool.');\n    }\n\n    return registerMode;\n  };\n\n  _proto.getEvents = function getEvents() {\n    var action = this._getRegisterMode()['action'];\n\n    var _events = {};\n\n    if (Array.isArray(action)) {\n      for (var i = 0; i < action.length; i++) {\n        _events[action[i]] = this._events[action[i]];\n      }\n\n      return _events;\n    }\n\n    return null;\n  };\n\n  _proto._mouseDownHandler = function _mouseDownHandler(event) {\n    this._createGeometry(event);\n  };\n\n  _proto._mouseUpHandler = function _mouseUpHandler(event) {\n    this.endDraw(event);\n  };\n\n  _proto._clickHandler = function _clickHandler(event) {\n    var registerMode = this._getRegisterMode();\n\n    if (!this._geometry) {\n      this._createGeometry(event);\n    } else {\n      var prjCoord = this.getMap()._pointToPrj(event['point2d']);\n\n      if (!isNil(this._historyPointer)) {\n        this._clickCoords = this._clickCoords.slice(0, this._historyPointer);\n      }\n\n      this._clickCoords.push(prjCoord);\n\n      this._historyPointer = this._clickCoords.length;\n      event.drawTool = this;\n      registerMode['update'](this.getMap().getProjection(), this._clickCoords, this._geometry, event);\n\n      this._fireEvent('drawvertex', event);\n\n      if (registerMode['clickLimit'] && registerMode['clickLimit'] === this._historyPointer) {\n        this.endDraw(event);\n      }\n    }\n  };\n\n  _proto._createGeometry = function _createGeometry(event) {\n    var mode = this.getMode();\n\n    var registerMode = this._getRegisterMode();\n\n    var prjCoord = this.getMap()._pointToPrj(event['point2d']);\n\n    var symbol = this.getSymbol();\n\n    if (!this._geometry) {\n      this._clickCoords = [prjCoord];\n      event.drawTool = this;\n      this._geometry = registerMode['create'](this.getMap().getProjection(), this._clickCoords, event);\n\n      if (symbol && mode !== 'point') {\n        this._geometry.setSymbol(symbol);\n      } else if (this.options.hasOwnProperty('symbol')) {\n        this._geometry.setSymbol(this.options['symbol']);\n      }\n\n      this._addGeometryToStage(this._geometry);\n\n      this._fireEvent('drawstart', event);\n    }\n\n    if (mode === 'point') {\n      this.endDraw(event);\n    }\n  };\n\n  _proto._mouseMoveHandler = function _mouseMoveHandler(event) {\n    var map = this.getMap();\n\n    if (!this._geometry || !map || map.isInteracting()) {\n      return;\n    }\n\n    var containerPoint = this._getMouseContainerPoint(event);\n\n    if (!this._isValidContainerPoint(containerPoint)) {\n      return;\n    }\n\n    var prjCoord = this.getMap()._pointToPrj(event['point2d']);\n\n    var projection = map.getProjection();\n    event.drawTool = this;\n\n    var registerMode = this._getRegisterMode();\n\n    if (this._shouldRecordHistory(registerMode.action)) {\n      var path = this._clickCoords.slice(0, this._historyPointer);\n\n      if (path && path.length > 0 && prjCoord.equals(path[path.length - 1])) {\n        return;\n      }\n\n      registerMode['update'](projection, path.concat([prjCoord]), this._geometry, event);\n    } else {\n      registerMode['update'](projection, prjCoord, this._geometry, event);\n    }\n\n    this._fireEvent('mousemove', event);\n  };\n\n  _proto._doubleClickHandler = function _doubleClickHandler(event) {\n    if (!this._geometry) {\n      return;\n    }\n\n    var containerPoint = this._getMouseContainerPoint(event);\n\n    if (!this._isValidContainerPoint(containerPoint)) {\n      return;\n    }\n\n    var registerMode = this._getRegisterMode();\n\n    var clickCoords = this._clickCoords;\n\n    if (clickCoords.length < 2) {\n      return;\n    }\n\n    var projection = this.getMap().getProjection();\n    var path = [clickCoords[0]];\n\n    for (var i = 1, len = clickCoords.length; i < len; i++) {\n      if (clickCoords[i].x !== clickCoords[i - 1].x || clickCoords[i].y !== clickCoords[i - 1].y) {\n        path.push(clickCoords[i]);\n      }\n    }\n\n    if (path.length < 2 || this._geometry && this._geometry instanceof Polygon && path.length < 3) {\n      return;\n    }\n\n    event.drawTool = this;\n    registerMode['update'](projection, path, this._geometry, event);\n    this.endDraw(event);\n  };\n\n  _proto._addGeometryToStage = function _addGeometryToStage(geometry) {\n    var drawLayer = this._getDrawLayer();\n\n    drawLayer.addGeometry(geometry);\n  };\n\n  _proto.endDraw = function endDraw(param) {\n    if (!this._geometry || this._ending) {\n      return this;\n    }\n\n    this._ending = true;\n    var geometry = this._geometry;\n\n    this._clearStage();\n\n    param = param || {};\n    this._geometry = geometry;\n\n    this._fireEvent('drawend', param);\n\n    delete this._geometry;\n\n    if (this.options['once']) {\n      this.disable();\n    }\n\n    delete this._ending;\n    delete this._historyPointer;\n    return this;\n  };\n\n  _proto._clearStage = function _clearStage() {\n    this._getDrawLayer().clear();\n\n    delete this._geometry;\n    delete this._clickCoords;\n  };\n\n  _proto._getMouseContainerPoint = function _getMouseContainerPoint(event) {\n    var action = this._getRegisterMode()['action'];\n\n    if (action === 'mousedown') {\n      stopPropagation(event['domEvent']);\n    }\n\n    return event['containerPoint'];\n  };\n\n  _proto._isValidContainerPoint = function _isValidContainerPoint(containerPoint) {\n    var mapSize = this._map.getSize();\n\n    var w = mapSize['width'],\n        h = mapSize['height'];\n\n    if (containerPoint.x < 0 || containerPoint.y < 0) {\n      return false;\n    } else if (containerPoint.x > w || containerPoint.y > h) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto._getDrawLayer = function _getDrawLayer() {\n    var drawLayerId = INTERNAL_LAYER_PREFIX + 'drawtool';\n\n    var drawToolLayer = this._map.getLayer(drawLayerId);\n\n    if (!drawToolLayer) {\n      drawToolLayer = new VectorLayer(drawLayerId, {\n        'enableSimplify': false\n      });\n\n      this._map.addLayer(drawToolLayer);\n    }\n\n    return drawToolLayer;\n  };\n\n  _proto._fireEvent = function _fireEvent(eventName, param) {\n    if (!param) {\n      param = {};\n    }\n\n    if (this._geometry) {\n      param['geometry'] = this._getRegisterMode()['generate'](this._geometry, {\n        drawTool: this\n      });\n    }\n\n    MapTool.prototype._fireEvent.call(this, eventName, param);\n  };\n\n  return DrawTool;\n}(MapTool);\n\nDrawTool.mergeOptions(options$g);\n\nvar MapBoxZoomHander = function (_Handler) {\n  _inheritsLoose(MapBoxZoomHander, _Handler);\n\n  function MapBoxZoomHander(target) {\n    var _this;\n\n    _this = _Handler.call(this, target) || this;\n    _this.drawTool = new DrawTool({\n      'mode': 'boxZoom',\n      'ignoreMouseleave': false\n    });\n    return _this;\n  }\n\n  var _proto = MapBoxZoomHander.prototype;\n\n  _proto.addHooks = function addHooks() {\n    this.target.on('_mousedown', this._onMouseDown, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    this.target.off('_mousedown', this._onMouseDown, this);\n\n    if (this.drawTool.isEnabled()) {\n      this.drawTool.remove();\n    }\n  };\n\n  _proto._onMouseDown = function _onMouseDown(param) {\n    if (!this.target.options['boxZoom']) {\n      return;\n    }\n\n    if (param.domEvent.shiftKey) {\n      this.drawTool.setSymbol(this.target.options['boxZoomSymbol']).on('drawend', this._boxZoom, this).addTo(this.target);\n    }\n  };\n\n  _proto._boxZoom = function _boxZoom(param) {\n    var map = this.target;\n    this.drawTool.remove();\n    var geometry = param.geometry,\n        center = geometry.getCenter(),\n        symbol = geometry.getSymbol(),\n        w = symbol.markerWidth,\n        h = symbol.markerHeight;\n    var extent = new Extent(center, map.locateByPoint(center, w, h), map.getProjection());\n    var zoom = map.getFitZoom(extent);\n\n    map._animateTo({\n      center: extent.getCenter(),\n      zoom: zoom\n    });\n  };\n\n  return MapBoxZoomHander;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'boxZoom': true,\n  'boxZoomSymbol': {\n    'markerType': 'rectangle',\n    'markerLineWidth': 3,\n    'markerLineColor': '#1bbc9b',\n    'markerLineDasharray': [10, 5],\n    'markerFillOpacity': 0.1,\n    'markerFill': '#1bbc9b',\n    'markerWidth': 1,\n    'markerHeight': 1\n  }\n});\nMap$1.addOnLoadHook('addHandler', 'boxZoom', MapBoxZoomHander);\nvar PANOFFSET = 30;\n\nvar MapAutoPanAtEdgeHandler = function (_Handler) {\n  _inheritsLoose(MapAutoPanAtEdgeHandler, _Handler);\n\n  function MapAutoPanAtEdgeHandler() {\n    return _Handler.apply(this, arguments) || this;\n  }\n\n  var _proto = MapAutoPanAtEdgeHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    if (!this.target) {\n      return;\n    }\n\n    this.target.on('_mousemove', this._onMouseMove, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    if (!this.target) {\n      return;\n    }\n\n    this.target.off('_mousemove', this._onMouseMove, this);\n  };\n\n  _proto._onMouseMove = function _onMouseMove(event) {\n    var map = this.target;\n\n    if (map.options['autoPanAtEdge']) {\n      var containerPoint = event.containerPoint;\n      var containerExtent = map.getContainerExtent();\n\n      if (containerExtent) {\n        var x = containerPoint.x,\n            y = containerPoint.y;\n        var xmax = containerExtent.xmax,\n            ymax = containerExtent.ymax;\n        var p;\n\n        if (x < PANOFFSET) {\n          p = [Math.abs(x - PANOFFSET), 0];\n        }\n\n        if (y < PANOFFSET) {\n          p = [0, Math.abs(y - PANOFFSET)];\n        }\n\n        if (x + PANOFFSET > xmax) {\n          p = [-Math.abs(x + PANOFFSET - xmax), 0];\n        }\n\n        if (y + PANOFFSET > ymax) {\n          p = [0, -Math.abs(y + PANOFFSET - ymax)];\n        }\n\n        if (p) {\n          map.panBy(p, {\n            duration: 1\n          });\n        }\n      }\n    }\n  };\n\n  return MapAutoPanAtEdgeHandler;\n}(Handler$1);\n\nMap$1.mergeOptions({\n  'autoPanAtEdge': false\n});\nMap$1.addOnLoadHook('addHandler', 'autoPanAtEdge', MapAutoPanAtEdgeHandler);\nMap$1.include({\n  animateTo: function animateTo(view, options, step) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n\n    var projection = this.getProjection(),\n        currView = this.getView(),\n        props = {};\n    var empty = true;\n\n    for (var p in view) {\n      if (hasOwn(view, p) && !isNil(view[p]) && (p === 'prjCenter' || !isNil(currView[p]))) {\n        empty = false;\n\n        if (p === 'center') {\n          var from = new Coordinate(currView[p]).toFixed(7),\n              to = new Coordinate(view[p]).toFixed(7);\n\n          if (!from.equals(to)) {\n            props['center'] = [from, to];\n          }\n        } else if (p === 'prjCenter') {\n          var _from = new Coordinate(this._getPrjCenter());\n\n          var _to = new Coordinate(view[p]);\n\n          if (!_from.equals(_to)) {\n            props['prjCenter'] = [_from, _to];\n          }\n        } else if (currView[p] !== view[p] && p !== 'around') {\n          props[p] = [currView[p], view[p]];\n        }\n      }\n    }\n\n    if (empty) {\n      return null;\n    }\n\n    if (this._animPlayer) {\n      if (this._isInternalAnimation) {\n        if (this._animPlayer.playState === 'running') {\n          this._animPlayer.pause();\n\n          this._prevAnimPlayer = this._animPlayer;\n        }\n      } else {\n        delete this._prevAnimPlayer;\n\n        this._stopAnim(this._animPlayer);\n      }\n    }\n\n    var zoomOrigin = view['around'] || new Point(this.width / 2, this.height / 2);\n\n    var renderer = this._getRenderer(),\n        framer = function framer(fn) {\n      renderer.callInNextFrame(fn);\n    };\n\n    var player = this._animPlayer = Animation.animate(props, {\n      'easing': options['easing'] || 'out',\n      'duration': options['duration'] || this.options['zoomAnimationDuration'],\n      'framer': framer\n    }, function (frame) {\n      if (_this.isRemoved()) {\n        player.finish();\n        return;\n      }\n\n      if (player.playState === 'running') {\n        if (frame.styles['center']) {\n          var center = frame.styles['center'];\n\n          _this._setPrjCenter(projection.project(center));\n\n          _this.onMoving(_this._parseEventFromCoord(_this.getCenter()));\n        } else if (frame.styles['prjCenter']) {\n          var _center = frame.styles['prjCenter'];\n\n          _this._setPrjCenter(_center);\n\n          _this.onMoving(_this._parseEventFromCoord(_this.getCenter()));\n        }\n\n        if (!isNil(frame.styles['zoom'])) {\n          _this.onZooming(frame.styles['zoom'], zoomOrigin);\n        }\n\n        if (!isNil(frame.styles['pitch'])) {\n          _this.setPitch(frame.styles['pitch']);\n        }\n\n        if (!isNil(frame.styles['bearing'])) {\n          _this.setBearing(frame.styles['bearing']);\n        }\n\n        _this._fireEvent('animating');\n      } else if (player.playState !== 'paused' || player === _this._mapAnimPlayer) {\n        if (!player._interupted) {\n          if (props['center']) {\n            _this._setPrjCenter(projection.project(props['center'][1]));\n          } else if (props['prjCenter']) {\n            _this._setPrjCenter(props['prjCenter'][1]);\n          }\n\n          if (!isNil(props['pitch'])) {\n            _this.setPitch(props['pitch'][1]);\n          }\n\n          if (!isNil(props['bearing'])) {\n            _this.setBearing(props['bearing'][1]);\n          }\n        }\n\n        _this._endAnim(player, props, zoomOrigin, options);\n      }\n\n      if (step) {\n        step(frame);\n      }\n    }, this);\n\n    this._startAnim(props, zoomOrigin);\n\n    return player;\n  },\n  _animateTo: function _animateTo(view, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n\n    this._isInternalAnimation = true;\n    this._mapAnimPlayer = this.animateTo(view, options, step);\n    delete this._isInternalAnimation;\n    return this._mapAnimPlayer;\n  },\n  isAnimating: function isAnimating() {\n    return !!this._animPlayer;\n  },\n  isRotating: function isRotating() {\n    return this.isDragRotating() || !!this._animRotating;\n  },\n  _endAnim: function _endAnim(player, props, zoomOrigin, options) {\n    delete this._animRotating;\n    var evtType = player._interupted ? 'animateinterrupted' : 'animateend';\n\n    if (player === this._animPlayer) {\n      delete this._animPlayer;\n    }\n\n    if (player === this._mapAnimPlayer) {\n      delete this._mapAnimPlayer;\n    }\n\n    if (props['center']) {\n      var endCoord;\n\n      if (player._interupted) {\n        endCoord = this.getCenter();\n      } else {\n        endCoord = props['center'][1];\n      }\n\n      this.onMoveEnd(this._parseEventFromCoord(endCoord));\n    } else if (props['prjCenter']) {\n      var _endCoord;\n\n      if (player._interupted) {\n        _endCoord = this._getPrjCenter();\n      } else {\n        _endCoord = props['prjCenter'][1];\n      }\n\n      var event = this._parseEventFromCoord(this.getProjection().unproject(_endCoord));\n\n      event['point2d'] = this._prjToPoint(_endCoord);\n      this.onMoveEnd(event);\n    }\n\n    if (!isNil(props['zoom'])) {\n      if (player._interupted) {\n        this.onZoomEnd(this.getZoom(), zoomOrigin);\n      } else if (!options['wheelZoom']) {\n        this.onZoomEnd(props['zoom'][1], zoomOrigin);\n      } else {\n        this.onZooming(props['zoom'][1], zoomOrigin);\n      }\n    }\n\n    if (evtType) {\n      this._fireEvent(evtType);\n    }\n\n    if (!isNil(props['pitch']) && !this.getPitch()) {\n      this.getRenderer().setToRedraw();\n    }\n\n    this._resumePrev(player);\n  },\n  _startAnim: function _startAnim(props, zoomOrigin) {\n    if (!this._animPlayer) {\n      return;\n    }\n\n    if (props['center']) {\n      this.onMoveStart();\n    }\n\n    if (props['zoom'] && !this.isZooming()) {\n      this.onZoomStart(props['zoom'][1], zoomOrigin);\n    }\n\n    if (props['pitch'] || props['bearing']) {\n      this._animRotating = true;\n    }\n\n    this._fireEvent('animatestart');\n\n    this._animPlayer.play();\n  },\n  _stopAnim: function _stopAnim(player) {\n    if (!player) {\n      return;\n    }\n\n    delete this._animRotating;\n\n    if (player.playState !== 'finished') {\n      player._interupted = true;\n      player.cancel();\n    }\n\n    if (player === this._animPlayer) {\n      delete this._animPlayer;\n    }\n\n    if (player === this._mapAnimPlayer) {\n      delete this._mapAnimPlayer;\n    }\n  },\n  _resumePrev: function _resumePrev(player) {\n    if (!this._prevAnimPlayer) {\n      return;\n    }\n\n    var prevPlayer = this._prevAnimPlayer;\n\n    if (prevPlayer.playState !== 'paused') {\n      delete this._prevAnimPlayer;\n    }\n\n    if (player !== prevPlayer) {\n      this._animPlayer = prevPlayer;\n      prevPlayer.play();\n    }\n  }\n});\nvar events = 'mousedown ' + 'mouseup ' + 'mouseover ' + 'mouseout ' + 'mouseenter ' + 'mouseleave ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'keypress ' + 'touchstart ' + 'touchmove ' + 'touchend ';\nMap$1.include({\n  _registerDomEvents: function _registerDomEvents() {\n    var dom = this._panels.mapWrapper || this._containerDOM;\n    addDomEvent(dom, events, this._handleDOMEvent, this);\n  },\n  _removeDomEvents: function _removeDomEvents() {\n    var dom = this._panels.mapWrapper || this._containerDOM;\n    removeDomEvent(dom, events, this._handleDOMEvent, this);\n  },\n  _handleDOMEvent: function _handleDOMEvent(e) {\n    var type = e.type;\n\n    if (type === 'contextmenu') {\n      preventDefault(e);\n    }\n\n    if (this._ignoreEvent(e)) {\n      return;\n    }\n\n    var mimicClick = false;\n\n    if (type === 'mousedown' || type === 'touchstart' && e.touches.length === 1) {\n      this._mouseDownTime = now();\n    } else if (type === 'click' || type === 'touchend' || type === 'contextmenu') {\n      if (!this._mouseDownTime) {\n        return;\n      } else {\n        var downTime = this._mouseDownTime;\n        delete this._mouseDownTime;\n        var time = now();\n\n        if (time - downTime > 300) {\n          if (type === 'click' || type === 'contextmenu') {\n            return;\n          }\n        } else if (type === 'touchend') {\n          mimicClick = true;\n        }\n      }\n    }\n\n    this._fireDOMEvent(this, e, type);\n\n    if (mimicClick) {\n      if (this._clickTime && now() - this._clickTime <= 300) {\n        delete this._clickTime;\n\n        this._fireDOMEvent(this, e, 'dblclick');\n      } else {\n        this._clickTime = now();\n\n        this._fireDOMEvent(this, e, 'click');\n      }\n    }\n  },\n  _ignoreEvent: function _ignoreEvent(domEvent) {\n    if (!domEvent || !this._panels.control) {\n      return false;\n    }\n\n    if (this._isEventOutMap(domEvent)) {\n      return true;\n    }\n\n    var target = domEvent.srcElement || domEvent.target;\n    var preTarget;\n\n    if (target) {\n      while (target && target !== this._containerDOM) {\n        if (target.className && target.className.indexOf && (target.className.indexOf('maptalks-control') >= 0 || target.className.indexOf('maptalks-ui') >= 0 && !preTarget['eventsPropagation'])) {\n          return true;\n        }\n\n        preTarget = target;\n        target = target.parentNode;\n      }\n    }\n\n    return false;\n  },\n  _isEventOutMap: function _isEventOutMap(domEvent) {\n    if (this.getPitch() > this.options['maxVisualPitch']) {\n      var actualEvent = this._getActualEvent(domEvent);\n\n      var eventPos = getEventContainerPoint(actualEvent, this._containerDOM);\n\n      if (!this.getContainerExtent().contains(eventPos)) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  _parseEvent: function _parseEvent(e, type) {\n    if (!e) {\n      return null;\n    }\n\n    var eventParam = {\n      'domEvent': e\n    };\n\n    if (type !== 'keypress') {\n      var actual = this._getActualEvent(e);\n\n      if (actual) {\n        var containerPoint = getEventContainerPoint(actual, this._containerDOM);\n        eventParam = extend(eventParam, {\n          'coordinate': this.containerPointToCoord(containerPoint),\n          'containerPoint': containerPoint,\n          'viewPoint': this.containerPointToViewPoint(containerPoint),\n          'point2d': this._containerPointToPoint(containerPoint)\n        });\n      }\n    }\n\n    return eventParam;\n  },\n  _parseEventFromCoord: function _parseEventFromCoord(coord) {\n    var containerPoint = this.coordToContainerPoint(coord),\n        viewPoint = this.containerPointToViewPoint(containerPoint);\n    var e = {\n      'coordinate': coord,\n      'containerPoint': containerPoint,\n      'viewPoint': viewPoint,\n      'point2d': this.coordToPoint(coord)\n    };\n    return e;\n  },\n  _getActualEvent: function _getActualEvent(e) {\n    return e.touches && e.touches.length > 0 ? e.touches[0] : e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches[0] : e;\n  },\n  _fireDOMEvent: function _fireDOMEvent(target, e, type) {\n    if (this.isRemoved()) {\n      return;\n    }\n\n    var eventParam = this._parseEvent(e, type);\n\n    this._fireEvent(type, eventParam);\n  }\n});\nMap$1.addOnLoadHook('_registerDomEvents');\nMap$1.include({\n  isFullScreen: function isFullScreen() {\n    return !!(document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement || document.fullscreenElement);\n  },\n  requestFullScreen: function requestFullScreen(dom) {\n    this._fireEvent('fullscreenstart');\n\n    this._requestFullScreen(dom || this._containerDOM);\n\n    this._fireEvent('fullscreenend');\n\n    return this;\n  },\n  cancelFullScreen: function cancelFullScreen() {\n    this._cancelFullScreen();\n\n    this._fireEvent('cancelfullscreen');\n\n    return this;\n  },\n  _requestFullScreen: function _requestFullScreen(dom) {\n    if (dom.requestFullscreen) {\n      dom.requestFullscreen();\n    } else if (dom.mozRequestFullScreen) {\n      dom.mozRequestFullScreen();\n    } else if (dom.webkitRequestFullScreen) {\n      dom.webkitRequestFullScreen();\n    } else if (dom.msRequestFullScreen) {\n      dom.msRequestFullScreen();\n    } else {\n      var features = 'fullscreen=1,status=no,resizable=yes,top=0,left=0,scrollbars=no,' + 'titlebar=no,menubar=no,location=no,toolbar=no,z-look=yes,' + 'width=' + (screen.availWidth - 8) + ',height=' + (screen.availHeight - 45);\n      var newWin = window.open(location.href, '_blank', features);\n\n      if (newWin !== null) {\n        window.opener = null;\n        window.close();\n      }\n    }\n  },\n  _cancelFullScreen: function _cancelFullScreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.webkitCancelFullScreen) {\n      document.webkitCancelFullScreen();\n    } else {\n      var features = 'fullscreen=no,status=yes,resizable=yes,scrollbars=no,' + 'titlebar=no,menubar=yes,location=yes,toolbar=yes,z-look=yes';\n      var newWin = window.open(location.href, '_blank', features);\n\n      if (newWin !== null) {\n        window.opener = null;\n        window.close();\n      }\n    }\n  }\n});\nMap$1.include({\n  panTo: function panTo(coordinate, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!coordinate) {\n      return this;\n    }\n\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n\n    coordinate = new Coordinate(coordinate);\n\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      var prjCoord = this.getProjection().project(coordinate);\n      return this._panAnimation(prjCoord, options['duration'], step);\n    } else {\n      this.setCenter(coordinate);\n    }\n\n    return this;\n  },\n  _panTo: function _panTo(prjCoord, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      return this._panAnimation(prjCoord, options['duration']);\n    } else {\n      this.onMoveStart();\n\n      this._setPrjCenter(prjCoord);\n\n      this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));\n      return this;\n    }\n  },\n  panBy: function panBy(offset, options, step) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!offset) {\n      return this;\n    }\n\n    if (isFunction(options)) {\n      step = options;\n      options = {};\n    }\n\n    offset = new Point(offset);\n    var containerExtent = this.getContainerExtent();\n    var ymin = containerExtent.ymin;\n\n    if (ymin > 0 && offset.y > 30) {\n      var y = offset.y;\n      offset.y = 30;\n      offset.x = offset.x * 30 / y;\n      console.warn('offset is limited to panBy when pitch is above maxPitch');\n    }\n\n    this.onMoveStart();\n\n    if (typeof options['animation'] === 'undefined' || options['animation']) {\n      offset = offset.multi(-1);\n\n      var target = this._containerPointToPrj(new Point(this.width / 2 + offset.x, this.height / 2 + offset.y));\n\n      this._panAnimation(target, options['duration'], step);\n    } else {\n      this._offsetCenterByPixel(offset);\n\n      this.onMoveEnd(this._parseEventFromCoord(this.getCenter()));\n    }\n\n    return this;\n  },\n  _panAnimation: function _panAnimation(target, t, cb) {\n    return this._animateTo({\n      'prjCenter': target\n    }, {\n      'duration': t || this.options['panAnimationDuration']\n    }, cb);\n  }\n});\n\nGeometry.fromJSON = function (json) {\n  if (Array.isArray(json)) {\n    var result = [];\n\n    for (var i = 0, len = json.length; i < len; i++) {\n      var c = Geometry.fromJSON(json[i]);\n\n      if (Array.isArray(json)) {\n        result = result.concat(c);\n      } else {\n        result.push(c);\n      }\n    }\n\n    return result;\n  }\n\n  if (json && !json['feature']) {\n    return GeoJSON.toGeometry(json);\n  }\n\n  var geometry;\n\n  if (json['subType']) {\n    geometry = Geometry.getJSONClass(json['subType']).fromJSON(json);\n\n    if (!isNil(json['feature']['id'])) {\n      geometry.setId(json['feature']['id']);\n    }\n  } else {\n    geometry = GeoJSON.toGeometry(json['feature']);\n\n    if (json['options']) {\n      geometry.config(json['options']);\n    }\n  }\n\n  if (json['symbol']) {\n    geometry.setSymbol(json['symbol']);\n  }\n\n  if (json['infoWindow']) {\n    geometry.setInfoWindow(json['infoWindow']);\n  }\n\n  return geometry;\n};\n\nLayer.fromJSON = function (layerJSON) {\n  if (!layerJSON) {\n    return null;\n  }\n\n  var layerType = layerJSON['type'];\n  var clazz = Layer.getJSONClass(layerType);\n\n  if (!clazz || !clazz.fromJSON) {\n    throw new Error('unsupported layer type:' + layerType);\n  }\n\n  return clazz.fromJSON(layerJSON);\n};\n\nMap$1.include({\n  'JSON_VERSION': '1.0',\n  toJSON: function toJSON(options) {\n    if (!options) {\n      options = {};\n    }\n\n    var json = {\n      'jsonVersion': this['JSON_VERSION'],\n      'version': this.VERSION,\n      'extent': this.getExtent().toJSON()\n    };\n    json['options'] = this.config();\n    json['options']['center'] = this.getCenter();\n    json['options']['zoom'] = this.getZoom();\n    json['options']['bearing'] = this.getBearing();\n    json['options']['pitch'] = this.getPitch();\n    var baseLayer = this.getBaseLayer();\n\n    if ((isNil(options['baseLayer']) || options['baseLayer']) && baseLayer) {\n      json['baseLayer'] = baseLayer.toJSON(options['baseLayer']);\n    }\n\n    var extraLayerOptions = {};\n\n    if (options['clipExtent']) {\n      if (options['clipExtent'] === true) {\n        extraLayerOptions['clipExtent'] = this.getExtent();\n      } else {\n        extraLayerOptions['clipExtent'] = options['clipExtent'];\n      }\n    }\n\n    var layersJSON = [];\n\n    if (isNil(options['layers']) || options['layers'] && !Array.isArray(options['layers'])) {\n      var layers = this.getLayers();\n\n      for (var i = 0, len = layers.length; i < len; i++) {\n        if (!layers[i].toJSON) {\n          continue;\n        }\n\n        var opts = extend({}, isObject(options['layers']) ? options['layers'] : {}, extraLayerOptions);\n        layersJSON.push(layers[i].toJSON(opts));\n      }\n\n      json['layers'] = layersJSON;\n    } else if (isArrayHasData(options['layers'])) {\n      var _layers = options['layers'];\n\n      for (var _i = 0; _i < _layers.length; _i++) {\n        var exportOption = _layers[_i];\n        var layer = this.getLayer(exportOption['id']);\n\n        if (!layer.toJSON) {\n          continue;\n        }\n\n        var _opts = extend({}, exportOption['options'], extraLayerOptions);\n\n        layersJSON.push(layer.toJSON(_opts));\n      }\n\n      json['layers'] = layersJSON;\n    } else {\n      json['layers'] = [];\n    }\n\n    return json;\n  }\n});\n\nMap$1.fromJSON = function (container, profile, options) {\n  if (!container || !profile) {\n    return null;\n  }\n\n  if (!options) {\n    options = {};\n  }\n\n  var map = new Map$1(container, profile['options']);\n\n  if (isNil(options['baseLayer']) || options['baseLayer']) {\n    var baseLayer = Layer.fromJSON(profile['baseLayer']);\n\n    if (baseLayer) {\n      map.setBaseLayer(baseLayer);\n    }\n  }\n\n  if (isNil(options['layers']) || options['layers']) {\n    var layers = [];\n    var layerJSONs = profile['layers'];\n\n    for (var i = 0; i < layerJSONs.length; i++) {\n      var layer = Layer.fromJSON(layerJSONs[i]);\n      layers.push(layer);\n    }\n\n    map.addLayer(layers);\n  }\n\n  return map;\n};\n\nMap$1.include({\n  computeLength: function computeLength(coord1, coord2) {\n    if (!this.getProjection()) {\n      return null;\n    }\n\n    var p1 = new Coordinate(coord1),\n        p2 = new Coordinate(coord2);\n\n    if (p1.equals(p2)) {\n      return 0;\n    }\n\n    return this.getProjection().measureLength(p1, p2);\n  },\n  computeGeometryLength: function computeGeometryLength(geometry) {\n    return geometry._computeGeodesicLength(this.getProjection());\n  },\n  computeGeometryArea: function computeGeometryArea(geometry) {\n    return geometry._computeGeodesicArea(this.getProjection());\n  },\n  identify: function identify(opts, callback) {\n    if (!opts) {\n      return this;\n    }\n\n    var reqLayers = opts['layers'];\n\n    if (!isArrayHasData(reqLayers)) {\n      return this;\n    }\n\n    var layers = [];\n\n    for (var i = 0, len = reqLayers.length; i < len; i++) {\n      if (isString(reqLayers[i])) {\n        layers.push(this.getLayer(reqLayers[i]));\n      } else {\n        layers.push(reqLayers[i]);\n      }\n    }\n\n    var coordinate = new Coordinate(opts['coordinate']);\n    var options = extend({}, opts);\n    var hits = [];\n\n    for (var _i = layers.length - 1; _i >= 0; _i--) {\n      if (opts['count'] && hits.length >= opts['count']) {\n        break;\n      }\n\n      var layer = layers[_i];\n\n      if (!layer || !layer.getMap() || !opts['includeInvisible'] && !layer.isVisible() || !opts['includeInternals'] && layer.getId().indexOf(INTERNAL_LAYER_PREFIX) >= 0) {\n        continue;\n      }\n\n      var layerHits = layer.identify(coordinate, options);\n\n      if (layerHits) {\n        if (Array.isArray(layerHits)) {\n          pushIn(hits, layerHits);\n        } else {\n          hits.push(layerHits);\n        }\n      }\n    }\n\n    callback.call(this, hits);\n    return this;\n  }\n});\nMap$1.include({\n  _zoom: function _zoom(nextZoom, origin) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n\n    origin = this._checkZoomOrigin(origin);\n    nextZoom = this._checkZoom(nextZoom);\n    this.onZoomStart(nextZoom, origin);\n    this._frameZoom = this.getZoom();\n    this.onZoomEnd(nextZoom, origin);\n  },\n  _zoomAnimation: function _zoomAnimation(nextZoom, origin, startScale) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n\n    nextZoom = this._checkZoom(nextZoom);\n\n    if (this.getZoom() === nextZoom) {\n      return;\n    }\n\n    origin = this._checkZoomOrigin(origin);\n\n    this._startZoomAnim(nextZoom, origin, startScale);\n  },\n  _checkZoomOrigin: function _checkZoomOrigin(origin) {\n    if (!origin || this.options['zoomInCenter']) {\n      origin = new Point(this.width / 2, this.height / 2);\n    }\n\n    if (this.options['zoomOrigin']) {\n      origin = new Point(this.options['zoomOrigin']);\n    }\n\n    return origin;\n  },\n  _startZoomAnim: function _startZoomAnim(nextZoom, origin, startScale) {\n    if (isNil(startScale)) {\n      startScale = 1;\n    }\n\n    var endScale = this._getResolution(this._startZoomVal) / this._getResolution(nextZoom);\n\n    var duration = this.options['zoomAnimationDuration'] * Math.abs(endScale - startScale) / Math.abs(endScale - 1);\n    this._frameZoom = this._startZoomVal;\n\n    this._animateTo({\n      'zoom': nextZoom,\n      'around': origin\n    }, {\n      'continueOnViewChanged': true,\n      'duration': duration\n    });\n  },\n  onZoomStart: function onZoomStart(nextZoom, origin) {\n    if (!this.options['zoomable'] || this.isZooming()) {\n      return;\n    }\n\n    if (this._mapAnimPlayer) {\n      this._stopAnim(this._mapAnimPlayer);\n    }\n\n    this._zooming = true;\n    this._startZoomVal = this.getZoom();\n    this._startZoomCoord = this._containerPointToPrj(origin);\n\n    this._fireEvent('zoomstart', {\n      'from': this._startZoomVal,\n      'to': nextZoom\n    });\n  },\n  onZooming: function onZooming(nextZoom, origin, startScale) {\n    if (!this.options['zoomable']) {\n      return;\n    }\n\n    var frameZoom = this._frameZoom;\n\n    if (frameZoom === nextZoom) {\n      return;\n    }\n\n    if (isNil(startScale)) {\n      startScale = 1;\n    }\n\n    this._zoomTo(nextZoom, origin);\n\n    var res = this.getResolution(nextZoom),\n        fromRes = this.getResolution(this._startZoomVal),\n        scale = fromRes / res / startScale,\n        startPoint = this._prjToContainerPoint(this._startZoomCoord, this._startZoomVal);\n\n    var offset = this.getViewPoint();\n\n    if (!this.isRotating() && !startPoint.equals(origin) && scale !== 1) {\n      var pitch = this.getPitch();\n\n      var originOffset = startPoint._sub(origin)._multi(1 / (1 - scale));\n\n      if (pitch) {\n        originOffset.y /= Math.cos(pitch * Math.PI / 180);\n      }\n\n      origin = origin.add(originOffset);\n    }\n\n    var matrix = {\n      'view': [scale, 0, 0, scale, (origin.x - offset.x) * (1 - scale), (origin.y - offset.y) * (1 - scale)]\n    };\n    var dpr = this.getDevicePixelRatio();\n\n    if (dpr !== 1) {\n      origin = origin.multi(dpr);\n    }\n\n    matrix['container'] = [scale, 0, 0, scale, origin.x * (1 - scale), origin.y * (1 - scale)];\n\n    this._fireEvent('zooming', {\n      'from': this._startZoomVal,\n      'to': nextZoom,\n      'origin': origin,\n      'matrix': matrix\n    });\n\n    this._frameZoom = nextZoom;\n  },\n  onZoomEnd: function onZoomEnd(nextZoom, origin) {\n    if (!this.options['zoomable']) {\n      return;\n    }\n\n    var startZoomVal = this._startZoomVal;\n\n    this._zoomTo(nextZoom, origin);\n\n    this._zooming = false;\n\n    this._getRenderer().onZoomEnd();\n\n    this._fireEvent('zoomend', {\n      'from': startZoomVal,\n      'to': nextZoom\n    });\n\n    if (!this._verifyExtent(this._getPrjCenter())) {\n      this._panTo(this._prjMaxExtent.getCenter());\n    }\n  },\n  _zoomTo: function _zoomTo(nextZoom, origin) {\n    this._zoomLevel = nextZoom;\n\n    this._calcMatrices();\n\n    if (origin) {\n      this._setPrjCoordAtContainerPoint(this._startZoomCoord, origin);\n    }\n  },\n  _checkZoom: function _checkZoom(nextZoom) {\n    var maxZoom = this.getMaxZoom(),\n        minZoom = this.getMinZoom();\n\n    if (nextZoom < minZoom) {\n      nextZoom = minZoom;\n    }\n\n    if (nextZoom > maxZoom) {\n      nextZoom = maxZoom;\n    }\n\n    return nextZoom;\n  }\n});\n\nfunction perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf = 1 / (near - far);\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 2 * far * near * nf;\n  out[15] = 0;\n  return out;\n}\n\nfunction translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2],\n      a00,\n      a01,\n      a02,\n      a03,\n      a10,\n      a11,\n      a12,\n      a13,\n      a20,\n      a21,\n      a22,\n      a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n\nfunction scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\nfunction rotateX(out, a, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad),\n      a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7],\n      a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n\n  if (a !== out) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n\nfunction rotateZ(out, a, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad),\n      a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3],\n      a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n\n  if (a !== out) {\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n\nfunction multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3],\n      a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7],\n      a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11],\n      a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n\nfunction invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3],\n      a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7],\n      a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11],\n      a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15],\n      b00 = a00 * a11 - a01 * a10,\n      b01 = a00 * a12 - a02 * a10,\n      b02 = a00 * a13 - a03 * a10,\n      b03 = a01 * a12 - a02 * a11,\n      b04 = a01 * a13 - a03 * a11,\n      b05 = a02 * a13 - a03 * a12,\n      b06 = a20 * a31 - a21 * a30,\n      b07 = a20 * a32 - a22 * a30,\n      b08 = a20 * a33 - a23 * a30,\n      b09 = a21 * a32 - a22 * a31,\n      b10 = a21 * a33 - a23 * a31,\n      b11 = a22 * a33 - a23 * a32,\n      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\nfunction set$2(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\nfunction add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\nfunction subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\nfunction length(a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n\nfunction normalize(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n\n  return out;\n}\n\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nfunction scale$1(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\nfunction cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\nfunction distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot ? Math.hypot(x, y, z) : hypot(x, y, z);\n}\n\nfunction transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n\nfunction hypot() {\n  var y = 0;\n  var i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n}\n\nfunction applyMatrix(out, v, e) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var w = 1 / (e[3] * x + e[7] * y + e[11] * z + e[15]);\n  out[0] = (e[0] * x + e[4] * y + e[8] * z + e[12]) * w;\n  out[1] = (e[1] * x + e[5] * y + e[9] * z + e[13]) * w;\n  out[2] = (e[2] * x + e[6] * y + e[10] * z + e[14]) * w;\n  return out;\n}\n\nfunction matrixToQuaternion(out, te) {\n  var m11 = te[0],\n      m12 = te[4],\n      m13 = te[8],\n      m21 = te[1],\n      m22 = te[5],\n      m23 = te[9],\n      m31 = te[2],\n      m32 = te[6],\n      m33 = te[10],\n      trace = m11 + m22 + m33;\n  var s;\n\n  if (trace > 0) {\n    s = 0.5 / Math.sqrt(trace + 1.0);\n    out.w = 0.25 / s;\n    out.x = (m32 - m23) * s;\n    out.y = (m13 - m31) * s;\n    out.z = (m21 - m12) * s;\n  } else if (m11 > m22 && m11 > m33) {\n    s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);\n    out.w = (m32 - m23) / s;\n    out.x = 0.25 * s;\n    out.y = (m12 + m21) / s;\n    out.z = (m13 + m31) / s;\n  } else if (m22 > m33) {\n    s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);\n    out.w = (m13 - m31) / s;\n    out.x = (m12 + m21) / s;\n    out.y = 0.25 * s;\n    out.z = (m23 + m32) / s;\n  } else {\n    s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);\n    out.w = (m21 - m12) / s;\n    out.x = (m13 + m31) / s;\n    out.y = (m23 + m32) / s;\n    out.z = 0.25 * s;\n  }\n\n  return this;\n}\n\nfunction quaternionToMatrix(out, q) {\n  var te = out;\n  var x = q.x,\n      y = q.y,\n      z = q.z,\n      w = q.w;\n  var x2 = x + x,\n      y2 = y + y,\n      z2 = z + z;\n  var xx = x * x2,\n      xy = x * y2,\n      xz = x * z2;\n  var yy = y * y2,\n      yz = y * z2,\n      zz = z * z2;\n  var wx = w * x2,\n      wy = w * y2,\n      wz = w * z2;\n  te[0] = 1 - (yy + zz);\n  te[4] = xy - wz;\n  te[8] = xz + wy;\n  te[1] = xy + wz;\n  te[5] = 1 - (xx + zz);\n  te[9] = yz - wx;\n  te[2] = xz - wy;\n  te[6] = yz + wx;\n  te[10] = 1 - (xx + yy);\n  te[3] = 0;\n  te[7] = 0;\n  te[11] = 0;\n  te[12] = 0;\n  te[13] = 0;\n  te[14] = 0;\n  te[15] = 1;\n  return te;\n}\n\nfunction setPosition(out, v) {\n  var te = out;\n  te[12] = v[0];\n  te[13] = v[1];\n  te[14] = v[2];\n  return out;\n}\n\nfunction lookAt(te, eye, target, up) {\n  var x = [0, 0, 0];\n  var y = [0, 0, 0];\n  var z = [0, 0, 0];\n  subtract(z, eye, target);\n\n  if (length(z) === 0) {\n    z[2] = 1;\n  }\n\n  normalize(z, z);\n  cross(x, up, z);\n\n  if (length(z) === 0) {\n    if (Math.abs(up[2]) === 1) {\n      z[0] += 0.0001;\n    } else {\n      z[2] += 0.0001;\n    }\n\n    normalize(z, z);\n    cross(x, up, z);\n  }\n\n  normalize(x, x);\n  cross(y, z, x);\n  te[0] = x[0];\n  te[4] = y[0];\n  te[8] = z[0];\n  te[1] = x[1];\n  te[5] = y[1];\n  te[9] = z[1];\n  te[2] = x[2];\n  te[6] = y[2];\n  te[10] = z[2];\n  return te;\n}\n\nvar RADIAN$1 = Math.PI / 180;\nvar DEFAULT_FOV = 0.6435011087932844;\nvar TEMP_COORD = new Coordinate(0, 0);\nMap$1.include({\n  getFov: function getFov() {\n    if (!this._fov) {\n      this._fov = DEFAULT_FOV;\n    }\n\n    return this._fov / RADIAN$1;\n  },\n  setFov: function setFov(fov) {\n    if (this.isZooming()) {\n      return this;\n    }\n\n    fov = Math.max(0.01, Math.min(60, fov));\n    if (this._fov === fov) return this;\n    var from = this.getFov();\n    this._fov = fov * RADIAN$1;\n\n    this._calcMatrices();\n\n    this._renderLayers();\n\n    this._fireEvent('fovchange', {\n      'from': from,\n      'to': this.getFov()\n    });\n\n    return this;\n  },\n  getBearing: function getBearing() {\n    if (!this._angle) {\n      return 0;\n    }\n\n    return -this._angle / RADIAN$1;\n  },\n  setBearing: function setBearing(bearing) {\n    if (Browser$1.ie9) {\n      throw new Error('map can\\'t rotate in IE9.');\n    }\n\n    var b = -wrap(bearing, -180, 180) * RADIAN$1;\n    if (this._angle === b) return this;\n    var from = this.getBearing();\n\n    this._fireEvent('rotatestart', {\n      'from': from,\n      'to': b\n    });\n\n    this._angle = b;\n\n    this._calcMatrices();\n\n    this._renderLayers();\n\n    this._fireEvent('rotate', {\n      'from': from,\n      'to': b\n    });\n\n    this._fireEvent('rotateend', {\n      'from': from,\n      'to': b\n    });\n\n    return this;\n  },\n  getPitch: function getPitch() {\n    if (!this._pitch) {\n      return 0;\n    }\n\n    return this._pitch / Math.PI * 180;\n  },\n  setPitch: function setPitch(pitch) {\n    if (Browser$1.ie9) {\n      throw new Error('map can\\'t tilt in IE9.');\n    }\n\n    var p = clamp(pitch, 0, this.options['maxPitch']) * RADIAN$1;\n    if (this._pitch === p) return this;\n    var from = this.getPitch();\n\n    this._fireEvent('pitchstart', {\n      'from': from,\n      'to': p\n    });\n\n    this._pitch = p;\n\n    this._calcMatrices();\n\n    this._renderLayers();\n\n    this._fireEvent('pitch', {\n      'from': from,\n      'to': p\n    });\n\n    this._fireEvent('pitchend', {\n      'from': from,\n      'to': p\n    });\n\n    return this;\n  },\n  isTransforming: function isTransforming() {\n    return !!(this._pitch || this._angle);\n  },\n  getFrustumAltitude: function getFrustumAltitude() {\n    return this._frustumAltitude;\n  },\n  _calcFrustumAltitude: function _calcFrustumAltitude() {\n    var pitch = 90 - this.getPitch();\n    var fov = this.getFov() / 2;\n    var cameraAlt = this.cameraPosition ? this.cameraPosition[2] : 0;\n\n    if (fov <= pitch) {\n      return cameraAlt;\n    }\n\n    fov = Math.PI * fov / 180;\n    var d1 = new Point(this.cameraPosition).distanceTo(new Point(this.cameraLookAt)),\n        d2 = cameraAlt * Math.tan(fov * 2);\n    var d = Math.tan(fov) * (d1 + d2);\n    return cameraAlt + d;\n  },\n  _pointToContainerPoint: function () {\n    var a = [0, 0, 0];\n    return function (point, zoom, altitude, out) {\n      if (altitude === void 0) {\n        altitude = 0;\n      }\n\n      point = this._pointToPoint(point, zoom, out);\n\n      if (this.isTransforming() || altitude) {\n        altitude *= this._getResolution(zoom) / this._getResolution();\n        var _scale = this._glScale;\n        set$2(a, point.x * _scale, point.y * _scale, altitude * _scale);\n\n        var t = this._projIfBehindCamera(a, this.cameraPosition, this.cameraForward);\n\n        applyMatrix(t, t, this.projViewMatrix);\n        var w2 = this.width / 2,\n            h2 = this.height / 2;\n        t[0] = t[0] * w2 + w2;\n        t[1] = -(t[1] * h2) + h2;\n\n        if (out) {\n          out.x = t[0];\n          out.y = t[1];\n          return out;\n        }\n\n        return new Point(t[0], t[1]);\n      } else {\n        var centerPoint = this._prjToPoint(this._getPrjCenter(), undefined, TEMP_COORD);\n\n        if (out) {\n          out.x = point.x;\n          out.y = point.y;\n        } else {\n          out = point;\n        }\n\n        out._sub(centerPoint.x, centerPoint.y);\n\n        out.set(out.x, -out.y);\n        return out._add(this.width / 2, this.height / 2);\n      }\n    };\n  }(),\n  _projIfBehindCamera: function () {\n    var vectorFromCam = new Array(3);\n    var proj = new Array(3);\n    var sub = new Array(3);\n    return function (position, cameraPos, camForward) {\n      subtract(vectorFromCam, position, cameraPos);\n      var camNormDot = dot(camForward, vectorFromCam);\n\n      if (camNormDot <= 0) {\n        scale$1(proj, camForward, camNormDot * 1.01);\n        add(position, cameraPos, subtract(sub, vectorFromCam, proj));\n      }\n\n      return position;\n    };\n  }(),\n  _containerPointToPoint: function () {\n    var cp = [0, 0, 0],\n        coord0 = [0, 0, 0, 1],\n        coord1 = [0, 0, 0, 1];\n    return function (p, zoom, out) {\n      if (this.isTransforming()) {\n        var w2 = this.width / 2 || 1,\n            h2 = this.height / 2 || 1;\n        set$2(cp, (p.x - w2) / w2, (h2 - p.y) / h2, 0);\n        set$2(coord0, cp[0], cp[1], 0);\n        set$2(coord1, cp[0], cp[1], 1);\n        coord0[3] = coord1[3] = 1;\n        applyMatrix(coord0, coord0, this.projViewMatrixInverse);\n        applyMatrix(coord1, coord1, this.projViewMatrixInverse);\n        var x0 = coord0[0];\n        var x1 = coord1[0];\n        var y0 = coord0[1];\n        var y1 = coord1[1];\n        var z0 = coord0[2];\n        var z1 = coord1[2];\n        var t = z0 === z1 ? 0 : (0 - z0) / (z1 - z0);\n\n        var _x = interpolate(x0, x1, t);\n\n        var _y = interpolate(y0, y1, t);\n\n        if (out) {\n          out.x = _x;\n          out.y = _y;\n        } else {\n          out = new Point(_x, _y);\n        }\n\n        out._multi(1 / this._glScale);\n\n        return zoom === undefined || this.getZoom() === zoom ? out : this._pointToPointAtZoom(out, zoom, out);\n      }\n\n      var centerPoint = this._prjToPoint(this._getPrjCenter(), zoom, out),\n          scale$$1 = zoom !== undefined ? this._getResolution() / this._getResolution(zoom) : 1;\n\n      var x = scale$$1 * (p.x - this.width / 2),\n          y = scale$$1 * (p.y - this.height / 2);\n      return centerPoint._add(x, -y);\n    };\n  }(),\n  _calcMatrices: function () {\n    var m0 = createMat4(),\n        m1 = createMat4();\n    return function () {\n      delete this._mapRes;\n      delete this._mapGlRes;\n      delete this._mapExtent2D;\n      delete this._mapGlExtent2D;\n      var size = this.getSize();\n      var w = size.width || 1,\n          h = size.height || 1;\n      this._glScale = this.getGLScale();\n      var pitch = this.getPitch() * Math.PI / 180;\n\n      var worldMatrix = this._getCameraWorldMatrix();\n\n      var fov = this.getFov() * Math.PI / 180;\n\n      var farZ = this._getCameraFar(fov, this.getPitch());\n\n      this.cameraFar = farZ;\n      this.cameraNear = Math.max(this._glScale * this.getResolution(this.getGLZoom()) * Math.cos(pitch), 0.1);\n      var projMatrix = this.projMatrix || createMat4();\n      perspective(projMatrix, fov, w / h, this.cameraNear, farZ);\n      this.projMatrix = projMatrix;\n      this.viewMatrix = invert(m0, worldMatrix);\n      this.projViewMatrix = multiply(this.projViewMatrix || createMat4(), projMatrix, this.viewMatrix);\n\n      this._calcCascadeMatrixes();\n\n      this.projViewMatrixInverse = multiply(this.projViewMatrixInverse || createMat4(), worldMatrix, invert(m1, projMatrix));\n      this.domCssMatrix = this._calcDomMatrix();\n      this._frustumAltitude = this._calcFrustumAltitude();\n      this._mapRes = this._getResolution();\n      this._mapGlRes = this._getResolution(this.getGLZoom());\n      this._mapExtent2D = this._get2DExtent();\n      this._mapGlExtent2D = this._get2DExtent(this.getGLZoom());\n    };\n  }(),\n  _getCameraFar: function _getCameraFar(fov, pitch) {\n    var cameraCenterDistance = this.cameraCenterDistance = distance(this.cameraPosition, this.cameraLookAt);\n    var farZ = cameraCenterDistance;\n\n    if (pitch > 0) {\n      pitch = pitch * Math.PI / 180;\n      var y;\n\n      if (2 / Math.PI - pitch <= fov / 2) {\n        y = 4 * cameraCenterDistance;\n      } else {\n        var tanFov = Math.tan(fov / 2);\n        var tanP = Math.tan(pitch);\n        y = cameraCenterDistance * tanFov / (1 / tanP - tanFov);\n      }\n\n      farZ += y;\n    }\n\n    return farZ + 1.0;\n  },\n  _calcCascadeMatrixes: function () {\n    var projMatrix = createMat4();\n\n    function cal(curPitch, pitch, out) {\n      var w = this.width;\n      var h = this.height;\n      var fov = this.getFov() * Math.PI / 180;\n\n      var farZ = this._getCameraFar(fov, pitch);\n\n      var cameraCenterDistance = this.cameraCenterDistance;\n      farZ = cameraCenterDistance + (farZ - cameraCenterDistance) / Math.cos((90 - pitch) * Math.PI / 180) * Math.cos((90 - curPitch) * Math.PI / 180);\n      perspective(projMatrix, fov, w / h, 0.1, farZ);\n      var viewMatrix = this.viewMatrix;\n      return multiply(out, projMatrix, viewMatrix);\n    }\n\n    return function () {\n      var pitch = this.getPitch();\n      var cascadePitch0 = this.options['cascadePitches'][0];\n      var cascadePitch1 = this.options['cascadePitches'][1];\n      var projViewMatrix0 = this.cascadeFrustumMatrix0 = this.cascadeFrustumMatrix0 || createMat4();\n      var projViewMatrix1 = this.cascadeFrustumMatrix1 = this.cascadeFrustumMatrix1 || createMat4();\n\n      if (pitch > cascadePitch0) {\n        cal.call(this, pitch, cascadePitch0, projViewMatrix0);\n      } else {\n        copy(this.cascadeFrustumMatrix0, this.projViewMatrix);\n      }\n\n      if (pitch > cascadePitch1) {\n        cal.call(this, pitch, cascadePitch1, projViewMatrix1);\n      } else {\n        copy(this.cascadeFrustumMatrix1, this.cascadeFrustumMatrix0);\n      }\n    };\n  }(),\n  _calcDomMatrix: function () {\n    var m = createMat4(),\n        m1 = createMat4(),\n        minusY = [1, -1, 1],\n        arr = [0, 0, 0];\n    return function () {\n      var width = this.width || 1;\n      var height = this.height || 1;\n      var cameraToCenterDistance = 0.5 / Math.tan(this._fov / 2) * height;\n      scale(m, this.projMatrix, minusY);\n      translate(m, m, set$2(arr, 0, 0, -cameraToCenterDistance));\n\n      if (this._pitch) {\n        rotateX(m, m, this._pitch);\n      }\n\n      if (this._angle) {\n        rotateZ(m, m, this._angle);\n      }\n\n      identity(m1);\n      scale(m1, m1, set$2(arr, width / 2, -height / 2, 1));\n      return multiply(this.domCssMatrix || createMat4(), m1, m);\n    };\n  }(),\n  _getCameraWorldMatrix: function () {\n    var q = {};\n    return function () {\n      var targetZ = this.getGLZoom();\n      var size = this.getSize(),\n          scale$$1 = this.getGLScale();\n\n      var center2D = this._prjToPoint(this._prjCenter, targetZ);\n\n      this.cameraLookAt = set$2(this.cameraLookAt || [0, 0, 0], center2D.x, center2D.y, 0);\n      var pitch = this.getPitch() * RADIAN$1;\n      var bearing = this.getBearing() * RADIAN$1;\n\n      var ratio = this._getFovRatio();\n\n      var z = scale$$1 * (size.height || 1) / 2 / ratio;\n      var cz = z * Math.cos(pitch);\n      var dist = Math.sin(pitch) * z;\n      var cx = center2D.x - dist * Math.sin(bearing);\n      var cy = center2D.y - dist * Math.cos(bearing);\n      this.cameraPosition = set$2(this.cameraPosition || [0, 0, 0], cx, cy, cz);\n      var d = dist || 1;\n      var up = this.cameraUp = set$2(this.cameraUp || [0, 0, 0], Math.sin(bearing) * d, Math.cos(bearing) * d, 0);\n      var m = this.cameraWorldMatrix = this.cameraWorldMatrix || createMat4();\n      lookAt(m, this.cameraPosition, this.cameraLookAt, up);\n      var cameraForward = this.cameraForward || [0, 0, 0];\n      subtract(cameraForward, this.cameraLookAt, this.cameraPosition);\n      this.cameraForward = normalize(cameraForward, cameraForward);\n      matrixToQuaternion(q, m);\n      quaternionToMatrix(m, q);\n      setPosition(m, this.cameraPosition);\n      return m;\n    };\n  }(),\n  _getFovRatio: function _getFovRatio() {\n    var fov = this.getFov();\n    return Math.tan(fov / 2 * RADIAN$1);\n  },\n  _renderLayers: function _renderLayers() {\n    if (this.isInteracting()) {\n      return;\n    }\n\n    var layers = this._getLayers();\n\n    layers.forEach(function (layer) {\n      if (!layer) {\n        return;\n      }\n\n      var renderer = layer._getRenderer();\n\n      if (renderer && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    });\n  }\n});\n\nfunction createMat4() {\n  return identity(new Array(16));\n}\n\nMap$1.include({\n  _onViewChange: function _onViewChange(view) {\n    if (!this._viewHistory) {\n      this._viewHistory = [];\n      this._viewHistoryPointer = 0;\n    }\n\n    var old = this._getCurrentView();\n\n    for (var i = this._viewHistory.length - 1; i >= 0; i--) {\n      if (equalMapView(view, this._viewHistory[i])) {\n        this._viewHistoryPointer = i;\n\n        this._fireViewChange(old, view);\n\n        return;\n      }\n    }\n\n    if (this._viewHistoryPointer < this._viewHistory.length - 1) {\n      this._viewHistory.splice(this._viewHistoryPointer + 1);\n    }\n\n    this._viewHistory.push(view);\n\n    var count = this.options['viewHistoryCount'];\n\n    if (count > 0 && this._viewHistory.length > count) {\n      this._viewHistory.splice(0, this._viewHistory.length - count);\n    }\n\n    this._viewHistoryPointer = this._viewHistory.length - 1;\n\n    this._fireViewChange(old, view);\n  },\n  zoomToPreviousView: function zoomToPreviousView(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!this.hasPreviousView()) {\n      return null;\n    }\n\n    var view = this._viewHistory[--this._viewHistoryPointer];\n\n    this._zoomToView(view, options);\n\n    return view;\n  },\n  hasPreviousView: function hasPreviousView() {\n    if (!this._viewHistory || this._viewHistoryPointer === 0) {\n      return false;\n    }\n\n    return true;\n  },\n  zoomToNextView: function zoomToNextView(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!this.hasNextView()) {\n      return null;\n    }\n\n    var view = this._viewHistory[++this._viewHistoryPointer];\n\n    this._zoomToView(view, options);\n\n    return view;\n  },\n  hasNextView: function hasNextView() {\n    if (!this._viewHistory || this._viewHistoryPointer === this._viewHistory.length - 1) {\n      return false;\n    }\n\n    return true;\n  },\n  _zoomToView: function _zoomToView(view, options) {\n    var _this = this;\n\n    var old = this.getView();\n\n    if (options['animation']) {\n      this._animateTo(view, {\n        'duration': options['duration']\n      }, function (frame) {\n        if (frame.state.playState === 'finished') {\n          _this._fireViewChange(old, view);\n        }\n      });\n    } else {\n      this.setView(view);\n\n      this._fireViewChange(old, view);\n    }\n  },\n  getViewHistory: function getViewHistory() {\n    return this._viewHistory;\n  },\n  _fireViewChange: function _fireViewChange(old, view) {\n    this._fireEvent('viewchange', {\n      'old': old,\n      'new': view\n    });\n  },\n  _getCurrentView: function _getCurrentView() {\n    if (!this._viewHistory) {\n      return null;\n    }\n\n    return this._viewHistory[this._viewHistoryPointer];\n  }\n});\nMap$1.mergeOptions({\n  'viewHistory': true,\n  'viewHistoryCount': 10\n});\nvar options$h = {\n  'mode': 'LineString',\n  'language': 'zh-CN',\n  'metric': true,\n  'imperial': false,\n  'symbol': {\n    'lineColor': '#000',\n    'lineWidth': 3,\n    'lineOpacity': 1\n  },\n  'vertexSymbol': {\n    'markerType': 'ellipse',\n    'markerFill': '#fff',\n    'markerLineColor': '#000',\n    'markerLineWidth': 3,\n    'markerWidth': 11,\n    'markerHeight': 11\n  },\n  'labelOptions': {\n    'textSymbol': {\n      'textFaceName': 'monospace',\n      'textLineSpacing': 1,\n      'textHorizontalAlignment': 'right',\n      'textDx': 15\n    },\n    'boxStyle': {\n      'padding': [6, 2],\n      'symbol': {\n        'markerType': 'square',\n        'markerFill': '#fff',\n        'markerFillOpacity': 0.9,\n        'markerLineColor': '#b4b3b3'\n      }\n    }\n  },\n  'clearButtonSymbol': [{\n    'markerType': 'square',\n    'markerFill': '#fff',\n    'markerLineColor': '#b4b3b3',\n    'markerLineWidth': 2,\n    'markerWidth': 15,\n    'markerHeight': 15,\n    'markerDx': 20\n  }, {\n    'markerType': 'x',\n    'markerWidth': 10,\n    'markerHeight': 10,\n    'markerDx': 20\n  }]\n};\n\nvar DistanceTool = function (_DrawTool) {\n  _inheritsLoose(DistanceTool, _DrawTool);\n\n  function DistanceTool(options) {\n    var _this;\n\n    _this = _DrawTool.call(this, options) || this;\n\n    _this.on('enable', _this._afterEnable, _assertThisInitialized(_assertThisInitialized(_this))).on('disable', _this._afterDisable, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this._measureLayers = [];\n    return _this;\n  }\n\n  var _proto = DistanceTool.prototype;\n\n  _proto.clear = function clear() {\n    if (isArrayHasData(this._measureLayers)) {\n      for (var i = 0; i < this._measureLayers.length; i++) {\n        this._measureLayers[i].remove();\n      }\n    }\n\n    delete this._lastMeasure;\n    delete this._lastVertex;\n    this._measureLayers = [];\n    return this;\n  };\n\n  _proto.getMeasureLayers = function getMeasureLayers() {\n    return this._measureLayers;\n  };\n\n  _proto.getLastMeasure = function getLastMeasure() {\n    if (!this._lastMeasure) {\n      return 0;\n    }\n\n    return this._lastMeasure;\n  };\n\n  _proto.undo = function undo() {\n    _DrawTool.prototype.undo.call(this);\n\n    var pointer = this._historyPointer;\n\n    if (pointer !== this._vertexes.length) {\n      for (var i = pointer; i < this._vertexes.length; i++) {\n        if (this._vertexes[i].label) {\n          this._vertexes[i].label.remove();\n        }\n\n        this._vertexes[i].marker.remove();\n      }\n    }\n\n    return this;\n  };\n\n  _proto.redo = function redo() {\n    _DrawTool.prototype.redo.call(this);\n\n    var i = this._historyPointer - 1;\n\n    if (this._vertexes[i]) {\n      if (!this._vertexes[i].marker.getLayer()) {\n        if (this._vertexes[i].label) {\n          this._vertexes[i].label.addTo(this._measureMarkerLayer);\n        }\n\n        this._vertexes[i].marker.addTo(this._measureMarkerLayer);\n      }\n    }\n\n    return this;\n  };\n\n  _proto._measure = function _measure(toMeasure) {\n    var map = this.getMap();\n    var length;\n\n    if (toMeasure instanceof Geometry) {\n      length = map.computeGeometryLength(toMeasure);\n    } else if (Array.isArray(toMeasure)) {\n      length = map.getProjection().measureLength(toMeasure);\n    }\n\n    this._lastMeasure = length;\n    var units;\n\n    if (this.options['language'] === 'zh-CN') {\n      units = [' ', ' ', ' ', ' '];\n    } else {\n      units = [' m', ' km', ' feet', ' mile'];\n    }\n\n    var content = '';\n\n    if (this.options['metric']) {\n      content += length < 1000 ? length.toFixed(0) + units[0] : (length / 1000).toFixed(2) + units[1];\n    }\n\n    if (this.options['imperial']) {\n      length *= 3.2808399;\n\n      if (content.length > 0) {\n        content += '\\n';\n      }\n\n      content += length < 5280 ? length.toFixed(0) + units[2] : (length / 5280).toFixed(2) + units[3];\n    }\n\n    return content;\n  };\n\n  _proto._registerMeasureEvents = function _registerMeasureEvents() {\n    this.on('drawstart', this._msOnDrawStart, this).on('drawvertex', this._msOnDrawVertex, this).on('mousemove', this._msOnMouseMove, this).on('drawend', this._msOnDrawEnd, this);\n  };\n\n  _proto._afterEnable = function _afterEnable() {\n    this._registerMeasureEvents();\n  };\n\n  _proto._afterDisable = function _afterDisable() {\n    this.off('drawstart', this._msOnDrawStart, this).off('drawvertex', this._msOnDrawVertex, this).off('mousemove', this._msOnMouseMove, this).off('drawend', this._msOnDrawEnd, this);\n  };\n\n  _proto._msOnDrawStart = function _msOnDrawStart(param) {\n    var map = this.getMap();\n\n    var prjCoord = map._pointToPrj(param['point2d']);\n\n    var uid = UID();\n    var layerId = 'distancetool_' + uid;\n    var markerLayerId = 'distancetool_markers_' + uid;\n\n    if (!map.getLayer(layerId)) {\n      this._measureLineLayer = new VectorLayer(layerId).addTo(map);\n      this._measureMarkerLayer = new VectorLayer(markerLayerId).addTo(map);\n    } else {\n      this._measureLineLayer = map.getLayer(layerId);\n      this._measureMarkerLayer = map.getLayer(markerLayerId);\n    }\n\n    this._measureLayers.push(this._measureLineLayer);\n\n    this._measureLayers.push(this._measureMarkerLayer);\n\n    var marker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n\n    marker._setPrjCoordinates(prjCoord);\n\n    var content = this.options['language'] === 'zh-CN' ? '' : 'start';\n    var startLabel = new Label(content, param['coordinate'], this.options['labelOptions']);\n\n    startLabel._setPrjCoordinates(prjCoord);\n\n    this._lastVertex = startLabel;\n\n    this._addVertexMarker(marker, startLabel);\n  };\n\n  _proto._msOnMouseMove = function _msOnMouseMove(param) {\n    var ms = this._measure(this._msGetCoordsToMeasure(param));\n\n    if (!this._tailMarker) {\n      var symbol = extendSymbol(this.options['vertexSymbol']);\n      symbol['markerWidth'] /= 2;\n      symbol['markerHeight'] /= 2;\n      this._tailMarker = new Marker(param['coordinate'], {\n        'symbol': symbol\n      }).addTo(this._measureMarkerLayer);\n      this._tailLabel = new Label(ms, param['coordinate'], this.options['labelOptions']).addTo(this._measureMarkerLayer);\n    }\n\n    var prjCoords = this._geometry._getPrjCoordinates();\n\n    var lastCoord = prjCoords[prjCoords.length - 1];\n\n    this._tailMarker.setCoordinates(param['coordinate']);\n\n    this._tailMarker._setPrjCoordinates(lastCoord);\n\n    this._tailLabel.setContent(ms);\n\n    this._tailLabel.setCoordinates(param['coordinate']);\n\n    this._tailLabel._setPrjCoordinates(lastCoord);\n  };\n\n  _proto._msGetCoordsToMeasure = function _msGetCoordsToMeasure(param) {\n    return param['geometry'].getCoordinates().concat([param['coordinate']]);\n  };\n\n  _proto._msOnDrawVertex = function _msOnDrawVertex(param) {\n    var prjCoords = this._geometry._getPrjCoordinates();\n\n    var lastCoord = prjCoords[prjCoords.length - 1];\n    var geometry = param['geometry'];\n    var marker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n\n    var length = this._measure(geometry);\n\n    var vertexLabel = new Label(length, param['coordinate'], this.options['labelOptions']);\n\n    this._addVertexMarker(marker, vertexLabel);\n\n    vertexLabel._setPrjCoordinates(lastCoord);\n\n    marker._setPrjCoordinates(lastCoord);\n\n    this._lastVertex = vertexLabel;\n  };\n\n  _proto._addVertexMarker = function _addVertexMarker(marker, vertexLabel) {\n    if (!this._vertexes) {\n      this._vertexes = [];\n    }\n\n    this._vertexes.push({\n      label: vertexLabel,\n      marker: marker\n    });\n\n    if (this._historyPointer !== undefined) {\n      this._vertexes.length = this._historyPointer;\n    }\n\n    this._measureMarkerLayer.addGeometry(marker);\n\n    if (vertexLabel) {\n      this._measureMarkerLayer.addGeometry(vertexLabel);\n    }\n  };\n\n  _proto._msOnDrawEnd = function _msOnDrawEnd(param) {\n    this._clearTailMarker();\n\n    var size = this._lastVertex.getSize();\n\n    if (!size) {\n      size = new Size(10, 10);\n    }\n\n    this._addClearMarker(this._lastVertex.getCoordinates(), this._lastVertex._getPrjCoordinates(), size['width']);\n\n    var geo = param['geometry'].copy();\n\n    geo._setPrjCoordinates(param['geometry']._getPrjCoordinates());\n\n    geo.addTo(this._measureLineLayer);\n    this._lastMeasure = geo.getLength();\n  };\n\n  _proto._addClearMarker = function _addClearMarker(coordinates, prjCoord, dx) {\n    var symbol = this.options['clearButtonSymbol'];\n    var dxSymbol = {\n      'markerDx': (symbol['markerDx'] || 0) + dx,\n      'textDx': (symbol['textDx'] || 0) + dx\n    };\n\n    if (Array.isArray(symbol)) {\n      dxSymbol = symbol.map(function (s) {\n        if (s) {\n          return {\n            'markerDx': (s['markerDx'] || 0) + dx,\n            'textDx': (s['textDx'] || 0) + dx\n          };\n        }\n\n        return null;\n      });\n    }\n\n    symbol = extendSymbol(symbol, dxSymbol);\n    var endMarker = new Marker(coordinates, {\n      'symbol': symbol\n    });\n    var measureLineLayer = this._measureLineLayer,\n        measureMarkerLayer = this._measureMarkerLayer;\n    endMarker.on('click', function () {\n      measureLineLayer.remove();\n      measureMarkerLayer.remove();\n      return false;\n    }, this);\n    endMarker.addTo(this._measureMarkerLayer);\n\n    endMarker._setPrjCoordinates(prjCoord);\n  };\n\n  _proto._clearTailMarker = function _clearTailMarker() {\n    if (this._tailMarker) {\n      this._tailMarker.remove();\n\n      delete this._tailMarker;\n    }\n\n    if (this._tailLabel) {\n      this._tailLabel.remove();\n\n      delete this._tailLabel;\n    }\n  };\n\n  return DistanceTool;\n}(DrawTool);\n\nDistanceTool.mergeOptions(options$h);\nvar options$i = {\n  'mode': 'Polygon',\n  'symbol': {\n    'lineColor': '#000000',\n    'lineWidth': 2,\n    'lineOpacity': 1,\n    'lineDasharray': '',\n    'polygonFill': '#ffffff',\n    'polygonOpacity': 0.5\n  }\n};\n\nvar AreaTool = function (_DistanceTool) {\n  _inheritsLoose(AreaTool, _DistanceTool);\n\n  function AreaTool(options) {\n    var _this;\n\n    _this = _DistanceTool.call(this, options) || this;\n\n    _this.on('enable', _this._afterEnable, _assertThisInitialized(_assertThisInitialized(_this))).on('disable', _this._afterDisable, _assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this._measureLayers = [];\n    return _this;\n  }\n\n  var _proto = AreaTool.prototype;\n\n  _proto._measure = function _measure(toMeasure) {\n    var map = this.getMap();\n    var area;\n\n    if (toMeasure instanceof Geometry) {\n      area = map.computeGeometryArea(toMeasure);\n    } else if (Array.isArray(toMeasure)) {\n      area = map.getProjection().measureArea(toMeasure);\n    }\n\n    this._lastMeasure = area;\n    var units;\n\n    if (this.options['language'] === 'zh-CN') {\n      units = [' ', ' ', ' ', ' '];\n    } else {\n      units = [' sq.m', ' sq.km', ' sq.ft', ' sq.mi'];\n    }\n\n    var content = '';\n\n    if (this.options['metric']) {\n      content += area < 1E6 ? area.toFixed(0) + units[0] : (area / 1E6).toFixed(2) + units[1];\n    }\n\n    if (this.options['imperial']) {\n      area *= 3.2808399;\n\n      if (content.length > 0) {\n        content += '\\n';\n      }\n\n      var sqmi = 5280 * 5280;\n      content += area < sqmi ? area.toFixed(0) + units[2] : (area / sqmi).toFixed(2) + units[3];\n    }\n\n    return content;\n  };\n\n  _proto._msGetCoordsToMeasure = function _msGetCoordsToMeasure(param) {\n    return param['geometry'].getShell().concat([param['coordinate']]);\n  };\n\n  _proto._msOnDrawVertex = function _msOnDrawVertex(param) {\n    var prjCoord = this.getMap()._pointToPrj(param['point2d']);\n\n    var vertexMarker = new Marker(param['coordinate'], {\n      'symbol': this.options['vertexSymbol']\n    });\n\n    vertexMarker._setPrjCoordinates(prjCoord);\n\n    this._measure(param['geometry']);\n\n    this._lastVertex = vertexMarker;\n\n    this._addVertexMarker(vertexMarker);\n  };\n\n  _proto._msOnDrawEnd = function _msOnDrawEnd(param) {\n    this._clearTailMarker();\n\n    var prjCoord = this.getMap()._pointToPrj(param['point2d']);\n\n    var ms = this._measure(param['geometry']);\n\n    var endLabel = new Label(ms, param['coordinate'], this.options['labelOptions']).addTo(this._measureMarkerLayer);\n\n    endLabel._setPrjCoordinates(prjCoord);\n\n    var size = endLabel.getSize();\n\n    if (!size) {\n      size = new Size(10, 10);\n    }\n\n    this._addClearMarker(param['coordinate'], prjCoord, size['width']);\n\n    var geo = param['geometry'].copy();\n\n    geo._setPrjCoordinates(param['geometry']._getPrjCoordinates());\n\n    geo.addTo(this._measureLineLayer);\n    this._lastMeasure = geo.getArea();\n  };\n\n  return AreaTool;\n}(DistanceTool);\n\nAreaTool.mergeOptions(options$i);\nvar circleHooks = {\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var circle = new Circle(center, 0);\n\n    circle._setPrjCoordinates(prjCoord[0]);\n\n    return circle;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var map = geometry.getMap();\n    var prjCoord = Array.isArray(prjPath) ? prjPath[prjPath.length - 1] : prjPath;\n    var nextCoord = projection.unproject(prjCoord);\n    var radius = map.computeLength(geometry.getCenter(), nextCoord);\n    geometry.setRadius(radius);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('circle', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, circleHooks));\nDrawTool.registerMode('freeHandCircle', extend({\n  'action': ['mousedown', 'mousemove', 'mouseup']\n}, circleHooks));\nvar ellipseHooks = {\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var ellipse = new Ellipse(center, 0, 0);\n\n    ellipse._setPrjCoordinates(prjCoord[0]);\n\n    return ellipse;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var map = geometry.getMap();\n    var center = geometry.getCenter();\n    var prjCoord = Array.isArray(prjPath) ? prjPath[prjPath.length - 1] : prjPath;\n    var nextCoord = projection.unproject(prjCoord);\n    var rx = map.computeLength(center, new Coordinate({\n      x: nextCoord.x,\n      y: center.y\n    }));\n    var ry = map.computeLength(center, new Coordinate({\n      x: center.x,\n      y: nextCoord.y\n    }));\n    geometry.setWidth(rx * 2);\n    geometry.setHeight(ry * 2);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('ellipse', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, ellipseHooks));\nDrawTool.registerMode('freeHandEllipse', extend({\n  'action': ['mousedown', 'mousemove', 'mouseup']\n}, ellipseHooks));\nvar rectangleHooks = {\n  'create': function create(projection, prjCoords) {\n    var rect = new Polygon([]);\n    rect._firstClick = prjCoords[0];\n    return rect;\n  },\n  'update': function update(projection, prjCoords, geometry, param) {\n    var map = geometry.getMap();\n    var containerPoint = param['containerPoint'];\n\n    var firstClick = map._prjToContainerPoint(geometry._firstClick);\n\n    var ring = [[firstClick.x, firstClick.y], [containerPoint.x, firstClick.y], [containerPoint.x, containerPoint.y], [firstClick.x, containerPoint.y]];\n    geometry.setCoordinates(ring.map(function (c) {\n      return map.containerPointToCoord(new Point(c));\n    }));\n\n    geometry._setPrjCoordinates(ring.map(function (c) {\n      return map._containerPointToPrj(new Point(c));\n    }));\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('rectangle', extend({\n  'clickLimit': 2,\n  'action': ['click', 'mousemove', 'click']\n}, rectangleHooks));\nDrawTool.registerMode('freeHandRectangle', extend({\n  'action': ['mousedown', 'mousemove', 'mouseup']\n}, rectangleHooks));\nDrawTool.registerMode('point', {\n  'clickLimit': 1,\n  'action': ['click'],\n  'create': function create(projection, prjCoord) {\n    var center = projection.unproject(prjCoord[0]);\n    var marker = new Marker(center);\n\n    marker._setPrjCoordinates(prjCoord[0]);\n\n    return marker;\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nvar polygonHooks = {\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var line = new LineString(path);\n\n    line._setPrjCoordinates(prjPath);\n\n    return line;\n  },\n  'update': function update(projection, path, geometry) {\n    var symbol = geometry.getSymbol();\n    var prjCoords;\n\n    if (Array.isArray(path)) {\n      prjCoords = path;\n    } else {\n      prjCoords = geometry._getPrjCoordinates();\n      prjCoords.push(path);\n    }\n\n    var coordinates = prjCoords.map(function (c) {\n      return projection.unproject(c);\n    });\n    geometry.setCoordinates(coordinates);\n\n    geometry._setPrjCoordinates(prjCoords);\n\n    var layer = geometry.getLayer();\n\n    if (layer) {\n      var polygon = layer.getGeometryById('polygon');\n\n      if (!polygon && prjCoords.length >= 3) {\n        polygon = new Polygon([coordinates], {\n          'id': 'polygon'\n        });\n\n        if (symbol) {\n          var pSymbol = extendSymbol(symbol, {\n            'lineOpacity': 0\n          });\n          polygon.setSymbol(pSymbol);\n        }\n\n        polygon.addTo(layer);\n      }\n\n      if (polygon) {\n        polygon._setPrjCoordinates(prjCoords);\n      }\n    }\n  },\n  'generate': function generate(geometry) {\n    var polygon = new Polygon(geometry.getCoordinates(), {\n      'symbol': geometry.getSymbol()\n    });\n\n    polygon._setPrjCoordinates(geometry._getPrjCoordinates());\n\n    polygon._projCode = geometry._projCode;\n    return polygon;\n  }\n};\nDrawTool.registerMode('polygon', extend({\n  'action': ['click', 'mousemove', 'dblclick']\n}, polygonHooks));\nDrawTool.registerMode('freeHandPolygon', extend({\n  'action': ['mousedown', 'mousemove', 'mouseup']\n}, polygonHooks));\nvar lineStringHooks = {\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var line = new LineString(path);\n\n    line._setPrjCoordinates(prjPath);\n\n    return line;\n  },\n  'update': function update(projection, prjPath, geometry) {\n    var prjCoords;\n\n    if (Array.isArray(prjPath)) {\n      prjCoords = prjPath;\n    } else {\n      prjCoords = geometry._getPrjCoordinates();\n      prjCoords.push(prjPath);\n    }\n\n    var path = prjCoords.map(function (c) {\n      return projection.unproject(c);\n    });\n    geometry.setCoordinates(path);\n\n    geometry._setPrjCoordinates(prjCoords);\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n};\nDrawTool.registerMode('linestring', extend({\n  'action': ['click', 'mousemove', 'dblclick']\n}, lineStringHooks));\nDrawTool.registerMode('freeHandLinestring', extend({\n  'action': ['mousedown', 'mousemove', 'mouseup']\n}, lineStringHooks));\nDrawTool.registerMode('arccurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var arc = new ArcCurve(path);\n\n    arc._setPrjCoordinates(prjPath);\n\n    return arc;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('quadbeziercurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var curve = new QuadBezierCurve(path);\n\n    curve._setPrjCoordinates(prjPath);\n\n    return curve;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('cubicbeziercurve', {\n  'action': ['click', 'mousemove', 'dblclick'],\n  'create': function create(projection, prjPath) {\n    var path = prjPath.map(function (c) {\n      return projection.unproject(c);\n    });\n    var curve = new CubicBezierCurve(path);\n\n    curve._setPrjCoordinates(prjPath);\n\n    return curve;\n  },\n  'update': lineStringHooks.update,\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\nDrawTool.registerMode('boxZoom', {\n  'action': ['mousedown', 'mousemove', 'mouseup'],\n  'create': function create(projection, prjCoord) {\n    prjCoord = prjCoord[0];\n    var center = projection.unproject(prjCoord);\n    var marker = new Marker(center);\n    marker._firstClick = prjCoord;\n    return marker;\n  },\n  'update': function update(projection, prjCoord, geometry, param) {\n    var map = geometry.getMap();\n\n    var p1 = map._prjToContainerPoint(geometry._firstClick),\n        p2 = param['containerPoint'];\n\n    prjCoord = map._containerPointToPrj(new Coordinate(Math.min(p1.x, p2.x), Math.min(p1.y, p2.y)));\n    var center = projection.unproject(prjCoord);\n\n    geometry.setCoordinates(center)._setPrjCoordinates(prjCoord);\n\n    geometry.updateSymbol({\n      markerWidth: Math.abs(p1.x - p2.x),\n      markerHeight: Math.abs(p1.y - p2.y)\n    });\n  },\n  'generate': function generate(geometry) {\n    return geometry;\n  }\n});\n\nfunction parse(arcConf) {\n  var tileInfo = arcConf['tileInfo'],\n      tileSize = [tileInfo['cols'], tileInfo['rows']],\n      resolutions = [],\n      lods = tileInfo['lods'];\n\n  for (var i = 0, len = lods.length; i < len; i++) {\n    resolutions.push(lods[i]['resolution']);\n  }\n\n  var fullExtent = arcConf['fullExtent'],\n      origin = tileInfo['origin'],\n      tileSystem = [1, -1, origin['x'], origin['y']];\n  delete fullExtent['spatialReference'];\n  return {\n    'spatialReference': {\n      'resolutions': resolutions,\n      'fullExtent': fullExtent\n    },\n    'tileSystem': tileSystem,\n    'tileSize': tileSize\n  };\n}\n\nSpatialReference.loadArcgis = function (url, cb, options) {\n  if (options === void 0) {\n    options = {\n      'jsonp': true\n    };\n  }\n\n  if (isString(url) && url.substring(0, 1) !== '{') {\n    Ajax.getJSON(url, function (err, json) {\n      if (err) {\n        cb(err);\n        return;\n      }\n\n      var spatialRef = parse(json);\n      cb(null, spatialRef);\n    }, options);\n  } else {\n    if (isString(url)) {\n      url = parseJSON(url);\n    }\n\n    var spatialRef = parse(url);\n    cb(null, spatialRef);\n  }\n\n  return this;\n};\n\nfunction getProjection(projection) {\n  var prj = projection.indexOf('EPSG') > -1 ? projection : 'EPSG:' + projection;\n  prj = strReplace(prj, [['4490', '4326'], ['102100', '3857'], ['900913', '3857']]);\n  return prj;\n}\n\nfunction strReplace(str, repArray) {\n  if (repArray === void 0) {\n    repArray = [];\n  }\n\n  repArray.forEach(function (rep) {\n    var template = rep[0],\n        value = rep[1];\n    str = str.replace(template, value);\n  });\n  return str;\n}\n\nfunction parseWMTSXML(str, requestUrl, options) {\n  var parser = new DOMParser();\n  var xmlDoc = parser.parseFromString(str, 'text/xml');\n  var content = xmlDoc.querySelectorAll('Contents')[0];\n\n  if (!content) {\n    return [];\n  }\n\n  var layers = content.getElementsByTagName('Layer');\n\n  if (!layers.length) {\n    return [];\n  }\n\n  var TileMatrixSets = [];\n\n  for (var i = 0, len = content.childNodes.length; i < len; i++) {\n    if (content.childNodes[i].nodeName === 'TileMatrixSet') {\n      TileMatrixSets.push(content.childNodes[i]);\n    }\n  }\n\n  if (!TileMatrixSets.length) {\n    return [];\n  }\n\n  var result = [];\n\n  for (var _i = 0, _len = layers.length; _i < _len; _i++) {\n    var layer = layers[_i];\n    var style = layer.querySelectorAll('Style')[0];\n\n    if (style) {\n      style = style.getElementsByTagName('ows:Identifier')[0];\n\n      if (style) {\n        style = style.textContent;\n      }\n    }\n\n    var layerName = layer.getElementsByTagName('ows:Identifier')[0];\n\n    if (layerName) {\n      layerName = layerName.textContent;\n    }\n\n    var resourceURL = layer.querySelectorAll('ResourceURL')[0];\n    var url = '';\n\n    if (resourceURL) {\n      url = resourceURL.attributes.template.value;\n    }\n\n    var _parseTileMatrixSet = parseTileMatrixSet(TileMatrixSets, _i, options),\n        resolutions = _parseTileMatrixSet.resolutions,\n        tileSize = _parseTileMatrixSet.tileSize,\n        tileSystem = _parseTileMatrixSet.tileSystem,\n        projection = _parseTileMatrixSet.projection,\n        TileMatrixSet = _parseTileMatrixSet.TileMatrixSet;\n\n    if (!url.length) {\n      url = requestUrl.substr(0, requestUrl.lastIndexOf('?'));\n      url += '?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER={LAYER}&STYLE={Style}&TILEMATRIXSET={TileMatrixSet}&FORMAT=tiles&TILEMATRIX={TileMatrix}&TILEROW={TileRow}&TILECOL={TileCol}';\n    }\n\n    var urlTemplate = strReplace(url, [['{LAYER}', layerName], ['{Layer}', layerName], ['{layer}', layerName], ['{STYLE}', style], ['{Style}', style], ['{style}', style], ['{TileMatrixSet}', TileMatrixSet], ['{TileMatrix}', '{z}'], ['{TileRow}', '{y}'], ['{TileCol}', '{x}']]);\n    result.push({\n      tileSize: tileSize,\n      tileSystem: tileSystem,\n      spatialReference: {\n        resolutions: resolutions,\n        projection: projection\n      },\n      urlTemplate: urlTemplate,\n      info: {\n        layerName: layerName,\n        TileMatrixSet: TileMatrixSet,\n        style: style,\n        tileSize: tileSize,\n        tileSystem: tileSystem,\n        resolutions: resolutions,\n        projection: projection,\n        urlTemplate: urlTemplate\n      }\n    });\n  }\n\n  return result;\n}\n\nfunction parseTileMatrixSet(TileMatrixSets, index, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var TileMatrixSet = TileMatrixSets[index];\n  var TileMatrixs = TileMatrixSet.getElementsByTagName('TileMatrix');\n  var resolutions = [],\n      tileSystem = [],\n      tileSize = [];\n  var projection, tset;\n\n  if (!projection) {\n    var supportedCRS = TileMatrixSet.getElementsByTagName('ows:SupportedCRS')[0];\n\n    if (supportedCRS) {\n      projection = supportedCRS.textContent;\n      projection = projection.split('EPSG')[1];\n\n      while (projection.indexOf(':') > -1) {\n        projection = projection.replace(':', '');\n      }\n\n      projection = getProjection(projection);\n    }\n  }\n\n  if (!tset) {\n    tset = TileMatrixSet.getElementsByTagName('ows:Identifier')[0];\n\n    if (tset) {\n      tset = tset.textContent;\n    }\n  }\n\n  var transformValue = 0.0002645833333333333;\n\n  if (options.isArcgis) {\n    transformValue = 0.00028;\n  }\n\n  if (projection && projection.indexOf('4326') > -1) {\n    transformValue = 2.3767925226029154e-9;\n\n    if (options.isArcgis) {\n      transformValue = 2.518101729011901e-9;\n    }\n  }\n\n  var minLevel = Infinity;\n\n  for (var _index = 0; _index < TileMatrixs.length; _index++) {\n    var TileMatrix = TileMatrixs[_index];\n    var level = TileMatrix.getElementsByTagName('ows:Identifier')[0].textContent;\n    level = parseInt(level);\n    minLevel = Math.min(minLevel, level);\n    var ScaleDenominator = TileMatrix.getElementsByTagName('ScaleDenominator')[0].textContent;\n    var TopLeftCorner = TileMatrix.getElementsByTagName('TopLeftCorner')[0].textContent;\n    var TileWidth = TileMatrix.getElementsByTagName('TileWidth')[0].textContent;\n    var TileHeight = TileMatrix.getElementsByTagName('TileHeight')[0].textContent;\n\n    if (tileSize.length === 0) {\n      tileSize.push(parseInt(TileWidth), parseInt(TileHeight));\n    }\n\n    if (tileSystem.length === 0) {\n      var _TopLeftCorner$split$ = TopLeftCorner.split(' ').filter(function (s) {\n        return s !== '';\n      }).map(function (v) {\n        return parseFloat(v);\n      }),\n          x = _TopLeftCorner$split$[0],\n          y = _TopLeftCorner$split$[1];\n\n      if (x > 0) {\n        tileSystem.push(1, -1, y, x);\n      } else {\n        tileSystem.push(1, -1, x, y);\n      }\n    }\n\n    var res = parseFloat(ScaleDenominator) * transformValue;\n    resolutions.push(res);\n  }\n\n  if (minLevel > 0) {\n    var _res = resolutions[0];\n\n    for (var i = minLevel - 1; i >= 0; i--) {\n      _res = _res * 2;\n      resolutions.splice(0, 0, _res);\n    }\n  }\n\n  return {\n    resolutions: resolutions,\n    tileSize: tileSize,\n    tileSystem: tileSystem,\n    projection: projection,\n    TileMatrixSet: tset\n  };\n}\n\nSpatialReference.loadWMTS = function (url, cb, options) {\n  if (options === void 0) {\n    options = {\n      'jsonp': true\n    };\n  }\n\n  if (isString(url)) {\n    Ajax.get(url, function (err, xml) {\n      if (err) {\n        cb(err);\n        return;\n      }\n\n      var layers = parseWMTSXML(xml, url, options);\n      cb(null, layers);\n    }, options);\n  }\n\n  return this;\n};\n\nvar options$j = {\n  'eventsPropagation': false,\n  'eventsToStop': null,\n  'dx': 0,\n  'dy': 0,\n  'autoPan': false,\n  'autoPanDuration': 600,\n  'single': true,\n  'animation': 'scale',\n  'animationOnHide': true,\n  'animationDuration': 500,\n  'pitchWithMap': false,\n  'rotateWithMap': false\n};\n\nvar UIComponent = function (_Eventable) {\n  _inheritsLoose(UIComponent, _Eventable);\n\n  function UIComponent(options) {\n    return _Eventable.call(this, options) || this;\n  }\n\n  var _proto = UIComponent.prototype;\n\n  _proto.addTo = function addTo(owner) {\n    this._owner = owner;\n\n    this._switchEvents('on');\n\n    if (this.onAdd) {\n      this.onAdd();\n    }\n\n    this.fire('add');\n    return this;\n  };\n\n  _proto.getMap = function getMap() {\n    if (!this._owner) {\n      return null;\n    }\n\n    if (this._owner.getBaseLayer) {\n      return this._owner;\n    }\n\n    return this._owner.getMap();\n  };\n\n  _proto.show = function show(coordinate) {\n    var map = this.getMap();\n\n    if (!map) {\n      return this;\n    }\n\n    if (!this._mapEventsOn) {\n      this._switchMapEvents('on');\n    }\n\n    coordinate = coordinate || this._coordinate || this._owner.getCenter();\n    var visible = this.isVisible();\n    this.fire('showstart');\n\n    var container = this._getUIContainer();\n\n    this._coordinate = coordinate;\n\n    this._removePrevDOM();\n\n    var dom = this.__uiDOM = this.buildOn(map);\n    dom['eventsPropagation'] = this.options['eventsPropagation'];\n\n    if (!dom) {\n      this.fire('showend');\n      return this;\n    }\n\n    this._measureSize(dom);\n\n    if (this._singleton()) {\n      map[this._uiDomKey()] = dom;\n    }\n\n    this._setPosition();\n\n    dom.style[TRANSITION] = null;\n    container.appendChild(dom);\n\n    var anim = this._getAnimation();\n\n    if (visible) {\n      anim.ok = false;\n    }\n\n    if (anim.ok) {\n      if (anim.fade) {\n        dom.style.opacity = 0;\n      }\n\n      if (anim.scale) {\n        if (this.getTransformOrigin) {\n          var origin = this.getTransformOrigin();\n          dom.style[TRANSFORMORIGIN] = origin;\n        }\n\n        dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(0)';\n      }\n    }\n\n    dom.style.display = '';\n\n    if (this.options['eventsToStop']) {\n      on(dom, this.options['eventsToStop'], stopPropagation);\n    }\n\n    if (this.options['autoPan']) {\n      this._autoPan();\n    }\n\n    var transition = anim.transition;\n\n    if (anim.ok && transition) {\n      dom.offsetHeight;\n\n      if (transition) {\n        dom.style[TRANSITION] = transition;\n      }\n\n      if (anim.fade) {\n        dom.style.opacity = 1;\n      }\n\n      if (anim.scale) {\n        dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(1)';\n      }\n    }\n\n    this.fire('showend');\n    return this;\n  };\n\n  _proto.hide = function hide() {\n    var _this = this;\n\n    if (!this.getDOM() || !this.getMap()) {\n      return this;\n    }\n\n    var anim = this._getAnimation(),\n        dom = this.getDOM();\n\n    if (!this.options['animationOnHide']) {\n      anim.ok = false;\n    }\n\n    if (!anim.ok) {\n      dom.style.display = 'none';\n      this.fire('hide');\n    } else {\n      dom.offsetHeight;\n      dom.style[TRANSITION] = anim.transition;\n      setTimeout(function () {\n        dom.style.display = 'none';\n\n        _this.fire('hide');\n      }, this.options['animationDuration']);\n    }\n\n    if (anim.fade) {\n      dom.style.opacity = 0;\n    }\n\n    if (anim.scale) {\n      dom.style[TRANSFORM] = this._toCSSTranslate(this._pos) + ' scale(0)';\n    }\n\n    return this;\n  };\n\n  _proto.isVisible = function isVisible() {\n    var dom = this.getDOM();\n    return this.getMap() && dom && dom.parentNode && dom.style.display !== 'none';\n  };\n\n  _proto.remove = function remove() {\n    delete this._mapEventsOn;\n\n    if (!this._owner) {\n      return this;\n    }\n\n    this.hide();\n\n    this._switchEvents('off');\n\n    if (this.onRemove) {\n      this.onRemove();\n    }\n\n    if (!this._singleton() && this.__uiDOM) {\n      this._removePrevDOM();\n    }\n\n    delete this._owner;\n    this.fire('remove');\n    return this;\n  };\n\n  _proto.getSize = function getSize() {\n    if (this._size) {\n      return this._size.copy();\n    } else {\n      return null;\n    }\n  };\n\n  _proto.getOwner = function getOwner() {\n    return this._owner;\n  };\n\n  _proto.getDOM = function getDOM() {\n    return this.__uiDOM;\n  };\n\n  _proto.getPosition = function getPosition() {\n    if (!this.getMap()) {\n      return null;\n    }\n\n    var p = this._getViewPoint()._round();\n\n    if (this.getOffset) {\n      var o = this.getOffset()._round();\n\n      if (o) {\n        p._add(o);\n      }\n    }\n\n    return p;\n  };\n\n  _proto._getAnimation = function _getAnimation() {\n    var anim = {\n      'fade': false,\n      'scale': false\n    };\n    var animations = this.options['animation'] ? this.options['animation'].split(',') : [];\n\n    for (var i = 0; i < animations.length; i++) {\n      var trimed = trim(animations[i]);\n\n      if (trimed === 'fade') {\n        anim.fade = true;\n      } else if (trimed === 'scale') {\n        anim.scale = true;\n      }\n    }\n\n    var transition = null;\n\n    if (anim.fade) {\n      transition = 'opacity ' + this.options['animationDuration'] + 'ms';\n    }\n\n    if (anim.scale) {\n      transition = transition ? transition + ',' : '';\n      transition += TRANSFORM + ' ' + this.options['animationDuration'] + 'ms';\n    }\n\n    anim.transition = transition;\n    anim.ok = transition !== null;\n    return anim;\n  };\n\n  _proto._getViewPoint = function _getViewPoint() {\n    var alt = 0;\n\n    if (this._owner && this._owner.getAltitude) {\n      var altitude = this._owner.getAltitude();\n\n      if (altitude > 0) {\n        alt = this._meterToPoint(this._coordinate, altitude);\n      }\n    }\n\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, alt)._add(this.options['dx'], this.options['dy']);\n  };\n\n  _proto._meterToPoint = function _meterToPoint(center, altitude) {\n    var map = this.getMap();\n    return map.distanceToPoint(altitude, 0, undefined, center).x * sign(altitude);\n  };\n\n  _proto._autoPan = function _autoPan() {\n    var map = this.getMap(),\n        dom = this.getDOM();\n\n    if (map.isMoving()) {\n      return;\n    }\n\n    var point = this._pos;\n    var mapSize = map.getSize(),\n        mapWidth = mapSize['width'],\n        mapHeight = mapSize['height'];\n    var containerPoint = map.viewPointToContainerPoint(point);\n    var clientWidth = parseInt(dom.clientWidth),\n        clientHeight = parseInt(dom.clientHeight);\n    var left = 0,\n        top = 0;\n\n    if (containerPoint.x < 0) {\n      left = -(containerPoint.x - clientWidth / 2);\n    } else if (containerPoint.x + clientWidth - 35 > mapWidth) {\n      left = mapWidth - (containerPoint.x + clientWidth * 3 / 2);\n    }\n\n    if (containerPoint.y - clientHeight < 0) {\n      top = -(containerPoint.y - clientHeight) + 50;\n    } else if (containerPoint.y > mapHeight) {\n      top = mapHeight - containerPoint.y - clientHeight - 30;\n    }\n\n    if (top !== 0 || left !== 0) {\n      map.panBy(new Point(left, top), {\n        'duration': this.options['autoPanDuration']\n      });\n    }\n  };\n\n  _proto._measureSize = function _measureSize(dom) {\n    var container = this._getUIContainer();\n\n    dom.style.position = 'absolute';\n    dom.style.left = -99999 + 'px';\n    var anchor = dom.style.bottom ? 'bottom' : 'top';\n    dom.style[anchor] = -99999 + 'px';\n    dom.style.display = '';\n    container.appendChild(dom);\n    this._size = new Size(dom.clientWidth, dom.clientHeight);\n    dom.style.display = 'none';\n    dom.style.left = '0px';\n    dom.style[anchor] = '0px';\n    return this._size;\n  };\n\n  _proto._removePrevDOM = function _removePrevDOM() {\n    if (this.onDomRemove) {\n      this.onDomRemove();\n    }\n\n    var eventsToStop = this.options['eventsToStop'];\n\n    if (this._singleton()) {\n      var map = this.getMap(),\n          key = this._uiDomKey();\n\n      if (map[key]) {\n        if (eventsToStop) {\n          off(map[key], eventsToStop, stopPropagation);\n        }\n\n        removeDomNode(map[key]);\n        delete map[key];\n      }\n\n      delete this.__uiDOM;\n    } else if (this.__uiDOM) {\n      if (eventsToStop) {\n        off(this.__uiDOM, eventsToStop, stopPropagation);\n      }\n\n      removeDomNode(this.__uiDOM);\n      delete this.__uiDOM;\n    }\n  };\n\n  _proto._uiDomKey = function _uiDomKey() {\n    return '__ui_' + this._getClassName();\n  };\n\n  _proto._singleton = function _singleton() {\n    return this.options['single'];\n  };\n\n  _proto._getUIContainer = function _getUIContainer() {\n    return this.getMap()._panels['ui'];\n  };\n\n  _proto._getClassName = function _getClassName() {\n    return 'UIComponent';\n  };\n\n  _proto._switchMapEvents = function _switchMapEvents(to) {\n    var map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    this._mapEventsOn = to === 'on';\n\n    var events = this._getDefaultEvents();\n\n    if (this.getEvents) {\n      extend(events, this.getEvents());\n    }\n\n    if (events) {\n      for (var p in events) {\n        if (events.hasOwnProperty(p)) {\n          map[to](p, events[p], this);\n        }\n      }\n    }\n  };\n\n  _proto._switchEvents = function _switchEvents(to) {\n    this._switchMapEvents(to);\n\n    var ownerEvents = this._getOwnerEvents();\n\n    if (this._owner) {\n      for (var p in ownerEvents) {\n        if (ownerEvents.hasOwnProperty(p)) {\n          this._owner[to](p, ownerEvents[p], this);\n        }\n      }\n    }\n  };\n\n  _proto._getDefaultEvents = function _getDefaultEvents() {\n    return {\n      'zooming rotate pitch': this.onEvent,\n      'zoomend': this.onZoomEnd,\n      'moving': this.onMoving,\n      'resize': this.onResize\n    };\n  };\n\n  _proto._getOwnerEvents = function _getOwnerEvents() {\n    var events = {};\n\n    if (this._owner && this._owner instanceof Geometry) {\n      events.positionchange = this.onGeometryPositionChange;\n    }\n\n    if (this.getOwnerEvents) {\n      extend(events, this.getOwnerEvents());\n    }\n\n    return events;\n  };\n\n  _proto.onGeometryPositionChange = function onGeometryPositionChange(param) {\n    if (this._owner && this.isVisible()) {\n      this.show(param['target'].getCenter());\n    }\n  };\n\n  _proto.onMoving = function onMoving() {\n    if (this.isVisible() && this.getMap().isTransforming()) {\n      this._updatePosition();\n    }\n  };\n\n  _proto.onEvent = function onEvent() {\n    if (this.isVisible()) {\n      this._updatePosition();\n    }\n  };\n\n  _proto.onZoomEnd = function onZoomEnd() {\n    if (this.isVisible()) {\n      this._setPosition();\n    }\n  };\n\n  _proto.onResize = function onResize() {\n    if (this.isVisible()) {\n      this._setPosition();\n    }\n  };\n\n  _proto._updatePosition = function _updatePosition() {\n    var renderer = this.getMap()._getRenderer();\n\n    renderer.callInNextFrame(this._setPosition.bind(this));\n  };\n\n  _proto._setPosition = function _setPosition() {\n    var dom = this.getDOM();\n    if (!dom) return;\n    dom.style[TRANSITION] = null;\n    var p = this.getPosition();\n    this._pos = p;\n    dom.style[TRANSFORM] = this._toCSSTranslate(p) + ' scale(1)';\n  };\n\n  _proto._toCSSTranslate = function _toCSSTranslate(p) {\n    if (!p) {\n      return '';\n    }\n\n    if (Browser$1.any3d) {\n      var map = this.getMap(),\n          bearing = map ? map.getBearing() : 0,\n          pitch = map ? map.getPitch() : 0;\n      var r = '';\n\n      if (this.options['pitchWithMap'] && pitch) {\n        r += \" rotateX(\" + Math.round(pitch) + \"deg)\";\n      }\n\n      if (this.options['rotateWithMap'] && bearing) {\n        r += \" rotateZ(\" + Math.round(-bearing) + \"deg)\";\n      }\n\n      return 'translate3d(' + p.x + 'px,' + p.y + 'px, 0px)' + r;\n    } else {\n      return 'translate(' + p.x + 'px,' + p.y + 'px)';\n    }\n  };\n\n  UIComponent.isSupport = function isSupport(owner) {\n    if (owner && isFunction(owner.on) && isFunction(owner.off) && isFunction(owner.getCenter)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return UIComponent;\n}(Eventable(Class));\n\nUIComponent.mergeOptions(options$j);\nvar options$k = {\n  'containerClass': null,\n  'eventsPropagation': true,\n  'draggable': false,\n  'single': false,\n  'content': null\n};\nvar domEvents = 'mousedown ' + 'mouseup ' + 'mouseenter ' + 'mouseover ' + 'mouseout ' + 'mousemove ' + 'click ' + 'dblclick ' + 'contextmenu ' + 'keypress ' + 'touchstart ' + 'touchmove ' + 'touchend';\n\nvar UIMarker = function (_Handlerable) {\n  _inheritsLoose(UIMarker, _Handlerable);\n\n  function UIMarker(coordinate, options) {\n    var _this;\n\n    _this = _Handlerable.call(this, options) || this;\n    _this._markerCoord = new Coordinate(coordinate);\n    return _this;\n  }\n\n  var _proto = UIMarker.prototype;\n\n  _proto._getClassName = function _getClassName() {\n    return 'UIMarker';\n  };\n\n  _proto.setCoordinates = function setCoordinates(coordinates) {\n    this._markerCoord = coordinates;\n    this.fire('positionchange');\n\n    if (this.isVisible()) {\n      this._coordinate = this._markerCoord;\n\n      this._setPosition();\n    }\n\n    return this;\n  };\n\n  _proto.getCoordinates = function getCoordinates() {\n    return this._markerCoord;\n  };\n\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n\n    if (this.isVisible()) {\n      this.show();\n    }\n\n    return this;\n  };\n\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n\n  _proto.onAdd = function onAdd() {\n    this.show();\n  };\n\n  _proto.show = function show() {\n    return _Handlerable.prototype.show.call(this, this._markerCoord);\n  };\n\n  _proto.flash = function flash$$1(interval, count, cb, context) {\n    return flash.call(this, interval, count, cb, context);\n  };\n\n  _proto.buildOn = function buildOn() {\n    var dom;\n\n    if (isString(this.options['content'])) {\n      dom = createEl('div');\n      dom.innerHTML = this.options['content'];\n    } else {\n      dom = this.options['content'];\n    }\n\n    if (this.options['containerClass']) {\n      dom.className = this.options['containerClass'];\n    }\n\n    this._registerDOMEvents(dom);\n\n    return dom;\n  };\n\n  _proto.getOffset = function getOffset() {\n    var size = this.getSize();\n    return new Point(-size.width / 2, -size.height / 2);\n  };\n\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    return 'center center';\n  };\n\n  _proto.onDomRemove = function onDomRemove() {\n    var dom = this.getDOM();\n\n    this._removeDOMEvents(dom);\n  };\n\n  _proto.isDragging = function isDragging() {\n    if (this['draggable']) {\n      return this['draggable'].isDragging();\n    }\n\n    return false;\n  };\n\n  _proto._registerDOMEvents = function _registerDOMEvents(dom) {\n    on(dom, domEvents, this._onDomEvents, this);\n  };\n\n  _proto._onDomEvents = function _onDomEvents(e) {\n    var event = this.getMap()._parseEvent(e, e.type);\n\n    this.fire(e.type, event);\n  };\n\n  _proto._removeDOMEvents = function _removeDOMEvents(dom) {\n    off(dom, domEvents, this._onDomEvents, this);\n  };\n\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var map = this.getMap();\n    var containerPoint = map.coordToContainerPoint(this.getCoordinates());\n    var size = this.getSize(),\n        width = size.width,\n        height = size.height;\n    var anchors = [map.containerPointToCoordinate(containerPoint.add(-width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(0, height / 2)), map.containerPointToCoordinate(containerPoint.add(0, -height / 2))];\n    return anchors;\n  };\n\n  return UIMarker;\n}(Handlerable(UIComponent));\n\nUIMarker.mergeOptions(options$k);\nvar EVENTS$1 = Browser$1.touch ? 'touchstart mousedown' : 'mousedown';\n\nvar UIMarkerDragHandler = function (_Handler) {\n  _inheritsLoose(UIMarkerDragHandler, _Handler);\n\n  function UIMarkerDragHandler(target) {\n    return _Handler.call(this, target) || this;\n  }\n\n  var _proto2 = UIMarkerDragHandler.prototype;\n\n  _proto2.addHooks = function addHooks() {\n    this.target.on(EVENTS$1, this._startDrag, this);\n  };\n\n  _proto2.removeHooks = function removeHooks() {\n    this.target.off(EVENTS$1, this._startDrag, this);\n  };\n\n  _proto2._startDrag = function _startDrag(param) {\n    var domEvent = param['domEvent'];\n\n    if (domEvent.touches && domEvent.touches.length > 1 || domEvent.button === 2) {\n      return;\n    }\n\n    if (this.isDragging()) {\n      return;\n    }\n\n    this.target.on('click', this._endDrag, this);\n    this._lastCoord = param['coordinate'];\n    this._lastPoint = param['containerPoint'];\n\n    this._prepareDragHandler();\n\n    this._dragHandler.onMouseDown(param['domEvent']);\n\n    this.target.fire('dragstart', param);\n  };\n\n  _proto2._prepareDragHandler = function _prepareDragHandler() {\n    this._dragHandler = new DragHandler(this.target.getDOM(), {\n      'cancelOn': this._cancelOn.bind(this),\n      'ignoreMouseleave': true\n    });\n\n    this._dragHandler.on('mousedown', this._onMouseDown, this);\n\n    this._dragHandler.on('dragging', this._dragging, this);\n\n    this._dragHandler.on('mouseup', this._endDrag, this);\n\n    this._dragHandler.enable();\n  };\n\n  _proto2._cancelOn = function _cancelOn(domEvent) {\n    var target = domEvent.srcElement || domEvent.target,\n        tagName = target.tagName.toLowerCase();\n\n    if (tagName === 'button' || tagName === 'input' || tagName === 'select' || tagName === 'option' || tagName === 'textarea') {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto2._onMouseDown = function _onMouseDown(param) {\n    stopPropagation(param['domEvent']);\n  };\n\n  _proto2._dragging = function _dragging(param) {\n    var target = this.target,\n        map = target.getMap(),\n        eventParam = map._parseEvent(param['domEvent']),\n        domEvent = eventParam['domEvent'];\n\n    if (domEvent.touches && domEvent.touches.length > 1) {\n      return;\n    }\n\n    if (!this._isDragging) {\n      this._isDragging = true;\n      return;\n    }\n\n    var coord = eventParam['coordinate'],\n        point = eventParam['containerPoint'];\n\n    if (!this._lastCoord) {\n      this._lastCoord = coord;\n    }\n\n    if (!this._lastPoint) {\n      this._lastPoint = point;\n    }\n\n    var coordOffset = coord.sub(this._lastCoord),\n        pointOffset = point.sub(this._lastPoint);\n    this._lastCoord = coord;\n    this._lastPoint = point;\n    this.target.setCoordinates(this.target.getCoordinates().add(coordOffset));\n    eventParam['coordOffset'] = coordOffset;\n    eventParam['pointOffset'] = pointOffset;\n    target.fire('dragging', eventParam);\n  };\n\n  _proto2._endDrag = function _endDrag(param) {\n    var target = this.target,\n        map = target.getMap();\n\n    if (this._dragHandler) {\n      target.off('click', this._endDrag, this);\n\n      this._dragHandler.disable();\n\n      delete this._dragHandler;\n    }\n\n    delete this._lastCoord;\n    delete this._lastPoint;\n    this._isDragging = false;\n\n    if (!map) {\n      return;\n    }\n\n    var eventParam = map._parseEvent(param['domEvent']);\n\n    target.fire('dragend', eventParam);\n  };\n\n  _proto2.isDragging = function isDragging() {\n    if (!this._isDragging) {\n      return false;\n    }\n\n    return true;\n  };\n\n  return UIMarkerDragHandler;\n}(Handler$1);\n\nUIMarker.addInitHook('addHandler', 'draggable', UIMarkerDragHandler);\nvar options$l = {\n  'containerClass': 'maptalks-msgBox',\n  'autoPan': true,\n  'autoCloseOn': null,\n  'autoOpenOn': 'click',\n  'width': 300,\n  'minHeight': 120,\n  'custom': false,\n  'title': null,\n  'content': null\n};\n\nvar InfoWindow = function (_UIComponent) {\n  _inheritsLoose(InfoWindow, _UIComponent);\n\n  function InfoWindow() {\n    return _UIComponent.apply(this, arguments) || this;\n  }\n\n  var _proto = InfoWindow.prototype;\n\n  _proto._getClassName = function _getClassName() {\n    return 'InfoWindow';\n  };\n\n  _proto.addTo = function addTo(owner) {\n    if (owner instanceof Geometry) {\n      if (owner.getInfoWindow() && owner.getInfoWindow() !== this) {\n        owner.removeInfoWindow();\n      }\n\n      owner._infoWindow = this;\n    }\n\n    return _UIComponent.prototype.addTo.call(this, owner);\n  };\n\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n\n    if (this.isVisible()) {\n      this.show(this._coordinate);\n    }\n\n    return this;\n  };\n\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n\n  _proto.setTitle = function setTitle(title) {\n    var old = title;\n    this.options['title'] = title;\n    this.fire('contentchange', {\n      'old': old,\n      'new': title\n    });\n\n    if (this.isVisible()) {\n      this.show(this._coordinate);\n    }\n\n    return this;\n  };\n\n  _proto.getTitle = function getTitle() {\n    return this.options['title'];\n  };\n\n  _proto.buildOn = function buildOn() {\n    if (this.options['custom']) {\n      if (isString(this.options['content'])) {\n        var _dom = createEl('div');\n\n        _dom.innerHTML = this.options['content'];\n        return _dom;\n      } else {\n        return this.options['content'];\n      }\n    }\n\n    var dom = createEl('div');\n\n    if (this.options['containerClass']) {\n      dom.className = this.options['containerClass'];\n    }\n\n    dom.style.width = this._getWindowWidth() + 'px';\n    dom.style.bottom = '0px';\n    var content = '<em class=\"maptalks-ico\"></em>';\n\n    if (this.options['title']) {\n      content += '<h2>' + this.options['title'] + '</h2>';\n    }\n\n    content += '<a href=\"javascript:void(0);\" class=\"maptalks-close\"></a><div class=\"maptalks-msgContent\"></div>';\n    dom.innerHTML = content;\n    var msgContent = dom.querySelector('.maptalks-msgContent');\n\n    if (isString(this.options['content'])) {\n      msgContent.innerHTML = this.options['content'];\n    } else {\n      msgContent.appendChild(this.options['content']);\n    }\n\n    this._onCloseBtnClick = this.hide.bind(this);\n    var closeBtn = dom.querySelector('.maptalks-close');\n    addDomEvent(closeBtn, 'click touchend', this._onCloseBtnClick);\n    return dom;\n  };\n\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    var size = this.getSize();\n    return size.width / 2 + 'px bottom';\n  };\n\n  _proto.getOffset = function getOffset() {\n    var size = this.getSize();\n    var o = new Point(-size['width'] / 2, 0);\n\n    if (!this.options['custom']) {\n      o._sub(4, 12);\n    } else {\n      o._sub(0, size['height']);\n    }\n\n    var owner = this.getOwner();\n\n    if (owner instanceof Marker || owner instanceof MultiPoint) {\n      var painter, markerSize;\n\n      if (owner instanceof Marker) {\n        painter = owner._getPainter();\n        markerSize = owner.getSize();\n      } else {\n        var children = owner.getGeometries();\n\n        if (!children || !children.length) {\n          return o;\n        }\n\n        painter = children[0]._getPainter();\n        markerSize = children[0].getSize();\n      }\n\n      if (painter) {\n        var fixExtent = painter.getFixedExtent();\n\n        o._add(fixExtent.xmax - markerSize.width / 2, fixExtent.ymin);\n      } else {\n        o._add(0, -markerSize.height);\n      }\n    }\n\n    return o;\n  };\n\n  _proto.show = function show(coordinate) {\n    if (!this.getMap()) {\n      return this;\n    }\n\n    if (!this.getMap().options['enableInfoWindow']) {\n      return this;\n    }\n\n    return _UIComponent.prototype.show.call(this, coordinate);\n  };\n\n  _proto.getEvents = function getEvents() {\n    if (!this.options['autoCloseOn']) {\n      return null;\n    }\n\n    var events = {};\n    events[this.options['autoCloseOn']] = this.hide;\n    return events;\n  };\n\n  _proto.getOwnerEvents = function getOwnerEvents() {\n    var owner = this.getOwner();\n\n    if (!this.options['autoOpenOn'] || !owner) {\n      return null;\n    }\n\n    var events = {};\n    events[this.options['autoOpenOn']] = this._onAutoOpen;\n    return events;\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.onDomRemove();\n  };\n\n  _proto.onDomRemove = function onDomRemove() {\n    if (this._onCloseBtnClick) {\n      var dom = this.getDOM();\n      var closeBtn = dom.childNodes[2];\n      removeDomEvent(closeBtn, 'click touchend', this._onCloseBtnClick);\n      delete this._onCloseBtnClick;\n    }\n  };\n\n  _proto._onAutoOpen = function _onAutoOpen(e) {\n    var _this = this;\n\n    var owner = this.getOwner();\n    setTimeout(function () {\n      if (owner instanceof Marker || owner instanceof UIComponent) {\n        _this.show(owner.getCoordinates());\n      } else if (owner instanceof MultiPoint) {\n        _this.show(owner.findClosest(e.coordinate));\n      } else if (owner instanceof LineString || owner instanceof MultiLineString) {\n        if (_this.getMap().getScale() >= 8) {\n          e.coordinate = _this._rectifyMouseCoordinte(owner, e.coordinate);\n        }\n\n        _this.show(e.coordinate);\n      } else {\n        _this.show(e.coordinate);\n      }\n    }, 1);\n  };\n\n  _proto._rectifyMouseCoordinte = function _rectifyMouseCoordinte(owner, mouseCoordinate) {\n    var _this2 = this;\n\n    if (owner instanceof LineString) {\n      return this._rectifyLineStringMouseCoordinate(owner, mouseCoordinate).coordinate;\n    } else if (owner instanceof MultiLineString) {\n      return owner.getGeometries().map(function (lineString) {\n        return _this2._rectifyLineStringMouseCoordinate(lineString, mouseCoordinate);\n      }).sort(function (a, b) {\n        return a.dis - b.dis;\n      })[0].coordinate;\n    }\n\n    return mouseCoordinate;\n  };\n\n  _proto._rectifyLineStringMouseCoordinate = function _rectifyLineStringMouseCoordinate(lineString, mouseCoordinate) {\n    var _this3 = this;\n\n    var pts = lineString.getCoordinates().map(function (coordinate) {\n      return _this3.getMap().coordToContainerPoint(coordinate);\n    });\n    var mousePt = this.getMap().coordToContainerPoint(mouseCoordinate);\n    var minDis = Infinity,\n        coordinateIndex = -1;\n\n    for (var i = 0, len = pts.length; i < len; i++) {\n      var pt = pts[i];\n      var dis = mousePt.distanceTo(pt);\n\n      if (dis < minDis) {\n        minDis = dis;\n        coordinateIndex = i;\n      }\n    }\n\n    var filterPts = [];\n\n    if (coordinateIndex === 0) {\n      filterPts.push(pts[0], pts[1]);\n    } else if (coordinateIndex === pts.length - 1) {\n      filterPts.push(pts[coordinateIndex - 1], pts[coordinateIndex]);\n    } else {\n      filterPts.push(pts[coordinateIndex - 1], pts[coordinateIndex], pts[coordinateIndex + 1]);\n    }\n\n    var xys = [];\n\n    var _this$getMap$getSize = this.getMap().getSize(),\n        width = _this$getMap$getSize.width,\n        height = _this$getMap$getSize.height;\n\n    for (var _i = 0, _len = filterPts.length - 1; _i < _len; _i++) {\n      var pt1 = filterPts[_i],\n          pt2 = filterPts[_i + 1];\n\n      if (pt1.x === pt2.x) {\n        var miny = Math.max(0, Math.min(pt1.y, pt2.y));\n        var maxy = Math.min(height, Math.max(pt1.y, pt2.y));\n\n        for (var y = miny; y <= maxy; y++) {\n          xys.push(new Point(pt1.x, y));\n        }\n      } else {\n        var k = (pt2.y - pt1.y) / (pt2.x - pt1.x);\n        var minx = Math.max(0, Math.min(pt1.x, pt2.x));\n        var maxx = Math.min(width, Math.max(pt1.x, pt2.x));\n\n        for (var x = minx; x <= maxx; x++) {\n          var _y = k * (x - pt1.x) + pt1.y;\n\n          xys.push(new Point(x, _y));\n        }\n      }\n    }\n\n    var minPtDis = Infinity,\n        ptIndex = -1;\n\n    for (var _i2 = 0, _len2 = xys.length; _i2 < _len2; _i2++) {\n      var _pt = xys[_i2];\n\n      var _dis = mousePt.distanceTo(_pt);\n\n      if (_dis < minPtDis) {\n        minPtDis = _dis;\n        ptIndex = _i2;\n      }\n    }\n\n    return {\n      dis: minPtDis,\n      coordinate: ptIndex < 0 ? mouseCoordinate : this.getMap().containerPointToCoord(xys[ptIndex])\n    };\n  };\n\n  _proto._getWindowWidth = function _getWindowWidth() {\n    var defaultWidth = 300;\n    var width = this.options['width'];\n\n    if (!width) {\n      width = defaultWidth;\n    }\n\n    return width;\n  };\n\n  return InfoWindow;\n}(UIComponent);\n\nInfoWindow.mergeOptions(options$l);\nvar options$m = {\n  'width': 0,\n  'height': 0,\n  'animation': 'fade',\n  'containerClass': 'maptalks-tooltip',\n  'showTimeout': 400\n};\n\nvar ToolTip = function (_UIComponent) {\n  _inheritsLoose(ToolTip, _UIComponent);\n\n  var _proto = ToolTip.prototype;\n\n  _proto._getClassName = function _getClassName() {\n    return 'ToolTip';\n  };\n\n  function ToolTip(content, options) {\n    var _this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    _this = _UIComponent.call(this, options) || this;\n    _this._content = content;\n    return _this;\n  }\n\n  _proto.addTo = function addTo(owner) {\n    if (ToolTip.isSupport(owner)) {\n      owner.on('mousemove', this.onMouseMove, this);\n      owner.on('mouseout', this.onMouseOut, this);\n      return _UIComponent.prototype.addTo.call(this, owner);\n    } else {\n      throw new Error('Invalid geometry or UIMarker the tooltip is added to.');\n    }\n  };\n\n  _proto.setStyle = function setStyle$$1(cssName) {\n    this.options.containerClass = cssName;\n    return this;\n  };\n\n  _proto.getStyle = function getStyle() {\n    return this.options.containerClass;\n  };\n\n  _proto.getContent = function getContent() {\n    return this._content;\n  };\n\n  _proto.buildOn = function buildOn() {\n    var dom = createEl('div');\n    var options = this.options || {};\n\n    if (options.height) {\n      dom.style.height = options.height + 'px';\n    }\n\n    if (options.width) {\n      dom.style.width = options.width + 'px';\n    }\n\n    var cssName = options.containerClass || options.cssName;\n\n    if (!cssName && options.height) {\n      dom.style.lineHeight = options.height + 'px';\n    }\n\n    dom.innerHTML = \"<div class=\\\"\" + cssName + \"\\\">\" + this._content + \"</div>\";\n    return dom;\n  };\n\n  _proto.onMouseOut = function onMouseOut() {\n    clearTimeout(this._timeout);\n\n    if (this.isVisible()) {\n      this._removePrevDOM();\n    }\n  };\n\n  _proto.onMouseMove = function onMouseMove(e) {\n    var _this2 = this;\n\n    clearTimeout(this._timeout);\n    var map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    var coord = map.locateByPoint(e.coordinate, -5, 25);\n\n    if (this.options['showTimeout'] === 0) {\n      this.show(coord);\n    } else {\n      this._timeout = setTimeout(function () {\n        if (map) {\n          _this2.show(coord);\n        }\n      }, this.options['showTimeout']);\n    }\n  };\n\n  _proto.onRemove = function onRemove() {\n    clearTimeout(this._timeout);\n\n    if (this._owner) {\n      this._owner.off('mouseover', this.onMouseOver, this);\n\n      this._owner.off('mouseout', this.onMouseOut, this);\n    }\n  };\n\n  _proto._getViewPoint = function _getViewPoint() {\n    return this.getMap().coordToViewPoint(this._coordinate, undefined, 0)._add(this.options['dx'], this.options['dy']);\n  };\n\n  return ToolTip;\n}(UIComponent);\n\nToolTip.mergeOptions(options$m);\nvar defaultOptions = {\n  'containerClass': 'maptalks-menu',\n  'animation': null,\n  'animationDelay': 10,\n  'animationOnHide': false,\n  'autoPan': false,\n  'width': 160,\n  'maxHeight': 0,\n  'custom': false,\n  'items': []\n};\n\nvar Menu = function (_UIComponent) {\n  _inheritsLoose(Menu, _UIComponent);\n\n  function Menu(options) {\n    return _UIComponent.call(this, options) || this;\n  }\n\n  var _proto = Menu.prototype;\n\n  _proto._getClassName = function _getClassName() {\n    return 'Menu';\n  };\n\n  _proto.addTo = function addTo(owner) {\n    if (owner._menu && owner._menu !== this) {\n      owner.removeMenu();\n    }\n\n    owner._menu = this;\n    return UIComponent.prototype.addTo.apply(this, arguments);\n  };\n\n  _proto.setItems = function setItems(items) {\n    this.options['items'] = items;\n    return this;\n  };\n\n  _proto.getItems = function getItems() {\n    return this.options['items'] || [];\n  };\n\n  _proto.buildOn = function buildOn() {\n    if (this.options['custom']) {\n      if (isString(this.options['items'])) {\n        var container = createEl('div');\n        container.innerHTML = this.options['items'];\n        return container;\n      } else {\n        return this.options['items'];\n      }\n    } else {\n      var dom = createEl('div');\n\n      if (this.options['containerClass']) {\n        addClass(dom, this.options['containerClass']);\n      }\n\n      dom.style.width = this._getMenuWidth() + 'px';\n\n      var menuItems = this._createMenuItemDom();\n\n      dom.appendChild(menuItems);\n      on(dom, 'contextmenu', preventDefault);\n      return dom;\n    }\n  };\n\n  _proto.getOffset = function getOffset() {\n    if (!this.getMap()) {\n      return null;\n    }\n\n    var mapSize = this.getMap().getSize(),\n        p = this.getMap().viewPointToContainerPoint(this._getViewPoint()),\n        size = this.getSize();\n    var dx = 0,\n        dy = 0;\n\n    if (p.x + size['width'] > mapSize['width']) {\n      dx = -size['width'];\n    }\n\n    if (p.y + size['height'] > mapSize['height']) {\n      dy = -size['height'];\n    }\n\n    return new Point(dx, dy);\n  };\n\n  _proto.getTransformOrigin = function getTransformOrigin() {\n    var p = this.getOffset()._multi(-1);\n\n    return p.x + 'px ' + p.y + 'px';\n  };\n\n  _proto.getEvents = function getEvents() {\n    return {\n      '_zoomstart _zoomend _movestart _dblclick _click': this._removePrevDOM\n    };\n  };\n\n  _proto._createMenuItemDom = function _createMenuItemDom() {\n    var me = this;\n    var map = this.getMap();\n    var ul = createEl('ul');\n    addClass(ul, 'maptalks-menu-items');\n    var items = this.getItems();\n\n    function onMenuClick(index) {\n      return function (e) {\n        var param = map._parseEvent(e, 'click');\n\n        param['target'] = me;\n        param['owner'] = me._owner;\n        param['index'] = index;\n\n        var result = this._callback(param);\n\n        if (result === false) {\n          return;\n        }\n\n        me.hide();\n      };\n    }\n\n    var item, itemDOM;\n\n    for (var i = 0, len = items.length; i < len; i++) {\n      item = items[i];\n\n      if (item === '-' || item === '_') {\n        itemDOM = createEl('li');\n        addClass(itemDOM, 'maptalks-menu-splitter');\n      } else {\n        itemDOM = createEl('li');\n        var itemTitle = item['item'];\n\n        if (isFunction(itemTitle)) {\n          itemTitle = itemTitle({\n            'owner': this._owner,\n            'index': i\n          });\n        }\n\n        itemDOM.innerHTML = itemTitle;\n        itemDOM._callback = item['click'];\n        on(itemDOM, 'click', onMenuClick(i));\n      }\n\n      ul.appendChild(itemDOM);\n    }\n\n    var maxHeight = this.options['maxHeight'] || 0;\n\n    if (maxHeight > 0) {\n      setStyle(ul, 'max-height: ' + maxHeight + 'px; overflow-y: auto;');\n    }\n\n    return ul;\n  };\n\n  _proto._getMenuWidth = function _getMenuWidth() {\n    var defaultWidth = 160;\n    var width = this.options['width'] || defaultWidth;\n    return width;\n  };\n\n  return Menu;\n}(UIComponent);\n\nMenu.mergeOptions(defaultOptions);\nvar Menuable = {\n  setMenu: function setMenu(options) {\n    this._menuOptions = options;\n\n    if (this._menu) {\n      this._menu.setOptions(options);\n    } else {\n      this.on('contextmenu', this._defaultOpenMenu, this);\n    }\n\n    return this;\n  },\n  openMenu: function openMenu(coordinate) {\n    var map = this instanceof Map$1 ? this : this.getMap();\n\n    if (!coordinate) {\n      coordinate = this.getCenter();\n    }\n\n    if (!this._menu) {\n      if (this._menuOptions && map) {\n        this._bindMenu(this._menuOptions);\n\n        this._menu.show(coordinate);\n      }\n    } else {\n      this._menu.show(coordinate);\n    }\n\n    return this;\n  },\n  setMenuItems: function setMenuItems(items) {\n    if (!this._menuOptions) {\n      this._menuOptions = {};\n    }\n\n    if (Array.isArray(items)) {\n      this._menuOptions['custom'] = false;\n    }\n\n    this._menuOptions['items'] = items;\n    this.setMenu(this._menuOptions);\n    return this;\n  },\n  getMenuItems: function getMenuItems() {\n    if (this._menu) {\n      return this._menu.getItems();\n    } else if (this._menuOptions) {\n      return this._menuOptions['items'] || [];\n    }\n\n    return [];\n  },\n  closeMenu: function closeMenu() {\n    if (this._menu) {\n      this._menu.hide();\n    }\n\n    return this;\n  },\n  removeMenu: function removeMenu() {\n    this.off('contextmenu', this._defaultOpenMenu, this);\n\n    this._unbindMenu();\n\n    delete this._menuOptions;\n    return this;\n  },\n  _bindMenu: function _bindMenu(options) {\n    this._menu = new Menu(options);\n\n    this._menu.addTo(this);\n\n    return this;\n  },\n  _unbindMenu: function _unbindMenu() {\n    if (this._menu) {\n      this.closeMenu();\n\n      this._menu.remove();\n\n      delete this._menu;\n    }\n\n    return this;\n  },\n  _defaultOpenMenu: function _defaultOpenMenu(param) {\n    if (this.listens('contextmenu') > 1) {\n      return true;\n    } else {\n      this.openMenu(param['coordinate']);\n      return false;\n    }\n  }\n};\nMap$1.include(Menuable);\nGeometry.include(Menuable);\nvar index$4 = /*#__PURE__*/Object.freeze({\n  UIComponent: UIComponent,\n  UIMarker: UIMarker,\n  InfoWindow: InfoWindow,\n  ToolTip: ToolTip,\n  Menuable: Menuable,\n  Menu: Menu\n});\n\nvar Control = function (_Eventable) {\n  _inheritsLoose(Control, _Eventable);\n\n  function Control(options) {\n    if (options && options['position'] && !isString(options['position'])) {\n      options['position'] = extend({}, options['position']);\n    }\n\n    return _Eventable.call(this, options) || this;\n  }\n\n  var _proto = Control.prototype;\n\n  _proto.addTo = function addTo(map) {\n    this.remove();\n\n    if (!map.options['control']) {\n      return this;\n    }\n\n    this._map = map;\n    var controlContainer = map._panels.control;\n    this.__ctrlContainer = createEl('div');\n    setStyle(this.__ctrlContainer, 'position:absolute;overflow:visible;');\n    this.update();\n    controlContainer.appendChild(this.__ctrlContainer);\n\n    if (this.onAdd) {\n      this.onAdd();\n    }\n\n    this.fire('add', {\n      'dom': controlContainer\n    });\n    return this;\n  };\n\n  _proto.update = function update() {\n    this.__ctrlContainer.innerHTML = '';\n    this._controlDom = this.buildOn(this.getMap());\n\n    if (this._controlDom) {\n      this._updatePosition();\n\n      this.__ctrlContainer.appendChild(this._controlDom);\n    }\n\n    return this;\n  };\n\n  _proto.getMap = function getMap() {\n    return this._map;\n  };\n\n  _proto.getPosition = function getPosition() {\n    return extend({}, this._parse(this.options['position']));\n  };\n\n  _proto.setPosition = function setPosition(position) {\n    if (isString(position)) {\n      this.options['position'] = position;\n    } else {\n      this.options['position'] = extend({}, position);\n    }\n\n    this._updatePosition();\n\n    return this;\n  };\n\n  _proto.getContainerPoint = function getContainerPoint() {\n    var position = this.getPosition();\n    var size = this.getMap().getSize();\n    var x, y;\n\n    if (!isNil(position['left'])) {\n      x = parseInt(position['left']);\n    } else if (!isNil(position['right'])) {\n      x = size['width'] - parseInt(position['right']);\n    }\n\n    if (!isNil(position['top'])) {\n      y = parseInt(position['top']);\n    } else if (!isNil(position['bottom'])) {\n      y = size['height'] - parseInt(position['bottom']);\n    }\n\n    return new Point(x, y);\n  };\n\n  _proto.getContainer = function getContainer() {\n    return this.__ctrlContainer;\n  };\n\n  _proto.getDOM = function getDOM() {\n    return this._controlDom;\n  };\n\n  _proto.show = function show() {\n    this.__ctrlContainer.style.display = '';\n    return this;\n  };\n\n  _proto.hide = function hide() {\n    this.__ctrlContainer.style.display = 'none';\n    return this;\n  };\n\n  _proto.isVisible = function isVisible() {\n    return this.__ctrlContainer && this.__ctrlContainer.style.display === '';\n  };\n\n  _proto.remove = function remove() {\n    if (!this._map) {\n      return this;\n    }\n\n    removeDomNode(this.__ctrlContainer);\n\n    if (this.onRemove) {\n      this.onRemove();\n    }\n\n    delete this._map;\n    delete this.__ctrlContainer;\n    delete this._controlDom;\n    this.fire('remove');\n    return this;\n  };\n\n  _proto._parse = function _parse(position) {\n    var p = position;\n\n    if (isString(position)) {\n      p = Control['positions'][p];\n    }\n\n    return p;\n  };\n\n  _proto._updatePosition = function _updatePosition() {\n    var position = this.getPosition();\n\n    if (!position) {\n      position = {\n        'top': 20,\n        'left': 20\n      };\n    }\n\n    for (var p in position) {\n      if (position.hasOwnProperty(p)) {\n        position[p] = parseInt(position[p]);\n        this.__ctrlContainer.style[p] = position[p] + 'px';\n      }\n    }\n\n    this.fire('positionchange', {\n      'position': extend({}, position)\n    });\n  };\n\n  return Control;\n}(Eventable(Class));\n\nControl.positions = {\n  'top-left': {\n    'top': 20,\n    'left': 20\n  },\n  'top-right': {\n    'top': 20,\n    'right': 20\n  },\n  'bottom-left': {\n    'bottom': 20,\n    'left': 20\n  },\n  'bottom-right': {\n    'bottom': 20,\n    'right': 20\n  }\n};\nMap$1.mergeOptions({\n  'control': true\n});\nMap$1.include({\n  addControl: function addControl(control) {\n    if (this._containerDOM.getContext) {\n      return this;\n    }\n\n    control.addTo(this);\n    return this;\n  },\n  removeControl: function removeControl(control) {\n    if (!control || control.getMap() !== this) {\n      return this;\n    }\n\n    control.remove();\n    return this;\n  }\n});\nvar options$n = {\n  'position': {\n    'bottom': 0,\n    'left': 0\n  },\n  'content': '<a href=\"http://maptalks.org\" target=\"_blank\">maptalks</a>'\n};\nvar layerEvents = 'addlayer removelayer setbaselayer baselayerremove';\n\nvar Attribution = function (_Control) {\n  _inheritsLoose(Attribution, _Control);\n\n  function Attribution() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Attribution.prototype;\n\n  _proto.buildOn = function buildOn() {\n    this._attributionContainer = createEl('div');\n    this._attributionContainer.className = 'maptalks-attribution';\n\n    this._update();\n\n    return this._attributionContainer;\n  };\n\n  _proto.onAdd = function onAdd() {\n    this.getMap().on(layerEvents, this._update, this);\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.getMap().off(layerEvents, this._update, this);\n  };\n\n  _proto._update = function _update() {\n    var map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    var attributions = map._getLayers(function (layer) {\n      return layer.options['attribution'];\n    }).reverse().map(function (layer) {\n      return layer.options['attribution'];\n    });\n\n    var content = this.options['content'] + (attributions.length > 0 ? ' - ' + attributions.join(', ') : '');\n    this._attributionContainer.innerHTML = '<span style=\"padding:0px 4px\">' + content + '</span>';\n  };\n\n  return Attribution;\n}(Control);\n\nAttribution.mergeOptions(options$n);\nMap$1.mergeOptions({\n  'attribution': true\n});\nMap$1.addOnLoadHook(function () {\n  var a = this.options['attribution'] || this.options['attributionControl'];\n\n  if (a) {\n    this.attributionControl = new Attribution(a);\n    this.addControl(this.attributionControl);\n  }\n});\nvar options$o = {\n  'position': 'top-right',\n  'baseTitle': 'Base Layers',\n  'overlayTitle': 'Layers',\n  'excludeLayers': [],\n  'containerClass': 'maptalks-layer-switcher'\n};\n\nvar LayerSwitcher = function (_Control) {\n  _inheritsLoose(LayerSwitcher, _Control);\n\n  function LayerSwitcher() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = LayerSwitcher.prototype;\n\n  _proto.buildOn = function buildOn() {\n    var container = this.container = createEl('div', this.options['containerClass']),\n        panel = this.panel = createEl('div', 'panel'),\n        button = this.button = createEl('button');\n    container.appendChild(button);\n    container.appendChild(panel);\n    return container;\n  };\n\n  _proto.onAdd = function onAdd() {\n    on(this.button, 'mouseover', this._show, this);\n    on(this.panel, 'mouseleave', this._hide, this);\n    on(this.getMap(), 'click', this._hide, this);\n  };\n\n  _proto.onRemove = function onRemove() {\n    if (this.panel) {\n      off(this.button, 'mouseover', this._show, this);\n      off(this.panel, 'mouseleave', this._hide, this);\n      off(this.getMap(), 'click', this._hide, this);\n      removeDomNode(this.panel);\n      removeDomNode(this.button);\n      delete this.panel;\n      delete this.button;\n      delete this.container;\n    }\n  };\n\n  _proto._show = function _show() {\n    if (!hasClass(this.container, 'shown')) {\n      addClass(this.container, 'shown');\n\n      this._createPanel();\n    }\n  };\n\n  _proto._hide = function _hide(e) {\n    if (!this.panel.contains(e.toElement || e.relatedTarget)) {\n      setClass(this.container, this.options['containerClass']);\n    }\n  };\n\n  _proto._createPanel = function _createPanel() {\n    this.panel.innerHTML = '';\n    var ul = createEl('ul');\n    this.panel.appendChild(ul);\n\n    this._renderLayers(this.getMap(), ul);\n  };\n\n  _proto._renderLayers = function _renderLayers(map, elm) {\n    var base = map.getBaseLayer(),\n        layers = map.getLayers(),\n        len = layers.length;\n\n    if (base) {\n      var baseLayers = base.layers || [base],\n          li = createEl('li', 'group'),\n          ul = createEl('ul'),\n          label = createEl('label');\n      label.innerHTML = this.options['baseTitle'];\n      li.appendChild(label);\n\n      for (var i = 0, _len = baseLayers.length; i < _len; i++) {\n        var layer = baseLayers[i];\n\n        if (this._isExcluded(layer)) {\n          ul.appendChild(this._renderLayer(baseLayers[i], true));\n          li.appendChild(ul);\n          elm.appendChild(li);\n        }\n      }\n    }\n\n    if (len) {\n      var _li = createEl('li', 'group'),\n          _ul = createEl('ul'),\n          _label = createEl('label');\n\n      _label.innerHTML = this.options['overlayTitle'];\n\n      _li.appendChild(_label);\n\n      for (var _i = 0; _i < len; _i++) {\n        var _layer = layers[_i];\n\n        if (this._isExcluded(_layer)) {\n          _ul.appendChild(this._renderLayer(_layer));\n        }\n      }\n\n      _li.appendChild(_ul);\n\n      elm.appendChild(_li);\n    }\n  };\n\n  _proto._isExcluded = function _isExcluded(layer) {\n    var id = layer.getId(),\n        excludeLayers = this.options['excludeLayers'];\n    return !(excludeLayers.length && excludeLayers.indexOf(id) >= 0);\n  };\n\n  _proto._renderLayer = function _renderLayer(layer, isBase) {\n    var _this = this;\n\n    var li = createEl('li', 'layer'),\n        label = createEl('label'),\n        input = createEl('input'),\n        map = this.getMap();\n    var visible = layer.options['visible'];\n    layer.options['visible'] = true;\n    var enabled = layer.isVisible();\n    layer.options['visible'] = visible;\n    li.className = 'layer';\n\n    if (isBase) {\n      input.type = 'radio';\n      input.name = 'base';\n    } else {\n      input.type = 'checkbox';\n    }\n\n    input.checked = visible && enabled;\n\n    if (!enabled) {\n      input.setAttribute('disabled', 'disabled');\n    }\n\n    input.onchange = function (e) {\n      if (e.target.type === 'radio') {\n        var baseLayer = map.getBaseLayer(),\n            baseLayers = baseLayer.layers;\n\n        if (baseLayers) {\n          for (var i = 0, len = baseLayers.length; i < len; i++) {\n            var _baseLayer = baseLayers[i];\n\n            _baseLayer[_baseLayer === layer ? 'show' : 'hide']();\n          }\n        } else if (!baseLayer.isVisible()) {\n          baseLayer.show();\n        }\n\n        map._fireEvent('setbaselayer');\n      } else {\n        layer[e.target.checked ? 'show' : 'hide']();\n      }\n\n      _this.fire('layerchange', {\n        target: layer\n      });\n    };\n\n    li.appendChild(input);\n    label.innerHTML = layer.getId();\n    li.appendChild(label);\n    return li;\n  };\n\n  return LayerSwitcher;\n}(Control);\n\nLayerSwitcher.mergeOptions(options$o);\nMap$1.mergeOptions({\n  'layerSwitcherControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['layerSwitcherControl']) {\n    this.layerSwitcherControl = new LayerSwitcher(this.options['layerSwitcherControl']);\n    this.addControl(this.layerSwitcherControl);\n  }\n});\nvar options$p = {\n  'level': 4,\n  'position': {\n    'right': 1,\n    'bottom': 1\n  },\n  'size': [300, 200],\n  'maximize': true,\n  'symbol': {\n    'lineWidth': 3,\n    'lineColor': '#1bbc9b',\n    'polygonFill': '#1bbc9b',\n    'polygonOpacity': 0.4\n  },\n  'containerClass': 'maptalks-overview',\n  'buttonClass': 'maptalks-overview-button'\n};\n\nvar Overview = function (_Control) {\n  _inheritsLoose(Overview, _Control);\n\n  function Overview() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Overview.prototype;\n\n  _proto.buildOn = function buildOn() {\n    var size = this.options['size'];\n\n    if (!this.options['maximize']) {\n      size = [0, 0];\n    }\n\n    var container = createEl('div');\n    var mapContainer = this.mapContainer = createEl('div');\n    mapContainer.style.width = size[0] + 'px';\n    mapContainer.style.height = size[1] + 'px';\n    mapContainer.className = this.options['containerClass'];\n    var button = this.button = createEl('div');\n    button.className = this.options['buttonClass'];\n    container.appendChild(mapContainer);\n    container.appendChild(button);\n    return container;\n  };\n\n  _proto.onAdd = function onAdd() {\n    if (this.options['maximize']) {\n      this._createOverview();\n    }\n\n    this.getMap().on('resize moving zooming rotate dragrotating viewchange', this._update, this).on('setbaselayer', this._updateBaseLayer, this).on('spatialreferencechange', this._updateSpatialReference, this);\n    on(this.button, 'click', this._onButtonClick, this);\n\n    this._updateButtonText();\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('resize moving zooming rotate dragrotating viewchange', this._update, this).off('setbaselayer', this._updateBaseLayer, this).off('spatialreferencechange', this._updateSpatialReference, this);\n\n    if (this._overview) {\n      this._overview.remove();\n\n      delete this._overview;\n      delete this._perspective;\n    }\n\n    off(this.button, 'click', this._onButtonClick, this);\n  };\n\n  _proto.maxmize = function maxmize() {\n    var size = this.options['size'];\n    var dom = this.mapContainer;\n    dom.style.width = size[0] + 'px';\n    dom.style.height = size[1] + 'px';\n\n    this._createOverview();\n\n    return this;\n  };\n\n  _proto.minimize = function minimize() {\n    if (this._overview) {\n      this._overview.remove();\n    }\n\n    delete this._overview;\n    delete this._perspective;\n    var dom = this.mapContainer;\n    dom.style.width = 0 + 'px';\n    dom.style.height = 0 + 'px';\n    return this;\n  };\n\n  _proto.getOverviewMap = function getOverviewMap() {\n    return this._overview;\n  };\n\n  _proto._onButtonClick = function _onButtonClick() {\n    if (!this._overview) {\n      this.maxmize();\n    } else {\n      this.minimize();\n    }\n\n    this._updateButtonText();\n  };\n\n  _proto._updateButtonText = function _updateButtonText() {\n    if (this._overview) {\n      this.button.innerHTML = '-';\n    } else {\n      this.button.innerHTML = '+';\n    }\n  };\n\n  _proto._createOverview = function _createOverview() {\n    var map = this.getMap(),\n        dom = this.mapContainer;\n    var options = map.config();\n    extend(options, {\n      'center': map.getCenter(),\n      'zoom': this._getOverviewZoom(),\n      'zoomAnimationDuration': 150,\n      'pitch': 0,\n      'bearing': 0,\n      'scrollWheelZoom': false,\n      'checkSize': false,\n      'doubleClickZoom': false,\n      'touchZoom': false,\n      'control': false,\n      'draggable': false,\n      'maxExtent': null\n    });\n    this._overview = new Map$1(dom, options);\n\n    this._updateBaseLayer();\n\n    this._perspective = new Polygon(this._getPerspectiveCoords(), {\n      'draggable': true,\n      'cursor': 'move',\n      'symbol': this.options['symbol']\n    }).on('dragend', this._onDragEnd, this);\n    new VectorLayer('perspective_layer', this._perspective).addTo(this._overview);\n    this.fire('load');\n  };\n\n  _proto._getOverviewZoom = function _getOverviewZoom() {\n    var map = this.getMap(),\n        zoom = map.getZoom(),\n        minZoom = map.getMinZoom(),\n        level = this.options['level'];\n\n    if (level > 0) {\n      for (var i = level; i > 0; i--) {\n        if (zoom - i >= minZoom) {\n          return zoom - i;\n        }\n      }\n    } else {\n      for (var _i = level; _i < 0; _i++) {\n        if (zoom - _i >= minZoom) {\n          return zoom - _i;\n        }\n      }\n    }\n\n    return zoom;\n  };\n\n  _proto._onDragEnd = function _onDragEnd() {\n    var center = this._perspective.getCenter();\n\n    this._overview.setCenter(center);\n\n    this.getMap().panTo(center);\n  };\n\n  _proto._getPerspectiveCoords = function _getPerspectiveCoords() {\n    var map = this.getMap();\n    return map.getContainerExtent().toArray().map(function (c) {\n      return map.containerPointToCoordinate(c);\n    });\n  };\n\n  _proto._update = function _update() {\n    if (!this._overview) {\n      return;\n    }\n\n    computeDomPosition(this._overview._containerDOM);\n\n    var coords = this._getPerspectiveCoords();\n\n    this._perspective.setCoordinates(coords);\n\n    this._overview.setCenterAndZoom(this.getMap().getCenter(), this._getOverviewZoom());\n  };\n\n  _proto._updateSpatialReference = function _updateSpatialReference() {\n    if (!this._overview) {\n      return;\n    }\n\n    var map = this.getMap();\n    var spatialRef = map.options['spatialReference'];\n\n    this._overview.setSpatialReference(spatialRef);\n  };\n\n  _proto._updateBaseLayer = function _updateBaseLayer() {\n    if (!this._overview) {\n      return;\n    }\n\n    var map = this.getMap(),\n        baseLayer = map.getBaseLayer();\n\n    if (!baseLayer) {\n      this._overview.setBaseLayer(null);\n\n      return;\n    }\n\n    var layers = baseLayer.layers;\n    var showIndex = 0;\n\n    if (layers) {\n      for (var i = 0, l = layers.length; i < l; i++) {\n        var _layer = layers[i];\n\n        if (_layer.isVisible()) {\n          showIndex = i;\n          break;\n        }\n      }\n    }\n\n    var json = baseLayer.toJSON();\n    var options = null;\n\n    if (layers) {\n      options = json.layers[showIndex].options;\n      options.visible = true;\n    } else {\n      options = json.options;\n    }\n\n    this._overview.setMinZoom(options.minZoom || null).setMaxZoom(options.maxZoom || null);\n\n    delete options.minZoom;\n    delete options.maxZoom;\n    delete json.options.canvas;\n    json.options.visible = true;\n    json.options.renderer = 'canvas';\n    var layer = Layer.fromJSON(json);\n\n    for (var p in baseLayer) {\n      if (isFunction(baseLayer[p]) && baseLayer.hasOwnProperty(p) && baseLayer[p] !== baseLayer.constructor.prototype[p]) {\n        layer[p] = baseLayer[p];\n      }\n    }\n\n    this._overview.setBaseLayer(layer);\n  };\n\n  return Overview;\n}(Control);\n\nOverview.mergeOptions(options$p);\nMap$1.mergeOptions({\n  'overviewControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['overviewControl']) {\n    this.overviewControl = new Overview(this.options['overviewControl']);\n    this.addControl(this.overviewControl);\n  }\n});\nvar options$q = {\n  'position': 'top-right',\n  'draggable': true,\n  'custom': false,\n  'content': '',\n  'closeButton': true\n};\n\nvar Panel = function (_Control) {\n  _inheritsLoose(Panel, _Control);\n\n  function Panel() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Panel.prototype;\n\n  _proto.buildOn = function buildOn() {\n    var dom;\n\n    if (this.options['custom']) {\n      if (isString(this.options['content'])) {\n        dom = createEl('div');\n        dom.innerHTML = this.options['content'];\n      } else {\n        dom = this.options['content'];\n      }\n    } else {\n      dom = createEl('div', 'maptalks-panel');\n\n      if (this.options['closeButton']) {\n        var closeButton = createEl('a', 'maptalks-close');\n        closeButton.href = 'javascript:;';\n\n        closeButton.onclick = function () {\n          dom.style.display = 'none';\n        };\n\n        dom.appendChild(closeButton);\n      }\n\n      var panelContent = createEl('div', 'maptalks-panel-content');\n      panelContent.innerHTML = this.options['content'];\n      dom.appendChild(panelContent);\n    }\n\n    this.draggable = new DragHandler(dom, {\n      'cancelOn': this._cancelOn.bind(this),\n      'ignoreMouseleave': true\n    });\n    this.draggable.on('dragstart', this._onDragStart, this).on('dragging', this._onDragging, this).on('dragend', this._onDragEnd, this);\n\n    if (this.options['draggable']) {\n      this.draggable.enable();\n    }\n\n    return dom;\n  };\n\n  _proto.update = function update() {\n    if (this.draggable) {\n      this.draggable.disable();\n      delete this.draggable;\n    }\n\n    return Control.prototype.update.call(this);\n  };\n\n  _proto.setContent = function setContent(content) {\n    var old = this.options['content'];\n    this.options['content'] = content;\n    this.fire('contentchange', {\n      'old': old,\n      'new': content\n    });\n\n    if (this.isVisible()) {\n      this.update();\n    }\n\n    return this;\n  };\n\n  _proto.getContent = function getContent() {\n    return this.options['content'];\n  };\n\n  _proto._cancelOn = function _cancelOn(domEvent) {\n    var target = domEvent.srcElement || domEvent.target,\n        tagName = target.tagName.toLowerCase();\n\n    if (tagName === 'button' || tagName === 'input' || tagName === 'select' || tagName === 'option' || tagName === 'textarea') {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto._onDragStart = function _onDragStart(param) {\n    this._startPos = param['mousePos'];\n    this._startPosition = extend({}, this.getPosition());\n    this.fire('dragstart', param);\n  };\n\n  _proto._onDragging = function _onDragging(param) {\n    var pos = param['mousePos'];\n    var offset = pos.sub(this._startPos);\n    var startPosition = this._startPosition;\n    var position = this.getPosition();\n\n    if (!isNil(position['top'])) {\n      position['top'] = parseInt(startPosition['top']) + offset.y;\n    }\n\n    if (!isNil(position['bottom'])) {\n      position['bottom'] = parseInt(startPosition['bottom']) - offset.y;\n    }\n\n    if (!isNil(position['left'])) {\n      position['left'] = parseInt(startPosition['left']) + offset.x;\n    }\n\n    if (!isNil(position['right'])) {\n      position['right'] = parseInt(startPosition['right']) - offset.x;\n    }\n\n    this.setPosition(position);\n    this.fire('dragging', param);\n  };\n\n  _proto._onDragEnd = function _onDragEnd(param) {\n    delete this._startPos;\n    delete this._startPosition;\n    this.fire('dragend', param);\n  };\n\n  _proto._getConnectPoints = function _getConnectPoints() {\n    var map = this.getMap();\n    var containerPoint = this.getContainerPoint();\n    var dom = this.getDOM(),\n        width = parseInt(dom.clientWidth),\n        height = parseInt(dom.clientHeight);\n    var anchors = [map.containerPointToCoordinate(containerPoint.add(width / 2, 0)), map.containerPointToCoordinate(containerPoint.add(width, height / 2)), map.containerPointToCoordinate(containerPoint.add(width / 2, height)), map.containerPointToCoordinate(containerPoint.add(0, height / 2))];\n    return anchors;\n  };\n\n  return Panel;\n}(Control);\n\nPanel.mergeOptions(options$q);\nvar options$r = {\n  'position': 'bottom-left',\n  'maxWidth': 100,\n  'metric': true,\n  'imperial': false,\n  'containerClass': null\n};\n\nvar Scale = function (_Control) {\n  _inheritsLoose(Scale, _Control);\n\n  function Scale() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Scale.prototype;\n\n  _proto.buildOn = function buildOn(map) {\n    this._map = map;\n    this._scaleContainer = createEl('div', this.options['containerClass']);\n\n    this._addScales();\n\n    map.on('zoomend', this._update, this);\n\n    if (this._map._loaded) {\n      this._update();\n    }\n\n    return this._scaleContainer;\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('zoomend', this._update, this);\n  };\n\n  _proto._addScales = function _addScales() {\n    var css = 'border: 2px solid #000000;border-top: none;line-height: 1.1;padding: 0px;' + 'color: #000000;font-size: 11px;text-align:center;white-space: nowrap;overflow: hidden' + ';-moz-box-sizing: content-box;box-sizing: content-box;background: #fff; background: rgba(255, 255, 255, 0);';\n\n    if (this.options['metric']) {\n      this._mScale = createElOn('div', this.options['containerClass'] ? null : css, this._scaleContainer);\n    }\n\n    if (this.options['imperial']) {\n      this._iScale = createElOn('div', this.options['containerClass'] ? null : css, this._scaleContainer);\n    }\n  };\n\n  _proto._update = function _update() {\n    var map = this._map;\n    var maxMeters = map.pixelToDistance(this.options['maxWidth'], 0);\n\n    this._updateScales(maxMeters);\n  };\n\n  _proto._updateScales = function _updateScales(maxMeters) {\n    if (this.options['metric'] && maxMeters) {\n      this._updateMetric(maxMeters);\n    }\n\n    if (this.options['imperial'] && maxMeters) {\n      this._updateImperial(maxMeters);\n    }\n  };\n\n  _proto._updateMetric = function _updateMetric(maxMeters) {\n    var meters = this._getRoundNum(maxMeters),\n        label = meters < 1000 ? meters + ' m' : meters / 1000 + ' km';\n\n    this._updateScale(this._mScale, label, meters / maxMeters);\n  };\n\n  _proto._updateImperial = function _updateImperial(maxMeters) {\n    var maxFeet = maxMeters * 3.2808399;\n    var maxMiles, miles, feet;\n\n    if (maxFeet > 5280) {\n      maxMiles = maxFeet / 5280;\n      miles = this._getRoundNum(maxMiles);\n\n      this._updateScale(this._iScale, miles + ' mile', miles / maxMiles);\n    } else {\n      feet = this._getRoundNum(maxFeet);\n\n      this._updateScale(this._iScale, feet + ' feet', feet / maxFeet);\n    }\n  };\n\n  _proto._updateScale = function _updateScale(scale, text, ratio) {\n    scale['style']['width'] = Math.round(this.options['maxWidth'] * ratio) + 'px';\n    scale['innerHTML'] = text;\n  };\n\n  _proto._getRoundNum = function _getRoundNum(num) {\n    var pow10 = Math.pow(10, (Math.floor(num) + '').length - 1);\n    var d = num / pow10;\n    d = d >= 10 ? 10 : d >= 5 ? 5 : d >= 3 ? 3 : d >= 2 ? 2 : 1;\n    return pow10 * d;\n  };\n\n  return Scale;\n}(Control);\n\nScale.mergeOptions(options$r);\nMap$1.mergeOptions({\n  'scaleControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['scaleControl']) {\n    this.scaleControl = new Scale(this.options['scaleControl']);\n    this.addControl(this.scaleControl);\n  }\n});\nvar options$s = {\n  'height': 28,\n  'vertical': false,\n  'position': 'top-right',\n  'reverseMenu': false,\n  'items': {}\n};\n\nvar Toolbar = function (_Control) {\n  _inheritsLoose(Toolbar, _Control);\n\n  function Toolbar() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Toolbar.prototype;\n\n  _proto.buildOn = function buildOn(map) {\n    this._map = map;\n    var dom = createEl('div');\n    var ul = createEl('ul', 'maptalks-toolbar-hx');\n    dom.appendChild(ul);\n\n    if (this.options['vertical']) {\n      addClass(dom, 'maptalks-toolbar-vertical');\n    } else {\n      addClass(dom, 'maptalks-toolbar-horizonal');\n    }\n\n    var me = this;\n\n    function onButtonClick(fn, index, childIndex, targetDom) {\n      var item = me._getItems()[index];\n\n      return function (e) {\n        stopPropagation(e);\n        return fn({\n          'target': item,\n          'index': index,\n          'childIndex': childIndex,\n          'dom': targetDom\n        });\n      };\n    }\n\n    var items = this.options['items'];\n\n    if (isArrayHasData(items)) {\n      for (var i = 0, len = items.length; i < len; i++) {\n        var item = items[i];\n        var li = createEl('li');\n\n        if (this.options['height'] !== 28) {\n          li.style.lineHeight = this.options['height'] + 'px';\n        }\n\n        li.style.height = this.options['height'] + 'px';\n        li.style.cursor = 'pointer';\n\n        if (isHTML(item['item'])) {\n          li.style.textAlign = 'center';\n          var itemSize = measureDom('div', item['item']);\n          li.innerHTML = '<div style=\"margin-top:' + (this.options['height'] - itemSize['height']) / 2 + 'px;\">' + item['item'] + '</div>';\n        } else {\n          li.innerHTML = item['item'];\n        }\n\n        if (item['click']) {\n          on(li, 'click', onButtonClick(item['click'], i, null, li));\n        }\n\n        if (isArrayHasData(item['children'])) {\n          var dropMenu = this._createDropMenu(i);\n\n          li.appendChild(dropMenu);\n          li._menu = dropMenu;\n          on(li, 'mouseover', function () {\n            this._menu.style.display = '';\n          });\n          on(li, 'mouseout', function () {\n            this._menu.style.display = 'none';\n          });\n        }\n\n        ul.appendChild(li);\n      }\n    }\n\n    return dom;\n  };\n\n  _proto._createDropMenu = function _createDropMenu(index) {\n    var me = this;\n\n    function onButtonClick(fn, index, childIndex) {\n      var item = me._getItems()[index]['children'][childIndex];\n\n      return function (e) {\n        stopPropagation(e);\n        return fn({\n          'target': item,\n          'index': index,\n          'childIndex': childIndex\n        });\n      };\n    }\n\n    var menuDom = createEl('div', 'maptalks-dropMenu'),\n        items = this._getItems(),\n        len = items.length,\n        menuUL = createEl('ul'),\n        children = items[index]['children'];\n\n    if (index === len - 1 && children) {\n      menuDom.style.cssText = 'right: 0px;';\n      menuUL.style.cssText = 'right: 0px;position: absolute;';\n\n      if (this.options['reverseMenu']) {\n        menuUL.style.bottom = 0;\n      }\n    }\n\n    menuDom.appendChild(createEl('em', 'maptalks-ico'));\n    var liWidth = 0;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      var size = stringLength(children[i]['item'], '12px');\n\n      if (size.width > liWidth) {\n        liWidth = size.width;\n      }\n    }\n\n    for (var _i = 0, _l = children.length; _i < _l; _i++) {\n      var child = children[_i];\n      var li = createEl('li');\n      li.innerHTML = '<a href=\"javascript:;\">' + child['item'] + '</a>';\n      li.style.cursor = 'pointer';\n      li.style.width = liWidth + 24 + 'px';\n      on(li.childNodes[0], 'click', onButtonClick(child['click'], index, _i));\n      menuUL.appendChild(li);\n    }\n\n    if (this.options['vertical']) {\n      var width = liWidth < 95 ? 95 : liWidth;\n\n      if (this.options['reverseMenu']) {\n        menuDom.style.right = -(width + 10 * 2) + 'px';\n      } else {\n        menuDom.style.left = -(width + 10 * 2) + 'px';\n      }\n    } else if (this.options['reverseMenu']) {\n      menuDom.style.bottom = '28px';\n    } else {\n      menuDom.style.top = '28px';\n    }\n\n    menuDom.appendChild(menuUL);\n    menuDom.style.display = 'none';\n    return menuDom;\n  };\n\n  _proto._getItems = function _getItems() {\n    return this.options['items'] || [];\n  };\n\n  return Toolbar;\n}(Control);\n\nToolbar.mergeOptions(options$s);\nvar options$t = {\n  'position': 'top-left',\n  'slider': true,\n  'zoomLevel': true,\n  'seamless': false\n};\nvar UNIT = 10;\n\nvar Zoom = function (_Control) {\n  _inheritsLoose(Zoom, _Control);\n\n  function Zoom() {\n    return _Control.apply(this, arguments) || this;\n  }\n\n  var _proto = Zoom.prototype;\n\n  _proto.buildOn = function buildOn(map) {\n    var options = this.options;\n    var dom = createEl('div', 'maptalks-zoom');\n\n    if (options['zoomLevel']) {\n      var levelDOM = createEl('span', 'maptalks-zoom-zoomlevel');\n      dom.appendChild(levelDOM);\n      this._levelDOM = levelDOM;\n    }\n\n    var zoomDOM = createEl('div', 'maptalks-zoom-slider');\n    var zoomInButton = createEl('a', 'maptalks-zoom-zoomin');\n    zoomInButton.href = 'javascript:;';\n    zoomInButton.innerHTML = '+';\n    zoomDOM.appendChild(zoomInButton);\n    this._zoomInButton = zoomInButton;\n\n    if (options['slider']) {\n      var box = createEl('div', 'maptalks-zoom-slider-box');\n      var ruler = createEl('div', 'maptalks-zoom-slider-ruler');\n      var reading = createEl('span', 'maptalks-zoom-slider-reading');\n      var dot = createEl('span', 'maptalks-zoom-slider-dot');\n      ruler.appendChild(reading);\n      box.appendChild(ruler);\n      box.appendChild(dot);\n      zoomDOM.appendChild(box);\n      this._sliderBox = box;\n      this._sliderRuler = ruler;\n      this._sliderReading = reading;\n      this._sliderDot = dot;\n    }\n\n    var zoomOutButton = createEl('a', 'maptalks-zoom-zoomout');\n    zoomOutButton.href = 'javascript:;';\n    zoomOutButton.innerHTML = '-';\n    zoomDOM.appendChild(zoomOutButton);\n    this._zoomOutButton = zoomOutButton;\n    dom.appendChild(zoomDOM);\n    map.on('_zoomend _zooming _zoomstart _spatialreferencechange', this._update, this);\n\n    this._update();\n\n    this._registerDomEvents();\n\n    return dom;\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.getMap().off('_zoomend _zooming _zoomstart _spatialreferencechange', this._update, this);\n\n    if (this._zoomInButton) {\n      off(this._zoomInButton, 'click', this._onZoomInClick, this);\n    }\n\n    if (this._zoomOutButton) {\n      off(this._zoomOutButton, 'click', this._onZoomOutClick, this);\n    }\n\n    if (this._sliderRuler) {\n      off(this._sliderRuler, 'click', this._onClickRuler, this);\n      this.dotDragger.disable();\n      delete this.dotDragger;\n    }\n  };\n\n  _proto._update = function _update() {\n    var map = this.getMap();\n\n    if (this._sliderBox) {\n      var totalRange = (map.getMaxZoom() - map.getMinZoom()) * UNIT;\n      this._sliderBox.style.height = totalRange + 16 + 'px';\n      this._sliderRuler.style.height = totalRange + 8 + 'px';\n      this._sliderRuler.style.cursor = 'pointer';\n      var zoomRange = (map.getMaxZoom() - map.getZoom()) * UNIT;\n      this._sliderReading.style.height = (map.getZoom() - map.getMinZoom() + 1) * UNIT + 'px';\n      this._sliderDot.style.top = zoomRange + 'px';\n    }\n\n    this._updateText();\n  };\n\n  _proto._updateText = function _updateText() {\n    if (this._levelDOM) {\n      var map = this.getMap();\n      var zoom = map.getZoom();\n\n      if (!isInteger(zoom)) {\n        zoom = Math.floor(zoom * 10) / 10;\n      }\n\n      this._levelDOM.innerHTML = zoom;\n    }\n  };\n\n  _proto._registerDomEvents = function _registerDomEvents() {\n    if (this._zoomInButton) {\n      on(this._zoomInButton, 'click', this._onZoomInClick, this);\n    }\n\n    if (this._zoomOutButton) {\n      on(this._zoomOutButton, 'click', this._onZoomOutClick, this);\n    }\n\n    if (this._sliderRuler) {\n      on(this._sliderRuler, 'click', this._onClickRuler, this);\n      this.dotDragger = new DragHandler(this._sliderDot, {\n        'ignoreMouseleave': true\n      });\n      this.dotDragger.on('dragstart', this._onDotDragstart, this).on('dragging dragend', this._onDotDrag, this).enable();\n    }\n  };\n\n  _proto._onZoomInClick = function _onZoomInClick(e) {\n    preventDefault(e);\n    this.getMap().zoomIn();\n  };\n\n  _proto._onZoomOutClick = function _onZoomOutClick(e) {\n    preventDefault(e);\n    this.getMap().zoomOut();\n  };\n\n  _proto._onClickRuler = function _onClickRuler(e) {\n    preventDefault(e);\n    var map = this.getMap(),\n        point = getEventContainerPoint(e, this._sliderRuler),\n        h = point.y;\n    var maxZoom = map.getMaxZoom(),\n        zoom = Math.floor(maxZoom - h / UNIT);\n    map.setZoom(zoom);\n  };\n\n  _proto._onDotDragstart = function _onDotDragstart(e) {\n    preventDefault(e.domEvent);\n\n    var map = this.getMap(),\n        origin = map.getSize().toPoint()._multi(1 / 2);\n\n    map.onZoomStart(map.getZoom(), origin);\n  };\n\n  _proto._onDotDrag = function _onDotDrag(e) {\n    preventDefault(e.domEvent);\n\n    var map = this.getMap(),\n        origin = map.getSize().toPoint()._multi(1 / 2),\n        point = getEventContainerPoint(e.domEvent, this._sliderRuler),\n        maxZoom = map.getMaxZoom(),\n        minZoom = map.getMinZoom();\n\n    var top = point.y,\n        z = maxZoom - top / UNIT;\n\n    if (maxZoom < z) {\n      z = maxZoom;\n      top = 0;\n    } else if (minZoom > z) {\n      z = minZoom;\n      top = (maxZoom - minZoom) * UNIT;\n    }\n\n    if (e.type === 'dragging') {\n      map.onZooming(z, origin, 1);\n    } else if (e.type === 'dragend') {\n      if (this.options['seamless']) {\n        map.onZoomEnd(z, origin);\n      } else {\n        map.onZoomEnd(Math.round(z), origin);\n      }\n    }\n\n    this._sliderDot.style.top = top + 'px';\n    this._sliderReading.style.height = (map.getZoom() - minZoom + 1) * UNIT + 'px';\n\n    this._updateText();\n  };\n\n  return Zoom;\n}(Control);\n\nZoom.mergeOptions(options$t);\nMap$1.mergeOptions({\n  'zoomControl': false\n});\nMap$1.addOnLoadHook(function () {\n  if (this.options['zoomControl']) {\n    this.zoomControl = new Zoom(this.options['zoomControl']);\n    this.addControl(this.zoomControl);\n  }\n});\nvar index$5 = /*#__PURE__*/Object.freeze({\n  Control: Control,\n  Attribution: Attribution,\n  LayerSwitcher: LayerSwitcher,\n  Overview: Overview,\n  Panel: Panel,\n  Scale: Scale,\n  Toolbar: Toolbar,\n  Zoom: Zoom\n});\n\nvar TileSystem = function () {\n  function TileSystem(sx, sy, ox, oy) {\n    if (Array.isArray(sx)) {\n      this.scale = {\n        x: sx[0],\n        y: sx[1]\n      };\n      this.origin = {\n        x: sx[2],\n        y: sx[3]\n      };\n    } else {\n      this.scale = {\n        x: sx,\n        y: sy\n      };\n      this.origin = {\n        x: ox,\n        y: oy\n      };\n    }\n  }\n\n  TileSystem.getDefault = function getDefault(projection) {\n    if (projection['code'].toLowerCase() === 'baidu') {\n      return 'baidu';\n    } else if (projection['code'].toLowerCase() === 'EPSG:4326'.toLowerCase()) {\n      return 'tms-global-geodetic';\n    } else if (projection['code'].toLowerCase() === 'identity') {\n      return [1, -1, 0, 0];\n    } else {\n      return 'web-mercator';\n    }\n  };\n\n  return TileSystem;\n}();\n\nvar semiCircum = 6378137 * Math.PI;\nextend(TileSystem, {\n  'web-mercator': new TileSystem([1, -1, -semiCircum, semiCircum]),\n  'tms-global-mercator': new TileSystem([1, 1, -semiCircum, -semiCircum]),\n  'tms-global-geodetic': new TileSystem([1, 1, -180, -90]),\n  'baidu': new TileSystem([1, 1, 0, 0])\n});\n\nvar TileConfig = function () {\n  function TileConfig(map, tileSystem, fullExtent, tileSize) {\n    this.map = map;\n    this.tileSize = tileSize;\n    this.fullExtent = fullExtent;\n    this.prepareTileInfo(tileSystem, fullExtent);\n    this._xScale = fullExtent['right'] >= fullExtent['left'] ? 1 : -1;\n    this._yScale = fullExtent['top'] >= fullExtent['bottom'] ? 1 : -1;\n    this._pointOrigin = map._prjToPoint(new Point(this.tileSystem['origin']), map.getGLZoom());\n    this._glRes = map.getResolution(map.getGLZoom());\n  }\n\n  var _proto = TileConfig.prototype;\n\n  _proto.prepareTileInfo = function prepareTileInfo(tileSystem, fullExtent) {\n    if (isString(tileSystem)) {\n      tileSystem = TileSystem[tileSystem.toLowerCase()];\n    } else if (Array.isArray(tileSystem)) {\n      tileSystem = new TileSystem(tileSystem);\n    }\n\n    if (!tileSystem) {\n      throw new Error('Invalid TileSystem');\n    }\n\n    this.tileSystem = tileSystem;\n    var a = fullExtent['right'] > fullExtent['left'] ? 1 : -1,\n        b = fullExtent['top'] > fullExtent['bottom'] ? -1 : 1,\n        c = tileSystem['origin']['x'],\n        d = tileSystem['origin']['y'];\n    this.transformation = new Transformation([a, b, c, d]);\n  };\n\n  _proto._getTileNum = function _getTileNum(point, res) {\n    var tileSystem = this.tileSystem,\n        tileSize = this['tileSize'],\n        delta = 1E-7;\n    var tileX = Math.floor(delta * tileSystem['scale']['x'] + point.x / (tileSize['width'] * res));\n    var tileY = Math.ceil(delta * tileSystem['scale']['y'] + point.y / (tileSize['height'] * res));\n    return {\n      'x': tileSystem['scale']['x'] * tileX,\n      'y': tileSystem['scale']['y'] * tileY\n    };\n  };\n\n  _proto.getTileIndex = function getTileIndex(pCoord, res, repeatWorld) {\n    var tileSystem = this.tileSystem;\n    var point = this.transformation.transform(pCoord, 1);\n\n    var tileIndex = this._getTileNum(point, res);\n\n    if (tileSystem['scale']['x'] < 0) {\n      tileIndex['x'] -= 1;\n    }\n\n    if (tileSystem['scale']['y'] > 0) {\n      tileIndex['y'] -= 1;\n    }\n\n    return this.getNeighorTileIndex(tileIndex['x'], tileIndex['y'], 0, 0, res, repeatWorld);\n  };\n\n  _proto.getNeighorTileIndex = function getNeighorTileIndex(tileX, tileY, offsetX, offsetY, res, repeatWorld) {\n    var tileSystem = this.tileSystem;\n    var x = tileX + tileSystem['scale']['x'] * offsetX;\n    var y = tileY - tileSystem['scale']['y'] * offsetY;\n    var out = false;\n    var idx = x;\n    var idy = y;\n\n    var ext = this._getTileFullIndex(res);\n\n    if (repeatWorld) {\n      if (repeatWorld === true || repeatWorld === 'x') {\n        if (ext['xmax'] === ext['xmin']) {\n          x = ext['xmin'];\n        } else if (x < ext['xmin']) {\n          x = ext['xmax'] - (ext['xmin'] - x) % (ext['xmax'] - ext['xmin']);\n\n          if (x === ext['xmax']) {\n            x = ext['xmin'];\n          }\n        } else if (x >= ext['xmax']) {\n          x = ext['xmin'] + (x - ext['xmin']) % (ext['xmax'] - ext['xmin']);\n        }\n      }\n\n      if (repeatWorld === true || repeatWorld === 'y') {\n        if (ext['ymax'] === ext['ymin']) {\n          y = ext['ymin'];\n        } else if (y >= ext['ymax']) {\n          y = ext['ymin'] + (y - ext['ymin']) % (ext['ymax'] - ext['ymin']);\n        } else if (y < ext['ymin']) {\n          y = ext['ymax'] - (ext['ymin'] - y) % (ext['ymax'] - ext['ymin']);\n\n          if (y === ext['ymax']) {\n            y = ext['ymin'];\n          }\n        }\n      }\n    }\n\n    if (x < ext['xmin'] || x > ext['xmax'] || y > ext['ymax'] || y < ext['ymin']) {\n      out = true;\n    }\n\n    return {\n      'x': x,\n      'y': y,\n      'idx': idx,\n      'idy': idy,\n      out: out\n    };\n  };\n\n  _proto._getTileFullIndex = function _getTileFullIndex(res) {\n    if (!this._tileFullIndex) {\n      this._tileFullIndex = {};\n    }\n\n    if (this._tileFullIndex[res]) {\n      return this._tileFullIndex[res];\n    }\n\n    var ext = this.fullExtent;\n    var transformation = this.transformation;\n\n    var nwIndex = this._getTileNum(transformation.transform(new Coordinate(ext['left'], ext['top']), 1), res);\n\n    var seIndex = this._getTileNum(transformation.transform(new Coordinate(ext['right'], ext['bottom']), 1), res);\n\n    var tileSystem = this.tileSystem;\n\n    if (tileSystem['scale']['x'] < 0) {\n      nwIndex.x -= 1;\n      seIndex.x -= 1;\n    }\n\n    if (tileSystem['scale']['y'] > 0) {\n      nwIndex.y -= 1;\n      seIndex.y -= 1;\n    }\n\n    this._tileFullIndex[res] = new Extent(nwIndex, seIndex);\n    return this._tileFullIndex[res];\n  };\n\n  _proto.getTilePrjNW = function getTilePrjNW(tileX, tileY, res) {\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = tileSystem['origin']['y'] + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 1 : 0)) * res * tileSize['height'];\n    var x = tileSystem['origin']['x'] + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 0 : 1)) * res * tileSize['width'];\n    return new Coordinate(x, y);\n  };\n\n  _proto.getTilePointNW = function getTilePointNW(tileX, tileY, res) {\n    var scale = this._glRes / res;\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = this._pointOrigin.y * scale + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 1 : 0)) * tileSize['height'];\n    var x = this._pointOrigin.x * scale + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 0 : 1)) * tileSize['width'];\n    return new Point(x, y);\n  };\n\n  _proto.getTilePrjSE = function getTilePrjSE(tileX, tileY, res) {\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = tileSystem['origin']['y'] + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 0 : 1)) * res * tileSize['height'];\n    var x = tileSystem['origin']['x'] + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 1 : 0)) * res * tileSize['width'];\n    return new Coordinate(x, y);\n  };\n\n  _proto.getTilePointSE = function getTilePointSE(tileX, tileY, res) {\n    var scale = this._glRes / res;\n    var tileSystem = this.tileSystem;\n    var tileSize = this['tileSize'];\n    var y = this._pointOrigin.y * scale + this._yScale * tileSystem['scale']['y'] * (tileY + (tileSystem['scale']['y'] === 1 ? 0 : 1)) * tileSize['height'];\n    var x = this._pointOrigin.x * scale + this._xScale * tileSystem['scale']['x'] * (tileX + (tileSystem['scale']['x'] === 1 ? 1 : 0)) * tileSize['width'];\n    return new Point(x, y);\n  };\n\n  _proto.getTilePrjExtent = function getTilePrjExtent(tileX, tileY, res) {\n    var nw = this.getTilePrjNW(tileX, tileY, res),\n        se = this.getTilePrjSE(tileX, tileY, res);\n    return new Extent(nw, se);\n  };\n\n  return TileConfig;\n}();\n\nvar planes = [];\n\nfor (var i = 0; i < 6; i++) {\n  planes[i] = [];\n}\n\nvar p = [];\n\nfunction intersectsBox(matrix, box, mask) {\n  setPlanes(matrix);\n\n  for (var i = 0; i < 6; i++) {\n    if (mask && mask.charAt(i) === '0') {\n      continue;\n    }\n\n    var plane = planes[i];\n    p[0] = plane[0] > 0 ? box[1][0] : box[0][0];\n    p[1] = plane[1] > 0 ? box[1][1] : box[0][1];\n    p[2] = plane[2] > 0 ? box[1][2] : box[0][2];\n\n    if (distanceToPoint(plane, p) < 0) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction setPlanes(m) {\n  var me = m;\n  var me0 = me[0],\n      me1 = me[1],\n      me2 = me[2],\n      me3 = me[3];\n  var me4 = me[4],\n      me5 = me[5],\n      me6 = me[6],\n      me7 = me[7];\n  var me8 = me[8],\n      me9 = me[9],\n      me10 = me[10],\n      me11 = me[11];\n  var me12 = me[12],\n      me13 = me[13],\n      me14 = me[14],\n      me15 = me[15];\n  setComponents(planes[0], me3 - me0, me7 - me4, me11 - me8, me15 - me12);\n  setComponents(planes[1], me3 + me0, me7 + me4, me11 + me8, me15 + me12);\n  setComponents(planes[2], me3 + me1, me7 + me5, me11 + me9, me15 + me13);\n  setComponents(planes[3], me3 - me1, me7 - me5, me11 - me9, me15 - me13);\n  setComponents(planes[4], me3 - me2, me7 - me6, me11 - me10, me15 - me14);\n  setComponents(planes[5], me3 + me2, me7 + me6, me11 + me10, me15 + me14);\n}\n\nfunction setComponents(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  var length = distance$1(out);\n  out[0] /= length;\n  out[1] /= length;\n  out[2] /= length;\n  out[3] /= length;\n  return out;\n}\n\nfunction distanceToPoint(plane, p) {\n  return plane[0] * p[0] + plane[1] * p[1] + plane[2] * p[2] + plane[3];\n}\n\nfunction distance$1(v3) {\n  return Math.sqrt(v3[0] * v3[0] + v3[1] * v3[1] + v3[2] * v3[2]);\n}\n\nvar isSetAvailable = typeof Set !== 'undefined';\n\nvar TileHashset = function () {\n  function TileHashset() {\n    this._table = isSetAvailable ? new Set() : {};\n  }\n\n  var _proto = TileHashset.prototype;\n\n  _proto.add = function add$$1(key) {\n    if (isSetAvailable) {\n      this._table.add(key);\n    } else {\n      this._table[key] = true;\n    }\n  };\n\n  _proto.has = function has(key) {\n    if (isSetAvailable) {\n      return this._table.has(key);\n    } else {\n      return this._table[key];\n    }\n  };\n\n  _proto.reset = function reset() {\n    if (isSetAvailable) {\n      this._table.clear();\n    } else {\n      this._table = {};\n    }\n  };\n\n  return TileHashset;\n}();\n\nvar options$u = {\n  'urlTemplate': null,\n  'subdomains': null,\n  'repeatWorld': true,\n  'background': true,\n  'backgroundZoomDiff': 6,\n  'loadingLimitOnInteracting': 3,\n  'tileRetryCount': 0,\n  'placeholder': false,\n  'crossOrigin': null,\n  'tileSize': [256, 256],\n  'offset': [0, 0],\n  'tileSystem': null,\n  'fadeAnimation': !IS_NODE,\n  'debug': false,\n  'spatialReference': null,\n  'maxCacheSize': 256,\n  'renderer': function () {\n    return Browser$1.webgl ? 'gl' : 'canvas';\n  }(),\n  'clipByPitch': true,\n  'maxAvailableZoom': null,\n  'cascadeTiles': true,\n  'zoomOffset': 0\n};\nvar URL_PATTERN$1 = /\\{ *([\\w_]+) *\\}/g;\nvar TEMP_POINT = new Point(0, 0);\nvar TEMP_POINT0$3 = new Point(0, 0);\nvar TEMP_POINT1$1 = new Point(0, 0);\nvar TEMP_POINT2 = new Point(0, 0);\nvar TEMP_POINT3 = new Point(0, 0);\nvar TEMP_POINT4 = new Point(0, 0);\nvar TEMP_POINT5 = new Point(0, 0);\nvar TEMP_POINT6 = new Point(0, 0);\nvar TILE_BOX = [[0, 0, 0], [0, 0, 0]];\nvar ARR3 = [];\n\nvar TileLayer = function (_Layer) {\n  _inheritsLoose(TileLayer, _Layer);\n\n  function TileLayer() {\n    return _Layer.apply(this, arguments) || this;\n  }\n\n  TileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'TileLayer') {\n      return null;\n    }\n\n    return new TileLayer(layerJSON['id'], layerJSON['options']);\n  };\n\n  var _proto2 = TileLayer.prototype;\n\n  _proto2.getTileSize = function getTileSize() {\n    var size = this.options['tileSize'];\n\n    if (isNumber(size)) {\n      size = [size, size];\n    }\n\n    return new Size(size);\n  };\n\n  _proto2.getTiles = function getTiles(z, parentLayer) {\n    var map = this.getMap();\n    var pitch = map.getPitch();\n    var parentRenderer = parentLayer && parentLayer.getRenderer();\n    var mapExtent = map.getContainerExtent();\n    var tileGrids = [];\n    var count = 0;\n    var minZoom = this.getMinZoom();\n    var cascadePitch0 = map.options['cascadePitches'][0];\n    var cascadePitch1 = map.options['cascadePitches'][1];\n    var visualHeight1 = Math.floor(map._getVisualHeight(cascadePitch1));\n    var tileZoom = isNil(z) ? this._getTileZoom(map.getZoom()) : z;\n    this._visitedTiles = new TileHashset();\n    this._coordCache = {};\n\n    if (!isNil(z) || !this.options['cascadeTiles'] || pitch <= cascadePitch0 || !isNil(minZoom) && tileZoom <= minZoom) {\n      var containerExtent = pitch <= cascadePitch1 ? mapExtent : new PointExtent(0, map.height - visualHeight1, map.width, map.height);\n\n      var _currentTiles = this._getTiles(tileZoom, containerExtent, 2, parentRenderer);\n\n      if (_currentTiles) {\n        count += _currentTiles.tiles.length;\n        tileGrids.push(_currentTiles);\n      }\n\n      return {\n        tileGrids: tileGrids,\n        count: count\n      };\n    }\n\n    var visualHeight0 = Math.floor(map._getVisualHeight(cascadePitch0));\n    var extent0 = new PointExtent(0, map.height - visualHeight0, map.width, map.height);\n\n    var currentTiles = this._getTiles(tileZoom, extent0, 0, parentRenderer);\n\n    count += currentTiles ? currentTiles.tiles.length : 0;\n    tileGrids.push(currentTiles);\n    var cascadeHeight = extent0.ymin;\n    var d = map.getSpatialReference().getZoomDirection();\n    var cascadeLevels = d;\n    var cascadeTiles1;\n\n    if (pitch > cascadePitch1) {\n      if (tileZoom - cascadeLevels <= minZoom) {\n        cascadeLevels = 0;\n      }\n\n      var extent1 = new PointExtent(0, map.height - visualHeight1, map.width, cascadeHeight);\n      cascadeTiles1 = this._getTiles(tileZoom - cascadeLevels, extent1, 1, parentRenderer);\n      count += cascadeTiles1 ? cascadeTiles1.tiles.length : 0;\n      cascadeHeight = extent1.ymin;\n      cascadeLevels += 4 * d;\n    }\n\n    var cascadeTiles2;\n\n    if (tileZoom - cascadeLevels >= minZoom) {\n      var extent2 = new PointExtent(0, mapExtent.ymin, map.width, cascadeHeight);\n      cascadeTiles2 = this._getTiles(tileZoom - cascadeLevels, extent2, 2, parentRenderer);\n      count += cascadeTiles2 ? cascadeTiles2.tiles.length : 0;\n      tileGrids.push(cascadeTiles2);\n    }\n\n    if (cascadeTiles1 && cascadeTiles2) {\n      tileGrids[1] = cascadeTiles2;\n      tileGrids[2] = cascadeTiles1;\n    }\n\n    return {\n      tileGrids: tileGrids,\n      count: count\n    };\n  };\n\n  _proto2.getTileUrl = function getTileUrl(x, y, z) {\n    var urlTemplate = this.options['urlTemplate'];\n    var domain = '';\n\n    if (this.options['subdomains']) {\n      var subdomains = this.options['subdomains'];\n\n      if (isArrayHasData(subdomains)) {\n        var length$$1 = subdomains.length;\n        var s = (x + y) % length$$1;\n\n        if (s < 0) {\n          s = 0;\n        }\n\n        domain = subdomains[s];\n      }\n    }\n\n    if (isFunction(urlTemplate)) {\n      return urlTemplate(x, y, z, domain);\n    }\n\n    var data = {\n      'x': x,\n      'y': y,\n      'z': z,\n      's': domain\n    };\n    return urlTemplate.replace(URL_PATTERN$1, function (str, key) {\n      var value = data[key];\n\n      if (value === undefined) {\n        throw new Error('No value provided for variable ' + str);\n      } else if (typeof value === 'function') {\n        value = value(data);\n      }\n\n      return value;\n    });\n  };\n\n  _proto2.clear = function clear() {\n    if (this._renderer) {\n      this._renderer.clear();\n    }\n\n    this.fire('clear');\n    return this;\n  };\n\n  _proto2.toJSON = function toJSON() {\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'options': this.config()\n    };\n    return profile;\n  };\n\n  _proto2.getSpatialReference = function getSpatialReference() {\n    var map = this.getMap();\n\n    if (map && (!this.options['spatialReference'] || SpatialReference.equals(this.options['spatialReference'], map.options['spatialReference']))) {\n      return map.getSpatialReference();\n    }\n\n    this._sr = this._sr || new SpatialReference(this.options['spatialReference']);\n\n    if (this._srMinZoom === undefined) {\n      this._srMinZoom = this._sr.getMinZoom();\n      this._srMaxZoom = this._sr.getMaxZoom();\n    }\n\n    return this._sr;\n  };\n\n  _proto2.getMinZoom = function getMinZoom() {\n    var sr = this.getSpatialReference();\n\n    if (sr !== this.getMap().getSpatialReference()) {\n      return Math.max(_Layer.prototype.getMinZoom.call(this), this._srMinZoom);\n    }\n\n    return _Layer.prototype.getMinZoom.call(this);\n  };\n\n  _proto2.getMaxZoom = function getMaxZoom() {\n    var sr = this.getSpatialReference();\n\n    if (sr !== this.getMap().getSpatialReference()) {\n      return Math.min(_Layer.prototype.getMaxZoom.call(this), this._srMaxZoom);\n    }\n\n    return _Layer.prototype.getMaxZoom.call(this);\n  };\n\n  _proto2._getTileZoom = function _getTileZoom(zoom) {\n    if (!isInteger(zoom)) {\n      zoom = Math.round(zoom);\n    }\n\n    var maxZoom = this.options['maxAvailableZoom'];\n\n    if (!isNil(maxZoom) && zoom > maxZoom) {\n      zoom = maxZoom;\n    }\n\n    return zoom;\n  };\n\n  _proto2._getTiles = function _getTiles(tileZoom, containerExtent, cascadeLevel, parentRenderer) {\n    var _this = this;\n\n    var map = this.getMap();\n    var z = tileZoom;\n    var frustumMatrix = map.projViewMatrix;\n\n    if (cascadeLevel < 2) {\n      if (cascadeLevel === 0) {\n        z -= 1;\n      }\n\n      frustumMatrix = cascadeLevel === 0 ? map.cascadeFrustumMatrix0 : cascadeLevel === 1 ? map.cascadeFrustumMatrix1 : map.projViewMatrix;\n    }\n\n    var zoom = z + this.options['zoomOffset'];\n\n    var offset = this._getTileOffset(zoom),\n        hasOffset = offset[0] || offset[1];\n\n    var emptyGrid = {\n      'zoom': z,\n      'extent': null,\n      'offset': offset,\n      'tiles': []\n    };\n\n    if (zoom < 0) {\n      return emptyGrid;\n    }\n\n    var minZoom = this.getMinZoom(),\n        maxZoom = this.getMaxZoom();\n\n    if (!map || !this.isVisible() || !map.width || !map.height) {\n      return emptyGrid;\n    }\n\n    if (!isNil(minZoom) && z < minZoom || !isNil(maxZoom) && z > maxZoom) {\n      return emptyGrid;\n    }\n\n    var tileConfig = this._getTileConfig();\n\n    if (!tileConfig) {\n      return emptyGrid;\n    }\n\n    var sr = this.getSpatialReference();\n    var mapSR = map.getSpatialReference();\n    var res = sr.getResolution(zoom);\n    var glScale = map.getGLScale(z);\n    var repeatWorld = sr === mapSR && this.options['repeatWorld'];\n    var extent2d = containerExtent.convertTo(function (c) {\n      var result;\n\n      if (c.y > 0 && c.y < map.height) {\n        var key = (c.x === 0 ? 0 : 1) + c.y;\n\n        if (!_this._coordCache[key]) {\n          _this._coordCache[key] = map._containerPointToPoint(c);\n        }\n\n        result = _this._coordCache[key];\n      }\n\n      result = map._containerPointToPoint(c, undefined, TEMP_POINT);\n      return result;\n    });\n\n    extent2d._add(offset);\n\n    var maskExtent = this._getMask2DExtent();\n\n    if (maskExtent) {\n      var intersection = maskExtent.intersection(extent2d);\n\n      if (!intersection) {\n        return emptyGrid;\n      }\n\n      containerExtent = intersection.convertTo(function (c) {\n        return map._pointToContainerPoint(c, undefined, 0, TEMP_POINT);\n      });\n    }\n\n    var prjCenter = map._containerPointToPrj(containerExtent.getCenter(), TEMP_POINT0$3);\n\n    var centerPoint = map._prjToPoint(prjCenter, undefined, TEMP_POINT1$1);\n\n    var c;\n\n    if (hasOffset) {\n      c = this._project(map._pointToPrj(centerPoint._add(offset), undefined, TEMP_POINT1$1), TEMP_POINT1$1);\n    } else {\n      c = this._project(prjCenter, TEMP_POINT1$1);\n    }\n\n    TEMP_POINT2.x = extent2d.xmin;\n    TEMP_POINT2.y = extent2d.ymax;\n    TEMP_POINT3.x = extent2d.xmax;\n    TEMP_POINT3.y = extent2d.ymin;\n\n    var pmin = this._project(map._pointToPrj(TEMP_POINT2, undefined, TEMP_POINT2), TEMP_POINT2);\n\n    var pmax = this._project(map._pointToPrj(TEMP_POINT3, undefined, TEMP_POINT3), TEMP_POINT3);\n\n    var centerTile = tileConfig.getTileIndex(c, res, repeatWorld);\n    var ltTile = tileConfig.getTileIndex(pmin, res, repeatWorld);\n    var rbTile = tileConfig.getTileIndex(pmax, res, repeatWorld);\n    var top = Math.ceil(Math.abs(centerTile.idy - ltTile.idy)),\n        left = Math.ceil(Math.abs(centerTile.idx - ltTile.idx)),\n        bottom = Math.ceil(Math.abs(centerTile.idy - rbTile.idy)),\n        right = Math.ceil(Math.abs(centerTile.idx - rbTile.idx));\n    var allCount = (top + bottom + 1) * (left + right + 1);\n    var tileSize = this.getTileSize();\n\n    var renderer = this.getRenderer() || parentRenderer,\n        scale = this._getTileConfig().tileSystem.scale;\n\n    var tiles = [],\n        extent = new PointExtent();\n\n    for (var i = -top; i <= bottom; i++) {\n      var j = -left;\n      var leftVisitEnd = -Infinity;\n      var rightVisitEnd = false;\n\n      while (j >= leftVisitEnd && j <= right) {\n        var idx = tileConfig.getNeighorTileIndex(centerTile.idx, centerTile.idy, j, i, res, repeatWorld);\n\n        if (leftVisitEnd === -Infinity) {\n          j++;\n        } else {\n          j--;\n        }\n\n        var tileId = this._getTileId(idx.idx, idx.idy, z);\n\n        if (idx.out || this._visitedTiles && this._visitedTiles.has(tileId)) {\n          continue;\n        }\n\n        var tileInfo = renderer && renderer.isTileCachedOrLoading(tileId);\n\n        if (tileInfo) {\n          tileInfo = tileInfo.info;\n        }\n\n        var p = void 0;\n\n        if (tileInfo) {\n          var _tileInfo = tileInfo,\n              point0 = _tileInfo.point0;\n          p = tileInfo.point.set(point0.x, point0.y);\n        } else if (!this._hasOwnSR) {\n          p = tileConfig.getTilePointNW(idx.x, idx.y, res);\n        } else {\n          var pnw = tileConfig.getTilePrjNW(idx.x, idx.y, res);\n          p = map._prjToPoint(this._unproject(pnw, TEMP_POINT3), z);\n        }\n\n        var width = void 0,\n            height = void 0;\n\n        if (sr === mapSR) {\n          width = tileSize.width;\n          height = tileSize.height;\n        } else {\n          var pp = void 0;\n\n          if (!this._hasOwnSR) {\n            pp = tileConfig.getTilePointSE(idx.x, idx.y, res);\n          } else {\n            var pse = tileConfig.getTilePrjSE(idx.x, idx.y, res);\n            pp = map._prjToPoint(this._unproject(pse, TEMP_POINT3), z, TEMP_POINT3);\n          }\n\n          width = Math.ceil(Math.abs(pp.x - p.x));\n          height = Math.ceil(Math.abs(pp.y - p.y));\n        }\n\n        var dx = scale.x * (idx.idx - idx.x) * width,\n            dy = scale.y * (idx.idy - idx.y) * height;\n\n        if (dx || dy) {\n          p._add(dx, dy);\n        }\n\n        if (hasOffset) {\n          p._sub(offset);\n        }\n\n        var tileExtent = tileInfo && tileInfo.extent2d || new PointExtent(p.x, p.y, p.x + width, p.y - height);\n\n        if (allCount <= 4 || rightVisitEnd || this._isTileInExtent(frustumMatrix, tileExtent, glScale)) {\n          if (this._visitedTiles && cascadeLevel === 0) {\n            this._visitedTiles.add(tileId);\n          }\n\n          if (cascadeLevel === 0) {\n            this._splitTiles(frustumMatrix, tiles, renderer, idx, z + 1, tileExtent, offset, dx, dy);\n\n            extent._combine(tileExtent);\n          } else {\n            if (!tileInfo) {\n              tileInfo = {\n                'point0': p.add(offset)._sub(dx, dy),\n                'point': p,\n                'z': z,\n                'x': idx.x,\n                'y': idx.y,\n                'extent2d': tileExtent,\n                'mask': cascadeLevel,\n                'size': [width, height],\n                'id': tileId,\n                'dupKey': tileId,\n                'layer': this.getId(),\n                'url': this.getTileUrl(idx.x, idx.y, zoom)\n              };\n            }\n\n            if (hasOffset) {\n              tileExtent.set(p.x, p.y, p.x + width, p.y - height);\n              tileInfo.point = p._add(offset);\n\n              tileExtent._add(offset);\n            }\n\n            tiles.push(tileInfo);\n\n            extent._combine(tileExtent);\n          }\n\n          if (leftVisitEnd === -Infinity) {\n            leftVisitEnd = j;\n            j = right;\n          } else if (!rightVisitEnd) {\n            rightVisitEnd = true;\n          }\n        }\n      }\n    }\n\n    if (tiles.length) {\n      var center = map._containerPointToPoint(containerExtent.getCenter(), z, TEMP_POINT)._add(offset);\n\n      tiles.sort(function (a, b) {\n        return a.point.distanceTo(center) - b.point.distanceTo(center);\n      });\n    }\n\n    return {\n      'offset': offset,\n      'zoom': tileZoom,\n      'extent': extent,\n      'tiles': tiles\n    };\n  };\n\n  _proto2._splitTiles = function _splitTiles(frustumMatrix, tiles, renderer, tileIdx, z, tileExtent, offset, dx, dy) {\n    var yOrder = this._getTileConfig().tileSystem.scale.y;\n\n    var glScale = this.getMap().getGLScale(z);\n    var corner = TEMP_POINT4.set(tileExtent.xmin * 2, yOrder < 0 ? tileExtent.ymax * 2 : tileExtent.ymin * 2);\n\n    var corner0 = TEMP_POINT5.set(tileExtent.xmin, yOrder < 0 ? tileExtent.ymax : tileExtent.ymin)._add(offset)._sub(dx, dy)._multi(2);\n\n    var w = tileExtent.getWidth();\n    var h = tileExtent.getHeight();\n    var idx = tileIdx.idx * 2;\n    var idy = tileIdx.idy * 2;\n    var x = tileIdx.x * 2;\n    var y = tileIdx.y * 2;\n\n    var tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, 0, 0, w, h, corner, corner0, offset, glScale);\n\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, 0, 1, w, h, corner, corner0, offset, glScale);\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, 1, 0, w, h, corner, corner0, offset, glScale);\n    if (tile) tiles.push(tile);\n    tile = this._checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, 1, 1, w, h, corner, corner0, offset, glScale);\n    if (tile) tiles.push(tile);\n  };\n\n  _proto2._checkAndAddTile = function _checkAndAddTile(frustumMatrix, renderer, idx, idy, x, y, z, i, j, w, h, corner, corner0, offset, glScale) {\n    var tileId = this._getTileId(idx + i, idy + j, z);\n\n    if (this._visitedTiles && this._visitedTiles.has(tileId)) {\n      return null;\n    }\n\n    var yOrder = this._getTileConfig().tileSystem.scale.y;\n\n    var childExtent = new PointExtent(corner.x + i * w, corner.y + yOrder * j * h, corner.x + (i + 1) * w, corner.y + yOrder * (j + 1) * h);\n\n    if (!this._isSplittedTileInExtent(frustumMatrix, childExtent, glScale)) {\n      return null;\n    }\n\n    var hasOffset = offset[0] || offset[1];\n    var tileInfo = renderer && renderer.isTileCachedOrLoading(tileId);\n\n    if (!tileInfo) {\n      tileInfo = {\n        'point0': corner0.add(i * w, Math.max(yOrder * j * h, yOrder * (j + 1) * h)),\n        'point': new Point(childExtent.xmin, childExtent.ymax),\n        'z': z,\n        'x': x + i,\n        'y': y + j,\n        'extent2d': childExtent,\n        'size': [w, h],\n        'id': tileId,\n        'dupKey': tileId,\n        'layer': this.getId(),\n        'url': this.getTileUrl(x + i, y + j, z + this.options['zoomOffset'])\n      };\n    } else {\n      tileInfo = tileInfo.info;\n    }\n\n    if (hasOffset) {\n      tileInfo.extent2d = childExtent;\n\n      tileInfo.extent2d._add(offset);\n\n      tileInfo.point.set(childExtent.xmin, childExtent.ymax)._add(offset);\n    }\n\n    return tileInfo;\n  };\n\n  _proto2._getTileOffset = function _getTileOffset(z) {\n    var map = this.getMap();\n\n    var scale = map._getResolution() / map._getResolution(z);\n\n    var offset = this.options['offset'];\n\n    if (isFunction(offset)) {\n      offset = offset(this);\n    }\n\n    offset[0] *= scale;\n    offset[1] *= scale;\n    return offset;\n  };\n\n  _proto2._getTileId = function _getTileId(x, y, zoom, id) {\n    return (id || this.getId()) + \"_\" + y + \"_\" + x + \"_\" + zoom;\n  };\n\n  _proto2._project = function _project(pcoord, out) {\n    if (this._hasOwnSR) {\n      var map = this.getMap();\n      var mapProjection = map.getProjection();\n      var projection = this.getSpatialReference().getProjection();\n      return projection.project(mapProjection.unproject(pcoord, out), out);\n    } else {\n      return pcoord;\n    }\n  };\n\n  _proto2._unproject = function _unproject(pcoord, out) {\n    if (this._hasOwnSR) {\n      var map = this.getMap();\n      var sr = this.getSpatialReference();\n      var mapProjection = map.getProjection();\n      var projection = sr.getProjection();\n      return mapProjection.project(projection.unproject(pcoord, out), out);\n    } else {\n      return pcoord;\n    }\n  };\n\n  _proto2._initTileConfig = function _initTileConfig() {\n    var map = this.getMap(),\n        tileSize = this.getTileSize();\n    var sr = this.getSpatialReference();\n    var projection = sr.getProjection(),\n        fullExtent = sr.getFullExtent();\n    this._defaultTileConfig = new TileConfig(map, TileSystem.getDefault(projection), fullExtent, tileSize);\n\n    if (this.options['tileSystem']) {\n      this._tileConfig = new TileConfig(map, this.options['tileSystem'], fullExtent, tileSize);\n    }\n\n    if (map && !this._tileConfig && map.getSpatialReference() === sr && map.getBaseLayer() && map.getBaseLayer() !== this && map.getBaseLayer()._getTileConfig) {\n      var base = map.getBaseLayer()._getTileConfig();\n\n      this._tileConfig = new TileConfig(map, base.tileSystem, base.fullExtent, tileSize);\n    }\n\n    this._hasOwnSR = sr !== map.getSpatialReference();\n  };\n\n  _proto2._getTileConfig = function _getTileConfig() {\n    if (!this._defaultTileConfig) {\n      this._initTileConfig();\n    }\n\n    return this._tileConfig || this._defaultTileConfig;\n  };\n\n  _proto2._bindMap = function _bindMap(map) {\n    var baseLayer = map.getBaseLayer();\n\n    if (baseLayer === this) {\n      if (!baseLayer.options.hasOwnProperty('forceRenderOnMoving')) {\n        this.config({\n          'forceRenderOnMoving': true\n        });\n      }\n    }\n\n    return _Layer.prototype._bindMap.apply(this, arguments);\n  };\n\n  _proto2._isTileInExtent = function _isTileInExtent(frustumMatrix, tileExtent, glScale) {\n    var map = this.getMap();\n    var matrix;\n\n    if (frustumMatrix !== map.projViewMatrix) {\n      var tileCenter = tileExtent.getCenter(TEMP_POINT6)._multi(glScale);\n\n      set$2(ARR3, tileCenter.x, tileCenter.y, 0);\n      var ndc = transformMat4(ARR3, ARR3, map.projViewMatrix);\n      matrix = ndc[1] < 0 ? map.projViewMatrix : frustumMatrix;\n    } else {\n      matrix = map.projViewMatrix;\n    }\n\n    TILE_BOX[0][0] = tileExtent.xmin * glScale;\n    TILE_BOX[0][1] = tileExtent.ymin * glScale;\n    TILE_BOX[1][0] = tileExtent.xmax * glScale;\n    TILE_BOX[1][1] = tileExtent.ymax * glScale;\n    return intersectsBox(matrix, TILE_BOX);\n  };\n\n  _proto2._isSplittedTileInExtent = function _isSplittedTileInExtent(frustumMatrix, tileExtent, glScale) {\n    var map = this.getMap();\n    TILE_BOX[0][0] = tileExtent.xmin * glScale;\n    TILE_BOX[0][1] = tileExtent.ymin * glScale;\n    TILE_BOX[1][0] = tileExtent.xmax * glScale;\n    TILE_BOX[1][1] = tileExtent.ymax * glScale;\n    return intersectsBox(map.projViewMatrix, TILE_BOX);\n  };\n\n  _proto2.getEvents = function getEvents() {\n    return {\n      'spatialreferencechange': this._onSpatialReferenceChange\n    };\n  };\n\n  _proto2._onSpatialReferenceChange = function _onSpatialReferenceChange() {\n    delete this._tileConfig;\n    delete this._defaultTileConfig;\n    delete this._sr;\n    var renderer = this.getRenderer();\n\n    if (renderer) {\n      renderer.clear();\n    }\n  };\n\n  return TileLayer;\n}(Layer);\n\nTileLayer.registerJSONType('TileLayer');\nTileLayer.mergeOptions(options$u);\n\nvar GroupTileLayer = function (_TileLayer) {\n  _inheritsLoose(GroupTileLayer, _TileLayer);\n\n  GroupTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'GroupTileLayer') {\n      return null;\n    }\n\n    var layers = layerJSON['layers'].map(function (json) {\n      return Layer.fromJSON(json);\n    });\n    return new GroupTileLayer(layerJSON['id'], layers, layerJSON['options']);\n  };\n\n  function GroupTileLayer(id, layers, options) {\n    var _this;\n\n    _this = _TileLayer.call(this, id, options) || this;\n    _this.layers = layers || [];\n\n    _this._checkChildren();\n\n    _this.layerMap = {};\n    _this._groupChildren = [];\n    return _this;\n  }\n\n  var _proto = GroupTileLayer.prototype;\n\n  _proto.getLayers = function getLayers() {\n    return this.layers;\n  };\n\n  _proto.toJSON = function toJSON() {\n    var profile = {\n      'type': this.getJSONType(),\n      'id': this.getId(),\n      'layers': this.layers.map(function (layer) {\n        return layer.toJSON();\n      }),\n      'options': this.config()\n    };\n    return profile;\n  };\n\n  _proto.getTiles = function getTiles(z) {\n    var layers = this.layers;\n    var tiles = [];\n    var count = 0;\n\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var layer = layers[i];\n\n      if (!layer.options['visible']) {\n        continue;\n      }\n\n      var childGrid = layer.getTiles(z, this);\n\n      if (!childGrid || childGrid.count === 0) {\n        continue;\n      }\n\n      count += childGrid.count;\n      pushIn(tiles, childGrid.tileGrids);\n    }\n\n    return {\n      count: count,\n      tileGrids: tiles\n    };\n  };\n\n  _proto.onAdd = function onAdd() {\n    var _this2 = this;\n\n    var map = this.getMap();\n    this.layers.forEach(function (layer) {\n      _this2.layerMap[layer.getId()] = layer;\n\n      if (layer.getChildLayer) {\n        _this2._groupChildren.push(layer);\n      }\n\n      layer._bindMap(map);\n\n      layer.on('show hide', _this2._onLayerShowHide, _this2);\n    });\n\n    _TileLayer.prototype.onAdd.call(this);\n  };\n\n  _proto.onRemove = function onRemove() {\n    var _this3 = this;\n\n    this.layers.forEach(function (layer) {\n      layer._doRemove();\n\n      layer.off('show hide', _this3._onLayerShowHide, _this3);\n    });\n    this.layerMap = {};\n    this._groupChildren = [];\n\n    _TileLayer.prototype.onRemove.call(this);\n  };\n\n  _proto.getChildLayer = function getChildLayer(id) {\n    var layer = this.layerMap[id];\n\n    if (layer) {\n      return layer;\n    }\n\n    for (var i = 0; i < this._groupChildren.length; i++) {\n      var child = this._groupChildren[i].getChildLayer(id);\n\n      if (child) {\n        return child;\n      }\n    }\n\n    return null;\n  };\n\n  _proto._onLayerShowHide = function _onLayerShowHide() {\n    var renderer = this.getRenderer();\n\n    if (renderer) {\n      renderer.setToRedraw();\n    }\n  };\n\n  _proto.isVisible = function isVisible() {\n    if (!_TileLayer.prototype.isVisible.call(this)) {\n      return false;\n    }\n\n    var children = this.layers;\n\n    for (var i = 0, l = children.length; i < l; i++) {\n      if (children[i].isVisible()) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  _proto._checkChildren = function _checkChildren() {\n    var _this4 = this;\n\n    var ids = {};\n    this.layers.forEach(function (layer) {\n      var layerId = layer.getId();\n\n      if (ids[layerId]) {\n        throw new Error(\"Duplicate child layer id (\" + layerId + \") in the GroupTileLayer (\" + _this4.getId() + \")\");\n      } else {\n        ids[layerId] = 1;\n      }\n    });\n  };\n\n  return GroupTileLayer;\n}(TileLayer);\n\nGroupTileLayer.registerJSONType('GroupTileLayer');\nvar options$v = {\n  crs: null,\n  uppercase: false,\n  detectRetina: false\n};\nvar defaultWmsParams = {\n  service: 'WMS',\n  request: 'GetMap',\n  layers: '',\n  styles: '',\n  format: 'image/jpeg',\n  transparent: false,\n  version: '1.1.1'\n};\n\nvar WMSTileLayer = function (_TileLayer) {\n  _inheritsLoose(WMSTileLayer, _TileLayer);\n\n  function WMSTileLayer(id, options) {\n    var _this;\n\n    _this = _TileLayer.call(this, id) || this;\n    var wmsParams = extend({}, defaultWmsParams);\n\n    for (var p in options) {\n      if (!(p in _this.options)) {\n        wmsParams[p] = options[p];\n      }\n    }\n\n    _this.setOptions(options);\n\n    _this.setZIndex(options.zIndex);\n\n    var tileSize = _this.getTileSize();\n\n    wmsParams.width = tileSize.width;\n    wmsParams.height = tileSize.height;\n    _this.wmsParams = wmsParams;\n    _this._wmsVersion = parseFloat(wmsParams.version);\n    return _this;\n  }\n\n  var _proto = WMSTileLayer.prototype;\n\n  _proto.onAdd = function onAdd() {\n    var dpr = this.getMap().getDevicePixelRatio();\n    var r = options$v.detectRetina ? dpr : 1;\n    this.wmsParams.width *= r;\n    this.wmsParams.height *= r;\n    var crs = this.options.crs || this.getMap().getProjection().code;\n    var projectionKey = this._wmsVersion >= 1.3 ? 'crs' : 'srs';\n    this.wmsParams[projectionKey] = crs;\n\n    _TileLayer.prototype.onAdd.call(this);\n  };\n\n  _proto.getTileUrl = function getTileUrl(x, y, z) {\n    var res = this.getSpatialReference().getResolution(z),\n        tileConfig = this._getTileConfig(),\n        tileExtent = tileConfig.getTilePrjExtent(x, y, res);\n\n    var max = tileExtent.getMax(),\n        min = tileExtent.getMin();\n    var bbox = (this._wmsVersion >= 1.3 && this.wmsParams.crs === 'EPSG:4326' ? [min.y, min.x, max.y, max.x] : [min.x, min.y, max.x, max.y]).join(',');\n\n    var url = _TileLayer.prototype.getTileUrl.call(this, x, y, z);\n\n    return url + getParamString(this.wmsParams, url, this.options.uppercase) + (this.options.uppercase ? '&BBOX=' : '&bbox=') + bbox;\n  };\n\n  _proto.toJSON = function toJSON() {\n    return {\n      'type': 'WMSTileLayer',\n      'id': this.getId(),\n      'options': this.config()\n    };\n  };\n\n  WMSTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'WMSTileLayer') {\n      return null;\n    }\n\n    return new WMSTileLayer(layerJSON['id'], layerJSON['options']);\n  };\n\n  return WMSTileLayer;\n}(TileLayer);\n\nWMSTileLayer.registerJSONType('WMSTileLayer');\nWMSTileLayer.mergeOptions(options$v);\n\nfunction getParamString(obj, existingUrl, uppercase) {\n  var params = [];\n\n  for (var i in obj) {\n    params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\n  }\n\n  return (!existingUrl || existingUrl.indexOf('?') === -1 ? '?' : '&') + params.join('&');\n}\n\nvar CanvasTileLayer = function (_TileLayer) {\n  _inheritsLoose(CanvasTileLayer, _TileLayer);\n\n  function CanvasTileLayer(id, options) {\n    var _this;\n\n    _this = _TileLayer.call(this, id, options) || this;\n\n    if (!_this.options.hasOwnProperty('forceRenderOnMoving')) {\n      _this.options['forceRenderOnMoving'] = false;\n    }\n\n    return _this;\n  }\n\n  var _proto = CanvasTileLayer.prototype;\n\n  _proto.drawTile = function drawTile() {};\n\n  _proto.toJSON = function toJSON() {\n    return {\n      'type': 'CanvasTileLayer',\n      'id': this.getId(),\n      'options': this.config()\n    };\n  };\n\n  CanvasTileLayer.fromJSON = function fromJSON(layerJSON) {\n    if (!layerJSON || layerJSON['type'] !== 'CanvasTileLayer') {\n      return null;\n    }\n\n    return new CanvasTileLayer(layerJSON['id'], layerJSON['options']);\n  };\n\n  return CanvasTileLayer;\n}(TileLayer);\n\nCanvasTileLayer.registerJSONType('CanvasTileLayer');\n\nfunction createGLContext(canvas, options) {\n  var attributes = {\n    'alpha': true,\n    'stencil': true,\n    'preserveDrawingBuffer': true,\n    'antialias': false\n  };\n  var names = ['webgl', 'experimental-webgl'];\n  var context = null;\n\n  for (var i = 0; i < names.length; ++i) {\n    try {\n      context = canvas.getContext(names[i], options || attributes);\n    } catch (e) {}\n\n    if (context) {\n      break;\n    }\n  }\n\n  return context;\n}\n\nfunction compileShader(gl, type, source) {\n  var shader = gl.createShader(type);\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n  if (!compiled) {\n    var error = gl.getShaderInfoLog(shader);\n    gl.deleteShader(shader);\n    throw new Error('Failed to compile shader: ' + error);\n  }\n\n  return shader;\n}\n\nfunction createProgram(gl, vert, frag) {\n  var vertexShader = compileShader(gl, gl.VERTEX_SHADER, vert);\n  var fragmentShader = compileShader(gl, gl.FRAGMENT_SHADER, frag);\n\n  if (!vertexShader || !fragmentShader) {\n    return null;\n  }\n\n  var program = gl.createProgram();\n\n  if (!program) {\n    return null;\n  }\n\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n  return {\n    program: program,\n    vertexShader: vertexShader,\n    fragmentShader: fragmentShader\n  };\n}\n\nfunction enableVertexAttrib(gl, program, attributes) {\n  if (Array.isArray(attributes[0])) {\n    var FSIZE = Float32Array.BYTES_PER_ELEMENT;\n    var STRIDE = 0;\n\n    for (var i = 0; i < attributes.length; i++) {\n      STRIDE += attributes[i][1] || 0;\n    }\n\n    var offset = 0;\n\n    for (var _i = 0; _i < attributes.length; _i++) {\n      var attr = gl.getAttribLocation(program, attributes[_i][0]);\n\n      if (attr < 0) {\n        throw new Error('Failed to get the storage location of ' + attributes[_i][0]);\n      }\n\n      gl.vertexAttribPointer(attr, attributes[_i][1], gl[attributes[_i][2] || 'FLOAT'], false, FSIZE * STRIDE, FSIZE * offset);\n      offset += attributes[_i][1] || 0;\n      gl.enableVertexAttribArray(attr);\n    }\n  } else {\n    var _attr = gl.getAttribLocation(program, attributes[0]);\n\n    gl.vertexAttribPointer(_attr, attributes[1], gl[attributes[2] || 'FLOAT'], false, 0, 0);\n    gl.enableVertexAttribArray(_attr);\n  }\n}\n\nvar shaders = {\n  'vertexShader': \"\\n        attribute vec2 a_position;\\n\\n        attribute vec2 a_texCoord;\\n\\n        uniform mat4 u_matrix;\\n\\n        varying vec2 v_texCoord;\\n\\n        void main() {\\n            gl_Position = u_matrix * vec4(a_position, 0., 1.);\\n\\n            v_texCoord = a_texCoord;\\n        }\\n    \",\n  'fragmentShader': \"\\n        precision mediump float;\\n\\n        uniform sampler2D u_image;\\n\\n        uniform float u_opacity;\\n        uniform float u_debug_line;\\n\\n        varying vec2 v_texCoord;\\n\\n        void main() {\\n            if (u_debug_line == 1.) {\\n                gl_FragColor = vec4(0., 1., 0., 1.);\\n            } else {\\n                gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\\n            }\\n        }\\n    \"\n};\nvar v2 = [0, 0],\n    v3 = [0, 0, 0],\n    arr16 = new Array(16);\nvar DEBUG_POINT = new Point(20, 20);\n\nvar ImageGLRenderable = function ImageGLRenderable(Base) {\n  var renderable = function (_Base) {\n    _inheritsLoose(renderable, _Base);\n\n    function renderable() {\n      return _Base.apply(this, arguments) || this;\n    }\n\n    var _proto = renderable.prototype;\n\n    _proto.drawGLImage = function drawGLImage(image, x, y, w, h, scale$$1, opacity, debug) {\n      if (this.gl.program !== this.program) {\n        this.useProgram(this.program);\n      }\n\n      var gl = this.gl;\n      this.loadTexture(image);\n      v3[0] = x || 0;\n      v3[1] = y || 0;\n      var uMatrix = identity(arr16);\n      translate(uMatrix, uMatrix, v3);\n      scale(uMatrix, uMatrix, [scale$$1, scale$$1, 1]);\n      multiply(uMatrix, this.getMap().projViewMatrix, uMatrix);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, uMatrix);\n      gl.uniform1f(this.program['u_opacity'], opacity);\n      gl.uniform1f(this.program['u_debug_line'], 0);\n      var glBuffer = image.glBuffer;\n\n      if (glBuffer && (glBuffer.width !== w || glBuffer.height !== h)) {\n        this.saveImageBuffer(glBuffer);\n        delete image.glBuffer;\n      }\n\n      if (!image.glBuffer) {\n        image.glBuffer = this.bufferTileData(0, 0, w, h);\n      } else {\n        gl.bindBuffer(gl.ARRAY_BUFFER, glBuffer);\n      }\n\n      v2[0] = 'a_position';\n      v2[1] = 2;\n      v2[2] = image.glBuffer.type;\n      this.enableVertexAttrib(v2);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n      if (debug) {\n        this.drawDebug(uMatrix, v2, 0, 0, w, h, debug);\n      }\n    };\n\n    _proto.drawDebug = function drawDebug(uMatrix, attrib, x, y, w, h, debugInfo) {\n      var gl = this.gl;\n      gl.bindBuffer(gl.ARRAY_BUFFER, this._debugBuffer);\n      this.enableVertexAttrib(['a_position', 2, 'FLOAT']);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([x, y, x + w, y, x + w, y - h, x, y - h, x, y]), gl.DYNAMIC_DRAW);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, uMatrix);\n      gl.uniform1f(this.program['u_debug_line'], 1);\n      gl.drawArrays(gl.LINE_STRIP, 0, 5);\n      var canvas = this._debugInfoCanvas;\n\n      if (!canvas) {\n        var dpr = this.getMap().getDevicePixelRatio() > 1 ? 2 : 1;\n        canvas = this._debugInfoCanvas = document.createElement('canvas');\n        canvas.width = 256 * dpr;\n        canvas.height = 32 * dpr;\n\n        var _ctx = canvas.getContext('2d');\n\n        _ctx.font = '20px monospace';\n\n        _ctx.scale(dpr, dpr);\n      }\n\n      var ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      var color = this.layer.options['debugOutline'];\n      Canvas.fillText(ctx, debugInfo, DEBUG_POINT, color);\n      this.loadTexture(canvas);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);\n      w = 256;\n      h = 32;\n      var x1 = x;\n      var x2 = x + w;\n      var y1 = y;\n      var y2 = y - h;\n      gl.bufferData(gl.ARRAY_BUFFER, this.set8(x1, y1, x1, y2, x2, y1, x2, y2), gl.DYNAMIC_DRAW);\n      gl.uniform1f(this.program['u_debug_line'], 0);\n      gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    };\n\n    _proto.bufferTileData = function bufferTileData(x, y, w, h, buffer) {\n      var x1 = x;\n      var x2 = x + w;\n      var y1 = y;\n      var y2 = y - h;\n      var data;\n\n      if (isInteger(x1) && isInteger(x2) && isInteger(y1) && isInteger(y2)) {\n        data = this.set8Int(x1, y1, x1, y2, x2, y1, x2, y2);\n      } else {\n        data = this.set8(x1, y1, x1, y2, x2, y1, x2, y2);\n      }\n\n      var glBuffer = this.loadImageBuffer(data, buffer);\n      glBuffer.width = w;\n      glBuffer.height = h;\n      glBuffer.type = data instanceof Int16Array ? 'SHORT' : 'FLOAT';\n      return glBuffer;\n    };\n\n    _proto.drawTinImage = function drawTinImage(image, vertices, texCoords, indices, opacity) {\n      var gl = this.gl;\n      this.loadTexture(image);\n      gl.uniformMatrix4fv(this.program['u_matrix'], false, this.getMap().projViewMatrix);\n      gl.uniform1f(this.program['u_opacity'], opacity);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.posBuffer);\n      this.enableVertexAttrib(['a_position', 3]);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.DYNAMIC_DRAW);\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.texBuffer);\n      this.enableVertexAttrib(['a_texCoord', 2]);\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(texCoords), gl.DYNAMIC_DRAW);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.DYNAMIC_DRAW);\n      gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);\n    };\n\n    _proto.createCanvas2 = function createCanvas2() {\n      this.canvas2 = Canvas.createCanvas(this.canvas.width, this.canvas.height);\n    };\n\n    _proto.createGLContext = function createGLContext$$1() {\n      if (this.canvas.gl && this.canvas.gl.wrap) {\n        this.gl = this.canvas.gl.wrap();\n      } else {\n        this.gl = createGLContext(this.canvas2 || this.canvas, this.layer.options['glOptions']);\n      }\n\n      var gl = this.gl;\n      gl.clearColor(0.0, 0.0, 0.0, 0.0);\n      gl.disable(gl.DEPTH_TEST);\n      gl.enable(gl.STENCIL_TEST);\n      gl.enable(gl.BLEND);\n      gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n      this.program = this.createProgram(shaders['vertexShader'], this.layer.options['fragmentShader'] || shaders['fragmentShader'], ['u_matrix', 'u_image', 'u_opacity', 'u_debug_line']);\n      this._debugBuffer = this.createBuffer();\n      this.useProgram(this.program);\n      this.texBuffer = this.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.texBuffer);\n      this.enableVertexAttrib(['a_texCoord', 2, 'UNSIGNED_BYTE']);\n      gl.bufferData(gl.ARRAY_BUFFER, new Uint8Array([0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]), gl.STATIC_DRAW);\n      this.enableSampler('u_image');\n      gl.activeTexture(gl['TEXTURE0']);\n      gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n    };\n\n    _proto.resizeGLCanvas = function resizeGLCanvas() {\n      if (this.gl) {\n        this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n      }\n\n      if (!this.canvas2) {\n        return;\n      }\n\n      if (this.canvas2.width !== this.canvas.width || this.canvas2.height !== this.canvas.height) {\n        this.canvas2.width = this.canvas.width;\n        this.canvas2.height = this.canvas.height;\n      }\n    };\n\n    _proto.clearGLCanvas = function clearGLCanvas() {\n      if (this.gl) {\n        this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.STENCIL_BUFFER_BIT);\n      }\n    };\n\n    _proto.disposeImage = function disposeImage(image) {\n      if (!image) {\n        return;\n      }\n\n      if (image.texture) {\n        this.saveTexture(image.texture);\n      }\n\n      if (image.glBuffer) {\n        this.saveImageBuffer(image.glBuffer);\n      }\n\n      delete image.texture;\n      delete image.glBuffer;\n    };\n\n    _proto._createTexture = function _createTexture(image) {\n      var gl = this.gl;\n      var texture = this.getTexture() || gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n\n      if (isInteger(log2(image.width)) && isInteger(log2(image.width))) {\n        gl.generateMipmap(gl.TEXTURE_2D);\n      }\n\n      return texture;\n    };\n\n    _proto.getTexture = function getTexture() {\n      if (!this._textures) {\n        this._textures = [];\n      }\n\n      var textures = this._textures;\n      return textures && textures.length > 0 ? textures.pop() : null;\n    };\n\n    _proto.saveTexture = function saveTexture(texture) {\n      this._textures.push(texture);\n    };\n\n    _proto.loadTexture = function loadTexture(image) {\n      var gl = this.gl;\n      var texture = image.texture;\n\n      if (!texture) {\n        texture = this._createTexture(image);\n        image.texture = texture;\n      }\n\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      return texture;\n    };\n\n    _proto.getImageBuffer = function getImageBuffer() {\n      if (!this._imageBuffers) {\n        this._imageBuffers = [];\n      }\n\n      var imageBuffers = this._imageBuffers;\n      return imageBuffers && imageBuffers.length > 0 ? imageBuffers.pop() : null;\n    };\n\n    _proto.saveImageBuffer = function saveImageBuffer(buffer) {\n      this._imageBuffers.push(buffer);\n    };\n\n    _proto.loadImageBuffer = function loadImageBuffer(data, glBuffer) {\n      var gl = this.gl;\n      var buffer = glBuffer || this.createImageBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n      gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n      return buffer;\n    };\n\n    _proto.createImageBuffer = function createImageBuffer() {\n      return this.getImageBuffer() || this.createBuffer();\n    };\n\n    _proto.removeGLCanvas = function removeGLCanvas() {\n      var gl = this.gl;\n\n      if (!gl) {\n        return;\n      }\n\n      if (this._debugBuffer) {\n        gl.deleteBuffer(this._debugBuffer);\n        delete this._debugBuffer;\n      }\n\n      if (this._buffers) {\n        this._buffers.forEach(function (b) {\n          gl.deleteBuffer(b);\n        });\n\n        delete this._buffers;\n      }\n\n      if (this._textures) {\n        this._textures.forEach(function (t) {\n          return gl.deleteTexture(t);\n        });\n\n        delete this._textures;\n      }\n\n      if (this._debugInfoCanvas) {\n        var texture = this._debugInfoCanvas.texture;\n\n        if (texture) {\n          gl.deleteTexture(texture);\n        }\n\n        delete this._debugInfoCanvas.texture;\n        delete this._debugInfoCanvas;\n      }\n\n      var program = gl.program;\n      gl.deleteShader(program.fragmentShader);\n      gl.deleteShader(program.vertexShader);\n      gl.deleteProgram(program);\n      delete this.gl;\n      delete this.canvas2;\n    };\n\n    _proto.createBuffer = function createBuffer() {\n      var gl = this.gl;\n      var buffer = gl.createBuffer();\n\n      if (!buffer) {\n        throw new Error('Failed to create the buffer object');\n      }\n\n      if (!this._buffers) {\n        this._buffers = [];\n      }\n\n      this._buffers.push(buffer);\n\n      return buffer;\n    };\n\n    _proto.enableVertexAttrib = function enableVertexAttrib$$1(attributes) {\n      enableVertexAttrib(this.gl, this.gl.program, attributes);\n    };\n\n    _proto.createProgram = function createProgram$$1(vert, frag, uniforms) {\n      var gl = this.gl;\n\n      var _createProgram2 = createProgram(gl, vert, frag),\n          program = _createProgram2.program,\n          vertexShader = _createProgram2.vertexShader,\n          fragmentShader = _createProgram2.fragmentShader;\n\n      program.vertexShader = vertexShader;\n      program.fragmentShader = fragmentShader;\n\n      this._initUniforms(program, uniforms);\n\n      return program;\n    };\n\n    _proto.useProgram = function useProgram(program) {\n      var gl = this.gl;\n      gl.useProgram(program);\n      gl.program = program;\n      return this;\n    };\n\n    _proto.enableSampler = function enableSampler(sampler, texIdx) {\n      var gl = this.gl;\n\n      var uSampler = this._getUniform(gl.program, sampler);\n\n      if (!texIdx) {\n        texIdx = 0;\n      }\n\n      gl.uniform1i(uSampler, texIdx);\n      return uSampler;\n    };\n\n    _proto._initUniforms = function _initUniforms(program, uniforms) {\n      for (var i = 0; i < uniforms.length; i++) {\n        var name = uniforms[i];\n        var uniform = uniforms[i];\n        var b = name.indexOf('[');\n\n        if (b >= 0) {\n          name = name.substring(0, b);\n\n          if (!IS_NODE) {\n            uniform = uniform.substring(0, b);\n          }\n        }\n\n        program[name] = this._getUniform(program, uniform);\n      }\n    };\n\n    _proto._getUniform = function _getUniform(program, uniformName) {\n      var gl = this.gl;\n      var uniform = gl.getUniformLocation(program, uniformName);\n\n      if (!uniform) {\n        throw new Error('Failed to get the storage location of ' + uniformName);\n      }\n\n      return uniform;\n    };\n\n    return renderable;\n  }(Base);\n\n  extend(renderable.prototype, {\n    set8: function () {\n      var out = Browser$1.ie9 ? null : new Float32Array(8);\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        out[0] = a0;\n        out[1] = a1;\n        out[2] = a2;\n        out[3] = a3;\n        out[4] = a4;\n        out[5] = a5;\n        out[6] = a6;\n        out[7] = a7;\n        return out;\n      };\n    }(),\n    set8Int: function () {\n      var out = Browser$1.ie9 ? null : new Int16Array(8);\n      return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n        out[0] = a0;\n        out[1] = a1;\n        out[2] = a2;\n        out[3] = a3;\n        out[4] = a4;\n        out[5] = a5;\n        out[6] = a6;\n        out[7] = a7;\n        return out;\n      };\n    }()\n  });\n  return renderable;\n};\n\nvar options$w = {\n  renderer: Browser$1.webgl ? 'gl' : 'canvas',\n  crossOrigin: null\n};\nvar TEMP_POINT$1 = new Point(0, 0);\n\nvar ImageLayer = function (_Layer) {\n  _inheritsLoose(ImageLayer, _Layer);\n\n  function ImageLayer(id, images, options) {\n    var _this;\n\n    if (images && !Array.isArray(images) && !images.url) {\n      options = images;\n      images = null;\n    }\n\n    _this = _Layer.call(this, id, options) || this;\n    _this._images = images;\n    return _this;\n  }\n\n  var _proto = ImageLayer.prototype;\n\n  _proto.onAdd = function onAdd() {\n    this._prepareImages(this._images);\n  };\n\n  _proto.setImages = function setImages(images) {\n    this._images = images;\n\n    this._prepareImages(images);\n\n    return this;\n  };\n\n  _proto.getImages = function getImages() {\n    return this._images;\n  };\n\n  _proto._prepareImages = function _prepareImages(images) {\n    images = images || [];\n\n    if (!Array.isArray(images)) {\n      images = [images];\n    }\n\n    var map = this.getMap();\n    this._imageData = images.map(function (img) {\n      var extent = new Extent(img.extent);\n      return extend({}, img, {\n        extent: extent,\n        extent2d: extent.convertTo(function (c) {\n          return map.coordToPoint(c, map.getGLZoom());\n        })\n      });\n    });\n    this._images = images;\n    var renderer = this.getRenderer();\n\n    if (renderer) {\n      renderer.refreshImages();\n    }\n  };\n\n  return ImageLayer;\n}(Layer);\n\nImageLayer.mergeOptions(options$w);\nvar EMPTY_ARRAY = [];\n\nvar ImageLayerCanvasRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(ImageLayerCanvasRenderer, _CanvasRenderer);\n\n  function ImageLayerCanvasRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n\n  var _proto2 = ImageLayerCanvasRenderer.prototype;\n\n  _proto2.isDrawable = function isDrawable() {\n    if (this.getMap().getPitch()) {\n      if (console) {\n        console.warn('ImageLayer with canvas renderer can\\'t be pitched, use gl renderer (\\'renderer\\' : \\'gl\\') instead.');\n      }\n\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto2.checkResources = function checkResources() {\n    var _this2 = this;\n\n    if (this._imageLoaded) {\n      return EMPTY_ARRAY;\n    }\n\n    var layer = this.layer;\n\n    var urls = layer._imageData.map(function (img) {\n      return [img.url, null, null];\n    });\n\n    if (this.resources) {\n      var unloaded = [];\n      var resources = new ResourceCache();\n      urls.forEach(function (url) {\n        if (_this2.resources.isResourceLoaded(url)) {\n          var img = _this2.resources.getImage(url);\n\n          resources.addResource(url, img);\n        } else {\n          unloaded.push(url);\n        }\n      });\n      this.resources.forEach(function (url, res) {\n        if (!resources.isResourceLoaded(url)) {\n          _this2.retireImage(res.image);\n        }\n      });\n      this.resources = resources;\n      urls = unloaded;\n    }\n\n    this._imageLoaded = true;\n    return urls;\n  };\n\n  _proto2.retireImage = function retireImage() {};\n\n  _proto2.refreshImages = function refreshImages() {\n    this._imageLoaded = false;\n    this.setToRedraw();\n  };\n\n  _proto2.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n\n    if (map.isZooming() && !map.getPitch()) {\n      return false;\n    }\n\n    return _CanvasRenderer.prototype.needToRedraw.call(this);\n  };\n\n  _proto2.draw = function draw() {\n    if (!this.isDrawable()) {\n      return;\n    }\n\n    this.prepareCanvas();\n    this._painted = false;\n\n    this._drawImages();\n\n    this.completeRender();\n  };\n\n  _proto2._drawImages = function _drawImages() {\n    var imgData = this.layer._imageData;\n    var map = this.getMap();\n\n    var mapExtent = map._get2DExtent(map.getGLZoom());\n\n    if (imgData && imgData.length) {\n      for (var i = 0; i < imgData.length; i++) {\n        var extent = imgData[i].extent2d;\n        var image = this.resources && this.resources.getImage(imgData[i].url);\n\n        if (image && mapExtent.intersects(extent)) {\n          this._painted = true;\n\n          this._drawImage(image, extent, imgData[i].opacity || 1);\n        }\n      }\n    }\n  };\n\n  _proto2._drawImage = function _drawImage(image, extent, opacity) {\n    var globalAlpha = 0;\n    var ctx = this.context;\n\n    if (opacity < 1) {\n      globalAlpha = ctx.globalAlpha;\n      ctx.globalAlpha = opacity;\n    }\n\n    var map = this.getMap();\n    var nw = TEMP_POINT$1.set(extent.xmin, extent.ymax);\n\n    var point = map._pointToContainerPoint(nw, map.getGLZoom());\n\n    var x = point.x,\n        y = point.y;\n    var bearing = map.getBearing();\n\n    if (bearing) {\n      ctx.save();\n      ctx.translate(x, y);\n\n      if (bearing) {\n        ctx.rotate(-bearing * Math.PI / 180);\n      }\n\n      x = y = 0;\n    }\n\n    var scale = map.getGLScale();\n    ctx.drawImage(image, x, y, extent.getWidth() / scale, extent.getHeight() / scale);\n\n    if (bearing) {\n      ctx.restore();\n    }\n\n    if (globalAlpha) {\n      ctx.globalAlpha = globalAlpha;\n    }\n  };\n\n  _proto2.drawOnInteracting = function drawOnInteracting() {\n    this.draw();\n  };\n\n  return ImageLayerCanvasRenderer;\n}(CanvasRenderer);\n\nvar ImageLayerGLRenderer = function (_ImageGLRenderable) {\n  _inheritsLoose(ImageLayerGLRenderer, _ImageGLRenderable);\n\n  function ImageLayerGLRenderer() {\n    return _ImageGLRenderable.apply(this, arguments) || this;\n  }\n\n  var _proto3 = ImageLayerGLRenderer.prototype;\n\n  _proto3.isDrawable = function isDrawable() {\n    return true;\n  };\n\n  _proto3._drawImage = function _drawImage(image, extent, opacity) {\n    this.drawGLImage(image, extent.xmin, extent.ymax, extent.getWidth(), extent.getHeight(), 1, opacity);\n  };\n\n  _proto3.createContext = function createContext() {\n    this.createGLContext();\n  };\n\n  _proto3.resizeCanvas = function resizeCanvas(canvasSize) {\n    if (!this.canvas) {\n      return;\n    }\n\n    _ImageGLRenderable.prototype.resizeCanvas.call(this, canvasSize);\n\n    this.resizeGLCanvas();\n  };\n\n  _proto3.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n\n    _ImageGLRenderable.prototype.clearCanvas.call(this);\n\n    this.clearGLCanvas();\n  };\n\n  _proto3.retireImage = function retireImage(image) {\n    this.disposeImage(image);\n  };\n\n  _proto3.onRemove = function onRemove() {\n    this.removeGLCanvas();\n\n    _ImageGLRenderable.prototype.onRemove.call(this);\n  };\n\n  return ImageLayerGLRenderer;\n}(ImageGLRenderable(ImageLayerCanvasRenderer));\n\nImageLayer.registerRenderer('canvas', ImageLayerCanvasRenderer);\nImageLayer.registerRenderer('gl', ImageLayerGLRenderer);\n\nvar CanvasLayerRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(CanvasLayerRenderer, _CanvasRenderer);\n\n  function CanvasLayerRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n\n  var _proto = CanvasLayerRenderer.prototype;\n\n  _proto.getPrepareParams = function getPrepareParams() {\n    return [];\n  };\n\n  _proto.getDrawParams = function getDrawParams() {\n    return [];\n  };\n\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    if (this.canvas && this.layer.options['doubleBuffer']) {\n      this.buffer = Canvas.createCanvas(this.canvas.width, this.canvas.height, this.getMap().CanvasClass);\n    }\n  };\n\n  _proto.needToRedraw = function needToRedraw() {\n    if (this.layer.options['animation']) {\n      return true;\n    }\n\n    var map = this.getMap();\n\n    if (map.isInteracting() && !this.layer.drawOnInteracting) {\n      return false;\n    }\n\n    return _CanvasRenderer.prototype.needToRedraw.call(this);\n  };\n\n  _proto.draw = function draw() {\n    this.prepareCanvas();\n    this.prepareDrawContext();\n\n    this._drawLayer();\n  };\n\n  _proto.drawOnInteracting = function drawOnInteracting() {\n    this._drawLayerOnInteracting();\n  };\n\n  _proto.getCanvasImage = function getCanvasImage() {\n    var canvasImg = _CanvasRenderer.prototype.getCanvasImage.call(this);\n\n    if (canvasImg && canvasImg.image && this.layer.options['doubleBuffer']) {\n      var canvas = canvasImg.image;\n\n      if (this.buffer.width !== canvas.width || this.buffer.height !== canvas.height) {\n        this.buffer.width = canvas.width;\n        this.buffer.height = canvas.height;\n      }\n\n      var bufferContext = this.buffer.getContext('2d');\n      var prevent = this.layer.doubleBuffer(bufferContext, this.context);\n\n      if (prevent === undefined || prevent) {\n        Canvas.image(bufferContext, canvas, 0, 0);\n        canvasImg.image = this.buffer;\n      }\n    }\n\n    return canvasImg;\n  };\n\n  _proto.remove = function remove() {\n    delete this._drawContext;\n    return _CanvasRenderer.prototype.remove.call(this);\n  };\n\n  _proto.onZoomStart = function onZoomStart(param) {\n    this.layer.onZoomStart(param);\n\n    _CanvasRenderer.prototype.onZoomStart.call(this, param);\n  };\n\n  _proto.onZooming = function onZooming(param) {\n    this.layer.onZooming(param);\n\n    _CanvasRenderer.prototype.onZooming.call(this, param);\n  };\n\n  _proto.onZoomEnd = function onZoomEnd(param) {\n    this.layer.onZoomEnd(param);\n\n    _CanvasRenderer.prototype.onZoomEnd.call(this, param);\n  };\n\n  _proto.onMoveStart = function onMoveStart(param) {\n    this.layer.onMoveStart(param);\n\n    _CanvasRenderer.prototype.onMoveStart.call(this, param);\n  };\n\n  _proto.onMoving = function onMoving(param) {\n    this.layer.onMoving(param);\n\n    _CanvasRenderer.prototype.onMoving.call(this, param);\n  };\n\n  _proto.onMoveEnd = function onMoveEnd(param) {\n    this.layer.onMoveEnd(param);\n\n    _CanvasRenderer.prototype.onMoveEnd.call(this, param);\n  };\n\n  _proto.onResize = function onResize(param) {\n    this.layer.onResize(param);\n\n    _CanvasRenderer.prototype.onResize.call(this, param);\n  };\n\n  _proto.prepareDrawContext = function prepareDrawContext() {\n    if (!this._predrawed) {\n      var params = ensureParams(this.getPrepareParams());\n      this._drawContext = this.layer.prepareToDraw.apply(this.layer, [this.context].concat(params));\n\n      if (!this._drawContext) {\n        this._drawContext = [];\n      }\n\n      if (!Array.isArray(this._drawContext)) {\n        this._drawContext = [this._drawContext];\n      }\n\n      this._predrawed = true;\n    }\n  };\n\n  _proto._prepareDrawParams = function _prepareDrawParams() {\n    if (!this.getMap()) {\n      return null;\n    }\n\n    var view = this.getViewExtent();\n\n    if (view['maskExtent'] && !view['extent'].intersects(view['maskExtent'])) {\n      this.completeRender();\n      return null;\n    }\n\n    var args = [this.context, view];\n    var params = ensureParams(this.getDrawParams());\n    args.push.apply(args, params);\n    args.push.apply(args, this._drawContext);\n    return args;\n  };\n\n  _proto._drawLayer = function _drawLayer() {\n    var args = this._prepareDrawParams();\n\n    if (!args) {\n      return;\n    }\n\n    this.layer.draw.apply(this.layer, args);\n    this.completeRender();\n  };\n\n  _proto._drawLayerOnInteracting = function _drawLayerOnInteracting() {\n    if (!this.layer.drawOnInteracting) {\n      return;\n    }\n\n    var args = this._prepareDrawParams();\n\n    if (!args) {\n      return;\n    }\n\n    this.layer.drawOnInteracting.apply(this.layer, args);\n    this.completeRender();\n  };\n\n  return CanvasLayerRenderer;\n}(CanvasRenderer);\n\nfunction ensureParams(params) {\n  if (!params) {\n    params = [];\n  }\n\n  if (!Array.isArray(params)) {\n    params = [params];\n  }\n\n  return params;\n}\n\nvar options$x = {\n  'doubleBuffer': false,\n  'animation': false\n};\n\nvar CanvasLayer = function (_Layer) {\n  _inheritsLoose(CanvasLayer, _Layer);\n\n  function CanvasLayer() {\n    return _Layer.apply(this, arguments) || this;\n  }\n\n  var _proto = CanvasLayer.prototype;\n\n  _proto.isCanvasRender = function isCanvasRender() {\n    return true;\n  };\n\n  _proto.prepareToDraw = function prepareToDraw() {};\n\n  _proto.draw = function draw() {};\n\n  _proto.redraw = function redraw() {\n    if (this._getRenderer()) {\n      this._getRenderer().setToRedraw();\n    }\n\n    return this;\n  };\n\n  _proto.play = function play() {\n    this.config('animation', true);\n    return this;\n  };\n\n  _proto.pause = function pause() {\n    this.config('animation', false);\n    return this;\n  };\n\n  _proto.isPlaying = function isPlaying() {\n    return this.options['animation'];\n  };\n\n  _proto.clearCanvas = function clearCanvas() {\n    if (this._getRenderer()) {\n      this._getRenderer().clearCanvas();\n    }\n\n    return this;\n  };\n\n  _proto.requestMapToRender = function requestMapToRender() {\n    if (this._getRenderer()) {\n      this._getRenderer().requestMapToRender();\n    }\n\n    return this;\n  };\n\n  _proto.completeRender = function completeRender() {\n    if (this._getRenderer()) {\n      this._getRenderer().completeRender();\n    }\n\n    return this;\n  };\n\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    return this;\n  };\n\n  _proto.onZoomStart = function onZoomStart() {};\n\n  _proto.onZooming = function onZooming() {};\n\n  _proto.onZoomEnd = function onZoomEnd() {};\n\n  _proto.onMoveStart = function onMoveStart() {};\n\n  _proto.onMoving = function onMoving() {};\n\n  _proto.onMoveEnd = function onMoveEnd() {};\n\n  _proto.onResize = function onResize() {};\n\n  _proto.doubleBuffer = function doubleBuffer(bufferContext) {\n    bufferContext.clearRect(0, 0, bufferContext.canvas.width, bufferContext.canvas.height);\n    return this;\n  };\n\n  return CanvasLayer;\n}(Layer);\n\nCanvasLayer.mergeOptions(options$x);\nCanvasLayer.registerRenderer('canvas', CanvasLayerRenderer);\nvar TEMP_POINT$2 = new Point(0, 0);\nvar options$y = {\n  'animation': true\n};\n\nvar ParticleLayer = function (_CanvasLayer) {\n  _inheritsLoose(ParticleLayer, _CanvasLayer);\n\n  function ParticleLayer() {\n    return _CanvasLayer.apply(this, arguments) || this;\n  }\n\n  var _proto = ParticleLayer.prototype;\n\n  _proto.getParticles = function getParticles() {};\n\n  _proto.draw = function draw(context, view) {\n    var points = this.getParticles(now());\n\n    if (!points || points.length === 0) {\n      var renderer = this._getRenderer();\n\n      if (renderer) {\n        this._getRenderer()._shouldClear = true;\n      }\n\n      return;\n    }\n\n    var map = this.getMap();\n    var extent = view.extent;\n\n    if (view.maskExtent) {\n      extent = view.extent.intersection(view.maskExtent);\n    }\n\n    extent = extent.convertTo(function (c) {\n      return map._pointToContainerPoint(c, undefined, 0, TEMP_POINT$2);\n    });\n    var e = 2 * Math.PI;\n\n    for (var i = 0, l = points.length; i < l; i++) {\n      var pos = points[i].point;\n\n      if (extent.contains(pos)) {\n        var color = points[i].color || this.options['lineColor'] || '#fff',\n            r = points[i].r;\n\n        if (context.fillStyle !== color) {\n          context.fillStyle = color;\n        }\n\n        if (r <= 2) {\n          context.fillRect(pos.x - r / 2, pos.y - r / 2, r, r);\n        } else {\n          context.beginPath();\n          context.arc(pos.x, pos.y, r / 2, 0, e);\n          context.fill();\n        }\n      }\n    }\n\n    this._fillCanvas(context);\n  };\n\n  _proto._fillCanvas = function _fillCanvas(context) {\n    var g = context.globalCompositeOperation;\n    context.globalCompositeOperation = 'destination-out';\n    var trail = this.options['trail'] || 30;\n    context.fillStyle = 'rgba(0, 0, 0, ' + 1 / trail + ')';\n    context.fillRect(0, 0, context.canvas.width, context.canvas.height);\n    context.globalCompositeOperation = g;\n  };\n\n  return ParticleLayer;\n}(CanvasLayer);\n\nParticleLayer.mergeOptions(options$y);\nParticleLayer.registerRenderer('canvas', function (_CanvasLayerRenderer) {\n  _inheritsLoose(_class, _CanvasLayerRenderer);\n\n  function _class() {\n    return _CanvasLayerRenderer.apply(this, arguments) || this;\n  }\n\n  var _proto2 = _class.prototype;\n\n  _proto2.draw = function draw() {\n    if (!this.canvas || !this.layer.options['animation'] || this._shouldClear) {\n      this.prepareCanvas();\n      this._shouldClear = false;\n    }\n\n    this.prepareDrawContext();\n\n    this._drawLayer();\n  };\n\n  _proto2.drawOnInteracting = function drawOnInteracting() {\n    this.draw();\n    this._shouldClear = false;\n  };\n\n  _proto2.onSkipDrawOnInteracting = function onSkipDrawOnInteracting() {\n    this._shouldClear = true;\n  };\n\n  return _class;\n}(CanvasLayerRenderer));\nvar EDIT_STAGE_LAYER_PREFIX = INTERNAL_LAYER_PREFIX + '_edit_stage_';\n\nfunction createHandleSymbol(markerType, opacity) {\n  return {\n    'markerType': markerType,\n    'markerFill': '#fff',\n    'markerLineColor': '#000',\n    'markerLineWidth': 2,\n    'markerWidth': 10,\n    'markerHeight': 10,\n    'opacity': opacity\n  };\n}\n\nvar options$z = {\n  'fixAspectRatio': false,\n  'symbol': null,\n  'removeVertexOn': 'contextmenu',\n  'centerHandleSymbol': createHandleSymbol('ellipse', 1),\n  'vertexHandleSymbol': createHandleSymbol('square', 1),\n  'newVertexHandleSymbol': createHandleSymbol('square', 0.4)\n};\n\nvar GeometryEditor = function (_Eventable) {\n  _inheritsLoose(GeometryEditor, _Eventable);\n\n  function GeometryEditor(geometry, opts) {\n    var _this;\n\n    _this = _Eventable.call(this, opts) || this;\n    _this._geometry = geometry;\n\n    if (!_this._geometry) {\n      return _assertThisInitialized(_this);\n    }\n\n    return _this;\n  }\n\n  var _proto = GeometryEditor.prototype;\n\n  _proto.getMap = function getMap() {\n    return this._geometry.getMap();\n  };\n\n  _proto.prepare = function prepare() {\n    var map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    if (this.options['symbol']) {\n      this._originalSymbol = this._geometry.getSymbol();\n\n      this._geometry.setSymbol(this.options['symbol']);\n    }\n\n    this._prepareEditStageLayer();\n  };\n\n  _proto._prepareEditStageLayer = function _prepareEditStageLayer() {\n    var map = this.getMap();\n    var uid = UID();\n    var stageId = EDIT_STAGE_LAYER_PREFIX + uid,\n        shadowId = EDIT_STAGE_LAYER_PREFIX + uid + '_shadow';\n    this._editStageLayer = map.getLayer(stageId);\n    this._shadowLayer = map.getLayer(shadowId);\n\n    if (!this._editStageLayer) {\n      this._editStageLayer = new VectorLayer(stageId);\n      map.addLayer(this._editStageLayer);\n    }\n\n    if (!this._shadowLayer) {\n      this._shadowLayer = new VectorLayer(shadowId);\n      map.addLayer(this._shadowLayer);\n    }\n  };\n\n  _proto.start = function start() {\n    var _this2 = this;\n\n    if (!this._geometry || !this._geometry.getMap() || this._geometry.editing) {\n      return;\n    }\n\n    var map = this.getMap();\n    this.editing = true;\n    var geometry = this._geometry;\n    this._geometryDraggble = geometry.options['draggable'];\n    geometry.config('draggable', false);\n    this.prepare();\n    var shadow = geometry.copy();\n    shadow.setSymbol(geometry._getInternalSymbol());\n    shadow.copyEventListeners(geometry);\n\n    if (geometry._getParent()) {\n      shadow.copyEventListeners(geometry._getParent());\n    }\n\n    shadow._setEventTarget(geometry);\n\n    shadow.setId(null).config({\n      'draggable': false\n    });\n    this._shadow = shadow;\n\n    this._switchGeometryEvents('on');\n\n    geometry.hide();\n\n    if (geometry instanceof Marker || geometry instanceof Circle || geometry instanceof Rectangle || geometry instanceof Ellipse) {\n      this._createOrRefreshOutline();\n    }\n\n    this._shadowLayer.bringToFront().addGeometry(shadow);\n\n    this._editStageLayer.bringToFront();\n\n    this._addListener([map, 'zoomstart', function () {\n      _this2._editStageLayer.hide();\n    }]);\n\n    this._addListener([map, 'zoomend', function () {\n      _this2._editStageLayer.show();\n    }]);\n\n    if (!(geometry instanceof Marker)) {\n      this._createCenterHandle();\n    } else {\n      shadow.config('draggable', true);\n      shadow.on('dragend', this._onMarkerDragEnd, this);\n    }\n\n    if (geometry instanceof Marker) {\n      this.createMarkerEditor();\n    } else if (geometry instanceof Circle) {\n      this.createCircleEditor();\n    } else if (geometry instanceof Rectangle) {\n      this.createEllipseOrRectEditor();\n    } else if (geometry instanceof Ellipse) {\n      this.createEllipseOrRectEditor();\n    } else if (geometry instanceof Sector) ;else if (geometry instanceof Polygon || geometry instanceof LineString) {\n      this.createPolygonEditor();\n    }\n  };\n\n  _proto.stop = function stop() {\n    delete this._history;\n    delete this._historyPointer;\n    delete this._editOutline;\n\n    this._switchGeometryEvents('off');\n\n    var map = this.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    delete this._shadow;\n\n    this._geometry.config('draggable', this._geometryDraggble);\n\n    delete this._geometryDraggble;\n\n    this._geometry.show();\n\n    this._editStageLayer.remove();\n\n    this._shadowLayer.remove();\n\n    this._clearAllListeners();\n\n    this._refreshHooks = [];\n\n    if (this.options['symbol']) {\n      this._geometry.setSymbol(this._originalSymbol);\n\n      delete this._originalSymbol;\n    }\n\n    this.editing = false;\n  };\n\n  _proto.isEditing = function isEditing() {\n    if (isNil(this.editing)) {\n      return false;\n    }\n\n    return this.editing;\n  };\n\n  _proto._getGeometryEvents = function _getGeometryEvents() {\n    return {\n      'symbolchange': this._onGeoSymbolChange,\n      'positionchange shapechange': this._exeAndReset\n    };\n  };\n\n  _proto._switchGeometryEvents = function _switchGeometryEvents(oper) {\n    if (this._geometry) {\n      var events = this._getGeometryEvents();\n\n      for (var p in events) {\n        this._geometry[oper](p, events[p], this);\n      }\n    }\n  };\n\n  _proto._onGeoSymbolChange = function _onGeoSymbolChange(param) {\n    if (this._shadow) {\n      this._shadow.setSymbol(param.target._getInternalSymbol());\n    }\n  };\n\n  _proto._onMarkerDragEnd = function _onMarkerDragEnd() {\n    this._update('setCoordinates', this._shadow.getCoordinates().toArray());\n\n    this._refresh();\n  };\n\n  _proto._createOrRefreshOutline = function _createOrRefreshOutline() {\n    var geometry = this._geometry;\n    var outline = this._editOutline;\n\n    if (!outline) {\n      outline = geometry.getOutline();\n\n      this._editStageLayer.addGeometry(outline);\n\n      this._editOutline = outline;\n\n      this._addRefreshHook(this._createOrRefreshOutline);\n    } else {\n      outline.remove();\n      this._editOutline = outline = geometry.getOutline();\n\n      this._editStageLayer.addGeometry(outline);\n    }\n\n    return outline;\n  };\n\n  _proto._createCenterHandle = function _createCenterHandle() {\n    var _this3 = this;\n\n    var center = this._shadow.getCenter();\n\n    var symbol = this.options['centerHandleSymbol'];\n    var shadow;\n    var handle = this.createHandle(center, {\n      'symbol': symbol,\n      'cursor': 'move',\n      onDown: function onDown() {\n        shadow = _this3._shadow.copy();\n        var symbol = lowerSymbolOpacity(shadow._getInternalSymbol(), 0.5);\n        shadow.setSymbol(symbol).addTo(_this3._editStageLayer);\n      },\n      onMove: function onMove(v, param) {\n        var offset = param['coordOffset'];\n        shadow.translate(offset);\n      },\n      onUp: function onUp() {\n        _this3._update('setCoordinates', Coordinate.toNumberArrays(shadow.getCoordinates()));\n\n        shadow.remove();\n\n        _this3._refresh();\n      }\n    });\n\n    this._addRefreshHook(function () {\n      var center = _this3._shadow.getCenter();\n\n      handle.setCoordinates(center);\n    });\n  };\n\n  _proto._createHandleInstance = function _createHandleInstance(coordinate, opts) {\n    var symbol = opts['symbol'];\n    var handle = new Marker(coordinate, {\n      'draggable': true,\n      'dragShadow': false,\n      'dragOnAxis': opts['axis'],\n      'cursor': opts['cursor'],\n      'symbol': symbol\n    });\n    return handle;\n  };\n\n  _proto.createHandle = function createHandle(coordinate, opts) {\n    if (!opts) {\n      opts = {};\n    }\n\n    var map = this.getMap();\n\n    var handle = this._createHandleInstance(coordinate, opts);\n\n    var me = this;\n\n    function onHandleDragstart(param) {\n      if (opts.onDown) {\n        this._geometry.fire('handledragstart');\n\n        opts.onDown.call(me, param['viewPoint'], param);\n      }\n\n      return false;\n    }\n\n    function onHandleDragging(param) {\n      me._hideContext();\n\n      var viewPoint = map._prjToViewPoint(handle._getPrjCoordinates());\n\n      if (opts.onMove) {\n        this._geometry.fire('handledragging');\n\n        opts.onMove.call(me, viewPoint, param);\n      }\n\n      return false;\n    }\n\n    function onHandleDragEnd(ev) {\n      if (opts.onUp) {\n        this._geometry.fire('handledragend');\n\n        opts.onUp.call(me, ev);\n      }\n\n      return false;\n    }\n\n    function onHandleRemove() {\n      handle.config('draggable', false);\n      handle.off('dragstart', onHandleDragstart, me);\n      handle.off('dragging', onHandleDragging, me);\n      handle.off('dragend', onHandleDragEnd, me);\n      handle.off('removestart', onHandleRemove, me);\n      delete handle['maptalks--editor-refresh-fn'];\n    }\n\n    handle.on('dragstart', onHandleDragstart, this);\n    handle.on('dragging', onHandleDragging, this);\n    handle.on('dragend', onHandleDragEnd, this);\n    handle.on('removestart', onHandleRemove, this);\n\n    if (opts.onRefresh) {\n      handle['maptalks--editor-refresh-fn'] = opts.onRefresh;\n    }\n\n    this._editStageLayer.addGeometry(handle);\n\n    return handle;\n  };\n\n  _proto._createResizeHandles = function _createResizeHandles(blackList, onHandleMove, onHandleUp) {\n    var _this4 = this;\n\n    var cursors = ['nw-resize', 'n-resize', 'ne-resize', 'w-resize', 'e-resize', 'sw-resize', 's-resize', 'se-resize'];\n    var axis = [null, 'y', null, 'x', 'x', null, 'y', null];\n    var geometry = this._geometry;\n\n    function getResizeAnchors(ext) {\n      return [new Point(ext['xmin'], ext['ymax']), new Point((ext['xmax'] + ext['xmin']) / 2, ext['ymax']), new Point(ext['xmax'], ext['ymax']), new Point(ext['xmin'], (ext['ymax'] + ext['ymin']) / 2), new Point(ext['xmax'], (ext['ymax'] + ext['ymin']) / 2), new Point(ext['xmin'], ext['ymin']), new Point((ext['xmax'] + ext['xmin']) / 2, ext['ymin']), new Point(ext['xmax'], ext['ymin'])];\n    }\n\n    if (!blackList) {\n      blackList = [];\n    }\n\n    var me = this;\n    var resizeHandles = [],\n        anchorIndexes = {},\n        map = this.getMap(),\n        handleSymbol = this.options['vertexHandleSymbol'];\n\n    var fnLocateHandles = function fnLocateHandles() {\n      var pExt = geometry._getPainter().get2DExtent(),\n          anchors = getResizeAnchors(pExt);\n\n      var _loop = function _loop(i) {\n        if (Array.isArray(blackList)) {\n          var isBlack = blackList.some(function (ele) {\n            return ele === i;\n          });\n\n          if (isBlack) {\n            return \"continue\";\n          }\n        }\n\n        var anchor = anchors[i],\n            coordinate = map.pointToCoordinate(anchor);\n\n        if (resizeHandles.length < anchors.length - blackList.length) {\n          var handle = _this4.createHandle(coordinate, {\n            'symbol': handleSymbol,\n            'cursor': cursors[i],\n            'axis': axis[i],\n            onMove: function (_index) {\n              return function (handleViewPoint) {\n                me._updating = true;\n                onHandleMove(handleViewPoint, _index);\n                geometry.fire('resizing');\n              };\n            }(i),\n            onUp: function onUp() {\n              me._updating = false;\n              onHandleUp();\n\n              _this4._refresh();\n            }\n          });\n\n          handle.setId(i);\n          anchorIndexes[i] = resizeHandles.length;\n          resizeHandles.push(handle);\n        } else {\n          resizeHandles[anchorIndexes[i]].setCoordinates(coordinate);\n        }\n      };\n\n      for (var i = 0; i < anchors.length; i++) {\n        var _ret = _loop(i);\n\n        if (_ret === \"continue\") continue;\n      }\n    };\n\n    fnLocateHandles();\n\n    this._addRefreshHook(fnLocateHandles);\n\n    return resizeHandles;\n  };\n\n  _proto.createMarkerEditor = function createMarkerEditor() {\n    var _this5 = this;\n\n    var geometryToEdit = this._geometry,\n        shadow = this._shadow,\n        map = this.getMap();\n\n    if (!shadow._canEdit()) {\n      if (console) {\n        console.warn('A marker can\\'t be resized with symbol:', shadow.getSymbol());\n      }\n\n      return;\n    }\n\n    if (!this._history) {\n      this._recordHistory(getUpdates());\n    }\n\n    var symbol = shadow._getInternalSymbol();\n\n    var dxdy = new Point(0, 0);\n\n    if (isNumber(symbol['markerDx'])) {\n      dxdy.x = symbol['markerDx'];\n    }\n\n    if (isNumber(symbol['markerDy'])) {\n      dxdy.y = symbol['markerDy'];\n    }\n\n    var blackList = null;\n\n    if (VectorMarkerSymbolizer.test(symbol)) {\n      if (symbol['markerType'] === 'pin' || symbol['markerType'] === 'pie' || symbol['markerType'] === 'bar') {\n        blackList = [5, 6, 7];\n      }\n    } else if (ImageMarkerSymbolizer.test(symbol) || VectorPathMarkerSymbolizer.test(symbol)) {\n      blackList = [5, 6, 7];\n    }\n\n    var resizeAbilities = [2, 1, 2, 0, 0, 2, 1, 2];\n    var aspectRatio;\n\n    if (this.options['fixAspectRatio']) {\n      var size = shadow.getSize();\n      aspectRatio = size.width / size.height;\n    }\n\n    var resizeHandles = this._createResizeHandles(null, function (handleViewPoint, i) {\n      if (blackList && blackList.indexOf(i) >= 0) {\n        var newCoordinates = map.viewPointToCoordinate(handleViewPoint.sub(dxdy));\n        var coordinates = shadow.getCoordinates();\n        newCoordinates.x = coordinates.x;\n        shadow.setCoordinates(newCoordinates);\n\n        _this5._updateCoordFromShadow(true);\n\n        var mirrorHandle = resizeHandles[resizeHandles.length - 1 - i];\n        var mirrorViewPoint = map.coordToViewPoint(mirrorHandle.getCoordinates());\n        handleViewPoint = mirrorViewPoint;\n      }\n\n      var viewCenter = map._pointToViewPoint(shadow._getCenter2DPoint()).add(dxdy),\n          symbol = shadow._getInternalSymbol();\n\n      var wh = handleViewPoint.sub(viewCenter);\n\n      if (blackList && handleViewPoint.y > viewCenter.y) {\n        wh.y = 0;\n      }\n\n      var r = blackList ? 1 : 2;\n      var width = Math.abs(wh.x) * 2,\n          height = Math.abs(wh.y) * r;\n\n      if (aspectRatio) {\n        width = Math.max(width, height * aspectRatio);\n        height = width / aspectRatio;\n      }\n\n      var ability = resizeAbilities[i];\n\n      if (!(shadow instanceof TextBox)) {\n        if (aspectRatio || ability === 0 || ability === 2) {\n          symbol['markerWidth'] = width;\n        }\n\n        if (aspectRatio || ability === 1 || ability === 2) {\n          symbol['markerHeight'] = height;\n        }\n\n        shadow.setSymbol(symbol);\n        geometryToEdit.setSymbol(symbol);\n      } else {\n        if (aspectRatio || ability === 0 || ability === 2) {\n          shadow.setWidth(width);\n          geometryToEdit.setWidth(width);\n        }\n\n        if (aspectRatio || ability === 1 || ability === 2) {\n          shadow.setHeight(height);\n          geometryToEdit.setHeight(height);\n        }\n      }\n    }, function () {\n      _this5._update(getUpdates());\n    });\n\n    function getUpdates() {\n      var updates = [['setCoordinates', shadow.getCoordinates().toArray()]];\n\n      if (shadow instanceof TextBox) {\n        updates.push(['setWidth', shadow.getWidth()]);\n        updates.push(['setHeight', shadow.getHeight()]);\n      } else {\n        updates.push(['setSymbol', shadow.getSymbol()]);\n      }\n\n      return updates;\n    }\n\n    function onZoomEnd() {\n      this._refresh();\n    }\n\n    this._addListener([map, 'zoomend', onZoomEnd]);\n  };\n\n  _proto.createCircleEditor = function createCircleEditor() {\n    var _this6 = this;\n\n    var circle = this._geometry,\n        shadow = this._shadow;\n    var map = this.getMap();\n\n    if (!this._history) {\n      this._recordHistory([['setCoordinates', shadow.getCoordinates().toArray()], ['setRadius', shadow.getRadius()]]);\n    }\n\n    this._createResizeHandles(null, function (handleViewPoint) {\n      var center = circle.getCenter();\n      var mouseCoordinate = map.viewPointToCoordinate(handleViewPoint);\n      var wline = new LineString([[center.x, center.y], [mouseCoordinate.x, center.y]]);\n      var hline = new LineString([[center.x, center.y], [center.x, mouseCoordinate.y]]);\n      var r = Math.max(map.computeGeometryLength(wline), map.computeGeometryLength(hline));\n      shadow.setRadius(r);\n      circle.setRadius(r);\n    }, function () {\n      _this6._update('setRadius', shadow.getRadius());\n    });\n  };\n\n  _proto.createEllipseOrRectEditor = function createEllipseOrRectEditor() {\n    var _this7 = this;\n\n    var resizeAbilities = [2, 1, 2, 0, 0, 2, 1, 2];\n    var geometryToEdit = this._geometry,\n        shadow = this._shadow;\n\n    if (!this._history) {\n      this._recordHistory(getUpdates());\n    }\n\n    var map = this.getMap();\n    var isRect = this._geometry instanceof Rectangle;\n    var aspectRatio;\n\n    if (this.options['fixAspectRatio']) {\n      aspectRatio = geometryToEdit.getWidth() / geometryToEdit.getHeight();\n    }\n\n    var resizeHandles = this._createResizeHandles(null, function (mouseViewPoint, i) {\n      var r = isRect ? 1 : 2;\n      var pointSub, w, h;\n      var targetPoint = mouseViewPoint;\n      var ability = resizeAbilities[i];\n\n      if (isRect) {\n        var mirror = resizeHandles[7 - i];\n        var mirrorViewPoint = map.coordToViewPoint(mirror.getCoordinates());\n        pointSub = targetPoint.sub(mirrorViewPoint);\n        var absSub = pointSub.abs();\n        w = map.pixelToDistance(absSub.x, 0);\n        h = map.pixelToDistance(0, absSub.y);\n        var size = geometryToEdit.getSize();\n        var firstMirrorCoordinate = resizeHandles[0].getCoordinates();\n        var mouseCoordinate = map.viewPointToCoordinate(mouseViewPoint);\n        var mirrorCoordinate = mirror.getCoordinates();\n        var wline = new LineString([[mirrorCoordinate.x, mirrorCoordinate.y], [mouseCoordinate.x, mirrorCoordinate.y]]);\n        var hline = new LineString([[mirrorCoordinate.x, mirrorCoordinate.y], [mirrorCoordinate.x, mouseCoordinate.y]]);\n        w = map.computeGeometryLength(wline);\n        h = map.computeGeometryLength(hline);\n\n        if (ability === 0) {\n          if (aspectRatio) {\n            absSub.y = absSub.x / aspectRatio;\n            size.height = Math.abs(absSub.y);\n            h = w / aspectRatio;\n          }\n\n          targetPoint.y = mirrorViewPoint.y - size.height / 2;\n          mouseCoordinate.y = firstMirrorCoordinate.y;\n\n          if (i === 4) {\n            mouseCoordinate.x = Math.min(mouseCoordinate.x, firstMirrorCoordinate.x);\n          } else {\n            mouseCoordinate.x = Math.min(mouseCoordinate.x, mirrorCoordinate.x);\n          }\n        } else if (ability === 1) {\n          if (aspectRatio) {\n            absSub.x = absSub.y * aspectRatio;\n            size.width = Math.abs(absSub.x);\n            w = h * aspectRatio;\n          }\n\n          targetPoint.x = mirrorViewPoint.x - size.width / 2;\n          mouseCoordinate.x = firstMirrorCoordinate.x;\n          mouseCoordinate.y = Math.max(mouseCoordinate.y, mirrorCoordinate.y);\n        } else {\n          if (aspectRatio) {\n            if (w > h * aspectRatio) {\n              h = w / aspectRatio;\n              targetPoint.y = mirrorViewPoint.y + absSub.x * sign(pointSub.y) / aspectRatio;\n            } else {\n              w = h * aspectRatio;\n              targetPoint.x = mirrorViewPoint.x + absSub.y * sign(pointSub.x) * aspectRatio;\n            }\n          }\n\n          mouseCoordinate.x = Math.min(mouseCoordinate.x, mirrorCoordinate.x);\n          mouseCoordinate.y = Math.max(mouseCoordinate.y, mirrorCoordinate.y);\n        }\n\n        shadow.setCoordinates(mouseCoordinate);\n\n        _this7._updateCoordFromShadow(true);\n      } else {\n        var center = geometryToEdit.getCenter();\n\n        var _mouseCoordinate = map.viewPointToCoordinate(targetPoint);\n\n        var _wline = new LineString([[center.x, center.y], [_mouseCoordinate.x, center.y]]);\n\n        var _hline = new LineString([[center.x, center.y], [center.x, _mouseCoordinate.y]]);\n\n        w = map.computeGeometryLength(_wline);\n        h = map.computeGeometryLength(_hline);\n\n        if (aspectRatio) {\n          w = Math.max(w, h * aspectRatio);\n          h = w / aspectRatio;\n        }\n      }\n\n      if (aspectRatio || ability === 0 || ability === 2) {\n        shadow.setWidth(w * r);\n        geometryToEdit.setWidth(w * r);\n      }\n\n      if (aspectRatio || ability === 1 || ability === 2) {\n        shadow.setHeight(h * r);\n        geometryToEdit.setHeight(h * r);\n      }\n    }, function () {\n      _this7._update(getUpdates());\n    });\n\n    function getUpdates() {\n      return [['setCoordinates', shadow.getCoordinates().toArray()], ['setWidth', shadow.getWidth()], ['setHeight', shadow.getHeight()]];\n    }\n  };\n\n  _proto.createPolygonEditor = function createPolygonEditor() {\n    var map = this.getMap(),\n        shadow = this._shadow,\n        me = this,\n        projection = map.getProjection();\n\n    if (!this._history) {\n      this._recordHistory('setCoordinates', Coordinate.toNumberArrays(shadow.getCoordinates()));\n    }\n\n    var verticeLimit = shadow instanceof Polygon ? 3 : 2;\n    var propertyOfVertexRefreshFn = 'maptalks--editor-refresh-fn',\n        propertyOfVertexIndex = 'maptalks--editor-vertex-index';\n    var vertexHandles = {\n      0: []\n    },\n        newVertexHandles = {\n      0: []\n    };\n\n    function getVertexCoordinates(ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n\n      if (shadow instanceof Polygon) {\n        var coordinates = shadow.getCoordinates()[ringIndex] || [];\n        return coordinates.slice(0, coordinates.length - 1);\n      } else {\n        return shadow.getCoordinates();\n      }\n    }\n\n    function getVertexPrjCoordinates(ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n\n      if (ringIndex === 0) {\n        return shadow._getPrjCoordinates();\n      }\n\n      return shadow._getPrjHoles()[ringIndex - 1];\n    }\n\n    function onVertexAddOrRemove() {\n      for (var ringIndex in vertexHandles) {\n        for (var i = vertexHandles[ringIndex].length - 1; i >= 0; i--) {\n          vertexHandles[ringIndex][i][propertyOfVertexIndex] = i;\n        }\n\n        for (var _i = newVertexHandles[ringIndex].length - 1; _i >= 0; _i--) {\n          newVertexHandles[ringIndex][_i][propertyOfVertexIndex] = _i;\n        }\n      }\n\n      me._updateCoordFromShadow();\n    }\n\n    function removeVertex(param) {\n      var handle = param['target'],\n          index = handle[propertyOfVertexIndex];\n      var ringIndex = isNumber(handle._ringIndex) ? handle._ringIndex : 0;\n      var prjCoordinates = getVertexPrjCoordinates(ringIndex);\n\n      if (prjCoordinates.length <= verticeLimit) {\n        return;\n      }\n\n      prjCoordinates.splice(index, 1);\n\n      if (ringIndex > 0) {\n        shadow._prjHoles[ringIndex - 1] = prjCoordinates;\n      } else {\n        shadow._setPrjCoordinates(prjCoordinates);\n      }\n\n      shadow._updateCache();\n\n      vertexHandles[ringIndex].splice(index, 1)[0].remove();\n\n      if (index < newVertexHandles[ringIndex].length) {\n        newVertexHandles[ringIndex].splice(index, 1)[0].remove();\n      }\n\n      var nextIndex;\n\n      if (index === 0) {\n        nextIndex = newVertexHandles[ringIndex].length - 1;\n      } else {\n        nextIndex = index - 1;\n      }\n\n      newVertexHandles[ringIndex].splice(nextIndex, 1)[0].remove();\n      newVertexHandles[ringIndex].splice(nextIndex, 0, createNewVertexHandle.call(me, nextIndex, ringIndex));\n      onVertexAddOrRemove();\n\n      me._refresh();\n    }\n\n    function moveVertexHandle(handleViewPoint, index, ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n\n      var vertice = getVertexPrjCoordinates(ringIndex);\n\n      var nVertex = map._viewPointToPrj(handleViewPoint);\n\n      var pVertex = vertice[index];\n      pVertex.x = nVertex.x;\n      pVertex.y = nVertex.y;\n\n      shadow._updateCache();\n\n      shadow.onShapeChanged();\n\n      me._updateCoordFromShadow(true);\n\n      var nextIndex;\n\n      if (index === 0) {\n        nextIndex = newVertexHandles[ringIndex].length - 1;\n      } else {\n        nextIndex = index - 1;\n      }\n\n      if (newVertexHandles[ringIndex][index]) {\n        newVertexHandles[ringIndex][index][propertyOfVertexRefreshFn]();\n      }\n\n      if (newVertexHandles[ringIndex][nextIndex]) {\n        newVertexHandles[ringIndex][nextIndex][propertyOfVertexRefreshFn]();\n      }\n    }\n\n    function createVertexHandle(index, ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n\n      var vertex = getVertexCoordinates(ringIndex)[index];\n      var handle = me.createHandle(vertex, {\n        'symbol': me.options['vertexHandleSymbol'],\n        'cursor': 'pointer',\n        'axis': null,\n        onMove: function onMove(handleViewPoint) {\n          moveVertexHandle(handleViewPoint, handle[propertyOfVertexIndex], ringIndex);\n        },\n        onRefresh: function onRefresh() {\n          vertex = getVertexCoordinates(ringIndex)[handle[propertyOfVertexIndex]];\n          handle.setCoordinates(vertex);\n        },\n        onUp: function onUp() {\n          me._refresh();\n\n          me._updateCoordFromShadow();\n        },\n        onDown: function onDown(param, e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            return;\n          }\n        }\n      });\n      handle[propertyOfVertexIndex] = index;\n      handle._ringIndex = ringIndex;\n      handle.on(me.options['removeVertexOn'], removeVertex);\n      return handle;\n    }\n\n    function createNewVertexHandle(index, ringIndex) {\n      if (ringIndex === void 0) {\n        ringIndex = 0;\n      }\n\n      var vertexCoordinates = getVertexCoordinates(ringIndex);\n      var nextVertex;\n\n      if (index + 1 >= vertexCoordinates.length) {\n        nextVertex = vertexCoordinates[0];\n      } else {\n        nextVertex = vertexCoordinates[index + 1];\n      }\n\n      var vertex = vertexCoordinates[index].add(nextVertex).multi(1 / 2);\n      var handle = me.createHandle(vertex, {\n        'symbol': me.options['newVertexHandleSymbol'],\n        'cursor': 'pointer',\n        'axis': null,\n        onDown: function onDown(param, e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            return;\n          }\n\n          var prjCoordinates = getVertexPrjCoordinates(ringIndex);\n          var vertexIndex = handle[propertyOfVertexIndex];\n          var pVertex = projection.project(handle.getCoordinates());\n          prjCoordinates.splice(vertexIndex + 1, 0, pVertex);\n\n          if (ringIndex > 0) {\n            shadow._prjHoles[ringIndex - 1] = prjCoordinates;\n          } else {\n            shadow._setPrjCoordinates(prjCoordinates);\n          }\n\n          shadow._updateCache();\n\n          var symbol = handle.getSymbol();\n          delete symbol['opacity'];\n          handle.setSymbol(symbol);\n          newVertexHandles[ringIndex].splice(vertexIndex, 0, createNewVertexHandle.call(me, vertexIndex, ringIndex), createNewVertexHandle.call(me, vertexIndex + 1, ringIndex));\n        },\n        onMove: function onMove(handleViewPoint) {\n          moveVertexHandle(handleViewPoint, handle[propertyOfVertexIndex] + 1, ringIndex);\n        },\n        onUp: function onUp(e) {\n          if (e && e.domEvent && e.domEvent.button === 2) {\n            return;\n          }\n\n          var vertexIndex = handle[propertyOfVertexIndex];\n          removeFromArray(handle, newVertexHandles[ringIndex]);\n          handle.remove();\n          vertexHandles[ringIndex].splice(vertexIndex + 1, 0, createVertexHandle.call(me, vertexIndex + 1, ringIndex));\n          onVertexAddOrRemove();\n\n          me._updateCoordFromShadow();\n\n          me._refresh();\n        },\n        onRefresh: function onRefresh() {\n          vertexCoordinates = getVertexCoordinates(ringIndex);\n          var vertexIndex = handle[propertyOfVertexIndex];\n          var nextIndex;\n\n          if (vertexIndex === vertexCoordinates.length - 1) {\n            nextIndex = 0;\n          } else {\n            nextIndex = vertexIndex + 1;\n          }\n\n          var refreshVertex = vertexCoordinates[vertexIndex].add(vertexCoordinates[nextIndex]).multi(1 / 2);\n          handle.setCoordinates(refreshVertex);\n        }\n      });\n      handle[propertyOfVertexIndex] = index;\n      return handle;\n    }\n\n    if (shadow instanceof Polygon) {\n      var rings = shadow.getHoles().length + 1;\n\n      for (var ringIndex = 0; ringIndex < rings; ringIndex++) {\n        vertexHandles[ringIndex] = [];\n        newVertexHandles[ringIndex] = [];\n        var vertexCoordinates = getVertexCoordinates(ringIndex);\n\n        for (var i = 0, len = vertexCoordinates.length; i < len; i++) {\n          vertexHandles[ringIndex].push(createVertexHandle.call(this, i, ringIndex));\n\n          if (i < len - 1) {\n            newVertexHandles[ringIndex].push(createNewVertexHandle.call(this, i, ringIndex));\n          }\n        }\n\n        newVertexHandles[ringIndex].push(createNewVertexHandle.call(this, vertexCoordinates.length - 1, ringIndex));\n      }\n    } else {\n      var _ringIndex = 0;\n\n      var _vertexCoordinates = getVertexCoordinates(_ringIndex);\n\n      for (var _i2 = 0, _len = _vertexCoordinates.length; _i2 < _len; _i2++) {\n        vertexHandles[_ringIndex].push(createVertexHandle.call(this, _i2, _ringIndex));\n\n        if (_i2 < _len - 1) {\n          newVertexHandles[_ringIndex].push(createNewVertexHandle.call(this, _i2, _ringIndex));\n        }\n      }\n    }\n\n    this._addRefreshHook(function () {\n      for (var _ringIndex2 in newVertexHandles) {\n        for (var _i3 = newVertexHandles[_ringIndex2].length - 1; _i3 >= 0; _i3--) {\n          newVertexHandles[_ringIndex2][_i3][propertyOfVertexRefreshFn](_ringIndex2);\n        }\n      }\n\n      for (var _ringIndex3 in vertexHandles) {\n        for (var _i4 = vertexHandles[_ringIndex3].length - 1; _i4 >= 0; _i4--) {\n          vertexHandles[_ringIndex3][_i4][propertyOfVertexRefreshFn](_ringIndex3);\n        }\n      }\n    });\n  };\n\n  _proto._refresh = function _refresh() {\n    if (this._refreshHooks) {\n      for (var i = this._refreshHooks.length - 1; i >= 0; i--) {\n        this._refreshHooks[i].call(this);\n      }\n    }\n  };\n\n  _proto._hideContext = function _hideContext() {\n    if (this._geometry) {\n      this._geometry.closeMenu();\n\n      this._geometry.closeInfoWindow();\n    }\n  };\n\n  _proto._addListener = function _addListener(listener) {\n    if (!this._eventListeners) {\n      this._eventListeners = [];\n    }\n\n    this._eventListeners.push(listener);\n\n    listener[0].on(listener[1], listener[2], this);\n  };\n\n  _proto._clearAllListeners = function _clearAllListeners() {\n    if (this._eventListeners && this._eventListeners.length > 0) {\n      for (var i = this._eventListeners.length - 1; i >= 0; i--) {\n        var listener = this._eventListeners[i];\n        listener[0].off(listener[1], listener[2], this);\n      }\n\n      this._eventListeners = [];\n    }\n  };\n\n  _proto._addRefreshHook = function _addRefreshHook(fn) {\n    if (!fn) {\n      return;\n    }\n\n    if (!this._refreshHooks) {\n      this._refreshHooks = [];\n    }\n\n    this._refreshHooks.push(fn);\n  };\n\n  _proto._update = function _update(method) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key = 1; _key < _len2; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    this._exeHistory([method, args]);\n\n    this._recordHistory.apply(this, [method].concat(args));\n  };\n\n  _proto._updateCoordFromShadow = function _updateCoordFromShadow(ignoreRecord) {\n    if (!this._shadow) {\n      return;\n    }\n\n    var coords = this._shadow.getCoordinates();\n\n    var geo = this._geometry;\n    var updating = this._updating;\n    this._updating = true;\n    geo.setCoordinates(coords);\n\n    if (!ignoreRecord) {\n      this._recordHistory('setCoordinates', Coordinate.toNumberArrays(geo.getCoordinates()));\n    }\n\n    this._updating = updating;\n  };\n\n  _proto._recordHistory = function _recordHistory(method) {\n    if (!this._history) {\n      this._history = [];\n      this._historyPointer = 0;\n    }\n\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key2 = 1; _key2 < _len3; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n\n    if (this._history.length) {\n      var lastOperation = this._history[this._history.length - 1];\n\n      if (lastOperation[0] === method && JSON.stringify(lastOperation[1]) === JSON.stringify(args)) {\n        return;\n      }\n    }\n\n    if (this._historyPointer < this._history.length - 1) {\n      this._history.splice(this._historyPointer + 1);\n    }\n\n    this._history.push([method, args]);\n\n    this._historyPointer = this._history.length - 1;\n\n    this._geometry.fire('editrecord');\n  };\n\n  _proto.cancel = function cancel() {\n    if (!this._history || this._historyPointer === 0) {\n      return this;\n    }\n\n    this._historyPointer = 0;\n    var record = this._history[0];\n\n    this._exeAndReset(record);\n\n    return this;\n  };\n\n  _proto.undo = function undo() {\n    if (!this._history || this._historyPointer === 0) {\n      return this;\n    }\n\n    var record = this._history[--this._historyPointer];\n\n    this._exeAndReset(record);\n\n    return this;\n  };\n\n  _proto.redo = function redo() {\n    if (!this._history || this._historyPointer === this._history.length - 1) {\n      return this;\n    }\n\n    var record = this._history[++this._historyPointer];\n\n    this._exeAndReset(record);\n\n    return this;\n  };\n\n  _proto._exeAndReset = function _exeAndReset(record) {\n    if (this._updating) {\n      return;\n    }\n\n    this._exeHistory(record);\n\n    var history = this._history,\n        pointer = this._historyPointer;\n    this.stop();\n    this._history = history;\n    this._historyPointer = pointer;\n    this.start();\n  };\n\n  _proto._exeHistory = function _exeHistory(record) {\n    var _this8 = this;\n\n    if (!Array.isArray(record)) {\n      return;\n    }\n\n    var updating = this._updating;\n    this._updating = true;\n    var geo = this._geometry;\n\n    if (Array.isArray(record[0])) {\n      record[0].forEach(function (o) {\n        var m = o[0],\n            args = o.slice(1);\n\n        _this8._shadow[m].apply(_this8._shadow, args);\n\n        geo[m].apply(geo, args);\n      });\n    } else {\n      this._shadow[record[0]].apply(this._shadow, record[1]);\n\n      geo[record[0]].apply(geo, record[1]);\n    }\n\n    this._updating = updating;\n  };\n\n  return GeometryEditor;\n}(Eventable(Class));\n\nGeometryEditor.mergeOptions(options$z);\nvar TextEditable = {\n  startEditText: function startEditText() {\n    if (!this.getMap()) {\n      return this;\n    }\n\n    this.hide();\n    this.endEditText();\n\n    this._prepareEditor();\n\n    this._fireEvent('edittextstart');\n\n    return this;\n  },\n  endEditText: function endEditText() {\n    if (this._textEditor) {\n      var html = this._textEditor.innerHTML;\n      html = html.replace(/<p>/ig, '').replace(/<\\/p>/ig, '<br/>');\n      this._textEditor.innerHTML = html;\n\n      var content = this._textEditor.innerText.replace(/[\\r\\n]+$/gi, '');\n\n      this.setContent(content);\n      off(this._textEditor, 'mousedown dblclick', stopPropagation);\n      this.getMap().off('mousedown', this.endEditText, this);\n\n      this._editUIMarker.remove();\n\n      delete this._editUIMarker;\n      this._textEditor.onkeyup = null;\n      delete this._textEditor;\n      this.show();\n\n      this._fireEvent('edittextend');\n    }\n\n    return this;\n  },\n  isEditingText: function isEditingText() {\n    if (this._textEditor) {\n      return true;\n    }\n\n    return false;\n  },\n  getTextEditor: function getTextEditor() {\n    return this._editUIMarker;\n  },\n  _prepareEditor: function _prepareEditor() {\n    var map = this.getMap();\n\n    var editContainer = this._createEditor();\n\n    this._textEditor = editContainer;\n    map.on('mousedown', this.endEditText, this);\n\n    var offset = this._getEditorOffset();\n\n    this._editUIMarker = new UIMarker(this.getCoordinates(), {\n      'animation': null,\n      'content': editContainer,\n      'dx': offset.dx,\n      'dy': offset.dy\n    }).addTo(map);\n\n    this._setCursorToLast(this._textEditor);\n  },\n  _getEditorOffset: function _getEditorOffset() {\n    var symbol = this._getInternalSymbol() || {};\n    var dx = 0,\n        dy = 0;\n    var textAlign = symbol['textHorizontalAlignment'];\n\n    if (textAlign === 'middle' || isNil(textAlign)) {\n      dx = (symbol['textDx'] || 0) - 2;\n      dy = (symbol['textDy'] || 0) - 2;\n    } else {\n      dx = (symbol['markerDx'] || 0) - 2;\n      dy = (symbol['markerDy'] || 0) - 2;\n    }\n\n    return {\n      'dx': dx,\n      'dy': dy\n    };\n  },\n  _createEditor: function _createEditor() {\n    var content = this.getContent();\n    var labelSize = this.getSize(),\n        symbol = this._getInternalSymbol() || {},\n        width = labelSize.width,\n        textColor = symbol['textFill'] || '#000000',\n        textSize = symbol['textSize'] || 12,\n        height = labelSize.height,\n        lineColor = symbol['markerLineColor'] || '#000',\n        fill = symbol['markerFill'] || '#3398CC',\n        spacing = symbol['textLineSpacing'] || 0;\n    var editor = createEl('div');\n    editor.contentEditable = true;\n    editor.style.cssText = \"background:\" + fill + \"; border:1px solid \" + lineColor + \";\\n            color:\" + textColor + \";font-size:\" + textSize + \"px;width:\" + (width - 2) + \"px;height:\" + (height - 2) + \"px;margin: auto;\\n            line-height:\" + (textSize + spacing) + \"px;outline: 0; padding:0; margin:0;word-wrap: break-word;\\n            overflow: hidden;-webkit-user-modify: read-write-plaintext-only;\";\n    editor.innerText = content;\n    on(editor, 'mousedown dblclick', stopPropagation);\n\n    editor.onkeyup = function (event) {\n      var h = editor.style.height || 0;\n\n      if (event.keyCode === 13) {\n        editor.style.height = parseInt(h) + textSize / 2 + 'px';\n      }\n    };\n\n    return editor;\n  },\n  _setCursorToLast: function _setCursorToLast(obj) {\n    var range;\n\n    if (window.getSelection) {\n      obj.focus();\n      range = window.getSelection();\n      range.selectAllChildren(obj);\n      range.collapseToEnd();\n    } else if (document.selection) {\n      range = document.selection.createRange();\n      range.moveToElementText(obj);\n      range.collapse(false);\n      range.select();\n    }\n  }\n};\nTextMarker.include(TextEditable);\nGeometry.include({\n  animate: function animate(styles, options, step) {\n    var _this = this;\n\n    if (this._animPlayer) {\n      this._animPlayer.finish();\n    }\n\n    if (isFunction(options)) {\n      step = options;\n    }\n\n    if (!options) {\n      options = {};\n    }\n\n    var map = this.getMap(),\n        projection = this._getProjection(),\n        symbol = this.getSymbol() || {},\n        stylesToAnimate = this._prepareAnimationStyles(styles);\n\n    var preTranslate;\n    var isFocusing = options['focus'];\n    delete this._animationStarted;\n\n    if (map) {\n      var renderer = map._getRenderer();\n\n      var framer = function framer(fn) {\n        renderer.callInNextFrame(fn);\n      };\n\n      options['framer'] = framer;\n    }\n\n    var player = Animation.animate(stylesToAnimate, options, function (frame) {\n      if (map && map.isRemoved()) {\n        player.finish();\n        return;\n      }\n\n      if (map && !_this._animationStarted && isFocusing) {\n        map.onMoveStart();\n      }\n\n      var styles = frame.styles;\n\n      for (var p in styles) {\n        if (p !== 'symbol' && p !== 'translate' && styles.hasOwnProperty(p)) {\n          var fnName = 'set' + p[0].toUpperCase() + p.slice(1);\n\n          _this[fnName](styles[p]);\n        }\n      }\n\n      var translate = styles['translate'];\n\n      if (translate) {\n        var toTranslate = translate;\n\n        if (preTranslate) {\n          toTranslate = translate.sub(preTranslate);\n        }\n\n        preTranslate = translate;\n\n        _this.translate(toTranslate);\n      }\n\n      var dSymbol = styles['symbol'];\n\n      if (dSymbol) {\n        _this.setSymbol(extendSymbol(symbol, dSymbol));\n      }\n\n      if (map && isFocusing) {\n        var pcenter = projection.project(_this.getCenter());\n\n        map._setPrjCenter(pcenter);\n\n        var e = map._parseEventFromCoord(projection.unproject(pcenter));\n\n        if (player.playState !== 'running') {\n          map.onMoveEnd(e);\n        } else {\n          map.onMoving(e);\n        }\n      }\n\n      _this._fireAnimateEvent(player.playState);\n\n      if (step) {\n        step(frame);\n      }\n    }, this);\n    this._animPlayer = player;\n    return this._animPlayer.play();\n  },\n  _prepareAnimationStyles: function _prepareAnimationStyles(styles) {\n    var symbol = this._getInternalSymbol();\n\n    var stylesToAnimate = {};\n\n    for (var p in styles) {\n      if (styles.hasOwnProperty(p)) {\n        var v = styles[p];\n\n        if (p !== 'translate' && p !== 'symbol') {\n          var fnName = 'get' + p[0].toUpperCase() + p.substring(1);\n          var current = this[fnName]();\n          stylesToAnimate[p] = [current, v];\n        } else if (p === 'symbol') {\n          var symbolToAnimate = void 0;\n\n          if (Array.isArray(styles['symbol'])) {\n            if (!Array.isArray(symbol)) {\n              throw new Error('geometry\\'symbol isn\\'t a composite symbol, while the symbol in styles is.');\n            }\n\n            symbolToAnimate = [];\n            var symbolInStyles = styles['symbol'];\n\n            for (var i = 0; i < symbolInStyles.length; i++) {\n              if (!symbolInStyles[i]) {\n                symbolToAnimate.push(null);\n                continue;\n              }\n\n              var a = {};\n\n              for (var sp in symbolInStyles[i]) {\n                if (symbolInStyles[i].hasOwnProperty(sp)) {\n                  a[sp] = [symbol[i][sp], symbolInStyles[i][sp]];\n                }\n              }\n\n              symbolToAnimate.push(a);\n            }\n          } else {\n            if (Array.isArray(symbol)) {\n              throw new Error('geometry\\'symbol is a composite symbol, while the symbol in styles isn\\'t.');\n            }\n\n            symbolToAnimate = {};\n\n            for (var _sp in v) {\n              if (v.hasOwnProperty(_sp)) {\n                symbolToAnimate[_sp] = [symbol[_sp], v[_sp]];\n              }\n            }\n          }\n\n          stylesToAnimate['symbol'] = symbolToAnimate;\n        } else if (p === 'translate') {\n          stylesToAnimate['translate'] = new Coordinate(v);\n        }\n      }\n    }\n\n    return stylesToAnimate;\n  },\n  _fireAnimateEvent: function _fireAnimateEvent(playState) {\n    if (playState === 'finished') {\n      delete this._animationStarted;\n\n      this._fireEvent('animateend');\n    } else if (playState === 'running') {\n      if (this._animationStarted) {\n        this._fireEvent('animating');\n      } else {\n        this._fireEvent('animatestart');\n\n        this._animationStarted = true;\n      }\n    }\n  }\n});\nvar DRAG_STAGE_LAYER_ID = INTERNAL_LAYER_PREFIX + '_drag_stage';\nvar EVENTS$2 = Browser$1.touch ? 'touchstart mousedown' : 'mousedown';\n\nvar GeometryDragHandler = function (_Handler) {\n  _inheritsLoose(GeometryDragHandler, _Handler);\n\n  function GeometryDragHandler(target) {\n    return _Handler.call(this, target) || this;\n  }\n\n  var _proto = GeometryDragHandler.prototype;\n\n  _proto.addHooks = function addHooks() {\n    this.target.on(EVENTS$2, this._startDrag, this);\n  };\n\n  _proto.removeHooks = function removeHooks() {\n    this._endDrag();\n\n    this.target.off(EVENTS$2, this._startDrag, this);\n    delete this.container;\n  };\n\n  _proto._prepareDragHandler = function _prepareDragHandler() {\n    this._dragHandler = new DragHandler(this.container);\n\n    this._dragHandler.on('dragging', this._dragging, this).on('mouseup', this._endDrag, this).enable();\n  };\n\n  _proto._prepareShadow = function _prepareShadow() {\n    var _this = this;\n\n    var target = this.target;\n\n    this._prepareDragStageLayer();\n\n    if (this._shadow) {\n      this._shadow.remove();\n    }\n\n    var shadow = this._shadow = target.copy();\n\n    if (shadow.getGeometries) {\n      var shadows = shadow.getGeometries();\n      var geos = target.getGeometries();\n      shadows.forEach(function (g, i) {\n        _this._updateShadowSymbol(g, geos[i]);\n      });\n    } else {\n      this._updateShadowSymbol(shadow, target);\n    }\n\n    shadow.setId(null);\n\n    this._prepareShadowConnectors();\n  };\n\n  _proto._updateShadowSymbol = function _updateShadowSymbol(shadow, target) {\n    shadow.setSymbol(target._getInternalSymbol());\n\n    if (target.options['dragShadow']) {\n      var symbol = lowerSymbolOpacity(shadow._getInternalSymbol(), 0.5);\n      shadow.setSymbol(symbol);\n    }\n  };\n\n  _proto._prepareShadowConnectors = function _prepareShadowConnectors() {\n    var target = this.target;\n    var shadow = this._shadow;\n\n    var resources = this._dragStageLayer._getRenderer().resources;\n\n    var shadowConnectors = [];\n\n    if (ConnectorLine._hasConnectors(target)) {\n      var connectors = ConnectorLine._getConnectors(target);\n\n      for (var i = 0, l = connectors.length; i < l; i++) {\n        var targetConn = connectors[i];\n\n        var connOptions = targetConn.config(),\n            connSymbol = targetConn._getInternalSymbol();\n\n        connOptions['symbol'] = lowerSymbolOpacity(connSymbol, 0.5);\n        var conn = void 0;\n\n        if (targetConn.getConnectSource() === target) {\n          conn = new targetConn.constructor(shadow, targetConn.getConnectTarget(), connOptions);\n        } else {\n          conn = new targetConn.constructor(targetConn.getConnectSource(), shadow, connOptions);\n        }\n\n        shadowConnectors.push(conn);\n\n        if (targetConn.getLayer() && targetConn.getLayer()._getRenderer()) {\n          resources.merge(targetConn.getLayer()._getRenderer().resources);\n        }\n      }\n    }\n\n    this._shadowConnectors = shadowConnectors;\n    shadowConnectors.push(shadow);\n\n    this._dragStageLayer.bringToFront().addGeometry(shadowConnectors);\n  };\n\n  _proto._onTargetUpdated = function _onTargetUpdated() {\n    if (this._shadow) {\n      this._shadow.setSymbol(this.target._getSymbol());\n    }\n  };\n\n  _proto._prepareDragStageLayer = function _prepareDragStageLayer() {\n    var map = this.target.getMap(),\n        layer = this.target.getLayer();\n    this._dragStageLayer = map.getLayer(DRAG_STAGE_LAYER_ID);\n\n    if (!this._dragStageLayer) {\n      this._dragStageLayer = new VectorLayer(DRAG_STAGE_LAYER_ID, {\n        enableAltitude: layer.options['enableAltitude'],\n        altitudeProperty: layer.options['altitudeProperty']\n      });\n      map.addLayer(this._dragStageLayer);\n    }\n\n    var resources = new ResourceCache();\n    resources.merge(layer._getRenderer().resources);\n    this._dragStageLayer._getRenderer().resources = resources;\n  };\n\n  _proto._startDrag = function _startDrag(param) {\n    var map = this.target.getMap();\n\n    if (!map) {\n      return;\n    }\n\n    var parent = this.target._getParent();\n\n    if (parent) {\n      return;\n    }\n\n    if (this.isDragging()) {\n      return;\n    }\n\n    var domEvent = param['domEvent'];\n\n    if (domEvent.touches && domEvent.touches.length > 1 || domEvent.button === 2) {\n      return;\n    }\n\n    this.container = map._panels.mapWrapper || map._containerDOM;\n    this.target.on('click', this._endDrag, this);\n    this._lastCoord = this._correctCoord(param['coordinate']);\n    this._lastPoint = param['containerPoint'];\n\n    this._prepareDragHandler();\n\n    this._dragHandler.onMouseDown(param['domEvent']);\n\n    on(this.container, 'mouseleave', this._endDrag, this);\n    this._startParam = param;\n    this._moved = false;\n    return;\n  };\n\n  _proto._dragging = function _dragging(param) {\n    var target = this.target;\n\n    var map = target.getMap(),\n        e = map._parseEvent(param['domEvent']);\n\n    var domEvent = e['domEvent'];\n\n    if (domEvent.touches && domEvent.touches.length > 1) {\n      return;\n    }\n\n    if (!this._moved) {\n      this._moved = true;\n      target.on('symbolchange', this._onTargetUpdated, this);\n      this._isDragging = true;\n\n      this._prepareShadow();\n\n      if (!target.options['dragShadow']) {\n        target.hide();\n      }\n\n      this._shadow._fireEvent('dragstart', e);\n\n      this.target._fireEvent('dragstart', this._startParam || e);\n\n      delete this._startParam;\n      return;\n    }\n\n    if (!this._shadow) {\n      return;\n    }\n\n    var axis = this._shadow.options['dragOnAxis'],\n        coord = this._correctCoord(e['coordinate']),\n        point = e['containerPoint'];\n\n    this._lastPoint = this._lastPoint || point;\n    this._lastCoord = this._lastCoord || coord;\n    var pointOffset = point.sub(this._lastPoint);\n    var coordOffset = coord.sub(this._lastCoord);\n\n    if (axis === 'x') {\n      pointOffset.y = coordOffset.y = 0;\n    } else if (axis === 'y') {\n      pointOffset.x = coordOffset.x = 0;\n    }\n\n    this._lastPoint = point;\n    this._lastCoord = coord;\n\n    this._shadow.translate(coordOffset);\n\n    if (!target.options['dragShadow']) {\n      target.translate(coordOffset);\n    }\n\n    e['coordOffset'] = coordOffset;\n    e['pointOffset'] = pointOffset;\n\n    this._shadow._fireEvent('dragging', e);\n\n    target._fireEvent('dragging', e);\n  };\n\n  _proto._endDrag = function _endDrag(param) {\n    if (this._dragHandler) {\n      this._dragHandler.disable();\n\n      delete this._dragHandler;\n    }\n\n    if (this.container) {\n      off(this.container, 'mouseleave', this._endDrag, this);\n    }\n\n    if (!this.target) {\n      return;\n    }\n\n    var target = this.target;\n    target.off('click', this._endDrag, this);\n    target.off('symbolchange', this._onTargetUpdated, this);\n    delete this._lastCoord;\n    delete this._lastPoint;\n    this._isDragging = false;\n    var map = target.getMap();\n\n    if (this.enabled() && map) {\n      var e = map._parseEvent(param ? param['domEvent'] : null);\n\n      this._updateTargetAndRemoveShadow(e);\n\n      if (this._moved) {\n        target._fireEvent('dragend', e);\n      }\n    }\n  };\n\n  _proto.isDragging = function isDragging() {\n    if (!this._isDragging) {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto._updateTargetAndRemoveShadow = function _updateTargetAndRemoveShadow(eventParam) {\n    var target = this.target,\n        map = target.getMap();\n\n    if (!target.options['dragShadow']) {\n      target.show();\n    }\n\n    var shadow = this._shadow;\n\n    if (shadow) {\n      if (target.options['dragShadow']) {\n        if (target.getGeometries) {\n          var shadows = shadow.getGeometries();\n          var geos = target.getGeometries();\n          shadows.forEach(function (g, i) {\n            geos[i].setCoordinates(shadows[i].getCoordinates());\n          });\n        } else {\n          target.setCoordinates(shadow.getCoordinates());\n        }\n      }\n\n      shadow._fireEvent('dragend', eventParam);\n\n      shadow.remove();\n      delete this._shadow;\n    }\n\n    if (this._shadowConnectors) {\n      map.getLayer(DRAG_STAGE_LAYER_ID).removeGeometry(this._shadowConnectors);\n      delete this._shadowConnectors;\n    }\n\n    if (this._dragStageLayer) {\n      this._dragStageLayer.remove();\n    }\n  };\n\n  _proto._correctCoord = function _correctCoord(coord) {\n    var map = this.target.getMap();\n\n    if (!map.getPitch()) {\n      return coord;\n    }\n\n    var painter = this.target._getPainter();\n\n    if (!painter.getMinAltitude()) {\n      return coord;\n    }\n\n    var alt = (painter.getMinAltitude() + painter.getMaxAltitude()) / 2;\n    return map.locateByPoint(coord, 0, -alt);\n  };\n\n  return GeometryDragHandler;\n}(Handler$1);\n\nGeometry.mergeOptions({\n  'draggable': false,\n  'dragShadow': true,\n  'dragOnAxis': null\n});\nGeometry.addInitHook('addHandler', 'draggable', GeometryDragHandler);\nGeometry.include({\n  isDragging: function isDragging() {\n    if (this._getParent()) {\n      return this._getParent().isDragging();\n    }\n\n    if (this['draggable']) {\n      return this['draggable'].isDragging();\n    }\n\n    return false;\n  }\n});\nGeometry.include({\n  startEdit: function startEdit(opts) {\n    if (!this.getMap() || !this.options['editable']) {\n      return this;\n    }\n\n    this.endEdit();\n    this._editor = new GeometryEditor(this, opts);\n\n    this._editor.start();\n\n    this.fire('editstart');\n    return this;\n  },\n  endEdit: function endEdit() {\n    if (this._editor) {\n      this._editor.stop();\n\n      delete this._editor;\n      this.fire('editend');\n    }\n\n    return this;\n  },\n  redoEdit: function redoEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n\n    this._editor.redo();\n\n    this.fire('redoedit');\n    return this;\n  },\n  undoEdit: function undoEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n\n    this._editor.undo();\n\n    this.fire('undoedit');\n    return this;\n  },\n  cancelEdit: function cancelEdit() {\n    if (!this.isEditing()) {\n      return this;\n    }\n\n    this._editor.cancel();\n\n    this.fire('canceledit');\n    return this;\n  },\n  isEditing: function isEditing() {\n    if (this._editor) {\n      return this._editor.isEditing();\n    }\n\n    return false;\n  }\n});\nGeometry.include({\n  _onEvent: function _onEvent(event, type) {\n    if (!this.getMap()) {\n      return;\n    }\n\n    var eventType = type || this._getEventTypeToFire(event);\n\n    if (eventType === 'contextmenu' && this.listens('contextmenu')) {\n      stopPropagation(event);\n      preventDefault(event);\n    }\n\n    var params = this._getEventParams(event);\n\n    this._fireEvent(eventType, params);\n  },\n  _getEventTypeToFire: function _getEventTypeToFire(domEvent) {\n    return domEvent.type;\n  },\n  _getEventParams: function _getEventParams(e) {\n    var map = this.getMap();\n    var eventParam = {\n      'domEvent': e\n    };\n    var actual = e.touches && e.touches.length > 0 ? e.touches[0] : e.changedTouches && e.changedTouches.length > 0 ? e.changedTouches[0] : e;\n\n    if (actual) {\n      var containerPoint = getEventContainerPoint(actual, map._containerDOM);\n      eventParam['coordinate'] = map.containerPointToCoordinate(containerPoint);\n      eventParam['containerPoint'] = containerPoint;\n      eventParam['viewPoint'] = map.containerPointToViewPoint(containerPoint);\n      eventParam['pont2d'] = map._containerPointToPoint(containerPoint);\n    }\n\n    return eventParam;\n  }\n});\nGeometry.include({\n  setInfoWindow: function setInfoWindow(options) {\n    this.removeInfoWindow();\n\n    if (options instanceof InfoWindow) {\n      this._infoWindow = options;\n      this._infoWinOptions = extend({}, this._infoWindow.options);\n\n      this._infoWindow.addTo(this);\n\n      return this;\n    }\n\n    this._infoWinOptions = extend({}, options);\n\n    if (this._infoWindow) {\n      this._infoWindow.setOptions(options);\n    } else if (this.getMap()) {\n      this._bindInfoWindow(this._infoWinOptions);\n    }\n\n    return this;\n  },\n  getInfoWindow: function getInfoWindow() {\n    if (!this._infoWindow) {\n      return null;\n    }\n\n    return this._infoWindow;\n  },\n  openInfoWindow: function openInfoWindow(coordinate) {\n    if (!this.getMap()) {\n      return this;\n    }\n\n    if (!coordinate) {\n      coordinate = this.getCenter();\n    }\n\n    if (!this._infoWindow) {\n      if (this._infoWinOptions && this.getMap()) {\n        this._bindInfoWindow(this._infoWinOptions);\n\n        this._infoWindow.show(coordinate);\n      }\n    } else {\n      this._infoWindow.show(coordinate);\n    }\n\n    return this;\n  },\n  closeInfoWindow: function closeInfoWindow() {\n    if (this._infoWindow) {\n      this._infoWindow.hide();\n    }\n\n    return this;\n  },\n  removeInfoWindow: function removeInfoWindow() {\n    this._unbindInfoWindow();\n\n    delete this._infoWinOptions;\n    delete this._infoWindow;\n    return this;\n  },\n  _bindInfoWindow: function _bindInfoWindow(options) {\n    this._infoWindow = new InfoWindow(options);\n\n    this._infoWindow.addTo(this);\n\n    return this;\n  },\n  _unbindInfoWindow: function _unbindInfoWindow() {\n    if (this._infoWindow) {\n      this.closeInfoWindow();\n\n      this._infoWindow.remove();\n\n      delete this._infoWindow;\n    }\n\n    return this;\n  }\n});\n\nvar LRUCache = function () {\n  function LRUCache(max, onRemove) {\n    this.max = max;\n    this.onRemove = onRemove;\n    this.reset();\n  }\n\n  var _proto = LRUCache.prototype;\n\n  _proto.reset = function reset() {\n    for (var key in this.data) {\n      this.onRemove(this.data[key]);\n    }\n\n    this.data = {};\n    this.order = [];\n    return this;\n  };\n\n  _proto.clear = function clear() {\n    this.reset();\n    delete this.onRemove;\n  };\n\n  _proto.add = function add(key, data) {\n    if (this.has(key)) {\n      this.order.splice(this.order.indexOf(key), 1);\n      this.data[key] = data;\n      this.order.push(key);\n    } else {\n      this.data[key] = data;\n      this.order.push(key);\n\n      if (this.order.length > this.max) {\n        var removedData = this.getAndRemove(this.order[0]);\n        if (removedData) this.onRemove(removedData);\n      }\n    }\n\n    return this;\n  };\n\n  _proto.has = function has(key) {\n    return key in this.data;\n  };\n\n  _proto.keys = function keys() {\n    return this.order;\n  };\n\n  _proto.getAndRemove = function getAndRemove(key) {\n    if (!this.has(key)) {\n      return null;\n    }\n\n    var data = this.data[key];\n    delete this.data[key];\n    this.order.splice(this.order.indexOf(key), 1);\n    return data;\n  };\n\n  _proto.get = function get(key) {\n    if (!this.has(key)) {\n      return null;\n    }\n\n    var data = this.data[key];\n    return data;\n  };\n\n  _proto.remove = function remove(key) {\n    if (!this.has(key)) {\n      return this;\n    }\n\n    var data = this.data[key];\n    delete this.data[key];\n    this.onRemove(data);\n    this.order.splice(this.order.indexOf(key), 1);\n    return this;\n  };\n\n  _proto.setMaxSize = function setMaxSize(max) {\n    this.max = max;\n\n    while (this.order.length > this.max) {\n      var removedData = this.getAndRemove(this.order[0]);\n      if (removedData) this.onRemove(removedData);\n    }\n\n    return this;\n  };\n\n  return LRUCache;\n}();\n\nvar TEMP_POINT$3 = new Point(0, 0);\nvar TEMP_POINT1$2 = new Point(0, 0);\nvar TEMP_POINT2$1 = new Point(0, 0);\n\nvar TileLayerCanvasRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(TileLayerCanvasRenderer, _CanvasRenderer);\n\n  function TileLayerCanvasRenderer(layer) {\n    var _this;\n\n    _this = _CanvasRenderer.call(this, layer) || this;\n    _this.tilesInView = {};\n    _this.tilesLoading = {};\n    _this._parentTiles = [];\n    _this._childTiles = [];\n    _this.tileCache = new LRUCache(layer.options['maxCacheSize'], _this.deleteTile.bind(_assertThisInitialized(_assertThisInitialized(_this))));\n    return _this;\n  }\n\n  var _proto = TileLayerCanvasRenderer.prototype;\n\n  _proto.getCurrentTileZoom = function getCurrentTileZoom() {\n    return this._tileZoom;\n  };\n\n  _proto.draw = function draw() {\n    var map = this.getMap();\n\n    if (!this.isDrawable()) {\n      return;\n    }\n\n    var mask2DExtent = this.prepareCanvas();\n\n    if (mask2DExtent) {\n      if (!mask2DExtent.intersects(this.canvasExtent2D)) {\n        this.completeRender();\n        return;\n      }\n    }\n\n    var layer = this.layer;\n    var tileGrids = layer.getTiles().tileGrids;\n\n    if (!tileGrids || !tileGrids.length) {\n      this.completeRender();\n      return;\n    }\n\n    var loadingCount = 0;\n    var loading = false;\n    var checkedTiles = {};\n    var tiles = [],\n        parentTiles = [],\n        parentKeys = {},\n        childTiles = [],\n        childKeys = {},\n        placeholders = [],\n        placeholderKeys = {};\n    var tileQueue = {};\n\n    var preLoadingCount = this._markTiles(),\n        loadingLimit = this._getLoadLimit();\n\n    var l = tileGrids.length;\n    this._tileZoom = tileGrids[0]['zoom'];\n    this._tileOffset = tileGrids[0]['offset'];\n\n    for (var i = 0; i < l; i++) {\n      var tileGrid = tileGrids[i];\n      var allTiles = tileGrid['tiles'];\n\n      var placeholder = this._generatePlaceHolder(tileGrid.zoom);\n\n      for (var _i = 0, _l = allTiles.length; _i < _l; _i++) {\n        var tile = allTiles[_i],\n            tileId = tile['id'];\n        var tileLoading = false;\n\n        if (this._isLoadingTile(tileId)) {\n          tileLoading = loading = true;\n          this.tilesLoading[tileId].current = true;\n        } else {\n          var cached = this._getCachedTile(tileId);\n\n          if (cached) {\n            if (cached.image && this.getTileOpacity(cached.image) < 1) {\n              tileLoading = loading = true;\n            }\n\n            tiles.push(cached);\n          } else {\n            tileLoading = loading = true;\n            var hitLimit = loadingLimit && loadingCount + preLoadingCount[0] > loadingLimit;\n\n            if (!hitLimit && (!map.isInteracting() || map.isMoving() || map.isRotating())) {\n              loadingCount++;\n              tileQueue[tileId + '@' + tile['point'].toArray().join()] = tile;\n            }\n          }\n        }\n\n        if (!tileLoading) continue;\n\n        if (checkedTiles[tileId]) {\n          continue;\n        }\n\n        checkedTiles[tileId] = 1;\n\n        if (placeholder && !placeholderKeys[tileId]) {\n          tile.cache = false;\n          placeholders.push({\n            image: placeholder,\n            info: tile\n          });\n          placeholderKeys[tileId] = 1;\n        }\n\n        var parentTile = this._findParentTile(tile);\n\n        if (parentTile) {\n          var parentId = parentTile.info.id;\n\n          if (parentKeys[parentId] === undefined) {\n            parentKeys[parentId] = parentTiles.length;\n            parentTiles.push(parentTile);\n          }\n        } else if (!parentTiles.length) {\n          var children = this._findChildTiles(tile);\n\n          if (children.length) {\n            children.forEach(function (c) {\n              if (!childKeys[c.info.id]) {\n                childTiles.push(c);\n                childKeys[c.info.id] = 1;\n              }\n            });\n          }\n        }\n      }\n    }\n\n    if (parentTiles.length) {\n      childTiles.length = 0;\n      this._childTiles.length = 0;\n    }\n\n    this._drawTiles(tiles, parentTiles, childTiles, placeholders);\n\n    if (!loadingCount) {\n      if (!loading) {\n        if (!map.isAnimating() && (this._parentTiles.length || this._childTiles.length)) {\n          this._parentTiles = [];\n          this._childTiles = [];\n          this.setToRedraw();\n        }\n\n        this.completeRender();\n      }\n    } else {\n      this.loadTileQueue(tileQueue);\n    }\n\n    this._retireTiles();\n  };\n\n  _proto.isTileCachedOrLoading = function isTileCachedOrLoading(tileId) {\n    return this.tilesLoading[tileId] || this.tilesInView[tileId] || this.tileCache.get(tileId);\n  };\n\n  _proto._drawTiles = function _drawTiles(tiles, parentTiles, childTiles, placeholders) {\n    var _this2 = this;\n\n    if (parentTiles.length) {\n      parentTiles.sort(function (t1, t2) {\n        return Math.abs(t2.info.z - _this2._tileZoom) - Math.abs(t1.info.z - _this2._tileZoom);\n      });\n      this._parentTiles = parentTiles;\n    }\n\n    if (childTiles.length) {\n      this._childTiles = childTiles;\n    }\n\n    var context = {\n      tiles: tiles,\n      parentTiles: this._parentTiles,\n      childTiles: this._childTiles\n    };\n    this.onDrawTileStart(context);\n\n    this._parentTiles.forEach(function (t) {\n      return _this2._drawTileAndCache(t);\n    });\n\n    this._childTiles.forEach(function (t) {\n      return _this2._drawTileOffset(t.info, t.image);\n    });\n\n    placeholders.forEach(function (t) {\n      return _this2._drawTileOffset(t.info, t.image);\n    });\n    var layer = this.layer,\n        map = this.getMap();\n\n    if (!layer.options['cascadeTiles'] || map.getPitch() <= map.options['cascadePitches'][0]) {\n      tiles.forEach(function (t) {\n        return _this2._drawTileAndCache(t);\n      });\n    } else {\n      this.writeZoomStencil();\n      var started = false;\n\n      for (var i = 0, l = tiles.length; i < l; i++) {\n        if (tiles[i].info.z !== this._tileZoom) {\n          if (!started) {\n            this.startZoomStencilTest();\n            started = true;\n          } else {\n            this.resumeZoomStencilTest();\n          }\n        } else if (started) {\n          this.pauseZoomStencilTest();\n        }\n\n        this._drawTileAndCache(tiles[i]);\n      }\n\n      this.endZoomStencilTest();\n    }\n\n    this.onDrawTileEnd(context);\n  };\n\n  _proto.writeZoomStencil = function writeZoomStencil() {};\n\n  _proto.startZoomStencilTest = function startZoomStencilTest() {};\n\n  _proto.endZoomStencilTest = function endZoomStencilTest() {};\n\n  _proto.pauseZoomStencilTest = function pauseZoomStencilTest() {};\n\n  _proto.resumeZoomStencilTest = function resumeZoomStencilTest() {};\n\n  _proto.onDrawTileStart = function onDrawTileStart() {};\n\n  _proto.onDrawTileEnd = function onDrawTileEnd() {};\n\n  _proto._drawTileOffset = function _drawTileOffset(info, image) {\n    if (!image) {\n      return;\n    }\n\n    var offset = this._tileOffset;\n\n    if (!offset[0] && !offset[1]) {\n      this.drawTile(info, image);\n      return;\n    }\n\n    var map = this.getMap();\n\n    var scale = map._getResolution(this._tileZoom) / map._getResolution(info.z);\n\n    offset[0] *= scale;\n    offset[1] *= scale;\n\n    info.point._sub(offset);\n\n    info.extent2d._sub(offset);\n\n    this.drawTile(info, image);\n\n    info.point._add(offset);\n\n    info.extent2d._add(offset);\n\n    offset[0] /= scale;\n    offset[1] /= scale;\n  };\n\n  _proto._drawTileAndCache = function _drawTileAndCache(tile) {\n    tile.current = true;\n    this.tilesInView[tile.info.id] = tile;\n\n    this._drawTileOffset(tile.info, tile.image);\n\n    this.tileCache.add(tile.info.id, tile);\n  };\n\n  _proto.drawOnInteracting = function drawOnInteracting() {\n    this.draw();\n  };\n\n  _proto.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n\n    if (map.getPitch()) {\n      return _CanvasRenderer.prototype.needToRedraw.call(this);\n    }\n\n    if (map.isRotating() || map.isZooming()) {\n      return true;\n    }\n\n    if (map.isMoving()) {\n      return !!this.layer.options['forceRenderOnMoving'];\n    }\n\n    return _CanvasRenderer.prototype.needToRedraw.call(this);\n  };\n\n  _proto.hitDetect = function hitDetect() {\n    return false;\n  };\n\n  _proto._getLoadLimit = function _getLoadLimit() {\n    if (this.getMap().isInteracting()) {\n      return this.layer.options['loadingLimitOnInteracting'];\n    }\n\n    return 0;\n  };\n\n  _proto.isDrawable = function isDrawable() {\n    if (this.getMap().getPitch()) {\n      if (console) {\n        console.warn('TileLayer with canvas renderer can\\'t be pitched, use gl renderer (\\'renderer\\' : \\'gl\\') instead.');\n      }\n\n      this.clear();\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto.clear = function clear() {\n    this._retireTiles(true);\n\n    this.tileCache.reset();\n    this.tilesInView = {};\n    this.tilesLoading = {};\n    this._parentTiles = [];\n    this._childTiles = [];\n\n    _CanvasRenderer.prototype.clear.call(this);\n  };\n\n  _proto._isLoadingTile = function _isLoadingTile(tileId) {\n    return !!this.tilesLoading[tileId];\n  };\n\n  _proto.clipCanvas = function clipCanvas(context) {\n    return _CanvasRenderer.prototype.clipCanvas.call(this, context);\n  };\n\n  _proto._clipByPitch = function _clipByPitch(ctx) {\n    var map = this.getMap();\n\n    if (map.getPitch() <= map.options['maxVisualPitch']) {\n      return false;\n    }\n\n    if (!this.layer.options['clipByPitch']) {\n      return false;\n    }\n\n    var clipExtent = map.getContainerExtent();\n    var r = map.getDevicePixelRatio();\n    ctx.save();\n    ctx.strokeStyle = 'rgba(0, 0, 0, 0)';\n    ctx.beginPath();\n    ctx.rect(0, Math.ceil(clipExtent.ymin) * r, Math.ceil(clipExtent.getWidth()) * r, Math.ceil(clipExtent.getHeight()) * r);\n    ctx.stroke();\n    ctx.clip();\n    return true;\n  };\n\n  _proto.loadTileQueue = function loadTileQueue(tileQueue) {\n    for (var p in tileQueue) {\n      if (tileQueue.hasOwnProperty(p)) {\n        var tile = tileQueue[p];\n        var tileImage = this.loadTile(tile);\n\n        if (tileImage.loadTime === undefined) {\n          this.tilesLoading[tile['id']] = {\n            image: tileImage,\n            current: true,\n            info: tile\n          };\n        }\n      }\n    }\n  };\n\n  _proto.loadTile = function loadTile(tile) {\n    var tileSize = this.layer.getTileSize();\n    var tileImage = new Image();\n    tileImage.width = tileSize['width'];\n    tileImage.height = tileSize['height'];\n    tileImage.onload = this.onTileLoad.bind(this, tileImage, tile);\n    tileImage.onerror = this.onTileError.bind(this, tileImage, tile);\n    this.loadTileImage(tileImage, tile['url']);\n    return tileImage;\n  };\n\n  _proto.loadTileImage = function loadTileImage(tileImage, url) {\n    var crossOrigin = this.layer.options['crossOrigin'];\n\n    if (!isNil(crossOrigin)) {\n      tileImage.crossOrigin = crossOrigin;\n    }\n\n    return loadImage(tileImage, [url]);\n  };\n\n  _proto.abortTileLoading = function abortTileLoading(tileImage) {\n    if (!tileImage) return;\n    tileImage.onload = falseFn;\n    tileImage.onerror = falseFn;\n    tileImage.src = emptyImageUrl;\n  };\n\n  _proto.onTileLoad = function onTileLoad(tileImage, tileInfo) {\n    if (!this.layer) {\n      return;\n    }\n\n    var id = tileInfo['id'];\n\n    if (!this.tilesInView) {\n      return;\n    }\n\n    var e = {\n      tile: tileInfo,\n      tileImage: tileImage\n    };\n    this.layer.fire('tileload', e);\n    tileImage = e.tileImage;\n    tileImage.loadTime = now();\n    delete this.tilesLoading[id];\n\n    this._addTileToCache(tileInfo, tileImage);\n\n    this.setToRedraw();\n  };\n\n  _proto.onTileError = function onTileError(tileImage, tileInfo) {\n    if (!this.layer) {\n      return;\n    }\n\n    tileImage.onerrorTick = tileImage.onerrorTick || 0;\n    var tileRetryCount = this.layer.options['tileRetryCount'];\n\n    if (tileRetryCount > tileImage.onerrorTick) {\n      tileImage.onerrorTick++;\n      tileImage.src = tileInfo.url;\n      return;\n    }\n\n    if (tileImage instanceof Image) {\n      this.abortTileLoading(tileImage, tileInfo);\n    }\n\n    tileImage.loadTime = 0;\n    delete this.tilesLoading[tileInfo['id']];\n\n    this._addTileToCache(tileInfo, tileImage);\n\n    this.setToRedraw();\n    this.layer.fire('tileerror', {\n      tile: tileInfo\n    });\n  };\n\n  _proto.drawTile = function drawTile(tileInfo, tileImage) {\n    if (!tileImage || !this.getMap()) {\n      return;\n    }\n\n    var point = tileInfo.point,\n        tileZoom = tileInfo.z,\n        tileId = tileInfo.id;\n\n    var map = this.getMap(),\n        tileSize = tileInfo.size,\n        zoom = map.getZoom(),\n        ctx = this.context,\n        cp = map._pointToContainerPoint(point, tileZoom, 0, TEMP_POINT$3),\n        bearing = map.getBearing(),\n        transformed = bearing || zoom !== tileZoom;\n\n    var opacity = this.getTileOpacity(tileImage);\n    var alpha = ctx.globalAlpha;\n\n    if (opacity < 1) {\n      ctx.globalAlpha = opacity;\n      this.setToRedraw();\n    }\n\n    if (!transformed) {\n      cp._round();\n    }\n\n    var x = cp.x,\n        y = cp.y;\n    var w = tileSize[0],\n        h = tileSize[1];\n\n    if (transformed) {\n      ctx.save();\n      ctx.translate(x, y);\n\n      if (bearing) {\n        ctx.rotate(-bearing * Math.PI / 180);\n        w += 0.1;\n        h += 0.1;\n      }\n\n      if (zoom !== tileZoom) {\n        var scale = map._getResolution(tileZoom) / map._getResolution();\n\n        ctx.scale(scale, scale);\n      }\n\n      x = y = 0;\n    }\n\n    Canvas.image(ctx, tileImage, x, y, w, h);\n\n    if (this.layer.options['debug']) {\n      var color = this.layer.options['debugOutline'];\n      ctx.save();\n      ctx.strokeStyle = color;\n      ctx.fillStyle = color;\n      ctx.strokeWidth = 10;\n      ctx.font = '20px monospace';\n\n      var _point = new Point(x, y);\n\n      Canvas.rectangle(ctx, _point, {\n        width: w,\n        height: h\n      }, 1, 0);\n      Canvas.fillText(ctx, this.getDebugInfo(tileId), _point._add(10, 20), color);\n      Canvas.drawCross(ctx, x + w / 2, y + h / 2, 2, color);\n      ctx.restore();\n    }\n\n    if (transformed) {\n      ctx.restore();\n    }\n\n    if (ctx.globalAlpha !== alpha) {\n      ctx.globalAlpha = alpha;\n    }\n\n    this.setCanvasUpdated();\n  };\n\n  _proto.getDebugInfo = function getDebugInfo(tileId) {\n    var xyz = tileId.split('_');\n    var length = xyz.length;\n    return 'x:' + xyz[length - 2] + ', y:' + xyz[length - 3] + ', z:' + xyz[length - 1];\n  };\n\n  _proto._findChildTiles = function _findChildTiles(info) {\n    var layer = this._getLayerOfTile(info.layer);\n\n    if (!layer.options['background']) {\n      return [];\n    }\n\n    var map = this.getMap();\n    var children = [];\n\n    var min = info.extent2d.getMin(),\n        max = info.extent2d.getMax(),\n        pmin = layer._project(map._pointToPrj(min, info.z, TEMP_POINT1$2), TEMP_POINT1$2),\n        pmax = layer._project(map._pointToPrj(max, info.z, TEMP_POINT2$1), TEMP_POINT2$1);\n\n    var zoomDiff = 2;\n\n    for (var i = 1; i < zoomDiff; i++) {\n      this._findChildTilesAt(children, pmin, pmax, layer, info.z + i);\n    }\n\n    return children;\n  };\n\n  _proto._findChildTilesAt = function _findChildTilesAt(children, pmin, pmax, layer, childZoom) {\n    var zoomOffset = layer.options['zoomOffset'];\n    var layerId = layer.getId(),\n        res = layer.getSpatialReference().getResolution(childZoom + zoomOffset);\n\n    if (!res) {\n      return;\n    }\n\n    var dmin = layer._getTileConfig().getTileIndex(pmin, res),\n        dmax = layer._getTileConfig().getTileIndex(pmax, res);\n\n    var sx = Math.min(dmin.idx, dmax.idx),\n        ex = Math.max(dmin.idx, dmax.idx);\n    var sy = Math.min(dmin.idy, dmax.idy),\n        ey = Math.max(dmin.idy, dmax.idy);\n    var id, tile;\n\n    for (var i = sx; i < ex; i++) {\n      for (var ii = sy; ii < ey; ii++) {\n        id = layer._getTileId(i, ii, childZoom + zoomOffset, layerId);\n\n        if (this.tileCache.has(id)) {\n          tile = this.tileCache.getAndRemove(id);\n          children.push(tile);\n          this.tileCache.add(id, tile);\n        }\n      }\n    }\n  };\n\n  _proto._findParentTile = function _findParentTile(info) {\n    var map = this.getMap(),\n        layer = this._getLayerOfTile(info.layer);\n\n    if (!layer.options['background']) {\n      return null;\n    }\n\n    var sr = layer.getSpatialReference();\n    var d = sr.getZoomDirection(),\n        zoomOffset = layer.options['zoomOffset'],\n        zoomDiff = layer.options['backgroundZoomDiff'];\n\n    var center = info.extent2d.getCenter(),\n        prj = layer._project(map._pointToPrj(center, info.z));\n\n    for (var diff = 1; diff <= zoomDiff; diff++) {\n      var z = info.z - d * diff;\n      var res = sr.getResolution(z + zoomOffset);\n      if (!res) continue;\n\n      var tileIndex = layer._getTileConfig().getTileIndex(prj, res);\n\n      var id = layer._getTileId(tileIndex.x, tileIndex.y, z + zoomOffset, info.layer);\n\n      if (this.tileCache.has(id)) {\n        var tile = this.tileCache.getAndRemove(id);\n        this.tileCache.add(id, tile);\n        return tile;\n      }\n    }\n\n    return null;\n  };\n\n  _proto._getLayerOfTile = function _getLayerOfTile(layerId) {\n    return this.layer.getChildLayer ? this.layer.getChildLayer(layerId) : this.layer;\n  };\n\n  _proto._getCachedTile = function _getCachedTile(tileId) {\n    var tilesInView = this.tilesInView;\n    var cached = this.tileCache.getAndRemove(tileId);\n\n    if (cached) {\n      tilesInView[tileId] = cached;\n      var tilesLoading = this.tilesLoading;\n\n      if (tilesLoading && tilesLoading[tileId]) {\n        tilesLoading[tileId].current = false;\n        var _tilesLoading$tileId = tilesLoading[tileId],\n            image = _tilesLoading$tileId.image,\n            info = _tilesLoading$tileId.info;\n        this.abortTileLoading(image, info);\n        console.log('_getCachedTile');\n        delete tilesLoading[tileId];\n      }\n    } else {\n      cached = tilesInView[tileId];\n    }\n\n    return cached;\n  };\n\n  _proto._addTileToCache = function _addTileToCache(tileInfo, tileImage) {\n    this.tilesInView[tileInfo.id] = {\n      image: tileImage,\n      current: true,\n      info: tileInfo\n    };\n  };\n\n  _proto.getTileOpacity = function getTileOpacity(tileImage) {\n    if (!this.layer.options['fadeAnimation'] || !tileImage.loadTime) {\n      return 1;\n    }\n\n    return Math.min(1, (now() - tileImage.loadTime) / (1000 / 60 * 10));\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.clear();\n    delete this.tileCache;\n    delete this._tilePlaceHolder;\n\n    _CanvasRenderer.prototype.onRemove.call(this);\n  };\n\n  _proto._markTiles = function _markTiles() {\n    var a = 0,\n        b = 0;\n\n    if (this.tilesLoading) {\n      for (var p in this.tilesLoading) {\n        this.tilesLoading[p].current = false;\n        a++;\n      }\n    }\n\n    if (this.tilesInView) {\n      for (var _p in this.tilesInView) {\n        this.tilesInView[_p].current = false;\n        b++;\n      }\n    }\n\n    return [a, b];\n  };\n\n  _proto._retireTiles = function _retireTiles(force) {\n    for (var i in this.tilesLoading) {\n      var tile = this.tilesLoading[i];\n\n      if (force || !tile.current) {\n        if (tile.image) {\n          this.abortTileLoading(tile.image, tile.info);\n        }\n\n        this.deleteTile(tile);\n        delete this.tilesLoading[i];\n      }\n    }\n\n    for (var _i2 in this.tilesInView) {\n      var _tile = this.tilesInView[_i2];\n\n      if (!_tile.current) {\n        delete this.tilesInView[_i2];\n\n        if (!this.tileCache.has(_i2)) {\n          this.deleteTile(_tile);\n        }\n      }\n    }\n  };\n\n  _proto.deleteTile = function deleteTile(tile) {\n    if (!tile || !tile.image) {\n      return;\n    }\n\n    tile.image.onload = null;\n    tile.image.onerror = null;\n  };\n\n  _proto._generatePlaceHolder = function _generatePlaceHolder(z) {\n    var map = this.getMap();\n    var placeholder = this.layer.options['placeholder'];\n\n    if (!placeholder || map.getPitch()) {\n      return null;\n    }\n\n    var tileSize = this.layer.getTileSize(),\n        scale = map._getResolution(z) / map._getResolution(),\n        canvas = this._tilePlaceHolder = this._tilePlaceHolder || Canvas.createCanvas(1, 1);\n\n    canvas.width = tileSize.width * scale;\n    canvas.height = tileSize.height * scale;\n\n    if (isFunction(placeholder)) {\n      placeholder(canvas);\n    } else {\n      defaultPlaceholder(canvas);\n    }\n\n    return canvas;\n  };\n\n  return TileLayerCanvasRenderer;\n}(CanvasRenderer);\n\nTileLayer.registerRenderer('canvas', TileLayerCanvasRenderer);\n\nfunction falseFn() {\n  return false;\n}\n\nfunction defaultPlaceholder(canvas) {\n  var ctx = canvas.getContext('2d'),\n      cw = canvas.width,\n      ch = canvas.height,\n      w = cw / 16,\n      h = ch / 16;\n  ctx.beginPath();\n\n  for (var i = 0; i < 16; i++) {\n    ctx.moveTo(0, i * h);\n    ctx.lineTo(cw, i * h);\n    ctx.moveTo(i * w, 0);\n    ctx.lineTo(i * w, ch);\n  }\n\n  ctx.strokeStyle = 'rgba(180, 180, 180, 0.1)';\n  ctx.lineWidth = 1;\n  ctx.stroke();\n  ctx.beginPath();\n  var path = [[0, 0], [cw, 0], [0, ch], [cw, ch], [0, 0], [0, ch], [cw, 0], [cw, ch], [0, ch / 2], [cw, ch / 2], [cw / 2, 0], [cw / 2, ch]];\n\n  for (var _i3 = 1; _i3 < path.length; _i3 += 2) {\n    ctx.moveTo(path[_i3 - 1][0], path[_i3 - 1][1]);\n    ctx.lineTo(path[_i3][0], path[_i3][1]);\n  }\n\n  ctx.lineWidth = 1 * 4;\n  ctx.stroke();\n}\n\nvar TileLayerGLRenderer = function (_ImageGLRenderable) {\n  _inheritsLoose(TileLayerGLRenderer, _ImageGLRenderable);\n\n  function TileLayerGLRenderer() {\n    return _ImageGLRenderable.apply(this, arguments) || this;\n  }\n\n  var _proto = TileLayerGLRenderer.prototype;\n\n  _proto.isDrawable = function isDrawable() {\n    return true;\n  };\n\n  _proto.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n\n    if (this._gl() && !map.getPitch() && map.isZooming() && !map.isMoving() && !map.isRotating()) {\n      return true;\n    }\n\n    return _ImageGLRenderable.prototype.needToRedraw.call(this);\n  };\n\n  _proto.drawTile = function drawTile(tileInfo, tileImage) {\n    var map = this.getMap();\n\n    if (!tileInfo || !map || !tileImage) {\n      return;\n    }\n\n    var scale = tileInfo._glScale = tileInfo._glScale || map.getGLScale(tileInfo.z),\n        w = tileInfo.size[0],\n        h = tileInfo.size[1];\n\n    if (tileInfo.cache !== false) {\n      this._bindGLBuffer(tileImage, w, h);\n    }\n\n    if (!this._gl()) {\n      _ImageGLRenderable.prototype.drawTile.call(this, tileInfo, tileImage);\n\n      return;\n    }\n\n    var point = tileInfo.point;\n    var x = point.x * scale,\n        y = point.y * scale;\n    var opacity = this.getTileOpacity(tileImage);\n    var debugInfo = null;\n\n    if (this.layer.options['debug']) {\n      debugInfo = this.getDebugInfo(tileInfo.id);\n    }\n\n    this.drawGLImage(tileImage, x, y, w, h, scale, opacity, debugInfo);\n\n    if (opacity < 1) {\n      this.setToRedraw();\n    } else {\n      this.setCanvasUpdated();\n    }\n  };\n\n  _proto.writeZoomStencil = function writeZoomStencil() {\n    var gl = this.gl;\n    gl.stencilFunc(gl.ALWAYS, 1, 0xFF);\n    gl.stencilOp(gl.KEEP, gl.KEEP, gl.REPLACE);\n  };\n\n  _proto.startZoomStencilTest = function startZoomStencilTest() {\n    var gl = this.gl;\n    gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n    gl.stencilFunc(gl.EQUAL, 0, 0xFF);\n  };\n\n  _proto.endZoomStencilTest = function endZoomStencilTest() {\n    this.pauseZoomStencilTest();\n  };\n\n  _proto.pauseZoomStencilTest = function pauseZoomStencilTest() {\n    var gl = this.gl;\n    gl.stencilFunc(gl.ALWAYS, 1, 0xFF);\n  };\n\n  _proto.resumeZoomStencilTest = function resumeZoomStencilTest() {\n    var gl = this.gl;\n    gl.stencilFunc(gl.EQUAL, 0, 0xFF);\n  };\n\n  _proto._bindGLBuffer = function _bindGLBuffer(image, w, h) {\n    if (!image.glBuffer) {\n      image.glBuffer = this.bufferTileData(0, 0, w, h);\n    }\n  };\n\n  _proto.loadTileImage = function loadTileImage(tileImage, url) {\n    var crossOrigin = this.layer.options['crossOrigin'];\n    tileImage.crossOrigin = crossOrigin !== null ? crossOrigin : '';\n    tileImage.src = url;\n    return;\n  };\n\n  _proto.onCanvasCreate = function onCanvasCreate() {\n    if (!this.canvas.gl || !this.canvas.gl.wrap) {\n      this.createCanvas2();\n    }\n  };\n\n  _proto.createContext = function createContext() {\n    _ImageGLRenderable.prototype.createContext.call(this);\n\n    this.createGLContext();\n  };\n\n  _proto.resizeCanvas = function resizeCanvas(canvasSize) {\n    if (!this.canvas) {\n      return;\n    }\n\n    _ImageGLRenderable.prototype.resizeCanvas.call(this, canvasSize);\n\n    this.resizeGLCanvas();\n  };\n\n  _proto.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n\n    _ImageGLRenderable.prototype.clearCanvas.call(this);\n\n    this.clearGLCanvas();\n  };\n\n  _proto.getCanvasImage = function getCanvasImage() {\n    if (!this._gl() || !this.canvas2) {\n      return _ImageGLRenderable.prototype.getCanvasImage.call(this);\n    }\n\n    var img = _ImageGLRenderable.prototype.getCanvasImage.call(this);\n\n    if (img) {\n      img.image = this.canvas2;\n    }\n\n    return img;\n  };\n\n  _proto._gl = function _gl() {\n    if (this.canvas.gl && this.canvas.gl.wrap) {\n      return true;\n    }\n\n    var map = this.getMap();\n    return map && (map.getPitch() || map.getBearing()) || this.layer && !!this.layer.options['fragmentShader'];\n  };\n\n  _proto.deleteTile = function deleteTile(tile) {\n    _ImageGLRenderable.prototype.deleteTile.call(this, tile);\n\n    if (tile && tile.image) {\n      this.disposeImage(tile.image);\n    }\n\n    delete tile.image;\n  };\n\n  _proto.onRemove = function onRemove() {\n    _ImageGLRenderable.prototype.onRemove.call(this);\n\n    this.removeGLCanvas();\n  };\n\n  return TileLayerGLRenderer;\n}(ImageGLRenderable(TileLayerCanvasRenderer));\n\nTileLayer.registerRenderer('gl', TileLayerGLRenderer);\n\nfunction _loadTile(tile) {\n  var tileSize = this.layer.getTileSize(),\n      canvasClass = this.canvas.constructor,\n      map = this.getMap();\n  var r = map.getDevicePixelRatio();\n  var tileCanvas = Canvas.createCanvas(tileSize['width'] * r, tileSize['height'] * r, canvasClass);\n  tileCanvas['layer'] = this.layer;\n  var me = this;\n  var extent = new Extent(map.pointToCoordinate(tile['point']), map.pointToCoordinate(tile['point'].add(tileSize.toPoint())), map.getProjection());\n  this.layer.drawTile(tileCanvas, {\n    'url': tile['url'],\n    'point': tile['point'],\n    'center': map.pointToCoordinate(tile['point'].add(tileSize['width'] / 2, tileSize['height'] / 2)),\n    'extent': extent,\n    'z': tile['z'],\n    'x': tile['x'],\n    'y': tile['y']\n  }, function (error) {\n    if (error) {\n      me.onTileError(tileCanvas, tile);\n      return;\n    }\n\n    me.onTileLoad(tileCanvas, tile);\n  });\n  return tileCanvas;\n}\n\nvar CanvasRenderer$1 = function (_TileLayerCanvasRende) {\n  _inheritsLoose(CanvasRenderer, _TileLayerCanvasRende);\n\n  function CanvasRenderer() {\n    return _TileLayerCanvasRende.apply(this, arguments) || this;\n  }\n\n  var _proto = CanvasRenderer.prototype;\n\n  _proto.loadTile = function loadTile() {\n    return _loadTile.apply(this, arguments);\n  };\n\n  return CanvasRenderer;\n}(TileLayerCanvasRenderer);\n\nvar GLRenderer = function (_TileLayerGLRenderer) {\n  _inheritsLoose(GLRenderer, _TileLayerGLRenderer);\n\n  function GLRenderer() {\n    return _TileLayerGLRenderer.apply(this, arguments) || this;\n  }\n\n  var _proto2 = GLRenderer.prototype;\n\n  _proto2.loadTile = function loadTile() {\n    return _loadTile.apply(this, arguments);\n  };\n\n  return GLRenderer;\n}(TileLayerGLRenderer);\n\nCanvasTileLayer.registerRenderer('canvas', CanvasRenderer$1);\nCanvasTileLayer.registerRenderer('gl', GLRenderer);\n\nvar OverlayLayerRenderer = function (_CanvasRenderer) {\n  _inheritsLoose(OverlayLayerRenderer, _CanvasRenderer);\n\n  function OverlayLayerRenderer() {\n    return _CanvasRenderer.apply(this, arguments) || this;\n  }\n\n  var _proto = OverlayLayerRenderer.prototype;\n\n  _proto.checkResources = function checkResources() {\n    var geometries = this._geosToCheck;\n\n    if (!this._resourceChecked && !geometries) {\n      geometries = this.layer._geoList;\n    }\n\n    if (!isArrayHasData(geometries)) {\n      return [];\n    }\n\n    var resources = [];\n    var cache = {};\n\n    for (var i = geometries.length - 1; i >= 0; i--) {\n      var geo = geometries[i];\n\n      var res = geo._getExternalResources();\n\n      if (!res.length) {\n        continue;\n      }\n\n      if (!this.resources) {\n        resources.push.apply(resources, res);\n      } else {\n        for (var _i = 0; _i < res.length; _i++) {\n          var url = res[_i][0];\n\n          if (!this.resources.isResourceLoaded(res[_i]) && !cache[url]) {\n            resources.push(res[_i]);\n            cache[url] = 1;\n          }\n        }\n      }\n    }\n\n    this._resourceChecked = true;\n    delete this._geosToCheck;\n    return resources;\n  };\n\n  _proto.render = function render() {\n    this.layer._sortGeometries();\n\n    return _CanvasRenderer.prototype.render.apply(this, arguments);\n  };\n\n  _proto._addGeoToCheckRes = function _addGeoToCheckRes(res) {\n    if (!res) {\n      return;\n    }\n\n    if (!Array.isArray(res)) {\n      res = [res];\n    }\n\n    if (!this._geosToCheck) {\n      this._geosToCheck = [];\n    }\n\n    pushIn(this._geosToCheck, res);\n  };\n\n  _proto.onGeometryAdd = function onGeometryAdd(geometries) {\n    this._addGeoToCheckRes(geometries);\n\n    redraw(this);\n  };\n\n  _proto.onGeometryRemove = function onGeometryRemove() {\n    redraw(this);\n  };\n\n  _proto.onGeometrySymbolChange = function onGeometrySymbolChange(e) {\n    this._addGeoToCheckRes(e.target);\n\n    redraw(this);\n  };\n\n  _proto.onGeometryShapeChange = function onGeometryShapeChange() {\n    redraw(this);\n  };\n\n  _proto.onGeometryPositionChange = function onGeometryPositionChange() {\n    redraw(this);\n  };\n\n  _proto.onGeometryZIndexChange = function onGeometryZIndexChange() {\n    redraw(this);\n  };\n\n  _proto.onGeometryShow = function onGeometryShow() {\n    redraw(this);\n  };\n\n  _proto.onGeometryHide = function onGeometryHide() {\n    redraw(this);\n  };\n\n  _proto.onGeometryPropertiesChange = function onGeometryPropertiesChange() {\n    redraw(this);\n  };\n\n  return OverlayLayerRenderer;\n}(CanvasRenderer);\n\nfunction redraw(renderer) {\n  if (renderer.layer.options['drawImmediate']) {\n    renderer.render();\n  }\n\n  renderer.setToRedraw();\n}\n\nvar TEMP_EXTENT$4 = new PointExtent();\n\nvar VectorLayerRenderer = function (_OverlayLayerCanvasRe) {\n  _inheritsLoose(VectorLayerRenderer, _OverlayLayerCanvasRe);\n\n  function VectorLayerRenderer() {\n    return _OverlayLayerCanvasRe.apply(this, arguments) || this;\n  }\n\n  var _proto = VectorLayerRenderer.prototype;\n\n  _proto.checkResources = function checkResources() {\n    var _this = this;\n\n    var resources = _OverlayLayerCanvasRe.prototype.checkResources.apply(this, arguments);\n\n    var style = this.layer.getStyle();\n\n    if (style) {\n      if (!Array.isArray(style)) {\n        style = [style];\n      }\n\n      style.forEach(function (s) {\n        var res = getExternalResources(s['symbol'], true);\n\n        for (var i = 0, l = res.length; i < l; i++) {\n          if (!_this.resources.isResourceLoaded(res[i])) {\n            resources.push(res[i]);\n          }\n        }\n      });\n    }\n\n    return resources;\n  };\n\n  _proto.needToRedraw = function needToRedraw() {\n    var map = this.getMap();\n\n    if (map.isInteracting() && this.layer.options['enableAltitude']) {\n      return true;\n    }\n\n    if (map.isZooming() && !map.isRotating() && !map.getPitch() && !this._hasPoint && this.layer.constructor === VectorLayer) {\n      return false;\n    }\n\n    return _OverlayLayerCanvasRe.prototype.needToRedraw.call(this);\n  };\n\n  _proto.draw = function draw() {\n    if (!this.getMap()) {\n      return;\n    }\n\n    if (!this.layer.isVisible() || this.layer.isEmpty()) {\n      this.clearCanvas();\n      this.completeRender();\n      return;\n    }\n\n    this.prepareCanvas();\n    this.drawGeos();\n    this.completeRender();\n  };\n\n  _proto.isBlank = function isBlank() {\n    if (!this.context) {\n      return false;\n    }\n\n    return !this.context.canvas._drawn;\n  };\n\n  _proto.drawOnInteracting = function drawOnInteracting() {\n    if (!this._geosToDraw) {\n      return;\n    }\n\n    this._updateDisplayExtent();\n\n    var map = this.getMap();\n    var count = this.layer.getCount();\n    var res = this.getMap().getResolution();\n\n    if (map.isZooming() && map.options['seamlessZoom'] && this._drawnRes !== undefined && res > this._drawnRes * 1.5 && this._geosToDraw.length < count || map.isMoving() || map.isInteracting()) {\n      this.prepareToDraw();\n      this.forEachGeo(this.checkGeo, this);\n      this._drawnRes = res;\n    }\n\n    for (var i = 0, l = this._geosToDraw.length; i < l; i++) {\n      var geo = this._geosToDraw[i];\n\n      if (!geo.isVisible()) {\n        continue;\n      }\n\n      geo._paint(this._displayExtent);\n    }\n  };\n\n  _proto.show = function show() {\n    this.layer.forEach(function (geo) {\n      geo._repaint();\n    });\n\n    _OverlayLayerCanvasRe.prototype.show.apply(this, arguments);\n  };\n\n  _proto.forEachGeo = function forEachGeo(fn, context) {\n    this.layer.forEach(fn, context);\n  };\n\n  _proto.drawGeos = function drawGeos() {\n    this._drawnRes = this.getMap().getResolution();\n\n    this._updateDisplayExtent();\n\n    this.prepareToDraw();\n    this.forEachGeo(this.checkGeo, this);\n\n    for (var i = 0, len = this._geosToDraw.length; i < len; i++) {\n      this._geosToDraw[i]._paint();\n    }\n  };\n\n  _proto.prepareToDraw = function prepareToDraw() {\n    this._hasPoint = false;\n    this._geosToDraw = [];\n  };\n\n  _proto.checkGeo = function checkGeo(geo) {\n    if (!geo || !geo.isVisible() || !geo.getMap() || !geo.getLayer() || !geo.getLayer().isCanvasRender()) {\n      return;\n    }\n\n    var painter = geo._getPainter();\n\n    var extent2D = painter.get2DExtent(this.resources, TEMP_EXTENT$4);\n\n    if (!extent2D || !extent2D.intersects(this._displayExtent)) {\n      return;\n    }\n\n    if (painter.hasPoint()) {\n      this._hasPoint = true;\n    }\n\n    this._geosToDraw.push(geo);\n  };\n\n  _proto.onZoomEnd = function onZoomEnd() {\n    delete this.canvasExtent2D;\n\n    _OverlayLayerCanvasRe.prototype.onZoomEnd.apply(this, arguments);\n  };\n\n  _proto.onRemove = function onRemove() {\n    this.forEachGeo(function (g) {\n      g.onHide();\n    });\n    delete this._geosToDraw;\n  };\n\n  _proto.onGeometryPropertiesChange = function onGeometryPropertiesChange(param) {\n    if (param) {\n      this.layer._styleGeometry(param['target']);\n    }\n\n    _OverlayLayerCanvasRe.prototype.onGeometryPropertiesChange.call(this, param);\n  };\n\n  _proto._updateDisplayExtent = function _updateDisplayExtent() {\n    var extent2D = this.canvasExtent2D;\n\n    if (this._maskExtent) {\n      if (!this._maskExtent.intersects(extent2D)) {\n        this.completeRender();\n        return;\n      }\n\n      extent2D = extent2D.intersection(this._maskExtent);\n    }\n\n    this._displayExtent = extent2D;\n  };\n\n  _proto.identify = function identify(coordinate, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var geometries = this._geosToDraw;\n\n    if (!geometries) {\n      return [];\n    }\n\n    return this.layer._hitGeos(geometries, coordinate, options);\n  };\n\n  return VectorLayerRenderer;\n}(OverlayLayerRenderer);\n\nVectorLayer.registerRenderer('canvas', VectorLayerRenderer);\n\nvar MapRenderer = function (_Class) {\n  _inheritsLoose(MapRenderer, _Class);\n\n  function MapRenderer(map) {\n    var _this;\n\n    _this = _Class.call(this) || this;\n    _this.map = map;\n    _this._handlerQueue = {};\n    return _this;\n  }\n\n  var _proto = MapRenderer.prototype;\n\n  _proto.callInNextFrame = function callInNextFrame(fn) {\n    this._handlerQueue.push(fn);\n  };\n\n  _proto.executeFrameCallbacks = function executeFrameCallbacks() {\n    var running = this._handlerQueue;\n    this._handlerQueue = [];\n\n    for (var i = 0, l = running.length; i < l; i++) {\n      running[i]();\n    }\n  };\n\n  _proto.offsetPlatform = function offsetPlatform(offset, force) {\n    if (!this.map._panels.front) {\n      return this;\n    }\n\n    if (!force && offset.x === 0 && offset.y === 0) {\n      return this;\n    }\n\n    var panels = this.map._panels;\n    var hasFront = this._frontCount = panels.back.layerDOM.childElementCount;\n    var hasBack = this._backCount = panels.front.layerDOM.childElementCount;\n    var hasUI = this._uiCount = panels.front.uiDOM.childElementCount;\n\n    if (hasFront || hasBack || hasUI) {\n      var pos = this.map.offsetPlatform();\n\n      if (offset) {\n        pos = pos.add(offset)._round();\n      } else {\n        pos = pos.round();\n      }\n\n      if (hasBack) {\n        offsetDom(panels.back, pos);\n      }\n\n      if (hasFront || hasUI) {\n        offsetDom(panels.front, pos);\n      }\n    }\n\n    return this;\n  };\n\n  _proto.domChanged = function domChanged() {\n    var panels = this.map._panels;\n\n    if (!panels.front) {\n      return false;\n    }\n\n    var frontCount = panels.back.layerDOM.childElementCount;\n\n    if (this._frontCount === undefined || this._frontCount !== frontCount) {\n      return true;\n    }\n\n    var backCount = panels.front.layerDOM.childElementCount;\n\n    if (this._backCount === undefined || this._backCount !== backCount) {\n      return true;\n    }\n\n    var uiCount = panels.front.uiDOM.childElementCount;\n\n    if (this._uiCount === undefined || this._uiCount !== uiCount) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.resetContainer = function resetContainer() {\n    if (!this.map) {\n      return;\n    }\n\n    this.map._resetMapViewPoint();\n\n    if (this.map._panels.front) {\n      var pos = new Point(0, 0);\n      offsetDom(this.map._panels.back, pos);\n      offsetDom(this.map._panels.front, pos);\n    }\n  };\n\n  _proto.onZoomEnd = function onZoomEnd() {\n    this.resetContainer();\n  };\n\n  _proto.onLoad = function onLoad() {\n    this._frameLoop();\n  };\n\n  return MapRenderer;\n}(Class);\n\nvar MapCanvasRenderer = function (_MapRenderer) {\n  _inheritsLoose(MapCanvasRenderer, _MapRenderer);\n\n  function MapCanvasRenderer(map) {\n    var _this;\n\n    _this = _MapRenderer.call(this, map) || this;\n    _this._containerIsCanvas = !!map._containerDOM.getContext;\n    _this._thisVisibilitychange = _this._onVisibilitychange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n\n    _this._registerEvents();\n\n    _this._loopTime = 0;\n    return _this;\n  }\n\n  var _proto = MapCanvasRenderer.prototype;\n\n  _proto.load = function load() {\n    this.initContainer();\n  };\n\n  _proto.renderFrame = function renderFrame(framestamp) {\n    if (!this.map) {\n      return false;\n    }\n\n    delete this._isViewChanged;\n    var map = this.map;\n\n    map._fireEvent('framestart');\n\n    this.updateMapDOM();\n\n    var layers = this._getAllLayerToRender();\n\n    this.drawLayers(layers, framestamp);\n    var updated = this.drawLayerCanvas(layers);\n\n    if (updated) {\n      this._drawCenterCross();\n    }\n\n    map._fireEvent('frameend');\n\n    this._recordView();\n\n    this._mapview = this._getMapView();\n    delete this._spatialRefChanged;\n\n    this._fireLayerLoadEvents();\n\n    this.executeFrameCallbacks();\n    this._canvasUpdated = false;\n    return true;\n  };\n\n  _proto.updateMapDOM = function updateMapDOM() {\n    var map = this.map;\n\n    if (map.isZooming()) {\n      return;\n    }\n\n    var offset = map._getViewPointFrameOffset();\n\n    if (offset) {\n      map.offsetPlatform(offset);\n    } else if (this.domChanged()) {\n      this.offsetPlatform(null, true);\n    }\n  };\n\n  _proto.drawLayers = function drawLayers(layers, framestamp) {\n    var map = this.map,\n        isInteracting = map.isInteracting(),\n        canvasIds = [],\n        updatedIds = [],\n        fps = map.options['fpsOnInteracting'] || 0,\n        timeLimit = fps === 0 ? 0 : 1000 / fps,\n        layerLimit = this.map.options['layerCanvasLimitOnInteracting'],\n        l = layers.length;\n    var baseLayer = map.getBaseLayer();\n    var t = 0;\n\n    for (var i = 0; i < l; i++) {\n      var layer = layers[i];\n\n      if (!layer.isVisible()) {\n        continue;\n      }\n\n      var isCanvas = layer.isCanvasRender();\n\n      if (isCanvas) {\n        canvasIds.push(layer.getId());\n      }\n\n      var renderer = layer._getRenderer();\n\n      if (!renderer) {\n        continue;\n      }\n\n      var needsRedraw = this._checkLayerRedraw(layer);\n\n      if (isCanvas && renderer.isCanvasUpdated()) {\n        if (!needsRedraw) {\n          updatedIds.push(layer.getId());\n        }\n\n        this.setLayerCanvasUpdated();\n      }\n\n      var transformMatrix = renderer.__zoomTransformMatrix;\n      delete renderer.__zoomTransformMatrix;\n\n      if (!needsRedraw) {\n        if (isCanvas && isInteracting) {\n          if (map.isZooming() && !map.getPitch()) {\n            renderer.prepareRender();\n            renderer.__zoomTransformMatrix = this._zoomMatrix;\n          } else if (map.getPitch() || map.isRotating()) {\n            renderer.clearCanvas();\n          }\n        }\n\n        continue;\n      }\n\n      if (isInteracting && isCanvas) {\n        if (layerLimit > 0 && l - 1 - i > layerLimit && layer !== baseLayer) {\n          layer._getRenderer().clearCanvas();\n\n          continue;\n        }\n\n        t += this._drawCanvasLayerOnInteracting(layer, t, timeLimit, framestamp);\n      } else if (isInteracting && renderer.drawOnInteracting) {\n        if (renderer.prepareRender) {\n          renderer.prepareRender();\n        }\n\n        if (renderer.checkAndDraw) {\n          renderer.checkAndDraw(renderer.drawOnInteracting, this._eventParam, framestamp);\n        } else {\n          renderer.drawOnInteracting(this._eventParam, framestamp);\n        }\n      } else {\n        renderer.render(framestamp);\n\n        if (isCanvas && transformMatrix && renderer.isLoadingResource()) {\n          renderer.__zoomTransformMatrix = transformMatrix;\n        }\n      }\n\n      if (isCanvas) {\n        updatedIds.push(layer.getId());\n        this.setLayerCanvasUpdated();\n      }\n    }\n\n    var preCanvasIds = this._canvasIds || [];\n    var preUpdatedIds = this._updatedIds || [];\n    this._canvasIds = canvasIds;\n    this._updatedIds = updatedIds;\n\n    if (!this.isLayerCanvasUpdated()) {\n      var sep = '---';\n\n      if (preCanvasIds.join(sep) !== canvasIds.join(sep) || preUpdatedIds.join(sep) !== updatedIds.join(sep)) {\n        this.setLayerCanvasUpdated();\n      }\n    }\n  };\n\n  _proto._checkLayerRedraw = function _checkLayerRedraw(layer) {\n    if (this.isSpatialReferenceChanged()) {\n      return true;\n    }\n\n    var map = this.map;\n\n    var renderer = layer._getRenderer();\n\n    if (layer.isCanvasRender()) {\n      return renderer.testIfNeedRedraw();\n    } else {\n      if (renderer.needToRedraw && renderer.needToRedraw()) {\n        return true;\n      }\n\n      return map.isInteracting() || this.isViewChanged();\n    }\n  };\n\n  _proto._drawCanvasLayerOnInteracting = function _drawCanvasLayerOnInteracting(layer, t, timeLimit, framestamp) {\n    var map = this.map,\n        renderer = layer._getRenderer(),\n        drawTime = renderer.getDrawTime(),\n        inTime = timeLimit === 0 || timeLimit > 0 && t + drawTime <= timeLimit;\n\n    if (renderer.mustRenderOnInteracting && renderer.mustRenderOnInteracting()) {\n      renderer.render(framestamp);\n    } else if (renderer.drawOnInteracting && (layer === map.getBaseLayer() || inTime || map.isZooming() && layer.options['forceRenderOnZooming'] || map.isMoving() && layer.options['forceRenderOnMoving'] || map.isRotating() && layer.options['forceRenderOnRotating'])) {\n      renderer.prepareRender();\n      renderer.prepareCanvas();\n\n      if (renderer.checkAndDraw) {\n        renderer.checkAndDraw(renderer.drawOnInteracting, this._eventParam, framestamp);\n      } else {\n        renderer.drawOnInteracting(this._eventParam, framestamp);\n      }\n\n      return drawTime;\n    } else if (map.isZooming() && !map.getPitch() && !map.isRotating()) {\n      renderer.prepareRender();\n      renderer.__zoomTransformMatrix = this._zoomMatrix;\n    } else if (map.getPitch() || map.isRotating()) {\n      renderer.clearCanvas();\n    }\n\n    if (renderer.drawOnInteracting && !inTime) {\n      renderer.onSkipDrawOnInteracting(this._eventParam, framestamp);\n    }\n\n    return 0;\n  };\n\n  _proto._fireLayerLoadEvents = function _fireLayerLoadEvents() {\n    if (this._updatedIds && this._updatedIds.length > 0) {\n      var map = this.map;\n\n      this._updatedIds.reverse().forEach(function (id) {\n        var layer = map.getLayer(id);\n\n        if (!layer) {\n          return;\n        }\n\n        var renderer = layer._getRenderer();\n\n        if (!renderer || !renderer.isRenderComplete()) {\n          return;\n        }\n\n        layer.fire('layerload');\n      });\n    }\n  };\n\n  _proto.isLayerCanvasUpdated = function isLayerCanvasUpdated() {\n    return this._canvasUpdated;\n  };\n\n  _proto.setLayerCanvasUpdated = function setLayerCanvasUpdated() {\n    this._canvasUpdated = true;\n  };\n\n  _proto.drawLayerCanvas = function drawLayerCanvas(layers) {\n    var map = this.map;\n\n    if (!map) {\n      return false;\n    }\n\n    if (!this.isLayerCanvasUpdated() && !this.isViewChanged()) {\n      return false;\n    }\n\n    if (!this.canvas) {\n      this.createCanvas();\n    }\n\n    map._fireEvent('renderstart', {\n      'context': this.context\n    });\n\n    if (!this._updateCanvasSize()) {\n      this.clearCanvas();\n    }\n\n    var interacting = map.isInteracting(),\n        limit = map.options['layerCanvasLimitOnInteracting'];\n    var len = layers.length;\n    var baseLayerImage;\n    var images = [];\n\n    for (var i = 0; i < len; i++) {\n      if (!layers[i].isVisible() || !layers[i].isCanvasRender()) {\n        continue;\n      }\n\n      var renderer = layers[i]._getRenderer();\n\n      if (!renderer) {\n        continue;\n      }\n\n      var layerImage = this._getLayerImage(layers[i]);\n\n      if (layerImage && layerImage['image']) {\n        if (layers[i] === map.getBaseLayer()) {\n          baseLayerImage = [layers[i], layerImage];\n        } else {\n          images.push([layers[i], layerImage]);\n        }\n      }\n    }\n\n    if (baseLayerImage) {\n      this._drawLayerCanvasImage(baseLayerImage[0], baseLayerImage[1]);\n\n      this._drawFog();\n    }\n\n    len = images.length;\n    var start = interacting && limit >= 0 && len > limit ? len - limit : 0;\n\n    for (var _i = start; _i < len; _i++) {\n      this._drawLayerCanvasImage(images[_i][0], images[_i][1]);\n    }\n\n    map._fireEvent('renderend', {\n      'context': this.context\n    });\n\n    return true;\n  };\n\n  _proto.setToRedraw = function setToRedraw() {\n    var layers = this._getAllLayerToRender();\n\n    for (var i = 0, l = layers.length; i < l; i++) {\n      var renderer = layers[i].getRenderer();\n\n      if (renderer && renderer.canvas && renderer.setToRedraw) {\n        renderer.setToRedraw();\n      }\n    }\n  };\n\n  _proto.updateMapSize = function updateMapSize(size) {\n    if (!size || this._containerIsCanvas) {\n      return;\n    }\n\n    var width = size['width'] + 'px',\n        height = size['height'] + 'px';\n    var panels = this.map._panels;\n    panels.mapWrapper.style.width = width;\n    panels.mapWrapper.style.height = height;\n\n    this._updateCanvasSize();\n  };\n\n  _proto.getMainPanel = function getMainPanel() {\n    if (!this.map) {\n      return null;\n    }\n\n    if (this._containerIsCanvas) {\n      return this.map._containerDOM;\n    }\n\n    if (this.map._panels) {\n      return this.map._panels.mapWrapper;\n    }\n\n    return null;\n  };\n\n  _proto.toDataURL = function toDataURL(mimeType) {\n    if (!this.canvas) {\n      return null;\n    }\n\n    return this.canvas.toDataURL(mimeType);\n  };\n\n  _proto.remove = function remove() {\n    if (Browser$1.webgl && typeof document !== 'undefined') {\n      removeDomEvent(document, 'visibilitychange', this._thisVisibilitychange, this);\n    }\n\n    if (this._resizeInterval) {\n      clearInterval(this._resizeInterval);\n    }\n\n    delete this.context;\n    delete this.canvas;\n    delete this.map;\n    delete this._spatialRefChanged;\n\n    this._cancelFrameLoop();\n  };\n\n  _proto.hitDetect = function hitDetect(point) {\n    var map = this.map;\n\n    if (!map || !map.options['hitDetect'] || map.isInteracting()) {\n      return;\n    }\n\n    var layers = map._getLayers();\n\n    var cursor = 'default';\n    var limit = map.options['hitDetectLimit'] || 0;\n    var counter = 0;\n\n    for (var i = layers.length - 1; i >= 0; i--) {\n      var layer = layers[i];\n\n      if (!layer.options['hitDetect'] || layer.isEmpty && layer.isEmpty()) {\n        continue;\n      }\n\n      var renderer = layer._getRenderer();\n\n      if (!renderer || !renderer.hitDetect) {\n        continue;\n      }\n\n      if (renderer.isBlank && renderer.isBlank()) {\n        continue;\n      }\n\n      if (layer.options['cursor'] !== 'default' && renderer.hitDetect(point)) {\n        cursor = layer.options['cursor'] || 'pointer';\n        break;\n      }\n\n      counter++;\n\n      if (limit > 0 && counter > limit) {\n        break;\n      }\n    }\n\n    map._trySetCursor(cursor);\n  };\n\n  _proto._getLayerImage = function _getLayerImage(layer) {\n    var renderer = layer._getRenderer();\n\n    if (renderer.getCanvasImage) {\n      return renderer.getCanvasImage();\n    }\n\n    return null;\n  };\n\n  _proto.initContainer = function initContainer() {\n    var panels = this.map._panels;\n\n    function createContainer(name, className, cssText, enableSelect) {\n      var c = createEl('div', className);\n\n      if (cssText) {\n        c.style.cssText = cssText;\n      }\n\n      panels[name] = c;\n\n      if (!enableSelect) {\n        preventSelection(c);\n      }\n\n      return c;\n    }\n\n    var containerDOM = this.map._containerDOM;\n\n    if (this._containerIsCanvas) {\n      return;\n    }\n\n    containerDOM.innerHTML = '';\n    var POSITION0 = 'position:absolute;top:0px;left:0px;';\n    var mapWrapper = createContainer('mapWrapper', 'maptalks-wrapper', 'position:absolute;overflow:hidden;', true),\n        mapAllLayers = createContainer('allLayers', 'maptalks-all-layers', POSITION0 + 'padding:0px;margin:0px;z-index:0;overflow:visible;', true),\n        backStatic = createContainer('backStatic', 'maptalks-back-static', POSITION0 + 'z-index:0;', true),\n        back = createContainer('back', 'maptalks-back', POSITION0 + 'z-index:1;'),\n        backLayer = createContainer('backLayer', 'maptalks-back-layer', POSITION0),\n        canvasContainer = createContainer('canvasContainer', 'maptalks-canvas-layer', POSITION0 + 'border:none;z-index:2;'),\n        frontStatic = createContainer('frontStatic', 'maptalks-front-static', POSITION0 + 'z-index:3;', true),\n        front = createContainer('front', 'maptalks-front', POSITION0 + 'z-index:4;', true),\n        frontLayer = createContainer('frontLayer', 'maptalks-front-layer', POSITION0 + 'z-index:0;'),\n        ui = createContainer('ui', 'maptalks-ui', POSITION0 + 'border:none;z-index:1;', true),\n        control = createContainer('control', 'maptalks-control', 'z-index:1', true);\n    containerDOM.appendChild(mapWrapper);\n    mapAllLayers.appendChild(backStatic);\n    back.appendChild(backLayer);\n    back.layerDOM = backLayer;\n    mapAllLayers.appendChild(back);\n    mapAllLayers.appendChild(canvasContainer);\n    front.appendChild(frontLayer);\n    front.layerDOM = frontLayer;\n    front.uiDOM = ui;\n    mapAllLayers.appendChild(frontStatic);\n    mapAllLayers.appendChild(front);\n    front.appendChild(ui);\n    mapWrapper.appendChild(mapAllLayers);\n    mapWrapper.appendChild(control);\n    this.createCanvas();\n    this.resetContainer();\n\n    var mapSize = this.map._getContainerDomSize();\n\n    this.updateMapSize(mapSize);\n  };\n\n  _proto.isViewChanged = function isViewChanged() {\n    if (this._isViewChanged !== undefined) {\n      return this._isViewChanged;\n    }\n\n    var previous = this._mapview;\n\n    var view = this._getMapView();\n\n    this._isViewChanged = !previous || !equalMapView(previous, view);\n    return this._isViewChanged;\n  };\n\n  _proto._recordView = function _recordView() {\n    var map = this.map;\n\n    if (!map._onViewChange || map.isInteracting() || map.isAnimating()) {\n      return;\n    }\n\n    if (!equalMapView(map.getView(), map._getCurrentView())) {\n      map._onViewChange(map.getView());\n    }\n  };\n\n  _proto.isSpatialReferenceChanged = function isSpatialReferenceChanged() {\n    return this._spatialRefChanged;\n  };\n\n  _proto._getMapView = function _getMapView() {\n    var map = this.map;\n\n    var center = map._getPrjCenter();\n\n    return {\n      x: center.x,\n      y: center.y,\n      zoom: map.getZoom(),\n      pitch: map.getPitch(),\n      bearing: map.getBearing(),\n      width: map.width,\n      height: map.height\n    };\n  };\n\n  _proto._frameLoop = function _frameLoop(framestamp) {\n    var _this2 = this;\n\n    if (!this.map) {\n      this._cancelFrameLoop();\n\n      return;\n    }\n\n    this.renderFrame(framestamp);\n    this._animationFrame = requestAnimFrame(function (framestamp) {\n      _this2._frameLoop(framestamp);\n    });\n  };\n\n  _proto._cancelFrameLoop = function _cancelFrameLoop() {\n    if (this._animationFrame) {\n      cancelAnimFrame(this._animationFrame);\n    }\n  };\n\n  _proto._drawLayerCanvasImage = function _drawLayerCanvasImage(layer, layerImage) {\n    var ctx = this.context;\n    var point = layerImage['point'].round();\n    var dpr = this.map.getDevicePixelRatio();\n\n    if (dpr !== 1) {\n      point._multi(dpr);\n    }\n\n    var canvasImage = layerImage['image'];\n    var width = canvasImage.width,\n        height = canvasImage.height;\n\n    if (point.x + width <= 0 || point.y + height <= 0) {\n      return;\n    }\n\n    var op = layer.options['opacity'];\n\n    if (!isNumber(op)) {\n      op = 1;\n    }\n\n    if (op <= 0) {\n      return;\n    }\n\n    var imgOp = layerImage['opacity'];\n\n    if (!isNumber(imgOp)) {\n      imgOp = 1;\n    }\n\n    if (imgOp <= 0) {\n      return;\n    }\n\n    var alpha = ctx.globalAlpha;\n\n    if (op < 1) {\n      ctx.globalAlpha *= op;\n    }\n\n    if (imgOp < 1) {\n      ctx.globalAlpha *= imgOp;\n    }\n\n    if (layer.options['cssFilter']) {\n      ctx.filter = layer.options['cssFilter'];\n    }\n\n    var renderer = layer.getRenderer();\n    var matrix = renderer.__zoomTransformMatrix;\n    var clipped = renderer.clipCanvas(this.context);\n\n    if (matrix) {\n      ctx.save();\n      ctx.setTransform.apply(ctx, matrix);\n    }\n\n    ctx.drawImage(canvasImage, 0, 0, width, height, point.x, point.y, width, height);\n\n    if (matrix) {\n      ctx.restore();\n    }\n\n    if (clipped) {\n      ctx.restore();\n    }\n\n    if (ctx.filter !== 'none') {\n      ctx.filter = 'none';\n    }\n\n    ctx.globalAlpha = alpha;\n  };\n\n  _proto._drawCenterCross = function _drawCenterCross() {\n    var cross = this.map.options['centerCross'];\n\n    if (cross) {\n      var ctx = this.context;\n      var p = new Point(this.canvas.width / 2, this.canvas.height / 2);\n\n      if (isFunction(cross)) {\n        cross(ctx, p);\n      } else {\n        Canvas.drawCross(this.context, p.x, p.y, 2, '#f00');\n      }\n    }\n  };\n\n  _proto._drawContainerExtent = function _drawContainerExtent() {\n    var cascadePitches = this.map.options.cascadePitches;\n\n    var h30 = this.map.height - this.map._getVisualHeight(cascadePitches[0]);\n\n    var h60 = this.map.height - this.map._getVisualHeight(cascadePitches[1]);\n\n    var extent = this.map.getContainerExtent();\n    var ctx = this.context;\n    ctx.beginPath();\n    ctx.moveTo(0, extent.ymin);\n    ctx.lineTo(extent.xmax, extent.ymin);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(0, h30);\n    ctx.lineTo(extent.xmax, h30);\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(0, h60);\n    ctx.lineTo(extent.xmax, h60);\n    ctx.stroke();\n  };\n\n  _proto._drawFog = function _drawFog() {\n    var map = this.map;\n\n    if (map.getPitch() <= map.options['maxVisualPitch'] || !map.options['fog']) {\n      return;\n    }\n\n    var fogThickness = 30;\n    var r = map.getDevicePixelRatio();\n    var ctx = this.context,\n        clipExtent = map.getContainerExtent();\n    var top = (map.height - map._getVisualHeight(75)) * r;\n    if (top < 0) top = 0;\n    var bottom = clipExtent.ymin * r,\n        h = Math.ceil(bottom - top),\n        color = map.options['fogColor'].join();\n    var gradient = ctx.createLinearGradient(0, top, 0, bottom + fogThickness);\n    var landscape = 1 - fogThickness / (h + fogThickness);\n    gradient.addColorStop(0, \"rgba(\" + color + \", 0)\");\n    gradient.addColorStop(0.3, \"rgba(\" + color + \", 0.3)\");\n    gradient.addColorStop(landscape, \"rgba(\" + color + \", 1)\");\n    gradient.addColorStop(1, \"rgba(\" + color + \", 0)\");\n    ctx.beginPath();\n    ctx.fillStyle = gradient;\n    ctx.fillRect(0, top, Math.ceil(clipExtent.getWidth()) * r, Math.ceil(h + fogThickness));\n  };\n\n  _proto._getAllLayerToRender = function _getAllLayerToRender() {\n    return this.map._getLayers();\n  };\n\n  _proto.clearCanvas = function clearCanvas() {\n    if (!this.canvas) {\n      return;\n    }\n\n    Canvas.clearRect(this.context, 0, 0, this.canvas.width, this.canvas.height);\n  };\n\n  _proto._updateCanvasSize = function _updateCanvasSize() {\n    if (!this.canvas || this._containerIsCanvas) {\n      return false;\n    }\n\n    var map = this.map,\n        mapSize = map.getSize(),\n        canvas = this.canvas,\n        r = map.getDevicePixelRatio();\n\n    if (mapSize['width'] * r === canvas.width && mapSize['height'] * r === canvas.height) {\n      return false;\n    }\n\n    canvas.height = r * mapSize['height'];\n    canvas.width = r * mapSize['width'];\n\n    if (canvas.style) {\n      canvas.style.width = mapSize['width'] + 'px';\n      canvas.style.height = mapSize['height'] + 'px';\n    }\n\n    return true;\n  };\n\n  _proto.createCanvas = function createCanvas() {\n    if (this._containerIsCanvas) {\n      this.canvas = this.map._containerDOM;\n    } else {\n      this.canvas = createEl('canvas');\n\n      this._updateCanvasSize();\n\n      this.map._panels.canvasContainer.appendChild(this.canvas);\n    }\n\n    this.context = this.canvas.getContext('2d');\n  };\n\n  _proto._checkSize = function _checkSize() {\n    if (!this.map || this.map.isInteracting()) {\n      return;\n    }\n\n    computeDomPosition(this.map._containerDOM);\n    this.map.checkSize();\n  };\n\n  _proto._setCheckSizeInterval = function _setCheckSizeInterval(interval) {\n    var _this3 = this;\n\n    clearInterval(this._resizeInterval);\n    this._checkSizeInterval = interval;\n    this._resizeInterval = setInterval(function () {\n      if (!_this3.map || _this3.map.isRemoved()) {\n        clearInterval(_this3._resizeInterval);\n      } else {\n        _this3._checkSize();\n      }\n    }, this._checkSizeInterval);\n  };\n\n  _proto._registerEvents = function _registerEvents() {\n    var _this4 = this;\n\n    var map = this.map;\n\n    if (map.options['checkSize'] && !IS_NODE && typeof window !== 'undefined') {\n      this._setCheckSizeInterval(map.options['checkSizeInterval']);\n    }\n\n    if (!Browser$1.mobile) {\n      map.on('_mousemove', this._onMapMouseMove, this);\n    }\n\n    map.on('_dragrotatestart _dragrotating _dragrotateend _movestart _moving _moveend _zoomstart', function (param) {\n      _this4._eventParam = param;\n    });\n    map.on('_zooming', function (param) {\n      if (!map.getPitch()) {\n        _this4._zoomMatrix = param['matrix']['container'];\n      }\n\n      _this4._eventParam = param;\n    });\n    map.on('_zoomend', function (param) {\n      _this4._eventParam = param;\n      delete _this4._zoomMatrix;\n    });\n    map.on('_spatialreferencechange', function () {\n      _this4._spatialRefChanged = true;\n    });\n\n    if (Browser$1.webgl && typeof document !== 'undefined') {\n      addDomEvent(document, 'visibilitychange', this._thisVisibilitychange, this);\n    }\n  };\n\n  _proto._onMapMouseMove = function _onMapMouseMove(param) {\n    var _this5 = this;\n\n    var map = this.map;\n\n    if (map.isInteracting() || !map.options['hitDetect']) {\n      return;\n    }\n\n    if (this._hitDetectFrame) {\n      cancelAnimFrame(this._hitDetectFrame);\n    }\n\n    this._hitDetectFrame = requestAnimFrame(function () {\n      _this5.hitDetect(param['containerPoint']);\n    });\n  };\n\n  _proto._getCanvasLayers = function _getCanvasLayers() {\n    return this.map._getLayers(function (layer) {\n      return layer.isCanvasRender();\n    });\n  };\n\n  _proto._onVisibilitychange = function _onVisibilitychange() {\n    if (document.visibilityState !== 'visible') {\n      return;\n    }\n\n    this.setToRedraw();\n  };\n\n  return MapCanvasRenderer;\n}(MapRenderer);\n\nMap$1.registerRenderer('canvas', MapCanvasRenderer);\nMap$1.mergeOptions({\n  'fog': false,\n  'fogColor': [233, 233, 233]\n});\nvar index$6 = /*#__PURE__*/Object.freeze({\n  ResourceCache: ResourceCache,\n  CanvasRenderer: CanvasRenderer,\n  ImageGLRenderable: ImageGLRenderable,\n  MapRenderer: MapRenderer,\n  MapCanvasRenderer: MapCanvasRenderer,\n  Renderable: Renderable,\n  ImageLayerCanvasRenderer: ImageLayerCanvasRenderer,\n  ImageLayerGLRenderer: ImageLayerGLRenderer,\n  TileLayerCanvasRenderer: TileLayerCanvasRenderer,\n  TileLayerGLRenderer: TileLayerGLRenderer,\n  CanvasTileLayerCanvasRenderer: CanvasRenderer$1,\n  CanvasTileLayerGLRenderer: GLRenderer,\n  OverlayLayerCanvasRenderer: OverlayLayerRenderer,\n  VectorLayerCanvasRenderer: VectorLayerRenderer,\n  CanvasLayerRenderer: CanvasLayerRenderer\n});\nvar CenterPointRenderer = {\n  _getRenderPoints: function _getRenderPoints() {\n    return [[this._getCenter2DPoint(this.getMap().getGLZoom())], null];\n  }\n};\nMarker.include(CenterPointRenderer);\nEllipse.include(CenterPointRenderer);\nCircle.include(CenterPointRenderer);\nSector.include(CenterPointRenderer);\nRectangle.include({\n  _getRenderPoints: function _getRenderPoints(placement) {\n    var map = this.getMap();\n\n    if (placement === 'vertex') {\n      var shell = this._trimRing(this.getShell());\n\n      var points = [];\n\n      for (var i = 0, len = shell.length; i < len; i++) {\n        points.push(map.coordToPoint(shell[i], map.getGLZoom()));\n      }\n\n      return [points, null];\n    } else {\n      var c = map.coordToPoint(this.getCenter(), map.getGLZoom());\n      return [[c], null];\n    }\n  }\n});\nvar PolyRenderer = {\n  _getRenderPoints: function _getRenderPoints(placement) {\n    var map = this.getMap();\n    var glZoom = map.getGLZoom();\n    var points,\n        rotations = null;\n\n    if (placement === 'point') {\n      points = this._getPath2DPoints(this._getPrjCoordinates(), false, glZoom);\n\n      if (points && points.length > 0 && Array.isArray(points[0])) {\n        points = points[0].concat(points[1]);\n      }\n    } else if (placement === 'vertex') {\n      points = this._getPath2DPoints(this._getPrjCoordinates(), false, glZoom);\n      rotations = [];\n\n      if (points && points.length > 0 && Array.isArray(points[0])) {\n        for (var i = 0, l = points.length; i < l; i++) {\n          for (var ii = 0, ll = points[i].length; ii < ll; ii++) {\n            if (ii === 0) {\n              rotations.push([points[i][ii], points[i][ii + 1]]);\n            } else {\n              rotations.push([points[i][ii - 1], points[i][ii]]);\n            }\n          }\n        }\n\n        points = points[0].concat(points[1]);\n      } else {\n        for (var _i = 0, _l = points.length; _i < _l; _i++) {\n          if (_i === 0) {\n            rotations.push([points[_i], points[_i + 1]]);\n          } else {\n            rotations.push([points[_i - 1], points[_i]]);\n          }\n        }\n      }\n    } else if (placement === 'line') {\n      points = [];\n      rotations = [];\n\n      var vertice = this._getPath2DPoints(this._getPrjCoordinates(), false, glZoom),\n          isSplitted = vertice.length > 0 && Array.isArray(vertice[0]);\n\n      if (isSplitted) {\n        var ring;\n\n        for (var _i2 = 1, _l2 = vertice.length; _i2 < _l2; _i2++) {\n          ring = vertice[_i2];\n\n          if (this instanceof Polygon && ring.length > 0 && !ring[0].equals(ring[ring.length - 1])) {\n            ring.push(ring[0]);\n          }\n\n          for (var _ii = 1, _ll = ring.length; _ii < _ll; _ii++) {\n            points.push(ring[_ii].add(ring[_ii - 1])._multi(0.5));\n            rotations.push([ring[_ii - 1], ring[_ii]]);\n          }\n        }\n      } else {\n        if (this instanceof Polygon && vertice.length > 0 && !vertice[0].equals(vertice[vertice.length - 1])) {\n          vertice.push(vertice[0]);\n        }\n\n        for (var _i3 = 1, _l3 = vertice.length; _i3 < _l3; _i3++) {\n          points.push(vertice[_i3].add(vertice[_i3 - 1])._multi(0.5));\n          rotations.push([vertice[_i3 - 1], vertice[_i3]]);\n        }\n      }\n    } else if (placement === 'vertex-first') {\n      var coords = this._getPrjCoordinates();\n\n      points = coords.length ? [map._prjToPoint(coords[0], glZoom)] : [];\n      rotations = coords.length ? [[map._prjToPoint(coords[0], glZoom), map._prjToPoint(coords[1], glZoom)]] : [];\n    } else if (placement === 'vertex-last') {\n      var _coords = this._getPrjCoordinates();\n\n      var _l4 = _coords.length;\n      points = _l4 ? [map._prjToPoint(_coords[_l4 - 1], glZoom)] : [];\n      var current = _l4 - 1,\n          previous = _l4 > 1 ? _l4 - 2 : _l4 - 1;\n      rotations = _l4 ? [[map._prjToPoint(_coords[previous], glZoom), map._prjToPoint(_coords[current], glZoom)]] : [];\n    } else {\n      var pcenter = this._getProjection().project(this.getCenter());\n\n      points = [map._prjToPoint(pcenter, glZoom)];\n    }\n\n    return [points, rotations];\n  }\n};\nLineString.include(PolyRenderer);\nPolygon.include(PolyRenderer);\nGeometry.include({\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return false;\n  },\n  _redrawWhenRotate: function _redrawWhenRotate() {\n    return false;\n  }\n});\nvar el = {\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return true;\n  },\n  _redrawWhenRotate: function _redrawWhenRotate() {\n    return this instanceof Ellipse || this instanceof Sector;\n  },\n  _paintAsPath: function _paintAsPath() {\n    var map = this.getMap();\n    var altitude = this.getAltitude();\n    return altitude > 0 || map.getPitch() || this instanceof Ellipse && map.getBearing();\n  },\n  _getPaintParams: function _getPaintParams() {\n    var map = this.getMap();\n\n    if (this._paintAsPath()) {\n      return Polygon.prototype._getPaintParams.call(this, true);\n    }\n\n    var pcenter = this._getPrjCoordinates();\n\n    var pt = map._prjToPoint(pcenter, map.getGLZoom());\n\n    var size = this._getRenderSize(pt);\n\n    return [pt].concat(size);\n  },\n  _paintOn: function _paintOn() {\n    if (this._paintAsPath()) {\n      return Canvas.polygon.apply(Canvas, arguments);\n    } else {\n      return Canvas.ellipse.apply(Canvas, arguments);\n    }\n  },\n  _getRenderSize: function _getRenderSize(pt) {\n    var map = this.getMap(),\n        z = map.getGLZoom();\n\n    var prjExtent = this._getPrjExtent();\n\n    var pmin = map._prjToPoint(prjExtent.getMin(), z),\n        pmax = map._prjToPoint(prjExtent.getMax(), z);\n\n    return [Math.abs(pmax.x - pmin.x) / 2, Math.abs(pmax.y - pt.y), Math.abs(pt.y - pmin.y)];\n  }\n};\nEllipse.include(el);\nCircle.include(el);\nRectangle.include({\n  _getPaintParams: function _getPaintParams() {\n    var map = this.getMap();\n    var pointZoom = map.getGLZoom();\n\n    var shell = this._getPrjShell();\n\n    var points = this._getPath2DPoints(shell, false, pointZoom);\n\n    return [points];\n  },\n  _paintOn: Canvas.polygon\n});\nSector.include(el, {\n  _redrawWhenPitch: function _redrawWhenPitch() {\n    return true;\n  },\n  _getPaintParams: function _getPaintParams() {\n    if (this._paintAsPath()) {\n      return Polygon.prototype._getPaintParams.call(this, true);\n    }\n\n    var map = this.getMap();\n\n    var pt = map._prjToPoint(this._getPrjCoordinates(), map.getGLZoom());\n\n    var size = this._getRenderSize(pt);\n\n    return [pt, size[0], [this.getStartAngle(), this.getEndAngle()]];\n  },\n  _paintOn: function _paintOn() {\n    if (this._paintAsPath()) {\n      return Canvas.polygon.apply(Canvas, arguments);\n    } else {\n      var r = this.getMap().getBearing();\n      var args = arguments;\n\n      if (r) {\n        args[3] = args[3].slice(0);\n        args[3][0] += r;\n        args[3][1] += r;\n      }\n\n      return Canvas.sector.apply(Canvas, args);\n    }\n  }\n});\nPath.include({\n  _paintAsPath: function _paintAsPath() {\n    return true;\n  }\n});\nLineString.include({\n  arrowStyles: {\n    'classic': [3, 4]\n  },\n  _getArrowShape: function _getArrowShape(prePoint, point, lineWidth, arrowStyle, tolerance) {\n    if (!prePoint || !point || prePoint.equals(point)) {\n      return null;\n    }\n\n    if (!tolerance) {\n      tolerance = 0;\n    }\n\n    var width = lineWidth * arrowStyle[0],\n        height = lineWidth * arrowStyle[1] + tolerance,\n        hw = width / 2 + tolerance;\n    var normal;\n\n    if (point.nextCtrlPoint || point.prevCtrlPoint) {\n      if (point.prevCtrlPoint) {\n        normal = point.sub(new Point(point.prevCtrlPoint));\n      } else {\n        normal = point.sub(new Point(point.nextCtrlPoint));\n      }\n    } else {\n      normal = point.sub(prePoint);\n    }\n\n    normal._unit();\n\n    var p1 = point.sub(normal.multi(height));\n\n    normal._perp();\n\n    var p0 = p1.add(normal.multi(hw));\n\n    normal._multi(-1);\n\n    var p2 = p1.add(normal.multi(hw));\n    return [p0, point, p2, p0];\n  },\n  _getPaintParams: function _getPaintParams() {\n    var prjVertexes = this._getPrjCoordinates();\n\n    var points = this._getPath2DPoints(prjVertexes, false, this.getMap().getGLZoom());\n\n    return [points];\n  },\n  _paintOn: function _paintOn(ctx, points, lineOpacity, fillOpacity, dasharray) {\n    if (this.options['smoothness']) {\n      Canvas.paintSmoothLine(ctx, points, lineOpacity, this.options['smoothness'], false, this._animIdx, this._animTailRatio);\n    } else {\n      Canvas.path(ctx, points, lineOpacity, null, dasharray);\n    }\n\n    this._paintArrow(ctx, points, lineOpacity);\n  },\n  _getArrowPlacement: function _getArrowPlacement() {\n    return this.options['arrowPlacement'];\n  },\n  _getArrowStyle: function _getArrowStyle() {\n    var arrowStyle = this.options['arrowStyle'];\n\n    if (arrowStyle) {\n      return Array.isArray(arrowStyle) ? arrowStyle : this.arrowStyles[arrowStyle];\n    }\n\n    return null;\n  },\n  _getArrows: function _getArrows(points, lineWidth, tolerance) {\n    var arrowStyle = this._getArrowStyle();\n\n    if (!arrowStyle || points.length < 2) {\n      return [];\n    }\n\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n    var segments = isSplitted ? points : [points];\n\n    var placement = this._getArrowPlacement();\n\n    var arrows = [];\n    var map = this.getMap(),\n        first = map.coordToContainerPoint(this.getFirstCoordinate()),\n        last = map.coordToContainerPoint(this.getLastCoordinate());\n\n    for (var i = segments.length - 1; i >= 0; i--) {\n      if (placement === 'vertex-first' || placement === 'vertex-firstlast' && segments[i][0].closeTo(first, 0.01)) {\n        var arrow = this._getArrowShape(segments[i][1], segments[i][0], lineWidth, arrowStyle, tolerance);\n\n        if (arrow) {\n          arrows.push(arrow);\n        }\n      }\n\n      if (placement === 'vertex-last' || placement === 'vertex-firstlast' && segments[i][segments[i].length - 1].closeTo(last, 0.01)) {\n        var _arrow = this._getArrowShape(segments[i][segments[i].length - 2], segments[i][segments[i].length - 1], lineWidth, arrowStyle, tolerance);\n\n        if (_arrow) {\n          arrows.push(_arrow);\n        }\n      } else if (placement === 'point') {\n        this._getArrowPoints(arrows, segments[i], lineWidth, arrowStyle, tolerance);\n      }\n    }\n\n    return arrows;\n  },\n  _getArrowPoints: function _getArrowPoints(arrows, segments, lineWidth, arrowStyle, tolerance) {\n    for (var ii = 0, ll = segments.length - 1; ii < ll; ii++) {\n      var arrow = this._getArrowShape(segments[ii], segments[ii + 1], lineWidth, arrowStyle, tolerance);\n\n      if (arrow) {\n        arrows.push(arrow);\n      }\n    }\n  },\n  _paintArrow: function _paintArrow(ctx, points, lineOpacity) {\n    var lineWidth = this._getInternalSymbol()['lineWidth'];\n\n    if (!isNumber(lineWidth) || lineWidth < 3) {\n      lineWidth = 3;\n    }\n\n    var arrows = this._getArrows(points, lineWidth);\n\n    if (!arrows.length) {\n      return;\n    }\n\n    if (ctx.setLineDash) {\n      ctx.setLineDash([]);\n    }\n\n    for (var i = arrows.length - 1; i >= 0; i--) {\n      ctx.fillStyle = ctx.strokeStyle;\n      Canvas.polygon(ctx, arrows[i], lineOpacity, lineOpacity);\n    }\n  }\n});\nPolygon.include({\n  _getPaintParams: function _getPaintParams(disableSimplify) {\n    var maxZoom = this.getMap().getGLZoom();\n\n    var prjVertexes = this._getPrjShell();\n\n    var points = this._getPath2DPoints(prjVertexes, disableSimplify, maxZoom);\n\n    var isSplitted = points.length > 0 && Array.isArray(points[0]);\n\n    if (isSplitted) {\n      points = [[points[0]], [points[1]]];\n    }\n\n    var prjHoles = this._getPrjHoles();\n\n    var holePoints = [];\n\n    if (prjHoles && prjHoles.length > 0) {\n      var simplified = this._simplified;\n\n      for (var i = 0; i < prjHoles.length; i++) {\n        var hole = this._getPath2DPoints(prjHoles[i], disableSimplify, maxZoom);\n\n        if (Array.isArray(hole) && isSplitted) {\n          if (Array.isArray(hole[0])) {\n            points[0].push(hole[0]);\n            points[1].push(hole[1]);\n          } else {\n            points[0].push(hole);\n          }\n        } else {\n          holePoints.push(hole);\n        }\n      }\n\n      if (simplified) {\n        this._simplified = simplified;\n      }\n    }\n\n    if (!isSplitted) {\n      points = [points];\n      pushIn(points, holePoints);\n    }\n\n    return [points];\n  },\n  _paintOn: function _paintOn(ctx, points, lineOpacity, fillOpacity, dasharray) {\n    Canvas.polygon(ctx, points, lineOpacity, fillOpacity, dasharray, this.options['smoothness']);\n  }\n});\nMap$1.VERSION = version;\nexport { index$1 as Util, dom as DomUtil, strings as StringUtil, index as MapboxUtil, Map$1 as Map, index$4 as ui, index$5 as control, index$6 as renderer, index$3 as symbolizer, Animation$1 as animation, Browser$1 as Browser, Ajax, Canvas, Promise$1 as Promise, Class, Eventable, JSONAble, Handlerable, Handler$1 as Handler, DragHandler, MapTool, DrawTool, AreaTool, DistanceTool, SpatialReference, INTERNAL_LAYER_PREFIX, GEOMETRY_COLLECTION_TYPES, GEOJSON_TYPES, RESOURCE_PROPERTIES, RESOURCE_SIZE_PROPERTIES, NUMERICAL_PROPERTIES, COLOR_PROPERTIES, DEFAULT_TEXT_SIZE, projections as projection, index$2 as measurer, Coordinate, CRS, Extent, Point, PointExtent, Size, Transformation, Layer, TileLayer, GroupTileLayer, WMSTileLayer, CanvasTileLayer, ImageLayer, OverlayLayer, VectorLayer, CanvasLayer, ParticleLayer, TileSystem, TileConfig, ArcCurve, Circle, ConnectorLine, ArcConnectorLine, CubicBezierCurve, Curve, Ellipse, GeoJSON, Geometry, GeometryCollection, Label, LineString, Marker, MultiLineString, MultiPoint, MultiPolygon, Polygon, QuadBezierCurve, Rectangle, Sector, TextBox, TextMarker };"],"sourceRoot":""}