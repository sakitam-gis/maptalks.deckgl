{"version":3,"sources":["webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/loader-utils/dist/esm/lib/path-utils/path.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/memory-copy-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/layers/dist/esm/point-cloud-layer/point-cloud-layer.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/layers/dist/esm/point-cloud-layer/point-cloud-layer-vertex.glsl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/layers/dist/esm/point-cloud-layer/point-cloud-layer-fragment.glsl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/shadertools/dist/esm/modules/pbr/pbr.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/shadertools/dist/esm/modules/pbr/pbr-vertex.glsl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/shadertools/dist/esm/modules/pbr/pbr-fragment.glsl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/experimental/dist/esm/scenegraph/nodes/scenegraph-node.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/experimental/dist/esm/scenegraph/nodes/group-node.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/experimental/dist/esm/gltf/gltf-animator.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/experimental/dist/esm/scenegraph/nodes/model-node.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/experimental/dist/esm/gltf/gltf-material-parser.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/experimental/dist/esm/gltf/create-gltf-model.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/experimental/dist/esm/gltf/gltf-instantiator.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/mesh-layers/dist/esm/scenegraph-layer/gltf-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/mesh-layers/dist/esm/utils/matrix.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/mesh-layers/dist/esm/scenegraph-layer/scenegraph-layer-vertex.glsl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/mesh-layers/dist/esm/scenegraph-layer/scenegraph-layer.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/experimental/dist/esm/gltf/create-gltf-objects.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/mesh-layers/dist/esm/scenegraph-layer/scenegraph-layer-fragment.glsl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/mesh-layers/dist/esm/simple-mesh-layer/simple-mesh-layer.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/mesh-layers/dist/esm/simple-mesh-layer/simple-mesh-layer-vertex.glsl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/mesh-layers/dist/esm/simple-mesh-layer/simple-mesh-layer-fragment.glsl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@math.gl/geospatial/dist/esm/type-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@math.gl/geospatial/dist/esm/constants.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@math.gl/geospatial/dist/esm/ellipsoid/helpers/scale-to-geodetic-surface.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@math.gl/geospatial/dist/esm/ellipsoid/helpers/ellipsoid-transform.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@math.gl/geospatial/dist/esm/ellipsoid/ellipsoid.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/utils/doubly-linked-list-node.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/utils/doubly-linked-list.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/tileset-cache.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/frame-state.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/zoom.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/constants.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/bounding-volume.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/tiles-3d-lod.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/i3s-lod.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/tile-3d.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/utils/managed-array.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/traversers/tileset-traverser.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/traversers/tileset-3d-traverser.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/traversers/i3s-tile-manager.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/traversers/i3s-tilset-traverser.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/tileset-3d.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/tiles/dist/esm/tileset/helpers/transform-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/constants.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/parse-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/draco/dist/esm/lib/draco-module-loader.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/draco/dist/esm/lib/draco-parser.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/draco/dist/esm/draco-loader.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/math/dist/esm/geometry/constants.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/math/dist/esm/geometry/gl/gl-type.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/classes/tile-3d-feature-table.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/classes/helpers/tile-3d-accessor-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@babel/runtime/helpers/esm/readOnlyError.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/classes/tile-3d-batch-table-hierarchy.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/classes/tile-3d-batch-table.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/parse-3d-tile-header.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/parse-3d-tile-tables.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/math/dist/esm/geometry/colors/rgb565.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/normalize-3d-tile-colors.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/math/dist/esm/geometry/utils/assert.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/math/dist/esm/geometry/compression/attribute-compression.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/normalize-3d-tile-normals.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/normalize-3d-tile-positions.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile-point-cloud.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/utils/assert.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/category-api/image-type.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/category-api/parsed-image-api.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/parsers/svg-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-image-bitmap.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/category-api/binary-image-api.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-to-node-image.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/parsers/parse-image.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/image-loader.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/utils/assert.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/resolve-url.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/get-typed-array.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-scenegraph.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/deprecated/binary-image-api-deprecated.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-utils/gltf-attribute-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_draco_mesh_compression.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/gltf-constants.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_lights_punctual.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_materials_unlit.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_techniques_webgl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/gltf-extensions.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/parse-glb.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/extensions/KHR_binary_gltf.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/normalize-gltf-v1.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/post-process-gltf.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/lib/parse-gltf.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/dist/esm/gltf-loader.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/helpers/parse-3d-tile-gltf-view.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile-batched-model.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile-instanced-model.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile-composite.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/parsers/parse-3d-tile-header.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/tiles-3d-loader.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/geo-layers/dist/esm/tile-3d-layer/tile-3d-layer.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/lib/ion/ion.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/3d-tiles/dist/esm/cesium-ion-loader.js","webpack:///./src/pages/3dtiles.tsx","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/loader-utils/dist/esm/lib/parser-utils/parse-json.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/loader-utils/dist/esm/lib/binary-utils/get-first-characters.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/shadertools/dist/esm/modules/lights/lights.glsl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/shadertools/dist/esm/modules/lights/lights.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@math.gl/core/dist/esm/classes/vector2.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/core/dist/esm/lib/composite-layer.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/shadertools/dist/esm/modules/phong-lighting/phong-lighting.glsl.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@luma.gl/shadertools/dist/esm/modules/phong-lighting/phong-lighting.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/loader-utils/dist/esm/categories/mesh/mesh-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/loader-utils/dist/esm/lib/library-utils/library-utils.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@loaders.gl/gltf/node_modules/@loaders.gl/images/dist/esm/lib/utils/globals.js"],"names":["dirname","url","slashIndex","lastIndexOf","substr","padTo4Bytes","byteLength","getZeroOffsetArrayBuffer","arrayBuffer","byteOffset","copyToArray","source","target","targetOffset","sourceArray","ArrayBuffer","Uint8Array","srcByteOffset","srcByteLength","buffer","set","DEFAULT_COLOR","DEFAULT_NORMAL","defaultProps","sizeUnits","pointSize","type","min","value","getPosition","x","position","getNormal","getColor","material","radiusPixels","deprecatedFor","_Layer","PointCloudLayer","this","apply","arguments","key","id","prototype","call","vs","fs","modules","project32","picking","getAttributeManager","addInstanced","instancePositions","size","fp64","use64bitPositions","transition","accessor","instanceNormals","defaultValue","instanceColors","props","colorFormat","length","normalized","_ref","data","header","attributes","oldProps","changeFlags","extensionsChanged","gl","context","state","model","setState","_getModel","invalidateAll","dataChanged","vertexCount","POSITION","NORMAL","COLOR_0","_ref2","uniforms","viewport","_this$props","sizeMultiplier","metersPerPixel","setUniforms","Object","assign","draw","positions","i","angle","Math","PI","push","cos","sin","getShaders","geometry","drawMode","Float32Array","isInstanced","layerName","name","defines","LIGHTING_FRAGMENT","dependencies","ScenegraphNode","undefined","constructor","display","rotation","scale","matrix","userData","_setScenegraphNodeProps","concat","copyMatrix","copy","_ref$update","update","setPosition","setRotation","setScale","updateMatrix","pos","rot","identity","translate","rotateXYZ","viewMatrix","modelMatrix","worldMatrix","multiplyRight","worldInverse","invert","worldInverseTranspose","transpose","objectMatrix","worldInverseMatrix","worldInverseTransposeMatrix","setMatrix","_ScenegraphNode","GroupNode","_this","_props","Array","isArray","children","_props$children","assert","every","child","_len","_key","_i","_children","add","indexOf","splice","forEach","removeAll","visitor","_ref$worldMatrix","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","traverse","err","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","5120","Int8Array","5121","5122","Int16Array","5123","Uint16Array","5125","Uint32Array","5126","accessorToJsArray","_animation","ArrayType","componentType","components","count","_accessor$bufferView$","bufferView","array","from","slicedArray","slice","helperMatrix","quaternion","interpolate","time","path","input","interpolation","output","animationTime","nextIndex","findIndex","t","previousIndex","max","warn","previousTime","nextTime","stepInterpolate","ratio","start","stop","slerp","linearInterpolate","_ratio","tDiff","p0","outTangent0","inTangent1","p1","m0","m1","pow","cubicsplineInterpolate","GLTFAnimation","startTime","playing","speed","timeMs","channels","_ref3","sampler","gltfNode","node","translation","rotationMatrix","fromQuaternion","applyTranslationRotationScale","_node","GLTFAnimator","gltf","animations","map","animation","index","samplers","_ref4","_ref4$interpolation","accessors","_ref5","nodes","setTime","animate","ModelNode","onBeforeRender","AfterRender","_setModelNodeProps","managedResources","resource","_this$model","_this$model2","_this$model3","setAttributes","_this$model4","updateModuleSettings","setProps","GLTFMaterialParser","pbrDebug","imageBasedLightingEnvironment","lights","useTangents","MANUAL_SRGB","SRGB_FAST_APPROXIMATION","GLSL_TEXTURE_LOD","USE_TEX_LOD","u_Camera","u_MetallicRoughnessValues","parameters","generatedTextures","u_DiffuseEnvSampler","getDiffuseEnvSampler","u_SpecularEnvSampler","getSpecularEnvSampler","u_brdfLUT","getBrdfTexture","u_ScaleIBLAmbient","u_ScaleDiffBaseMR","u_ScaleFGDSpec","defineIfPresent","TANGENT","TEXCOORD_0","parseMaterial","gltfTexture","define","texture","pixelStore","UNPACK_FLIP_Y_WEBGL","image","pbrMetallicRoughness","baseColorTexture","parseTexture","u_BaseColorFactor","baseColorFactor","metallicRoughnessTexture","_pbrMetallicRoughness","metallicFactor","_pbrMetallicRoughness2","roughnessFactor","parsePbrMetallicRoughness","normalTexture","_material$normalTextu","u_NormalScale","occlusionTexture","_material$occlusionTe","strength","u_OcclusionStrength","emissiveTexture","u_EmissiveFactor","emissiveFactor","alphaMode","_material$alphaCutoff","alphaCutoff","ALPHA_CUTOFF","u_AlphaCutoff","blend","blendEquation","FUNC_ADD","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE","addVersionToShader","DEFAULT_OPTIONS","modelOptions","GLTFInstantiator","options","scenes","scene","createScene","gltfScene","_this2","createNode","_this3","mesh","createMesh","gltfMesh","_this4","_mesh","primitives","gltfPrimitive","createPrimitive","materialParser","info","values","attribute","pbr","createGLTFModel","mode","indices","getVertexCount","createAttributes","_this5","loadedAttributes","keys","attrName","createAccessor","createBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","generated","lumaBuffers","offset","stride","byteStride","gltfSampler","_waitForGLTFAssets","mark","_callee","gltfObjects","remaining","wrap","_context","prev","getUniforms","uniform","loaded","waitWhileCondition","some","abrupt","sent","_x2","_waitWhileCondition","_callee2","condition","_context2","Promise","resolve","requestAnimationFrame","RADIAN_PER_DEGREE","valueArray","calculateTransformMatrix","targetMatrix","orientation","pitch","yaw","roll","sr","sp","sw","cr","cp","cw","scx","scy","scz","getExtendedMat3FromMat4","mat4","subarray","MATRIX_ATTRIBUTES","shaderAttributes","instanceModelMatrix__LOCATION_0","elementOffset","instanceModelMatrix__LOCATION_1","instanceModelMatrix__LOCATION_2","instanceTranslation","startRow","endRow","getOrientation","getScale","getTranslation","getTransformMatrix","arrayMatrix","constantMatrix","constantScale","constantOrientation","constantTranslation","hasMatrix","Boolean","constant","instanceModelMatrixData","_createIterable","iterable","objectInfo","object","_matrix","shouldComposeModelMatrix","coordinateSystem","CARTESIAN","METER_OFFSETS","DEFAULT","isGeospatial","scenegraph","async","getScene","getAnimator","animator","_animations","sizeScale","sizeMinPixels","sizeMaxPixels","Number","MAX_SAFE_INTEGER","_lighting","_imageBasedLightingEnvironment","ScenegraphLayer","instanceModelMatrix","params","_updateScenegraph","_applyAnimationsProp","_deleteScenegraph","scenegraphData","instantiator","instantiate","createAnimator","createGLTFObjects","getLoadOptions","_x","waitForGLTFAssets","then","setNeedsRedraw","log","deprecated","layer","_applyAllAttributes","attributesAvailable","allAttributes","getAttributes","_setModelAttributes","animationsProp","getAnimations","sort","isFinite","number","findResult","find","env","waitForFullLoad","transpileToGLSL100","changedAttributes","_ref2$moduleParameter","moduleParameters","_ref2$parameters","animationProps","_this$props2","opacity","numInstances","getNumInstances","setInstanceCount","composeModelMatrix","sceneModelMatrix","project_uCameraPosition","validateGeometryAttributes","useMeshColors","colors","getGeometry","Error","_useMeshColors","depthTest","depthFunc","_instanced","wireframe","SimpleMeshLayer","GLSL_DERIVATIVES","DERIVATIVES_AVAILABLE","emptyTexture","width","height","getModel","hasNormals","normals","setTexture","setDrawMode","flatShading","_this$state","hasTexture","_this$state2","opts","getTextureFromData","noop","scratchVector","fromCartographic","cartographic","result","longitude","latitude","y","z","fromCartographicToRadians","vector","_cartographicRadians","toCartographic","toCartographicFromRadians","scaleToGeodeticSurfaceIntersection","scaleToGeodeticSurfaceGradient","scratchOrigin","VECTOR_PRODUCT_LOCAL_FRAME","up","south","north","west","east","down","degeneratePositionLocalFrame","scratchAxisVectors","scratchVector3","ellipsoid","firstAxis","secondAxis","thirdAxis","cartesianOrigin","firstAxisVector","secondAxisVector","thirdAxisVector","thirdAxisInferred","origin","sign","fromArray","normalize","geodeticSurfaceNormal","cross","wgs84","scratchNormal","scratchK","scratchHeight","scratchCartesian","Ellipsoid","radii","radiiSquared","radiiToTheFourth","oneOverRadii","oneOverRadiiSquared","minimumRadius","maximumRadius","centerToleranceSquared","EPSILON1","squaredXOverSquaredZ","freeze","get","right","equals","toString","normal","k","_cartographic","geodeticSurfaceNormalCartographic","gamma","sqrt","dot","to","cartesian","point","scaleToGeodeticSurface","h","subtract","atan2","asin","vec3","cartographicVectorRadians","cosLatitude","positionX","positionY","positionZ","oneOverRadiiX","oneOverRadiiY","oneOverRadiiZ","x2","y2","z2","squaredNorm","intersection","oneOverRadiiSquaredX","oneOverRadiiSquaredY","oneOverRadiiSquaredZ","gradient","xMultiplier","yMultiplier","zMultiplier","func","lambda","len","correction","xMultiplier2","yMultiplier2","zMultiplier2","xMultiplier3","yMultiplier3","zMultiplier3","denominator","derivative","abs","EPSILON12","beta","multiplyScalar","EPSILON15","DoublyLinkedListNode","item","previous","DoublyLinkedList","head","tail","_length","nextNode","remove","_insert","oldNodeNext","defined","TilesetCache","_list","_sentinel","_trimTiles","tile","_cacheNode","tileset","addCallback","unloadCallback","trimTiles","list","maximumMemoryUsageInBytes","maximumMemoryUsage","sentinel","gpuMemoryUsageInBytes","unloadTile","cullingVolume","getFrameState","frameNumber","cameraDirection","cameraUp","metersPerUnit","distanceScales","viewportCenterCartographic","viewportCenterCartesian","WGS84","cartographicToCartesian","enuToFixedTransform","eastNorthUpToFixedFrame","cameraPositionCartographic","unprojectPosition","cameraPosition","cameraPositionCartesian","cameraDirectionCartesian","transformAsVector","cameraUpCartesian","frustumPlanes","getFrustumPlanes","dir","plane","distanceToCenter","center","distance","cartographicPos","cartesianPos","planes","fromPointNormal","commonSpacePlanesToWGS84","camera","direction","sseDenominator","TILE_CONTENT_STATE","TILE_REFINEMENT","TILE_TYPE","TILESET_TYPE","LOD_METRIC_TYPE","TILE3D_OPTIMIZATION_HINT","scratchScale","scratchNorthWest","scratchSouthEast","createBoundingVolume","boundingVolumeHeader","transform","box","xAxis","yAxis","zAxis","halfAxes","createBox","region","_boundingVolumeHeader","minHeight","maxHeight","northWest","southEast","centerInCartesian","addVectors","radius","subVectors","createSphere","sphere","uniformScale","getDynamicScreenSpaceError","distanceToCamera","dynamicScreenSpaceError","_dynamicScreenSpaceErrorComputedDensity","density","factor","dynamicScreenSpaceErrorFactor","scalar","exp","fog","qualityFactor","projectVertexToSphere","azim","incl","radCosInc","getDistanceFromLatLon","observerLon","observerLat","_ref5$","observerZ","_ref6","centerLon","centerLat","_ref6$","projectedCenter","projectedObserver","dx","dy","dz","getI3ScreenSize","frameState","mbsLat","mbs","mbsCenter","mbsRNormalized","d","screenSizeFactor","_frameState$viewport","pixelProjectionMatrix","tanOfHalfVFAngle","tan","atan","calculateScreenSizeFactor","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","getOwnPropertyDescriptors","defineProperties","defineProperty","TileHeader","parentHeader","parent","refine","_getRefine","contentUrl","lodMetricType","lodMetricValue","boundingVolume","content","contentState","depth","_frameNumber","_initializeLodMetric","_initializeTransforms","_initializeBoundingVolumes","_initializeContent","_initializeRenderingState","_lodJudge","_expireDate","_expiredContent","_getPriority","bind","seal","_loadContent","useParentLodMetric","parentLodMetricValue","_distanceToCamera","error","getTiles3DScreenSpaceError","console","isVisible","_priority","requestToken","fetchOptions","loader","hasEmptyContent","contentExpired","_requestScheduler","scheduleRequest","getTileUrl","isTileset","isTileHeader","load","_isTileset","_initializeTileHeaders","_onContentLoaded","t0","finish","destroy","parentTransform","computedTransform","parentVisibilityPlaneMask","_visibilityPlaneMask","MASK_INDETERMINATE","_updateTransform","distanceToTile","_screenSpaceError","getScreenSpaceError","visibility","_visible","MASK_OUTSIDE","_inRequestVolume","insideViewerRequestVolume","computeVisibilityWithPlaneMask","distanceSquaredTo","viewerRequestVolume","_viewerRequestVolume","tileHeader","clone","parentInitialTransform","_initialTransform","_contentBoundingVolume","_updateBoundingVolume","_tileset","_tile","hasTilesetContent","level","_shouldRefine","_centerZDepth","_stackLength","_selectionDepth","_touchedFrame","_visitedFrame","_selectedFrame","_requestedFrame","traverser","disableSkipLevelOfDetail","didTransformChange","contentReady","now","Date","lessThan","hasRenderContent","contentFailed","contentUnloaded","extras","ManagedArray","_array","_map","Map","element","has","_createForOfIteratorHelper","o","allowArrayLike","it","minLen","_arrayLikeToArray","n","test","_unsupportedIterableToArray","F","s","e","_e","f","TypeError","normalCompletion","didErr","step","_e2","arr","arr2","loadSiblings","skipLevelOfDetail","maximumScreenSpaceError","TilesetTraverser","_traversalStack","_emptyTraversalStack","root","selectedTiles","requestedTiles","emptyTiles","reset","updateTile","executeTraversal","stack","pop","shouldRefine","canTraverse","updateChildTiles","updateAndPushChildren","parentRefines","stoppedRefining","loadTile","selectTile","touchTile","onTraversalEnd","_this$options","compareDistanceToCamera","_step2","checkRefines","hasVisibleChild","_iterator2","isVisibleAndInRequestVolume","childRefines","contentAvailable","executeEmptyTraversal","updateTileVisibility","shouldSelectTile","shouldLoadTile","getPriority","_cache","touch","useParentMetric","ignoreVisibility","hasChildren","hasUnloadedContent","screenSpaceError","updateVisibility","b","a","_step3","anyVisible","_iterator3","allDescendantsLoaded","_step4","_iterator4","c","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","_isNativeReflectConstruct","Super","NewTarget","_TilesetTraverser","Tileset3DTraverser","_super","firstChild","meetsScreenSpaceErrorEarly","replace","useOptimization","_optimChildrenWithinParent","anyChildrenVisible","STATUS","I3STileManager","_statusMap","request","callback","status","I3STilesetTraverser","_loadTile2","_tileManager","mbsLon","mbsZ","mbsR","viewportCenter","mbsLatProjected","mbsLonProjected","diagonalInMeters","visibleHeight","visibleWidth","screenSize","lodJudge","childTiles","_loop","childTile","_loadTile","_onTileLoad","nodeId","nodeUrl","i3s","loadContent","basePath","throttleRequests","onTileLoad","onTileUnload","onTileError","message","Tileset3D","json","headers","token","cartographicCenter","cartesianCenter","zoom","_traverser","_initializeTraverser","_updateFrameNumber","_pendingCount","_tiles","_emptyTiles","_requestedTiles","_selectedTilesToStyle","_queryParams","_queryParamsString","stats","_initializeStats","_hasMixedContent","_maximumScreenSpaceError","_properties","_extensionsUsed","_gltfUpAxis","asset","credits","description","_defaultGeometrySchema","_initializeTileSet","_destroy","tilePath","startsWith","queryParams","_frameState","_tilesChanged","_loadTiles","_unloadTiles","_updateStats","oldSelectedTiles","set1","Set","set2","changed","unloadTiles","_unloadTile","tilesRenderable","pointsRenderable","pointCount","tilesetJson","_initializeCesiumTileset","_initializeI3STileset","_calculateViewProps","cartesianToCartographic","getColumn","halfX","halfY","halfZ","log2","getZoomFromBoundingVolume","parentTileHeader","rootTile","incrementCount","childHeader","TraverserClass","_onTraversalEnd","parentTile","_destroySubtree","_onStartTileLoading","_onTileLoadError","_onEndTileLoading","rtcCenter","rotateYtoZ","rotateX","isQuantized","quantizedVolumeOffset","quantizedVolumeScale","cartesianModelMatrix","cartographicOrigin","toFixedFrameMatrix","cartographicModelMatrix","calculateTransformProps","_addTileToCache","decrementCount","_updateCacheStats","unloadContent","_step5","_iterator5","_destroyTile","_step6","_iterator6","version","v","tilesetVersion","attributions","properties","geometricError","extensionsUsed","store","defaultGeometrySchema","extensionName","queryParamStrings","_Object$keys","join","getQueryParamString","TILE3D_TYPE","COMPOSITE","POINT_CLOUD","BATCHED_3D_MODEL","INSTANCED_3D_MODEL","GEOMETRY","VECTOR","getStringFromArrayBuffer","textDecoder","TextDecoder","typedArray","decode","getMagicString","dataView","DataView","String","fromCharCode","getUint8","loadDecoderPromise","loadDracoDecoderModule","_loadDracoDecoderModule","draco3d","draco","createDecoderModule","loadDracoDecoder","_x3","_loadDracoDecoder","_callee3","DracoDecoderModule","wasmBinary","_yield$Promise$all","_yield$Promise$all2","_context3","decoderType","t1","t2","t3","t4","all","initializeDracoDecoder","onModuleLoaded","GEOMETRY_TYPE","DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP","COLOR","TEX_COORD","DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP","1","2","3","4","5","Int32Array","6","9","DracoParser","dracoGeometry","DecoderBuffer","Init","dracoStatus","decoder","Decoder","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","Mesh","DecodeBufferToMesh","faceCount","num_faces","attributeCount","num_attributes","num_points","PointCloud","DecodeBufferToPointCloud","ok","ptr","error_msg","loaderData","extractDRACOGeometry","boundingBox","positionAttribute","getPositionAttributeMetadata","getMeshStripIndices","getMeshFaceIndices","metadata","posTransform","AttributeQuantizationTransform","InitFromAttribute","maxRange","range","numQuantizationBits","quantization_bits","minValues","min_value","numPoints","attributeName","attributeType","attributeId","GetAttributeId","dracoAttribute","GetAttribute","getAttributeTypedArray","numFaces","dracoArray","DracoInt32Array","GetFaceFromMesh","GetValue","GetTriangleStripsFromMesh","data_type","numComponents","num_components","numValues","DracoFloat32Array","GetAttributeFloatForAllPoints","DracoInt8Array","GetAttributeInt8ForAllPoints","DracoInt16Array","GetAttributeInt16ForAllPoints","GetAttributeInt32ForAllPoints","DracoUInt8Array","GetAttributeUInt8ForAllPoints","DracoUInt16Array","GetAttributeUInt16ForAllPoints","DracoUInt32Array","GetAttributeUInt32ForAllPoints","parseSync","DracoLoader","extensions","mimeTypes","binary","tests","WebAssembly","libraryPath","workerUrl","localWorkerUrl","parse","_x4","_yield$loadDracoDecod","dracoParser","_GL_TYPE_TO_ARRAY_TYP","GL_TYPE","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","DOUBLE","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","GL_TYPE_TO_ARRAY_TYPE","Float64Array","NAME_TO_GL_TYPE","GLType","arrayOrType","glType","isView","UNSIGNED_SHORT_5_6_5","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","getArrayType","BYTES_PER_ELEMENT","getByteSize","Tile3DFeatureTable","featureTableJson","featureTableBinary","featuresLength","_cachedTypedArrays","propertyName","componentLength","jsonValue","_getTypedArrayFromBinary","fromName","_getTypedArrayFromArray","featureId","getPropertyArray","cachedTypedArrays","createTypedArray","COMPONENTS_PER_ATTRIBUTE","UNPACKER","PACKER","_readOnlyError","initializeHierarchy","batchTable","jsonHeader","binaryBody","hierarchy","getExtension","legacyHierarchy","HIERARCHY","hierarchyJson","classId","binaryAccessor","parentIndexes","instancesLength","classes","classIds","parentCounts","parentIds","parentIdsLength","GL","AttributeType","getBinaryAccessor","createArrayBufferView","classesLength","classInstancesLength","instances","binaryProperties","getBinaryProperties","combine","classCounts","fill","classIndexes","validateInstance","validateHierarchy","initializeHierarchyValues","traverseHierarchy","instanceIndex","endConditionCallback","visited","scratchVisited","visitedMarker","marker","scratchStack","parentCount","parentIndex","parentId","traverseHierarchyMultipleParents","hasParent","traverseHierarchySingleParent","IGNORED_PROPERTY_FIELDS","Tile3DBatchTableParser","featureCount","_extensions","_binaryProperties","_initializeBinaryProperties","_hierarchy","batchId","className","_checkBatchId","getExactClassName","_hasPropertyInHierarchy","results","_results","propertyNames","_getPropertyNamesInHierarchy","binaryProperty","_getBinaryProperty","propertyValues","hierarchyProperty","_getHierarchyProperty","_setBinaryProperty","_setHierarchyProperty","unpack","pack","property","_initializeBinaryProperty","tile3DAccessor","unpacker","packer","createTypedArrayFromAccessor","componentCount","hasOwnProperty","instanceClass","indexInClass","parse3DTileHeaderSync","view","magic","getUint32","parse3DTileTablesHeaderSync","featureTableJsonByteLength","featureTableBinaryByteLength","batchTableJsonByteLength","batchTableBinaryByteLength","parse3DTileTablesSync","_tile$header","BATCH_LENGTH","featureTableString","JSON","parse3DTileFeatureTable","_tile$header2","batchTableString","batchTableJson","batchTableBinary","parse3DTileBatchTable","decodeRGB565","rgb565","r5","g6","b5","normalize3DTileColorAttribute","batchIds","isRGB565","colorArray","Uint8ClampedArray","color","getProperty","_colorArray","_color","fromSNorm","rangeMaximum","signNotZero","octDecodeInRange","rangeMax","oldVX","octDecode","normalize3DTilePositionAttribute","decodeQuantizedPositions","scratchPosition","decodedArray","quantizedRange","multiply","toArray","parsePointCloud3DTile","_x5","_parsePointCloud3DTile","_parsePointCloudTable","featureTable","initializeTile","parsePointCloudTables","parseDraco","parsePositions","parseColors","parseNormals","isTranslucent","isOctEncoded16P","pointsLength","getGlobalProperty","hasProperty","batchFeatureLength","parseBatchIds","constantRGBA","normalize3DTileNormalAttribute","_x6","_x7","_x8","_x9","_x10","_parseDraco","dracoBuffer","dracoFeatureTableProperties","dracoBatchTableProperties","batchTableDraco","featureTableDraco","dracoByteOffset","dracoByteLength","dracoData","hasPositions","hasColors","RGB","RGBA","hasBatchIds","BATCH_ID","featureTableProperties","batchTableProperties","dequantizeInShader","loadDraco","_x11","_x12","_x13","_x14","_loadDraco","decodedPositions","decodedColors","decodedNormals","decodedBatchIds","isQuantizedDraco","isOctEncodedDraco","quantization","quantizationBits","octEncodedRange","_parseImageNode","IMAGE_SUPPORTED","Image","IMAGE_BITMAP_SUPPORTED","ImageBitmap","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","getImageType","format","getImageTypeOrNull","getImageData","canvas","document","createElement","getContext","drawImage","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlobOrSVGDataUrl","xmlText","btoa","getBlob","Blob","parseToImage","_parseToImage","blobOrDataUrl","URL","objectUrl","self","webkitURL","createObjectURL","loadToImage","revokeObjectURL","_loadToImage","src","reject","onload","onerror","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","_parseToImageBitmap","blob","imagebitmapOptions","imagebitmap","safeCreateImageBitmap","_safeCreateImageBitmap","_args2","isEmptyObject","createImageBitmap","getBinaryImageMetadata","binaryData","toDataView","mimeType","getPngMetadata","getUint16","_getJpegMarkers","tableMarkers","sofMarkers","getJpegMarkers","getJpegMetadata","getGifMetadata","getBmpMetadata","parseToNodeImage","_parseImage","imageOptions","imageType","loadType","getLoadableImageType","getDefaultImageType","isImageTypeSupported","resolveUrl","baseUrl","baseUri","uri","buffers","bufferViewIndex","bufferViews","binChunk","TYPES","ARRAY_TO_COMPONENT_TYPE","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","getAccessorTypeFromSize","getComponentTypeFromArray","getAccessorArrayTypeAndLength","bytesPerComponent","GLTFScenegraph","generator","isExtension","getUsedExtensions","getRequiredExtensions","extensionsRequired","getObject","bufferIndex","getBufferView","getAccessor","getBuffer","_getAccessorArrayType","registerUsedExtension","extension","extensionData","addExtension","registerRequiredExtension","ext","_removeStringFromArray","_addAttributes","glTFMesh","meshes","imageData","glTFImage","addBufferView","images","sourceBuffers","glTFBufferView","glTFAccessor","sourceBuffer","accessorDefaults","round","addAccessor","totalByteLength","targetArray","dstByteOffset","string","found","getGLTFAccessors","getGLTFAccessor","gltfAttributeName","_getAccessorData","convertTypedArrays","toTypedArray","getAccessorData","_marked","makeMeshPrimitiveIterator","_decode","gltfData","promises","primitive","decompressMeshes","getObjectExtension","decompressPrimitive","removeExtension","encode","compressMesh","addRequiredExtension","_decompressPrimitive","compressedPrimitive","bufferCopy","decodedData","getTypedArrayForBufferView","checkPrimitive","DracoWriter","compressedData","encodeSync","fauxAccessors","_addFauxAttributes","gltfScenegraph","nodeExtension","light","removeObjectExtension","addObjectExtension","materials","KHR_materials_unlit","unlit","techniques","_ref$programs","programs","_ref$shaders","shaders","_ref$techniques","shader","code","program","fragmentShader","vertexShader","technique","resolveTechniques","materialExtension","resolveValues","getTexture","KHR_draco_mesh_compression","KHR_lights_punctual","KHR_techniques_webgl","decodeExtensions","_decodeExtensions","excludes","_args","excludeExtensions","isGLB","_options$magic","magic1","parseGLBV1","glb","GLB_FILE_HEADER_SIZE","contentLength","contentFormat","parseJSONChunk","parseBINChunk","parseGLBV2","chunkLength","chunkFormat","strict","parseGLBChunksSync","jsonChunk","jsonText","hasBinChunk","binChunks","_DEFAULT_SAMPLER","GLTF_ARRAYS","skins","textures","GLTF_KEYS","skin","GLTFV1Normalizer","idToIndexMap","_addAsset","_convertTopLevelObjectsToArrays","_convertObjectIdsToArrayIndices","_updateObjects","arrayName","_convertTopLevelObjectToArray","mapName","objectMap","_convertIdsToIndices","_convertIdToIndex","_convertTextureIds","_convertMeshIds","_convertNodeIds","_convertSceneIds","topLevelArrayName","_step7","_iterator7","normalizeGLTFV1","GL_SAMPLER","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","REPEAT","LINEAR","NEAREST_MIPMAP_LINEAR","SAMPLER_PARAMETER_GLTF_TO_GL","magFilter","minFilter","wrapS","wrapT","DEFAULT_SAMPLER","TEXTURE_WRAP_","GLTFPostProcessor","_gltf$buffers","_gltf$images","_gltf$baseUri","_resolveTree","bufView","_resolveBufferView","_resolveImage","_resolveSampler","_resolveTexture","_resolveAccessor","_resolveMaterial","_resolveMesh","_resolveNode","_resolveSkin","_resolveScene","_get","getNode","getMesh","getCamera","getSkin","inverseBindMatrices","getMaterial","occlustionTexture","emmisiveTexture","mr","bytesPerElement","getSampler","getImage","glEnum","_enumSamplerParameter","preloadedImage","perspective","orthographic","postProcessGLTF","postProcess","parseGLTF","_parseGLTF","arrayBufferOrString","_promise","promise","parseGLTFContainerSync","loadImages","loadBuffers","parseGLBSync","_glb","_loadBuffers","fetch","response","_loadImages","loadImage","_loadImage","_callee4","parsedImage","_context4","GLTFLoader","text","deprecatedOptions","fetchImages","createImages","decompress","_options$byteOffset","addDeprecatedGLTFOptions","fetchBuffers","fetchLinkedResources","GLTF_FORMAT","parse3DTileGLTFViewSync","gltfByteLength","gltfArrayBuffer","gltfByteOffset","extractGLTF","_extractGLTF","gltfFormat","tile3DOptions","extractGLTFBufferOrURL","loadGLTF","gltfUrl","gltfUrlBytes","parseBatchedModel3DTile","_parseBatchedModel3DTile","parseBatchedModel","CESIUM_RTC","parseInstancedModel3DTile","_parseInstancedModel3DTile","parseInstancedModel","eastNorthUp","_batchTable","collectionOptions","instancePosition","instanceRotation","instanceQuaternion","instanceScale","instanceTranslationRotationScale","instanceTransform","scratch1","scratch2","scratchVector1","scratchVector2","j","normalUp","normalRight","hasCustomOrientation","octNormalUp","octNormalRight","getRotationMatrix3","fromMatrix3","multiplyByScalar","nonUniformScale","extractInstancedAttributes","parseComposite3DTile","_parseComposite3DTile","parse3DTile","subtile","tilesLength","tiles","_parse3DTile","normalizeTileData","contentUri","transformMatrix","fileExtension","split","getTileType","getRefine","normalizeTileHeaders","getBaseUri","parseTile","_parseTile","parseTileset","_parseTileset","Tiles3DLoader","loaderOptions","scratchOffset","getPointColor","loadOptions","onTilesetLoad","tileset3d","_CompositeLayer","Tile3DLayer","_loadTileset2","removed","layerMap","somethingChanged","_loadTileset","viewportChanged","_updateTileset","sourceLayer","layerId","substring","tileId","tilesetUrl","preloadOptions","preload","_onTileUnload","onTileLoadFail","setNeedsUpdate","_this$context","timeline","_createPointCloudTileLayer","_create3DModelTileLayer","_createSimpleMeshLayer","_tileHeader$content","getSubLayerClass","getSubLayerProps","coordinateOrigin","_tileHeader$content2","instance","texCoords","selected","_create3DTileLayer","visible","CESIUM_ION_URL","getIonTilesetMetadata","_getIonTilesetMetadata","accessToken","assetId","assets","ionAssetMetadata","getIonAssets","items","getIonAssetMetadata","Authorization","_getIonAssets","_getIonAssetMetadata","tilesetInfo","_preload","matched","match","_parse","CesiumIonLoader","C3DTiles","setInitialViewState","deckLayer","viewState","bearing","initMap","DeckGLLayer","layers","forceRenderOnMoving","forceRenderOnZooming","addLayer","componentWillUnmount","Base","parseJSON","_","getFirstCharacters","INITIAL_MODULE_OPTIONS","lightSources","ambientLight","pointLights","directionalLights","hasLights","getLightSourceUniforms","lighting_uEnabled","MAX_LIGHTS","convertColor","_ref$color","_ref$intensity","intensity","component","_ref2$pointLights","_ref2$directionalLigh","lightSourceUniforms","pointLight","attenuation","lighting_uPointLightCount","directionalLight","lighting_uDirectionalLightCount","Vector2","_Vector","debug","check","matrix4","transformAsPoint","matrix3","matrix2x3","matrix2","CompositeLayer","internalState","subLayers","updateObject","__source","overridingProps","_subLayerProps","DefaultLayerClass","row","sourceObject","sourceObjectIndex","sublayerProps","pickable","getPolygonOffset","highlightedObjectIndex","autoHighlight","highlightColor","wrapLongitude","positionFormat","newProps","overridingSublayerProps","overridingSublayerTriggers","updateTriggers","sublayerId","propTypes","_propTypes","propType","getSubLayerAccessor","passThroughProps","shouldUpdate","needsUpdate","renderLayers","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","getSubLayers","isLoaded","gouraudLighting","LIGHTING_VERTEX","phongLighting","getMaterialUniforms","_material$ambient","ambient","_material$diffuse","diffuse","_material$shininess","shininess","_material$specularCol","specularColor","lighting_uAmbient","lighting_uDiffuse","lighting_uShininess","lighting_uSpecularColor","getMeshBoundingBox","minX","Infinity","minY","minZ","maxX","maxY","maxZ","loadLibraryPromises","loadLibrary","_loadLibrary","libraryUrl","moduleName","getLibraryUrl","loadLibraryFromFile","library","CDN","_loadLibraryFromFile","_response","scriptSource","endsWith","importScripts","loadLibraryFromString","eval","script","appendChild","createTextNode","body","globals","window","global","global_","isBrowser","process","browser","matches","parseFloat"],"mappings":"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","file":"component---src-pages-3-dtiles-tsx-55fd25a2ba781e026ffe.js","sourcesContent":["export function dirname(url) {\n  var slashIndex = url && url.lastIndexOf('/');\n  return slashIndex >= 0 ? url.substr(0, slashIndex) : '';\n}","import { sliceArrayBuffer } from './array-buffer-utils';\nexport function padTo4Bytes(byteLength) {\n  return byteLength + 3 & ~3;\n}\nexport function getZeroOffsetArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  return sliceArrayBuffer(arrayBuffer, byteOffset, byteLength);\n}\nexport function copyArrayBuffer(targetBuffer, sourceBuffer, byteOffset) {\n  var byteLength = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : sourceBuffer.byteLength;\n  var targetArray = new Uint8Array(targetBuffer, byteOffset, byteLength);\n  var sourceArray = new Uint8Array(sourceBuffer);\n  targetArray.set(sourceArray);\n  return targetBuffer;\n}\nexport function copyToArray(source, target, targetOffset) {\n  var sourceArray;\n\n  if (source instanceof ArrayBuffer) {\n    sourceArray = new Uint8Array(source);\n  } else {\n    var srcByteOffset = source.byteOffset;\n    var srcByteLength = source.byteLength;\n    sourceArray = new Uint8Array(source.buffer, srcByteOffset, srcByteLength);\n  }\n\n  target.set(sourceArray, targetOffset);\n  return targetOffset + padTo4Bytes(sourceArray.byteLength);\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { Layer, project32, gouraudLighting, picking } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/core';\nimport vs from './point-cloud-layer-vertex.glsl';\nimport fs from './point-cloud-layer-fragment.glsl';\nvar DEFAULT_COLOR = [0, 0, 0, 255];\nvar DEFAULT_NORMAL = [0, 0, 1];\nvar defaultProps = {\n  sizeUnits: 'pixels',\n  pointSize: {\n    type: 'number',\n    min: 0,\n    value: 10\n  },\n  getPosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.position;\n    }\n  },\n  getNormal: {\n    type: 'accessor',\n    value: DEFAULT_NORMAL\n  },\n  getColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  material: true,\n  radiusPixels: {\n    deprecatedFor: 'pointSize'\n  }\n};\n\nfunction normalizeData(data) {\n  var header = data.header,\n      attributes = data.attributes;\n\n  if (!header || !attributes) {\n    return;\n  }\n\n  data.length = header.vertexCount;\n\n  if (attributes.POSITION) {\n    attributes.instancePositions = attributes.POSITION;\n  }\n\n  if (attributes.NORMAL) {\n    attributes.instanceNormals = attributes.NORMAL;\n  }\n\n  if (attributes.COLOR_0) {\n    attributes.instanceColors = attributes.COLOR_0;\n  }\n}\n\nvar PointCloudLayer = function (_Layer) {\n  _inherits(PointCloudLayer, _Layer);\n\n  function PointCloudLayer() {\n    _classCallCheck(this, PointCloudLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PointCloudLayer).apply(this, arguments));\n  }\n\n  _createClass(PointCloudLayer, [{\n    key: \"getShaders\",\n    value: function getShaders(id) {\n      return _get(_getPrototypeOf(PointCloudLayer.prototype), \"getShaders\", this).call(this, {\n        vs: vs,\n        fs: fs,\n        modules: [project32, gouraudLighting, picking]\n      });\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      this.getAttributeManager().addInstanced({\n        instancePositions: {\n          size: 3,\n          type: 5130,\n          fp64: this.use64bitPositions(),\n          transition: true,\n          accessor: 'getPosition'\n        },\n        instanceNormals: {\n          size: 3,\n          transition: true,\n          accessor: 'getNormal',\n          defaultValue: DEFAULT_NORMAL\n        },\n        instanceColors: {\n          size: this.props.colorFormat.length,\n          type: 5121,\n          normalized: true,\n          transition: true,\n          accessor: 'getColor',\n          defaultValue: DEFAULT_COLOR\n        }\n      });\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref) {\n      var props = _ref.props,\n          oldProps = _ref.oldProps,\n          changeFlags = _ref.changeFlags;\n\n      _get(_getPrototypeOf(PointCloudLayer.prototype), \"updateState\", this).call(this, {\n        props: props,\n        oldProps: oldProps,\n        changeFlags: changeFlags\n      });\n\n      if (changeFlags.extensionsChanged) {\n        var gl = this.context.gl;\n\n        if (this.state.model) {\n          this.state.model[\"delete\"]();\n        }\n\n        this.setState({\n          model: this._getModel(gl)\n        });\n        this.getAttributeManager().invalidateAll();\n      }\n\n      if (changeFlags.dataChanged) {\n        normalizeData(props.data);\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref2) {\n      var uniforms = _ref2.uniforms;\n      var viewport = this.context.viewport;\n      var _this$props = this.props,\n          pointSize = _this$props.pointSize,\n          sizeUnits = _this$props.sizeUnits;\n      var sizeMultiplier = sizeUnits === 'meters' ? 1 / viewport.metersPerPixel : 1;\n      this.state.model.setUniforms(Object.assign({}, uniforms, {\n        radiusPixels: pointSize * sizeMultiplier\n      })).draw();\n    }\n  }, {\n    key: \"_getModel\",\n    value: function _getModel(gl) {\n      var positions = [];\n\n      for (var i = 0; i < 3; i++) {\n        var angle = i / 3 * Math.PI * 2;\n        positions.push(Math.cos(angle) * 2, Math.sin(angle) * 2, 0);\n      }\n\n      return new Model(gl, Object.assign({}, this.getShaders(), {\n        id: this.props.id,\n        geometry: new Geometry({\n          drawMode: 4,\n          attributes: {\n            positions: new Float32Array(positions)\n          }\n        }),\n        isInstanced: true\n      }));\n    }\n  }]);\n\n  return PointCloudLayer;\n}(Layer);\n\nexport { PointCloudLayer as default };\nPointCloudLayer.layerName = 'PointCloudLayer';\nPointCloudLayer.defaultProps = defaultProps;","export default \"#define SHADER_NAME point-cloud-layer-vertex-shader\\n\\nattribute vec3 positions;\\nattribute vec3 instanceNormals;\\nattribute vec4 instanceColors;\\nattribute vec3 instancePositions;\\nattribute vec3 instancePositions64Low;\\nattribute vec3 instancePickingColors;\\n\\nuniform float opacity;\\nuniform float radiusPixels;\\n\\nvarying vec4 vColor;\\nvarying vec2 unitPosition;\\n\\nvoid main(void) {\\n  geometry.worldPosition = instancePositions;\\n  geometry.normal = project_normal(instanceNormals);\\n  unitPosition = positions.xy;\\n  geometry.uv = unitPosition;\\n  geometry.pickingColor = instancePickingColors;\\n  vec3 offset = vec3(positions.xy * radiusPixels, 0.0);\\n  DECKGL_FILTER_SIZE(offset, geometry);\\n\\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\\n  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);\\n  vColor = vec4(lightColor, instanceColors.a * opacity);\\n  DECKGL_FILTER_COLOR(vColor, geometry);\\n}\\n\";","export default \"#define SHADER_NAME point-cloud-layer-fragment-shader\\n\\nprecision highp float;\\n\\nvarying vec4 vColor;\\nvarying vec2 unitPosition;\\n\\nvoid main(void) {\\n  geometry.uv = unitPosition;\\n\\n  float distToCenter = length(unitPosition);\\n\\n  if (distToCenter > 1.0) {\\n    discard;\\n  }\\n\\n  gl_FragColor = vColor;\\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\\n}\\n\";","import lights from '../lights/lights';\nimport vs from './pbr-vertex.glsl';\nimport fs from './pbr-fragment.glsl';\nexport default {\n  name: 'pbr',\n  vs: vs,\n  fs: fs,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  dependencies: [lights]\n};","export default \"uniform mat4 u_MVPMatrix;\\nuniform mat4 u_ModelMatrix;\\nuniform mat4 u_NormalMatrix;\\n\\nvarying vec3 pbr_vPosition;\\nvarying vec2 pbr_vUV;\\n\\n#ifdef HAS_NORMALS\\n# ifdef HAS_TANGENTS\\nvarying mat3 pbr_vTBN;\\n# else\\nvarying vec3 pbr_vNormal;\\n# endif\\n#endif\\n\\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\\n{\\n  vec4 pos = u_ModelMatrix * position;\\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\\n\\n#ifdef HAS_NORMALS\\n#ifdef HAS_TANGENTS\\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\\n#else\\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\\n#endif\\n#endif\\n\\n#ifdef HAS_UV\\n  pbr_vUV = uv;\\n#else\\n  pbr_vUV = vec2(0.,0.);\\n#endif\\n}\\n\";","export default \"#if (__VERSION__ < 300)\\n#extension GL_EXT_shader_texture_lod: enable\\n#extension GL_OES_standard_derivatives : enable\\n#endif\\n\\n\\n#if (__VERSION__ < 300)\\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\\n#else\\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\\n#endif\\n\\nprecision highp float;\\n\\n#ifdef USE_IBL\\nuniform samplerCube u_DiffuseEnvSampler;\\nuniform samplerCube u_SpecularEnvSampler;\\nuniform sampler2D u_brdfLUT;\\nuniform vec2 u_ScaleIBLAmbient;\\n#endif\\n\\n#ifdef HAS_BASECOLORMAP\\nuniform sampler2D u_BaseColorSampler;\\n#endif\\n#ifdef HAS_NORMALMAP\\nuniform sampler2D u_NormalSampler;\\nuniform float u_NormalScale;\\n#endif\\n#ifdef HAS_EMISSIVEMAP\\nuniform sampler2D u_EmissiveSampler;\\nuniform vec3 u_EmissiveFactor;\\n#endif\\n#ifdef HAS_METALROUGHNESSMAP\\nuniform sampler2D u_MetallicRoughnessSampler;\\n#endif\\n#ifdef HAS_OCCLUSIONMAP\\nuniform sampler2D u_OcclusionSampler;\\nuniform float u_OcclusionStrength;\\n#endif\\n\\n#ifdef ALPHA_CUTOFF\\nuniform float u_AlphaCutoff;\\n#endif\\n\\nuniform vec2 u_MetallicRoughnessValues;\\nuniform vec4 u_BaseColorFactor;\\n\\nuniform vec3 u_Camera;\\n#ifdef PBR_DEBUG\\nuniform vec4 u_ScaleDiffBaseMR;\\nuniform vec4 u_ScaleFGDSpec;\\n#endif\\n\\nvarying vec3 pbr_vPosition;\\n\\nvarying vec2 pbr_vUV;\\n\\n#ifdef HAS_NORMALS\\n#ifdef HAS_TANGENTS\\nvarying mat3 pbr_vTBN;\\n#else\\nvarying vec3 pbr_vNormal;\\n#endif\\n#endif\\n\\n\\nstruct PBRInfo\\n{\\n  float NdotL;\\n  float NdotV;\\n  float NdotH;\\n  float LdotH;\\n  float VdotH;\\n  float perceptualRoughness;\\n  float metalness;\\n  vec3 reflectance0;\\n  vec3 reflectance90;\\n  float alphaRoughness;\\n  vec3 diffuseColor;\\n  vec3 specularColor;\\n  vec3 n;\\n  vec3 v;\\n};\\n\\nconst float M_PI = 3.141592653589793;\\nconst float c_MinRoughness = 0.04;\\n\\nvec4 SRGBtoLINEAR(vec4 srgbIn)\\n{\\n#ifdef MANUAL_SRGB\\n#ifdef SRGB_FAST_APPROXIMATION\\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\\n#else\\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\\n#endif\\n  return vec4(linOut,srgbIn.w);;\\n#else\\n  return srgbIn;\\n#endif\\n}\\n\\nvec3 getNormal()\\n{\\n#ifndef HAS_TANGENTS\\n  vec3 pos_dx = dFdx(pbr_vPosition);\\n  vec3 pos_dy = dFdy(pbr_vPosition);\\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\\n\\n#ifdef HAS_NORMALS\\n  vec3 ng = normalize(pbr_vNormal);\\n#else\\n  vec3 ng = cross(pos_dx, pos_dy);\\n#endif\\n\\n  t = normalize(t - ng * dot(ng, t));\\n  vec3 b = normalize(cross(ng, t));\\n  mat3 tbn = mat3(t, b, ng);\\n#else\\n  mat3 tbn = pbr_vTBN;\\n#endif\\n\\n#ifdef HAS_NORMALMAP\\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\\n#else\\n  vec3 n = normalize(tbn[2].xyz);\\n#endif\\n\\n  return n;\\n}\\n\\n\\n#ifdef USE_IBL\\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\\n{\\n  float mipCount = 9.0;\\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\\n\\n#ifdef USE_TEX_LOD\\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLodEXT(u_SpecularEnvSampler, reflection, lod)).rgb;\\n#else\\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\\n#endif\\n\\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\\n  diffuse *= u_ScaleIBLAmbient.x;\\n  specular *= u_ScaleIBLAmbient.y;\\n\\n  return diffuse + specular;\\n}\\n#endif\\n\\n\\nvec3 diffuse(PBRInfo pbrInputs)\\n{\\n  return pbrInputs.diffuseColor / M_PI;\\n}\\n\\nvec3 specularReflection(PBRInfo pbrInputs)\\n{\\n  return pbrInputs.reflectance0 +\\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\\n}\\n\\n\\n\\nfloat geometricOcclusion(PBRInfo pbrInputs)\\n{\\n  float NdotL = pbrInputs.NdotL;\\n  float NdotV = pbrInputs.NdotV;\\n  float r = pbrInputs.alphaRoughness;\\n\\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\\n  return attenuationL * attenuationV;\\n}\\n\\n\\n\\n\\n\\nfloat microfacetDistribution(PBRInfo pbrInputs)\\n{\\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\\n  return roughnessSq / (M_PI * f * f);\\n}\\n\\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\\n  pbrInputs.NdotL = 1.0;\\n  pbrInputs.NdotH = 0.0;\\n  pbrInputs.LdotH = 0.0;\\n  pbrInputs.VdotH = 1.0;\\n}\\n\\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\\n  vec3 n = pbrInputs.n;\\n  vec3 v = pbrInputs.v;\\n  vec3 l = normalize(lightDirection);\\n  vec3 h = normalize(l+v);\\n\\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\\n}\\n\\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\\n}\\n\\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\\n  vec3 F = specularReflection(pbrInputs);\\n  float G = geometricOcclusion(pbrInputs);\\n  float D = microfacetDistribution(pbrInputs);\\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\\n}\\n\\nvec4 pbr_filterColor(vec4 colorUnused)\\n{\\n\\n\\n  float perceptualRoughness = u_MetallicRoughnessValues.y;\\n  float metallic = u_MetallicRoughnessValues.x;\\n#ifdef HAS_METALROUGHNESSMAP\\n\\n  vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\\n  perceptualRoughness = mrSample.g * perceptualRoughness;\\n  metallic = mrSample.b * metallic;\\n#endif\\n  perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\\n  metallic = clamp(metallic, 0.0, 1.0);\\n\\n  float alphaRoughness = perceptualRoughness * perceptualRoughness;\\n#ifdef HAS_BASECOLORMAP\\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\\n#else\\n  vec4 baseColor = u_BaseColorFactor;\\n#endif\\n\\n#ifdef ALPHA_CUTOFF\\n  if (baseColor.a < u_AlphaCutoff) {\\n    discard;\\n  }\\n#endif\\n\\n  vec3 f0 = vec3(0.04);\\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\\n  diffuseColor *= 1.0 - metallic;\\n  vec3 specularColor = mix(f0, baseColor.rgb, metallic);\\n  float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\\n\\n\\n\\n  float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\\n  vec3 specularEnvironmentR0 = specularColor.rgb;\\n  vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\\n\\n  vec3 n = getNormal();\\n  vec3 v = normalize(u_Camera - pbr_vPosition);\\n\\n  float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\\n  vec3 reflection = -normalize(reflect(v, n));\\n\\n  PBRInfo pbrInputs = PBRInfo(\\n    0.0,\\n    NdotV,\\n    0.0,\\n    0.0,\\n    0.0,\\n    perceptualRoughness,\\n    metallic,\\n    specularEnvironmentR0,\\n    specularEnvironmentR90,\\n    alphaRoughness,\\n    diffuseColor,\\n    specularColor,\\n    n,\\n    v\\n  );\\n\\n  vec3 color = vec3(0, 0, 0);\\n\\n#ifdef USE_LIGHTS\\n  PBRInfo_setAmbientLight(pbrInputs);\\n  color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\\n    if (i < lighting_uDirectionalLightCount) {\\n      PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\\n      color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\\n    }\\n  }\\n  SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\\n    if (i < lighting_uPointLightCount) {\\n      PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\\n      float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\\n      color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\\n    }\\n  }\\n#endif\\n#ifdef USE_IBL\\n  color += getIBLContribution(pbrInputs, n, reflection);\\n#endif\\n#ifdef HAS_OCCLUSIONMAP\\n  float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\\n  color = mix(color, color * ao, u_OcclusionStrength);\\n#endif\\n\\n#ifdef HAS_EMISSIVEMAP\\n  vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\\n  color += emissive;\\n#endif\\n\\n#ifdef PBR_DEBUG\\n\\n\\n\\n\\n\\n  color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\\n  color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\\n  color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\\n#endif\\n\\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\\n}\\n\";","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Vector3, Matrix4 } from 'math.gl';\nimport { assert, uid } from '@luma.gl/webgl';\n\nvar ScenegraphNode = function () {\n  function ScenegraphNode() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ScenegraphNode);\n\n    var id = props.id;\n    this.id = id || uid(this.constructor.name);\n    this.display = true;\n    this.position = new Vector3();\n    this.rotation = new Vector3();\n    this.scale = new Vector3(1, 1, 1);\n    this.matrix = new Matrix4();\n    this.userData = {};\n    this.props = {};\n\n    this._setScenegraphNodeProps(props);\n  }\n\n  _createClass(ScenegraphNode, [{\n    key: \"delete\",\n    value: function _delete() {}\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      this._setScenegraphNodeProps(props);\n\n      return this;\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"{type: ScenegraphNode, id: \".concat(this.id, \")}\");\n    }\n  }, {\n    key: \"setPosition\",\n    value: function setPosition(position) {\n      assert(position.length === 3, 'setPosition requires vector argument');\n      this.position = position;\n      return this;\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      assert(rotation.length === 3, 'setRotation requires vector argument');\n      this.rotation = rotation;\n      return this;\n    }\n  }, {\n    key: \"setScale\",\n    value: function setScale(scale) {\n      assert(scale.length === 3, 'setScale requires vector argument');\n      this.scale = scale;\n      return this;\n    }\n  }, {\n    key: \"setMatrix\",\n    value: function setMatrix(matrix) {\n      var copyMatrix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (copyMatrix) {\n        this.matrix.copy(matrix);\n      } else {\n        this.matrix = matrix;\n      }\n    }\n  }, {\n    key: \"setMatrixComponents\",\n    value: function setMatrixComponents(_ref) {\n      var position = _ref.position,\n          rotation = _ref.rotation,\n          scale = _ref.scale,\n          _ref$update = _ref.update,\n          update = _ref$update === void 0 ? true : _ref$update;\n\n      if (position) {\n        this.setPosition(position);\n      }\n\n      if (rotation) {\n        this.setRotation(rotation);\n      }\n\n      if (scale) {\n        this.setScale(scale);\n      }\n\n      if (update) {\n        this.updateMatrix();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"updateMatrix\",\n    value: function updateMatrix() {\n      var pos = this.position;\n      var rot = this.rotation;\n      var scale = this.scale;\n      this.matrix.identity();\n      this.matrix.translate(pos);\n      this.matrix.rotateXYZ(rot);\n      this.matrix.scale(scale);\n      return this;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          position = _ref2.position,\n          rotation = _ref2.rotation,\n          scale = _ref2.scale;\n\n      if (position) {\n        this.setPosition(position);\n      }\n\n      if (rotation) {\n        this.setRotation(rotation);\n      }\n\n      if (scale) {\n        this.setScale(scale);\n      }\n\n      this.updateMatrix();\n      return this;\n    }\n  }, {\n    key: \"getCoordinateUniforms\",\n    value: function getCoordinateUniforms(viewMatrix, modelMatrix) {\n      assert(viewMatrix);\n      modelMatrix = modelMatrix || this.matrix;\n      var worldMatrix = new Matrix4(viewMatrix).multiplyRight(modelMatrix);\n      var worldInverse = worldMatrix.invert();\n      var worldInverseTranspose = worldInverse.transpose();\n      return {\n        viewMatrix: viewMatrix,\n        modelMatrix: modelMatrix,\n        objectMatrix: modelMatrix,\n        worldMatrix: worldMatrix,\n        worldInverseMatrix: worldInverse,\n        worldInverseTransposeMatrix: worldInverseTranspose\n      };\n    }\n  }, {\n    key: \"_setScenegraphNodeProps\",\n    value: function _setScenegraphNodeProps(props) {\n      if ('display' in props) {\n        this.display = props.display;\n      }\n\n      if ('position' in props) {\n        this.setPosition(props.position);\n      }\n\n      if ('rotation' in props) {\n        this.setRotation(props.rotation);\n      }\n\n      if ('scale' in props) {\n        this.setScale(props.scale);\n      }\n\n      if ('matrix' in props) {\n        this.setMatrix(props.matrix);\n      }\n\n      Object.assign(this.props, props);\n    }\n  }]);\n\n  return ScenegraphNode;\n}();\n\nexport { ScenegraphNode as default };","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { Matrix4 } from 'math.gl';\nimport { log } from '@luma.gl/webgl';\nimport ScenegraphNode from './scenegraph-node';\n\nvar GroupNode = function (_ScenegraphNode) {\n  _inherits(GroupNode, _ScenegraphNode);\n\n  function GroupNode() {\n    var _this;\n\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, GroupNode);\n\n    props = Array.isArray(props) ? {\n      children: props\n    } : props;\n    var _props = props,\n        _props$children = _props.children,\n        children = _props$children === void 0 ? [] : _props$children;\n    log.assert(children.every(function (child) {\n      return child instanceof ScenegraphNode;\n    }), 'every child must an instance of ScenegraphNode');\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GroupNode).call(this, props));\n    _this.children = children;\n    return _this;\n  }\n\n  _createClass(GroupNode, [{\n    key: \"add\",\n    value: function add() {\n      for (var _len = arguments.length, children = new Array(_len), _key = 0; _key < _len; _key++) {\n        children[_key] = arguments[_key];\n      }\n\n      for (var _i = 0, _children = children; _i < _children.length; _i++) {\n        var child = _children[_i];\n\n        if (Array.isArray(child)) {\n          this.add.apply(this, _toConsumableArray(child));\n        } else {\n          this.children.push(child);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(child) {\n      var children = this.children;\n      var indexOf = children.indexOf(child);\n\n      if (indexOf > -1) {\n        children.splice(indexOf, 1);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"removeAll\",\n    value: function removeAll() {\n      this.children = [];\n      return this;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      this.children.forEach(function (child) {\n        return child[\"delete\"]();\n      });\n      this.removeAll();\n\n      _get(_getPrototypeOf(GroupNode.prototype), \"delete\", this).call(this);\n    }\n  }, {\n    key: \"traverse\",\n    value: function traverse(visitor) {\n      var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref$worldMatrix = _ref.worldMatrix,\n          worldMatrix = _ref$worldMatrix === void 0 ? new Matrix4() : _ref$worldMatrix;\n\n      var modelMatrix = new Matrix4(worldMatrix).multiplyRight(this.matrix);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.children[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var child = _step.value;\n\n          if (child instanceof GroupNode) {\n            child.traverse(visitor, {\n              worldMatrix: modelMatrix\n            });\n          } else {\n            visitor(child, {\n              worldMatrix: modelMatrix\n            });\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }]);\n\n  return GroupNode;\n}(ScenegraphNode);\n\nexport { GroupNode as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert, log } from '@luma.gl/webgl';\nimport { Matrix4, Quaternion } from 'math.gl';\nexport var ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\n\nfunction accessorToJsArray(accessor) {\n  if (!accessor._animation) {\n    var ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n    var components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n    var length = components * accessor.count;\n    var _accessor$bufferView$ = accessor.bufferView.data,\n        buffer = _accessor$bufferView$.buffer,\n        byteOffset = _accessor$bufferView$.byteOffset;\n    var array = new ArrayType(buffer, byteOffset + (accessor.byteOffset || 0), length);\n\n    if (components === 1) {\n      accessor._animation = Array.from(array);\n    } else {\n      var slicedArray = [];\n\n      for (var i = 0; i < array.length; i += components) {\n        slicedArray.push(Array.from(array.slice(i, i + components)));\n      }\n\n      accessor._animation = slicedArray;\n    }\n  }\n\n  return accessor._animation;\n}\n\nvar helperMatrix = new Matrix4();\n\nfunction applyTranslationRotationScale(gltfNode, node) {\n  node.matrix.identity();\n\n  if (gltfNode.translation) {\n    node.matrix.translate(gltfNode.translation);\n  }\n\n  if (gltfNode.rotation) {\n    var rotationMatrix = helperMatrix.fromQuaternion(gltfNode.rotation);\n    node.matrix.multiplyRight(rotationMatrix);\n  }\n\n  if (gltfNode.scale) {\n    node.matrix.scale(gltfNode.scale);\n  }\n}\n\nvar quaternion = new Quaternion();\n\nfunction linearInterpolate(target, path, start, stop, ratio) {\n  if (path === 'rotation') {\n    quaternion.slerp({\n      start: start,\n      target: stop,\n      ratio: ratio\n    });\n\n    for (var i = 0; i < quaternion.length; i++) {\n      target[path][i] = quaternion[i];\n    }\n  } else {\n    for (var _i = 0; _i < start.length; _i++) {\n      target[path][_i] = ratio * stop[_i] + (1 - ratio) * start[_i];\n    }\n  }\n}\n\nfunction cubicsplineInterpolate(target, path, _ref) {\n  var p0 = _ref.p0,\n      outTangent0 = _ref.outTangent0,\n      inTangent1 = _ref.inTangent1,\n      p1 = _ref.p1,\n      tDiff = _ref.tDiff,\n      t = _ref.ratio;\n\n  for (var i = 0; i < target[path].length; i++) {\n    var m0 = outTangent0[i] * tDiff;\n    var m1 = inTangent1[i] * tDiff;\n    target[path][i] = (2 * Math.pow(t, 3) - 3 * Math.pow(t, 2) + 1) * p0[i] + (Math.pow(t, 3) - 2 * Math.pow(t, 2) + t) * m0 + (-2 * Math.pow(t, 3) + 3 * Math.pow(t, 2)) * p1[i] + (Math.pow(t, 3) - Math.pow(t, 2)) * m1;\n  }\n}\n\nfunction stepInterpolate(target, path, value) {\n  for (var i = 0; i < value.length; i++) {\n    target[path][i] = value[i];\n  }\n}\n\nfunction interpolate(time, _ref2, target, path) {\n  var input = _ref2.input,\n      interpolation = _ref2.interpolation,\n      output = _ref2.output;\n  var maxTime = input[input.length - 1];\n  var animationTime = time % maxTime;\n  var nextIndex = input.findIndex(function (t) {\n    return t >= animationTime;\n  });\n  var previousIndex = Math.max(0, nextIndex - 1);\n\n  if (!Array.isArray(target[path])) {\n    switch (path) {\n      case 'translation':\n        target[path] = [0, 0, 0];\n        break;\n\n      case 'rotation':\n        target[path] = [0, 0, 0, 1];\n        break;\n\n      case 'scale':\n        target[path] = [1, 1, 1];\n        break;\n\n      default:\n        log.warn(\"Bad animation path \".concat(path))();\n    }\n  }\n\n  assert(target[path].length === output[previousIndex].length);\n  var previousTime = input[previousIndex];\n  var nextTime = input[nextIndex];\n\n  switch (interpolation) {\n    case 'STEP':\n      stepInterpolate(target, path, output[previousIndex]);\n      break;\n\n    case 'LINEAR':\n      if (nextTime > previousTime) {\n        var ratio = (animationTime - previousTime) / (nextTime - previousTime);\n        linearInterpolate(target, path, output[previousIndex], output[nextIndex], ratio);\n      }\n\n      break;\n\n    case 'CUBICSPLINE':\n      if (nextTime > previousTime) {\n        var _ratio = (animationTime - previousTime) / (nextTime - previousTime);\n\n        var tDiff = nextTime - previousTime;\n        var p0 = output[3 * previousIndex + 1];\n        var outTangent0 = output[3 * previousIndex + 2];\n        var inTangent1 = output[3 * nextIndex + 0];\n        var p1 = output[3 * nextIndex + 1];\n        cubicsplineInterpolate(target, path, {\n          p0: p0,\n          outTangent0: outTangent0,\n          inTangent1: inTangent1,\n          p1: p1,\n          tDiff: tDiff,\n          ratio: _ratio\n        });\n      }\n\n      break;\n\n    default:\n      log.warn(\"Interpolation \".concat(interpolation, \" not supported\"))();\n      break;\n  }\n}\n\nvar GLTFAnimation = function () {\n  function GLTFAnimation(props) {\n    _classCallCheck(this, GLTFAnimation);\n\n    this.startTime = 0;\n    this.playing = true;\n    this.speed = 1;\n    Object.assign(this, props);\n  }\n\n  _createClass(GLTFAnimation, [{\n    key: \"animate\",\n    value: function animate(timeMs) {\n      if (!this.playing) {\n        return;\n      }\n\n      var absTime = timeMs / 1000;\n      var time = (absTime - this.startTime) * this.speed;\n      this.channels.forEach(function (_ref3) {\n        var sampler = _ref3.sampler,\n            target = _ref3.target,\n            path = _ref3.path;\n        interpolate(time, sampler, target, path);\n        applyTranslationRotationScale(target, target._node);\n      });\n    }\n  }]);\n\n  return GLTFAnimation;\n}();\n\nvar GLTFAnimator = function () {\n  function GLTFAnimator(gltf) {\n    _classCallCheck(this, GLTFAnimator);\n\n    this.animations = gltf.animations.map(function (animation, index) {\n      var name = animation.name || \"Animation-\".concat(index);\n      var samplers = animation.samplers.map(function (_ref4) {\n        var input = _ref4.input,\n            _ref4$interpolation = _ref4.interpolation,\n            interpolation = _ref4$interpolation === void 0 ? 'LINEAR' : _ref4$interpolation,\n            output = _ref4.output;\n        return {\n          input: accessorToJsArray(gltf.accessors[input]),\n          interpolation: interpolation,\n          output: accessorToJsArray(gltf.accessors[output])\n        };\n      });\n      var channels = animation.channels.map(function (_ref5) {\n        var sampler = _ref5.sampler,\n            target = _ref5.target;\n        return {\n          sampler: samplers[sampler],\n          target: gltf.nodes[target.node],\n          path: target.path\n        };\n      });\n      return new GLTFAnimation({\n        name: name,\n        channels: channels\n      });\n    });\n  }\n\n  _createClass(GLTFAnimator, [{\n    key: \"animate\",\n    value: function animate(time) {\n      this.setTime(time);\n    }\n  }, {\n    key: \"setTime\",\n    value: function setTime(time) {\n      this.animations.forEach(function (animation) {\n        return animation.animate(time);\n      });\n    }\n  }, {\n    key: \"getAnimations\",\n    value: function getAnimations() {\n      return this.animations;\n    }\n  }]);\n\n  return GLTFAnimator;\n}();\n\nexport { GLTFAnimator as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { Model } from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nvar ModelNode = function (_ScenegraphNode) {\n  _inherits(ModelNode, _ScenegraphNode);\n\n  function ModelNode(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, ModelNode);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ModelNode).call(this, props));\n    _this.onBeforeRender = null;\n    _this.AfterRender = null;\n\n    if (gl instanceof Model) {\n      _this.model = gl;\n\n      _this._setModelNodeProps(props);\n    } else {\n      _this.model = new Model(gl, props);\n    }\n\n    _this.managedResources = props.managedResources || [];\n    return _this;\n  }\n\n  _createClass(ModelNode, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      _get(_getPrototypeOf(ModelNode.prototype), \"setProps\", this).call(this, props);\n\n      this._setModelNodeProps(props);\n\n      return this;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.model) {\n        this.model[\"delete\"]();\n        this.model = null;\n      }\n\n      this.managedResources.forEach(function (resource) {\n        return resource[\"delete\"]();\n      });\n      this.managedResources = [];\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      var _this$model;\n\n      return (_this$model = this.model).draw.apply(_this$model, arguments);\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var _this$model2;\n\n      (_this$model2 = this.model).setUniforms.apply(_this$model2, arguments);\n\n      return this;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes() {\n      var _this$model3;\n\n      (_this$model3 = this.model).setAttributes.apply(_this$model3, arguments);\n\n      return this;\n    }\n  }, {\n    key: \"updateModuleSettings\",\n    value: function updateModuleSettings() {\n      var _this$model4;\n\n      (_this$model4 = this.model).updateModuleSettings.apply(_this$model4, arguments);\n\n      return this;\n    }\n  }, {\n    key: \"_setModelNodeProps\",\n    value: function _setModelNodeProps(props) {\n      this.model.setProps(props);\n    }\n  }]);\n\n  return ModelNode;\n}(ScenegraphNode);\n\nexport { ModelNode as default };","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Texture2D, hasFeature, FEATURES, log } from '@luma.gl/webgl';\n\nvar GLTFMaterialParser = function () {\n  function GLTFMaterialParser(gl, _ref) {\n    var attributes = _ref.attributes,\n        material = _ref.material,\n        pbrDebug = _ref.pbrDebug,\n        imageBasedLightingEnvironment = _ref.imageBasedLightingEnvironment,\n        lights = _ref.lights,\n        useTangents = _ref.useTangents;\n\n    _classCallCheck(this, GLTFMaterialParser);\n\n    this.gl = gl;\n    this.defines = {\n      MANUAL_SRGB: 1,\n      SRGB_FAST_APPROXIMATION: 1\n    };\n\n    if (hasFeature(gl, FEATURES.GLSL_TEXTURE_LOD)) {\n      this.defines.USE_TEX_LOD = 1;\n    }\n\n    this.uniforms = {\n      u_Camera: [0, 0, 0],\n      u_MetallicRoughnessValues: [1, 1]\n    };\n    this.parameters = {};\n    this.generatedTextures = [];\n\n    if (imageBasedLightingEnvironment) {\n      this.uniforms.u_DiffuseEnvSampler = imageBasedLightingEnvironment.getDiffuseEnvSampler();\n      this.uniforms.u_SpecularEnvSampler = imageBasedLightingEnvironment.getSpecularEnvSampler();\n      this.uniforms.u_brdfLUT = imageBasedLightingEnvironment.getBrdfTexture();\n      this.uniforms.u_ScaleIBLAmbient = [1, 1];\n    }\n\n    if (pbrDebug) {\n      this.uniforms.u_ScaleDiffBaseMR = [0, 0, 0, 0];\n      this.uniforms.u_ScaleFGDSpec = [0, 0, 0, 0];\n    }\n\n    this.defineIfPresent(attributes.NORMAL, 'HAS_NORMALS');\n    this.defineIfPresent(attributes.TANGENT && useTangents, 'HAS_TANGENTS');\n    this.defineIfPresent(attributes.TEXCOORD_0, 'HAS_UV');\n    this.defineIfPresent(imageBasedLightingEnvironment, 'USE_IBL');\n    this.defineIfPresent(lights, 'USE_LIGHTS');\n    this.defineIfPresent(pbrDebug, 'PBR_DEBUG');\n\n    if (material) {\n      this.parseMaterial(material);\n    }\n  }\n\n  _createClass(GLTFMaterialParser, [{\n    key: \"defineIfPresent\",\n    value: function defineIfPresent(value, name) {\n      if (value) {\n        this.defines[name] = 1;\n      }\n    }\n  }, {\n    key: \"parseTexture\",\n    value: function parseTexture(gltfTexture, name) {\n      var define = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var parameters = gltfTexture.texture && gltfTexture.texture.sampler && gltfTexture.texture.sampler.parameters || {};\n      var texture = new Texture2D(this.gl, {\n        id: gltfTexture.name || gltfTexture.id,\n        parameters: parameters,\n        pixelStore: _defineProperty({}, this.gl.UNPACK_FLIP_Y_WEBGL, false),\n        data: gltfTexture.texture.source.image\n      });\n      this.uniforms[name] = texture;\n      this.defineIfPresent(define, define);\n      this.generatedTextures.push(texture);\n    }\n  }, {\n    key: \"parsePbrMetallicRoughness\",\n    value: function parsePbrMetallicRoughness(pbrMetallicRoughness) {\n      if (pbrMetallicRoughness.baseColorTexture) {\n        this.parseTexture(pbrMetallicRoughness.baseColorTexture, 'u_BaseColorSampler', 'HAS_BASECOLORMAP');\n      }\n\n      this.uniforms.u_BaseColorFactor = pbrMetallicRoughness.baseColorFactor || [1, 1, 1, 1];\n\n      if (pbrMetallicRoughness.metallicRoughnessTexture) {\n        this.parseTexture(pbrMetallicRoughness.metallicRoughnessTexture, 'u_MetallicRoughnessSampler', 'HAS_METALROUGHNESSMAP');\n      }\n\n      var _pbrMetallicRoughness = pbrMetallicRoughness.metallicFactor,\n          metallicFactor = _pbrMetallicRoughness === void 0 ? 1 : _pbrMetallicRoughness,\n          _pbrMetallicRoughness2 = pbrMetallicRoughness.roughnessFactor,\n          roughnessFactor = _pbrMetallicRoughness2 === void 0 ? 1 : _pbrMetallicRoughness2;\n      this.uniforms.u_MetallicRoughnessValues = [metallicFactor, roughnessFactor];\n    }\n  }, {\n    key: \"parseMaterial\",\n    value: function parseMaterial(material) {\n      if (material.pbrMetallicRoughness) {\n        this.parsePbrMetallicRoughness(material.pbrMetallicRoughness);\n      }\n\n      if (material.normalTexture) {\n        this.parseTexture(material.normalTexture, 'u_NormalSampler', 'HAS_NORMALMAP');\n        var _material$normalTextu = material.normalTexture.scale,\n            scale = _material$normalTextu === void 0 ? 1 : _material$normalTextu;\n        this.uniforms.u_NormalScale = scale;\n      }\n\n      if (material.occlusionTexture) {\n        this.parseTexture(material.occlusionTexture, 'u_OcclusionSampler', 'HAS_OCCLUSIONMAP');\n        var _material$occlusionTe = material.occlusionTexture.strength,\n            strength = _material$occlusionTe === void 0 ? 1 : _material$occlusionTe;\n        this.uniforms.u_OcclusionStrength = strength;\n      }\n\n      if (material.emissiveTexture) {\n        this.parseTexture(material.emissiveTexture, 'u_EmissiveSampler', 'HAS_EMISSIVEMAP');\n        this.uniforms.u_EmissiveFactor = material.emissiveFactor || [0, 0, 0];\n      }\n\n      if (material.alphaMode === 'MASK') {\n        var _material$alphaCutoff = material.alphaCutoff,\n            alphaCutoff = _material$alphaCutoff === void 0 ? 0.5 : _material$alphaCutoff;\n        this.defines.ALPHA_CUTOFF = 1;\n        this.uniforms.u_AlphaCutoff = alphaCutoff;\n      } else if (material.alphaMode === 'BLEND') {\n        log.warn('BLEND alphaMode might not work well because it requires mesh sorting')();\n        Object.assign(this.parameters, {\n          blend: true,\n          blendEquation: this.gl.FUNC_ADD,\n          blendFunc: [this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA, this.gl.ONE, this.gl.ONE_MINUS_SRC_ALPHA]\n        });\n      }\n    }\n  }]);\n\n  return GLTFMaterialParser;\n}();\n\nexport { GLTFMaterialParser as default };","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { isWebGL2 } from '@luma.gl/gltools';\nimport { log } from '@luma.gl/webgl';\nimport { pbr } from '@luma.gl/shadertools';\nimport { ModelNode } from '../scenegraph';\nimport GLTFMaterialParser from './gltf-material-parser';\nvar vs = \"\\n#if (__VERSION__ < 300)\\n  #define _attr attribute\\n#else\\n  #define _attr in\\n#endif\\n\\n  _attr vec4 POSITION;\\n\\n  #ifdef HAS_NORMALS\\n    _attr vec4 NORMAL;\\n  #endif\\n\\n  #ifdef HAS_TANGENTS\\n    _attr vec4 TANGENT;\\n  #endif\\n\\n  #ifdef HAS_UV\\n    _attr vec2 TEXCOORD_0;\\n  #endif\\n\\n  void main(void) {\\n    vec4 _NORMAL = vec4(0.);\\n    vec4 _TANGENT = vec4(0.);\\n    vec2 _TEXCOORD_0 = vec2(0.);\\n\\n    #ifdef HAS_NORMALS\\n      _NORMAL = NORMAL;\\n    #endif\\n\\n    #ifdef HAS_TANGENTS\\n      _TANGENT = TANGENT;\\n    #endif\\n\\n    #ifdef HAS_UV\\n      _TEXCOORD_0 = TEXCOORD_0;\\n    #endif\\n\\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\\n    gl_Position = u_MVPMatrix * POSITION;\\n  }\\n\";\nvar fs = \"\\n#if (__VERSION__ < 300)\\n  #define fragmentColor gl_FragColor\\n#else\\n  out vec4 fragmentColor;\\n#endif\\n\\n  void main(void) {\\n    fragmentColor = pbr_filterColor(vec4(0));\\n  }\\n\";\n\nfunction addVersionToShader(gl, source) {\n  if (isWebGL2(gl)) {\n    return \"#version 300 es\\n\".concat(source);\n  }\n\n  return source;\n}\n\nexport default function createGLTFModel(gl, options) {\n  var id = options.id,\n      drawMode = options.drawMode,\n      vertexCount = options.vertexCount,\n      attributes = options.attributes,\n      modelOptions = options.modelOptions;\n  var materialParser = new GLTFMaterialParser(gl, options);\n  log.info(4, 'createGLTFModel defines: ', materialParser.defines)();\n  var managedResources = [];\n  managedResources.push.apply(managedResources, _toConsumableArray(materialParser.generatedTextures));\n  managedResources.push.apply(managedResources, _toConsumableArray(Object.values(attributes).map(function (attribute) {\n    return attribute.buffer;\n  })));\n  var model = new ModelNode(gl, Object.assign({\n    id: id,\n    drawMode: drawMode,\n    vertexCount: vertexCount,\n    modules: [pbr],\n    defines: materialParser.defines,\n    parameters: materialParser.parameters,\n    vs: addVersionToShader(gl, vs),\n    fs: addVersionToShader(gl, fs),\n    managedResources: managedResources\n  }, modelOptions));\n  model.setProps({\n    attributes: attributes\n  });\n  model.setUniforms(materialParser.uniforms);\n  return model;\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Matrix4 } from 'math.gl';\nimport { Buffer, Accessor, log } from '@luma.gl/webgl';\nimport { GroupNode } from '../scenegraph/';\nimport GLTFAnimator from './gltf-animator';\nimport createGLTFModel from './create-gltf-model';\nvar ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar DEFAULT_OPTIONS = {\n  modelOptions: {},\n  pbrDebug: false,\n  imageBasedLightingEnvironment: null,\n  lights: true,\n  useTangents: false\n};\n\nvar GLTFInstantiator = function () {\n  function GLTFInstantiator(gl) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, GLTFInstantiator);\n\n    this.gl = gl;\n    this.options = Object.assign({}, DEFAULT_OPTIONS, options);\n  }\n\n  _createClass(GLTFInstantiator, [{\n    key: \"instantiate\",\n    value: function instantiate(gltf) {\n      var _this = this;\n\n      this.gltf = gltf;\n      var scenes = (gltf.scenes || []).map(function (scene) {\n        return _this.createScene(scene);\n      });\n      return scenes;\n    }\n  }, {\n    key: \"createAnimator\",\n    value: function createAnimator() {\n      if (Array.isArray(this.gltf.animations)) {\n        return new GLTFAnimator(this.gltf);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"createScene\",\n    value: function createScene(gltfScene) {\n      var _this2 = this;\n\n      var gltfNodes = gltfScene.nodes || [];\n      var nodes = gltfNodes.map(function (node) {\n        return _this2.createNode(node);\n      });\n      var scene = new GroupNode({\n        id: gltfScene.name || gltfScene.id,\n        children: nodes\n      });\n      return scene;\n    }\n  }, {\n    key: \"createNode\",\n    value: function createNode(gltfNode) {\n      var _this3 = this;\n\n      if (!gltfNode._node) {\n        var gltfChildren = gltfNode.children || [];\n        var children = gltfChildren.map(function (child) {\n          return _this3.createNode(child);\n        });\n\n        if (gltfNode.mesh) {\n          children.push(this.createMesh(gltfNode.mesh));\n        }\n\n        var node = new GroupNode({\n          id: gltfNode.name || gltfNode.id,\n          children: children\n        });\n\n        if (gltfNode.matrix) {\n          node.setMatrix(gltfNode.matrix);\n        } else {\n          node.matrix.identity();\n\n          if (gltfNode.translation) {\n            node.matrix.translate(gltfNode.translation);\n          }\n\n          if (gltfNode.rotation) {\n            var rotationMatrix = new Matrix4().fromQuaternion(gltfNode.rotation);\n            node.matrix.multiplyRight(rotationMatrix);\n          }\n\n          if (gltfNode.scale) {\n            node.matrix.scale(gltfNode.scale);\n          }\n        }\n\n        gltfNode._node = node;\n      }\n\n      return gltfNode._node;\n    }\n  }, {\n    key: \"createMesh\",\n    value: function createMesh(gltfMesh) {\n      var _this4 = this;\n\n      if (!gltfMesh._mesh) {\n        var gltfPrimitives = gltfMesh.primitives || [];\n        var primitives = gltfPrimitives.map(function (gltfPrimitive, i) {\n          return _this4.createPrimitive(gltfPrimitive, i, gltfMesh);\n        });\n        var mesh = new GroupNode({\n          id: gltfMesh.name || gltfMesh.id,\n          children: primitives\n        });\n        gltfMesh._mesh = mesh;\n      }\n\n      return gltfMesh._mesh;\n    }\n  }, {\n    key: \"getVertexCount\",\n    value: function getVertexCount(attributes) {\n      log.warn('getVertexCount() not found')();\n    }\n  }, {\n    key: \"createPrimitive\",\n    value: function createPrimitive(gltfPrimitive, i, gltfMesh) {\n      return createGLTFModel(this.gl, Object.assign({\n        id: gltfPrimitive.name || \"\".concat(gltfMesh.name || gltfMesh.id, \"-primitive-\").concat(i),\n        drawMode: gltfPrimitive.mode || 4,\n        vertexCount: gltfPrimitive.indices ? gltfPrimitive.indices.count : this.getVertexCount(gltfPrimitive.attributes),\n        attributes: this.createAttributes(gltfPrimitive.attributes, gltfPrimitive.indices),\n        material: gltfPrimitive.material\n      }, this.options));\n    }\n  }, {\n    key: \"createAttributes\",\n    value: function createAttributes(attributes, indices) {\n      var _this5 = this;\n\n      var loadedAttributes = {};\n      Object.keys(attributes).forEach(function (attrName) {\n        loadedAttributes[attrName] = _this5.createAccessor(attributes[attrName], _this5.createBuffer(attributes[attrName], _this5.gl.ARRAY_BUFFER));\n      });\n\n      if (indices) {\n        loadedAttributes.indices = this.createAccessor(indices, this.createBuffer(indices, this.gl.ELEMENT_ARRAY_BUFFER));\n      }\n\n      log.info(4, 'glTF Attributes', {\n        attributes: attributes,\n        indices: indices,\n        generated: loadedAttributes\n      })();\n      return loadedAttributes;\n    }\n  }, {\n    key: \"createBuffer\",\n    value: function createBuffer(attribute, target) {\n      if (!attribute.bufferView) {\n        attribute.bufferView = {};\n      }\n\n      var bufferView = attribute.bufferView;\n\n      if (!bufferView.lumaBuffers) {\n        bufferView.lumaBuffers = {};\n      }\n\n      if (!bufferView.lumaBuffers[target]) {\n        bufferView.lumaBuffers[target] = new Buffer(this.gl, {\n          id: \"from-\".concat(bufferView.id),\n          data: bufferView.data || attribute.value,\n          target: target\n        });\n      }\n\n      return bufferView.lumaBuffers[target];\n    }\n  }, {\n    key: \"createAccessor\",\n    value: function createAccessor(accessor, buffer) {\n      return new Accessor({\n        buffer: buffer,\n        offset: accessor.byteOffset || 0,\n        stride: accessor.bufferView.byteStride || 0,\n        type: accessor.componentType,\n        size: ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type]\n      });\n    }\n  }, {\n    key: \"createSampler\",\n    value: function createSampler(gltfSampler) {\n      return gltfSampler;\n    }\n  }, {\n    key: \"needsPOT\",\n    value: function needsPOT() {\n      return false;\n    }\n  }]);\n\n  return GLTFInstantiator;\n}();\n\nexport { GLTFInstantiator as default };","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nexport function waitForGLTFAssets(_x) {\n  return _waitForGLTFAssets.apply(this, arguments);\n}\n\nfunction _waitForGLTFAssets() {\n  _waitForGLTFAssets = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltfObjects) {\n    var remaining;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            remaining = [];\n            gltfObjects.scenes.forEach(function (scene) {\n              scene.traverse(function (model) {\n                Object.values(model.model.getUniforms()).forEach(function (uniform) {\n                  if (uniform.loaded === false) {\n                    remaining.push(uniform);\n                  }\n                });\n              });\n            });\n            _context.next = 4;\n            return waitWhileCondition(function () {\n              return remaining.some(function (uniform) {\n                return !uniform.loaded;\n              });\n            });\n\n          case 4:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _waitForGLTFAssets.apply(this, arguments);\n}\n\nfunction waitWhileCondition(_x2) {\n  return _waitWhileCondition.apply(this, arguments);\n}\n\nfunction _waitWhileCondition() {\n  _waitWhileCondition = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(condition) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!condition()) {\n              _context2.next = 5;\n              break;\n            }\n\n            _context2.next = 3;\n            return new Promise(function (resolve) {\n              return requestAnimationFrame(resolve);\n            });\n\n          case 3:\n            _context2.next = 0;\n            break;\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _waitWhileCondition.apply(this, arguments);\n}","import { COORDINATE_SYSTEM, createIterable } from '@deck.gl/core';\nvar RADIAN_PER_DEGREE = Math.PI / 180;\nvar modelMatrix = new Float32Array(16);\nvar valueArray = new Float32Array(12);\n\nfunction calculateTransformMatrix(targetMatrix, orientation, scale) {\n  var pitch = orientation[0] * RADIAN_PER_DEGREE;\n  var yaw = orientation[1] * RADIAN_PER_DEGREE;\n  var roll = orientation[2] * RADIAN_PER_DEGREE;\n  var sr = Math.sin(roll);\n  var sp = Math.sin(pitch);\n  var sw = Math.sin(yaw);\n  var cr = Math.cos(roll);\n  var cp = Math.cos(pitch);\n  var cw = Math.cos(yaw);\n  var scx = scale[0];\n  var scy = scale[1];\n  var scz = scale[2];\n  targetMatrix[0] = scx * cw * cp;\n  targetMatrix[1] = scx * sw * cp;\n  targetMatrix[2] = scx * -sp;\n  targetMatrix[3] = scy * (-sw * cr + cw * sp * sr);\n  targetMatrix[4] = scy * (cw * cr + sw * sp * sr);\n  targetMatrix[5] = scy * cp * sr;\n  targetMatrix[6] = scz * (sw * sr + cw * sp * cr);\n  targetMatrix[7] = scz * (-cw * sr + sw * sp * cr);\n  targetMatrix[8] = scz * cp * cr;\n}\n\nfunction getExtendedMat3FromMat4(mat4) {\n  mat4[0] = mat4[0];\n  mat4[1] = mat4[1];\n  mat4[2] = mat4[2];\n  mat4[3] = mat4[4];\n  mat4[4] = mat4[5];\n  mat4[5] = mat4[6];\n  mat4[6] = mat4[8];\n  mat4[7] = mat4[9];\n  mat4[8] = mat4[10];\n  mat4[9] = mat4[12];\n  mat4[10] = mat4[13];\n  mat4[11] = mat4[14];\n  return mat4.subarray(0, 12);\n}\n\nexport var MATRIX_ATTRIBUTES = {\n  size: 12,\n  accessor: ['getOrientation', 'getScale', 'getTranslation', 'getTransformMatrix'],\n  shaderAttributes: {\n    instanceModelMatrix__LOCATION_0: {\n      size: 3,\n      elementOffset: 0\n    },\n    instanceModelMatrix__LOCATION_1: {\n      size: 3,\n      elementOffset: 3\n    },\n    instanceModelMatrix__LOCATION_2: {\n      size: 3,\n      elementOffset: 6\n    },\n    instanceTranslation: {\n      size: 3,\n      elementOffset: 9\n    }\n  },\n  update: function update(attribute, _ref) {\n    var startRow = _ref.startRow,\n        endRow = _ref.endRow;\n    var _this$props = this.props,\n        data = _this$props.data,\n        getOrientation = _this$props.getOrientation,\n        getScale = _this$props.getScale,\n        getTranslation = _this$props.getTranslation,\n        getTransformMatrix = _this$props.getTransformMatrix;\n    var arrayMatrix = Array.isArray(getTransformMatrix);\n    var constantMatrix = arrayMatrix && getTransformMatrix.length === 16;\n    var constantScale = Array.isArray(getScale);\n    var constantOrientation = Array.isArray(getOrientation);\n    var constantTranslation = Array.isArray(getTranslation);\n    var hasMatrix = constantMatrix || !arrayMatrix && Boolean(getTransformMatrix(data[0]));\n\n    if (hasMatrix) {\n      attribute.constant = constantMatrix;\n    } else {\n      attribute.constant = constantOrientation && constantScale && constantTranslation;\n    }\n\n    var instanceModelMatrixData = attribute.value;\n\n    if (attribute.constant) {\n      var matrix;\n\n      if (hasMatrix) {\n        modelMatrix.set(getTransformMatrix);\n        matrix = getExtendedMat3FromMat4(modelMatrix);\n      } else {\n        matrix = valueArray;\n        var orientation = getOrientation;\n        var scale = getScale;\n        calculateTransformMatrix(matrix, orientation, scale);\n        matrix.set(getTranslation, 9);\n      }\n\n      attribute.value = new Float32Array(matrix);\n    } else {\n      var i = startRow * attribute.size;\n\n      var _createIterable = createIterable(data, startRow, endRow),\n          iterable = _createIterable.iterable,\n          objectInfo = _createIterable.objectInfo;\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = iterable[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var object = _step.value;\n          objectInfo.index++;\n\n          var _matrix = void 0;\n\n          if (hasMatrix) {\n            modelMatrix.set(constantMatrix ? getTransformMatrix : getTransformMatrix(object, objectInfo));\n            _matrix = getExtendedMat3FromMat4(modelMatrix);\n          } else {\n            _matrix = valueArray;\n\n            var _orientation = constantOrientation ? getOrientation : getOrientation(object, objectInfo);\n\n            var _scale = constantScale ? getScale : getScale(object, objectInfo);\n\n            calculateTransformMatrix(_matrix, _orientation, _scale);\n\n            _matrix.set(constantTranslation ? getTranslation : getTranslation(object, objectInfo), 9);\n          }\n\n          instanceModelMatrixData[i++] = _matrix[0];\n          instanceModelMatrixData[i++] = _matrix[1];\n          instanceModelMatrixData[i++] = _matrix[2];\n          instanceModelMatrixData[i++] = _matrix[3];\n          instanceModelMatrixData[i++] = _matrix[4];\n          instanceModelMatrixData[i++] = _matrix[5];\n          instanceModelMatrixData[i++] = _matrix[6];\n          instanceModelMatrixData[i++] = _matrix[7];\n          instanceModelMatrixData[i++] = _matrix[8];\n          instanceModelMatrixData[i++] = _matrix[9];\n          instanceModelMatrixData[i++] = _matrix[10];\n          instanceModelMatrixData[i++] = _matrix[11];\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }\n};\nexport function shouldComposeModelMatrix(viewport, coordinateSystem) {\n  return coordinateSystem === COORDINATE_SYSTEM.CARTESIAN || coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS || coordinateSystem === COORDINATE_SYSTEM.DEFAULT && !viewport.isGeospatial;\n}","export default \"#version 300 es\\nin vec3 instancePositions;\\nin vec3 instancePositions64Low;\\nin vec4 instanceColors;\\nin vec3 instancePickingColors;\\nin mat3 instanceModelMatrix;\\nin vec3 instanceTranslation;\\nuniform float sizeScale;\\nuniform float sizeMinPixels;\\nuniform float sizeMaxPixels;\\nuniform mat4 sceneModelMatrix;\\nuniform bool composeModelMatrix;\\nin vec4 POSITION;\\n\\n#ifdef HAS_UV\\n  in vec2 TEXCOORD_0;\\n#endif\\n\\n#ifdef MODULE_PBR\\n  #ifdef HAS_NORMALS\\n    in vec4 NORMAL;\\n  #endif\\n#endif\\nout vec4 vColor;\\n#ifndef MODULE_PBR\\n  #ifdef HAS_UV\\n    out vec2 vTEXCOORD_0;\\n  #endif\\n#endif\\nvoid main(void) {\\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\\n    vTEXCOORD_0 = TEXCOORD_0;\\n    geometry.uv = vTEXCOORD_0;\\n  #endif\\n\\n  geometry.worldPosition = instancePositions;\\n  geometry.pickingColor = instancePickingColors;\\n\\n  #ifdef MODULE_PBR\\n    #ifdef HAS_NORMALS\\n      pbr_vNormal = project_normal(instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz);\\n      geometry.normal = pbr_vNormal;\\n    #endif\\n\\n    #ifdef HAS_UV\\n      pbr_vUV = TEXCOORD_0;\\n    #else\\n      pbr_vUV = vec2(0., 0.);\\n    #endif\\n    geometry.uv = pbr_vUV;\\n  #endif\\n\\n  float originalSize = project_size_to_pixel(sizeScale);\\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\\n\\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\\n  if(composeModelMatrix) {\\n    DECKGL_FILTER_SIZE(pos, geometry);\\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\\n  }\\n  else {\\n    pos = project_size(pos);\\n    DECKGL_FILTER_SIZE(pos, geometry);\\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\\n  }\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n\\n  #ifdef MODULE_PBR\\n    pbr_vPosition = geometry.position.xyz;\\n  #endif\\n\\n  vColor = instanceColors;\\n  DECKGL_FILTER_COLOR(vColor, geometry);\\n}\\n\";","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { Layer, project32, picking, log } from '@deck.gl/core';\nimport { isWebGL2 } from '@luma.gl/core';\nimport { pbr } from '@luma.gl/shadertools';\nimport { ScenegraphNode, createGLTFObjects } from '@luma.gl/experimental';\nimport { waitForGLTFAssets } from './gltf-utils';\nimport { MATRIX_ATTRIBUTES, shouldComposeModelMatrix } from '../utils/matrix';\nimport vs from './scenegraph-layer-vertex.glsl';\nimport fs from './scenegraph-layer-fragment.glsl';\nvar DEFAULT_COLOR = [255, 255, 255, 255];\nvar defaultProps = {\n  scenegraph: {\n    type: 'object',\n    value: null,\n    async: true\n  },\n  getScene: function getScene(gltf) {\n    if (gltf && gltf.scenes) {\n      return _typeof(gltf.scene) === 'object' ? gltf.scene : gltf.scenes[gltf.scene || 0];\n    }\n\n    return gltf;\n  },\n  getAnimator: function getAnimator(scenegraph) {\n    return scenegraph && scenegraph.animator;\n  },\n  _animations: null,\n  sizeScale: {\n    type: 'number',\n    value: 1,\n    min: 0\n  },\n  sizeMinPixels: {\n    type: 'number',\n    min: 0,\n    value: 0\n  },\n  sizeMaxPixels: {\n    type: 'number',\n    min: 0,\n    value: Number.MAX_SAFE_INTEGER\n  },\n  getPosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.position;\n    }\n  },\n  getColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  _lighting: 'flat',\n  _imageBasedLightingEnvironment: null,\n  getOrientation: {\n    type: 'accessor',\n    value: [0, 0, 0]\n  },\n  getScale: {\n    type: 'accessor',\n    value: [1, 1, 1]\n  },\n  getTranslation: {\n    type: 'accessor',\n    value: [0, 0, 0]\n  },\n  getTransformMatrix: {\n    type: 'accessor',\n    value: []\n  }\n};\n\nvar ScenegraphLayer = function (_Layer) {\n  _inherits(ScenegraphLayer, _Layer);\n\n  function ScenegraphLayer() {\n    _classCallCheck(this, ScenegraphLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ScenegraphLayer).apply(this, arguments));\n  }\n\n  _createClass(ScenegraphLayer, [{\n    key: \"initializeState\",\n    value: function initializeState() {\n      var attributeManager = this.getAttributeManager();\n      attributeManager.addInstanced({\n        instancePositions: {\n          size: 3,\n          type: 5130,\n          fp64: this.use64bitPositions(),\n          accessor: 'getPosition',\n          transition: true\n        },\n        instanceColors: {\n          type: 5121,\n          size: this.props.colorFormat.length,\n          accessor: 'getColor',\n          normalized: true,\n          defaultValue: DEFAULT_COLOR,\n          transition: true\n        },\n        instanceModelMatrix: MATRIX_ATTRIBUTES\n      });\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(params) {\n      _get(_getPrototypeOf(ScenegraphLayer.prototype), \"updateState\", this).call(this, params);\n\n      var props = params.props,\n          oldProps = params.oldProps;\n\n      if (props.scenegraph !== oldProps.scenegraph) {\n        this._updateScenegraph(props);\n      } else if (props._animations !== oldProps._animations) {\n        this._applyAnimationsProp(this.state.scenegraph, this.state.animator, props._animations);\n      }\n    }\n  }, {\n    key: \"finalizeState\",\n    value: function finalizeState() {\n      _get(_getPrototypeOf(ScenegraphLayer.prototype), \"finalizeState\", this).call(this);\n\n      this._deleteScenegraph();\n    }\n  }, {\n    key: \"_updateScenegraph\",\n    value: function _updateScenegraph(props) {\n      var _this = this;\n\n      var gl = this.context.gl;\n      var scenegraphData;\n\n      if (props.scenegraph instanceof ScenegraphNode) {\n        scenegraphData = {\n          scenes: [props.scenegraph]\n        };\n      } else if (props.scenegraph && !props.scenegraph.gltf) {\n        var gltf = props.scenegraph;\n        var gltfObjects = createGLTFObjects(gl, gltf, this.getLoadOptions());\n        scenegraphData = Object.assign({\n          gltf: gltf\n        }, gltfObjects);\n        waitForGLTFAssets(gltfObjects).then(function () {\n          return _this.setNeedsRedraw();\n        });\n      } else {\n        log.deprecated('ScenegraphLayer.props.scenegraph', 'Use GLTFLoader instead of GLTFScenegraphLoader')();\n        scenegraphData = props.scenegraph;\n      }\n\n      var options = {\n        layer: this,\n        gl: gl\n      };\n      var scenegraph = props.getScene(scenegraphData, options);\n      var animator = props.getAnimator(scenegraphData, options);\n\n      if (scenegraph instanceof ScenegraphNode) {\n        this._deleteScenegraph();\n\n        this._applyAllAttributes(scenegraph);\n\n        this._applyAnimationsProp(scenegraph, animator, props._animations);\n\n        this.setState({\n          scenegraph: scenegraph,\n          animator: animator\n        });\n      } else if (scenegraph !== null) {\n        log.warn('invalid scenegraph:', scenegraph)();\n      }\n    }\n  }, {\n    key: \"_applyAllAttributes\",\n    value: function _applyAllAttributes(scenegraph) {\n      var _this2 = this;\n\n      if (this.state.attributesAvailable) {\n        var allAttributes = this.getAttributeManager().getAttributes();\n        scenegraph.traverse(function (model) {\n          _this2._setModelAttributes(model.model, allAttributes);\n        });\n      }\n    }\n  }, {\n    key: \"_applyAnimationsProp\",\n    value: function _applyAnimationsProp(scenegraph, animator, animationsProp) {\n      if (!scenegraph || !animator || !animationsProp) {\n        return;\n      }\n\n      var animations = animator.getAnimations();\n      Object.keys(animationsProp).sort().forEach(function (key) {\n        var value = animationsProp[key];\n\n        if (key === '*') {\n          animations.forEach(function (animation) {\n            Object.assign(animation, value);\n          });\n        } else if (Number.isFinite(Number(key))) {\n          var number = Number(key);\n\n          if (number >= 0 && number < animations.length) {\n            Object.assign(animations[number], value);\n          } else {\n            log.warn(\"animation \".concat(key, \" not found\"))();\n          }\n        } else {\n          var findResult = animations.find(function (_ref) {\n            var name = _ref.name;\n            return name === key;\n          });\n\n          if (findResult) {\n            Object.assign(findResult, value);\n          } else {\n            log.warn(\"animation \".concat(key, \" not found\"))();\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_deleteScenegraph\",\n    value: function _deleteScenegraph() {\n      var scenegraph = this.state.scenegraph;\n\n      if (scenegraph instanceof ScenegraphNode) {\n        scenegraph[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"getLoadOptions\",\n    value: function getLoadOptions() {\n      var modules = [project32, picking];\n      var _this$props = this.props,\n          _lighting = _this$props._lighting,\n          _imageBasedLightingEnvironment = _this$props._imageBasedLightingEnvironment;\n\n      if (_lighting === 'pbr') {\n        modules.push(pbr);\n      }\n\n      var env = null;\n\n      if (_imageBasedLightingEnvironment) {\n        if (typeof _imageBasedLightingEnvironment === 'function') {\n          env = _imageBasedLightingEnvironment({\n            gl: this.context.gl,\n            layer: this\n          });\n        } else {\n          env = _imageBasedLightingEnvironment;\n        }\n      }\n\n      return {\n        gl: this.context.gl,\n        waitForFullLoad: true,\n        imageBasedLightingEnvironment: env,\n        modelOptions: {\n          vs: vs,\n          fs: fs,\n          modules: modules,\n          isInstanced: true,\n          transpileToGLSL100: !isWebGL2(this.context.gl)\n        },\n        useTangents: false\n      };\n    }\n  }, {\n    key: \"updateAttributes\",\n    value: function updateAttributes(changedAttributes) {\n      var _this3 = this;\n\n      this.setState({\n        attributesAvailable: true\n      });\n      if (!this.state.scenegraph) return;\n      this.state.scenegraph.traverse(function (model) {\n        _this3._setModelAttributes(model.model, changedAttributes);\n      });\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref2) {\n      var _ref2$moduleParameter = _ref2.moduleParameters,\n          moduleParameters = _ref2$moduleParameter === void 0 ? null : _ref2$moduleParameter,\n          _ref2$parameters = _ref2.parameters,\n          parameters = _ref2$parameters === void 0 ? {} : _ref2$parameters,\n          context = _ref2.context;\n      if (!this.state.scenegraph) return;\n\n      if (this.props._animations && this.state.animator) {\n        this.state.animator.animate(context.animationProps.time);\n      }\n\n      var viewport = this.context.viewport;\n      var _this$props2 = this.props,\n          sizeScale = _this$props2.sizeScale,\n          sizeMinPixels = _this$props2.sizeMinPixels,\n          sizeMaxPixels = _this$props2.sizeMaxPixels,\n          opacity = _this$props2.opacity,\n          coordinateSystem = _this$props2.coordinateSystem;\n      var numInstances = this.getNumInstances();\n      this.state.scenegraph.traverse(function (model, _ref3) {\n        var worldMatrix = _ref3.worldMatrix;\n        model.model.setInstanceCount(numInstances);\n        model.updateModuleSettings(moduleParameters);\n        model.draw({\n          parameters: parameters,\n          uniforms: {\n            sizeScale: sizeScale,\n            opacity: opacity,\n            sizeMinPixels: sizeMinPixels,\n            sizeMaxPixels: sizeMaxPixels,\n            composeModelMatrix: shouldComposeModelMatrix(viewport, coordinateSystem),\n            sceneModelMatrix: worldMatrix,\n            u_Camera: model.model.getUniforms().project_uCameraPosition\n          }\n        });\n      });\n    }\n  }]);\n\n  return ScenegraphLayer;\n}(Layer);\n\nexport { ScenegraphLayer as default };\nScenegraphLayer.layerName = 'ScenegraphLayer';\nScenegraphLayer.defaultProps = defaultProps;","import GLTFInstantiator from './gltf-instantiator';\nexport default function createGLTFObjects(gl, gltf, options) {\n  var instantiator = new GLTFInstantiator(gl, options);\n  var scenes = instantiator.instantiate(gltf);\n  var animator = instantiator.createAnimator();\n  return {\n    scenes: scenes,\n    animator: animator\n  };\n}","export default \"#version 300 es\\nuniform float opacity;\\nin vec4 vColor;\\n\\nout vec4 fragmentColor;\\n#ifndef MODULE_PBR\\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\\n    in vec2 vTEXCOORD_0;\\n    uniform sampler2D u_BaseColorSampler;\\n  #endif\\n#endif\\n\\nvoid main(void) {\\n  #ifdef MODULE_PBR\\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\\n    geometry.uv = pbr_vUV;\\n  #else\\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\\n      geometry.uv = vTEXCOORD_0;\\n    #else\\n      fragmentColor = vColor;\\n    #endif\\n  #endif\\n\\n  fragmentColor.a *= opacity;\\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\\n}\\n\";","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { Layer, project32, phongLighting, picking, COORDINATE_SYSTEM, log } from '@deck.gl/core';\nimport { Model, Geometry, Texture2D, isWebGL2 } from '@luma.gl/core';\nimport { hasFeature, FEATURES } from '@luma.gl/webgl';\nimport { MATRIX_ATTRIBUTES, shouldComposeModelMatrix } from '../utils/matrix';\nimport vs from './simple-mesh-layer-vertex.glsl';\nimport fs from './simple-mesh-layer-fragment.glsl';\n\nfunction getTextureFromData(gl, data, opts) {\n  if (data instanceof Texture2D) {\n    return data;\n  }\n\n  return new Texture2D(gl, Object.assign({\n    data: data\n  }, opts));\n}\n\nfunction validateGeometryAttributes(attributes, useMeshColors) {\n  var hasColorAttribute = attributes.COLOR_0 || attributes.colors;\n  var useColorAttribute = hasColorAttribute && useMeshColors;\n\n  if (!useColorAttribute) {\n    attributes.colors = {\n      constant: true,\n      value: new Float32Array([1, 1, 1])\n    };\n  }\n\n  log.assert(attributes.positions || attributes.POSITION, 'SimpleMeshLayer requires \"postions\" or \"POSITION\" attribute in mesh property.');\n}\n\nfunction getGeometry(data, useMeshColors) {\n  if (data.attributes) {\n    validateGeometryAttributes(data.attributes, useMeshColors);\n\n    if (data instanceof Geometry) {\n      return data;\n    } else {\n      return new Geometry(data);\n    }\n  } else if (data.positions || data.POSITION) {\n    validateGeometryAttributes(data, useMeshColors);\n    return new Geometry({\n      attributes: data\n    });\n  }\n\n  throw Error('Invalid mesh');\n}\n\nvar DEFAULT_COLOR = [0, 0, 0, 255];\nvar defaultProps = {\n  mesh: {\n    value: null,\n    type: 'object',\n    async: true\n  },\n  texture: {\n    type: 'object',\n    value: null,\n    async: true\n  },\n  sizeScale: {\n    type: 'number',\n    value: 1,\n    min: 0\n  },\n  _useMeshColors: {\n    type: 'boolean',\n    value: false\n  },\n  parameters: {\n    depthTest: true,\n    depthFunc: 515\n  },\n  _instanced: true,\n  wireframe: false,\n  material: true,\n  getPosition: {\n    type: 'accessor',\n    value: function value(x) {\n      return x.position;\n    }\n  },\n  getColor: {\n    type: 'accessor',\n    value: DEFAULT_COLOR\n  },\n  getOrientation: {\n    type: 'accessor',\n    value: [0, 0, 0]\n  },\n  getScale: {\n    type: 'accessor',\n    value: [1, 1, 1]\n  },\n  getTranslation: {\n    type: 'accessor',\n    value: [0, 0, 0]\n  },\n  getTransformMatrix: {\n    type: 'accessor',\n    value: []\n  }\n};\n\nvar SimpleMeshLayer = function (_Layer) {\n  _inherits(SimpleMeshLayer, _Layer);\n\n  function SimpleMeshLayer() {\n    _classCallCheck(this, SimpleMeshLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SimpleMeshLayer).apply(this, arguments));\n  }\n\n  _createClass(SimpleMeshLayer, [{\n    key: \"getShaders\",\n    value: function getShaders() {\n      var transpileToGLSL100 = !isWebGL2(this.context.gl);\n      var defines = {};\n\n      if (hasFeature(this.context.gl, FEATURES.GLSL_DERIVATIVES)) {\n        defines.DERIVATIVES_AVAILABLE = 1;\n      }\n\n      return _get(_getPrototypeOf(SimpleMeshLayer.prototype), \"getShaders\", this).call(this, {\n        vs: vs,\n        fs: fs,\n        modules: [project32, phongLighting, picking],\n        transpileToGLSL100: transpileToGLSL100,\n        defines: defines\n      });\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {\n      var attributeManager = this.getAttributeManager();\n      attributeManager.addInstanced({\n        instancePositions: {\n          transition: true,\n          type: 5130,\n          fp64: this.use64bitPositions(),\n          size: 3,\n          accessor: 'getPosition'\n        },\n        instanceColors: {\n          type: 5121,\n          transition: true,\n          size: this.props.colorFormat.length,\n          normalized: true,\n          accessor: 'getColor',\n          defaultValue: [0, 0, 0, 255]\n        },\n        instanceModelMatrix: MATRIX_ATTRIBUTES\n      });\n      this.setState({\n        emptyTexture: new Texture2D(this.context.gl, {\n          data: new Uint8Array(4),\n          width: 1,\n          height: 1\n        })\n      });\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref) {\n      var props = _ref.props,\n          oldProps = _ref.oldProps,\n          changeFlags = _ref.changeFlags;\n\n      _get(_getPrototypeOf(SimpleMeshLayer.prototype), \"updateState\", this).call(this, {\n        props: props,\n        oldProps: oldProps,\n        changeFlags: changeFlags\n      });\n\n      if (props.mesh !== oldProps.mesh || changeFlags.extensionsChanged) {\n        if (this.state.model) {\n          this.state.model[\"delete\"]();\n        }\n\n        if (props.mesh) {\n          this.setState({\n            model: this.getModel(props.mesh)\n          });\n          var attributes = props.mesh.attributes || props.mesh;\n          this.setState({\n            hasNormals: Boolean(attributes.NORMAL || attributes.normals)\n          });\n        }\n\n        this.getAttributeManager().invalidateAll();\n      }\n\n      if (props.texture !== oldProps.texture) {\n        this.setTexture(props.texture);\n      }\n\n      if (this.state.model) {\n        this.state.model.setDrawMode(this.props.wireframe ? 3 : 4);\n      }\n    }\n  }, {\n    key: \"finalizeState\",\n    value: function finalizeState() {\n      _get(_getPrototypeOf(SimpleMeshLayer.prototype), \"finalizeState\", this).call(this);\n\n      this.state.emptyTexture[\"delete\"]();\n\n      if (this.state.texture) {\n        this.state.texture[\"delete\"]();\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(_ref2) {\n      var uniforms = _ref2.uniforms;\n\n      if (!this.state.model) {\n        return;\n      }\n\n      var viewport = this.context.viewport;\n      var _this$props = this.props,\n          sizeScale = _this$props.sizeScale,\n          coordinateSystem = _this$props.coordinateSystem,\n          _instanced = _this$props._instanced;\n      this.state.model.draw({\n        uniforms: Object.assign({}, uniforms, {\n          sizeScale: sizeScale,\n          composeModelMatrix: !_instanced || shouldComposeModelMatrix(viewport, coordinateSystem),\n          flatShading: !this.state.hasNormals\n        })\n      });\n    }\n  }, {\n    key: \"getModel\",\n    value: function getModel(mesh) {\n      var model = new Model(this.context.gl, Object.assign({}, this.getShaders(), {\n        id: this.props.id,\n        geometry: getGeometry(mesh, this.props._useMeshColors),\n        isInstanced: true\n      }));\n      var _this$state = this.state,\n          texture = _this$state.texture,\n          emptyTexture = _this$state.emptyTexture;\n      model.setUniforms({\n        sampler: texture || emptyTexture,\n        hasTexture: Boolean(texture)\n      });\n      return model;\n    }\n  }, {\n    key: \"setTexture\",\n    value: function setTexture(image) {\n      var gl = this.context.gl;\n      var _this$state2 = this.state,\n          emptyTexture = _this$state2.emptyTexture,\n          model = _this$state2.model;\n\n      if (this.state.texture) {\n        this.state.texture[\"delete\"]();\n      }\n\n      var texture = image ? getTextureFromData(gl, image) : null;\n      this.setState({\n        texture: texture\n      });\n\n      if (model) {\n        model.setUniforms({\n          sampler: texture || emptyTexture,\n          hasTexture: Boolean(texture)\n        });\n      }\n    }\n  }]);\n\n  return SimpleMeshLayer;\n}(Layer);\n\nexport { SimpleMeshLayer as default };\nSimpleMeshLayer.layerName = 'SimpleMeshLayer';\nSimpleMeshLayer.defaultProps = defaultProps;","export default \"#version 300 es\\n#define SHADER_NAME simple-mesh-layer-vs\\nuniform float sizeScale;\\nuniform bool composeModelMatrix;\\nin vec3 positions;\\nin vec3 normals;\\nin vec3 colors;\\nin vec2 texCoords;\\nin vec3 instancePositions;\\nin vec3 instancePositions64Low;\\nin vec4 instanceColors;\\nin vec3 instancePickingColors;\\nin mat3 instanceModelMatrix;\\nin vec3 instanceTranslation;\\nout vec2 vTexCoord;\\nout vec3 cameraPosition;\\nout vec3 normals_commonspace;\\nout vec4 position_commonspace;\\nout vec4 vColor;\\n\\nvoid main(void) {\\n  geometry.worldPosition = instancePositions;\\n  geometry.uv = texCoords;\\n  geometry.pickingColor = instancePickingColors;\\n\\n  vTexCoord = texCoords;\\n  cameraPosition = project_uCameraPosition;\\n  normals_commonspace = project_normal(instanceModelMatrix * normals);\\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\\n  geometry.normal = normals_commonspace;\\n\\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\\n\\n  if (composeModelMatrix) {\\n    DECKGL_FILTER_SIZE(pos, geometry);\\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\\n  }\\n  else {\\n    pos = project_size(pos);\\n    DECKGL_FILTER_SIZE(pos, geometry);\\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\\n  }\\n\\n  geometry.position = position_commonspace;\\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\\n\\n  DECKGL_FILTER_COLOR(vColor, geometry);\\n}\\n\";","export default \"#version 300 es\\n#define SHADER_NAME simple-mesh-layer-fs\\n\\nprecision highp float;\\n\\nuniform bool hasTexture;\\nuniform sampler2D sampler;\\nuniform bool flatShading;\\nuniform float opacity;\\n\\nin vec2 vTexCoord;\\nin vec3 cameraPosition;\\nin vec3 normals_commonspace;\\nin vec4 position_commonspace;\\nin vec4 vColor;\\n\\nout vec4 fragColor;\\n\\nvoid main(void) {\\n  geometry.uv = vTexCoord;\\n\\n  vec3 normal;\\n  if (flatShading) {\\n#ifdef DERIVATIVES_AVAILABLE\\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\\n#else\\n    normal = vec3(0.0, 0.0, 1.0);\\n#endif\\n  } else {\\n    normal = normals_commonspace;\\n  }\\n\\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\\n  fragColor = vec4(lightColor, color.a * opacity);\\n\\n  DECKGL_FILTER_COLOR(fragColor, geometry);\\n}\\n\";","import { Vector3, isArray, toRadians, toDegrees, config } from '@math.gl/core';\nimport { WGS84_CONSTANTS } from './constants';\n\nvar noop = function noop(x) {\n  return x;\n};\n\nvar scratchVector = new Vector3();\nexport function fromCartographic(cartographic, result) {\n  var map = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop;\n\n  if (isArray(cartographic)) {\n    result[0] = map(cartographic[0]);\n    result[1] = map(cartographic[1]);\n    result[2] = cartographic[2];\n  } else if ('longitude' in cartographic) {\n    result[0] = map(cartographic.longitude);\n    result[1] = map(cartographic.latitude);\n    result[2] = cartographic.height;\n  } else {\n    result[0] = map(cartographic.x);\n    result[1] = map(cartographic.y);\n    result[2] = cartographic.z;\n  }\n\n  return result;\n}\nexport function fromCartographicToRadians(cartographic) {\n  var vector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scratchVector;\n  return fromCartographic(cartographic, vector, config._cartographicRadians ? noop : toRadians);\n}\nexport function fromCartographicToDegrees(cartographic) {\n  var vector = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scratchVector;\n  return fromCartographic(cartographic, vector, config._cartographicRadians ? toDegrees : noop);\n}\nexport function toCartographic(vector, cartographic) {\n  var map = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : noop;\n\n  if (isArray(cartographic)) {\n    cartographic[0] = map(vector[0]);\n    cartographic[1] = map(vector[1]);\n    cartographic[2] = vector[2];\n  } else if ('longitude' in cartographic) {\n    cartographic.longitude = map(vector[0]);\n    cartographic.latitude = map(vector[1]);\n    cartographic.height = vector[2];\n  } else {\n    cartographic.x = map(vector[0]);\n    cartographic.y = map(vector[1]);\n    cartographic.z = vector[2];\n  }\n\n  return cartographic;\n}\nexport function toCartographicFromRadians(vector, cartographic) {\n  return toCartographic(vector, cartographic, config._cartographicRadians ? noop : toDegrees);\n}\nexport function toCartographicFromDegrees(vector, cartographic) {\n  return toCartographic(vector, cartographic, config._cartographicRadians ? toRadians : noop);\n}\nexport function isWGS84(vector) {\n  if (!vector) {\n    return false;\n  }\n\n  scratchVector.from(vector);\n  var oneOverRadiiSquared = WGS84_CONSTANTS.oneOverRadiiSquared,\n      centerToleranceSquared = WGS84_CONSTANTS.centerToleranceSquared;\n  var x2 = vector[0] * vector[0] * oneOverRadiiSquared[0];\n  var y2 = vector[1] * vector[1] * oneOverRadiiSquared[1];\n  var z2 = vector[2] * vector[2] * oneOverRadiiSquared[2];\n  return Math.abs(x2 + y2 + z2 - 1) < centerToleranceSquared;\n}","export var WGS84_RADIUS_X = 6378137.0;\nexport var WGS84_RADIUS_Y = 6378137.0;\nexport var WGS84_RADIUS_Z = 6356752.3142451793;\nexport var WGS84_CONSTANTS = {\n  radii: [WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z],\n  radiiSquared: [WGS84_RADIUS_X * WGS84_RADIUS_X, WGS84_RADIUS_Y * WGS84_RADIUS_Y, WGS84_RADIUS_Z * WGS84_RADIUS_Z],\n  oneOverRadii: [1.0 / WGS84_RADIUS_X, 1.0 / WGS84_RADIUS_Y, 1.0 / WGS84_RADIUS_Z],\n  oneOverRadiiSquared: [1.0 / (WGS84_RADIUS_X * WGS84_RADIUS_X), 1.0 / (WGS84_RADIUS_Y * WGS84_RADIUS_Y), 1.0 / (WGS84_RADIUS_Z * WGS84_RADIUS_Z)],\n  maximumRadius: Math.max(WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z),\n  centerToleranceSquared: 1e-1\n};","import { Vector3, assert, _MathUtils } from '@math.gl/core';\nimport * as vec3 from 'gl-matrix/vec3';\nvar scratchVector = new Vector3();\nvar scaleToGeodeticSurfaceIntersection = new Vector3();\nvar scaleToGeodeticSurfaceGradient = new Vector3();\nexport default function scaleToGeodeticSurface(cartesian, ellipsoid) {\n  var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Vector3();\n  var oneOverRadii = ellipsoid.oneOverRadii,\n      oneOverRadiiSquared = ellipsoid.oneOverRadiiSquared,\n      centerToleranceSquared = ellipsoid.centerToleranceSquared;\n  scratchVector.from(cartesian);\n  var positionX = cartesian.x;\n  var positionY = cartesian.y;\n  var positionZ = cartesian.z;\n  var oneOverRadiiX = oneOverRadii.x;\n  var oneOverRadiiY = oneOverRadii.y;\n  var oneOverRadiiZ = oneOverRadii.z;\n  var x2 = positionX * positionX * oneOverRadiiX * oneOverRadiiX;\n  var y2 = positionY * positionY * oneOverRadiiY * oneOverRadiiY;\n  var z2 = positionZ * positionZ * oneOverRadiiZ * oneOverRadiiZ;\n  var squaredNorm = x2 + y2 + z2;\n  var ratio = Math.sqrt(1.0 / squaredNorm);\n\n  if (!Number.isFinite(ratio)) {\n    return undefined;\n  }\n\n  var intersection = scaleToGeodeticSurfaceIntersection;\n  intersection.copy(cartesian).scale(ratio);\n\n  if (squaredNorm < centerToleranceSquared) {\n    return intersection.to(result);\n  }\n\n  var oneOverRadiiSquaredX = oneOverRadiiSquared.x;\n  var oneOverRadiiSquaredY = oneOverRadiiSquared.y;\n  var oneOverRadiiSquaredZ = oneOverRadiiSquared.z;\n  var gradient = scaleToGeodeticSurfaceGradient;\n  gradient.set(intersection.x * oneOverRadiiSquaredX * 2.0, intersection.y * oneOverRadiiSquaredY * 2.0, intersection.z * oneOverRadiiSquaredZ * 2.0);\n  var lambda = (1.0 - ratio) * cartesian.len() / (0.5 * gradient.len());\n  var correction = 0.0;\n  var xMultiplier;\n  var yMultiplier;\n  var zMultiplier;\n  var func;\n\n  do {\n    lambda -= correction;\n    xMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredX);\n    yMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredY);\n    zMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredZ);\n    var xMultiplier2 = xMultiplier * xMultiplier;\n    var yMultiplier2 = yMultiplier * yMultiplier;\n    var zMultiplier2 = zMultiplier * zMultiplier;\n    var xMultiplier3 = xMultiplier2 * xMultiplier;\n    var yMultiplier3 = yMultiplier2 * yMultiplier;\n    var zMultiplier3 = zMultiplier2 * zMultiplier;\n    func = x2 * xMultiplier2 + y2 * yMultiplier2 + z2 * zMultiplier2 - 1.0;\n    var denominator = x2 * xMultiplier3 * oneOverRadiiSquaredX + y2 * yMultiplier3 * oneOverRadiiSquaredY + z2 * zMultiplier3 * oneOverRadiiSquaredZ;\n    var derivative = -2.0 * denominator;\n    correction = func / derivative;\n  } while (Math.abs(func) > _MathUtils.EPSILON12);\n\n  return scratchVector.scale([xMultiplier, yMultiplier, zMultiplier]).to(result);\n}","import { Vector3, assert, equals as equalsEpsilon } from '@math.gl/core';\nvar EPSILON14 = 1e-14;\nvar scratchOrigin = new Vector3();\nvar VECTOR_PRODUCT_LOCAL_FRAME = {\n  up: {\n    south: 'east',\n    north: 'west',\n    west: 'south',\n    east: 'north'\n  },\n  down: {\n    south: 'west',\n    north: 'east',\n    west: 'north',\n    east: 'south'\n  },\n  south: {\n    up: 'west',\n    down: 'east',\n    west: 'down',\n    east: 'up'\n  },\n  north: {\n    up: 'east',\n    down: 'west',\n    west: 'up',\n    east: 'down'\n  },\n  west: {\n    up: 'north',\n    down: 'south',\n    north: 'down',\n    south: 'up'\n  },\n  east: {\n    up: 'south',\n    down: 'north',\n    north: 'up',\n    south: 'down'\n  }\n};\nvar degeneratePositionLocalFrame = {\n  north: [-1, 0, 0],\n  east: [0, 1, 0],\n  up: [0, 0, 1],\n  south: [1, 0, 0],\n  west: [0, -1, 0],\n  down: [0, 0, -1]\n};\nvar scratchAxisVectors = {\n  east: new Vector3(),\n  north: new Vector3(),\n  up: new Vector3(),\n  west: new Vector3(),\n  south: new Vector3(),\n  down: new Vector3()\n};\nvar scratchVector1 = new Vector3();\nvar scratchVector2 = new Vector3();\nvar scratchVector3 = new Vector3();\nexport default function localFrameToFixedFrame(ellipsoid, firstAxis, secondAxis, thirdAxis, cartesianOrigin, result) {\n  var thirdAxisInferred = VECTOR_PRODUCT_LOCAL_FRAME[firstAxis] && VECTOR_PRODUCT_LOCAL_FRAME[firstAxis][secondAxis];\n  assert(thirdAxisInferred && (!thirdAxis || thirdAxis === thirdAxisInferred));\n  var firstAxisVector;\n  var secondAxisVector;\n  var thirdAxisVector;\n  var origin = scratchOrigin.copy(cartesianOrigin);\n  var atPole = equalsEpsilon(origin.x, 0.0, EPSILON14) && equalsEpsilon(origin.y, 0.0, EPSILON14);\n\n  if (atPole) {\n    var sign = Math.sign(origin.z);\n    firstAxisVector = scratchVector1.fromArray(degeneratePositionLocalFrame[firstAxis]);\n\n    if (firstAxis !== 'east' && firstAxis !== 'west') {\n      firstAxisVector.scale(sign);\n    }\n\n    secondAxisVector = scratchVector2.fromArray(degeneratePositionLocalFrame[secondAxis]);\n\n    if (secondAxis !== 'east' && secondAxis !== 'west') {\n      secondAxisVector.scale(sign);\n    }\n\n    thirdAxisVector = scratchVector3.fromArray(degeneratePositionLocalFrame[thirdAxis]);\n\n    if (thirdAxis !== 'east' && thirdAxis !== 'west') {\n      thirdAxisVector.scale(sign);\n    }\n  } else {\n    var up = scratchAxisVectors.up,\n        east = scratchAxisVectors.east,\n        north = scratchAxisVectors.north;\n    east.set(-origin.y, origin.x, 0.0).normalize();\n    ellipsoid.geodeticSurfaceNormal(origin, up);\n    north.copy(up).cross(east);\n    var down = scratchAxisVectors.down,\n        west = scratchAxisVectors.west,\n        south = scratchAxisVectors.south;\n    down.copy(up).scale(-1);\n    west.copy(east).scale(-1);\n    south.copy(north).scale(-1);\n    firstAxisVector = scratchAxisVectors[firstAxis];\n    secondAxisVector = scratchAxisVectors[secondAxis];\n    thirdAxisVector = scratchAxisVectors[thirdAxis];\n  }\n\n  result[0] = firstAxisVector.x;\n  result[1] = firstAxisVector.y;\n  result[2] = firstAxisVector.z;\n  result[3] = 0.0;\n  result[4] = secondAxisVector.x;\n  result[5] = secondAxisVector.y;\n  result[6] = secondAxisVector.z;\n  result[7] = 0.0;\n  result[8] = thirdAxisVector.x;\n  result[9] = thirdAxisVector.y;\n  result[10] = thirdAxisVector.z;\n  result[11] = 0.0;\n  result[12] = origin.x;\n  result[13] = origin.y;\n  result[14] = origin.z;\n  result[15] = 1.0;\n  return result;\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { Vector3, Matrix4, toRadians, toDegrees, assert, equals, _MathUtils } from '@math.gl/core';\nimport * as vec3 from 'gl-matrix/vec3';\nimport { WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z } from '../constants';\nimport { fromCartographicToRadians, toCartographicFromRadians } from '../type-utils';\nimport _scaleToGeodeticSurface from './helpers/scale-to-geodetic-surface';\nimport _localFrameToFixedFrame from './helpers/ellipsoid-transform';\nvar scratchVector = new Vector3();\nvar scratchNormal = new Vector3();\nvar scratchK = new Vector3();\nvar scratchPosition = new Vector3();\nvar scratchHeight = new Vector3();\nvar scratchCartesian = new Vector3();\nvar wgs84;\n\nvar Ellipsoid = function () {\n  _createClass(Ellipsoid, null, [{\n    key: \"WGS84\",\n    get: function get() {\n      wgs84 = wgs84 || new Ellipsoid(WGS84_RADIUS_X, WGS84_RADIUS_Y, WGS84_RADIUS_Z);\n      return wgs84;\n    }\n  }]);\n\n  function Ellipsoid() {\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0.0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n    var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.0;\n\n    _classCallCheck(this, Ellipsoid);\n\n    assert(x >= 0.0);\n    assert(y >= 0.0);\n    assert(z >= 0.0);\n    this.radii = new Vector3(x, y, z);\n    this.radiiSquared = new Vector3(x * x, y * y, z * z);\n    this.radiiToTheFourth = new Vector3(x * x * x * x, y * y * y * y, z * z * z * z);\n    this.oneOverRadii = new Vector3(x === 0.0 ? 0.0 : 1.0 / x, y === 0.0 ? 0.0 : 1.0 / y, z === 0.0 ? 0.0 : 1.0 / z);\n    this.oneOverRadiiSquared = new Vector3(x === 0.0 ? 0.0 : 1.0 / (x * x), y === 0.0 ? 0.0 : 1.0 / (y * y), z === 0.0 ? 0.0 : 1.0 / (z * z));\n    this.minimumRadius = Math.min(x, y, z);\n    this.maximumRadius = Math.max(x, y, z);\n    this.centerToleranceSquared = _MathUtils.EPSILON1;\n\n    if (this.radiiSquared.z !== 0) {\n      this.squaredXOverSquaredZ = this.radiiSquared.x / this.radiiSquared.z;\n    }\n\n    Object.freeze(this);\n  }\n\n  _createClass(Ellipsoid, [{\n    key: \"equals\",\n    value: function equals(right) {\n      return this === right || Boolean(right && this.radii.equals(right.radii));\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return this.radii.toString();\n    }\n  }, {\n    key: \"cartographicToCartesian\",\n    value: function cartographicToCartesian(cartographic) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      var normal = scratchNormal;\n      var k = scratchK;\n\n      var _cartographic = _slicedToArray(cartographic, 3),\n          height = _cartographic[2];\n\n      this.geodeticSurfaceNormalCartographic(cartographic, normal);\n      k.copy(this.radiiSquared).scale(normal);\n      var gamma = Math.sqrt(normal.dot(k));\n      k.scale(1 / gamma);\n      normal.scale(height);\n      k.add(normal);\n      return k.to(result);\n    }\n  }, {\n    key: \"cartesianToCartographic\",\n    value: function cartesianToCartographic(cartesian) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      scratchCartesian.from(cartesian);\n      var point = this.scaleToGeodeticSurface(scratchCartesian, scratchPosition);\n\n      if (!point) {\n        return undefined;\n      }\n\n      var normal = this.geodeticSurfaceNormal(point, scratchNormal);\n      var h = scratchHeight;\n      h.copy(scratchCartesian).subtract(point);\n      var longitude = Math.atan2(normal.y, normal.x);\n      var latitude = Math.asin(normal.z);\n      var height = Math.sign(vec3.dot(h, scratchCartesian)) * vec3.length(h);\n      return toCartographicFromRadians([longitude, latitude, height], result);\n    }\n  }, {\n    key: \"eastNorthUpToFixedFrame\",\n    value: function eastNorthUpToFixedFrame(origin) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Matrix4();\n      return _localFrameToFixedFrame(this, 'east', 'north', 'up', origin, result);\n    }\n  }, {\n    key: \"localFrameToFixedFrame\",\n    value: function localFrameToFixedFrame(firstAxis, secondAxis, thirdAxis, origin) {\n      var result = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : new Matrix4();\n      return _localFrameToFixedFrame(this, firstAxis, secondAxis, thirdAxis, origin, result);\n    }\n  }, {\n    key: \"geocentricSurfaceNormal\",\n    value: function geocentricSurfaceNormal(cartesian) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      return scratchVector.from(cartesian).normalize().to(result);\n    }\n  }, {\n    key: \"geodeticSurfaceNormalCartographic\",\n    value: function geodeticSurfaceNormalCartographic(cartographic) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      var cartographicVectorRadians = fromCartographicToRadians(cartographic);\n      var longitude = cartographicVectorRadians[0];\n      var latitude = cartographicVectorRadians[1];\n      var cosLatitude = Math.cos(latitude);\n      scratchVector.set(cosLatitude * Math.cos(longitude), cosLatitude * Math.sin(longitude), Math.sin(latitude)).normalize();\n      return scratchVector.to(result);\n    }\n  }, {\n    key: \"geodeticSurfaceNormal\",\n    value: function geodeticSurfaceNormal(cartesian) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      return scratchVector.from(cartesian).scale(this.oneOverRadiiSquared).normalize().to(result);\n    }\n  }, {\n    key: \"scaleToGeodeticSurface\",\n    value: function scaleToGeodeticSurface(cartesian, result) {\n      return _scaleToGeodeticSurface(cartesian, this, result);\n    }\n  }, {\n    key: \"scaleToGeocentricSurface\",\n    value: function scaleToGeocentricSurface(cartesian) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      scratchPosition.from(cartesian);\n      var positionX = scratchPosition.x;\n      var positionY = scratchPosition.y;\n      var positionZ = scratchPosition.z;\n      var oneOverRadiiSquared = this.oneOverRadiiSquared;\n      var beta = 1.0 / Math.sqrt(positionX * positionX * oneOverRadiiSquared.x + positionY * positionY * oneOverRadiiSquared.y + positionZ * positionZ * oneOverRadiiSquared.z);\n      return scratchPosition.multiplyScalar(beta).to(result);\n    }\n  }, {\n    key: \"transformPositionToScaledSpace\",\n    value: function transformPositionToScaledSpace(position) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      return scratchPosition.from(position).scale(this.oneOverRadii).to(result);\n    }\n  }, {\n    key: \"transformPositionFromScaledSpace\",\n    value: function transformPositionFromScaledSpace(position) {\n      var result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n      return scratchPosition.from(position).scale(this.radii).to(result);\n    }\n  }, {\n    key: \"getSurfaceNormalIntersectionWithZAxis\",\n    value: function getSurfaceNormalIntersectionWithZAxis(position) {\n      var buffer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n      var result = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0, 0];\n      assert(equals(this.radii.x, this.radii.y, _MathUtils.EPSILON15));\n      assert(this.radii.z > 0);\n      scratchPosition.from(position);\n      var z = scratchPosition.z * (1 - this.squaredXOverSquaredZ);\n\n      if (Math.abs(z) >= this.radii.z - buffer) {\n        return undefined;\n      }\n\n      return scratchPosition.set(0.0, 0.0, z).to(result);\n    }\n  }]);\n\n  return Ellipsoid;\n}();\n\nexport { Ellipsoid as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\n\nvar DoublyLinkedListNode = function DoublyLinkedListNode(item, previous, next) {\n  _classCallCheck(this, DoublyLinkedListNode);\n\n  this.item = item;\n  this.previous = previous;\n  this.next = next;\n};\n\nexport { DoublyLinkedListNode as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport DoublyLinkedListNode from '../utils/doubly-linked-list-node';\n\nvar DoublyLinkedList = function () {\n  function DoublyLinkedList() {\n    _classCallCheck(this, DoublyLinkedList);\n\n    this.head = null;\n    this.tail = null;\n    this._length = 0;\n  }\n\n  _createClass(DoublyLinkedList, [{\n    key: \"add\",\n    value: function add(item) {\n      var node = new DoublyLinkedListNode(item, this.tail, null);\n\n      if (this.tail) {\n        this.tail.next = node;\n        this.tail = node;\n      } else {\n        this.head = node;\n        this.tail = node;\n      }\n\n      ++this._length;\n      return node;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(node) {\n      if (!node) {\n        return;\n      }\n\n      if (node.previous && node.next) {\n        node.previous.next = node.next;\n        node.next.previous = node.previous;\n      } else if (node.previous) {\n        node.previous.next = null;\n        this.tail = node.previous;\n      } else if (node.next) {\n        node.next.previous = null;\n        this.head = node.next;\n      } else {\n        this.head = null;\n        this.tail = null;\n      }\n\n      node.next = null;\n      node.previous = null;\n      --this._length;\n    }\n  }, {\n    key: \"splice\",\n    value: function splice(node, nextNode) {\n      if (node === nextNode) {\n        return;\n      }\n\n      this.remove(nextNode);\n\n      this._insert(node, nextNode);\n    }\n  }, {\n    key: \"_insert\",\n    value: function _insert(node, nextNode) {\n      var oldNodeNext = node.next;\n      node.next = nextNode;\n\n      if (this.tail === node) {\n        this.tail = nextNode;\n      } else {\n        oldNodeNext.previous = nextNode;\n      }\n\n      nextNode.next = oldNodeNext;\n      nextNode.previous = node;\n      ++this._length;\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this._length;\n    }\n  }]);\n\n  return DoublyLinkedList;\n}();\n\nexport { DoublyLinkedList as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport DoublyLinkedList from '../utils/doubly-linked-list';\n\nfunction defined(x) {\n  return x !== undefined && x !== null;\n}\n\nvar TilesetCache = function () {\n  function TilesetCache() {\n    _classCallCheck(this, TilesetCache);\n\n    this._list = new DoublyLinkedList();\n    this._sentinel = this._list.add('sentinel');\n    this._trimTiles = false;\n  }\n\n  _createClass(TilesetCache, [{\n    key: \"reset\",\n    value: function reset() {\n      this._list.splice(this._list.tail, this._sentinel);\n    }\n  }, {\n    key: \"touch\",\n    value: function touch(tile) {\n      var node = tile._cacheNode;\n\n      if (defined(node)) {\n        this._list.splice(this._sentinel, node);\n      }\n    }\n  }, {\n    key: \"add\",\n    value: function add(tileset, tile, addCallback) {\n      if (!defined(tile._cacheNode)) {\n        tile._cacheNode = this._list.add(tile);\n\n        if (addCallback) {\n          addCallback(tileset, tile);\n        }\n      }\n    }\n  }, {\n    key: \"unloadTile\",\n    value: function unloadTile(tileset, tile, unloadCallback) {\n      var node = tile._cacheNode;\n\n      if (!defined(node)) {\n        return;\n      }\n\n      this._list.remove(node);\n\n      tile._cacheNode = undefined;\n\n      if (unloadCallback) {\n        unloadCallback(tileset, tile);\n      }\n    }\n  }, {\n    key: \"unloadTiles\",\n    value: function unloadTiles(tileset, unloadCallback) {\n      var trimTiles = this._trimTiles;\n      this._trimTiles = false;\n      var list = this._list;\n      var maximumMemoryUsageInBytes = tileset.maximumMemoryUsage * 1024 * 1024;\n      var sentinel = this._sentinel;\n      var node = list.head;\n\n      while (node !== sentinel && (tileset.gpuMemoryUsageInBytes > maximumMemoryUsageInBytes || trimTiles)) {\n        var tile = node.item;\n        node = node.next;\n        this.unloadTile(tileset, tile, unloadCallback);\n      }\n    }\n  }, {\n    key: \"trim\",\n    value: function trim() {\n      this._trimTiles = true;\n    }\n  }]);\n\n  return TilesetCache;\n}();\n\nexport { TilesetCache as default };","import { Vector3 } from '@math.gl/core';\nimport { CullingVolume, Plane } from '@math.gl/culling';\nimport { Ellipsoid } from '@math.gl/geospatial';\nvar scratchVector = new Vector3();\nvar scratchPosition = new Vector3();\nvar cullingVolume = new CullingVolume([new Plane(), new Plane(), new Plane(), new Plane(), new Plane(), new Plane()]);\nexport function getFrameState(viewport, frameNumber) {\n  var cameraDirection = viewport.cameraDirection,\n      cameraUp = viewport.cameraUp,\n      height = viewport.height;\n  var metersPerUnit = viewport.distanceScales.metersPerUnit;\n  var viewportCenterCartographic = [viewport.longitude, viewport.latitude, 0];\n  var viewportCenterCartesian = Ellipsoid.WGS84.cartographicToCartesian(viewportCenterCartographic, new Vector3());\n  var enuToFixedTransform = Ellipsoid.WGS84.eastNorthUpToFixedFrame(viewportCenterCartesian);\n  var cameraPositionCartographic = viewport.unprojectPosition(viewport.cameraPosition);\n  var cameraPositionCartesian = Ellipsoid.WGS84.cartographicToCartesian(cameraPositionCartographic, new Vector3());\n  var cameraDirectionCartesian = new Vector3(enuToFixedTransform.transformAsVector(new Vector3(cameraDirection).scale(metersPerUnit))).normalize();\n  var cameraUpCartesian = new Vector3(enuToFixedTransform.transformAsVector(new Vector3(cameraUp).scale(metersPerUnit))).normalize();\n  commonSpacePlanesToWGS84(viewport, viewportCenterCartesian);\n  return {\n    camera: {\n      position: cameraPositionCartesian,\n      direction: cameraDirectionCartesian,\n      up: cameraUpCartesian\n    },\n    viewport: viewport,\n    height: height,\n    cullingVolume: cullingVolume,\n    frameNumber: frameNumber,\n    sseDenominator: 1.15\n  };\n}\n\nfunction commonSpacePlanesToWGS84(viewport, viewportCenterCartesian) {\n  var frustumPlanes = viewport.getFrustumPlanes();\n  var i = 0;\n\n  for (var dir in frustumPlanes) {\n    var plane = frustumPlanes[dir];\n    var distanceToCenter = plane.normal.dot(viewport.center);\n    scratchPosition.copy(plane.normal).scale(plane.distance - distanceToCenter).add(viewport.center);\n    var cartographicPos = viewport.unprojectPosition(scratchPosition);\n    var cartesianPos = Ellipsoid.WGS84.cartographicToCartesian(cartographicPos, new Vector3());\n    cullingVolume.planes[i++].fromPointNormal(cartesianPos, scratchVector.copy(viewportCenterCartesian).subtract(cartesianPos));\n  }\n}","import { Vector3 } from '@math.gl/core';\nvar WGS84_RADIUS_X = 6378137.0;\nvar WGS84_RADIUS_Y = 6378137.0;\nvar WGS84_RADIUS_Z = 6356752.3142451793;\nvar scratchVector = new Vector3();\nexport function getZoomFromBoundingVolume(boundingVolume) {\n  var halfAxes = boundingVolume.halfAxes,\n      radius = boundingVolume.radius,\n      width = boundingVolume.width,\n      height = boundingVolume.height;\n\n  if (halfAxes) {\n    halfAxes.getColumn(0, scratchVector);\n    var x = scratchVector.len();\n    halfAxes.getColumn(1, scratchVector);\n    var y = scratchVector.len();\n    halfAxes.getColumn(2, scratchVector);\n    var z = scratchVector.len();\n    var halfX = x / 2;\n    var halfY = y / 2;\n    var halfZ = z / 2;\n    var zoomX = Math.log2(WGS84_RADIUS_X / halfX);\n    var zoomY = Math.log2(WGS84_RADIUS_Y / halfY);\n    var zoomZ = Math.log2(WGS84_RADIUS_Z / halfZ);\n    return (zoomX + zoomY + zoomZ) / 3;\n  } else if (radius) {\n    return Math.log2(WGS84_RADIUS_Z / radius);\n  } else if (height && width) {\n    var _zoomX = Math.log2(WGS84_RADIUS_X / width);\n\n    var _zoomY = Math.log2(WGS84_RADIUS_Y / height);\n\n    return (_zoomX + _zoomY) / 2;\n  }\n\n  return 1;\n}","export var TILE_CONTENT_STATE = {\n  UNLOADED: 0,\n  LOADING: 1,\n  PROCESSING: 2,\n  READY: 3,\n  EXPIRED: 4,\n  FAILED: 5\n};\nexport var TILE_REFINEMENT = {\n  ADD: 1,\n  REPLACE: 2\n};\nexport var TILE_TYPE = {\n  EMPTY: 'empty',\n  SCENEGRAPH: 'scenegraph',\n  POINTCLOUD: 'pointcloud',\n  MESH: 'mesh'\n};\nexport var TILESET_TYPE = {\n  I3S: 'I3S',\n  TILES3D: 'TILES3D'\n};\nexport var LOD_METRIC_TYPE = {\n  GEOMETRIC_ERROR: 'geometricError',\n  MAX_SCREEN_THRESHOLD: 'maxScreenThreshold'\n};\nexport var TILE3D_OPTIMIZATION_HINT = {\n  NOT_COMPUTED: -1,\n  USE_OPTIMIZATION: 1,\n  SKIP_OPTIMIZATION: 0\n};","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { Vector3, Matrix3, Matrix4, degrees } from '@math.gl/core';\nimport { BoundingSphere, OrientedBoundingBox } from '@math.gl/culling';\nimport { Ellipsoid } from '@math.gl/geospatial';\nimport { assert } from '@loaders.gl/loader-utils';\n\nfunction defined(x) {\n  return x !== undefined && x !== null;\n}\n\nvar scratchScale = new Vector3();\nvar scratchNorthWest = new Vector3();\nvar scratchSouthEast = new Vector3();\nvar scratchTransform = new Matrix4();\nexport function createBoundingVolume(boundingVolumeHeader, transform, result) {\n  assert(boundingVolumeHeader, '3D Tile: boundingVolume must be defined');\n\n  if (boundingVolumeHeader.box) {\n    return createBox(boundingVolumeHeader.box, transform, result);\n  }\n\n  if (boundingVolumeHeader.region) {\n    var _boundingVolumeHeader = _slicedToArray(boundingVolumeHeader.region, 6),\n        west = _boundingVolumeHeader[0],\n        south = _boundingVolumeHeader[1],\n        east = _boundingVolumeHeader[2],\n        north = _boundingVolumeHeader[3],\n        minHeight = _boundingVolumeHeader[4],\n        maxHeight = _boundingVolumeHeader[5];\n\n    var northWest = Ellipsoid.WGS84.cartographicToCartesian([degrees(west), degrees(north), minHeight], scratchNorthWest);\n    var southEast = Ellipsoid.WGS84.cartographicToCartesian([degrees(east), degrees(south), maxHeight], scratchSouthEast);\n    var centerInCartesian = new Vector3().addVectors(northWest, southEast).multiplyScalar(0.5);\n    var radius = new Vector3().subVectors(northWest, southEast).len() / 2.0;\n    return createSphere([centerInCartesian[0], centerInCartesian[1], centerInCartesian[2], radius], new Matrix4());\n  }\n\n  if (boundingVolumeHeader.sphere) {\n    return createSphere(boundingVolumeHeader.sphere, transform, result);\n  }\n\n  throw new Error('3D Tile: boundingVolume must contain a sphere, region, or box');\n}\n\nfunction createBox(box, transform, result) {\n  var center = new Vector3(box[0], box[1], box[2]);\n  transform.transform(center, center);\n  var xAxis = transform.transformAsVector(box.slice(3, 6));\n  var yAxis = transform.transformAsVector(box.slice(6, 9));\n  var zAxis = transform.transformAsVector(box.slice(9, 12));\n  var halfAxes = new Matrix3([xAxis[0], xAxis[1], xAxis[2], yAxis[0], yAxis[1], yAxis[2], zAxis[0], zAxis[1], zAxis[2]]);\n\n  if (defined(result)) {\n    result.center = center;\n    result.halfAxes = halfAxes;\n    return result;\n  }\n\n  return new OrientedBoundingBox(center, halfAxes);\n}\n\nfunction createSphere(sphere, transform, result) {\n  var center = new Vector3(sphere[0], sphere[1], sphere[2]);\n  transform.transform(center, center);\n  var scale = transform.getScale(scratchScale);\n  var uniformScale = Math.max(Math.max(scale[0], scale[1]), scale[2]);\n  var radius = sphere[3] * uniformScale;\n\n  if (defined(result)) {\n    result.center = center;\n    result.radius = radius;\n    return result;\n  }\n\n  return new BoundingSphere(center, radius);\n}","import { Matrix4, Vector3, clamp } from '@math.gl/core';\nvar scratchPositionNormal = new Vector3();\nvar scratchCartographic = new Vector3();\nvar scratchMatrix = new Matrix4();\nvar scratchCenter = new Vector3();\nvar scratchPosition = new Vector3();\nvar scratchDirection = new Vector3();\nexport function calculateDynamicScreenSpaceError(root, _ref) {\n  var camera = _ref.camera,\n      mapProjection = _ref.mapProjection;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _options$dynamicScree = options.dynamicScreenSpaceErrorHeightFalloff,\n      dynamicScreenSpaceErrorHeightFalloff = _options$dynamicScree === void 0 ? 0.25 : _options$dynamicScree,\n      _options$dynamicScree2 = options.dynamicScreenSpaceErrorDensity,\n      dynamicScreenSpaceErrorDensity = _options$dynamicScree2 === void 0 ? 0.00278 : _options$dynamicScree2;\n  var up;\n  var direction;\n  var height;\n  var minimumHeight;\n  var maximumHeight;\n  var tileBoundingVolume = root.contentBoundingVolume;\n\n  if (tileBoundingVolume instanceof TileBoundingRegion) {\n    up = Cartesian3.normalize(camera.positionWC, scratchPositionNormal);\n    direction = camera.directionWC;\n    height = camera.positionCartographic.height;\n    minimumHeight = tileBoundingVolume.minimumHeight;\n    maximumHeight = tileBoundingVolume.maximumHeight;\n  } else {\n    var transformLocal = Matrix4.inverseTransformation(root.computedTransform, scratchMatrix);\n    var ellipsoid = mapProjection.ellipsoid;\n    var boundingVolume = tileBoundingVolume.boundingVolume;\n    var centerLocal = Matrix4.multiplyByPoint(transformLocal, boundingVolume.center, scratchCenter);\n\n    if (Cartesian3.magnitude(centerLocal) > ellipsoid.minimumRadius) {\n      var centerCartographic = Cartographic.fromCartesian(centerLocal, ellipsoid, scratchCartographic);\n      up = Cartesian3.normalize(camera.positionWC, scratchPositionNormal);\n      direction = camera.directionWC;\n      height = camera.positionCartographic.height;\n      minimumHeight = 0.0;\n      maximumHeight = centerCartographic.height * 2.0;\n    } else {\n      var positionLocal = Matrix4.multiplyByPoint(transformLocal, camera.positionWC, scratchPosition);\n      up = Cartesian3.UNIT_Z;\n      direction = Matrix4.multiplyByPointAsVector(transformLocal, camera.directionWC, scratchDirection);\n      direction = Cartesian3.normalize(direction, direction);\n      height = positionLocal.z;\n\n      if (tileBoundingVolume instanceof TileOrientedBoundingBox) {\n        var boxHeight = root._header.boundingVolume.box[11];\n        minimumHeight = centerLocal.z - boxHeight;\n        maximumHeight = centerLocal.z + boxHeight;\n      } else if (tileBoundingVolume instanceof TileBoundingSphere) {\n        var radius = boundingVolume.radius;\n        minimumHeight = centerLocal.z - radius;\n        maximumHeight = centerLocal.z + radius;\n      }\n    }\n  }\n\n  var heightFalloff = dynamicScreenSpaceErrorHeightFalloff;\n  var heightClose = minimumHeight + (maximumHeight - minimumHeight) * heightFalloff;\n  var heightFar = maximumHeight;\n  var t = clamp((height - heightClose) / (heightFar - heightClose), 0.0, 1.0);\n  var dot = Math.abs(Cartesian3.dot(direction, up));\n  var horizonFactor = 1.0 - dot;\n  horizonFactor = horizonFactor * (1.0 - t);\n  return dynamicScreenSpaceErrorDensity * horizonFactor;\n}\nexport function fog(distanceToCamera, density) {\n  var scalar = distanceToCamera * density;\n  return 1.0 - Math.exp(-(scalar * scalar));\n}\nexport function getDynamicScreenSpaceError(tileset, distanceToCamera) {\n  if (tileset.dynamicScreenSpaceError && tileset._dynamicScreenSpaceErrorComputedDensity) {\n    var density = tileset._dynamicScreenSpaceErrorComputedDensity;\n    var factor = tileset.dynamicScreenSpaceErrorFactor;\n    var dynamicError = fog(distanceToCamera, density) * factor;\n    return dynamicError;\n  }\n\n  return 0;\n}\nexport function getTiles3DScreenSpaceError(tile, frameState, useParentLodMetric) {\n  var tileset = tile.tileset;\n  var parentLodMetricValue = tile.parent && tile.parent.lodMetricValue || tile.lodMetricValue;\n  var lodMetricValue = useParentLodMetric ? parentLodMetricValue : tile.lodMetricValue;\n\n  if (lodMetricValue === 0.0) {\n    return 0.0;\n  }\n\n  var distance = Math.max(tile._distanceToCamera, 1e-7);\n  var height = frameState.height,\n      sseDenominator = frameState.sseDenominator;\n  var error = lodMetricValue * height / (distance * sseDenominator);\n  error -= getDynamicScreenSpaceError(tileset, distance);\n  return error;\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { toRadians } from '@math.gl/core';\nvar WGS84_RADIUS_X = 6378137.0;\nvar qualityFactor = Math.PI / 2;\nexport function lodJudge(tile, frameState) {\n  var viewport = frameState.viewport;\n  var metersPerPixel = viewport.metersPerPixel;\n  var mbsLat = tile.header.mbs[1];\n  var mbsLon = tile.header.mbs[0];\n  var mbsZ = tile.header.mbs[2];\n  var mbsR = tile.header.mbs[3];\n  var height = viewport.height,\n      width = viewport.width,\n      latitude = viewport.latitude,\n      longitude = viewport.longitude;\n  var viewportCenter = [longitude, latitude];\n  var mbsCenter = [mbsLon, mbsLat, mbsZ];\n  var mbsLatProjected = [longitude, mbsLat];\n  var mbsLonProjected = [mbsLon, latitude];\n  var diagonalInMeters = Math.sqrt(height * height + width * width) * metersPerPixel[0];\n  var distanceInMeters = getDistanceFromLatLon(viewportCenter, mbsCenter);\n  var visibleHeight = height * 0.5 + mbsR / WGS84_RADIUS_X;\n  var visibleWidth = width * 0.5 + mbsR / WGS84_RADIUS_X;\n\n  if (distanceInMeters > diagonalInMeters + mbsR / WGS84_RADIUS_X) {\n    return 'OUT';\n  }\n\n  if (getDistanceFromLatLon(viewportCenter, mbsLatProjected) > visibleHeight) {\n    return 'OUT';\n  }\n\n  if (getDistanceFromLatLon(viewportCenter, mbsLonProjected) > visibleWidth) {\n    return 'OUT';\n  }\n\n  if (tile.lodMetricValue === 0) {\n    return 'DIG';\n  }\n\n  var screenSize = getI3ScreenSize(tile, frameState);\n  screenSize *= qualityFactor;\n\n  if (screenSize < 0.5) {\n    return 'OUT';\n  }\n\n  if (!tile.header.children || screenSize <= tile.lodMetricValue) {\n    return 'DRAW';\n  } else if (tile.header.children) {\n    return 'DIG';\n  }\n\n  return 'OUT';\n}\n\nfunction projectVertexToSphere(_ref) {\n  var _ref2 = _slicedToArray(_ref, 3),\n      x = _ref2[0],\n      y = _ref2[1],\n      z = _ref2[2];\n\n  var azim = toRadians(x);\n  var incl = toRadians(y);\n  var radius = 1.0 + z / WGS84_RADIUS_X;\n  var radCosInc = radius * Math.cos(incl);\n  x = radCosInc * Math.cos(azim);\n  y = radCosInc * Math.sin(azim);\n  z = radius * Math.sin(incl);\n  return [x, y, z];\n}\n\nfunction getDistanceFromLatLon(_ref3, _ref4) {\n  var _ref5 = _slicedToArray(_ref3, 3),\n      observerLon = _ref5[0],\n      observerLat = _ref5[1],\n      _ref5$ = _ref5[2],\n      observerZ = _ref5$ === void 0 ? 0.0 : _ref5$;\n\n  var _ref6 = _slicedToArray(_ref4, 3),\n      centerLon = _ref6[0],\n      centerLat = _ref6[1],\n      _ref6$ = _ref6[2],\n      centerZ = _ref6$ === void 0 ? 0.0 : _ref6$;\n\n  var projectedCenter = projectVertexToSphere([centerLon, centerLat, centerZ]);\n  var projectedObserver = projectVertexToSphere([observerLon, observerLat, observerZ]);\n  var dx = projectedObserver[0] - projectedCenter[0];\n  var dy = projectedObserver[1] - projectedCenter[1];\n  var dz = projectedObserver[2] - projectedCenter[2];\n  return dx * dx + dy * dy + dz * dz;\n}\n\nexport function getI3ScreenSize(tile, frameState) {\n  var viewport = frameState.viewport;\n  var mbsLat = tile.header.mbs[1];\n  var mbsLon = tile.header.mbs[0];\n  var mbsZ = tile.header.mbs[2];\n  var mbsR = tile.header.mbs[3];\n  var mbsCenter = [mbsLon, mbsLat, mbsZ];\n  var cameraPositionCartographic = viewport.unprojectPosition(viewport.cameraPosition);\n  var dSquared = getDistanceFromLatLon(cameraPositionCartographic, mbsCenter);\n  var mbsRNormalized = mbsR / WGS84_RADIUS_X;\n  var d = dSquared - mbsRNormalized * mbsRNormalized;\n  var fltMax = 3.4028235e38;\n\n  if (d <= 0.0) {\n    return 0.5 * fltMax;\n  }\n\n  var screenSizeFactor = calculateScreenSizeFactor(tile, frameState);\n  screenSizeFactor *= mbsRNormalized / Math.sqrt(d) / viewport.scale;\n  return screenSizeFactor;\n}\n\nfunction calculateScreenSizeFactor(tile, frameState) {\n  var _frameState$viewport = frameState.viewport,\n      width = _frameState$viewport.width,\n      height = _frameState$viewport.height,\n      pixelProjectionMatrix = _frameState$viewport.pixelProjectionMatrix;\n  var tanOfHalfVFAngle = Math.tan(Math.atan(Math.sqrt(1.0 / (pixelProjectionMatrix[0] * pixelProjectionMatrix[0]) + 1.0 / (pixelProjectionMatrix[5] * pixelProjectionMatrix[5]))));\n  var screenCircleFactor = Math.sqrt(height * height + width * width) / tanOfHalfVFAngle;\n  return screenCircleFactor;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { Vector3, Matrix4 } from '@math.gl/core';\nimport { CullingVolume } from '@math.gl/culling';\nimport { load } from '@loaders.gl/core';\nimport { assert, path } from '@loaders.gl/loader-utils';\nimport { TILE_REFINEMENT, TILE_CONTENT_STATE, TILESET_TYPE } from '../constants';\nimport { createBoundingVolume } from './helpers/bounding-volume';\nimport { getTiles3DScreenSpaceError } from './helpers/tiles-3d-lod';\nimport { getI3ScreenSize } from './helpers/i3s-lod';\nvar scratchVector = new Vector3();\n\nfunction defined(x) {\n  return x !== undefined && x !== null;\n}\n\nvar TileHeader = function () {\n  function TileHeader(tileset, header, parentHeader) {\n    _classCallCheck(this, TileHeader);\n\n    assert(_typeof(header) === 'object');\n    this.header = header;\n    this.tileset = tileset;\n    this.id = header.id;\n    this.url = header.url;\n    this.parent = parentHeader;\n    this.refine = this._getRefine(header.refine);\n    this.type = header.type;\n    this.contentUrl = header.contentUrl;\n    this.lodMetricType = null;\n    this.lodMetricValue = null;\n    this.boundingVolume = null;\n    this.content = null;\n    this.contentState = TILE_CONTENT_STATE.UNLOADED;\n    this.gpuMemoryUsageInBytes = 0;\n    this.children = [];\n    this.depth = 0;\n    this._cacheNode = null;\n    this._frameNumber = null;\n    this._cacheNode = null;\n\n    this._initializeLodMetric(header);\n\n    this._initializeTransforms(header);\n\n    this._initializeBoundingVolumes(header);\n\n    this._initializeContent(header);\n\n    this._initializeRenderingState(header);\n\n    this._lodJudge = null;\n    this._expireDate = null;\n    this._expiredContent = null;\n    this._getPriority = this._getPriority.bind(this);\n    Object.seal(this);\n  }\n\n  _createClass(TileHeader, [{\n    key: \"destroy\",\n    value: function destroy() {\n      this.header = null;\n    }\n  }, {\n    key: \"isDestroyed\",\n    value: function isDestroyed() {\n      return this.header === null;\n    }\n  }, {\n    key: \"getScreenSpaceError\",\n    value: function getScreenSpaceError(frameState, useParentLodMetric) {\n      switch (this.tileset.type) {\n        case TILESET_TYPE.I3S:\n          return getI3ScreenSize(this, frameState);\n\n        case TILESET_TYPE.TILES3D:\n          return getTiles3DScreenSpaceError(this, frameState, useParentLodMetric);\n\n        default:\n          console.error('Unsupported tileset type');\n          return null;\n      }\n    }\n  }, {\n    key: \"_getPriority\",\n    value: function _getPriority() {\n      if (!this.isVisible) {\n        return -1;\n      }\n\n      if (this.contentState === TILE_CONTENT_STATE.UNLOADED) {\n        return -1;\n      }\n\n      return Math.max(1e7 - this._priority, 0) || 0;\n    }\n  }, {\n    key: \"loadContent\",\n    value: function () {\n      var _loadContent = _asyncToGenerator(_regeneratorRuntime.mark(function _callee() {\n        var expired, requestToken, contentUrl, fetchOptions, loader, options;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this.hasEmptyContent) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", false);\n\n              case 2:\n                if (!this.content) {\n                  _context.next = 4;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", true);\n\n              case 4:\n                expired = this.contentExpired;\n\n                if (expired) {\n                  this._expireDate = null;\n                }\n\n                this.contentState = TILE_CONTENT_STATE.LOADING;\n                _context.next = 9;\n                return this.tileset._requestScheduler.scheduleRequest(this.id, this._getPriority);\n\n              case 9:\n                requestToken = _context.sent;\n\n                if (requestToken) {\n                  _context.next = 13;\n                  break;\n                }\n\n                this.contentState = TILE_CONTENT_STATE.UNLOADED;\n                return _context.abrupt(\"return\", false);\n\n              case 13:\n                _context.prev = 13;\n                contentUrl = this.tileset.getTileUrl(this.contentUrl);\n                fetchOptions = this.tileset.fetchOptions;\n                loader = this.tileset.loader;\n                options = _objectSpread(_objectSpread({}, fetchOptions), {}, _defineProperty({}, loader.id, {\n                  tile: this.header,\n                  tileset: this.tileset.tileset,\n                  isTileset: false,\n                  isTileHeader: false\n                }));\n                _context.next = 20;\n                return load(contentUrl, loader, options);\n\n              case 20:\n                this.content = _context.sent;\n\n                if (this._isTileset()) {\n                  this.tileset._initializeTileHeaders(this.content, this, path.dirname(this.contentUrl));\n                }\n\n                this.contentState = TILE_CONTENT_STATE.READY;\n\n                this._onContentLoaded();\n\n                return _context.abrupt(\"return\", true);\n\n              case 27:\n                _context.prev = 27;\n                _context.t0 = _context[\"catch\"](13);\n                this.contentState = TILE_CONTENT_STATE.FAILED;\n                throw _context.t0;\n\n              case 31:\n                _context.prev = 31;\n                requestToken.done();\n                return _context.finish(31);\n\n              case 34:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[13, 27, 31, 34]]);\n      }));\n\n      function loadContent() {\n        return _loadContent.apply(this, arguments);\n      }\n\n      return loadContent;\n    }()\n  }, {\n    key: \"unloadContent\",\n    value: function unloadContent() {\n      if (this.content && this.content.destroy) {\n        this.content.destroy();\n      }\n\n      this.content = null;\n      this.contentState = TILE_CONTENT_STATE.UNLOADED;\n      return true;\n    }\n  }, {\n    key: \"updateVisibility\",\n    value: function updateVisibility(frameState) {\n      if (this._frameNumber === frameState.frameNumber) {\n        return;\n      }\n\n      var parent = this.parent;\n      var parentTransform = parent ? parent.computedTransform : this.tileset.modelMatrix;\n      var parentVisibilityPlaneMask = parent ? parent._visibilityPlaneMask : CullingVolume.MASK_INDETERMINATE;\n\n      this._updateTransform(parentTransform);\n\n      this._distanceToCamera = this.distanceToTile(frameState);\n      this._screenSpaceError = this.getScreenSpaceError(frameState, false);\n      this._visibilityPlaneMask = this.visibility(frameState, parentVisibilityPlaneMask);\n      this._visible = this._visibilityPlaneMask !== CullingVolume.MASK_OUTSIDE;\n      this._inRequestVolume = this.insideViewerRequestVolume(frameState);\n      this._priority = this.lodMetricValue;\n      this._frameNumber = frameState.frameNumber;\n    }\n  }, {\n    key: \"visibility\",\n    value: function visibility(frameState, parentVisibilityPlaneMask) {\n      var cullingVolume = frameState.cullingVolume;\n      var boundingVolume = this.boundingVolume;\n      return cullingVolume.computeVisibilityWithPlaneMask(boundingVolume, parentVisibilityPlaneMask);\n    }\n  }, {\n    key: \"contentVisibility\",\n    value: function contentVisibility(frameState) {\n      return true;\n    }\n  }, {\n    key: \"distanceToTile\",\n    value: function distanceToTile(frameState) {\n      var boundingVolume = this.boundingVolume;\n      return Math.sqrt(Math.max(boundingVolume.distanceSquaredTo(frameState.camera.position), 0));\n    }\n  }, {\n    key: \"cameraSpaceZDepth\",\n    value: function cameraSpaceZDepth(_ref) {\n      var camera = _ref.camera;\n      var boundingVolume = this.boundingVolume;\n      scratchVector.subVectors(boundingVolume.center, camera.position);\n      return camera.direction.dot(scratchVector);\n    }\n  }, {\n    key: \"insideViewerRequestVolume\",\n    value: function insideViewerRequestVolume(frameState) {\n      var viewerRequestVolume = this._viewerRequestVolume;\n      return !viewerRequestVolume || viewerRequestVolume.distanceToCamera(frameState) === 0.0;\n    }\n  }, {\n    key: \"_initializeLodMetric\",\n    value: function _initializeLodMetric(header) {\n      if ('lodMetricType' in header) {\n        this.lodMetricType = header.lodMetricType;\n      } else {\n        this.lodMetricType = this.parent && this.parent.lodMetricType || this.tileset.lodMetricType;\n        console.warn(\"3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType\");\n      }\n\n      if ('lodMetricValue' in header) {\n        this.lodMetricValue = header.lodMetricValue;\n      } else {\n        this.lodMetricValue = this.parent && this.parent.lodMetricValue || this.tileset.lodMetricValue;\n        console.warn(\"3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue\");\n      }\n    }\n  }, {\n    key: \"_initializeTransforms\",\n    value: function _initializeTransforms(tileHeader) {\n      this.transform = tileHeader.transform ? new Matrix4(tileHeader.transform) : new Matrix4();\n      var parent = this.parent;\n      var tileset = this.tileset;\n      var parentTransform = parent && parent.computedTransform ? parent.computedTransform.clone() : tileset.modelMatrix.clone();\n      this.computedTransform = new Matrix4(parentTransform).multiplyRight(this.transform);\n      var parentInitialTransform = parent && parent._initialTransform ? parent._initialTransform.clone() : new Matrix4();\n      this._initialTransform = new Matrix4(parentInitialTransform).multiplyRight(this.transform);\n    }\n  }, {\n    key: \"_initializeBoundingVolumes\",\n    value: function _initializeBoundingVolumes(tileHeader) {\n      this._contentBoundingVolume = null;\n      this._viewerRequestVolume = null;\n\n      this._updateBoundingVolume(tileHeader);\n    }\n  }, {\n    key: \"_initializeContent\",\n    value: function _initializeContent(tileHeader) {\n      this.content = {\n        _tileset: this.tileset,\n        _tile: this\n      };\n      this.hasEmptyContent = true;\n      this.contentState = TILE_CONTENT_STATE.UNLOADED;\n      this.hasTilesetContent = false;\n\n      if (tileHeader.contentUrl) {\n        this.content = null;\n        this.hasEmptyContent = false;\n      }\n    }\n  }, {\n    key: \"_initializeRenderingState\",\n    value: function _initializeRenderingState(header) {\n      this.depth = header.level;\n      this._shouldRefine = false;\n      this._distanceToCamera = 0;\n      this._centerZDepth = 0;\n      this._screenSpaceError = 0;\n      this._visibilityPlaneMask = CullingVolume.MASK_INDETERMINATE;\n      this._visible = false;\n      this._inRequestVolume = false;\n      this._stackLength = 0;\n      this._selectionDepth = 0;\n      this._frameNumber = 0;\n      this._touchedFrame = 0;\n      this._visitedFrame = 0;\n      this._selectedFrame = 0;\n      this._requestedFrame = 0;\n      this._priority = 0.0;\n    }\n  }, {\n    key: \"_getRefine\",\n    value: function _getRefine(refine) {\n      return refine || this.parent && this.parent.refine || TILE_REFINEMENT.REPLACE;\n    }\n  }, {\n    key: \"_isTileset\",\n    value: function _isTileset() {\n      return this.contentUrl.indexOf('.json') !== -1;\n    }\n  }, {\n    key: \"_onContentLoaded\",\n    value: function _onContentLoaded() {\n      switch (this.content && this.content.type) {\n        case 'vctr':\n        case 'geom':\n          this.tileset.traverser.disableSkipLevelOfDetail = true;\n          break;\n\n        default:\n      }\n\n      if (this._isTileset()) {\n        this.hasTilesetContent = true;\n      }\n    }\n  }, {\n    key: \"_updateBoundingVolume\",\n    value: function _updateBoundingVolume(header) {\n      this.boundingVolume = createBoundingVolume(header.boundingVolume, this.computedTransform, this.boundingVolume);\n      var content = header.content;\n\n      if (!content) {\n        return;\n      }\n\n      if (content.boundingVolume) {\n        this._contentBoundingVolume = createBoundingVolume(content.boundingVolume, this.computedTransform, this._contentBoundingVolume);\n      }\n\n      if (header.viewerRequestVolume) {\n        this._viewerRequestVolume = createBoundingVolume(header.viewerRequestVolume, this.computedTransform, this._viewerRequestVolume);\n      }\n    }\n  }, {\n    key: \"_updateTransform\",\n    value: function _updateTransform() {\n      var parentTransform = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Matrix4();\n      var computedTransform = parentTransform.clone().multiplyRight(this.transform);\n      var didTransformChange = !computedTransform.equals(this.computedTransform);\n\n      if (!didTransformChange) {\n        return;\n      }\n\n      this.computedTransform = computedTransform;\n\n      this._updateBoundingVolume(this.header);\n    }\n  }, {\n    key: \"updateExpiration\",\n    value: function updateExpiration() {\n      if (defined(this._expireDate) && this.contentReady && !this.hasEmptyContent) {\n        var now = Date.now();\n\n        if (Date.lessThan(this._expireDate, now)) {\n          this.contentState = TILE_CONTENT_STATE.EXPIRED;\n          this._expiredContent = this.content;\n        }\n      }\n    }\n  }, {\n    key: \"selected\",\n    get: function get() {\n      return this._selectedFrame === this.tileset._frameNumber;\n    }\n  }, {\n    key: \"isVisible\",\n    get: function get() {\n      return this._visible;\n    }\n  }, {\n    key: \"isVisibleAndInRequestVolume\",\n    get: function get() {\n      return this._visible && this._inRequestVolume;\n    }\n  }, {\n    key: \"hasRenderContent\",\n    get: function get() {\n      return !this.hasEmptyContent && !this.hasTilesetContent;\n    }\n  }, {\n    key: \"hasChildren\",\n    get: function get() {\n      return this.children.length > 0 || this.header.children && this.header.children.length > 0;\n    }\n  }, {\n    key: \"contentReady\",\n    get: function get() {\n      return this.contentState === TILE_CONTENT_STATE.READY || this.hasEmptyContent;\n    }\n  }, {\n    key: \"contentAvailable\",\n    get: function get() {\n      return Boolean(this.contentReady && this.hasRenderContent || this._expiredContent && !this.contentFailed);\n    }\n  }, {\n    key: \"hasUnloadedContent\",\n    get: function get() {\n      return this.hasRenderContent && this.contentUnloaded;\n    }\n  }, {\n    key: \"contentUnloaded\",\n    get: function get() {\n      return this.contentState === TILE_CONTENT_STATE.UNLOADED;\n    }\n  }, {\n    key: \"contentExpired\",\n    get: function get() {\n      return this.contentState === TILE_CONTENT_STATE.EXPIRED;\n    }\n  }, {\n    key: \"contentFailed\",\n    get: function get() {\n      return this.contentState === TILE_CONTENT_STATE.FAILED;\n    }\n  }, {\n    key: \"extras\",\n    get: function get() {\n      return this.header.extras;\n    }\n  }]);\n\n  return TileHeader;\n}();\n\nexport { TileHeader as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '@loaders.gl/loader-utils';\n\nvar ManagedArray = function () {\n  function ManagedArray() {\n    var length = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    _classCallCheck(this, ManagedArray);\n\n    this._array = new Array(length);\n    this._map = new Map();\n    this._length = length;\n  }\n\n  _createClass(ManagedArray, [{\n    key: \"get\",\n    value: function get(index) {\n      assert(index < this._array.length);\n      return this._array[index];\n    }\n  }, {\n    key: \"set\",\n    value: function set(index, element) {\n      assert(index >= 0);\n\n      if (index >= this.length) {\n        this.length = index + 1;\n      }\n\n      if (this._map.has(this._array[index])) {\n        this._map[\"delete\"](this._array[index]);\n      }\n\n      this._array[index] = element;\n\n      this._map.set(element, index);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(element) {\n      var index = this._map.get(element);\n\n      if (index >= 0) {\n        this._array.splice(index, 1);\n\n        this._map[\"delete\"](element);\n\n        this.length--;\n      }\n    }\n  }, {\n    key: \"peek\",\n    value: function peek() {\n      return this._array[this._length - 1];\n    }\n  }, {\n    key: \"push\",\n    value: function push(element) {\n      if (!this._map.has(element)) {\n        var index = this.length++;\n        this._array[index] = element;\n\n        this._map.set(element, index);\n      }\n    }\n  }, {\n    key: \"pop\",\n    value: function pop() {\n      var element = this._array[--this.length];\n\n      this._map[\"delete\"](element);\n\n      return element;\n    }\n  }, {\n    key: \"reserve\",\n    value: function reserve(length) {\n      assert(length >= 0);\n\n      if (length > this._array.length) {\n        this._array.length = length;\n      }\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(length) {\n      assert(length >= 0);\n      this.length = length;\n    }\n  }, {\n    key: \"trim\",\n    value: function trim(length) {\n      if (length === null || length === undefined) {\n        length = this.length;\n      }\n\n      this._array.length = length;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._array = [];\n      this._map = new Map();\n      this._length = 0;\n    }\n  }, {\n    key: \"find\",\n    value: function find(target) {\n      return this._map.has(target);\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this._length;\n    },\n    set: function set(length) {\n      this._length = length;\n\n      if (length > this._array.length) {\n        this._array.length = length;\n      }\n    }\n  }, {\n    key: \"values\",\n    get: function get() {\n      return this._array;\n    }\n  }]);\n\n  return ManagedArray;\n}();\n\nexport { ManagedArray as default };","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport ManagedArray from '../../utils/managed-array';\nimport { TILE_REFINEMENT } from '../../constants';\nimport { assert } from '@loaders.gl/loader-utils';\nexport var DEFAULT_OPTIONS = {\n  loadSiblings: false,\n  skipLevelOfDetail: false,\n  maximumScreenSpaceError: 2\n};\n\nvar TilesetTraverser = function () {\n  function TilesetTraverser(options) {\n    _classCallCheck(this, TilesetTraverser);\n\n    this.options = _objectSpread(_objectSpread({}, DEFAULT_OPTIONS), options);\n    this._traversalStack = new ManagedArray();\n    this._emptyTraversalStack = new ManagedArray();\n    this._frameNumber = null;\n    this.root = null;\n    this.selectedTiles = {};\n    this.requestedTiles = {};\n    this.emptyTiles = {};\n  }\n\n  _createClass(TilesetTraverser, [{\n    key: \"traverse\",\n    value: function traverse(root, frameState, options) {\n      this.root = root;\n      this.options = _objectSpread(_objectSpread({}, this.options), options);\n      this.reset();\n      this.updateTile(root, frameState);\n      this._frameNumber = frameState.frameNumber;\n      this.executeTraversal(root, frameState);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.requestedTiles = {};\n      this.selectedTiles = {};\n      this.emptyTiles = {};\n\n      this._traversalStack.reset();\n\n      this._emptyTraversalStack.reset();\n    }\n  }, {\n    key: \"executeTraversal\",\n    value: function executeTraversal(root, frameState) {\n      var stack = this._traversalStack;\n      stack.push(root);\n\n      while (stack.length > 0) {\n        var tile = stack.pop();\n        var shouldRefine = false;\n\n        if (this.canTraverse(tile, frameState)) {\n          this.updateChildTiles(tile, frameState);\n          shouldRefine = this.updateAndPushChildren(tile, frameState, stack);\n        }\n\n        var parent = tile.parent;\n        var parentRefines = Boolean(!parent || parent._shouldRefine);\n        var stoppedRefining = !shouldRefine;\n\n        if (!tile.hasRenderContent) {\n          this.emptyTiles[tile.id] = tile;\n          this.loadTile(tile, frameState);\n\n          if (stoppedRefining) {\n            this.selectTile(tile, frameState);\n          }\n        } else if (tile.refine === TILE_REFINEMENT.ADD) {\n          this.loadTile(tile, frameState);\n          this.selectTile(tile, frameState);\n        } else if (tile.refine === TILE_REFINEMENT.REPLACE) {\n          this.loadTile(tile, frameState);\n\n          if (stoppedRefining) {\n            this.selectTile(tile, frameState);\n          }\n        }\n\n        this.touchTile(tile, frameState);\n        tile._shouldRefine = shouldRefine && parentRefines;\n      }\n\n      if (this.options.onTraversalEnd) {\n        this.options.onTraversalEnd(frameState);\n      }\n    }\n  }, {\n    key: \"updateChildTiles\",\n    value: function updateChildTiles(tile, frameState) {\n      var children = tile.children;\n\n      var _iterator = _createForOfIteratorHelper(children),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var child = _step.value;\n          this.updateTile(child, frameState);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return true;\n    }\n  }, {\n    key: \"updateAndPushChildren\",\n    value: function updateAndPushChildren(tile, frameState, stack) {\n      var _this$options = this.options,\n          loadSiblings = _this$options.loadSiblings,\n          skipLevelOfDetail = _this$options.skipLevelOfDetail;\n      var children = tile.children;\n      children.sort(this.compareDistanceToCamera);\n      var checkRefines = !skipLevelOfDetail && tile.refine === TILE_REFINEMENT.REPLACE && tile.hasRenderContent;\n      var hasVisibleChild = false;\n\n      var _iterator2 = _createForOfIteratorHelper(children),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var child = _step2.value;\n\n          if (child.isVisibleAndInRequestVolume) {\n            if (stack.find(child)) {\n              stack[\"delete\"](child);\n            }\n\n            stack.push(child);\n            hasVisibleChild = true;\n          } else if (checkRefines || loadSiblings) {\n            this.loadTile(child, frameState);\n            this.touchTile(child, frameState);\n          }\n\n          if (checkRefines) {\n            var childRefines = void 0;\n\n            if (!child._inRequestVolume) {\n              childRefines = false;\n            } else if (!child.hasRenderContent) {\n              childRefines = this.executeEmptyTraversal(child, frameState);\n            } else {\n              childRefines = child.contentAvailable;\n            }\n\n            if (!childRefines) {\n              return childRefines;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return hasVisibleChild;\n    }\n  }, {\n    key: \"updateTile\",\n    value: function updateTile(tile, frameState) {\n      this.updateTileVisibility(tile, frameState);\n    }\n  }, {\n    key: \"selectTile\",\n    value: function selectTile(tile, frameState) {\n      if (this.shouldSelectTile(tile, frameState)) {\n        tile._selectedFrame = frameState.frameNumber;\n        this.selectedTiles[tile.id] = tile;\n      }\n    }\n  }, {\n    key: \"loadTile\",\n    value: function loadTile(tile, frameState) {\n      if (this.shouldLoadTile(tile, frameState)) {\n        tile._requestedFrame = frameState.frameNumber;\n        tile._priority = this.getPriority(tile);\n        this.requestedTiles[tile.id] = tile;\n      }\n    }\n  }, {\n    key: \"touchTile\",\n    value: function touchTile(tile, frameState) {\n      tile.tileset._cache.touch(tile);\n\n      tile._touchedFrame = frameState.frameNumber;\n    }\n  }, {\n    key: \"canTraverse\",\n    value: function canTraverse(tile, frameState) {\n      var useParentMetric = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var ignoreVisibility = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      if (!ignoreVisibility && !tile.isVisibleAndInRequestVolume) {\n        return false;\n      }\n\n      if (!tile.hasChildren) {\n        return false;\n      }\n\n      if (tile.hasTilesetContent) {\n        return !tile.contentExpired;\n      }\n\n      return this.shouldRefine(tile, frameState, useParentMetric);\n    }\n  }, {\n    key: \"shouldLoadTile\",\n    value: function shouldLoadTile(tile, frameState) {\n      return tile.hasUnloadedContent || tile.contentExpired;\n    }\n  }, {\n    key: \"shouldSelectTile\",\n    value: function shouldSelectTile(tile, frameState) {\n      return tile.contentAvailable && !this.options.skipLevelOfDetail;\n    }\n  }, {\n    key: \"shouldRefine\",\n    value: function shouldRefine(tile, frameState, useParentMetric) {\n      var screenSpaceError = tile._screenSpaceError;\n\n      if (useParentMetric) {\n        screenSpaceError = tile.getScreenSpaceError(frameState, true);\n      }\n\n      return screenSpaceError > this.options.maximumScreenSpaceError;\n    }\n  }, {\n    key: \"updateTileVisibility\",\n    value: function updateTileVisibility(tile, frameState) {\n      tile.updateVisibility(frameState);\n    }\n  }, {\n    key: \"compareDistanceToCamera\",\n    value: function compareDistanceToCamera(b, a) {\n      return b._distanceToCamera - a._distanceToCamera;\n    }\n  }, {\n    key: \"getPriority\",\n    value: function getPriority(tile) {\n      var options = this.options;\n\n      switch (tile.refine) {\n        case TILE_REFINEMENT.ADD:\n          return tile._distanceToCamera;\n\n        case TILE_REFINEMENT.REPLACE:\n          var parent = tile.parent;\n          var useParentScreenSpaceError = parent && (!options.skipLevelOfDetail || tile._screenSpaceError === 0.0 || parent.hasTilesetContent);\n          var screenSpaceError = useParentScreenSpaceError ? parent._screenSpaceError : tile._screenSpaceError;\n          var rootScreenSpaceError = this.root._screenSpaceError;\n          return rootScreenSpaceError - screenSpaceError;\n\n        default:\n          return assert(false);\n      }\n    }\n  }, {\n    key: \"anyChildrenVisible\",\n    value: function anyChildrenVisible(tile, frameState) {\n      var anyVisible = false;\n\n      var _iterator3 = _createForOfIteratorHelper(tile.children),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var child = _step3.value;\n          child.updateVisibility(frameState);\n          anyVisible = anyVisible || child.isVisibleAndInRequestVolume;\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      return anyVisible;\n    }\n  }, {\n    key: \"executeEmptyTraversal\",\n    value: function executeEmptyTraversal(root, frameState) {\n      var allDescendantsLoaded = true;\n      var stack = this._emptyTraversalStack;\n\n      while (stack.length > 0) {\n        var tile = stack.pop();\n        this.updateTile(tile, frameState);\n\n        if (!tile.isVisibleAndInRequestVolume) {\n          this.loadTile(tile, frameState);\n          this.touchTile(tile, frameState);\n        }\n\n        var traverse = !tile.hasRenderContent && this.canTraverse(tile, frameState, false, true);\n\n        if (!traverse && !tile.contentAvailable) {\n          allDescendantsLoaded = false;\n        }\n\n        if (traverse) {\n          var children = tile.children.filter(function (c) {\n            return c;\n          });\n\n          var _iterator4 = _createForOfIteratorHelper(children),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var child = _step4.value;\n\n              if (stack.find(child)) {\n                stack[\"delete\"](child);\n              }\n\n              stack.push(child);\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n        }\n      }\n\n      return allDescendantsLoaded;\n    }\n  }]);\n\n  return TilesetTraverser;\n}();\n\nexport { TilesetTraverser as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport { TILE3D_OPTIMIZATION_HINT, TILE_REFINEMENT } from '../../constants';\nimport TilesetTraverser from './tileset-traverser';\n\nvar Tileset3DTraverser = function (_TilesetTraverser) {\n  _inherits(Tileset3DTraverser, _TilesetTraverser);\n\n  var _super = _createSuper(Tileset3DTraverser);\n\n  function Tileset3DTraverser() {\n    _classCallCheck(this, Tileset3DTraverser);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Tileset3DTraverser, [{\n    key: \"compareDistanceToCamera\",\n    value: function compareDistanceToCamera(a, b) {\n      return b._distanceToCamera === 0 && a._distanceToCamera === 0 ? b._centerZDepth - a._centerZDepth : b._distanceToCamera - a._distanceToCamera;\n    }\n  }, {\n    key: \"updateTileVisibility\",\n    value: function updateTileVisibility(tile, frameState) {\n      tile.updateVisibility(frameState);\n\n      if (!tile.isVisibleAndInRequestVolume) {\n        return;\n      }\n\n      var hasChildren = tile.children.length > 0;\n\n      if (tile.hasTilesetContent && hasChildren) {\n        var firstChild = tile.children[0];\n        this.updateTileVisibility(firstChild, frameState);\n        tile._visible = firstChild._visible;\n        return;\n      }\n\n      if (this.meetsScreenSpaceErrorEarly(tile, frameState)) {\n        tile._visible = false;\n        return;\n      }\n\n      var replace = tile.refine === TILE_REFINEMENT.REPLACE;\n      var useOptimization = tile._optimChildrenWithinParent === TILE3D_OPTIMIZATION_HINT.USE_OPTIMIZATION;\n\n      if (replace && useOptimization && hasChildren) {\n        if (!this.anyChildrenVisible(tile, frameState)) {\n          tile._visible = false;\n          return;\n        }\n      }\n    }\n  }, {\n    key: \"meetsScreenSpaceErrorEarly\",\n    value: function meetsScreenSpaceErrorEarly(tile, frameState) {\n      var parent = tile.parent;\n\n      if (!parent || parent.hasTilesetContent || parent.refine !== TILE_REFINEMENT.ADD) {\n        return false;\n      }\n\n      return !this.shouldRefine(tile, frameState, true);\n    }\n  }]);\n\n  return Tileset3DTraverser;\n}(TilesetTraverser);\n\nexport { Tileset3DTraverser as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar STATUS = {\n  REQUESTED: 'REQUESTED',\n  COMPLETED: 'COMPLETED',\n  ERROR: 'ERROR'\n};\n\nvar I3STileManager = function () {\n  function I3STileManager() {\n    _classCallCheck(this, I3STileManager);\n\n    this._statusMap = {};\n  }\n\n  _createClass(I3STileManager, [{\n    key: \"add\",\n    value: function add(request, key, callback, frameState) {\n      var _this = this;\n\n      if (!this._statusMap[key]) {\n        this._statusMap[key] = {\n          request: request,\n          callback: callback,\n          key: key,\n          frameState: frameState,\n          status: STATUS.REQUESTED\n        };\n        request().then(function (data) {\n          _this._statusMap[key].status = STATUS.COMPLETED;\n\n          _this._statusMap[key].callback(data, frameState);\n        })[\"catch\"](function (error) {\n          _this._statusMap[key].status = STATUS.ERROR;\n          callback(error);\n        });\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(key, frameState) {\n      if (this._statusMap[key]) {\n        this._statusMap[key].frameState = frameState;\n      }\n    }\n  }, {\n    key: \"find\",\n    value: function find(key) {\n      return this._statusMap[key];\n    }\n  }]);\n\n  return I3STileManager;\n}();\n\nexport { I3STileManager as default };","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport { load } from '@loaders.gl/core';\nimport TilesetTraverser from './tileset-traverser';\nimport { lodJudge } from '../helpers/i3s-lod';\nimport TileHeader from '../tile-3d';\nimport I3STileManager from './i3s-tile-manager';\n\nvar I3STilesetTraverser = function (_TilesetTraverser) {\n  _inherits(I3STilesetTraverser, _TilesetTraverser);\n\n  var _super = _createSuper(I3STilesetTraverser);\n\n  function I3STilesetTraverser(options) {\n    var _this;\n\n    _classCallCheck(this, I3STilesetTraverser);\n\n    _this = _super.call(this, options);\n    _this._tileManager = new I3STileManager();\n    return _this;\n  }\n\n  _createClass(I3STilesetTraverser, [{\n    key: \"shouldRefine\",\n    value: function shouldRefine(tile, frameState) {\n      tile._lodJudge = lodJudge(tile, frameState);\n      return tile._lodJudge === 'DIG';\n    }\n  }, {\n    key: \"updateChildTiles\",\n    value: function updateChildTiles(tile, frameState) {\n      var _this2 = this;\n\n      var children = tile.header.children || [];\n      var childTiles = tile.children;\n      var tileset = tile.tileset;\n\n      var _iterator = _createForOfIteratorHelper(children),\n          _step;\n\n      try {\n        var _loop = function _loop() {\n          var child = _step.value;\n          var childTile = childTiles && childTiles.find(function (t) {\n            return t.id === child.id;\n          });\n\n          if (!childTile) {\n            var request = function request() {\n              return _this2._loadTile(child.id, tileset);\n            };\n\n            var cachedRequest = _this2._tileManager.find(child.id);\n\n            if (!cachedRequest) {\n              _this2._tileManager.add(request, child.id, function (header) {\n                return _this2._onTileLoad(header, tile);\n              }, frameState);\n            } else {\n              _this2._tileManager.update(child.id, frameState);\n            }\n          } else if (childTile) {\n            _this2.updateTile(childTile, frameState);\n          }\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"_loadTile\",\n    value: function () {\n      var _loadTile2 = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(nodeId, tileset) {\n        var loader, nodeUrl, options;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                loader = tileset.loader;\n                nodeUrl = tileset.getTileUrl(\"\".concat(tileset.url, \"/nodes/\").concat(nodeId));\n                options = {\n                  i3s: _objectSpread(_objectSpread({}, tileset.fetchOptions), {}, {\n                    isTileHeader: true,\n                    loadContent: false\n                  })\n                };\n                _context.next = 5;\n                return load(nodeUrl, loader, options);\n\n              case 5:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function _loadTile(_x, _x2) {\n        return _loadTile2.apply(this, arguments);\n      }\n\n      return _loadTile;\n    }()\n  }, {\n    key: \"_onTileLoad\",\n    value: function _onTileLoad(header, tile) {\n      var basePath = this.options.basePath;\n      var childTile = new TileHeader(tile.tileset, header, tile, basePath);\n      tile.children.push(childTile);\n\n      var frameState = this._tileManager.find(childTile.id).frameState;\n\n      this.updateTile(childTile, frameState);\n\n      if (this._frameNumber === frameState.frameNumber) {\n        this.executeTraversal(childTile, frameState);\n      }\n    }\n  }]);\n\n  return I3STilesetTraverser;\n}(TilesetTraverser);\n\nexport { I3STilesetTraverser as default };","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { Matrix4, Vector3 } from '@math.gl/core';\nimport { Ellipsoid } from '@math.gl/geospatial';\nimport { Stats } from '@probe.gl/stats';\nimport { RequestScheduler, assert, path } from '@loaders.gl/loader-utils';\nimport TilesetCache from './tileset-cache';\nimport { calculateTransformProps } from './helpers/transform-utils';\nimport { getFrameState } from './helpers/frame-state';\nimport { getZoomFromBoundingVolume } from './helpers/zoom';\nimport Tile3D from './tile-3d';\nimport Tileset3DTraverser from './traversers/tileset-3d-traverser';\nimport TilesetTraverser from './traversers/tileset-traverser';\nimport I3SetTraverser from './traversers/i3s-tilset-traverser';\nimport { TILESET_TYPE } from '../constants';\nvar TILES_TOTAL = 'Tiles In Tileset(s)';\nvar TILES_IN_MEMORY = 'Tiles In Memory';\nvar TILES_IN_VIEW = 'Tiles In View';\nvar TILES_RENDERABLE = 'Tiles To Render';\nvar TILES_LOADED = 'Tiles Loaded';\nvar TILES_LOADING = 'Tiles Loading';\nvar TILES_UNLOADED = 'Tiles Unloaded';\nvar TILES_LOAD_FAILED = 'Failed Tile Loads';\nvar POINTS_COUNT = 'Points';\nvar TILES_GPU_MEMORY = 'Tile Memory Use';\n\nfunction getQueryParamString(queryParams) {\n  var queryParamStrings = [];\n\n  for (var _i = 0, _Object$keys = Object.keys(queryParams); _i < _Object$keys.length; _i++) {\n    var key = _Object$keys[_i];\n    queryParamStrings.push(\"\".concat(key, \"=\").concat(queryParams[key]));\n  }\n\n  switch (queryParamStrings.length) {\n    case 0:\n      return '';\n\n    case 1:\n      return \"?\".concat(queryParamStrings[0]);\n\n    default:\n      return \"?\".concat(queryParamStrings.join('&'));\n  }\n}\n\nvar DEFAULT_OPTIONS = {\n  ellipsoid: Ellipsoid.WGS84,\n  modelMatrix: new Matrix4(),\n  throttleRequests: false,\n  maximumMemoryUsage: 32,\n  onTileLoad: function onTileLoad() {},\n  onTileUnload: function onTileUnload() {},\n  onTileError: function onTileError(tile, message, url) {},\n  maximumScreenSpaceError: 8\n};\n\nvar Tileset3D = function () {\n  function Tileset3D(json) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Tileset3D);\n\n    assert(json);\n    this.options = _objectSpread(_objectSpread({}, DEFAULT_OPTIONS), options);\n    this.tileset = json;\n    this.loader = json.loader;\n    this.type = json.type;\n    this.url = json.url;\n    this.basePath = json.basePath || path.dirname(this.url);\n    this.modelMatrix = this.options.modelMatrix;\n    this.ellipsoid = this.options.ellipsoid;\n    this.lodMetricType = json.lodMetricType;\n    this.lodMetricValue = json.lodMetricValue;\n    this.refine = json.root.refine;\n    this.fetchOptions = this.options.fetchOptions || {};\n\n    if (this.options.headers) {\n      this.fetchOptions.headers = this.options.headers;\n    }\n\n    if (this.options.token) {\n      this.fetchOptions.token = this.options.token;\n    }\n\n    this.root = null;\n    this.cartographicCenter = null;\n    this.cartesianCenter = null;\n    this.zoom = 1;\n    this.boundingVolume = null;\n    this._traverser = this._initializeTraverser();\n    this._cache = new TilesetCache();\n    this._requestScheduler = new RequestScheduler({\n      throttleRequests: this.options.throttleRequests\n    });\n    this._frameNumber = 0;\n    this._updateFrameNumber = 0;\n    this._pendingCount = 0;\n    this._tiles = {};\n    this.selectedTiles = [];\n    this._emptyTiles = [];\n    this._requestedTiles = [];\n    this._selectedTilesToStyle = [];\n    this._queryParams = {};\n    this._queryParamsString = null;\n    this.maximumMemoryUsage = this.options.maximumMemoryUsage;\n    this.gpuMemoryUsageInBytes = 0;\n    this.stats = new Stats({\n      id: this.url\n    });\n\n    this._initializeStats();\n\n    this._hasMixedContent = false;\n    this._maximumScreenSpaceError = this.options.maximumScreenSpaceError;\n    this._properties = undefined;\n    this._extensionsUsed = undefined;\n    this._gltfUpAxis = undefined;\n    this._dynamicScreenSpaceErrorComputedDensity = 0.0;\n    this.extras = null;\n    this.asset = {};\n    this.credits = {};\n    this.description = this.options.description;\n    this._defaultGeometrySchema = [];\n\n    this._initializeTileSet(json, this.options);\n  }\n\n  _createClass(Tileset3D, [{\n    key: \"isLoaded\",\n    value: function isLoaded() {\n      return this._pendingCount === 0;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this._destroy();\n    }\n  }, {\n    key: \"getTileUrl\",\n    value: function getTileUrl(tilePath) {\n      var isDataUrl = tilePath.startsWith('data:');\n\n      if (isDataUrl) {\n        return tilePath;\n      }\n\n      return \"\".concat(tilePath).concat(this.queryParams);\n    }\n  }, {\n    key: \"update\",\n    value: function update(viewport) {\n      this._cache.reset();\n\n      this._frameNumber++;\n      this._frameState = getFrameState(viewport, this._frameNumber);\n\n      this._traverser.traverse(this.root, this._frameState, this.options);\n    }\n  }, {\n    key: \"_onTraversalEnd\",\n    value: function _onTraversalEnd() {\n      var selectedTiles = Object.values(this._traverser.selectedTiles);\n\n      if (this._tilesChanged(this.selectedTiles, selectedTiles)) {\n        this._updateFrameNumber++;\n      }\n\n      this.selectedTiles = selectedTiles;\n\n      var _iterator = _createForOfIteratorHelper(this.selectedTiles),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var tile = _step.value;\n          this._tiles[tile.id] = tile;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this._requestedTiles = Object.values(this._traverser.requestedTiles);\n      this._emptyTiles = Object.values(this._traverser.emptyTiles);\n\n      this._loadTiles(this._frameState);\n\n      this._unloadTiles();\n\n      this._updateStats();\n\n      return this._updateFrameNumber;\n    }\n  }, {\n    key: \"_tilesChanged\",\n    value: function _tilesChanged(oldSelectedTiles, selectedTiles) {\n      if (oldSelectedTiles.length !== selectedTiles.length) {\n        return true;\n      }\n\n      var set1 = new Set(oldSelectedTiles.map(function (t) {\n        return t.id;\n      }));\n      var set2 = new Set(selectedTiles.map(function (t) {\n        return t.id;\n      }));\n      var changed = oldSelectedTiles.filter(function (x) {\n        return !set2.has(x.id);\n      }).length > 0;\n      changed = changed || selectedTiles.filter(function (x) {\n        return !set1.has(x.id);\n      }).length > 0;\n      return changed;\n    }\n  }, {\n    key: \"_loadTiles\",\n    value: function _loadTiles(frameState) {\n      var _iterator2 = _createForOfIteratorHelper(this._requestedTiles),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var tile = _step2.value;\n\n          if (tile.contentUnloaded) {\n            this._loadTile(tile, frameState);\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"_unloadTiles\",\n    value: function _unloadTiles() {\n      this._cache.unloadTiles(this, function (tileset, tile) {\n        return tileset._unloadTile(tile);\n      });\n    }\n  }, {\n    key: \"_updateStats\",\n    value: function _updateStats() {\n      var tilesRenderable = 0;\n      var pointsRenderable = 0;\n\n      var _iterator3 = _createForOfIteratorHelper(this.selectedTiles),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var tile = _step3.value;\n\n          if (tile.contentAvailable) {\n            tilesRenderable++;\n\n            if (tile.content.pointCount) {\n              pointsRenderable += tile.content.pointCount;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      this.stats.get(TILES_IN_VIEW).count = this.selectedTiles.length;\n      this.stats.get(TILES_RENDERABLE).count = tilesRenderable;\n      this.stats.get(POINTS_COUNT).count = pointsRenderable;\n    }\n  }, {\n    key: \"_initializeTileSet\",\n    value: function _initializeTileSet(tilesetJson) {\n      this.root = this._initializeTileHeaders(tilesetJson, null, this.basePath);\n\n      if (this.type === TILESET_TYPE.TILES3D) {\n        this._initializeCesiumTileset(tilesetJson);\n      }\n\n      if (this.type === TILESET_TYPE.I3S) {\n        this._initializeI3STileset(tilesetJson);\n      }\n\n      this._calculateViewProps();\n    }\n  }, {\n    key: \"_calculateViewProps\",\n    value: function _calculateViewProps() {\n      var root = this.root;\n      var center = root.boundingVolume.center;\n\n      if (!center) {\n        console.warn('center was not pre-calculated for the root tile');\n        this.cartographicCenter = new Vector3();\n        this.zoom = 1;\n        return;\n      }\n\n      this.cartographicCenter = Ellipsoid.WGS84.cartesianToCartographic(center, new Vector3());\n      this.cartesianCenter = center;\n      this.zoom = getZoomFromBoundingVolume(root.boundingVolume);\n    }\n  }, {\n    key: \"_initializeStats\",\n    value: function _initializeStats() {\n      this.stats.get(TILES_TOTAL);\n      this.stats.get(TILES_LOADING);\n      this.stats.get(TILES_IN_MEMORY);\n      this.stats.get(TILES_IN_VIEW);\n      this.stats.get(TILES_RENDERABLE);\n      this.stats.get(TILES_LOADED);\n      this.stats.get(TILES_UNLOADED);\n      this.stats.get(TILES_LOAD_FAILED);\n      this.stats.get(POINTS_COUNT, 'memory');\n      this.stats.get(TILES_GPU_MEMORY, 'memory');\n    }\n  }, {\n    key: \"_initializeTileHeaders\",\n    value: function _initializeTileHeaders(tilesetJson, parentTileHeader, basePath) {\n      var rootTile = new Tile3D(this, tilesetJson.root, parentTileHeader, basePath);\n\n      if (parentTileHeader) {\n        parentTileHeader.children.push(rootTile);\n        rootTile.depth = parentTileHeader.depth + 1;\n      }\n\n      if (this.type === TILESET_TYPE.TILES3D) {\n        var stack = [];\n        stack.push(rootTile);\n\n        while (stack.length > 0) {\n          var tile = stack.pop();\n          this.stats.get(TILES_TOTAL).incrementCount();\n          var children = tile.header.children || [];\n\n          var _iterator4 = _createForOfIteratorHelper(children),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var childHeader = _step4.value;\n              var childTile = new Tile3D(this, childHeader, tile, basePath);\n              tile.children.push(childTile);\n              childTile.depth = tile.depth + 1;\n              stack.push(childTile);\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n        }\n      }\n\n      return rootTile;\n    }\n  }, {\n    key: \"_initializeTraverser\",\n    value: function _initializeTraverser() {\n      var TraverserClass;\n      var type = this.type;\n\n      switch (type) {\n        case TILESET_TYPE.TILES3D:\n          TraverserClass = Tileset3DTraverser;\n          break;\n\n        case TILESET_TYPE.I3S:\n          TraverserClass = I3SetTraverser;\n          break;\n\n        default:\n          TraverserClass = TilesetTraverser;\n      }\n\n      return new TraverserClass({\n        basePath: this.basePath,\n        onTraversalEnd: this._onTraversalEnd.bind(this)\n      });\n    }\n  }, {\n    key: \"_destroyTileHeaders\",\n    value: function _destroyTileHeaders(parentTile) {\n      this._destroySubtree(parentTile);\n    }\n  }, {\n    key: \"_loadTile\",\n    value: function () {\n      var _loadTile2 = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tile, frameState) {\n        var loaded;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n\n                this._onStartTileLoading();\n\n                _context.next = 4;\n                return tile.loadContent(frameState);\n\n              case 4:\n                loaded = _context.sent;\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n\n                this._onTileLoadError(tile, _context.t0);\n\n              case 10:\n                _context.prev = 10;\n\n                this._onEndTileLoading();\n\n                this._onTileLoad(tile, loaded);\n\n                return _context.finish(10);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 7, 10, 14]]);\n      }));\n\n      function _loadTile(_x, _x2) {\n        return _loadTile2.apply(this, arguments);\n      }\n\n      return _loadTile;\n    }()\n  }, {\n    key: \"_onTileLoadError\",\n    value: function _onTileLoadError(tile, error) {\n      this.stats.get(TILES_LOAD_FAILED).incrementCount();\n      var message = error.message || error.toString();\n      var url = tile.url;\n      console.error(\"A 3D tile failed to load: \".concat(tile.url, \" \").concat(message));\n      this.options.onTileError(tile, message, url);\n    }\n  }, {\n    key: \"_onTileLoad\",\n    value: function _onTileLoad(tile, loaded) {\n      if (!loaded) {\n        return;\n      }\n\n      if (tile && tile.content) {\n        calculateTransformProps(tile, tile.content);\n      }\n\n      this._addTileToCache(tile);\n\n      this.options.onTileLoad(tile);\n    }\n  }, {\n    key: \"_onStartTileLoading\",\n    value: function _onStartTileLoading() {\n      this._pendingCount++;\n      this.stats.get(TILES_LOADING).incrementCount();\n    }\n  }, {\n    key: \"_onEndTileLoading\",\n    value: function _onEndTileLoading() {\n      this._pendingCount--;\n      this.stats.get(TILES_LOADING).decrementCount();\n    }\n  }, {\n    key: \"_addTileToCache\",\n    value: function _addTileToCache(tile) {\n      this._cache.add(this, tile, function (tileset) {\n        return tileset._updateCacheStats(tile);\n      });\n    }\n  }, {\n    key: \"_updateCacheStats\",\n    value: function _updateCacheStats(tile) {\n      this.stats.get(TILES_LOADED).incrementCount();\n      this.stats.get(TILES_IN_MEMORY).incrementCount();\n      this.gpuMemoryUsageInBytes += tile.content.byteLength || 0;\n      this.stats.get(TILES_GPU_MEMORY).count = this.gpuMemoryUsageInBytes;\n    }\n  }, {\n    key: \"_unloadTile\",\n    value: function _unloadTile(tile) {\n      this.gpuMemoryUsageInBytes -= tile.content.byteLength || 0;\n      this.stats.get(TILES_IN_MEMORY).decrementCount();\n      this.stats.get(TILES_UNLOADED).incrementCount();\n      this.stats.get(TILES_GPU_MEMORY).count = this.gpuMemoryUsageInBytes;\n      this.options.onTileUnload(tile);\n      tile.unloadContent();\n    }\n  }, {\n    key: \"_destroy\",\n    value: function _destroy() {\n      var stack = [];\n\n      if (this.root) {\n        stack.push(this.root);\n      }\n\n      while (stack.length > 0) {\n        var tile = stack.pop();\n\n        var _iterator5 = _createForOfIteratorHelper(tile.children),\n            _step5;\n\n        try {\n          for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n            var child = _step5.value;\n            stack.push(child);\n          }\n        } catch (err) {\n          _iterator5.e(err);\n        } finally {\n          _iterator5.f();\n        }\n\n        this._destroyTile(tile);\n      }\n\n      this.root = null;\n    }\n  }, {\n    key: \"_destroySubtree\",\n    value: function _destroySubtree(tile) {\n      var root = tile;\n      var stack = [];\n      stack.push(root);\n\n      while (stack.length > 0) {\n        tile = stack.pop();\n\n        var _iterator6 = _createForOfIteratorHelper(tile.children),\n            _step6;\n\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var child = _step6.value;\n            stack.push(child);\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n\n        if (tile !== root) {\n          this._destroyTile(tile);\n        }\n      }\n\n      root.children = [];\n    }\n  }, {\n    key: \"_destroyTile\",\n    value: function _destroyTile(tile) {\n      this._cache.unloadTile(this, tile);\n\n      this._unloadTile(tile);\n\n      tile.destroy();\n    }\n  }, {\n    key: \"_initializeCesiumTileset\",\n    value: function _initializeCesiumTileset(tilesetJson) {\n      this.asset = tilesetJson.asset;\n\n      if (!this.asset) {\n        throw new Error('Tileset must have an asset property.');\n      }\n\n      if (this.asset.version !== '0.0' && this.asset.version !== '1.0') {\n        throw new Error('The tileset must be 3D Tiles version 0.0 or 1.0.');\n      }\n\n      if ('tilesetVersion' in this.asset) {\n        this._queryParams.v = this.asset.tilesetVersion;\n      }\n\n      this.credits = {\n        attributions: this.options.attributions || []\n      };\n      this.description = this.options.description;\n      this.properties = tilesetJson.properties;\n      this.geometricError = tilesetJson.geometricError;\n      this._extensionsUsed = tilesetJson.extensionsUsed;\n      this.extras = tilesetJson.extras;\n    }\n  }, {\n    key: \"_initializeI3STileset\",\n    value: function _initializeI3STileset(tilesetJson) {\n      if ('token' in this.options) {\n        this._queryParams.token = this.options.token;\n      }\n\n      this._defaultGeometrySchema = tilesetJson.store.defaultGeometrySchema;\n    }\n  }, {\n    key: \"hasExtension\",\n    value: function hasExtension(extensionName) {\n      return Boolean(this._extensionsUsed && this._extensionsUsed.indexOf(extensionName) > -1);\n    }\n  }, {\n    key: \"tiles\",\n    get: function get() {\n      return Object.values(this._tiles);\n    }\n  }, {\n    key: \"queryParams\",\n    get: function get() {\n      if (!this._queryParamsString) {\n        this._queryParamsString = getQueryParamString(this._queryParams);\n      }\n\n      return this._queryParamsString;\n    }\n  }]);\n\n  return Tileset3D;\n}();\n\nexport { Tileset3D as default };","import { Ellipsoid } from '@math.gl/geospatial';\nimport { Matrix4, Vector3 } from '@math.gl/core';\nimport { assert } from '@loaders.gl/loader-utils';\nexport function calculateTransformProps(tileHeader, tile) {\n  assert(tileHeader);\n  assert(tile);\n  var rtcCenter = tile.rtcCenter,\n      rotateYtoZ = tile.rotateYtoZ;\n  var computedTransform = tileHeader.computedTransform,\n      center = tileHeader.boundingVolume.center;\n  var modelMatrix = new Matrix4(computedTransform);\n\n  if (rtcCenter) {\n    modelMatrix.translate(rtcCenter);\n  }\n\n  if (rotateYtoZ) {\n    var rotation = new Matrix4().rotateX(Math.PI / 2);\n    modelMatrix = modelMatrix.multiplyRight(rotation);\n  }\n\n  if (tile.isQuantized) {\n    modelMatrix.translate(tile.quantizedVolumeOffset).scale(tile.quantizedVolumeScale);\n  }\n\n  var cartesianOrigin = new Vector3(center);\n  tile.cartesianModelMatrix = modelMatrix;\n  tile.cartesianOrigin = cartesianOrigin;\n  var cartographicOrigin = Ellipsoid.WGS84.cartesianToCartographic(cartesianOrigin, new Vector3());\n  var fromFixedFrameMatrix = Ellipsoid.WGS84.eastNorthUpToFixedFrame(cartesianOrigin);\n  var toFixedFrameMatrix = fromFixedFrameMatrix.invert();\n  tile.cartographicModelMatrix = toFixedFrameMatrix.multiplyRight(modelMatrix);\n  tile.cartographicOrigin = cartographicOrigin;\n  tile.modelMatrix = tile.cartographicModelMatrix;\n}","export var TILE3D_TYPE = {\n  COMPOSITE: 'cmpt',\n  POINT_CLOUD: 'pnts',\n  BATCHED_3D_MODEL: 'b3dm',\n  INSTANCED_3D_MODEL: 'i3dm',\n  GEOMETRY: 'geom',\n  VECTOR: 'vect'\n};\nexport var TILE3D_TYPES = Object.keys(TILE3D_TYPE);\nexport var MAGIC_ARRAY = {\n  BATCHED_MODEL: [98, 51, 100, 109],\n  INSTANCED_MODEL: [105, 51, 100, 109],\n  POINT_CLOUD: [112, 110, 116, 115],\n  COMPOSITE: [99, 109, 112, 116]\n};\nexport var TILE3D_OPTIMIZATION_HINT = {\n  NOT_COMPUTED: -1,\n  USE_OPTIMIZATION: 1,\n  SKIP_OPTIMIZATION: 0\n};","import { assert } from '@loaders.gl/loader-utils';\nexport function getStringFromArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n  assert(arrayBuffer instanceof ArrayBuffer);\n  var textDecoder = new TextDecoder('utf8');\n  var typedArray = new Uint8Array(arrayBuffer, byteOffset, byteLength);\n  var string = textDecoder.decode(typedArray);\n  return string;\n}\nexport function getStringFromTypedArray(typedArray) {\n  assert(ArrayBuffer.isView(typedArray));\n  var textDecoder = new TextDecoder('utf8');\n  var string = textDecoder.decode(typedArray);\n  return string;\n}\nexport function getMagicString(arrayBuffer) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var dataView = new DataView(arrayBuffer);\n  return \"\".concat(String.fromCharCode(dataView.getUint8(byteOffset + 0))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 1))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 2))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 3)));\n}","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadLibrary, global } from '@loaders.gl/loader-utils';\nvar loadDecoderPromise;\nvar loadEncoderPromise;\nexport function loadDracoDecoderModule(_x) {\n  return _loadDracoDecoderModule.apply(this, arguments);\n}\n\nfunction _loadDracoDecoderModule() {\n  _loadDracoDecoderModule = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(options) {\n    var modules;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            modules = options.modules || {};\n\n            if (!modules.draco3d) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {\n              draco: modules.draco3d.createDecoderModule()\n            });\n\n          case 3:\n            loadDecoderPromise = loadDecoderPromise || loadDracoDecoder(options);\n            _context.next = 6;\n            return loadDecoderPromise;\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadDracoDecoderModule.apply(this, arguments);\n}\n\nexport function loadDracoEncoderModule(_x2) {\n  return _loadDracoEncoderModule.apply(this, arguments);\n}\n\nfunction _loadDracoEncoderModule() {\n  _loadDracoEncoderModule = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(options) {\n    var modules;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            modules = options.modules || {};\n\n            if (!modules.draco3d) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", {\n              draco: modules.draco3d.createEncoderModule()\n            });\n\n          case 3:\n            loadEncoderPromise = loadEncoderPromise || loadDracoEncoder(options);\n            _context2.next = 6;\n            return loadEncoderPromise;\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadDracoEncoderModule.apply(this, arguments);\n}\n\nfunction loadDracoDecoder(_x3) {\n  return _loadDracoDecoder.apply(this, arguments);\n}\n\nfunction _loadDracoDecoder() {\n  _loadDracoDecoder = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(options) {\n    var DracoDecoderModule, wasmBinary, _yield$Promise$all, _yield$Promise$all2;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.t0 = options.draco && options.draco.decoderType;\n            _context3.next = _context3.t0 === 'js' ? 3 : _context3.t0 === 'wasm' ? 7 : 7;\n            break;\n\n          case 3:\n            _context3.next = 5;\n            return loadLibrary('draco_decoder.js', 'draco', options);\n\n          case 5:\n            DracoDecoderModule = _context3.sent;\n            return _context3.abrupt(\"break\", 21);\n\n          case 7:\n            _context3.t1 = Promise;\n            _context3.next = 10;\n            return loadLibrary('draco_wasm_wrapper.js', 'draco', options);\n\n          case 10:\n            _context3.t2 = _context3.sent;\n            _context3.next = 13;\n            return loadLibrary('draco_decoder.wasm', 'draco', options);\n\n          case 13:\n            _context3.t3 = _context3.sent;\n            _context3.t4 = [_context3.t2, _context3.t3];\n            _context3.next = 17;\n            return _context3.t1.all.call(_context3.t1, _context3.t4);\n\n          case 17:\n            _yield$Promise$all = _context3.sent;\n            _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 2);\n            DracoDecoderModule = _yield$Promise$all2[0];\n            wasmBinary = _yield$Promise$all2[1];\n\n          case 21:\n            DracoDecoderModule = DracoDecoderModule || global.DracoDecoderModule;\n            _context3.next = 24;\n            return initializeDracoDecoder(DracoDecoderModule, wasmBinary);\n\n          case 24:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 25:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loadDracoDecoder.apply(this, arguments);\n}\n\nfunction initializeDracoDecoder(DracoDecoderModule, wasmBinary) {\n  var options = {};\n\n  if (wasmBinary) {\n    options.wasmBinary = wasmBinary;\n  }\n\n  return new Promise(function (resolve) {\n    DracoDecoderModule(_objectSpread(_objectSpread({}, options), {}, {\n      onModuleLoaded: function onModuleLoaded(draco) {\n        return resolve({\n          draco: draco\n        });\n      }\n    }));\n  });\n}\n\nfunction loadDracoEncoder(_x4) {\n  return _loadDracoEncoder.apply(this, arguments);\n}\n\nfunction _loadDracoEncoder() {\n  _loadDracoEncoder = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(options) {\n    var DracoEncoderModule;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return loadLibrary('draco_encoder.js', 'draco', options);\n\n          case 2:\n            DracoEncoderModule = _context4.sent;\n            DracoEncoderModule = DracoEncoderModule || global.DracoEncoderModule;\n            return _context4.abrupt(\"return\", new Promise(function (resolve) {\n              DracoEncoderModule({\n                onModuleLoaded: function onModuleLoaded(draco) {\n                  return resolve({\n                    draco: draco\n                  });\n                }\n              });\n            }));\n\n          case 5:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _loadDracoEncoder.apply(this, arguments);\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getMeshBoundingBox } from '@loaders.gl/loader-utils';\nvar GEOMETRY_TYPE = {\n  TRIANGULAR_MESH: 0,\n  POINT_CLOUD: 1\n};\nvar DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP = {\n  POSITION: 'POSITION',\n  NORMAL: 'NORMAL',\n  COLOR: 'COLOR_0',\n  TEX_COORD: 'TEXCOORD_0'\n};\nvar DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP = {\n  1: Int8Array,\n  2: Uint8Array,\n  3: Int16Array,\n  4: Uint16Array,\n  5: Int32Array,\n  6: Uint32Array,\n  9: Float32Array\n};\n\nvar DracoParser = function () {\n  function DracoParser(draco) {\n    _classCallCheck(this, DracoParser);\n\n    this.draco = draco;\n    this.drawMode = 'TRIANGLE';\n  }\n\n  _createClass(DracoParser, [{\n    key: \"destroy\",\n    value: function destroy() {}\n  }, {\n    key: \"destroyGeometry\",\n    value: function destroyGeometry(dracoGeometry) {\n      if (dracoGeometry) {\n        this.draco.destroy(dracoGeometry.dracoGeometry);\n      }\n    }\n  }, {\n    key: \"parseSync\",\n    value: function parseSync(arrayBuffer, options) {\n      var buffer = new this.draco.DecoderBuffer();\n      buffer.Init(new Int8Array(arrayBuffer), arrayBuffer.byteLength);\n      var decoder = new this.draco.Decoder();\n      var data = {};\n      var dracoStatus;\n      var dracoGeometry;\n      var header;\n\n      try {\n        var geometryType = decoder.GetEncodedGeometryType(buffer);\n\n        switch (geometryType) {\n          case this.draco.TRIANGULAR_MESH:\n            dracoGeometry = new this.draco.Mesh();\n            dracoStatus = decoder.DecodeBufferToMesh(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.TRIANGULAR_MESH,\n              faceCount: dracoGeometry.num_faces(),\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          case this.draco.POINT_CLOUD:\n            dracoGeometry = new this.draco.PointCloud();\n            dracoStatus = decoder.DecodeBufferToPointCloud(buffer, dracoGeometry);\n            header = {\n              type: GEOMETRY_TYPE.POINT_CLOUD,\n              attributeCount: dracoGeometry.num_attributes(),\n              vertexCount: dracoGeometry.num_points()\n            };\n            break;\n\n          default:\n            throw new Error('Unknown DRACO geometry type.');\n        }\n\n        if (!dracoStatus.ok() || !dracoGeometry.ptr) {\n          var message = \"DRACO decompression failed: \".concat(dracoStatus.error_msg());\n\n          if (dracoGeometry) {\n            this.draco.destroy(dracoGeometry);\n          }\n\n          throw new Error(message);\n        }\n\n        data.loaderData = {\n          header: header\n        };\n        this.extractDRACOGeometry(decoder, dracoGeometry, geometryType, data);\n        data.header = {\n          vertexCount: header.vertexCount,\n          boundingBox: getMeshBoundingBox(data.attributes)\n        };\n      } finally {\n        this.draco.destroy(decoder);\n        this.draco.destroy(buffer);\n      }\n\n      return data;\n    }\n  }, {\n    key: \"extractDRACOGeometry\",\n    value: function extractDRACOGeometry(decoder, dracoGeometry, geometryType, geometry) {\n      var attributes = this.getAttributes(decoder, dracoGeometry);\n      var positionAttribute = attributes.POSITION;\n\n      if (!positionAttribute) {\n        throw new Error('DRACO decompressor: No position attribute found.');\n      }\n\n      this.getPositionAttributeMetadata(positionAttribute);\n\n      if (geometryType === this.draco.TRIANGULAR_MESH) {\n        attributes.indices = this.drawMode === 'TRIANGLE_STRIP' ? this.getMeshStripIndices(decoder, dracoGeometry) : this.getMeshFaceIndices(decoder, dracoGeometry);\n        geometry.mode = this.drawMode === 'TRIANGLE_STRIP' ? 5 : 4;\n      } else {\n        geometry.mode = 0;\n      }\n\n      if (attributes.indices) {\n        geometry.indices = {\n          value: attributes.indices,\n          size: 1\n        };\n        delete attributes.indices;\n      }\n\n      geometry.attributes = attributes;\n      return geometry;\n    }\n  }, {\n    key: \"getPositionAttributeMetadata\",\n    value: function getPositionAttributeMetadata(positionAttribute) {\n      this.metadata = this.metadata || {};\n      this.metadata.attributes = this.metadata.attributes || {};\n      var posTransform = new this.draco.AttributeQuantizationTransform();\n\n      if (posTransform.InitFromAttribute(positionAttribute)) {\n        this.metadata.attributes.position.isQuantized = true;\n        this.metadata.attributes.position.maxRange = posTransform.range();\n        this.metadata.attributes.position.numQuantizationBits = posTransform.quantization_bits();\n        this.metadata.attributes.position.minValues = new Float32Array(3);\n\n        for (var i = 0; i < 3; ++i) {\n          this.metadata.attributes.position.minValues[i] = posTransform.min_value(i);\n        }\n      }\n\n      this.draco.destroy(posTransform);\n    }\n  }, {\n    key: \"getAttributes\",\n    value: function getAttributes(decoder, dracoGeometry) {\n      var attributes = {};\n      var numPoints = dracoGeometry.num_points();\n\n      for (var attributeName in DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP) {\n        var attributeType = this.draco[attributeName];\n        var attributeId = decoder.GetAttributeId(dracoGeometry, attributeType);\n\n        if (attributeId !== -1) {\n          var dracoAttribute = decoder.GetAttribute(dracoGeometry, attributeId);\n\n          var _this$getAttributeTyp = this.getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName),\n              typedArray = _this$getAttributeTyp.typedArray;\n\n          attributes[DRACO_TO_GLTF_ATTRIBUTE_NAME_MAP[attributeName]] = {\n            value: typedArray,\n            size: typedArray.length / numPoints\n          };\n        }\n      }\n\n      return attributes;\n    }\n  }, {\n    key: \"getMeshFaceIndices\",\n    value: function getMeshFaceIndices(decoder, dracoGeometry) {\n      var numFaces = dracoGeometry.num_faces();\n      var numIndices = numFaces * 3;\n      var indices = new Uint32Array(numIndices);\n      var dracoArray = new this.draco.DracoInt32Array();\n\n      for (var i = 0; i < numFaces; ++i) {\n        decoder.GetFaceFromMesh(dracoGeometry, i, dracoArray);\n        var index = i * 3;\n        indices[index] = dracoArray.GetValue(0);\n        indices[index + 1] = dracoArray.GetValue(1);\n        indices[index + 2] = dracoArray.GetValue(2);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getMeshStripIndices\",\n    value: function getMeshStripIndices(decoder, dracoGeometry) {\n      var dracoArray = new this.draco.DracoInt32Array();\n      decoder.GetTriangleStripsFromMesh(dracoGeometry, dracoArray);\n      var indices = new Uint32Array(dracoArray.size());\n\n      for (var i = 0; i < dracoArray.size(); ++i) {\n        indices[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return indices;\n    }\n  }, {\n    key: \"getAttributeTypedArray\",\n    value: function getAttributeTypedArray(decoder, dracoGeometry, dracoAttribute, attributeName) {\n      if (dracoAttribute.ptr === 0) {\n        var message = \"DRACO decode bad attribute \".concat(attributeName);\n        throw new Error(message);\n      }\n\n      var attributeType = DRACO_DATA_TYPE_TO_TYPED_ARRAY_MAP[dracoAttribute.data_type()];\n      var numComponents = dracoAttribute.num_components();\n      var numPoints = dracoGeometry.num_points();\n      var numValues = numPoints * numComponents;\n      var dracoArray;\n      var typedArray;\n\n      switch (attributeType) {\n        case Float32Array:\n          dracoArray = new this.draco.DracoFloat32Array();\n          decoder.GetAttributeFloatForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Float32Array(numValues);\n          break;\n\n        case Int8Array:\n          dracoArray = new this.draco.DracoInt8Array();\n          decoder.GetAttributeInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int8Array(numValues);\n          break;\n\n        case Int16Array:\n          dracoArray = new this.draco.DracoInt16Array();\n          decoder.GetAttributeInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int16Array(numValues);\n          break;\n\n        case Int32Array:\n          dracoArray = new this.draco.DracoInt32Array();\n          decoder.GetAttributeInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Int32Array(numValues);\n          break;\n\n        case Uint8Array:\n          dracoArray = new this.draco.DracoUInt8Array();\n          decoder.GetAttributeUInt8ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint8Array(numValues);\n          break;\n\n        case Uint16Array:\n          dracoArray = new this.draco.DracoUInt16Array();\n          decoder.GetAttributeUInt16ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint16Array(numValues);\n          break;\n\n        case Uint32Array:\n          dracoArray = new this.draco.DracoUInt32Array();\n          decoder.GetAttributeUInt32ForAllPoints(dracoGeometry, dracoAttribute, dracoArray);\n          typedArray = new Uint32Array(numValues);\n          break;\n\n        default:\n          var errorMsg = 'DRACO decoder: unexpected attribute type.';\n          throw new Error(errorMsg);\n      }\n\n      for (var i = 0; i < numValues; i++) {\n        typedArray[i] = dracoArray.GetValue(i);\n      }\n\n      this.draco.destroy(dracoArray);\n      return {\n        typedArray: typedArray,\n        components: numComponents\n      };\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(arrayBuffer, options) {\n      return this.parseSync(arrayBuffer, options);\n    }\n  }]);\n\n  return DracoParser;\n}();\n\nexport { DracoParser as default };","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { loadDracoDecoderModule } from './lib/draco-module-loader';\nimport DracoParser from './lib/draco-parser';\nvar VERSION = typeof \"2.3.0-alpha.12\" !== 'undefined' ? \"2.3.0-alpha.12\" : 'latest';\nexport var DracoWorkerLoader = {\n  id: 'draco',\n  name: 'Draco',\n  version: VERSION,\n  extensions: ['drc'],\n  mimeTypes: ['application/octet-stream'],\n  binary: true,\n  tests: ['DRACO'],\n  options: {\n    draco: {\n      decoderType: (typeof WebAssembly === \"undefined\" ? \"undefined\" : _typeof(WebAssembly)) === 'object' ? 'wasm' : 'js',\n      libraryPath: \"libs/\",\n      workerUrl: \"https://unpkg.com/@loaders.gl/draco@\".concat(VERSION, \"/dist/draco-loader.worker.js\"),\n      localWorkerUrl: \"modules/draco/dist/draco-loader.worker.dev.js\"\n    }\n  }\n};\nexport var DracoLoader = _objectSpread(_objectSpread({}, DracoWorkerLoader), {}, {\n  parse: parse\n});\n\nfunction parse(_x, _x2, _x3, _x4) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context, loader) {\n    var _yield$loadDracoDecod, draco, dracoParser;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return loadDracoDecoderModule(options);\n\n          case 2:\n            _yield$loadDracoDecod = _context.sent;\n            draco = _yield$loadDracoDecod.draco;\n            dracoParser = new DracoParser(draco);\n            _context.prev = 5;\n            return _context.abrupt(\"return\", dracoParser.parseSync(arrayBuffer));\n\n          case 7:\n            _context.prev = 7;\n            dracoParser.destroy();\n            return _context.finish(7);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[5,, 7, 10]]);\n  }));\n  return _parse.apply(this, arguments);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nexport var GL_PRIMITIVE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  TRIANGLES: 0x0004\n};\nexport var GL_PRIMITIVE_MODE = {\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006\n};\nexport var GL_TYPE = {\n  BYTE: 5120,\n  UNSIGNED_BYTE: 5121,\n  SHORT: 5122,\n  UNSIGNED_SHORT: 5123,\n  INT: 5124,\n  UNSIGNED_INT: 5125,\n  FLOAT: 5126,\n  DOUBLE: 5130\n};\nexport var GL = _objectSpread(_objectSpread({}, GL_PRIMITIVE_MODE), GL_TYPE);","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _GL_TYPE_TO_ARRAY_TYP;\n\nimport { GL_TYPE as GL } from '../constants';\nvar GL_TYPE_TO_ARRAY_TYPE = (_GL_TYPE_TO_ARRAY_TYP = {}, _defineProperty(_GL_TYPE_TO_ARRAY_TYP, GL.DOUBLE, Float64Array), _defineProperty(_GL_TYPE_TO_ARRAY_TYP, GL.FLOAT, Float32Array), _defineProperty(_GL_TYPE_TO_ARRAY_TYP, GL.UNSIGNED_SHORT, Uint16Array), _defineProperty(_GL_TYPE_TO_ARRAY_TYP, GL.UNSIGNED_INT, Uint32Array), _defineProperty(_GL_TYPE_TO_ARRAY_TYP, GL.UNSIGNED_BYTE, Uint8Array), _defineProperty(_GL_TYPE_TO_ARRAY_TYP, GL.BYTE, Int8Array), _defineProperty(_GL_TYPE_TO_ARRAY_TYP, GL.SHORT, Int16Array), _defineProperty(_GL_TYPE_TO_ARRAY_TYP, GL.INT, Int32Array), _GL_TYPE_TO_ARRAY_TYP);\nvar NAME_TO_GL_TYPE = {\n  DOUBLE: GL.DOUBLE,\n  FLOAT: GL.FLOAT,\n  UNSIGNED_SHORT: GL.UNSIGNED_SHORT,\n  UNSIGNED_INT: GL.UNSIGNED_INT,\n  UNSIGNED_BYTE: GL.UNSIGNED_BYTE,\n  BYTE: GL.BYTE,\n  SHORT: GL.SHORT,\n  INT: GL.INT\n};\nvar ERR_TYPE_CONVERSION = 'Failed to convert GL type';\n\nvar GLType = function () {\n  function GLType() {\n    _classCallCheck(this, GLType);\n  }\n\n  _createClass(GLType, null, [{\n    key: \"fromTypedArray\",\n    value: function fromTypedArray(arrayOrType) {\n      arrayOrType = ArrayBuffer.isView(arrayOrType) ? arrayOrType.constructor : arrayOrType;\n\n      for (var glType in GL_TYPE_TO_ARRAY_TYPE) {\n        var ArrayType = GL_TYPE_TO_ARRAY_TYPE[glType];\n\n        if (ArrayType === arrayOrType) {\n          return glType;\n        }\n      }\n\n      throw new Error(ERR_TYPE_CONVERSION);\n    }\n  }, {\n    key: \"fromName\",\n    value: function fromName(name) {\n      var glType = NAME_TO_GL_TYPE[name];\n\n      if (!glType) {\n        throw new Error(ERR_TYPE_CONVERSION);\n      }\n\n      return glType;\n    }\n  }, {\n    key: \"getArrayType\",\n    value: function getArrayType(glType) {\n      var clamped = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      switch (glType) {\n        case GL.UNSIGNED_SHORT_5_6_5:\n        case GL.UNSIGNED_SHORT_4_4_4_4:\n        case GL.UNSIGNED_SHORT_5_5_5_1:\n          return Uint16Array;\n\n        default:\n          var ArrayType = GL_TYPE_TO_ARRAY_TYPE[glType];\n\n          if (!ArrayType) {\n            throw new Error(ERR_TYPE_CONVERSION);\n          }\n\n          return ArrayType;\n      }\n    }\n  }, {\n    key: \"getByteSize\",\n    value: function getByteSize(glType) {\n      var ArrayType = GLType.getArrayType(glType);\n      return ArrayType.BYTES_PER_ELEMENT;\n    }\n  }, {\n    key: \"validate\",\n    value: function validate(glType) {\n      return Boolean(GLType.getArrayType(glType));\n    }\n  }, {\n    key: \"createTypedArray\",\n    value: function createTypedArray(glType, buffer) {\n      var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var length = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (length === undefined) {\n        length = (buffer.byteLength - byteOffset) / GLType.getByteSize(glType);\n      }\n\n      var ArrayType = GLType.getArrayType(glType);\n      return new ArrayType(buffer, byteOffset, length);\n    }\n  }]);\n\n  return GLType;\n}();\n\nexport { GLType as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { GL, GLType } from '@loaders.gl/math';\n\nvar Tile3DFeatureTable = function () {\n  function Tile3DFeatureTable(featureTableJson, featureTableBinary) {\n    _classCallCheck(this, Tile3DFeatureTable);\n\n    this.json = featureTableJson;\n    this.buffer = featureTableBinary;\n    this.featuresLength = 0;\n    this._cachedTypedArrays = {};\n  }\n\n  _createClass(Tile3DFeatureTable, [{\n    key: \"getExtension\",\n    value: function getExtension(extensionName) {\n      return this.json.extensions && this.json.extensions[extensionName];\n    }\n  }, {\n    key: \"hasProperty\",\n    value: function hasProperty(propertyName) {\n      return Boolean(this.json[propertyName]);\n    }\n  }, {\n    key: \"getGlobalProperty\",\n    value: function getGlobalProperty(propertyName) {\n      var componentType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : GL.UNSIGNED_INT;\n      var componentLength = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      var jsonValue = this.json[propertyName];\n\n      if (jsonValue && Number.isFinite(jsonValue.byteOffset)) {\n        return this._getTypedArrayFromBinary(propertyName, componentType, componentLength, 1, jsonValue.byteOffset);\n      }\n\n      return jsonValue;\n    }\n  }, {\n    key: \"getPropertyArray\",\n    value: function getPropertyArray(propertyName, componentType, componentLength) {\n      var jsonValue = this.json[propertyName];\n\n      if (jsonValue && Number.isFinite(jsonValue.byteOffset)) {\n        if ('componentType' in jsonValue) {\n          componentType = GLType.fromName(jsonValue.componentType);\n        }\n\n        return this._getTypedArrayFromBinary(propertyName, componentType, componentLength, this.featuresLength, jsonValue.byteOffset);\n      }\n\n      return this._getTypedArrayFromArray(propertyName, componentType, jsonValue);\n    }\n  }, {\n    key: \"getProperty\",\n    value: function getProperty(propertyName, componentType, componentLength, featureId, result) {\n      var jsonValue = this.json[propertyName];\n\n      if (!jsonValue) {\n        return jsonValue;\n      }\n\n      var typedArray = this.getPropertyArray(propertyName, componentType, componentLength);\n\n      if (componentLength === 1) {\n        return typedArray[featureId];\n      }\n\n      for (var i = 0; i < componentLength; ++i) {\n        result[i] = typedArray[componentLength * featureId + i];\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_getTypedArrayFromBinary\",\n    value: function _getTypedArrayFromBinary(propertyName, componentType, componentLength, count, byteOffset) {\n      var cachedTypedArrays = this._cachedTypedArrays;\n      var typedArray = cachedTypedArrays[propertyName];\n\n      if (!typedArray) {\n        typedArray = GLType.createTypedArray(componentType, this.buffer.buffer, this.buffer.byteOffset + byteOffset, count * componentLength);\n        cachedTypedArrays[propertyName] = typedArray;\n      }\n\n      return typedArray;\n    }\n  }, {\n    key: \"_getTypedArrayFromArray\",\n    value: function _getTypedArrayFromArray(propertyName, componentType, array) {\n      var cachedTypedArrays = this._cachedTypedArrays;\n      var typedArray = cachedTypedArrays[propertyName];\n\n      if (!typedArray) {\n        typedArray = GLType.createTypedArray(componentType, array);\n        cachedTypedArrays[propertyName] = typedArray;\n      }\n\n      return typedArray;\n    }\n  }]);\n\n  return Tile3DFeatureTable;\n}();\n\nexport { Tile3DFeatureTable as default };","import { GLType } from '@loaders.gl/math';\nimport { assert } from '@loaders.gl/loader-utils';\nvar COMPONENTS_PER_ATTRIBUTE = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar UNPACKER = {\n  SCALAR: function SCALAR(values, i) {\n    return values[i];\n  },\n  VEC2: function VEC2(values, i) {\n    return [values[2 * i + 0], values[2 * i + 1]];\n  },\n  VEC3: function VEC3(values, i) {\n    return [values[3 * i + 0], values[3 * i + 1], values[3 * i + 2]];\n  },\n  VEC4: function VEC4(values, i) {\n    return [values[4 * i + 0], values[4 * i + 1], values[4 * i + 2], values[4 * i + 3]];\n  },\n  MAT2: function MAT2(values, i) {\n    return [values[4 * i + 0], values[4 * i + 1], values[4 * i + 2], values[4 * i + 3]];\n  },\n  MAT3: function MAT3(values, i) {\n    return [values[9 * i + 0], values[9 * i + 1], values[9 * i + 2], values[9 * i + 3], values[9 * i + 4], values[9 * i + 5], values[9 * i + 6], values[9 * i + 7], values[9 * i + 8]];\n  },\n  MAT4: function MAT4(values, i) {\n    return [values[16 * i + 0], values[16 * i + 1], values[16 * i + 2], values[16 * i + 3], values[16 * i + 4], values[16 * i + 5], values[16 * i + 6], values[16 * i + 7], values[16 * i + 8], values[16 * i + 9], values[16 * i + 10], values[16 * i + 11], values[16 * i + 12], values[16 * i + 13], values[16 * i + 14], values[16 * i + 15]];\n  }\n};\nvar PACKER = {\n  SCALAR: function SCALAR(x, values, i) {\n    values[i] = x;\n  },\n  VEC2: function VEC2(x, values, i) {\n    values[2 * i + 0] = x[0];\n    values[2 * i + 1] = x[1];\n  },\n  VEC3: function VEC3(x, values, i) {\n    values[3 * i + 0] = x[0];\n    values[3 * i + 1] = x[1];\n    values[3 * i + 2] = x[2];\n  },\n  VEC4: function VEC4(x, values, i) {\n    values[4 * i + 0] = x[0];\n    values[4 * i + 1] = x[1];\n    values[4 * i + 2] = x[2];\n    values[4 * i + 3] = x[3];\n  },\n  MAT2: function MAT2(x, values, i) {\n    values[4 * i + 0] = x[0];\n    values[4 * i + 1] = x[1];\n    values[4 * i + 2] = x[2];\n    values[4 * i + 3] = x[3];\n  },\n  MAT3: function MAT3(x, values, i) {\n    values[9 * i + 0] = x[0];\n    values[9 * i + 1] = x[1];\n    values[9 * i + 2] = x[2];\n    values[9 * i + 3] = x[3];\n    values[9 * i + 4] = x[4];\n    values[9 * i + 5] = x[5];\n    values[9 * i + 6] = x[6];\n    values[9 * i + 7] = x[7];\n    values[9 * i + 8] = x[8];\n    values[9 * i + 9] = x[9];\n  },\n  MAT4: function MAT4(x, values, i) {\n    values[16 * i + 0] = x[0];\n    values[16 * i + 1] = x[1];\n    values[16 * i + 2] = x[2];\n    values[16 * i + 3] = x[3];\n    values[16 * i + 4] = x[4];\n    values[16 * i + 5] = x[5];\n    values[16 * i + 6] = x[6];\n    values[16 * i + 7] = x[7];\n    values[16 * i + 8] = x[8];\n    values[16 * i + 9] = x[9];\n    values[16 * i + 10] = x[10];\n    values[16 * i + 11] = x[11];\n    values[16 * i + 12] = x[12];\n    values[16 * i + 13] = x[13];\n    values[16 * i + 14] = x[14];\n    values[16 * i + 15] = x[15];\n  }\n};\nexport function createTypedArrayFromAccessor(tile3DAccessor, buffer, byteOffset, length) {\n  var componentType = tile3DAccessor.componentType;\n  assert(tile3DAccessor.componentType);\n  var type = typeof componentType === 'string' ? GLType.fromName(componentType) : componentType;\n  var size = COMPONENTS_PER_ATTRIBUTE[tile3DAccessor.type];\n  var unpacker = UNPACKER[tile3DAccessor.type];\n  var packer = PACKER[tile3DAccessor.type];\n  byteOffset += tile3DAccessor.byteOffset;\n  var values = GLType.createTypedArray(type, buffer, byteOffset, size * length);\n  return {\n    values: values,\n    type: type,\n    size: size,\n    unpacker: unpacker,\n    packer: packer\n  };\n}","export default function _readOnlyError(name) {\n  throw new Error(\"\\\"\" + name + \"\\\" is read-only\");\n}","import _readOnlyError from \"@babel/runtime/helpers/esm/readOnlyError\";\n\nvar defined = function defined(x) {\n  return x !== undefined;\n};\n\nexport function initializeHierarchy(batchTable, jsonHeader, binaryBody) {\n  if (!jsonHeader) {\n    return null;\n  }\n\n  var hierarchy = batchTable.getExtension('3DTILES_batch_table_hierarchy');\n  var legacyHierarchy = jsonHeader.HIERARCHY;\n\n  if (legacyHierarchy) {\n    console.warn('3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy.');\n    jsonHeader.extensions = jsonHeader.extensions || {};\n    jsonHeader.extensions['3DTILES_batch_table_hierarchy'] = legacyHierarchy;\n    hierarchy = legacyHierarchy;\n  }\n\n  if (!hierarchy) {\n    return null;\n  }\n\n  return initializeHierarchyValues(hierarchy, binaryBody);\n}\n\nfunction initializeHierarchyValues(hierarchyJson, binaryBody) {\n  var i;\n  var classId;\n  var binaryAccessor;\n  var instancesLength = hierarchyJson.instancesLength;\n  var classes = hierarchyJson.classes;\n  var classIds = hierarchyJson.classIds;\n  var parentCounts = hierarchyJson.parentCounts;\n  var parentIds = hierarchyJson.parentIds;\n  var parentIdsLength = instancesLength;\n\n  if (defined(classIds.byteOffset)) {\n    classIds.componentType = defaultValue(classIds.componentType, GL.UNSIGNED_SHORT);\n    classIds.type = AttributeType.SCALAR;\n    binaryAccessor = getBinaryAccessor(classIds);\n    classIds = (_readOnlyError(\"classIds\"), binaryAccessor.createArrayBufferView(binaryBody.buffer, binaryBody.byteOffset + classIds.byteOffset, instancesLength));\n  }\n\n  var parentIndexes;\n\n  if (defined(parentCounts)) {\n    if (defined(parentCounts.byteOffset)) {\n      parentCounts.componentType = defaultValue(parentCounts.componentType, GL.UNSIGNED_SHORT);\n      parentCounts.type = AttributeType.SCALAR;\n      binaryAccessor = getBinaryAccessor(parentCounts);\n      parentCounts = (_readOnlyError(\"parentCounts\"), binaryAccessor.createArrayBufferView(binaryBody.buffer, binaryBody.byteOffset + parentCounts.byteOffset, instancesLength));\n    }\n\n    parentIndexes = new Uint16Array(instancesLength);\n    parentIdsLength = (_readOnlyError(\"parentIdsLength\"), 0);\n\n    for (i = 0; i < instancesLength; ++i) {\n      parentIndexes[i] = parentIdsLength;\n      parentIdsLength += (_readOnlyError(\"parentIdsLength\"), parentCounts[i]);\n    }\n  }\n\n  if (defined(parentIds) && defined(parentIds.byteOffset)) {\n    parentIds.componentType = defaultValue(parentIds.componentType, GL.UNSIGNED_SHORT);\n    parentIds.type = AttributeType.SCALAR;\n    binaryAccessor = getBinaryAccessor(parentIds);\n    parentIds = (_readOnlyError(\"parentIds\"), binaryAccessor.createArrayBufferView(binaryBody.buffer, binaryBody.byteOffset + parentIds.byteOffset, parentIdsLength));\n  }\n\n  var classesLength = classes.length;\n\n  for (i = 0; i < classesLength; ++i) {\n    var classInstancesLength = classes[i].length;\n    var properties = classes[i].instances;\n    var binaryProperties = getBinaryProperties(classInstancesLength, properties, binaryBody);\n    classes[i].instances = combine(binaryProperties, properties);\n  }\n\n  var classCounts = new Array(classesLength).fill(0);\n  var classIndexes = new Uint16Array(instancesLength);\n\n  for (i = 0; i < instancesLength; ++i) {\n    classId = classIds[i];\n    classIndexes[i] = classCounts[classId];\n    ++classCounts[classId];\n  }\n\n  var hierarchy = {\n    classes: classes,\n    classIds: classIds,\n    classIndexes: classIndexes,\n    parentCounts: parentCounts,\n    parentIndexes: parentIndexes,\n    parentIds: parentIds\n  };\n  validateHierarchy(hierarchy);\n  return hierarchy;\n}\n\nexport function traverseHierarchy(hierarchy, instanceIndex, endConditionCallback) {\n  if (!hierarchy) {\n    return;\n  }\n\n  var parentCounts = hierarchy.parentCounts;\n  var parentIds = hierarchy.parentIds;\n\n  if (parentIds) {\n    return endConditionCallback(hierarchy, instanceIndex);\n  }\n\n  if (parentCounts > 0) {\n    return traverseHierarchyMultipleParents(hierarchy, instanceIndex, endConditionCallback);\n  }\n\n  return traverseHierarchySingleParent(hierarchy, instanceIndex, endConditionCallback);\n}\n\nfunction traverseHierarchyMultipleParents(hierarchy, instanceIndex, endConditionCallback) {\n  var classIds = hierarchy.classIds;\n  var parentCounts = hierarchy.parentCounts;\n  var parentIds = hierarchy.parentIds;\n  var parentIndexes = hierarchy.parentIndexes;\n  var instancesLength = classIds.length;\n  var visited = scratchVisited;\n  visited.length = Math.max(visited.length, instancesLength);\n  var visitedMarker = ++marker;\n  var stack = scratchStack;\n  stack.length = 0;\n  stack.push(instanceIndex);\n\n  while (stack.length > 0) {\n    instanceIndex = stack.pop();\n\n    if (visited[instanceIndex] === visitedMarker) {\n      continue;\n    }\n\n    visited[instanceIndex] = visitedMarker;\n    var result = endConditionCallback(hierarchy, instanceIndex);\n\n    if (defined(result)) {\n      return result;\n    }\n\n    var parentCount = parentCounts[instanceIndex];\n    var parentIndex = parentIndexes[instanceIndex];\n\n    for (var i = 0; i < parentCount; ++i) {\n      var parentId = parentIds[parentIndex + i];\n\n      if (parentId !== instanceIndex) {\n        stack.push(parentId);\n      }\n    }\n  }\n\n  return null;\n}\n\nfunction traverseHierarchySingleParent(hierarchy, instanceIndex, endConditionCallback) {\n  var hasParent = true;\n\n  while (hasParent) {\n    var result = endConditionCallback(hierarchy, instanceIndex);\n\n    if (defined(result)) {\n      return result;\n    }\n\n    var parentId = hierarchy.parentIds[instanceIndex];\n    hasParent = parentId !== instanceIndex;\n    instanceIndex = parentId;\n  }\n\n  throw new Error('traverseHierarchySingleParent');\n}\n\nfunction validateHierarchy(hierarchy) {\n  var scratchValidateStack = [];\n  var classIds = hierarchy.classIds;\n  var instancesLength = classIds.length;\n\n  for (var i = 0; i < instancesLength; ++i) {\n    validateInstance(hierarchy, i, stack);\n  }\n}\n\nfunction validateInstance(hierarchy, instanceIndex, stack) {\n  var parentCounts = hierarchy.parentCounts;\n  var parentIds = hierarchy.parentIds;\n  var parentIndexes = hierarchy.parentIndexes;\n  var classIds = hierarchy.classIds;\n  var instancesLength = classIds.length;\n\n  if (!defined(parentIds)) {\n    return;\n  }\n\n  assert(instanceIndex < instancesLength, \"Parent index \".concat(instanceIndex, \" exceeds the total number of instances: \").concat(instancesLength));\n  assert(stack.indexOf(instanceIndex) === -1, 'Circular dependency detected in the batch table hierarchy.');\n  stack.push(instanceIndex);\n  var parentCount = defined(parentCounts) ? parentCounts[instanceIndex] : 1;\n  var parentIndex = defined(parentCounts) ? parentIndexes[instanceIndex] : instanceIndex;\n\n  for (var i = 0; i < parentCount; ++i) {\n    var parentId = parentIds[parentIndex + i];\n\n    if (parentId !== instanceIndex) {\n      validateInstance(hierarchy, parentId, stack);\n    }\n  }\n\n  stack.pop(instanceIndex);\n}","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { assert } from '@loaders.gl/loader-utils';\nimport { createTypedArrayFromAccessor } from './helpers/tile-3d-accessor-utils';\nimport { initializeHierarchy, traverseHierarchy } from './tile-3d-batch-table-hierarchy';\n\nfunction defined(x) {\n  return x !== undefined && x !== null;\n}\n\nvar clone = function clone(x, y) {\n  return x;\n};\n\nvar IGNORED_PROPERTY_FIELDS = {\n  HIERARCHY: true,\n  extensions: true,\n  extras: true\n};\n\nvar Tile3DBatchTableParser = function () {\n  function Tile3DBatchTableParser(json, binary, featureCount) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Tile3DBatchTableParser);\n\n    assert(featureCount >= 0);\n    this.json = json || {};\n    this.binary = binary;\n    this.featureCount = featureCount;\n    this._extensions = this.json && this.json.extensions || {};\n    this._properties = {};\n\n    for (var propertyName in this.json) {\n      if (!IGNORED_PROPERTY_FIELDS[propertyName]) {\n        this._properties[propertyName] = this.json[propertyName];\n      }\n    }\n\n    this._binaryProperties = this._initializeBinaryProperties();\n\n    if (options['3DTILES_batch_table_hierarchy']) {\n      this._hierarchy = initializeHierarchy(this, this.json, this.binary);\n    }\n  }\n\n  _createClass(Tile3DBatchTableParser, [{\n    key: \"getExtension\",\n    value: function getExtension(extensionName) {\n      return this.json && this.json.extensions && this.json.extensions[extensionName];\n    }\n  }, {\n    key: \"memorySizeInBytes\",\n    value: function memorySizeInBytes() {\n      return 0;\n    }\n  }, {\n    key: \"isClass\",\n    value: function isClass(batchId, className) {\n      this._checkBatchId(batchId);\n\n      assert(typeof className === 'string', className);\n\n      if (this._hierarchy) {\n        var result = traverseHierarchy(this._hierarchy, batchId, function (hierarchy, instanceIndex) {\n          var classId = hierarchy.classIds[instanceIndex];\n          var instanceClass = hierarchy.classes[classId];\n          return instanceClass.name === className;\n        });\n        return defined(result);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"isExactClass\",\n    value: function isExactClass(batchId, className) {\n      assert(typeof className === 'string', className);\n      return this.getExactClassName(batchId) === className;\n    }\n  }, {\n    key: \"getExactClassName\",\n    value: function getExactClassName(batchId) {\n      this._checkBatchId(batchId);\n\n      if (this._hierarchy) {\n        var classId = this._hierarchy.classIds[batchId];\n        var instanceClass = this._hierarchy.classes[classId];\n        return instanceClass.name;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"hasProperty\",\n    value: function hasProperty(batchId, name) {\n      this._checkBatchId(batchId);\n\n      assert(typeof name === 'string', name);\n      return defined(this._properties[name]) || this._hasPropertyInHierarchy(batchId, name);\n    }\n  }, {\n    key: \"getPropertyNames\",\n    value: function getPropertyNames(batchId, results) {\n      var _results;\n\n      this._checkBatchId(batchId);\n\n      results = defined(results) ? results : [];\n      results.length = 0;\n      var propertyNames = Object.keys(this._properties);\n\n      (_results = results).push.apply(_results, _toConsumableArray(propertyNames));\n\n      if (this._hierarchy) {\n        this._getPropertyNamesInHierarchy(batchId, results);\n      }\n\n      return results;\n    }\n  }, {\n    key: \"getProperty\",\n    value: function getProperty(batchId, name) {\n      this._checkBatchId(batchId);\n\n      assert(typeof name === 'string', name);\n\n      if (this._binaryProperties) {\n        var binaryProperty = this._binaryProperties[name];\n\n        if (defined(binaryProperty)) {\n          return this._getBinaryProperty(binaryProperty, batchId);\n        }\n      }\n\n      var propertyValues = this._properties[name];\n\n      if (defined(propertyValues)) {\n        return clone(propertyValues[batchId], true);\n      }\n\n      if (this._hierarchy) {\n        var hierarchyProperty = this._getHierarchyProperty(batchId, name);\n\n        if (defined(hierarchyProperty)) {\n          return hierarchyProperty;\n        }\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"setProperty\",\n    value: function setProperty(batchId, name, value) {\n      var featureCount = this.featureCount;\n\n      this._checkBatchId(batchId);\n\n      assert(typeof name === 'string', name);\n\n      if (this._binaryProperties) {\n        var binaryProperty = this._binaryProperties[name];\n\n        if (binaryProperty) {\n          this._setBinaryProperty(binaryProperty, batchId, value);\n\n          return;\n        }\n      }\n\n      if (this._hierarchy) {\n        if (this._setHierarchyProperty(this, batchId, name, value)) {\n          return;\n        }\n      }\n\n      var propertyValues = this._properties[name];\n\n      if (!defined(propertyValues)) {\n        this._properties[name] = new Array(featureCount);\n        propertyValues = this._properties[name];\n      }\n\n      propertyValues[batchId] = clone(value, true);\n    }\n  }, {\n    key: \"_checkBatchId\",\n    value: function _checkBatchId(batchId) {\n      var valid = batchId >= 0 && batchId < this.featureCount;\n\n      if (!valid) {\n        throw new Error(\"batchId not in range [0, featureCount - 1].\");\n      }\n    }\n  }, {\n    key: \"_getBinaryProperty\",\n    value: function _getBinaryProperty(binaryProperty, index) {\n      return binaryProperty.unpack(binaryProperty.typedArray, index);\n    }\n  }, {\n    key: \"_setBinaryProperty\",\n    value: function _setBinaryProperty(binaryProperty, index, value) {\n      binaryProperty.pack(value, binaryProperty.typedArray, index);\n    }\n  }, {\n    key: \"_initializeBinaryProperties\",\n    value: function _initializeBinaryProperties() {\n      var binaryProperties = null;\n\n      for (var name in this._properties) {\n        var property = this._properties[name];\n\n        var binaryProperty = this._initializeBinaryProperty(name, property);\n\n        if (binaryProperty) {\n          binaryProperties = binaryProperties || {};\n          binaryProperties[name] = binaryProperty;\n        }\n      }\n\n      return binaryProperties;\n    }\n  }, {\n    key: \"_initializeBinaryProperty\",\n    value: function _initializeBinaryProperty(name, property) {\n      if ('byteOffset' in property) {\n        var tile3DAccessor = property;\n        assert(this.binary, \"Property \".concat(name, \" requires a batch table binary.\"));\n        assert(tile3DAccessor.type, \"Property \".concat(name, \" requires a type.\"));\n        var accessor = createTypedArrayFromAccessor(tile3DAccessor, this.binary.buffer, this.binary.byteOffset | 0, this.featureCount);\n        return {\n          typedArray: accessor.values,\n          componentCount: accessor.size,\n          unpack: accessor.unpacker,\n          pack: accessor.packer\n        };\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_hasPropertyInHierarchy\",\n    value: function _hasPropertyInHierarchy(batchId, name) {\n      if (!this._hierarchy) {\n        return false;\n      }\n\n      var result = traverseHierarchy(this._hierarchy, batchId, function (hierarchy, instanceIndex) {\n        var classId = hierarchy.classIds[instanceIndex];\n        var instances = hierarchy.classes[classId].instances;\n        return defined(instances[name]);\n      });\n      return defined(result);\n    }\n  }, {\n    key: \"_getPropertyNamesInHierarchy\",\n    value: function _getPropertyNamesInHierarchy(batchId, results) {\n      traverseHierarchy(this._hierarchy, batchId, function (hierarchy, instanceIndex) {\n        var classId = hierarchy.classIds[instanceIndex];\n        var instances = hierarchy.classes[classId].instances;\n\n        for (var name in instances) {\n          if (instances.hasOwnProperty(name)) {\n            if (results.indexOf(name) === -1) {\n              results.push(name);\n            }\n          }\n        }\n      });\n    }\n  }, {\n    key: \"_getHierarchyProperty\",\n    value: function _getHierarchyProperty(batchId, name) {\n      var _this = this;\n\n      return traverseHierarchy(this._hierarchy, batchId, function (hierarchy, instanceIndex) {\n        var classId = hierarchy.classIds[instanceIndex];\n        var instanceClass = hierarchy.classes[classId];\n        var indexInClass = hierarchy.classIndexes[instanceIndex];\n        var propertyValues = instanceClass.instances[name];\n\n        if (defined(propertyValues)) {\n          if (defined(propertyValues.typedArray)) {\n            return _this._getBinaryProperty(propertyValues, indexInClass);\n          }\n\n          return clone(propertyValues[indexInClass], true);\n        }\n\n        return null;\n      });\n    }\n  }, {\n    key: \"_setHierarchyProperty\",\n    value: function _setHierarchyProperty(batchTable, batchId, name, value) {\n      var _this2 = this;\n\n      var result = traverseHierarchy(this._hierarchy, batchId, function (hierarchy, instanceIndex) {\n        var classId = hierarchy.classIds[instanceIndex];\n        var instanceClass = hierarchy.classes[classId];\n        var indexInClass = hierarchy.classIndexes[instanceIndex];\n        var propertyValues = instanceClass.instances[name];\n\n        if (defined(propertyValues)) {\n          assert(instanceIndex === batchId, \"Inherited property \\\"\".concat(name, \"\\\" is read-only.\"));\n\n          if (defined(propertyValues.typedArray)) {\n            _this2._setBinaryProperty(propertyValues, indexInClass, value);\n          } else {\n            propertyValues[indexInClass] = clone(value, true);\n          }\n\n          return true;\n        }\n\n        return false;\n      });\n      return defined(result);\n    }\n  }]);\n\n  return Tile3DBatchTableParser;\n}();\n\nexport { Tile3DBatchTableParser as default };","var SIZEOF_UINT32 = 4;\nexport function parse3DTileHeaderSync(tile, arrayBuffer) {\n  var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var view = new DataView(arrayBuffer);\n  tile.magic = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  tile.version = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  tile.byteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n\n  if (tile.version !== 1) {\n    throw new Error(\"3D Tile Version \".concat(tile.version, \" not supported\"));\n  }\n\n  return byteOffset;\n}","import { getStringFromArrayBuffer } from './parse-utils';\nvar SIZEOF_UINT32 = 4;\nexport function parse3DTileTablesHeaderSync(tile, arrayBuffer, byteOffset) {\n  var view = new DataView(arrayBuffer);\n  tile.header = tile.header || {};\n  tile.header.featureTableJsonByteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  tile.header.featureTableBinaryByteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  tile.header.batchTableJsonByteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  tile.header.batchTableBinaryByteLength = view.getUint32(byteOffset, true);\n  byteOffset += SIZEOF_UINT32;\n  return byteOffset;\n}\nexport function parse3DTileTablesSync(tile, arrayBuffer, byteOffset, options) {\n  byteOffset = parse3DTileFeatureTable(tile, arrayBuffer, byteOffset, options);\n  byteOffset = parse3DTileBatchTable(tile, arrayBuffer, byteOffset, options);\n  return byteOffset;\n}\n\nfunction parse3DTileFeatureTable(tile, arrayBuffer, byteOffset, options) {\n  var _tile$header = tile.header,\n      featureTableJsonByteLength = _tile$header.featureTableJsonByteLength,\n      featureTableBinaryByteLength = _tile$header.featureTableBinaryByteLength;\n  tile.featureTableJson = {\n    BATCH_LENGTH: 0\n  };\n\n  if (featureTableJsonByteLength > 0) {\n    var featureTableString = getStringFromArrayBuffer(arrayBuffer, byteOffset, featureTableJsonByteLength);\n    tile.featureTableJson = JSON.parse(featureTableString);\n  }\n\n  byteOffset += featureTableJsonByteLength;\n  tile.featureTableBinary = new Uint8Array(arrayBuffer, byteOffset, featureTableBinaryByteLength);\n  byteOffset += featureTableBinaryByteLength;\n  return byteOffset;\n}\n\nfunction parse3DTileBatchTable(tile, arrayBuffer, byteOffset, options) {\n  var _tile$header2 = tile.header,\n      batchTableJsonByteLength = _tile$header2.batchTableJsonByteLength,\n      batchTableBinaryByteLength = _tile$header2.batchTableBinaryByteLength;\n\n  if (batchTableJsonByteLength > 0) {\n    var batchTableString = getStringFromArrayBuffer(arrayBuffer, byteOffset, batchTableJsonByteLength);\n    tile.batchTableJson = JSON.parse(batchTableString);\n    byteOffset += batchTableJsonByteLength;\n\n    if (batchTableBinaryByteLength > 0) {\n      tile.batchTableBinary = new Uint8Array(arrayBuffer, byteOffset, batchTableBinaryByteLength);\n      tile.batchTableBinary = new Uint8Array(tile.batchTableBinary);\n      byteOffset += batchTableBinaryByteLength;\n    }\n  }\n\n  return byteOffset;\n}","export function decodeRGB565(rgb565) {\n  var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [0, 0, 0];\n  var r5 = rgb565 >> 11 & 31;\n  var g6 = rgb565 >> 5 & 63;\n  var b5 = rgb565 & 31;\n  target[0] = r5 << 3;\n  target[1] = g6 << 2;\n  target[2] = b5 << 3;\n  return target;\n}\nexport function encodeRGB565(rgb) {\n  var r5 = Math.floor(rgb[0] / 8) + 4;\n  var g6 = Math.floor(rgb[1] / 4) + 2;\n  var b5 = Math.floor(rgb[2] / 8) + 4;\n  return r5 + (g6 << 5) + (b5 << 11);\n}","import { decodeRGB565, GL } from '@loaders.gl/math';\nexport function normalize3DTileColorAttribute(tile, colors, batchTable) {\n  if (!colors && (!tile || !tile.batchIds || !batchTable)) {\n    return null;\n  }\n\n  var batchIds = tile.batchIds,\n      isRGB565 = tile.isRGB565,\n      pointCount = tile.pointCount;\n\n  if (batchIds && batchTable) {\n    var colorArray = new Uint8ClampedArray(pointCount * 3);\n\n    for (var i = 0; i < pointCount; i++) {\n      var batchId = batchIds[i];\n      var dimensions = batchTable.getProperty(batchId, 'dimensions');\n      var color = dimensions.map(function (d) {\n        return d * 255;\n      });\n      colorArray[i * 3] = color[0];\n      colorArray[i * 3 + 1] = color[1];\n      colorArray[i * 3 + 2] = color[2];\n    }\n\n    return {\n      type: GL.UNSIGNED_BYTE,\n      value: colorArray,\n      size: 3,\n      normalized: true\n    };\n  }\n\n  if (isRGB565) {\n    var _colorArray = new Uint8ClampedArray(pointCount * 3);\n\n    for (var _i = 0; _i < pointCount; _i++) {\n      var _color = decodeRGB565(colors[_i]);\n\n      _colorArray[_i * 3] = _color[0];\n      _colorArray[_i * 3 + 1] = _color[1];\n      _colorArray[_i * 3 + 2] = _color[2];\n    }\n\n    return {\n      type: GL.UNSIGNED_BYTE,\n      value: _colorArray,\n      size: 3,\n      normalized: true\n    };\n  }\n\n  if (colors && colors.length === pointCount * 3) {\n    return {\n      type: GL.UNSIGNED_BYTE,\n      value: colors,\n      size: 3,\n      normalized: true\n    };\n  }\n\n  return {\n    type: GL.UNSIGNED_BYTE,\n    value: colors,\n    size: 4,\n    normalized: true\n  };\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(\"math.gl assertion failed. \".concat(message));\n  }\n}","import { Vector2, Vector3, clamp, _MathUtils } from '@math.gl/core';\nimport assert from '../utils/assert';\nvar RIGHT_SHIFT = 1.0 / 256.0;\nvar LEFT_SHIFT = 256.0;\nvar scratchVector2 = new Vector2();\nvar scratchVector3 = new Vector3();\nvar scratchEncodeVector2 = new Vector2();\nvar octEncodeScratch = new Vector2();\nvar uint8ForceArray = new Uint8Array(1);\n\nfunction forceUint8(value) {\n  uint8ForceArray[0] = value;\n  return uint8ForceArray[0];\n}\n\nfunction fromSNorm(value) {\n  var rangeMaximum = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 255;\n  return clamp(value, 0.0, rangeMaximum) / rangeMaximum * 2.0 - 1.0;\n}\n\nfunction toSNorm(value) {\n  var rangeMaximum = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 255;\n  return Math.round((clamp(value, -1.0, 1.0) * 0.5 + 0.5) * rangeMaximum);\n}\n\nfunction signNotZero(value) {\n  return value < 0.0 ? -1.0 : 1.0;\n}\n\nexport function octEncodeInRange(vector, rangeMax, result) {\n  assert(vector);\n  assert(result);\n  var vector3 = scratchVector3.from(vector);\n  assert(Math.abs(vector3.magnitudeSquared() - 1.0) <= _MathUtils.EPSILON6);\n  result.x = vector.x / (Math.abs(vector.x) + Math.abs(vector.y) + Math.abs(vector.z));\n  result.y = vector.y / (Math.abs(vector.x) + Math.abs(vector.y) + Math.abs(vector.z));\n\n  if (vector.z < 0) {\n    var x = result.x;\n    var y = result.y;\n    result.x = (1.0 - Math.abs(y)) * signNotZero(x);\n    result.y = (1.0 - Math.abs(x)) * signNotZero(y);\n  }\n\n  result.x = toSNorm(result.x, rangeMax);\n  result.y = toSNorm(result.y, rangeMax);\n  return result;\n}\nexport function octEncode(vector, result) {\n  return octEncodeInRange(vector, 255, result);\n}\nexport function octEncodeToVector4(vector, result) {\n  octEncodeInRange(vector, 65535, octEncodeScratch);\n  result.x = forceUint8(octEncodeScratch.x * RIGHT_SHIFT);\n  result.y = forceUint8(octEncodeScratch.x);\n  result.z = forceUint8(octEncodeScratch.y * RIGHT_SHIFT);\n  result.w = forceUint8(octEncodeScratch.y);\n  return result;\n}\nexport function octDecodeInRange(x, y, rangeMax, result) {\n  assert(result);\n\n  if (x < 0 || x > rangeMax || y < 0 || y > rangeMax) {\n    throw new Error(\"x and y must be unsigned normalized integers between 0 and \".concat(rangeMax));\n  }\n\n  result.x = fromSNorm(x, rangeMax);\n  result.y = fromSNorm(y, rangeMax);\n  result.z = 1.0 - (Math.abs(result.x) + Math.abs(result.y));\n\n  if (result.z < 0.0) {\n    var oldVX = result.x;\n    result.x = (1.0 - Math.abs(result.y)) * signNotZero(oldVX);\n    result.y = (1.0 - Math.abs(oldVX)) * signNotZero(result.y);\n  }\n\n  return result.normalize();\n}\nexport function octDecode(x, y, result) {\n  return octDecodeInRange(x, y, 255, result);\n}\nexport function octDecodeFromVector4(encoded, result) {\n  assert(encoded);\n  assert(result);\n  var x = encoded.x;\n  var y = encoded.y;\n  var z = encoded.z;\n  var w = encoded.w;\n\n  if (x < 0 || x > 255 || y < 0 || y > 255 || z < 0 || z > 255 || w < 0 || w > 255) {\n    throw new Error('x, y, z, and w must be unsigned normalized integers between 0 and 255');\n  }\n\n  var xOct16 = x * LEFT_SHIFT + y;\n  var yOct16 = z * LEFT_SHIFT + w;\n  return octDecodeInRange(xOct16, yOct16, 65535, result);\n}\nexport function octPackFloat(encoded) {\n  var vector2 = scratchVector2.from(encoded);\n  return 256.0 * vector2.x + vector2.y;\n}\nexport function octEncodeFloat(vector) {\n  octEncode(vector, scratchEncodeVector2);\n  return octPackFloat(scratchEncodeVector2);\n}\nexport function octDecodeFloat(value, result) {\n  assert(Number.isFinite(value));\n  var temp = value / 256.0;\n  var x = Math.floor(temp);\n  var y = (temp - x) * 256.0;\n  return octDecode(x, y, result);\n}\nexport function octPack(v1, v2, v3, result) {\n  assert(v1);\n  assert(v2);\n  assert(v3);\n  assert(result);\n  var encoded1 = octEncodeFloat(v1);\n  var encoded2 = octEncodeFloat(v2);\n  var encoded3 = octEncode(v3, scratchEncodeVector2);\n  result.x = 65536.0 * encoded3.x + encoded1;\n  result.y = 65536.0 * encoded3.y + encoded2;\n  return result;\n}\nexport function octUnpack(packed, v1, v2, v3) {\n  var temp = packed.x / 65536.0;\n  var x = Math.floor(temp);\n  var encodedFloat1 = (temp - x) * 65536.0;\n  temp = packed.y / 65536.0;\n  var y = Math.floor(temp);\n  var encodedFloat2 = (temp - y) * 65536.0;\n  octDecodeFloat(encodedFloat1, v1);\n  octDecodeFloat(encodedFloat2, v2);\n  octDecode(x, y, v3);\n}\nexport function compressTextureCoordinates(textureCoordinates) {\n  var x = textureCoordinates.x * 4095.0 | 0;\n  var y = textureCoordinates.y * 4095.0 | 0;\n  return 4096.0 * x + y;\n}\nexport function decompressTextureCoordinates(compressed, result) {\n  var temp = compressed / 4096.0;\n  var xZeroTo4095 = Math.floor(temp);\n  result.x = xZeroTo4095 / 4095.0;\n  result.y = (compressed - xZeroTo4095 * 4096) / 4095;\n  return result;\n}\nexport function zigZagDeltaDecode(uBuffer, vBuffer, heightBuffer) {\n  assert(uBuffer);\n  assert(vBuffer);\n  assert(uBuffer.length === vBuffer.length);\n\n  if (heightBuffer) {\n    assert(uBuffer.length === heightBuffer.length);\n  }\n\n  function zigZagDecode(value) {\n    return value >> 1 ^ -(value & 1);\n  }\n\n  var u = 0;\n  var v = 0;\n  var height = 0;\n\n  for (var i = 0; i < uBuffer.length; ++i) {\n    u += zigZagDecode(uBuffer[i]);\n    v += zigZagDecode(vBuffer[i]);\n    uBuffer[i] = u;\n    vBuffer[i] = v;\n\n    if (heightBuffer) {\n      height += zigZagDecode(heightBuffer[i]);\n      heightBuffer[i] = height;\n    }\n  }\n}","import { Vector3 } from '@math.gl/core';\nimport { GL, octDecode } from '@loaders.gl/math';\nvar scratchNormal = new Vector3();\nexport function normalize3DTileNormalAttribute(tile, normals) {\n  if (!normals) {\n    return null;\n  }\n\n  if (tile.isOctEncoded16P) {\n    var decodedArray = new Float32Array(tile.pointsLength * 3);\n\n    for (var i = 0; i < tile.pointsLength; i++) {\n      octDecode(normals[i * 2], normals[i * 2 + 1], scratchNormal);\n      scratchNormal.toArray(decodedArray, i * 3);\n    }\n\n    return {\n      type: GL.FLOAT,\n      size: 2,\n      value: decodedArray\n    };\n  }\n\n  return {\n    type: GL.FLOAT,\n    size: 2,\n    value: normals\n  };\n}","import { Vector3 } from '@math.gl/core';\nimport { GL } from '@loaders.gl/math';\nexport function normalize3DTilePositionAttribute(tile, positions, options) {\n  if (!tile.isQuantized) {\n    return positions;\n  }\n\n  if (options['3d-tiles'] && options['3d-tiles'].decodeQuantizedPositions) {\n    tile.isQuantized = false;\n    return decodeQuantizedPositions(tile, positions);\n  }\n\n  return {\n    type: GL.UNSIGNED_SHORT,\n    value: positions,\n    size: 3,\n    normalized: true\n  };\n}\n\nfunction decodeQuantizedPositions(tile, positions) {\n  var scratchPosition = new Vector3();\n  var decodedArray = new Float32Array(tile.pointCount * 3);\n\n  for (var i = 0; i < tile.pointCount; i++) {\n    scratchPosition.set(positions[i * 3], positions[i * 3 + 1], positions[i * 3 + 2]).scale(1 / tile.quantizedRange).multiply(tile.quantizedVolumeScale).add(tile.quantizedVolumeOffset).toArray(decodedArray, i * 3);\n  }\n\n  return decodedArray;\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { DracoLoader } from '@loaders.gl/draco';\nimport { GL } from '@loaders.gl/math';\nimport { Vector3 } from '@math.gl/core';\nimport Tile3DFeatureTable from '../classes/tile-3d-feature-table';\nimport Tile3DBatchTable from '../classes/tile-3d-batch-table';\nimport { parse3DTileHeaderSync } from './helpers/parse-3d-tile-header';\nimport { parse3DTileTablesHeaderSync, parse3DTileTablesSync } from './helpers/parse-3d-tile-tables';\nimport { normalize3DTileColorAttribute } from './helpers/normalize-3d-tile-colors';\nimport { normalize3DTileNormalAttribute } from './helpers/normalize-3d-tile-normals';\nimport { normalize3DTilePositionAttribute } from './helpers/normalize-3d-tile-positions';\nexport function parsePointCloud3DTile(_x, _x2, _x3, _x4, _x5) {\n  return _parsePointCloud3DTile.apply(this, arguments);\n}\n\nfunction _parsePointCloud3DTile() {\n  _parsePointCloud3DTile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tile, arrayBuffer, byteOffset, options, context) {\n    var _parsePointCloudTable, featureTable, batchTable;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            byteOffset = parse3DTileHeaderSync(tile, arrayBuffer, byteOffset);\n            byteOffset = parse3DTileTablesHeaderSync(tile, arrayBuffer, byteOffset);\n            byteOffset = parse3DTileTablesSync(tile, arrayBuffer, byteOffset, options);\n            initializeTile(tile);\n            _parsePointCloudTable = parsePointCloudTables(tile), featureTable = _parsePointCloudTable.featureTable, batchTable = _parsePointCloudTable.batchTable;\n            _context.next = 7;\n            return parseDraco(tile, featureTable, batchTable, options, context);\n\n          case 7:\n            parsePositions(tile, featureTable, options);\n            parseColors(tile, featureTable, batchTable);\n            parseNormals(tile, featureTable);\n            return _context.abrupt(\"return\", byteOffset);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parsePointCloud3DTile.apply(this, arguments);\n}\n\nfunction initializeTile(tile) {\n  tile.attributes = {\n    positions: null,\n    colors: null,\n    normals: null,\n    batchIds: null\n  };\n  tile.isQuantized = false;\n  tile.isTranslucent = false;\n  tile.isRGB565 = false;\n  tile.isOctEncoded16P = false;\n}\n\nfunction parsePointCloudTables(tile) {\n  var featureTable = new Tile3DFeatureTable(tile.featureTableJson, tile.featureTableBinary);\n  var pointsLength = featureTable.getGlobalProperty('POINTS_LENGTH');\n\n  if (!Number.isFinite(pointsLength)) {\n    throw new Error('POINTS_LENGTH must be defined');\n  }\n\n  featureTable.featuresLength = pointsLength;\n  tile.featuresLength = pointsLength;\n  tile.pointsLength = pointsLength;\n  tile.pointCount = pointsLength;\n  tile.rtcCenter = featureTable.getGlobalProperty('RTC_CENTER', GL.FLOAT, 3);\n  var batchTable = parseBatchIds(tile, featureTable);\n  return {\n    featureTable: featureTable,\n    batchTable: batchTable\n  };\n}\n\nfunction parsePositions(tile, featureTable, options) {\n  if (!tile.attributes.positions) {\n    if (featureTable.hasProperty('POSITION')) {\n      tile.attributes.positions = featureTable.getPropertyArray('POSITION', GL.FLOAT, 3);\n    } else if (featureTable.hasProperty('POSITION_QUANTIZED')) {\n      var positions = featureTable.getPropertyArray('POSITION_QUANTIZED', GL.UNSIGNED_SHORT, 3);\n      tile.isQuantized = true;\n      tile.quantizedRange = (1 << 16) - 1;\n      tile.quantizedVolumeScale = featureTable.getGlobalProperty('QUANTIZED_VOLUME_SCALE', GL.FLOAT, 3);\n\n      if (!tile.quantizedVolumeScale) {\n        throw new Error('QUANTIZED_VOLUME_SCALE must be defined for quantized positions.');\n      }\n\n      tile.quantizedVolumeOffset = featureTable.getGlobalProperty('QUANTIZED_VOLUME_OFFSET', GL.FLOAT, 3);\n\n      if (!tile.quantizedVolumeOffset) {\n        throw new Error('QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.');\n      }\n\n      tile.attributes.positions = normalize3DTilePositionAttribute(tile, positions, options);\n    }\n  }\n\n  if (!tile.attributes.positions) {\n    throw new Error('Either POSITION or POSITION_QUANTIZED must be defined.');\n  }\n}\n\nfunction parseColors(tile, featureTable, batchTable) {\n  if (!tile.attributes.colors) {\n    var colors = null;\n\n    if (featureTable.hasProperty('RGBA')) {\n      colors = featureTable.getPropertyArray('RGBA', GL.UNSIGNED_BYTE, 4);\n      tile.isTranslucent = true;\n    } else if (featureTable.hasProperty('RGB')) {\n      colors = featureTable.getPropertyArray('RGB', GL.UNSIGNED_BYTE, 3);\n    } else if (featureTable.hasProperty('RGB565')) {\n      colors = featureTable.getPropertyArray('RGB565', GL.UNSIGNED_SHORT, 1);\n      tile.isRGB565 = true;\n    }\n\n    tile.attributes.colors = normalize3DTileColorAttribute(tile, colors, batchTable);\n  }\n\n  if (featureTable.hasProperty('CONSTANT_RGBA')) {\n    tile.constantRGBA = featureTable.getGlobalProperty('CONSTANT_RGBA', GL.UNSIGNED_BYTE, 4);\n  }\n}\n\nfunction parseNormals(tile, featureTable) {\n  if (!tile.attributes.normals) {\n    var normals = null;\n\n    if (featureTable.hasProperty('NORMAL')) {\n      normals = featureTable.getPropertyArray('NORMAL', GL.FLOAT, 3);\n    } else if (featureTable.hasProperty('NORMAL_OCT16P')) {\n      normals = featureTable.getPropertyArray('NORMAL_OCT16P', GL.UNSIGNED_BYTE, 2);\n      tile.isOctEncoded16P = true;\n    }\n\n    tile.attributes.normals = normalize3DTileNormalAttribute(tile, normals);\n  }\n}\n\nfunction parseBatchIds(tile, featureTable) {\n  var batchTable = null;\n\n  if (!tile.batchIds && featureTable.hasProperty('BATCH_ID')) {\n    tile.batchIds = featureTable.getPropertyArray('BATCH_ID', GL.UNSIGNED_SHORT, 1);\n\n    if (tile.batchIds) {\n      var batchFeatureLength = featureTable.getGlobalProperty('BATCH_LENGTH');\n\n      if (!batchFeatureLength) {\n        throw new Error('Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.');\n      }\n\n      var batchTableJson = tile.batchTableJson,\n          batchTableBinary = tile.batchTableBinary;\n      batchTable = new Tile3DBatchTable(batchTableJson, batchTableBinary, batchFeatureLength);\n    }\n  }\n\n  return batchTable;\n}\n\nfunction parseDraco(_x6, _x7, _x8, _x9, _x10) {\n  return _parseDraco.apply(this, arguments);\n}\n\nfunction _parseDraco() {\n  _parseDraco = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(tile, featureTable, batchTable, options, context) {\n    var dracoBuffer, dracoFeatureTableProperties, dracoBatchTableProperties, batchTableDraco, featureTableDraco, dracoByteOffset, dracoByteLength, dracoData;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            batchTableDraco = batchTable && batchTable.getExtension('3DTILES_draco_point_compression');\n\n            if (batchTableDraco) {\n              dracoBatchTableProperties = batchTableDraco.properties;\n            }\n\n            featureTableDraco = featureTable.getExtension('3DTILES_draco_point_compression');\n\n            if (!featureTableDraco) {\n              _context2.next = 15;\n              break;\n            }\n\n            dracoFeatureTableProperties = featureTableDraco.properties;\n            dracoByteOffset = featureTableDraco.byteOffset;\n            dracoByteLength = featureTableDraco.byteLength;\n\n            if (!(!dracoFeatureTableProperties || !Number.isFinite(dracoByteOffset) || !dracoByteLength)) {\n              _context2.next = 9;\n              break;\n            }\n\n            throw new Error('Draco properties, byteOffset, and byteLength must be defined');\n\n          case 9:\n            dracoBuffer = tile.featureTableBinary.slice(dracoByteOffset, dracoByteOffset + dracoByteLength);\n            tile.hasPositions = Number.isFinite(dracoFeatureTableProperties.POSITION);\n            tile.hasColors = Number.isFinite(dracoFeatureTableProperties.RGB) || Number.isFinite(dracoFeatureTableProperties.RGBA);\n            tile.hasNormals = Number.isFinite(dracoFeatureTableProperties.NORMAL);\n            tile.hasBatchIds = Number.isFinite(dracoFeatureTableProperties.BATCH_ID);\n            tile.isTranslucent = Number.isFinite(dracoFeatureTableProperties.RGBA);\n\n          case 15:\n            if (dracoBuffer) {\n              _context2.next = 17;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", true);\n\n          case 17:\n            dracoData = {\n              buffer: dracoBuffer,\n              properties: _objectSpread(_objectSpread({}, dracoFeatureTableProperties), dracoBatchTableProperties),\n              featureTableProperties: dracoFeatureTableProperties,\n              batchTableProperties: dracoBatchTableProperties,\n              dequantizeInShader: false\n            };\n            _context2.next = 20;\n            return loadDraco(tile, dracoData, options, context);\n\n          case 20:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 21:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parseDraco.apply(this, arguments);\n}\n\nexport function loadDraco(_x11, _x12, _x13, _x14) {\n  return _loadDraco.apply(this, arguments);\n}\n\nfunction _loadDraco() {\n  _loadDraco = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(tile, dracoData, options, context) {\n    var parse, data, decodedPositions, decodedColors, decodedNormals, decodedBatchIds, isQuantizedDraco, isOctEncodedDraco, quantization, range;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            parse = context.parse;\n            _context3.next = 3;\n            return parse(dracoData.buffer, DracoLoader, {});\n\n          case 3:\n            data = _context3.sent;\n            decodedPositions = data.attributes.POSITION && data.attributes.POSITION.value;\n            decodedColors = data.attributes.COLOR_0 && data.attributes.COLOR_0.value;\n            decodedNormals = data.attributes.NORMAL && data.attributes.NORMAL.value;\n            decodedBatchIds = data.attributes.BATCH_ID && data.attributes.BATCH_ID.value;\n            isQuantizedDraco = decodedPositions && data.attributes.POSITION.value.quantization;\n            isOctEncodedDraco = decodedNormals && data.attributes.NORMAL.value.quantization;\n\n            if (isQuantizedDraco) {\n              quantization = data.POSITION.data.quantization;\n              range = quantization.range;\n              tile.quantizedVolumeScale = new Vector3(range, range, range);\n              tile.quantizedVolumeOffset = new Vector3(quantization.minValues);\n              tile.quantizedRange = (1 << quantization.quantizationBits) - 1.0;\n              tile.isQuantizedDraco = true;\n            }\n\n            if (isOctEncodedDraco) {\n              tile.octEncodedRange = (1 << data.NORMAL.data.quantization.quantizationBits) - 1.0;\n              tile.isOctEncodedDraco = true;\n            }\n\n            tile.attributes = {\n              positions: decodedPositions,\n              colors: normalize3DTileColorAttribute(tile, decodedColors),\n              normals: decodedNormals,\n              batchIds: decodedBatchIds\n            };\n\n          case 13:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loadDraco.apply(this, arguments);\n}","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}","import { global, isBrowser } from '../utils/globals';\nvar _parseImageNode = global._parseImageNode;\nvar IMAGE_SUPPORTED = typeof Image !== 'undefined';\nvar IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nvar NODE_IMAGE_SUPPORTED = Boolean(_parseImageNode);\nvar DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\nexport function isImageTypeSupported(type) {\n  switch (type) {\n    case 'auto':\n      return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n\n    case 'imagebitmap':\n      return IMAGE_BITMAP_SUPPORTED;\n\n    case 'image':\n      return IMAGE_SUPPORTED;\n\n    case 'data':\n      return DATA_SUPPORTED;\n\n    case 'html':\n      return IMAGE_SUPPORTED;\n\n    case 'ndarray':\n      return DATA_SUPPORTED;\n\n    default:\n      throw new Error(\"@loaders.gl/images: image \".concat(type, \" not supported in this environment\"));\n  }\n}\nexport function getDefaultImageType() {\n  if (IMAGE_BITMAP_SUPPORTED) {\n    return 'imagebitmap';\n  }\n\n  if (IMAGE_SUPPORTED) {\n    return 'image';\n  }\n\n  if (DATA_SUPPORTED) {\n    return 'data';\n  }\n\n  throw new Error(\"Install '@loaders.gl/polyfills' to parse images under Node.js\");\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assert from '../utils/assert';\nexport function isImage(image) {\n  return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n  switch (getImageType(image)) {\n    case 'imagebitmap':\n      image.close();\n      break;\n\n    default:\n  }\n}\nexport function getImageType(image) {\n  var format = getImageTypeOrNull(image);\n\n  if (!format) {\n    throw new Error('Not an image');\n  }\n\n  return format;\n}\nexport function getImageData(image) {\n  switch (getImageType(image)) {\n    case 'data':\n      return image;\n\n    case 'image':\n    case 'imagebitmap':\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n\n      if (context) {\n        canvas.width = image.width;\n        canvas.height = image.height;\n        context.drawImage(image, 0, 0);\n        return context.getImageData(0, 0, image.width, image.height);\n      }\n\n    default:\n      return assert(false);\n  }\n}\nexport { getImageData as getImageSize };\n\nfunction getImageTypeOrNull(image) {\n  if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n    return 'imagebitmap';\n  }\n\n  if (typeof Image !== 'undefined' && image instanceof Image) {\n    return 'image';\n  }\n\n  if (image && _typeof(image) === 'object' && image.data && image.width && image.height) {\n    return 'data';\n  }\n\n  return null;\n}","var SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nvar SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n  return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n  if (isSVG(url)) {\n    var textDecoder = new TextDecoder();\n    var xmlText = textDecoder.decode(arrayBuffer);\n    var src = \"data:image/svg+xml;base64,\".concat(btoa(xmlText));\n    return src;\n  }\n\n  return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n  if (isSVG(url)) {\n    throw new Error('SVG cannot be parsed directly to imagebitmap');\n  }\n\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { getBlobOrSVGDataUrl } from './svg-utils';\nexport default function parseToImage(_x, _x2, _x3) {\n  return _parseToImage.apply(this, arguments);\n}\n\nfunction _parseToImage() {\n  _parseToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, url) {\n    var blobOrDataUrl, URL, objectUrl;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n            URL = self.URL || self.webkitURL;\n            objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n            _context.prev = 3;\n            _context.next = 6;\n            return loadToImage(objectUrl || blobOrDataUrl, options);\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n            _context.prev = 7;\n\n            if (objectUrl) {\n              URL.revokeObjectURL(objectUrl);\n            }\n\n            return _context.finish(7);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3,, 7, 10]]);\n  }));\n  return _parseToImage.apply(this, arguments);\n}\n\nexport function loadToImage(_x4, _x5) {\n  return _loadToImage.apply(this, arguments);\n}\n\nfunction _loadToImage() {\n  _loadToImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url, options) {\n    var image;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            image = new Image();\n            image.src = url;\n\n            if (!(options.image && options.image.decode && image.decode)) {\n              _context2.next = 6;\n              break;\n            }\n\n            _context2.next = 5;\n            return image.decode();\n\n          case 5:\n            return _context2.abrupt(\"return\", image);\n\n          case 6:\n            _context2.next = 8;\n            return new Promise(function (resolve, reject) {\n              try {\n                image.onload = function () {\n                  return resolve(image);\n                };\n\n                image.onerror = function (err) {\n                  return reject(new Error(\"Could not load image \".concat(url, \": \").concat(err)));\n                };\n              } catch (error) {\n                reject(error);\n              }\n            });\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadToImage.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { isSVG, getBlob } from './svg-utils';\nimport parseToImage from './parse-to-image';\nvar EMPTY_OBJECT = {};\nvar imagebitmapOptionsSupported = true;\nexport default function parseToImageBitmap(_x, _x2, _x3) {\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nfunction _parseToImageBitmap() {\n  _parseToImageBitmap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, url) {\n    var blob, image, imagebitmapOptions;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!isSVG(url)) {\n              _context.next = 7;\n              break;\n            }\n\n            _context.next = 3;\n            return parseToImage(arrayBuffer, options, url);\n\n          case 3:\n            image = _context.sent;\n            blob = image;\n            _context.next = 8;\n            break;\n\n          case 7:\n            blob = getBlob(arrayBuffer, url);\n\n          case 8:\n            imagebitmapOptions = options && options.imagebitmap;\n            _context.next = 11;\n            return safeCreateImageBitmap(blob, imagebitmapOptions);\n\n          case 11:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseToImageBitmap.apply(this, arguments);\n}\n\nfunction safeCreateImageBitmap(_x4) {\n  return _safeCreateImageBitmap.apply(this, arguments);\n}\n\nfunction _safeCreateImageBitmap() {\n  _safeCreateImageBitmap = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(blob) {\n    var imagebitmapOptions,\n        _args2 = arguments;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            imagebitmapOptions = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : null;\n\n            if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n              imagebitmapOptions = null;\n            }\n\n            if (!imagebitmapOptions) {\n              _context2.next = 13;\n              break;\n            }\n\n            _context2.prev = 3;\n            _context2.next = 6;\n            return createImageBitmap(blob, imagebitmapOptions);\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](3);\n            console.warn(_context2.t0);\n            imagebitmapOptionsSupported = false;\n\n          case 13:\n            _context2.next = 15;\n            return createImageBitmap(blob);\n\n          case 15:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[3, 9]]);\n  }));\n  return _safeCreateImageBitmap.apply(this, arguments);\n}\n\nfunction isEmptyObject(object) {\n  for (var key in object || EMPTY_OBJECT) {\n    return true;\n  }\n\n  return false;\n}","var BIG_ENDIAN = false;\nvar LITTLE_ENDIAN = true;\nexport function getBinaryImageMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  return getPngMetadata(dataView) || getJpegMetadata(dataView) || getGifMetadata(dataView) || getBmpMetadata(dataView);\n}\n\nfunction getPngMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n\n  if (!isPng) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/png',\n    width: dataView.getUint32(16, BIG_ENDIAN),\n    height: dataView.getUint32(20, BIG_ENDIAN)\n  };\n}\n\nfunction getGifMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n\n  if (!isGif) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/gif',\n    width: dataView.getUint16(6, LITTLE_ENDIAN),\n    height: dataView.getUint16(8, LITTLE_ENDIAN)\n  };\n}\n\nexport function getBmpMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isBmp = dataView.byteLength >= 14 && dataView.getUint16(0, BIG_ENDIAN) === 0x424d && dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n\n  if (!isBmp) {\n    return null;\n  }\n\n  return {\n    mimeType: 'image/bmp',\n    width: dataView.getUint32(18, LITTLE_ENDIAN),\n    height: dataView.getUint32(22, LITTLE_ENDIAN)\n  };\n}\n\nfunction getJpegMetadata(binaryData) {\n  var dataView = toDataView(binaryData);\n  var isJpeg = dataView.byteLength >= 3 && dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 && dataView.getUint8(2) === 0xff;\n\n  if (!isJpeg) {\n    return null;\n  }\n\n  var _getJpegMarkers = getJpegMarkers(),\n      tableMarkers = _getJpegMarkers.tableMarkers,\n      sofMarkers = _getJpegMarkers.sofMarkers;\n\n  var i = 2;\n\n  while (i + 9 < dataView.byteLength) {\n    var marker = dataView.getUint16(i, BIG_ENDIAN);\n\n    if (sofMarkers.has(marker)) {\n      return {\n        mimeType: 'image/jpeg',\n        height: dataView.getUint16(i + 5, BIG_ENDIAN),\n        width: dataView.getUint16(i + 7, BIG_ENDIAN)\n      };\n    }\n\n    if (!tableMarkers.has(marker)) {\n      return null;\n    }\n\n    i += 2;\n    i += dataView.getUint16(i, BIG_ENDIAN);\n  }\n\n  return null;\n}\n\nfunction getJpegMarkers() {\n  var tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n\n  for (var i = 0xffe0; i < 0xfff0; ++i) {\n    tableMarkers.add(i);\n  }\n\n  var sofMarkers = new Set([0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce, 0xffcf, 0xffde]);\n  return {\n    tableMarkers: tableMarkers,\n    sofMarkers: sofMarkers\n  };\n}\n\nfunction toDataView(data) {\n  if (data instanceof DataView) {\n    return data;\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    return new DataView(data.buffer);\n  }\n\n  if (data instanceof ArrayBuffer) {\n    return new DataView(data);\n  }\n\n  throw new Error('toDataView');\n}","import { global } from '../utils/globals';\nimport assert from '../utils/assert';\nimport { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport default function parseToNodeImage(arrayBuffer, options) {\n  var _ref = getBinaryImageMetadata(arrayBuffer) || {},\n      mimeType = _ref.mimeType;\n\n  var _parseImageNode = global._parseImageNode;\n  assert(_parseImageNode);\n  return _parseImageNode(arrayBuffer, mimeType, options);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport assert from '../utils/assert';\nimport { isImageTypeSupported, getDefaultImageType } from '../category-api/image-type';\nimport { getImageData } from '../category-api/parsed-image-api';\nimport parseToImage from './parse-to-image';\nimport parseToImageBitmap from './parse-to-image-bitmap';\nimport parseToNodeImage from './parse-to-node-image';\nexport default function parseImage(_x, _x2, _x3) {\n  return _parseImage.apply(this, arguments);\n}\n\nfunction _parseImage() {\n  _parseImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context) {\n    var imageOptions, imageType, _ref, url, loadType, image;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = options || {};\n            imageOptions = options.image || {};\n            imageType = imageOptions.type || 'auto';\n            _ref = context || {}, url = _ref.url;\n            loadType = getLoadableImageType(imageType);\n            _context.t0 = loadType;\n            _context.next = _context.t0 === 'imagebitmap' ? 8 : _context.t0 === 'image' ? 12 : _context.t0 === 'data' ? 16 : 20;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return parseToImageBitmap(arrayBuffer, options, url);\n\n          case 10:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 12:\n            _context.next = 14;\n            return parseToImage(arrayBuffer, options, url);\n\n          case 14:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 16:\n            _context.next = 18;\n            return parseToNodeImage(arrayBuffer, options);\n\n          case 18:\n            image = _context.sent;\n            return _context.abrupt(\"break\", 21);\n\n          case 20:\n            assert(false);\n\n          case 21:\n            if (imageType === 'data') {\n              image = getImageData(image);\n            }\n\n            return _context.abrupt(\"return\", image);\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseImage.apply(this, arguments);\n}\n\nfunction getLoadableImageType(type) {\n  switch (type) {\n    case 'auto':\n    case 'data':\n      return getDefaultImageType();\n\n    default:\n      isImageTypeSupported(type);\n      return type;\n  }\n}","import parseImage from './lib/parsers/parse-image';\nimport { getBinaryImageMetadata } from './lib/category-api/binary-image-api';\nvar VERSION = typeof \"2.3.0-alpha.12\" !== 'undefined' ? \"2.3.0-alpha.12\" : 'latest';\nvar EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg'];\nvar MIME_TYPES = ['image/png', 'image/jpeg', 'image/gif', 'image/webp', 'image/bmp', 'image/vnd.microsoft.icon', 'image/svg+xml'];\nvar ImageLoader = {\n  id: 'image',\n  name: 'Images',\n  version: VERSION,\n  mimeTypes: MIME_TYPES,\n  extensions: EXTENSIONS,\n  parse: parseImage,\n  tests: [function (arrayBuffer) {\n    return Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)));\n  }],\n  options: {\n    image: {\n      type: 'auto',\n      decode: true\n    }\n  }\n};\nexport default ImageLoader;","export default function assert(condition, message) {\n  if (!condition) {\n    throw new Error(message || 'assert failed: gltf');\n  }\n}","export function resolveUrl(url, options) {\n  var absolute = url.startsWith('data:') || url.startsWith('http:') || url.startsWith('https:');\n\n  if (absolute) {\n    return url;\n  }\n\n  var baseUrl = options.baseUri || options.uri;\n\n  if (!baseUrl) {\n    throw new Error(\"'baseUri' must be provided to resolve relative url \".concat(url));\n  }\n\n  return baseUrl.substr(0, baseUrl.lastIndexOf('/') + 1) + url;\n}","import assert from '../utils/assert';\nexport function getTypedArrayForBufferView(json, buffers, bufferViewIndex) {\n  var bufferView = json.bufferViews[bufferViewIndex];\n  assert(bufferView);\n  var bufferIndex = bufferView.buffer;\n  var binChunk = buffers[bufferIndex];\n  assert(binChunk);\n  var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n  return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n}\nexport function getTypedArrayForImageData(json, buffers, imageIndex) {\n  var image = json.images[imageIndex];\n  var bufferViewIndex = json.bufferViews[image.bufferView];\n  return getTypedArrayForBufferView(json, buffers, bufferViewIndex);\n}","import assert from '../utils/assert';\nvar TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\nvar ARRAY_TO_COMPONENT_TYPE = new Map([[Int8Array, 5120], [Uint8Array, 5121], [Int16Array, 5122], [Uint16Array, 5123], [Uint32Array, 5125], [Float32Array, 5126]]);\nexport var ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport var ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};\nexport function getAccessorTypeFromSize(size) {\n  var type = TYPES[size - 1];\n  return type || TYPES[0];\n}\nexport function getComponentTypeFromArray(typedArray) {\n  var componentType = ARRAY_TO_COMPONENT_TYPE.get(typedArray.constructor);\n\n  if (!componentType) {\n    throw new Error('Illegal typed array');\n  }\n\n  return componentType;\n}\nexport function getAccessorArrayTypeAndLength(accessor, bufferView) {\n  var ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  var components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  var bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  var length = accessor.count * components;\n  var byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return {\n    ArrayType: ArrayType,\n    length: length,\n    byteLength: byteLength\n  };\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { getBinaryImageMIMEType } from '@loaders.gl/images';\nimport { padTo4Bytes, copyToArray } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength, getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils/gltf-utils';\n\nvar GLTFScenegraph = function () {\n  function GLTFScenegraph(gltf) {\n    _classCallCheck(this, GLTFScenegraph);\n\n    if (gltf instanceof GLTFScenegraph) {\n      return gltf;\n    }\n\n    if (!gltf) {\n      gltf = {\n        json: {\n          asset: {\n            version: '2.0',\n            generator: 'loaders.gl'\n          },\n          buffers: []\n        },\n        buffers: []\n      };\n    }\n\n    this.byteLength = 0;\n    this.gltf = gltf;\n    assert(this.gltf.json);\n  }\n\n  _createClass(GLTFScenegraph, [{\n    key: \"getApplicationData\",\n    value: function getApplicationData(key) {\n      var data = this.json[key];\n      return data;\n    }\n  }, {\n    key: \"getExtraData\",\n    value: function getExtraData(key) {\n      var extras = this.json.extras || {};\n      return extras[key];\n    }\n  }, {\n    key: \"getExtension\",\n    value: function getExtension(extensionName) {\n      var isExtension = this.getUsedExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      var extensions = this.json.extensions || {};\n      return isExtension ? extensions[extensionName] || true : null;\n    }\n  }, {\n    key: \"getRequiredExtension\",\n    value: function getRequiredExtension(extensionName) {\n      var isRequired = this.getRequiredExtensions().find(function (name) {\n        return name === extensionName;\n      });\n      return isRequired ? this.getExtension(extensionName) : null;\n    }\n  }, {\n    key: \"getRequiredExtensions\",\n    value: function getRequiredExtensions() {\n      return this.json.extensionsRequired || [];\n    }\n  }, {\n    key: \"getUsedExtensions\",\n    value: function getUsedExtensions() {\n      return this.json.extensionsUsed || [];\n    }\n  }, {\n    key: \"getObjectExtension\",\n    value: function getObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      return extensions[extensionName];\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this.getObject('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this.getObject('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this.getObject('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this.getObject('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this.getObject('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this.getObject('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this.getObject('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this.getObject('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this.getObject('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this.getObject('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this.getObject('buffers', index);\n    }\n  }, {\n    key: \"getObject\",\n    value: function getObject(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        throw new Error(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"getTypedArrayForBufferView\",\n    value: function getTypedArrayForBufferView(bufferView) {\n      bufferView = this.getBufferView(bufferView);\n      var bufferIndex = bufferView.buffer;\n      var binChunk = this.gltf.buffers[bufferIndex];\n      assert(binChunk);\n      var byteOffset = (bufferView.byteOffset || 0) + binChunk.byteOffset;\n      return new Uint8Array(binChunk.arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"getTypedArrayForAccessor\",\n    value: function getTypedArrayForAccessor(accessor) {\n      accessor = this.getAccessor(accessor);\n      var bufferView = this.getBufferView(accessor.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n\n      var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, bufferView),\n          ArrayType = _getAccessorArrayType.ArrayType,\n          length = _getAccessorArrayType.length;\n\n      var byteOffset = bufferView.byteOffset + accessor.byteOffset;\n      return new ArrayType(arrayBuffer, byteOffset, length);\n    }\n  }, {\n    key: \"getTypedArrayForImageData\",\n    value: function getTypedArrayForImageData(image) {\n      image = this.getAccessor(image);\n      var bufferView = this.getBufferView(image.bufferView);\n      var buffer = this.getBuffer(bufferView.buffer);\n      var arrayBuffer = buffer.data;\n      var byteOffset = bufferView.byteOffset || 0;\n      return new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n    }\n  }, {\n    key: \"addApplicationData\",\n    value: function addApplicationData(key, data) {\n      this.json[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addExtraData\",\n    value: function addExtraData(key, data) {\n      this.json.extras = this.json.extras || {};\n      this.json.extras[key] = data;\n      return this;\n    }\n  }, {\n    key: \"addObjectExtension\",\n    value: function addObjectExtension(object, extensionName, data) {\n      assert(data);\n      object.extensions = object.extensions || {};\n      object.extensions[extensionName] = data;\n      this.registerUsedExtension(extensionName);\n      return this;\n    }\n  }, {\n    key: \"setObjectExtension\",\n    value: function setObjectExtension(object, extensionName, data) {\n      var extensions = object.extensions || {};\n      extensions[extensionName] = data;\n    }\n  }, {\n    key: \"removeObjectExtension\",\n    value: function removeObjectExtension(object, extensionName) {\n      var extensions = object.extensions || {};\n      var extension = extensions[extensionName];\n      delete extensions[extensionName];\n      return extension;\n    }\n  }, {\n    key: \"addExtension\",\n    value: function addExtension(extensionName) {\n      var extensionData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      assert(extensionData);\n      this.json.extensions = this.json.extensions || {};\n      this.json.extensions[extensionName] = extensionData;\n      this.registerUsedExtension(extensionName);\n      return extensionData;\n    }\n  }, {\n    key: \"addRequiredExtension\",\n    value: function addRequiredExtension(extensionName) {\n      var extensionData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      assert(extensionData);\n      this.addExtension(extensionName, extensionData);\n      this.registerRequiredExtension(extensionName);\n      return extensionData;\n    }\n  }, {\n    key: \"registerUsedExtension\",\n    value: function registerUsedExtension(extensionName) {\n      this.json.extensionsUsed = this.json.extensionsUsed || [];\n\n      if (!this.json.extensionsUsed.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsUsed.push(extensionName);\n      }\n    }\n  }, {\n    key: \"registerRequiredExtension\",\n    value: function registerRequiredExtension(extensionName) {\n      this.registerUsedExtension(extensionName);\n      this.json.extensionsRequired = this.json.extensionsRequired || [];\n\n      if (!this.json.extensionsRequired.find(function (ext) {\n        return ext === extensionName;\n      })) {\n        this.json.extensionsRequired.push(extensionName);\n      }\n    }\n  }, {\n    key: \"removeExtension\",\n    value: function removeExtension(extensionName) {\n      if (this.json.extensionsRequired) {\n        this._removeStringFromArray(this.json.extensionsRequired, extensionName);\n      }\n\n      if (this.json.extensionsUsed) {\n        this._removeStringFromArray(this.json.extensionsUsed, extensionName);\n      }\n\n      if (this.json.extensions) {\n        delete this.json.extensions[extensionName];\n      }\n    }\n  }, {\n    key: \"addMesh\",\n    value: function addMesh(attributes, indices) {\n      var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n\n      var accessors = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessors,\n          indices: indices,\n          mode: mode\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addPointCloud\",\n    value: function addPointCloud(attributes) {\n      var accessorIndices = this._addAttributes(attributes);\n\n      var glTFMesh = {\n        primitives: [{\n          attributes: accessorIndices,\n          mode: 0\n        }]\n      };\n      this.json.meshes = this.json.meshes || [];\n      this.json.meshes.push(glTFMesh);\n      return this.json.meshes.length - 1;\n    }\n  }, {\n    key: \"addImage\",\n    value: function addImage(imageData, mimeType) {\n      mimeType = mimeType || getBinaryImageMIMEType(imageData);\n      var bufferViewIndex = this.addBufferView(imageData);\n      var glTFImage = {\n        bufferView: bufferViewIndex,\n        mimeType: mimeType\n      };\n      this.json.images = this.json.images || [];\n      this.json.images.push(glTFImage);\n      return this.json.images.length - 1;\n    }\n  }, {\n    key: \"addBufferView\",\n    value: function addBufferView(buffer) {\n      var byteLength = buffer.byteLength;\n      assert(Number.isFinite(byteLength));\n      this.sourceBuffers = this.sourceBuffers || [];\n      this.sourceBuffers.push(buffer);\n      var glTFBufferView = {\n        buffer: 0,\n        byteOffset: this.byteLength,\n        byteLength: byteLength\n      };\n      this.byteLength += padTo4Bytes(byteLength);\n      this.json.bufferViews = this.json.bufferViews || [];\n      this.json.bufferViews.push(glTFBufferView);\n      return this.json.bufferViews.length - 1;\n    }\n  }, {\n    key: \"addAccessor\",\n    value: function addAccessor(bufferViewIndex, accessor) {\n      var glTFAccessor = {\n        bufferView: bufferViewIndex,\n        type: getAccessorTypeFromSize(accessor.size),\n        componentType: accessor.componentType,\n        count: accessor.count\n      };\n      this.json.accessors = this.json.accessors || [];\n      this.json.accessors.push(glTFAccessor);\n      return this.json.accessors.length - 1;\n    }\n  }, {\n    key: \"addBinaryBuffer\",\n    value: function addBinaryBuffer(sourceBuffer) {\n      var accessor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        size: 3\n      };\n      var bufferViewIndex = this.addBufferView(sourceBuffer);\n      var accessorDefaults = {\n        size: accessor.size,\n        componentType: getComponentTypeFromArray(sourceBuffer),\n        count: Math.round(sourceBuffer.length / accessor.size)\n      };\n      return this.addAccessor(bufferViewIndex, Object.assign(accessorDefaults, accessor));\n    }\n  }, {\n    key: \"createBinaryChunk\",\n    value: function createBinaryChunk() {\n      if (this.arrayBuffer) {\n        return;\n      }\n\n      var totalByteLength = this.byteLength;\n      var arrayBuffer = new ArrayBuffer(totalByteLength);\n      var targetArray = new Uint8Array(arrayBuffer);\n      var dstByteOffset = 0;\n\n      for (var i = 0; i < this.sourceBuffers.length; i++) {\n        var sourceBuffer = this.sourceBuffers[i];\n        dstByteOffset = copyToArray(sourceBuffer, targetArray, dstByteOffset);\n      }\n\n      this.json.buffers[0].byteLength = totalByteLength;\n      this.arrayBuffer = arrayBuffer;\n      this.sourceBuffers = [];\n    }\n  }, {\n    key: \"_removeStringFromArray\",\n    value: function _removeStringFromArray(array, string) {\n      var found = true;\n\n      while (found) {\n        var index = array.indexOf(string);\n\n        if (index > -1) {\n          array.splice(index, 1);\n        } else {\n          found = false;\n        }\n      }\n    }\n  }, {\n    key: \"json\",\n    get: function get() {\n      return this.gltf.json;\n    }\n  }]);\n\n  return GLTFScenegraph;\n}();\n\nexport { GLTFScenegraph as default };","import { getBinaryImageMetadata } from '../category-api/binary-image-api';\nexport function isBinaryImage(arrayBuffer, mimeType) {\n  var metadata = getBinaryImageMetadata(arrayBuffer);\n\n  if (mimeType) {\n    return Boolean(metadata && metadata.mimeType === mimeType);\n  }\n\n  return Boolean(metadata);\n}\nexport function getBinaryImageMIMEType(arrayBuffer) {\n  var metadata = getBinaryImageMetadata(arrayBuffer);\n  return metadata ? metadata.mimeType : null;\n}\nexport function getBinaryImageSize(arrayBuffer) {\n  var mimeType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var metadata = getBinaryImageMetadata(arrayBuffer);\n\n  if (metadata) {\n    return {\n      width: metadata.width,\n      height: metadata.height\n    };\n  }\n\n  mimeType = mimeType || 'unknown';\n  throw new Error(\"invalid image data for type: \".concat(mimeType));\n}","import { getAccessorTypeFromSize, getComponentTypeFromArray } from './gltf-utils';\nexport function getGLTFAccessors(attributes) {\n  var accessors = {};\n\n  for (var name in attributes) {\n    var attribute = attributes[name];\n\n    if (name !== 'indices') {\n      var glTFAccessor = getGLTFAccessor(attribute);\n      accessors[name] = glTFAccessor;\n    }\n  }\n\n  return accessors;\n}\nexport function getGLTFAccessor(attribute, gltfAttributeName) {\n  var _getAccessorData = getAccessorData(attribute, gltfAttributeName),\n      buffer = _getAccessorData.buffer,\n      size = _getAccessorData.size,\n      count = _getAccessorData.count;\n\n  var glTFAccessor = {\n    value: buffer,\n    size: size,\n    bufferView: null,\n    byteOffset: 0,\n    count: count,\n    type: getAccessorTypeFromSize(size),\n    componentType: getComponentTypeFromArray(buffer)\n  };\n  return glTFAccessor;\n}\nexport function getGLTFAttribute(data, gltfAttributeName) {\n  return data.attributes[data.glTFAttributeMap[gltfAttributeName]];\n}\n\nfunction getAccessorData(attribute, attributeName) {\n  var buffer = attribute;\n  var size = 1;\n  var count = 0;\n\n  if (attribute && attribute.value) {\n    buffer = attribute.value;\n    size = attribute.size || 1;\n  }\n\n  if (buffer) {\n    if (!ArrayBuffer.isView(buffer)) {\n      buffer = toTypedArray(buffer, Float32Array);\n    }\n\n    count = buffer.length / size;\n  }\n\n  return {\n    buffer: buffer,\n    size: size,\n    count: count\n  };\n}\n\nfunction toTypedArray(array, ArrayType) {\n  var convertTypedArrays = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (!array) {\n    return null;\n  }\n\n  if (Array.isArray(array)) {\n    return new ArrayType(array);\n  }\n\n  if (convertTypedArrays && !(array instanceof ArrayType)) {\n    return new ArrayType(array);\n  }\n\n  return array;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _marked = _regeneratorRuntime.mark(makeMeshPrimitiveIterator);\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { DracoLoader } from '@loaders.gl/draco';\nimport { getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_DRACO_MESH_COMPRESSION } from '../gltf-constants';\nimport { getGLTFAccessors, getGLTFAccessor } from '../gltf-utils/gltf-attribute-utils';\nexport function decode(_x, _x2, _x3) {\n  return _decode.apply(this, arguments);\n}\n\nfunction _decode() {\n  _decode = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltfData, options, context) {\n    var scenegraph, promises, _iterator4, _step4, primitive;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (options.gltf.decompressMeshes) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 2:\n            scenegraph = new GLTFScenegraph(gltfData);\n            promises = [];\n            _iterator4 = _createForOfIteratorHelper(makeMeshPrimitiveIterator(scenegraph));\n\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                primitive = _step4.value;\n\n                if (scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION)) {\n                  promises.push(decompressPrimitive(primitive, scenegraph, options, context));\n                }\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n\n            _context2.next = 8;\n            return Promise.all(promises);\n\n          case 8:\n            scenegraph.removeExtension(KHR_DRACO_MESH_COMPRESSION);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _decode.apply(this, arguments);\n}\n\nexport function encode(gltfData) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var scenegraph = new GLTFScenegraph(gltfData);\n\n  var _iterator = _createForOfIteratorHelper(scenegraph.json.meshes || []),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var mesh = _step.value;\n      compressMesh(mesh, options);\n      scenegraph.addRequiredExtension(KHR_DRACO_MESH_COMPRESSION);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nfunction decompressPrimitive(_x4, _x5, _x6, _x7) {\n  return _decompressPrimitive.apply(this, arguments);\n}\n\nfunction _decompressPrimitive() {\n  _decompressPrimitive = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(primitive, scenegraph, options, context) {\n    var compressedPrimitive, buffer, bufferCopy, parse, decodedData;\n    return _regeneratorRuntime.wrap(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            compressedPrimitive = scenegraph.getObjectExtension(primitive, KHR_DRACO_MESH_COMPRESSION);\n            buffer = scenegraph.getTypedArrayForBufferView(compressedPrimitive.bufferView);\n            bufferCopy = getZeroOffsetArrayBuffer(buffer.buffer, buffer.byteOffset);\n            parse = context.parse;\n            _context3.next = 6;\n            return parse(bufferCopy, DracoLoader, options, context);\n\n          case 6:\n            decodedData = _context3.sent;\n            primitive.attributes = getGLTFAccessors(decodedData.attributes);\n\n            if (decodedData.indices) {\n              primitive.indices = getGLTFAccessor(decodedData.indices);\n            }\n\n            checkPrimitive(primitive);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _decompressPrimitive.apply(this, arguments);\n}\n\nfunction compressMesh(attributes, indices) {\n  var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 4;\n  var options = arguments.length > 3 ? arguments[3] : undefined;\n  var context = arguments.length > 4 ? arguments[4] : undefined;\n\n  if (!options.DracoWriter || !options.DracoLoader) {\n    throw new Error('DracoWriter/DracoLoader not available');\n  }\n\n  var compressedData = options.DracoWriter.encodeSync({\n    attributes: attributes\n  });\n  var parseSync = context.parseSync;\n  var decodedData = parseSync({\n    attributes: attributes\n  });\n\n  var fauxAccessors = options._addFauxAttributes(decodedData.attributes);\n\n  var bufferViewIndex = options.addBufferView(compressedData);\n  var glTFMesh = {\n    primitives: [{\n      attributes: fauxAccessors,\n      mode: mode,\n      extensions: _defineProperty({}, KHR_DRACO_MESH_COMPRESSION, {\n        bufferView: bufferViewIndex,\n        attributes: fauxAccessors\n      })\n    }]\n  };\n  return glTFMesh;\n}\n\nfunction checkPrimitive(primitive) {\n  if (!primitive.attributes && Object.keys(primitive.attributes).length > 0) {\n    throw new Error('Empty glTF primitive detected: Draco decompression failure?');\n  }\n}\n\nfunction makeMeshPrimitiveIterator(scenegraph) {\n  var _iterator2, _step2, mesh, _iterator3, _step3, primitive;\n\n  return _regeneratorRuntime.wrap(function makeMeshPrimitiveIterator$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _iterator2 = _createForOfIteratorHelper(scenegraph.json.meshes || []);\n          _context.prev = 1;\n\n          _iterator2.s();\n\n        case 3:\n          if ((_step2 = _iterator2.n()).done) {\n            _context.next = 24;\n            break;\n          }\n\n          mesh = _step2.value;\n          _iterator3 = _createForOfIteratorHelper(mesh.primitives);\n          _context.prev = 6;\n\n          _iterator3.s();\n\n        case 8:\n          if ((_step3 = _iterator3.n()).done) {\n            _context.next = 14;\n            break;\n          }\n\n          primitive = _step3.value;\n          _context.next = 12;\n          return primitive;\n\n        case 12:\n          _context.next = 8;\n          break;\n\n        case 14:\n          _context.next = 19;\n          break;\n\n        case 16:\n          _context.prev = 16;\n          _context.t0 = _context[\"catch\"](6);\n\n          _iterator3.e(_context.t0);\n\n        case 19:\n          _context.prev = 19;\n\n          _iterator3.f();\n\n          return _context.finish(19);\n\n        case 22:\n          _context.next = 3;\n          break;\n\n        case 24:\n          _context.next = 29;\n          break;\n\n        case 26:\n          _context.prev = 26;\n          _context.t1 = _context[\"catch\"](1);\n\n          _iterator2.e(_context.t1);\n\n        case 29:\n          _context.prev = 29;\n\n          _iterator2.f();\n\n          return _context.finish(29);\n\n        case 32:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[1, 26, 29, 32], [6, 16, 19, 22]]);\n}","export var KHR_BINARY_GLTF = 'KHR_binary_glTF';\nexport var KHR_DRACO_MESH_COMPRESSION = 'KHR_draco_mesh_compression';\nexport var KHR_LIGHTS_PUNCTUAL = 'KHR_lights_punctual';\nexport var KHR_MATERIALS_UNLIT = 'KHR_materials_unlit';\nexport var KHR_TECHNIQUES_WEBGL = 'KHR_techniques_webgl';\nexport var UBER_POINT_CLOUD_EXTENSION = 'UBER_draco_point_cloud_compression';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nexport function getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\nexport function getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\nexport function getGLEnumFromSamplerParameter(parameter) {\n  var GL_TEXTURE_MAG_FILTER = 0x2800;\n  var GL_TEXTURE_MIN_FILTER = 0x2801;\n  var GL_TEXTURE_WRAP_S = 0x2802;\n  var GL_TEXTURE_WRAP_T = 0x2803;\n  var PARAMETER_MAP = {\n    magFilter: GL_TEXTURE_MAG_FILTER,\n    minFilter: GL_TEXTURE_MIN_FILTER,\n    wrapS: GL_TEXTURE_WRAP_S,\n    wrapT: GL_TEXTURE_WRAP_T\n  };\n  return PARAMETER_MAP[parameter];\n}","function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport assert from '../utils/assert';\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_LIGHTS_PUNCTUAL } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  var extension = gltfScenegraph.getExtension(KHR_LIGHTS_PUNCTUAL);\n\n  if (extension) {\n    gltfScenegraph.json.lights = extension.lights;\n    gltfScenegraph.removeExtension(KHR_LIGHTS_PUNCTUAL);\n  }\n\n  var _iterator = _createForOfIteratorHelper(json.nodes || []),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var node = _step.value;\n      var nodeExtension = gltfScenegraph.getObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n\n      if (nodeExtension) {\n        node.light = nodeExtension.light;\n      }\n\n      gltfScenegraph.removeObjectExtension(node, KHR_LIGHTS_PUNCTUAL);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (json.lights) {\n    var extension = gltfScenegraph.addExtension(KHR_LIGHTS_PUNCTUAL);\n    assert(!extension.lights);\n    extension.lights = json.lights;\n    delete json.lights;\n  }\n\n  if (gltfScenegraph.json.lights) {\n    var _iterator2 = _createForOfIteratorHelper(gltfScenegraph.json.lights),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var light = _step2.value;\n        var node = light.node;\n        gltfScenegraph.addObjectExtension(node, KHR_LIGHTS_PUNCTUAL, light);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    delete gltfScenegraph.json.lights;\n  }\n}","function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_MATERIALS_UNLIT } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  gltfScenegraph.removeExtension(KHR_MATERIALS_UNLIT);\n\n  var _iterator = _createForOfIteratorHelper(json.materials || []),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var material = _step.value;\n      var extension = material.extensions && material.extensions.KHR_materials_unlit;\n\n      if (extension) {\n        material.unlit = true;\n      }\n\n      gltfScenegraph.removeObjectExtension(material, KHR_MATERIALS_UNLIT);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\nexport function encode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  if (gltfScenegraph.materials) {\n    var _iterator2 = _createForOfIteratorHelper(json.materials),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var material = _step2.value;\n\n        if (material.unlit) {\n          delete material.unlit;\n          gltfScenegraph.addObjectExtension(material, KHR_MATERIALS_UNLIT, {});\n          gltfScenegraph.addExtension(KHR_MATERIALS_UNLIT);\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_TECHNIQUES_WEBGL } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n  var extension = gltfScenegraph.getExtension(KHR_TECHNIQUES_WEBGL);\n\n  if (extension) {\n    var techniques = resolveTechniques(extension, gltfScenegraph);\n\n    var _iterator = _createForOfIteratorHelper(json.materials || []),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var material = _step.value;\n        var materialExtension = gltfScenegraph.getObjectExtension(material, KHR_TECHNIQUES_WEBGL);\n\n        if (materialExtension) {\n          material.technique = Object.assign({}, materialExtension, techniques[materialExtension.technique]);\n          material.technique.values = resolveValues(material.technique, gltfScenegraph);\n        }\n\n        gltfScenegraph.removeObjectExtension(material, KHR_TECHNIQUES_WEBGL);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    gltfScenegraph.removeExtension(KHR_TECHNIQUES_WEBGL);\n  }\n}\nexport function encode(gltfData, options) {}\n\nfunction resolveTechniques(_ref, gltfScenegraph) {\n  var _ref$programs = _ref.programs,\n      programs = _ref$programs === void 0 ? [] : _ref$programs,\n      _ref$shaders = _ref.shaders,\n      shaders = _ref$shaders === void 0 ? [] : _ref$shaders,\n      _ref$techniques = _ref.techniques,\n      techniques = _ref$techniques === void 0 ? [] : _ref$techniques;\n  var textDecoder = new TextDecoder();\n  shaders.forEach(function (shader) {\n    if (Number.isFinite(shader.bufferView)) {\n      shader.code = textDecoder.decode(gltfScenegraph.getTypedArrayForBufferView(shader.bufferView));\n    } else {\n      throw new Error('KHR_techniques_webgl: no shader code');\n    }\n  });\n  programs.forEach(function (program) {\n    program.fragmentShader = shaders[program.fragmentShader];\n    program.vertexShader = shaders[program.vertexShader];\n  });\n  techniques.forEach(function (technique) {\n    technique.program = programs[technique.program];\n  });\n  return techniques;\n}\n\nfunction resolveValues(technique, gltfScenegraph) {\n  var values = Object.assign({}, technique.values);\n  Object.keys(technique.uniforms || {}).forEach(function (uniform) {\n    if (technique.uniforms[uniform].value && !(uniform in values)) {\n      values[uniform] = technique.uniforms[uniform].value;\n    }\n  });\n  Object.keys(values).forEach(function (uniform) {\n    if (_typeof(values[uniform]) === 'object' && values[uniform].index !== undefined) {\n      values[uniform].texture = gltfScenegraph.getTexture(values[uniform].index);\n    }\n  });\n  return values;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as KHR_draco_mesh_compression from './KHR_draco_mesh_compression';\nimport * as KHR_lights_punctual from './KHR_lights_punctual';\nimport * as KHR_materials_unlit from './KHR_materials_unlit';\nimport * as KHR_techniques_webgl from './KHR_techniques_webgl';\nexport var EXTENSIONS = {\n  KHR_draco_mesh_compression: KHR_draco_mesh_compression,\n  KHR_lights_punctual: KHR_lights_punctual,\n  KHR_materials_unlit: KHR_materials_unlit,\n  KHR_techniques_webgl: KHR_techniques_webgl\n};\nexport function decodeExtensions(_x) {\n  return _decodeExtensions.apply(this, arguments);\n}\n\nfunction _decodeExtensions() {\n  _decodeExtensions = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltf) {\n    var options,\n        context,\n        extensionName,\n        excludes,\n        exclude,\n        extension,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            context = _args.length > 2 ? _args[2] : undefined;\n            options.gltf = options.gltf || {};\n            _context.t0 = _regeneratorRuntime.keys(EXTENSIONS);\n\n          case 4:\n            if ((_context.t1 = _context.t0()).done) {\n              _context.next = 14;\n              break;\n            }\n\n            extensionName = _context.t1.value;\n            excludes = options.gltf.excludeExtensions || {};\n            exclude = extensionName in excludes && !excludes[extensionName];\n\n            if (exclude) {\n              _context.next = 12;\n              break;\n            }\n\n            extension = EXTENSIONS[extensionName];\n            _context.next = 12;\n            return extension.decode(gltf, options, context);\n\n          case 12:\n            _context.next = 4;\n            break;\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _decodeExtensions.apply(this, arguments);\n}","import { padTo4Bytes, assert } from '@loaders.gl/loader-utils';\nvar MAGIC_glTF = 0x676c5446;\nvar GLB_FILE_HEADER_SIZE = 12;\nvar GLB_CHUNK_HEADER_SIZE = 8;\nvar GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nvar GLB_CHUNK_TYPE_BIN = 0x004e4942;\nvar GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED = 0;\nvar GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED = 1;\nvar GLB_V1_CONTENT_FORMAT_JSON = 0x0;\nvar LE = true;\n\nfunction getMagicString(dataView) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return \"\".concat(String.fromCharCode(dataView.getUint8(byteOffset + 0))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 1))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 2))).concat(String.fromCharCode(dataView.getUint8(byteOffset + 3)));\n}\n\nexport function isGLB(arrayBuffer) {\n  var byteOffset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var dataView = new DataView(arrayBuffer);\n  var _options$magic = options.magic,\n      magic = _options$magic === void 0 ? MAGIC_glTF : _options$magic;\n  var magic1 = dataView.getUint32(byteOffset, false);\n  return magic1 === magic || magic1 === MAGIC_glTF;\n}\nexport default function parseGLBSync(glb, arrayBuffer) {\n  var byteOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var dataView = new DataView(arrayBuffer);\n  glb.type = getMagicString(dataView, byteOffset + 0);\n  glb.version = dataView.getUint32(byteOffset + 4, LE);\n  var byteLength = dataView.getUint32(byteOffset + 8, LE);\n  glb.header = {\n    byteOffset: byteOffset,\n    byteLength: byteLength\n  };\n  glb.json = {};\n  glb.binChunks = [];\n  byteOffset += GLB_FILE_HEADER_SIZE;\n\n  switch (glb.version) {\n    case 1:\n      return parseGLBV1(glb, dataView, byteOffset, options = {});\n\n    case 2:\n      return parseGLBV2(glb, dataView, byteOffset, options = {});\n\n    default:\n      throw new Error(\"Invalid GLB version \".concat(glb.version, \". Only supports v1 and v2.\"));\n  }\n}\n\nfunction parseGLBV1(glb, dataView, byteOffset, options) {\n  assert(glb.header.byteLength > GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE);\n  var contentLength = dataView.getUint32(byteOffset + 0, LE);\n  var contentFormat = dataView.getUint32(byteOffset + 4, LE);\n  byteOffset += GLB_CHUNK_HEADER_SIZE;\n  assert(contentFormat === GLB_V1_CONTENT_FORMAT_JSON);\n  byteOffset += parseJSONChunk(glb, dataView, byteOffset, contentLength, options);\n  byteOffset += parseBINChunk(glb, dataView, byteOffset, glb.header.byteLength, options);\n  return byteOffset;\n}\n\nfunction parseGLBV2(glb, dataView, byteOffset, options) {\n  assert(glb.header.byteLength > GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE);\n  parseGLBChunksSync(glb, dataView, byteOffset, options);\n  return byteOffset + glb.header.byteLength;\n}\n\nfunction parseGLBChunksSync(glb, dataView, byteOffset, options) {\n  while (byteOffset + 8 <= glb.header.byteLength) {\n    var chunkLength = dataView.getUint32(byteOffset + 0, LE);\n    var chunkFormat = dataView.getUint32(byteOffset + 4, LE);\n    byteOffset += GLB_CHUNK_HEADER_SIZE;\n\n    switch (chunkFormat) {\n      case GLB_CHUNK_TYPE_JSON:\n        parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_BIN:\n        parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        break;\n\n      case GLB_CHUNK_TYPE_JSON_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseJSONChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      case GLB_CHUNK_TYPE_BIX_XVIZ_DEPRECATED:\n        if (!options.glb.strict) {\n          parseBINChunk(glb, dataView, byteOffset, chunkLength, options);\n        }\n\n        break;\n\n      default:\n        break;\n    }\n\n    byteOffset += padTo4Bytes(chunkLength);\n  }\n\n  return byteOffset;\n}\n\nfunction parseJSONChunk(glb, dataView, byteOffset, chunkLength, options) {\n  var jsonChunk = new Uint8Array(dataView.buffer, byteOffset, chunkLength);\n  var textDecoder = new TextDecoder('utf8');\n  var jsonText = textDecoder.decode(jsonChunk);\n  glb.json = JSON.parse(jsonText);\n  return padTo4Bytes(chunkLength);\n}\n\nfunction parseBINChunk(glb, dataView, byteOffset, chunkLength, options) {\n  glb.header.hasBinChunk = true;\n  glb.binChunks.push({\n    byteOffset: byteOffset,\n    byteLength: chunkLength,\n    arrayBuffer: dataView.buffer\n  });\n  return padTo4Bytes(chunkLength);\n}","function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport GLTFScenegraph from '../gltf-scenegraph';\nimport { KHR_BINARY_GLTF } from '../gltf-constants';\nexport function decode(gltfData, options) {\n  var gltfScenegraph = new GLTFScenegraph(gltfData);\n  var json = gltfScenegraph.json;\n\n  var _iterator = _createForOfIteratorHelper(json.images || []),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var node = _step.value;\n      var extension = gltfScenegraph.removeObjectExtension(node, KHR_BINARY_GLTF);\n\n      if (extension) {\n        Object.assign(node, extension);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  if (json.buffers && json.buffers[0]) {\n    delete json.buffers[0].uri;\n  }\n\n  gltfScenegraph.removeExtension(KHR_BINARY_GLTF);\n}\nexport function encode(gltfData, options) {\n  throw new Error(KHR_BINARY_GLTF);\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport * as KHR_binary_glTF from './extensions/KHR_binary_gltf';\nvar GLTF_ARRAYS = {\n  accessors: 'accessor',\n  animations: 'animation',\n  buffers: 'buffer',\n  bufferViews: 'bufferView',\n  images: 'image',\n  materials: 'material',\n  meshes: 'mesh',\n  nodes: 'node',\n  samplers: 'sampler',\n  scenes: 'scene',\n  skins: 'skin',\n  textures: 'texture'\n};\nvar GLTF_KEYS = {\n  accessor: 'accessors',\n  animations: 'animation',\n  buffer: 'buffers',\n  bufferView: 'bufferViews',\n  image: 'images',\n  material: 'materials',\n  mesh: 'meshes',\n  node: 'nodes',\n  sampler: 'samplers',\n  scene: 'scenes',\n  skin: 'skins',\n  texture: 'textures'\n};\n\nvar GLTFV1Normalizer = function () {\n  function GLTFV1Normalizer(gltf) {\n    _classCallCheck(this, GLTFV1Normalizer);\n\n    this.idToIndexMap = {\n      animations: {},\n      accessors: {},\n      buffers: {},\n      bufferViews: {},\n      images: {},\n      materials: {},\n      meshes: {},\n      nodes: {},\n      samplers: {},\n      scenes: {},\n      skins: {},\n      textures: {}\n    };\n  }\n\n  _createClass(GLTFV1Normalizer, [{\n    key: \"normalize\",\n    value: function normalize(gltf, options) {\n      this.json = gltf.json;\n      var json = gltf.json;\n\n      switch (json.asset && json.asset.version) {\n        case '2.0':\n          return;\n\n        case undefined:\n        case '1.0':\n          break;\n\n        default:\n          console.warn(\"glTF: Unknown version \".concat(json.asset.version));\n          return;\n      }\n\n      if (!options.normalize) {\n        throw new Error('glTF v1 is not supported.');\n      }\n\n      console.warn('Converting glTF v1 to glTF v2 format. This is experimental and may fail.');\n\n      this._addAsset(json);\n\n      this._convertTopLevelObjectsToArrays(json);\n\n      KHR_binary_glTF.decode(gltf, options);\n\n      this._convertObjectIdsToArrayIndices(json);\n\n      this._updateObjects(json);\n    }\n  }, {\n    key: \"_addAsset\",\n    value: function _addAsset(json) {\n      json.asset = json.asset || {};\n      json.asset.version = '2.0';\n      json.asset.generator = json.asset.generator || 'Normalized to glTF 2.0 by loaders.gl';\n    }\n  }, {\n    key: \"_convertTopLevelObjectsToArrays\",\n    value: function _convertTopLevelObjectsToArrays(json) {\n      for (var arrayName in GLTF_ARRAYS) {\n        this._convertTopLevelObjectToArray(json, arrayName);\n      }\n    }\n  }, {\n    key: \"_convertTopLevelObjectToArray\",\n    value: function _convertTopLevelObjectToArray(json, mapName) {\n      var objectMap = json[mapName];\n\n      if (!objectMap || Array.isArray(objectMap)) {\n        return;\n      }\n\n      json[mapName] = [];\n\n      for (var id in objectMap) {\n        var object = objectMap[id];\n        object.id = object.id || id;\n        var index = json[mapName].length;\n        json[mapName].push(object);\n        this.idToIndexMap[mapName][id] = index;\n      }\n    }\n  }, {\n    key: \"_convertObjectIdsToArrayIndices\",\n    value: function _convertObjectIdsToArrayIndices(json) {\n      for (var arrayName in GLTF_ARRAYS) {\n        this._convertIdsToIndices(json, arrayName);\n      }\n\n      if ('scene' in json) {\n        json.scene = this._convertIdToIndex(json.scene, 'scene');\n      }\n\n      var _iterator = _createForOfIteratorHelper(json.textures),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var texture = _step.value;\n\n          this._convertTextureIds(texture);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(json.meshes),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var mesh = _step2.value;\n\n          this._convertMeshIds(mesh);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(json.nodes),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var node = _step3.value;\n\n          this._convertNodeIds(node);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      var _iterator4 = _createForOfIteratorHelper(json.scenes),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _node = _step4.value;\n\n          this._convertSceneIds(_node);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }, {\n    key: \"_convertTextureIds\",\n    value: function _convertTextureIds(texture) {\n      if (texture.source) {\n        texture.source = this._convertIdToIndex(texture.source, 'image');\n      }\n    }\n  }, {\n    key: \"_convertMeshIds\",\n    value: function _convertMeshIds(mesh) {\n      var _iterator5 = _createForOfIteratorHelper(mesh.primitives),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var primitive = _step5.value;\n          var attributes = primitive.attributes,\n              indices = primitive.indices,\n              material = primitive.material;\n\n          for (var attributeName in attributes) {\n            attributes[attributeName] = this._convertIdToIndex(attributes[attributeName], 'accessor');\n          }\n\n          if (indices) {\n            primitive.indices = this._convertIdToIndex(indices, 'accessor');\n          }\n\n          if (material) {\n            primitive.material = this._convertIdToIndex(material, 'material');\n          }\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    }\n  }, {\n    key: \"_convertNodeIds\",\n    value: function _convertNodeIds(node) {\n      var _this = this;\n\n      if (node.children) {\n        node.children = node.children.map(function (child) {\n          return _this._convertIdToIndex(child, 'node');\n        });\n      }\n    }\n  }, {\n    key: \"_convertSceneIds\",\n    value: function _convertSceneIds(scene) {\n      var _this2 = this;\n\n      if (scene.nodes) {\n        scene.nodes = scene.nodes.map(function (node) {\n          return _this2._convertIdToIndex(node, 'node');\n        });\n      }\n    }\n  }, {\n    key: \"_convertIdsToIndices\",\n    value: function _convertIdsToIndices(json, topLevelArrayName) {\n      var _iterator6 = _createForOfIteratorHelper(json[topLevelArrayName]),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var object = _step6.value;\n\n          for (var key in object) {\n            var id = object[key];\n\n            var index = this._convertIdToIndex(id, key);\n\n            object[key] = index;\n          }\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  }, {\n    key: \"_convertIdToIndex\",\n    value: function _convertIdToIndex(id, key) {\n      var arrayName = GLTF_KEYS[key];\n\n      if (arrayName in this.idToIndexMap) {\n        var index = this.idToIndexMap[arrayName][id];\n\n        if (!Number.isFinite(index)) {\n          throw new Error(\"gltf v1: failed to resolve \".concat(key, \" with id \").concat(id));\n        }\n\n        return index;\n      }\n\n      return id;\n    }\n  }, {\n    key: \"_updateObjects\",\n    value: function _updateObjects(json) {\n      var _iterator7 = _createForOfIteratorHelper(this.json.buffers),\n          _step7;\n\n      try {\n        for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n          var buffer = _step7.value;\n          delete buffer.type;\n        }\n      } catch (err) {\n        _iterator7.e(err);\n      } finally {\n        _iterator7.f();\n      }\n    }\n  }]);\n\n  return GLTFV1Normalizer;\n}();\n\nexport default function normalizeGLTFV1(gltf) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return new GLTFV1Normalizer().normalize(gltf, options);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _DEFAULT_SAMPLER;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport assert from './utils/assert';\nimport { getAccessorArrayTypeAndLength } from './gltf-utils/gltf-utils';\nvar COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\nvar BYTES = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\nvar GL_SAMPLER = {\n  TEXTURE_MAG_FILTER: 0x2800,\n  TEXTURE_MIN_FILTER: 0x2801,\n  TEXTURE_WRAP_S: 0x2802,\n  TEXTURE_WRAP_T: 0x2803,\n  REPEAT: 0x2901,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_LINEAR: 0x2702\n};\nvar SAMPLER_PARAMETER_GLTF_TO_GL = {\n  magFilter: GL_SAMPLER.TEXTURE_MAG_FILTER,\n  minFilter: GL_SAMPLER.TEXTURE_MIN_FILTER,\n  wrapS: GL_SAMPLER.TEXTURE_WRAP_S,\n  wrapT: GL_SAMPLER.TEXTURE_WRAP_T\n};\nvar DEFAULT_SAMPLER = (_DEFAULT_SAMPLER = {}, _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MAG_FILTER, GL_SAMPLER.LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_MIN_FILTER, GL_SAMPLER.NEAREST_MIPMAP_LINEAR), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_S, GL_SAMPLER.REPEAT), _defineProperty(_DEFAULT_SAMPLER, GL_SAMPLER.TEXTURE_WRAP_, GL_SAMPLER.REPEAT), _DEFAULT_SAMPLER);\n\nfunction getBytesFromComponentType(componentType) {\n  return BYTES[componentType];\n}\n\nfunction getSizeFromAccessorType(type) {\n  return COMPONENTS[type];\n}\n\nvar GLTFPostProcessor = function () {\n  function GLTFPostProcessor() {\n    _classCallCheck(this, GLTFPostProcessor);\n  }\n\n  _createClass(GLTFPostProcessor, [{\n    key: \"postProcess\",\n    value: function postProcess(gltf) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var json = gltf.json,\n          _gltf$buffers = gltf.buffers,\n          buffers = _gltf$buffers === void 0 ? [] : _gltf$buffers,\n          _gltf$images = gltf.images,\n          images = _gltf$images === void 0 ? [] : _gltf$images,\n          _gltf$baseUri = gltf.baseUri,\n          baseUri = _gltf$baseUri === void 0 ? '' : _gltf$baseUri;\n      assert(json);\n      this.baseUri = baseUri;\n      this.json = json;\n      this.buffers = buffers;\n      this.images = images;\n\n      this._resolveTree(this.json, options);\n\n      return this.json;\n    }\n  }, {\n    key: \"_resolveTree\",\n    value: function _resolveTree(json) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (json.bufferViews) {\n        json.bufferViews = json.bufferViews.map(function (bufView, i) {\n          return _this._resolveBufferView(bufView, i);\n        });\n      }\n\n      if (json.images) {\n        json.images = json.images.map(function (image, i) {\n          return _this._resolveImage(image, i);\n        });\n      }\n\n      if (json.samplers) {\n        json.samplers = json.samplers.map(function (sampler, i) {\n          return _this._resolveSampler(sampler, i);\n        });\n      }\n\n      if (json.textures) {\n        json.textures = json.textures.map(function (texture, i) {\n          return _this._resolveTexture(texture, i);\n        });\n      }\n\n      if (json.accessors) {\n        json.accessors = json.accessors.map(function (accessor, i) {\n          return _this._resolveAccessor(accessor, i);\n        });\n      }\n\n      if (json.materials) {\n        json.materials = json.materials.map(function (material, i) {\n          return _this._resolveMaterial(material, i);\n        });\n      }\n\n      if (json.meshes) {\n        json.meshes = json.meshes.map(function (mesh, i) {\n          return _this._resolveMesh(mesh, i);\n        });\n      }\n\n      if (json.nodes) {\n        json.nodes = json.nodes.map(function (node, i) {\n          return _this._resolveNode(node, i);\n        });\n      }\n\n      if (json.skins) {\n        json.skins = json.skins.map(function (skin, i) {\n          return _this._resolveSkin(skin, i);\n        });\n      }\n\n      if (json.scenes) {\n        json.scenes = json.scenes.map(function (scene, i) {\n          return _this._resolveScene(scene, i);\n        });\n      }\n\n      if (json.scene !== undefined) {\n        json.scene = json.scenes[this.json.scene];\n      }\n    }\n  }, {\n    key: \"getScene\",\n    value: function getScene(index) {\n      return this._get('scenes', index);\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(index) {\n      return this._get('nodes', index);\n    }\n  }, {\n    key: \"getSkin\",\n    value: function getSkin(index) {\n      return this._get('skins', index);\n    }\n  }, {\n    key: \"getMesh\",\n    value: function getMesh(index) {\n      return this._get('meshes', index);\n    }\n  }, {\n    key: \"getMaterial\",\n    value: function getMaterial(index) {\n      return this._get('materials', index);\n    }\n  }, {\n    key: \"getAccessor\",\n    value: function getAccessor(index) {\n      return this._get('accessors', index);\n    }\n  }, {\n    key: \"getCamera\",\n    value: function getCamera(index) {\n      return null;\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture(index) {\n      return this._get('textures', index);\n    }\n  }, {\n    key: \"getSampler\",\n    value: function getSampler(index) {\n      return this._get('samplers', index);\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(index) {\n      return this._get('images', index);\n    }\n  }, {\n    key: \"getBufferView\",\n    value: function getBufferView(index) {\n      return this._get('bufferViews', index);\n    }\n  }, {\n    key: \"getBuffer\",\n    value: function getBuffer(index) {\n      return this._get('buffers', index);\n    }\n  }, {\n    key: \"_get\",\n    value: function _get(array, index) {\n      if (_typeof(index) === 'object') {\n        return index;\n      }\n\n      var object = this.json[array] && this.json[array][index];\n\n      if (!object) {\n        console.warn(\"glTF file error: Could not find \".concat(array, \"[\").concat(index, \"]\"));\n      }\n\n      return object;\n    }\n  }, {\n    key: \"_resolveScene\",\n    value: function _resolveScene(scene, index) {\n      var _this2 = this;\n\n      scene.id = scene.id || \"scene-\".concat(index);\n      scene.nodes = (scene.nodes || []).map(function (node) {\n        return _this2.getNode(node);\n      });\n      return scene;\n    }\n  }, {\n    key: \"_resolveNode\",\n    value: function _resolveNode(node, index) {\n      var _this3 = this;\n\n      node.id = node.id || \"node-\".concat(index);\n\n      if (node.children) {\n        node.children = node.children.map(function (child) {\n          return _this3.getNode(child);\n        });\n      }\n\n      if (node.mesh !== undefined) {\n        node.mesh = this.getMesh(node.mesh);\n      }\n\n      if (node.camera !== undefined) {\n        node.camera = this.getCamera(node.camera);\n      }\n\n      if (node.skin !== undefined) {\n        node.skin = this.getSkin(node.skin);\n      }\n\n      return node;\n    }\n  }, {\n    key: \"_resolveSkin\",\n    value: function _resolveSkin(skin, index) {\n      skin.id = skin.id || \"skin-\".concat(index);\n      skin.inverseBindMatrices = this.getAccessor(skin.inverseBindMatrices);\n      return skin;\n    }\n  }, {\n    key: \"_resolveMesh\",\n    value: function _resolveMesh(mesh, index) {\n      var _this4 = this;\n\n      mesh.id = mesh.id || \"mesh-\".concat(index);\n\n      if (mesh.primitives) {\n        mesh.primitives = mesh.primitives.map(function (primitive) {\n          primitive = _objectSpread({}, primitive);\n          var attributes = primitive.attributes;\n          primitive.attributes = {};\n\n          for (var attribute in attributes) {\n            primitive.attributes[attribute] = _this4.getAccessor(attributes[attribute]);\n          }\n\n          if (primitive.indices !== undefined) {\n            primitive.indices = _this4.getAccessor(primitive.indices);\n          }\n\n          if (primitive.material !== undefined) {\n            primitive.material = _this4.getMaterial(primitive.material);\n          }\n\n          return primitive;\n        });\n      }\n\n      return mesh;\n    }\n  }, {\n    key: \"_resolveMaterial\",\n    value: function _resolveMaterial(material, index) {\n      material.id = material.id || \"material-\".concat(index);\n\n      if (material.normalTexture) {\n        material.normalTexture = _objectSpread({}, material.normalTexture);\n        material.normalTexture.texture = this.getTexture(material.normalTexture.index);\n      }\n\n      if (material.occlusionTexture) {\n        material.occlustionTexture = _objectSpread({}, material.occlustionTexture);\n        material.occlusionTexture.texture = this.getTexture(material.occlusionTexture.index);\n      }\n\n      if (material.emissiveTexture) {\n        material.emmisiveTexture = _objectSpread({}, material.emmisiveTexture);\n        material.emissiveTexture.texture = this.getTexture(material.emissiveTexture.index);\n      }\n\n      if (material.pbrMetallicRoughness) {\n        material.pbrMetallicRoughness = _objectSpread({}, material.pbrMetallicRoughness);\n        var mr = material.pbrMetallicRoughness;\n\n        if (mr.baseColorTexture) {\n          mr.baseColorTexture = _objectSpread({}, mr.baseColorTexture);\n          mr.baseColorTexture.texture = this.getTexture(mr.baseColorTexture.index);\n        }\n\n        if (mr.metallicRoughnessTexture) {\n          mr.metallicRoughnessTexture = _objectSpread({}, mr.metallicRoughnessTexture);\n          mr.metallicRoughnessTexture.texture = this.getTexture(mr.metallicRoughnessTexture.index);\n        }\n      }\n\n      return material;\n    }\n  }, {\n    key: \"_resolveAccessor\",\n    value: function _resolveAccessor(accessor, index) {\n      accessor.id = accessor.id || \"accessor-\".concat(index);\n\n      if (accessor.bufferView !== undefined) {\n        accessor.bufferView = this.getBufferView(accessor.bufferView);\n      }\n\n      accessor.bytesPerComponent = getBytesFromComponentType(accessor.componentType);\n      accessor.components = getSizeFromAccessorType(accessor.type);\n      accessor.bytesPerElement = accessor.bytesPerComponent * accessor.components;\n\n      if (accessor.bufferView) {\n        var buffer = accessor.bufferView.buffer;\n\n        var _getAccessorArrayType = getAccessorArrayTypeAndLength(accessor, accessor.bufferView),\n            ArrayType = _getAccessorArrayType.ArrayType,\n            length = _getAccessorArrayType.length;\n\n        var byteOffset = (accessor.bufferView.byteOffset || 0) + buffer.byteOffset;\n        accessor.value = new ArrayType(buffer.arrayBuffer, byteOffset, length);\n      }\n\n      return accessor;\n    }\n  }, {\n    key: \"_resolveTexture\",\n    value: function _resolveTexture(texture, index) {\n      texture.id = texture.id || \"texture-\".concat(index);\n      texture.sampler = 'sampler' in texture ? this.getSampler(texture.sampler) : DEFAULT_SAMPLER;\n      texture.source = this.getImage(texture.source);\n      return texture;\n    }\n  }, {\n    key: \"_resolveSampler\",\n    value: function _resolveSampler(sampler, index) {\n      sampler.id = sampler.id || \"sampler-\".concat(index);\n      sampler.parameters = {};\n\n      for (var key in sampler) {\n        var glEnum = this._enumSamplerParameter(key);\n\n        if (glEnum !== undefined) {\n          sampler.parameters[glEnum] = sampler[key];\n        }\n      }\n\n      return sampler;\n    }\n  }, {\n    key: \"_enumSamplerParameter\",\n    value: function _enumSamplerParameter(key) {\n      return SAMPLER_PARAMETER_GLTF_TO_GL[key];\n    }\n  }, {\n    key: \"_resolveImage\",\n    value: function _resolveImage(image, index) {\n      image.id = image.id || \"image-\".concat(index);\n\n      if (image.bufferView !== undefined) {\n        image.bufferView = this.getBufferView(image.bufferView);\n      }\n\n      var preloadedImage = this.images[index];\n\n      if (preloadedImage) {\n        image.image = preloadedImage;\n      }\n\n      return image;\n    }\n  }, {\n    key: \"_resolveBufferView\",\n    value: function _resolveBufferView(bufferView, index) {\n      bufferView.id = bufferView.id || \"bufferView-\".concat(index);\n      var bufferIndex = bufferView.buffer;\n      bufferView.buffer = this.buffers[bufferIndex];\n      var arrayBuffer = this.buffers[bufferIndex].arrayBuffer;\n      var byteOffset = this.buffers[bufferIndex].byteOffset || 0;\n\n      if ('byteOffset' in bufferView) {\n        byteOffset += bufferView.byteOffset;\n      }\n\n      bufferView.data = new Uint8Array(arrayBuffer, byteOffset, bufferView.byteLength);\n      return bufferView;\n    }\n  }, {\n    key: \"_resolveCamera\",\n    value: function _resolveCamera(camera, index) {\n      camera.id = camera.id || \"camera-\".concat(index);\n\n      if (camera.perspective) {}\n\n      if (camera.orthographic) {}\n\n      return camera;\n    }\n  }]);\n\n  return GLTFPostProcessor;\n}();\n\nexport default function postProcessGLTF(gltf, options) {\n  return new GLTFPostProcessor().postProcess(gltf, options);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { ImageLoader } from '@loaders.gl/images';\nimport { parseJSON, getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nimport assert from './utils/assert';\nimport { resolveUrl } from './gltf-utils/resolve-url';\nimport { getTypedArrayForBufferView } from './gltf-utils/get-typed-array';\nimport { decodeExtensions } from './extensions/gltf-extensions';\nimport parseGLBSync, { isGLB } from './parse-glb';\nimport normalizeGLTFV1 from './normalize-gltf-v1';\nimport postProcessGLTF from './post-process-gltf';\nexport function isGLTF(arrayBuffer) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var dataView = new DataView(arrayBuffer);\n  var byteOffset = 0;\n  return isGLB(dataView, byteOffset);\n}\nexport function parseGLTF(_x, _x2) {\n  return _parseGLTF.apply(this, arguments);\n}\n\nfunction _parseGLTF() {\n  _parseGLTF = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(gltf, arrayBufferOrString) {\n    var byteOffset,\n        options,\n        context,\n        promises,\n        _promise,\n        promise,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            byteOffset = _args.length > 2 && _args[2] !== undefined ? _args[2] : 0;\n            options = _args.length > 3 ? _args[3] : undefined;\n            context = _args.length > 4 ? _args[4] : undefined;\n            parseGLTFContainerSync(gltf, arrayBufferOrString, byteOffset, options);\n            normalizeGLTFV1(gltf, {\n              normalize: options.gltf.normalize\n            });\n            promises = [];\n\n            if (options.gltf.loadImages) {\n              _promise = loadImages(gltf, options, context);\n              promises.push(_promise);\n            }\n\n            if (!options.gltf.loadBuffers) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.next = 10;\n            return loadBuffers(gltf, options, context);\n\n          case 10:\n            promise = decodeExtensions(gltf, options, context);\n            promises.push(promise);\n            _context.next = 14;\n            return Promise.all(promises);\n\n          case 14:\n            return _context.abrupt(\"return\", options.gltf.postProcess ? postProcessGLTF(gltf, options) : gltf);\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseGLTF.apply(this, arguments);\n}\n\nfunction parseGLTFContainerSync(gltf, data, byteOffset, options) {\n  if (options.uri) {\n    gltf.baseUri = options.uri;\n  }\n\n  if (data instanceof ArrayBuffer && !isGLB(data, byteOffset, options)) {\n    var textDecoder = new TextDecoder();\n    data = textDecoder.decode(data);\n  }\n\n  if (typeof data === 'string') {\n    gltf.json = parseJSON(data);\n  } else if (data instanceof ArrayBuffer) {\n    var glb = {};\n    byteOffset = parseGLBSync(glb, data, byteOffset, options);\n    assert(glb.type === 'glTF', \"Invalid GLB magic string \".concat(glb.type));\n    gltf._glb = glb;\n    gltf.json = glb.json;\n  } else {\n    assert(false, \"GLTF: must be ArrayBuffer or string\");\n  }\n\n  var buffers = gltf.json.buffers || [];\n  gltf.buffers = new Array(buffers.length).fill(null);\n\n  if (gltf._glb && gltf._glb.header.hasBinChunk) {\n    var binChunks = gltf._glb.binChunks;\n    gltf.buffers[0] = {\n      arrayBuffer: binChunks[0].arrayBuffer,\n      byteOffset: binChunks[0].byteOffset,\n      byteLength: binChunks[0].byteLength\n    };\n  }\n\n  var images = gltf.json.images || [];\n  gltf.images = new Array(images.length).fill({});\n}\n\nfunction loadBuffers(_x3, _x4, _x5) {\n  return _loadBuffers.apply(this, arguments);\n}\n\nfunction _loadBuffers() {\n  _loadBuffers = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(gltf, options, context) {\n    var i, buffer, fetch, uri, response, arrayBuffer;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            i = 0;\n\n          case 1:\n            if (!(i < gltf.json.buffers.length)) {\n              _context2.next = 18;\n              break;\n            }\n\n            buffer = gltf.json.buffers[i];\n\n            if (!buffer.uri) {\n              _context2.next = 15;\n              break;\n            }\n\n            fetch = context.fetch;\n            assert(fetch);\n            uri = resolveUrl(buffer.uri, options);\n            _context2.next = 9;\n            return fetch(uri);\n\n          case 9:\n            response = _context2.sent;\n            _context2.next = 12;\n            return response.arrayBuffer();\n\n          case 12:\n            arrayBuffer = _context2.sent;\n            gltf.buffers[i] = {\n              arrayBuffer: arrayBuffer,\n              byteOffset: 0,\n              byteLength: arrayBuffer.byteLength\n            };\n            delete buffer.uri;\n\n          case 15:\n            ++i;\n            _context2.next = 1;\n            break;\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadBuffers.apply(this, arguments);\n}\n\nfunction loadImages(_x6, _x7, _x8) {\n  return _loadImages.apply(this, arguments);\n}\n\nfunction _loadImages() {\n  _loadImages = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(gltf, options, context) {\n    var images, promises, i;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            images = gltf.json.images || [];\n            promises = [];\n\n            for (i = 0; i < images.length; ++i) {\n              promises.push(loadImage(gltf, images[i], i, options, context));\n            }\n\n            _context3.next = 5;\n            return Promise.all(promises);\n\n          case 5:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _loadImages.apply(this, arguments);\n}\n\nfunction loadImage(_x9, _x10, _x11, _x12, _x13) {\n  return _loadImage.apply(this, arguments);\n}\n\nfunction _loadImage() {\n  _loadImage = _asyncToGenerator(_regeneratorRuntime.mark(function _callee4(gltf, image, i, options, context) {\n    var fetch, parse, arrayBuffer, uri, response, array, parsedImage;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            fetch = context.fetch, parse = context.parse;\n\n            if (!image.uri) {\n              _context4.next = 9;\n              break;\n            }\n\n            uri = resolveUrl(image.uri, options);\n            _context4.next = 5;\n            return fetch(uri);\n\n          case 5:\n            response = _context4.sent;\n            _context4.next = 8;\n            return response.arrayBuffer();\n\n          case 8:\n            arrayBuffer = _context4.sent;\n\n          case 9:\n            if (Number.isFinite(image.bufferView)) {\n              array = getTypedArrayForBufferView(gltf.json, gltf.buffers, image.bufferView);\n              arrayBuffer = getZeroOffsetArrayBuffer(array.buffer, array.byteOffset, array.byteLength);\n            }\n\n            assert(arrayBuffer, 'glTF image has no data');\n            _context4.next = 13;\n            return parse(arrayBuffer, ImageLoader, {}, context);\n\n          case 13:\n            parsedImage = _context4.sent;\n            gltf.images[i] = parsedImage;\n\n          case 15:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _loadImage.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { parseGLTF } from './lib/parse-gltf';\nvar VERSION = typeof \"2.3.0-alpha.12\" !== 'undefined' ? \"2.3.0-alpha.12\" : 'latest';\nvar GLTFLoader = {\n  id: 'gltf',\n  name: 'glTF',\n  version: VERSION,\n  extensions: ['gltf', 'glb'],\n  mimeTypes: ['model/gltf+json', 'model/gltf-binary'],\n  text: true,\n  binary: true,\n  tests: ['glTF'],\n  parse: parse,\n  options: {\n    gltf: {\n      normalize: false,\n      loadBuffers: true,\n      loadImages: true,\n      decompressMeshes: true,\n      postProcess: true\n    },\n    uri: '',\n    log: console\n  },\n  deprecatedOptions: {\n    fetchImages: 'gltf.loadImages',\n    createImages: 'gltf.loadImages',\n    decompress: 'gltf.decompressMeshes',\n    postProcess: 'gltf.postProcess',\n    gltf: {\n      decompress: 'gltf.decompressMeshes'\n    }\n  }\n};\nexport default GLTFLoader;\nexport function parse(_x) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer) {\n    var options,\n        context,\n        _options,\n        _options$byteOffset,\n        byteOffset,\n        gltf,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            context = _args.length > 2 ? _args[2] : undefined;\n            options = _objectSpread(_objectSpread({}, GLTFLoader.options), options);\n            options.gltf = _objectSpread(_objectSpread({}, GLTFLoader.options.gltf), options.gltf);\n            addDeprecatedGLTFOptions(options);\n            _options = options, _options$byteOffset = _options.byteOffset, byteOffset = _options$byteOffset === void 0 ? 0 : _options$byteOffset;\n            gltf = {};\n            _context.next = 9;\n            return parseGLTF(gltf, arrayBuffer, byteOffset, options, context);\n\n          case 9:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nfunction addDeprecatedGLTFOptions(options) {\n  if ('fetchImages' in options) {\n    options.gltf.loadImages = options.fetchImages;\n  }\n\n  if ('createImages' in options) {\n    options.gltf.loadImages = options.createImages;\n  }\n\n  if ('fetchLinkedResources' in options) {\n    options.gltf.fetchBuffers = options.fetchLinkedResources;\n  }\n\n  if ('decompress' in options) {\n    options.gltf.decompressMeshes = options.decompress;\n  }\n\n  if ('decompress' in options.gltf) {\n    options.gltf.decompressMeshes = options.gltf.decompress;\n  }\n\n  if ('postProcess' in options) {\n    options.gltf.postProcess = options.postProcess;\n  }\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { GLTFLoader } from '@loaders.gl/gltf';\nimport { getZeroOffsetArrayBuffer } from '@loaders.gl/loader-utils';\nexport var GLTF_FORMAT = {\n  URI: 0,\n  EMBEDDED: 1\n};\nexport function parse3DTileGLTFViewSync(tile, arrayBuffer, byteOffset) {\n  tile.rotateYtoZ = true;\n  var gltfByteLength = tile.byteOffset + tile.byteLength - byteOffset;\n\n  if (gltfByteLength === 0) {\n    throw new Error('glTF byte length must be greater than 0.');\n  }\n\n  tile.gltfArrayBuffer = getZeroOffsetArrayBuffer(arrayBuffer, byteOffset, gltfByteLength);\n  tile.gltfByteOffset = 0;\n  tile.gltfByteLength = gltfByteLength;\n\n  if (byteOffset % 4 === 0) {} else {\n    console.warn(\"\".concat(tile.type, \": embedded glb is not aligned to a 4-byte boundary.\"));\n  }\n\n  return tile.byteOffset + tile.byteLength;\n}\nexport function extractGLTF(_x, _x2, _x3, _x4) {\n  return _extractGLTF.apply(this, arguments);\n}\n\nfunction _extractGLTF() {\n  _extractGLTF = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tile, gltfFormat, options, context) {\n    var tile3DOptions, parse, fetch;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            tile3DOptions = options['3d-tiles'] || {};\n            extractGLTFBufferOrURL(tile, gltfFormat, options);\n\n            if (!tile3DOptions.loadGLTF) {\n              _context.next = 16;\n              break;\n            }\n\n            parse = context.parse, fetch = context.fetch;\n\n            if (!tile.gltfUrl) {\n              _context.next = 9;\n              break;\n            }\n\n            _context.next = 7;\n            return fetch(tile.gltfUrl, options);\n\n          case 7:\n            tile.gltfArrayBuffer = _context.sent;\n            tile.gltfByteOffset = 0;\n\n          case 9:\n            if (!tile.gltfArrayBuffer) {\n              _context.next = 16;\n              break;\n            }\n\n            _context.next = 12;\n            return parse(tile.gltfArrayBuffer, GLTFLoader, options, context);\n\n          case 12:\n            tile.gltf = _context.sent;\n            delete tile.gltfArrayBuffer;\n            delete tile.gltfByteOffset;\n            delete tile.gltfByteLength;\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _extractGLTF.apply(this, arguments);\n}\n\nfunction extractGLTFBufferOrURL(tile, gltfFormat, options) {\n  switch (gltfFormat) {\n    case GLTF_FORMAT.URI:\n      var gltfUrlBytes = new Uint8Array(tile.gltfArrayBuffer, tile.gltfByteOffset);\n      var textDecoder = new TextDecoder();\n      var gltfUrl = textDecoder.decode(gltfUrlBytes);\n      tile.gltfUrl = gltfUrl.replace(/[\\s\\0]+$/, '');\n      delete tile.gltfArrayBuffer;\n      delete tile.gltfByteOffset;\n      delete tile.gltfByteLength;\n      break;\n\n    case GLTF_FORMAT.EMBEDDED:\n      break;\n\n    default:\n      throw new Error(\"b3dm: Illegal glTF format field\");\n  }\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { GL } from '@loaders.gl/math';\nimport Tile3DFeatureTable from '../classes/tile-3d-feature-table';\nimport { parse3DTileHeaderSync } from './helpers/parse-3d-tile-header';\nimport { parse3DTileTablesHeaderSync, parse3DTileTablesSync } from './helpers/parse-3d-tile-tables';\nimport { parse3DTileGLTFViewSync, extractGLTF, GLTF_FORMAT } from './helpers/parse-3d-tile-gltf-view';\nexport function parseBatchedModel3DTile(_x, _x2, _x3, _x4, _x5) {\n  return _parseBatchedModel3DTile.apply(this, arguments);\n}\n\nfunction _parseBatchedModel3DTile() {\n  _parseBatchedModel3DTile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tile, arrayBuffer, byteOffset, options, context) {\n    var _ref, extensions;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            byteOffset = parseBatchedModel(tile, arrayBuffer, byteOffset, options, context);\n            _context.next = 3;\n            return extractGLTF(tile, GLTF_FORMAT.EMBEDDED, options, context);\n\n          case 3:\n            _ref = tile.gltf || {}, extensions = _ref.extensions;\n\n            if (extensions && extensions.CESIUM_RTC) {\n              tile.rtcCenter = extensions.CESIUM_RTC.center;\n            }\n\n            return _context.abrupt(\"return\", byteOffset);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseBatchedModel3DTile.apply(this, arguments);\n}\n\nfunction parseBatchedModel(tile, arrayBuffer, byteOffset, options, context) {\n  byteOffset = parse3DTileHeaderSync(tile, arrayBuffer, byteOffset);\n  byteOffset = parse3DTileTablesHeaderSync(tile, arrayBuffer, byteOffset);\n  byteOffset = parse3DTileTablesSync(tile, arrayBuffer, byteOffset, options);\n  byteOffset = parse3DTileGLTFViewSync(tile, arrayBuffer, byteOffset);\n  var featureTable = new Tile3DFeatureTable(tile.featureTableJson, tile.featureTableBinary);\n  tile.rtcCenter = featureTable.getGlobalProperty('RTC_CENTER', GL.FLOAT, 3);\n  return byteOffset;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Vector3, Matrix3, Matrix4, Quaternion } from '@math.gl/core';\nimport { Ellipsoid } from '@math.gl/geospatial';\nimport { GL } from '@loaders.gl/math';\nimport Tile3DFeatureTable from '../classes/tile-3d-feature-table';\nimport Tile3DBatchTable from '../classes/tile-3d-batch-table';\nimport { parse3DTileHeaderSync } from './helpers/parse-3d-tile-header';\nimport { parse3DTileTablesHeaderSync, parse3DTileTablesSync } from './helpers/parse-3d-tile-tables';\nimport { parse3DTileGLTFViewSync, extractGLTF } from './helpers/parse-3d-tile-gltf-view';\nexport function parseInstancedModel3DTile(_x, _x2, _x3, _x4, _x5) {\n  return _parseInstancedModel3DTile.apply(this, arguments);\n}\n\nfunction _parseInstancedModel3DTile() {\n  _parseInstancedModel3DTile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tile, arrayBuffer, byteOffset, options, context) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            byteOffset = parseInstancedModel(tile, arrayBuffer, byteOffset, options, context);\n            _context.next = 3;\n            return extractGLTF(tile, tile.gltfFormat, options, context);\n\n          case 3:\n            return _context.abrupt(\"return\", byteOffset);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseInstancedModel3DTile.apply(this, arguments);\n}\n\nfunction parseInstancedModel(tile, arrayBuffer, byteOffset, options, context) {\n  byteOffset = parse3DTileHeaderSync(tile, arrayBuffer, byteOffset);\n\n  if (tile.version !== 1) {\n    throw new Error(\"Instanced 3D Model version \".concat(tile.version, \" is not supported\"));\n  }\n\n  byteOffset = parse3DTileTablesHeaderSync(tile, arrayBuffer, byteOffset);\n  var view = new DataView(arrayBuffer);\n  tile.gltfFormat = view.getUint32(byteOffset, true);\n  byteOffset += 4;\n  byteOffset = parse3DTileTablesSync(tile, arrayBuffer, byteOffset, options);\n  byteOffset = parse3DTileGLTFViewSync(tile, arrayBuffer, byteOffset);\n\n  if (tile.featureTableJsonByteLength === 0) {\n    throw new Error('i3dm parser: featureTableJsonByteLength is zero.');\n  }\n\n  var featureTable = new Tile3DFeatureTable(tile.featureTableJson, tile.featureTableBinary);\n  var instancesLength = featureTable.getGlobalProperty('INSTANCES_LENGTH');\n  featureTable.featuresLength = instancesLength;\n\n  if (!Number.isFinite(instancesLength)) {\n    throw new Error('i3dm parser: INSTANCES_LENGTH must be defined');\n  }\n\n  tile.eastNorthUp = featureTable.getGlobalProperty('EAST_NORTH_UP');\n  tile.rtcCenter = featureTable.getGlobalProperty('RTC_CENTER', GL.FLOAT, 3);\n  var batchTable = new Tile3DBatchTable(tile.batchTableJson, tile.batchTableBinary, instancesLength);\n  extractInstancedAttributes(tile, featureTable, batchTable, instancesLength);\n  return byteOffset;\n}\n\nfunction extractInstancedAttributes(tile, featureTable, batchTable, instancesLength) {\n  var collectionOptions = {\n    instances: new Array(instancesLength),\n    batchTable: tile._batchTable,\n    cull: false,\n    url: undefined,\n    gltf: undefined,\n    basePath: undefined,\n    incrementallyLoadTextures: false,\n    forwardAxis: [1, 0, 0]\n  };\n  var instances = collectionOptions.instances;\n  var instancePosition = new Vector3();\n  var instanceNormalRight = new Vector3();\n  var instanceNormalUp = new Vector3();\n  var instanceNormalForward = new Vector3();\n  var instanceRotation = new Matrix3();\n  var instanceQuaternion = new Quaternion();\n  var instanceScale = new Vector3();\n  var instanceTranslationRotationScale = {};\n  var instanceTransform = new Matrix4();\n  var scratch1 = [];\n  var scratch2 = [];\n  var scratchVector1 = new Vector3();\n  var scratchVector2 = new Vector3();\n\n  for (var i = 0; i < instancesLength; i++) {\n    var position = void 0;\n\n    if (featureTable.hasProperty('POSITION')) {\n      position = featureTable.getProperty('POSITION', GL.FLOAT, 3, i, instancePosition);\n    } else if (featureTable.hasProperty('POSITION_QUANTIZED')) {\n      position = featureTable.getProperty('POSITION_QUANTIZED', GL.UNSIGNED_SHORT, 3, i, instancePosition);\n      var quantizedVolumeOffset = featureTable.getGlobalProperty('QUANTIZED_VOLUME_OFFSET', GL.FLOAT, 3, scratchVector1);\n\n      if (!quantizedVolumeOffset) {\n        throw new Error('i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.');\n      }\n\n      var quantizedVolumeScale = featureTable.getGlobalProperty('QUANTIZED_VOLUME_SCALE', GL.FLOAT, 3, scratchVector2);\n\n      if (!quantizedVolumeScale) {\n        throw new Error('i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.');\n      }\n\n      var MAX_UNSIGNED_SHORT = 65535.0;\n\n      for (var j = 0; j < 3; j++) {\n        position[j] = position[j] / MAX_UNSIGNED_SHORT * quantizedVolumeScale[j] + quantizedVolumeOffset[j];\n      }\n    }\n\n    if (!position) {\n      throw new Error('i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.');\n    }\n\n    instancePosition.copy(position);\n    instanceTranslationRotationScale.translation = instancePosition;\n    tile.normalUp = featureTable.getProperty('NORMAL_UP', GL.FLOAT, 3, i, scratch1);\n    tile.normalRight = featureTable.getProperty('NORMAL_RIGHT', GL.FLOAT, 3, i, scratch2);\n    var hasCustomOrientation = false;\n\n    if (tile.normalUp) {\n      if (!tile.normalRight) {\n        throw new Error('i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.');\n      }\n\n      tile.hasCustomOrientation = true;\n    } else {\n      tile.octNormalUp = featureTable.getProperty('NORMAL_UP_OCT32P', GL.UNSIGNED_SHORT, 2, scratch1);\n      tile.octNormalRight = featureTable.getProperty('NORMAL_RIGHT_OCT32P', GL.UNSIGNED_SHORT, 2, scratch2);\n\n      if (tile.octNormalUp) {\n        if (!tile.octNormalRight) {\n          throw new Error('i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P');\n        }\n\n        throw new Error('i3dm: oct-encoded orientation not implemented');\n      } else if (tile.eastNorthUp) {\n        Ellipsoid.WGS84.eastNorthUpToFixedFrame(instancePosition, instanceTransform);\n        instanceTransform.getRotationMatrix3(instanceRotation);\n      } else {\n        instanceRotation.identity();\n      }\n    }\n\n    if (hasCustomOrientation) {\n      instanceNormalForward.copy(instanceNormalRight).cross(instanceNormalUp).normalize();\n      instanceRotation.setColumn(0, instanceNormalRight);\n      instanceRotation.setColumn(1, instanceNormalUp);\n      instanceRotation.setColumn(2, instanceNormalForward);\n    }\n\n    instanceQuaternion.fromMatrix3(instanceRotation);\n    instanceTranslationRotationScale.rotation = instanceQuaternion;\n    instanceScale.set(1.0, 1.0, 1.0);\n    var scale = featureTable.getProperty('SCALE', GL.FLOAT, 1, i);\n\n    if (Number.isFinite(scale)) {\n      instanceScale.multiplyByScalar(scale);\n    }\n\n    var nonUniformScale = featureTable.getProperty('SCALE_NON_UNIFORM', GL.FLOAT, 3, i, scratch1);\n\n    if (nonUniformScale) {\n      instanceScale.scale(nonUniformScale);\n    }\n\n    instanceTranslationRotationScale.scale = instanceScale;\n    var batchId = featureTable.getProperty('BATCH_ID', GL.UNSIGNED_SHORT, 1, i);\n\n    if (batchId === undefined) {\n      batchId = i;\n    }\n\n    var rotationMatrix = new Matrix4().fromQuaternion(instanceTranslationRotationScale.rotation);\n    instanceTransform.identity();\n    instanceTransform.translate(instanceTranslationRotationScale.translation);\n    instanceTransform.multiplyRight(rotationMatrix);\n    instanceTransform.scale(instanceTranslationRotationScale.scale);\n    var modelMatrix = instanceTransform.clone();\n    instances[i] = {\n      modelMatrix: modelMatrix,\n      batchId: batchId\n    };\n  }\n\n  tile.instances = instances;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { parse3DTileHeaderSync } from './helpers/parse-3d-tile-header';\nexport function parseComposite3DTile(_x, _x2, _x3, _x4, _x5, _x6) {\n  return _parseComposite3DTile.apply(this, arguments);\n}\n\nfunction _parseComposite3DTile() {\n  _parseComposite3DTile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tile, arrayBuffer, byteOffset, options, context, parse3DTile) {\n    var view, subtile;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            byteOffset = parse3DTileHeaderSync(tile, arrayBuffer, byteOffset);\n            view = new DataView(arrayBuffer);\n            tile.tilesLength = view.getUint32(byteOffset, true);\n            byteOffset += 4;\n            tile.tiles = [];\n\n          case 5:\n            if (!(tile.tiles.length < tile.tilesLength && tile.byteLength - byteOffset > 12)) {\n              _context.next = 13;\n              break;\n            }\n\n            subtile = {};\n            tile.tiles.push(subtile);\n            _context.next = 10;\n            return parse3DTile(arrayBuffer, byteOffset, options, context, subtile);\n\n          case 10:\n            byteOffset = _context.sent;\n            _context.next = 5;\n            break;\n\n          case 13:\n            return _context.abrupt(\"return\", byteOffset);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseComposite3DTile.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { TILE3D_TYPE } from '../constants';\nimport { getMagicString } from './helpers/parse-utils';\nimport { parsePointCloud3DTile } from './parse-3d-tile-point-cloud';\nimport { parseBatchedModel3DTile } from './parse-3d-tile-batched-model';\nimport { parseInstancedModel3DTile } from './parse-3d-tile-instanced-model';\nimport { parseComposite3DTile } from './parse-3d-tile-composite';\nexport function parse3DTile(_x) {\n  return _parse3DTile.apply(this, arguments);\n}\n\nfunction _parse3DTile() {\n  _parse3DTile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer) {\n    var byteOffset,\n        options,\n        context,\n        tile,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            byteOffset = _args.length > 1 && _args[1] !== undefined ? _args[1] : 0;\n            options = _args.length > 2 ? _args[2] : undefined;\n            context = _args.length > 3 ? _args[3] : undefined;\n            tile = _args.length > 4 && _args[4] !== undefined ? _args[4] : {};\n            tile.byteOffset = byteOffset;\n            tile.type = getMagicString(arrayBuffer, byteOffset);\n            _context.t0 = tile.type;\n            _context.next = _context.t0 === TILE3D_TYPE.COMPOSITE ? 9 : _context.t0 === TILE3D_TYPE.BATCHED_3D_MODEL ? 12 : _context.t0 === TILE3D_TYPE.INSTANCED_3D_MODEL ? 15 : _context.t0 === TILE3D_TYPE.POINT_CLOUD ? 18 : 21;\n            break;\n\n          case 9:\n            _context.next = 11;\n            return parseComposite3DTile(tile, arrayBuffer, byteOffset, options, context, parse3DTile);\n\n          case 11:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 12:\n            _context.next = 14;\n            return parseBatchedModel3DTile(tile, arrayBuffer, byteOffset, options, context);\n\n          case 14:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 15:\n            _context.next = 17;\n            return parseInstancedModel3DTile(tile, arrayBuffer, byteOffset, options, context);\n\n          case 17:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 18:\n            _context.next = 20;\n            return parsePointCloud3DTile(tile, arrayBuffer, byteOffset, options, context);\n\n          case 20:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 21:\n            throw new Error(\"3DTileLoader: unknown type \".concat(tile.type));\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parse3DTile.apply(this, arguments);\n}","function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { LOD_METRIC_TYPE, TILE_REFINEMENT, TILE_TYPE } from '@loaders.gl/tiles';\n\nfunction getTileType(tile) {\n  if (!tile.contentUrl) {\n    return TILE_TYPE.EMPTY;\n  }\n\n  var contentUrl = tile.contentUrl;\n  var fileExtension = contentUrl.split('.').pop();\n\n  switch (fileExtension) {\n    case 'pnts':\n      return TILE_TYPE.POINTCLOUD;\n\n    case 'i3dm':\n    case 'b3dm':\n      return TILE_TYPE.SCENEGRAPH;\n\n    default:\n      return fileExtension;\n  }\n}\n\nfunction getRefine(refine) {\n  switch (refine) {\n    case 'REPLACE':\n    case 'replace':\n      return TILE_REFINEMENT.REPLACE;\n\n    case 'ADD':\n    case 'add':\n      return TILE_REFINEMENT.ADD;\n\n    default:\n      return refine;\n  }\n}\n\nexport function normalizeTileData(tile, options) {\n  if (tile.content) {\n    var contentUri = tile.content.uri || tile.content.url;\n    tile.contentUrl = \"\".concat(options.basePath, \"/\").concat(contentUri);\n  }\n\n  tile.id = tile.contentUrl;\n  tile.lodMetricType = LOD_METRIC_TYPE.GEOMETRIC_ERROR;\n  tile.lodMetricValue = tile.geometricError;\n  tile.transformMatrix = tile.transform;\n  tile.type = getTileType(tile);\n  tile.refine = getRefine(tile.refine);\n  return tile;\n}\nexport function normalizeTileHeaders(tileset) {\n  var basePath = tileset.basePath;\n  var root = normalizeTileData(tileset.root, tileset);\n  var stack = [];\n  stack.push(root);\n\n  while (stack.length > 0) {\n    var tile = stack.pop();\n    var children = tile.children || [];\n\n    var _iterator = _createForOfIteratorHelper(children),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var childHeader = _step.value;\n        normalizeTileData(childHeader, {\n          basePath: basePath\n        });\n        stack.push(childHeader);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n\n  return root;\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { path } from '@loaders.gl/loader-utils';\nimport { TILESET_TYPE, LOD_METRIC_TYPE } from '@loaders.gl/tiles';\nimport { parse3DTile } from './lib/parsers/parse-3d-tile';\nimport { normalizeTileHeaders } from './lib/parsers/parse-3d-tile-header';\nvar VERSION = typeof \"2.3.0-alpha.12\" !== 'undefined' ? \"2.3.0-alpha.12\" : 'latest';\n\nfunction getBaseUri(tileset) {\n  return path.dirname(tileset.url);\n}\n\nfunction parseTile(_x, _x2, _x3) {\n  return _parseTile.apply(this, arguments);\n}\n\nfunction _parseTile() {\n  _parseTile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(arrayBuffer, options, context) {\n    var tile, byteOffset;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            tile = {};\n            tile.content = tile.content || {};\n            byteOffset = 0;\n            _context.next = 5;\n            return parse3DTile(arrayBuffer, byteOffset, options, context, tile.content);\n\n          case 5:\n            return _context.abrupt(\"return\", tile.content);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _parseTile.apply(this, arguments);\n}\n\nfunction parseTileset(_x4, _x5, _x6) {\n  return _parseTileset.apply(this, arguments);\n}\n\nfunction _parseTileset() {\n  _parseTileset = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(data, options, context) {\n    var tilesetJson;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            tilesetJson = JSON.parse(new TextDecoder().decode(data));\n            tilesetJson.loader = options.loader || Tiles3DLoader;\n            tilesetJson.url = context.url;\n            tilesetJson.basePath = getBaseUri(tilesetJson);\n            tilesetJson.root = normalizeTileHeaders(tilesetJson);\n            tilesetJson.type = TILESET_TYPE.TILES3D;\n            tilesetJson.lodMetricType = LOD_METRIC_TYPE.GEOMETRIC_ERROR;\n            tilesetJson.lodMetricValue = tilesetJson.root.lodMetricValue;\n            return _context2.abrupt(\"return\", tilesetJson);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _parseTileset.apply(this, arguments);\n}\n\nfunction parse(_x7, _x8, _x9, _x10) {\n  return _parse.apply(this, arguments);\n}\n\nfunction _parse() {\n  _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(data, options, context, loader) {\n    var loaderOptions, isTileset;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            loaderOptions = options['3d-tiles'] || {};\n\n            if (loaderOptions.isTileset === 'auto') {\n              isTileset = context.url && context.url.indexOf('.json') !== -1;\n            } else {\n              isTileset = loaderOptions.isTileset;\n            }\n\n            if (!isTileset) {\n              _context3.next = 8;\n              break;\n            }\n\n            _context3.next = 5;\n            return parseTileset(data, options, context);\n\n          case 5:\n            data = _context3.sent;\n            _context3.next = 11;\n            break;\n\n          case 8:\n            _context3.next = 10;\n            return parseTile(data, options, context);\n\n          case 10:\n            data = _context3.sent;\n\n          case 11:\n            return _context3.abrupt(\"return\", data);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _parse.apply(this, arguments);\n}\n\nvar Tiles3DLoader = {\n  id: '3d-tiles',\n  name: '3D Tiles',\n  version: VERSION,\n  extensions: ['cmpt', 'pnts', 'b3dm', 'i3dm'],\n  mimeTypes: ['application/octet-stream'],\n  tests: ['cmpt', 'pnts', 'b3dm', 'i3dm'],\n  parse: parse,\n  options: {\n    '3d-tiles': {\n      loadGLTF: true,\n      decodeQuantizedPositions: false,\n      isTileset: 'auto',\n      tile: null,\n      tileset: null\n    }\n  }\n};\nexport default Tiles3DLoader;","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport { Vector3 } from 'math.gl';\nimport { Geometry } from '@luma.gl/core';\nimport { COORDINATE_SYSTEM, CompositeLayer } from '@deck.gl/core';\nimport { PointCloudLayer } from '@deck.gl/layers';\nimport { ScenegraphLayer, SimpleMeshLayer } from '@deck.gl/mesh-layers';\nimport { log } from '@deck.gl/core';\nimport { load } from '@loaders.gl/core';\nimport { Tileset3D, TILE_TYPE } from '@loaders.gl/tiles';\nimport { Tiles3DLoader } from '@loaders.gl/3d-tiles';\nvar scratchOffset = new Vector3();\nvar defaultProps = {\n  getPointColor: [0, 0, 0],\n  pointSize: 1.0,\n  data: null,\n  loadOptions: {},\n  loader: Tiles3DLoader,\n  onTilesetLoad: function onTilesetLoad(tileset3d) {},\n  onTileLoad: function onTileLoad(tileHeader) {},\n  onTileUnload: function onTileUnload(tileHeader) {},\n  onTileError: function onTileError(tile, message, url) {}\n};\n\nvar Tile3DLayer = function (_CompositeLayer) {\n  _inherits(Tile3DLayer, _CompositeLayer);\n\n  function Tile3DLayer() {\n    _classCallCheck(this, Tile3DLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Tile3DLayer).apply(this, arguments));\n  }\n\n  _createClass(Tile3DLayer, [{\n    key: \"initializeState\",\n    value: function initializeState() {\n      if ('onTileLoadFail' in this.props) {\n        log.removed('onTileLoadFail', 'onTileError')();\n      }\n\n      this.state = {\n        layerMap: {},\n        tileset3d: null\n      };\n    }\n  }, {\n    key: \"shouldUpdateState\",\n    value: function shouldUpdateState(_ref) {\n      var changeFlags = _ref.changeFlags;\n      return changeFlags.somethingChanged;\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref2) {\n      var props = _ref2.props,\n          oldProps = _ref2.oldProps,\n          changeFlags = _ref2.changeFlags;\n\n      if (props.data && props.data !== oldProps.data) {\n        this._loadTileset(props.data);\n      }\n\n      if (changeFlags.viewportChanged) {\n        var tileset3d = this.state.tileset3d;\n\n        this._updateTileset(tileset3d);\n      }\n    }\n  }, {\n    key: \"getPickingInfo\",\n    value: function getPickingInfo(_ref3) {\n      var info = _ref3.info,\n          sourceLayer = _ref3.sourceLayer;\n      var layerMap = this.state.layerMap;\n      var layerId = sourceLayer && sourceLayer.id;\n\n      if (layerId) {\n        var substr = layerId.substring(this.id.length + 1);\n        var tileId = substr.substring(substr.indexOf('-') + 1);\n        info.object = layerMap[tileId] && layerMap[tileId].tile;\n      }\n\n      return info;\n    }\n  }, {\n    key: \"_loadTileset\",\n    value: function () {\n      var _loadTileset2 = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tilesetUrl) {\n        var _this$props, loader, loadOptions, options, preloadOptions, tilesetJson, tileset3d;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$props = this.props, loader = _this$props.loader, loadOptions = _this$props.loadOptions;\n                options = _objectSpread({}, loadOptions);\n\n                if (!loader.preload) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.next = 5;\n                return loader.preload(tilesetUrl, loadOptions);\n\n              case 5:\n                preloadOptions = _context.sent;\n                Object.assign(options, preloadOptions);\n\n              case 7:\n                _context.next = 9;\n                return load(tilesetUrl, loader, options);\n\n              case 9:\n                tilesetJson = _context.sent;\n                tileset3d = new Tileset3D(tilesetJson, _objectSpread({\n                  onTileLoad: this._onTileLoad.bind(this),\n                  onTileUnload: this._onTileUnload.bind(this),\n                  onTileLoadFail: this.props.onTileError\n                }, options));\n                this.setState({\n                  tileset3d: tileset3d,\n                  layerMap: {}\n                });\n\n                this._updateTileset(tileset3d);\n\n                this.props.onTilesetLoad(tileset3d);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _loadTileset(_x) {\n        return _loadTileset2.apply(this, arguments);\n      }\n\n      return _loadTileset;\n    }()\n  }, {\n    key: \"_onTileLoad\",\n    value: function _onTileLoad(tileHeader) {\n      this.props.onTileLoad(tileHeader);\n\n      this._updateTileset(this.state.tileset3d);\n\n      this.setNeedsUpdate();\n    }\n  }, {\n    key: \"_onTileUnload\",\n    value: function _onTileUnload(tileHeader) {\n      delete this.state.layerMap[tileHeader.id];\n      this.props.onTileUnload(tileHeader);\n    }\n  }, {\n    key: \"_updateTileset\",\n    value: function _updateTileset(tileset3d) {\n      var _this$context = this.context,\n          timeline = _this$context.timeline,\n          viewport = _this$context.viewport;\n\n      if (!timeline || !viewport || !tileset3d) {\n        return;\n      }\n\n      var frameNumber = tileset3d.update(viewport);\n      var tilesetChanged = this.state.frameNumber !== frameNumber;\n\n      if (tilesetChanged) {\n        this.setState({\n          frameNumber: frameNumber\n        });\n      }\n    }\n  }, {\n    key: \"_create3DTileLayer\",\n    value: function _create3DTileLayer(tileHeader) {\n      if (!tileHeader.content) {\n        return null;\n      }\n\n      switch (tileHeader.type) {\n        case TILE_TYPE.POINTCLOUD:\n          return this._createPointCloudTileLayer(tileHeader);\n\n        case TILE_TYPE.SCENEGRAPH:\n          return this._create3DModelTileLayer(tileHeader);\n\n        case TILE_TYPE.MESH:\n          return this._createSimpleMeshLayer(tileHeader);\n\n        default:\n          throw new Error(\"Tile3DLayer: Failed to render layer of type \".concat(tileHeader.content.type));\n      }\n    }\n  }, {\n    key: \"_createPointCloudTileLayer\",\n    value: function _createPointCloudTileLayer(tileHeader) {\n      var _tileHeader$content = tileHeader.content,\n          attributes = _tileHeader$content.attributes,\n          pointCount = _tileHeader$content.pointCount,\n          constantRGBA = _tileHeader$content.constantRGBA,\n          cartographicOrigin = _tileHeader$content.cartographicOrigin,\n          modelMatrix = _tileHeader$content.modelMatrix;\n      var positions = attributes.positions,\n          normals = attributes.normals,\n          colors = attributes.colors;\n\n      if (!positions) {\n        return null;\n      }\n\n      var _this$props2 = this.props,\n          pointSize = _this$props2.pointSize,\n          getPointColor = _this$props2.getPointColor;\n      var SubLayerClass = this.getSubLayerClass('pointcloud', PointCloudLayer);\n      return new SubLayerClass({\n        pointSize: pointSize\n      }, this.getSubLayerProps({\n        id: 'pointcloud'\n      }), {\n        id: \"\".concat(this.id, \"-pointcloud-\").concat(tileHeader.id),\n        data: {\n          header: {\n            vertexCount: pointCount\n          },\n          attributes: {\n            POSITION: positions,\n            NORMAL: normals,\n            COLOR_0: colors\n          }\n        },\n        coordinateSystem: COORDINATE_SYSTEM.METER_OFFSETS,\n        coordinateOrigin: cartographicOrigin,\n        modelMatrix: modelMatrix,\n        getColor: constantRGBA || getPointColor\n      });\n    }\n  }, {\n    key: \"_create3DModelTileLayer\",\n    value: function _create3DModelTileLayer(tileHeader) {\n      var _tileHeader$content2 = tileHeader.content,\n          gltf = _tileHeader$content2.gltf,\n          instances = _tileHeader$content2.instances,\n          cartographicOrigin = _tileHeader$content2.cartographicOrigin,\n          modelMatrix = _tileHeader$content2.modelMatrix;\n      var SubLayerClass = this.getSubLayerClass('scenegraph', ScenegraphLayer);\n      return new SubLayerClass({\n        _lighting: 'pbr'\n      }, this.getSubLayerProps({\n        id: 'scenegraph'\n      }), {\n        id: \"\".concat(this.id, \"-scenegraph-\").concat(tileHeader.id),\n        data: instances || [{}],\n        scenegraph: gltf,\n        coordinateSystem: COORDINATE_SYSTEM.METER_OFFSETS,\n        coordinateOrigin: cartographicOrigin,\n        modelMatrix: modelMatrix,\n        getTransformMatrix: function getTransformMatrix(instance) {\n          return instance.modelMatrix;\n        },\n        getPosition: function getPosition(instance) {\n          return [0, 0, 0];\n        }\n      });\n    }\n  }, {\n    key: \"_createSimpleMeshLayer\",\n    value: function _createSimpleMeshLayer(tileHeader) {\n      var content = tileHeader.content;\n      var attributes = content.attributes,\n          modelMatrix = content.modelMatrix,\n          cartographicOrigin = content.cartographicOrigin,\n          texture = content.texture;\n      var normals = attributes.normals,\n          texCoords = attributes.texCoords;\n      var positions = new Float32Array(attributes.positions.value.length);\n\n      for (var i = 0; i < positions.length; i += 3) {\n        scratchOffset.copy(attributes.positions.value.subarray(i, i + 3));\n        positions.set(scratchOffset, i);\n      }\n\n      var geometry = new Geometry({\n        drawMode: 4,\n        attributes: {\n          positions: positions,\n          normals: normals,\n          texCoords: texCoords\n        }\n      });\n      var SubLayerClass = this.getSubLayerClass('mesh', SimpleMeshLayer);\n      return new SubLayerClass(this.getSubLayerProps({\n        id: 'mesh'\n      }), {\n        id: \"\".concat(this.id, \"-mesh-\").concat(tileHeader.id),\n        mesh: geometry,\n        data: [{}],\n        getPosition: [0, 0, 0],\n        getColor: [255, 255, 255],\n        texture: texture,\n        modelMatrix: modelMatrix,\n        coordinateOrigin: cartographicOrigin,\n        coordinateSystem: COORDINATE_SYSTEM.METER_OFFSETS\n      });\n    }\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers() {\n      var _this = this;\n\n      var _this$state = this.state,\n          tileset3d = _this$state.tileset3d,\n          layerMap = _this$state.layerMap;\n\n      if (!tileset3d) {\n        return null;\n      }\n\n      return tileset3d.tiles.map(function (tile) {\n        var layer = layerMap[tile.id] && layerMap[tile.id].layer;\n\n        if (tile.selected) {\n          if (!layer) {\n            layer = _this._create3DTileLayer(tile);\n            layerMap[tile.id] = {\n              layer: layer,\n              tile: tile\n            };\n          }\n\n          if (layer && layer.props && !layer.props.visible) {\n            layer = layer.clone({\n              visible: true\n            });\n            layerMap[tile.id].layer = layer;\n          }\n\n          return layer;\n        }\n\n        if (layer && layer.props && layer.props.visible) {\n          layer = layer.clone({\n            visible: false\n          });\n          layerMap[tile.id].layer = layer;\n        }\n\n        return layer;\n      }).filter(Boolean);\n    }\n  }]);\n\n  return Tile3DLayer;\n}(CompositeLayer);\n\nexport { Tile3DLayer as default };\nTile3DLayer.layerName = 'Tile3DLayer';\nTile3DLayer.defaultProps = defaultProps;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { fetchFile } from '@loaders.gl/core';\nimport { assert } from '@loaders.gl/loader-utils';\nvar CESIUM_ION_URL = 'https://api.cesium.com/v1/assets';\nexport function getIonTilesetMetadata(_x, _x2) {\n  return _getIonTilesetMetadata.apply(this, arguments);\n}\n\nfunction _getIonTilesetMetadata() {\n  _getIonTilesetMetadata = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(accessToken, assetId) {\n    var assets, _iterator, _step, item, ionAssetMetadata, type, url;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (assetId) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 3;\n            return getIonAssets(accessToken);\n\n          case 3:\n            assets = _context.sent;\n            _iterator = _createForOfIteratorHelper(assets.items);\n\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                item = _step.value;\n\n                if (item.type === '3DTILES') {\n                  assetId = item.id;\n                }\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n\n          case 6:\n            _context.next = 8;\n            return getIonAssetMetadata(accessToken, assetId);\n\n          case 8:\n            ionAssetMetadata = _context.sent;\n            type = ionAssetMetadata.type, url = ionAssetMetadata.url;\n            assert(type === '3DTILES' && url);\n            ionAssetMetadata.headers = {\n              Authorization: \"Bearer \".concat(ionAssetMetadata.accessToken)\n            };\n            return _context.abrupt(\"return\", ionAssetMetadata);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _getIonTilesetMetadata.apply(this, arguments);\n}\n\nexport function getIonAssets(_x3) {\n  return _getIonAssets.apply(this, arguments);\n}\n\nfunction _getIonAssets() {\n  _getIonAssets = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(accessToken) {\n    var url, headers, response;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            assert(accessToken);\n            url = CESIUM_ION_URL;\n            headers = {\n              Authorization: \"Bearer \".concat(accessToken)\n            };\n            _context2.next = 5;\n            return fetchFile(url, {\n              headers: headers,\n              \"throws\": true\n            });\n\n          case 5:\n            response = _context2.sent;\n            _context2.next = 8;\n            return response.json();\n\n          case 8:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getIonAssets.apply(this, arguments);\n}\n\nexport function getIonAssetMetadata(_x4, _x5) {\n  return _getIonAssetMetadata.apply(this, arguments);\n}\n\nfunction _getIonAssetMetadata() {\n  _getIonAssetMetadata = _asyncToGenerator(_regeneratorRuntime.mark(function _callee3(accessToken, assetId) {\n    var headers, url, response, metadata, tilesetInfo;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            assert(accessToken, assetId);\n            headers = {\n              Authorization: \"Bearer \".concat(accessToken)\n            };\n            url = \"\".concat(CESIUM_ION_URL, \"/\").concat(assetId);\n            _context3.next = 5;\n            return fetchFile(\"\".concat(url), {\n              headers: headers,\n              \"throws\": true\n            });\n\n          case 5:\n            response = _context3.sent;\n            _context3.next = 8;\n            return response.json();\n\n          case 8:\n            metadata = _context3.sent;\n            _context3.next = 11;\n            return fetchFile(\"\".concat(url, \"/endpoint\"), {\n              headers: headers,\n              \"throws\": true\n            });\n\n          case 11:\n            response = _context3.sent;\n            _context3.next = 14;\n            return response.json();\n\n          case 14:\n            tilesetInfo = _context3.sent;\n            metadata = _objectSpread(_objectSpread({}, metadata), tilesetInfo);\n            return _context3.abrupt(\"return\", metadata);\n\n          case 17:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getIonAssetMetadata.apply(this, arguments);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport Tiles3DLoader from './tiles-3d-loader';\nimport { getIonTilesetMetadata } from './lib/ion/ion';\n\nfunction preload(_x) {\n  return _preload.apply(this, arguments);\n}\n\nfunction _preload() {\n  _preload = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(url) {\n    var options,\n        _options,\n        accessToken,\n        assetId,\n        matched,\n        _args2 = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            options = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : {};\n            options = options['cesium-ion'] || {};\n            _options = options, accessToken = _options.accessToken;\n            assetId = options.assetId;\n\n            if (!Number.isFinite(assetId)) {\n              matched = url.match(/\\/([0-9]+)\\/tileset.json/);\n              assetId = matched && matched[1];\n            }\n\n            return _context2.abrupt(\"return\", getIonTilesetMetadata(accessToken, assetId));\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _preload.apply(this, arguments);\n}\n\nvar CesiumIonLoader = _objectSpread(_objectSpread({}, Tiles3DLoader), {}, {\n  id: 'cesium-ion',\n  name: 'Cesium Ion',\n  preload: preload,\n  parse: function () {\n    var _parse = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(data, options, context, loader) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              options['3d-tiles'] = options['cesium-ion'];\n              options.loader = CesiumIonLoader;\n              return _context.abrupt(\"return\", Tiles3DLoader.parse(data, options));\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function parse(_x2, _x3, _x4, _x5) {\n      return _parse.apply(this, arguments);\n    }\n\n    return parse;\n  }(),\n  options: {\n    'cesium-ion': _objectSpread(_objectSpread({}, Tiles3DLoader.options['3d-tiles']), {}, {\n      accessToken: null\n    })\n  }\n});\n\nexport default CesiumIonLoader;","import DeckGLLayer from 'maptalks.deckgl';\nimport Base from './base';\nimport { Tile3DLayer } from '@deck.gl/geo-layers';\n\nimport { CesiumIonLoader } from '@loaders.gl/3d-tiles';\n\nconst ION_ASSET_ID = 43978;\nconst ION_TOKEN =\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlYWMxMzcyYy0zZjJkLTQwODctODNlNi01MDRkZmMzMjIxOWIiLCJpZCI6OTYyMCwic2NvcGVzIjpbImFzbCIsImFzciIsImdjIl0sImlhdCI6MTU2Mjg2NjI3M30.1FNiClUyk00YH_nWfSGpiQAjR5V2OvREDq1PJ5QMjWQ';\nconst TILESET_URL = `https://assets.cesium.com/${ION_ASSET_ID}/tileset.json`;\n\ninterface IProps {\n\n}\n\nclass C3DTiles extends Base {\n  private deckLayer: DeckGLLayer | null;\n\n  constructor (props: IProps) {\n    super(props);\n    this.deckLayer = null;\n\n    this.viewState = {\n      center: [-75, 40],\n      zoom: 16,\n      pitch: 45,\n      bearing: 0,\n    };\n\n    this.onTilesetLoad = this.onTilesetLoad.bind(this);\n  }\n\n  initMap() {\n    super.initMap();\n\n    this.deckLayer = new DeckGLLayer('deck', {\n      layers: [\n        new Tile3DLayer({\n          id: 'tile-3d-layer',\n          pointSize: 2,\n          data: TILESET_URL,\n          loader: CesiumIonLoader,\n          loadOptions: {'cesium-ion': {accessToken: ION_TOKEN}},\n          onTilesetLoad: this.onTilesetLoad,\n        })\n      ]\n    }, {\n      animation: false,\n      forceRenderOnMoving: true,\n      forceRenderOnZooming: true\n    });\n\n    this.map.addLayer(this.deckLayer);\n  }\n\n  componentWillUnmount () {\n    // this.map.remove()\n    if (this.deckLayer) {\n      this.deckLayer.remove()\n    }\n  }\n\n  setInitialViewState = (state: {\n    longitude: number;\n    latitude: number;\n    zoom: number;\n  }) => {\n    this.map.animate({\n      center: [state.longitude, state.latitude],\n      zoom: state.zoom,\n    })\n  };\n\n  onTilesetLoad = (tileset: any) => {\n    // Recenter view to cover the new tileset\n    const { cartographicCenter, zoom } = tileset;\n    this.setInitialViewState({\n      longitude: cartographicCenter[0],\n      latitude: cartographicCenter[1],\n      zoom\n    });\n  };\n}\n\nexport default C3DTiles;\n","import { getFirstCharacters } from '../binary-utils/get-first-characters';\nexport function parseJSON(string) {\n  try {\n    return JSON.parse(string);\n  } catch (_) {\n    throw new Error(\"Failed to parse JSON from data starting with \\\"\".concat(getFirstCharacters(string), \"\\\"\"));\n  }\n}","export function getFirstCharacters(data) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n\n  if (typeof data === 'string') {\n    return data.slice(0, length);\n  } else if (ArrayBuffer.isView(data)) {\n    return getMagicString(data.buffer, data.byteOffset, length);\n  } else if (data instanceof ArrayBuffer) {\n    var byteOffset = 0;\n    return getMagicString(data, byteOffset, length);\n  }\n\n  return '';\n}\nexport function getMagicString(arrayBuffer, byteOffset, length) {\n  if (arrayBuffer.byteLength <= byteOffset + length) {\n    return '';\n  }\n\n  var dataView = new DataView(arrayBuffer);\n  var magic = '';\n\n  for (var i = 0; i < length; i++) {\n    magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n  }\n\n  return magic;\n}","export default \"#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\\n\\nstruct AmbientLight {\\n vec3 color;\\n};\\n\\nstruct PointLight {\\n vec3 color;\\n vec3 position;\\n vec3 attenuation;\\n};\\n\\nstruct DirectionalLight {\\n  vec3 color;\\n  vec3 direction;\\n};\\n\\nuniform AmbientLight lighting_uAmbientLight;\\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\\nuniform int lighting_uPointLightCount;\\nuniform int lighting_uDirectionalLightCount;\\n\\nuniform bool lighting_uEnabled;\\n\\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\\n  return pointLight.attenuation.x\\n       + pointLight.attenuation.y * distance\\n       + pointLight.attenuation.z * distance * distance;\\n}\\n\\n#endif\\n\";","import lightingShader from './lights.glsl';\nexport default {\n  name: 'lights',\n  vs: lightingShader,\n  fs: lightingShader,\n  getUniforms: getUniforms,\n  defines: {\n    MAX_LIGHTS: 3\n  }\n};\nvar INITIAL_MODULE_OPTIONS = {};\n\nfunction convertColor() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? [0, 0, 0] : _ref$color,\n      _ref$intensity = _ref.intensity,\n      intensity = _ref$intensity === void 0 ? 1.0 : _ref$intensity;\n\n  return color.map(function (component) {\n    return component * intensity / 255.0;\n  });\n}\n\nfunction getLightSourceUniforms(_ref2) {\n  var ambientLight = _ref2.ambientLight,\n      _ref2$pointLights = _ref2.pointLights,\n      pointLights = _ref2$pointLights === void 0 ? [] : _ref2$pointLights,\n      _ref2$directionalLigh = _ref2.directionalLights,\n      directionalLights = _ref2$directionalLigh === void 0 ? [] : _ref2$directionalLigh;\n  var lightSourceUniforms = {};\n\n  if (ambientLight) {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = convertColor(ambientLight);\n  } else {\n    lightSourceUniforms['lighting_uAmbientLight.color'] = [0, 0, 0];\n  }\n\n  pointLights.forEach(function (pointLight, index) {\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].color\")] = convertColor(pointLight);\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].position\")] = pointLight.position;\n    lightSourceUniforms[\"lighting_uPointLight[\".concat(index, \"].attenuation\")] = pointLight.attenuation || [1, 0, 0];\n  });\n  lightSourceUniforms.lighting_uPointLightCount = pointLights.length;\n  directionalLights.forEach(function (directionalLight, index) {\n    lightSourceUniforms[\"lighting_uDirectionalLight[\".concat(index, \"].color\")] = convertColor(directionalLight);\n    lightSourceUniforms[\"lighting_uDirectionalLight[\".concat(index, \"].direction\")] = directionalLight.direction;\n  });\n  lightSourceUniforms.lighting_uDirectionalLightCount = directionalLights.length;\n  return lightSourceUniforms;\n}\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_MODULE_OPTIONS;\n\n  if ('lightSources' in opts) {\n    var _ref3 = opts.lightSources || {},\n        ambientLight = _ref3.ambientLight,\n        pointLights = _ref3.pointLights,\n        directionalLights = _ref3.directionalLights;\n\n    var hasLights = ambientLight || pointLights && pointLights.length > 0 || directionalLights && directionalLights.length > 0;\n\n    if (!hasLights) {\n      return {\n        lighting_uEnabled: false\n      };\n    }\n\n    return Object.assign({}, getLightSourceUniforms({\n      ambientLight: ambientLight,\n      pointLights: pointLights,\n      directionalLights: directionalLights\n    }), {\n      lighting_uEnabled: true\n    });\n  }\n\n  if ('lights' in opts) {\n    var lightSources = {\n      pointLights: [],\n      directionalLights: []\n    };\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = (opts.lights || [])[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var light = _step.value;\n\n        switch (light.type) {\n          case 'ambient':\n            lightSources.ambientLight = light;\n            break;\n\n          case 'directional':\n            lightSources.directionalLights.push(light);\n            break;\n\n          case 'point':\n            lightSources.pointLights.push(light);\n            break;\n\n          default:\n        }\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n          _iterator[\"return\"]();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return getUniforms({\n      lightSources: lightSources\n    });\n  }\n\n  return {};\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Vector from './base/vector';\nimport { config, isArray } from '../lib/common';\nimport { checkNumber } from '../lib/validators';\nimport * as vec2 from 'gl-matrix/vec2';\nimport { vec2_transformMat4AsVector } from '../lib/gl-matrix-extras';\n\nvar Vector2 = function (_Vector) {\n  _inherits(Vector2, _Vector);\n\n  function Vector2() {\n    var _this;\n\n    var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    _classCallCheck(this, Vector2);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Vector2).call(this, 2));\n\n    if (isArray(x) && arguments.length === 1) {\n      _this.copy(x);\n    } else {\n      if (config.debug) {\n        checkNumber(x);\n        checkNumber(y);\n      }\n\n      _this[0] = x;\n      _this[1] = y;\n    }\n\n    return _this;\n  }\n\n  _createClass(Vector2, [{\n    key: \"set\",\n    value: function set(x, y) {\n      this[0] = x;\n      this[1] = y;\n      return this.check();\n    }\n  }, {\n    key: \"copy\",\n    value: function copy(array) {\n      this[0] = array[0];\n      this[1] = array[1];\n      return this.check();\n    }\n  }, {\n    key: \"fromObject\",\n    value: function fromObject(object) {\n      if (config.debug) {\n        checkNumber(object.x);\n        checkNumber(object.y);\n      }\n\n      this[0] = object.x;\n      this[1] = object.y;\n      return this.check();\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject(object) {\n      object.x = this[0];\n      object.y = this[1];\n      return object;\n    }\n  }, {\n    key: \"horizontalAngle\",\n    value: function horizontalAngle() {\n      return Math.atan2(this.y, this.x);\n    }\n  }, {\n    key: \"verticalAngle\",\n    value: function verticalAngle() {\n      return Math.atan2(this.x, this.y);\n    }\n  }, {\n    key: \"transform\",\n    value: function transform(matrix4) {\n      return this.transformAsPoint(matrix4);\n    }\n  }, {\n    key: \"transformAsPoint\",\n    value: function transformAsPoint(matrix4) {\n      vec2.transformMat4(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformAsVector\",\n    value: function transformAsVector(matrix4) {\n      vec2_transformMat4AsVector(this, this, matrix4);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix3\",\n    value: function transformByMatrix3(matrix3) {\n      vec2.transformMat3(this, this, matrix3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2x3\",\n    value: function transformByMatrix2x3(matrix2x3) {\n      vec2.transformMat2d(this, this, matrix2x3);\n      return this.check();\n    }\n  }, {\n    key: \"transformByMatrix2\",\n    value: function transformByMatrix2(matrix2) {\n      vec2.transformMat2(this, this, matrix2);\n      return this.check();\n    }\n  }, {\n    key: \"ELEMENTS\",\n    get: function get() {\n      return 2;\n    }\n  }]);\n\n  return Vector2;\n}(Vector);\n\nexport { Vector2 as default };","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport Layer from './layer';\nimport debug from '../debug';\nimport { flatten } from '../utils/flatten';\nvar TRACE_RENDER_LAYERS = 'compositeLayer.renderLayers';\n\nvar CompositeLayer = function (_Layer) {\n  _inherits(CompositeLayer, _Layer);\n\n  function CompositeLayer() {\n    _classCallCheck(this, CompositeLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CompositeLayer).apply(this, arguments));\n  }\n\n  _createClass(CompositeLayer, [{\n    key: \"getSubLayers\",\n    value: function getSubLayers() {\n      return this.internalState && this.internalState.subLayers || [];\n    }\n  }, {\n    key: \"initializeState\",\n    value: function initializeState() {}\n  }, {\n    key: \"setState\",\n    value: function setState(updateObject) {\n      _get(_getPrototypeOf(CompositeLayer.prototype), \"setState\", this).call(this, updateObject);\n\n      this.setNeedsUpdate();\n    }\n  }, {\n    key: \"getPickingInfo\",\n    value: function getPickingInfo(_ref) {\n      var info = _ref.info;\n      var object = info.object;\n      var isDataWrapped = object && object.__source && object.__source.parent && object.__source.parent.id === this.id;\n\n      if (!isDataWrapped) {\n        return info;\n      }\n\n      return Object.assign(info, {\n        object: object.__source.object,\n        index: object.__source.index\n      });\n    }\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers() {\n      return null;\n    }\n  }, {\n    key: \"shouldRenderSubLayer\",\n    value: function shouldRenderSubLayer(id, data) {\n      var overridingProps = this.props._subLayerProps;\n      return data && data.length || overridingProps && overridingProps[id];\n    }\n  }, {\n    key: \"getSubLayerClass\",\n    value: function getSubLayerClass(id, DefaultLayerClass) {\n      var overridingProps = this.props._subLayerProps;\n      return overridingProps && overridingProps[id] && overridingProps[id].type || DefaultLayerClass;\n    }\n  }, {\n    key: \"getSubLayerRow\",\n    value: function getSubLayerRow(row, sourceObject, sourceObjectIndex) {\n      row.__source = {\n        parent: this,\n        object: sourceObject,\n        index: sourceObjectIndex\n      };\n      return row;\n    }\n  }, {\n    key: \"getSubLayerAccessor\",\n    value: function getSubLayerAccessor(accessor) {\n      if (typeof accessor === 'function') {\n        var objectInfo = {\n          data: this.props.data,\n          target: []\n        };\n        return function (x, i) {\n          if (x.__source) {\n            objectInfo.index = x.__source.index;\n            return accessor(x.__source.object, objectInfo);\n          }\n\n          return accessor(x, i);\n        };\n      }\n\n      return accessor;\n    }\n  }, {\n    key: \"getSubLayerProps\",\n    value: function getSubLayerProps() {\n      var sublayerProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$props = this.props,\n          opacity = _this$props.opacity,\n          pickable = _this$props.pickable,\n          visible = _this$props.visible,\n          parameters = _this$props.parameters,\n          getPolygonOffset = _this$props.getPolygonOffset,\n          highlightedObjectIndex = _this$props.highlightedObjectIndex,\n          autoHighlight = _this$props.autoHighlight,\n          highlightColor = _this$props.highlightColor,\n          coordinateSystem = _this$props.coordinateSystem,\n          coordinateOrigin = _this$props.coordinateOrigin,\n          wrapLongitude = _this$props.wrapLongitude,\n          positionFormat = _this$props.positionFormat,\n          modelMatrix = _this$props.modelMatrix,\n          extensions = _this$props.extensions,\n          overridingProps = _this$props._subLayerProps;\n      var newProps = {\n        opacity: opacity,\n        pickable: pickable,\n        visible: visible,\n        parameters: parameters,\n        getPolygonOffset: getPolygonOffset,\n        highlightedObjectIndex: highlightedObjectIndex,\n        autoHighlight: autoHighlight,\n        highlightColor: highlightColor,\n        coordinateSystem: coordinateSystem,\n        coordinateOrigin: coordinateOrigin,\n        wrapLongitude: wrapLongitude,\n        positionFormat: positionFormat,\n        modelMatrix: modelMatrix,\n        extensions: extensions\n      };\n      var overridingSublayerProps = overridingProps && overridingProps[sublayerProps.id];\n      var overridingSublayerTriggers = overridingSublayerProps && overridingSublayerProps.updateTriggers;\n      var sublayerId = sublayerProps.id || 'sublayer';\n\n      if (overridingSublayerProps) {\n        var propTypes = this.constructor._propTypes;\n\n        for (var key in overridingSublayerProps) {\n          var propType = propTypes[key];\n\n          if (propType && propType.type === 'accessor') {\n            overridingSublayerProps[key] = this.getSubLayerAccessor(overridingSublayerProps[key]);\n          }\n        }\n      }\n\n      Object.assign(newProps, sublayerProps, overridingSublayerProps, {\n        id: \"\".concat(this.props.id, \"-\").concat(sublayerId),\n        updateTriggers: Object.assign({\n          all: this.props.updateTriggers.all\n        }, sublayerProps.updateTriggers, overridingSublayerTriggers)\n      });\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = extensions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var extension = _step.value;\n          var passThroughProps = extension.getSubLayerProps.call(this, extension);\n\n          if (passThroughProps) {\n            Object.assign(newProps, passThroughProps, {\n              updateTriggers: Object.assign(newProps.updateTriggers, passThroughProps.updateTriggers)\n            });\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return newProps;\n    }\n  }, {\n    key: \"_getAttributeManager\",\n    value: function _getAttributeManager() {\n      return null;\n    }\n  }, {\n    key: \"_renderLayers\",\n    value: function _renderLayers() {\n      var subLayers = this.internalState.subLayers;\n      var shouldUpdate = !subLayers || this.needsUpdate();\n\n      if (shouldUpdate) {\n        subLayers = this.renderLayers();\n        subLayers = flatten(subLayers, Boolean);\n        this.internalState.subLayers = subLayers;\n      }\n\n      debug(TRACE_RENDER_LAYERS, this, shouldUpdate, subLayers);\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = subLayers[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var layer = _step2.value;\n          layer.parent = this;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n            _iterator2[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"isComposite\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"isLoaded\",\n    get: function get() {\n      return _get(_getPrototypeOf(CompositeLayer.prototype), \"isLoaded\", this) && this.getSubLayers().every(function (layer) {\n        return layer.isLoaded;\n      });\n    }\n  }]);\n\n  return CompositeLayer;\n}(Layer);\n\nexport { CompositeLayer as default };\nCompositeLayer.layerName = 'CompositeLayer';","export default \"\\nuniform float lighting_uAmbient;\\nuniform float lighting_uDiffuse;\\nuniform float lighting_uShininess;\\nuniform vec3  lighting_uSpecularColor;\\n\\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\\n    vec3 halfway_direction = normalize(light_direction + view_direction);\\n    float lambertian = dot(light_direction, normal_worldspace);\\n    float specular = 0.0;\\n    if (lambertian > 0.0) {\\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\\n      specular = pow(specular_angle, lighting_uShininess);\\n    }\\n    lambertian = max(lambertian, 0.0);\\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\\n}\\n\\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\\n  vec3 lightColor = surfaceColor;\\n\\n  if (lighting_uEnabled) {\\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uPointLightCount) {\\n        break;\\n      }\\n      PointLight pointLight = lighting_uPointLight[i];\\n      vec3 light_position_worldspace = pointLight.position;\\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\\n    }\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uDirectionalLightCount) {\\n        break;\\n      }\\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\\n    }\\n  }\\n  return lightColor;\\n}\\n\\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\\n  vec3 lightColor = vec3(0, 0, 0);\\n  vec3 surfaceColor = vec3(0, 0, 0);\\n\\n  if (lighting_uEnabled) {\\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uPointLightCount) {\\n        break;\\n      }\\n      PointLight pointLight = lighting_uPointLight[i];\\n      vec3 light_position_worldspace = pointLight.position;\\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\\n    }\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uDirectionalLightCount) {\\n        break;\\n      }\\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\\n    }\\n  }\\n  return lightColor;\\n}\\n\";","import lights from '../lights/lights';\nimport lightingShader from './phong-lighting.glsl';\nvar gouraudLighting = {\n  name: 'gouraud-lighting',\n  dependencies: [lights],\n  vs: lightingShader,\n  defines: {\n    LIGHTING_VERTEX: 1\n  },\n  getUniforms: getUniforms\n};\nvar phongLighting = {\n  name: 'phong-lighting',\n  dependencies: [lights],\n  fs: lightingShader,\n  defines: {\n    LIGHTING_FRAGMENT: 1\n  },\n  getUniforms: getUniforms\n};\nvar INITIAL_MODULE_OPTIONS = {};\n\nfunction getMaterialUniforms(material) {\n  var _material$ambient = material.ambient,\n      ambient = _material$ambient === void 0 ? 0.35 : _material$ambient,\n      _material$diffuse = material.diffuse,\n      diffuse = _material$diffuse === void 0 ? 0.6 : _material$diffuse,\n      _material$shininess = material.shininess,\n      shininess = _material$shininess === void 0 ? 32 : _material$shininess,\n      _material$specularCol = material.specularColor,\n      specularColor = _material$specularCol === void 0 ? [30, 30, 30] : _material$specularCol;\n  return {\n    lighting_uAmbient: ambient,\n    lighting_uDiffuse: diffuse,\n    lighting_uShininess: shininess,\n    lighting_uSpecularColor: specularColor.map(function (x) {\n      return x / 255;\n    })\n  };\n}\n\nfunction getUniforms() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_MODULE_OPTIONS;\n\n  if (!('material' in opts)) {\n    return {};\n  }\n\n  var material = opts.material;\n\n  if (!material) {\n    return {\n      lighting_uEnabled: false\n    };\n  }\n\n  return getMaterialUniforms(material);\n}\n\nexport { gouraudLighting, phongLighting };","export function getMeshSize(attributes) {\n  var size = 0;\n\n  for (var attributeName in attributes) {\n    var attribute = attributes[attributeName];\n\n    if (ArrayBuffer.isView(attribute)) {\n      size += attribute.byteLength * attribute.BYTES_PER_ELEMENT;\n    }\n  }\n\n  return size;\n}\nexport function getMeshBoundingBox(attributes) {\n  if (!attributes || !attributes.POSITION) {\n    return null;\n  }\n\n  var minX = Infinity;\n  var minY = Infinity;\n  var minZ = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n  var maxZ = -Infinity;\n  var positions = attributes.POSITION.value;\n  var len = positions && positions.length;\n\n  if (!len) {\n    return null;\n  }\n\n  for (var i = 0; i < len; i += 3) {\n    var x = positions[i];\n    var y = positions[i + 1];\n    var z = positions[i + 2];\n    minX = x < minX ? x : minX;\n    minY = y < minY ? y : minY;\n    minZ = z < minZ ? z : minZ;\n    maxX = x > maxX ? x : maxX;\n    maxY = y > maxY ? y : maxY;\n    maxZ = z > maxZ ? z : maxZ;\n  }\n\n  return [[minX, minY, minZ], [maxX, maxY, maxZ]];\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { global, isBrowser, isWorker } from '../env-utils/globals';\nimport * as node from '../node/require-utils.node';\nimport assert from '../env-utils/assert';\nvar LATEST = 'beta';\nvar VERSION = typeof \"2.3.0-alpha.12\" !== 'undefined' ? \"2.3.0-alpha.12\" : LATEST;\nvar loadLibraryPromises = {};\nexport function loadLibrary(_x) {\n  return _loadLibrary.apply(this, arguments);\n}\n\nfunction _loadLibrary() {\n  _loadLibrary = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(libraryUrl) {\n    var moduleName,\n        options,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            moduleName = _args.length > 1 && _args[1] !== undefined ? _args[1] : null;\n            options = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n\n            if (moduleName) {\n              libraryUrl = getLibraryUrl(libraryUrl, moduleName, options);\n            }\n\n            loadLibraryPromises[libraryUrl] = loadLibraryPromises[libraryUrl] || loadLibraryFromFile(libraryUrl);\n            _context.next = 6;\n            return loadLibraryPromises[libraryUrl];\n\n          case 6:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _loadLibrary.apply(this, arguments);\n}\n\nexport function getLibraryUrl(library, moduleName, options) {\n  var modules = options.modules || {};\n\n  if (modules[library]) {\n    return modules[library];\n  }\n\n  if (!isBrowser) {\n    return \"modules/\".concat(moduleName, \"/dist/libs/\").concat(library);\n  }\n\n  if (options.CDN) {\n    assert(options.CDN.startsWith('http'));\n    return \"\".concat(options.CDN, \"/\").concat(moduleName, \"@\").concat(VERSION, \"/dist/libs/\").concat(library);\n  }\n\n  if (isWorker) {\n    return \"../src/libs/\".concat(library);\n  }\n\n  return \"modules/\".concat(moduleName, \"/src/libs/\").concat(library);\n}\n\nfunction loadLibraryFromFile(_x2) {\n  return _loadLibraryFromFile.apply(this, arguments);\n}\n\nfunction _loadLibraryFromFile() {\n  _loadLibraryFromFile = _asyncToGenerator(_regeneratorRuntime.mark(function _callee2(libraryUrl) {\n    var _response, response, scriptSource;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!libraryUrl.endsWith('wasm')) {\n              _context2.next = 7;\n              break;\n            }\n\n            _context2.next = 3;\n            return fetch(libraryUrl);\n\n          case 3:\n            _response = _context2.sent;\n            _context2.next = 6;\n            return _response.arrayBuffer();\n\n          case 6:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 7:\n            if (isBrowser) {\n              _context2.next = 9;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", node.requireFromFile && node.requireFromFile(libraryUrl));\n\n          case 9:\n            if (!isWorker) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", importScripts(libraryUrl));\n\n          case 11:\n            _context2.next = 13;\n            return fetch(libraryUrl);\n\n          case 13:\n            response = _context2.sent;\n            _context2.next = 16;\n            return response.text();\n\n          case 16:\n            scriptSource = _context2.sent;\n            return _context2.abrupt(\"return\", loadLibraryFromString(scriptSource, libraryUrl));\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loadLibraryFromFile.apply(this, arguments);\n}\n\nfunction loadLibraryFromString(scriptSource, id) {\n  if (!isBrowser) {\n    return node.requireFromString && node.requireFromString(scriptSource, id);\n  }\n\n  if (isWorker) {\n    eval.call(global, scriptSource);\n    return null;\n  }\n\n  var script = document.createElement('script');\n  script.id = id;\n\n  try {\n    script.appendChild(document.createTextNode(scriptSource));\n  } catch (e) {\n    script.text = scriptSource;\n  }\n\n  document.body.appendChild(script);\n  return null;\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nvar globals = {\n  self: typeof self !== 'undefined' && self,\n  window: typeof window !== 'undefined' && window,\n  global: typeof global !== 'undefined' && global,\n  document: typeof document !== 'undefined' && document\n};\nvar self_ = globals.self || globals.window || globals.global;\nvar window_ = globals.window || globals.self || globals.global;\nvar global_ = globals.global || globals.self || globals.window;\nvar document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\nexport var isBrowser = (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) !== 'object' || String(process) !== '[object process]' || process.browser;\nexport var isWorker = typeof importScripts === 'function';\nvar matches = typeof process !== 'undefined' && process.version && process.version.match(/v([0-9]*)/);\nexport var nodeVersion = matches && parseFloat(matches[1]) || 0;"],"sourceRoot":""}