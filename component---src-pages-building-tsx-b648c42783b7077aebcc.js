(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"/K2n":function(t,e,i){"use strict";i.r(e);var a=i("BFfR"),n=i("NMl0"),r=i("/PUF"),o=i("VQm/"),s=i("9fIP"),l=i("MMYH"),u=i("K/z8"),c=i("sRHE"),d=i("PRnZ"),h=i("8K1b"),g=function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"getShaders",value:function(){var t=Object(d.a)(Object(c.a)(e.prototype),"getShaders",this).call(this);return t.inject={"vs:#decl":"uniform float trailLength;\nattribute float instanceTimestamps;\nattribute float instanceNextTimestamps;\nvarying float vTime;\n","vs:#main-end":"vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;\n","fs:#decl":"uniform float trailLength;\nuniform float currentTime;\nvarying float vTime;\n","fs:#main-start":"if(vTime > currentTime || vTime < currentTime - trailLength) {\n  discard;\n}\n","fs:DECKGL_FILTER_COLOR":"color.a *= 1.0 - (currentTime - vTime) / trailLength;"},t}},{key:"initializeState",value:function(t){Object(d.a)(Object(c.a)(e.prototype),"initializeState",this).call(this,t),this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}},{key:"draw",value:function(t){var i=this.props,a=i.trailLength,n=i.currentTime;t.uniforms=Object.assign({},t.uniforms,{trailLength:a,currentTime:n}),Object(d.a)(Object(c.a)(e.prototype),"draw",this).call(this,t)}}]),e}(i("5RtV").a);g.layerName="TripsLayer",g.defaultProps={trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:null}};var p=i("nUuu"),m=i("mqw2"),f=i("omYt"),y=new p.a({color:[255,255,255],intensity:1}),v=new m.a({color:[255,255,255],intensity:2,position:[-74.05,40.7,8e3]}),b={buildingColor:[74,80,87],trailColor0:[253,128,93],trailColor1:[23,184,190],material:{ambient:.1,diffuse:.6,shininess:32,specularColor:[60,64,70]},effects:[new f.a({ambientLight:y,pointLight:v})]},L=[[[-74,40.7],[-74.02,40.7],[-74.02,40.72],[-74,40.72]]],w="https://raw.githubusercontent.com/visgl/deck.gl-data/master/examples/trips/buildings.json",P="https://raw.githubusercontent.com/visgl/deck.gl-data/master/examples/trips/trips-v7.json",C=function(t){function e(e){var i;return(i=t.call(this,e)||this)._animate=function(){var t,e=Date.now()/1e3%60/60*1800,a={layers:[new o.a({id:"ground",data:L,getPolygon:function(t){return t},stroked:!1,getFillColor:[0,0,0,0]}),new g({id:"trips",data:P,currentTime:e,getPath:function(t){return t.path},getTimestamps:function(t){return t.timestamps},getColor:function(t){return 0===t.vendor?b.trailColor0:b.trailColor1},opacity:.3,widthMinPixels:2,rounded:!0,trailLength:180,shadowEnabled:!1}),new o.a({id:"buildings",data:w,extruded:!0,wireframe:!1,opacity:.5,getPolygon:function(t){return t.polygon},getElevation:function(t){return t.height},getFillColor:b.buildingColor,material:b.material})]};i.inited?i.deckLayer&&i.deckLayer.setProps(a):(i.inited=!0,i.deckLayer=new n.a("deck",a,{animation:!0}),i.map.addLayer(i.deckLayer)),null===(t=i.renderState)||void 0===t||t.update(),window.requestAnimationFrame(i._animate)},i.inited=!1,i.deckLayer=null,i}Object(a.a)(e,t);var i=e.prototype;return i.componentDidMount=function(){this._animate()},i.componentWillUnmount=function(){this.deckLayer&&this.deckLayer.remove(),t.prototype.componentWillUnmount.call(this)},e}(r.default);e.default=C},"VQm/":function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var a=i("9fIP"),n=i("MMYH"),r=i("K/z8"),o=i("sRHE"),s=i("8K1b"),l=i("02NV"),u=i("RX7e"),c=i("N+vi"),d=i("MaeC"),h=i("5RtV"),g=i("gGXo"),p=i("O4MS"),m={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:function(t){return t.polygon}},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},f=function(t){function e(){return Object(a.a)(this,e),Object(r.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(n.a)(e,[{key:"initializeState",value:function(){this.state={paths:[]},this.props.getLineDashArray&&l.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){var e=this,i=(t.oldProps,t.props,t.changeFlags),a=i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPolygon);if(a&&Array.isArray(i.dataChanged)){var n=this.state.paths.slice(),r=i.dataChanged.map((function(t){return Object(p.a)({data:n,getIndex:function(t){return t.__source.index},dataRange:t,replace:e._getPaths(t)})}));this.setState({paths:n,pathsDiff:r})}else a&&this.setState({paths:this._getPaths(),pathsDiff:null})}},{key:"_getPaths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props,i=e.data,a=e.getPolygon,n=e.positionFormat,r=e._normalize,o=[],s="XY"===n?2:3,l=t.startRow,c=t.endRow,d=Object(u.a)(i,l,c),h=d.iterable,p=d.objectInfo,m=!0,f=!1,y=void 0;try{for(var v,b=h[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var L=v.value;p.index++;var w=a(L,p);r&&(w=g.b(w,s));var P=w,C=P.holeIndices,T=w.positions||w;if(C)for(var S=0;S<=C.length;S++){var O=T.slice(C[S-1]||0,C[S]||T.length);o.push(this.getSubLayerRow({path:O},L,p.index))}else o.push(this.getSubLayerRow({path:T},L,p.index))}}catch(j){f=!0,y=j}finally{try{m||null==b.return||b.return()}finally{if(f)throw y}}return o}},{key:"renderLayers",value:function(){var t=this.props,e=t.data,i=t._dataDiff,a=t.stroked,n=t.filled,r=t.extruded,o=t.wireframe,s=t._normalize,l=t.elevationScale,u=t.transitions,c=t.positionFormat,g=this.props,p=g.lineWidthUnits,m=g.lineWidthScale,f=g.lineWidthMinPixels,y=g.lineWidthMaxPixels,v=g.lineJointRounded,b=g.lineMiterLimit,L=g.lineDashJustified,w=this.props,P=w.getFillColor,C=w.getLineColor,T=w.getLineWidth,S=w.getLineDashArray,O=w.getElevation,j=w.getPolygon,x=w.updateTriggers,k=w.material,M=this.state,R=M.paths,_=M.pathsDiff,A=this.getSubLayerClass("fill",d.a),F=this.getSubLayerClass("stroke",h.a),W=this.shouldRenderSubLayer("fill",R)&&new A({_dataDiff:i,extruded:r,elevationScale:l,filled:n,wireframe:o,_normalize:s,getElevation:O,getFillColor:P,getLineColor:C,material:k,transitions:u},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:x.getPolygon,getElevation:x.getElevation,getFillColor:x.getFillColor,getLineColor:x.getLineColor}}),{data:e,positionFormat:c,getPolygon:j});return[!r&&W,!r&&a&&this.shouldRenderSubLayer("stroke",R)&&new F({_dataDiff:_&&function(){return _},widthUnits:p,widthScale:m,widthMinPixels:f,widthMaxPixels:y,rounded:v,miterLimit:b,dashJustified:L,_pathType:"loop",transitions:u&&{getWidth:u.getLineWidth,getColor:u.getLineColor,getPath:u.getPolygon},getColor:this.getSubLayerAccessor(C),getWidth:this.getSubLayerAccessor(T),getDashArray:this.getSubLayerAccessor(S)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:x.getLineWidth,getColor:x.getLineColor,getDashArray:x.getLineDashArray}}),{data:R,positionFormat:c,getPath:function(t){return t.path}}),r&&W]}}]),e}(c.a);f.layerName="PolygonLayer",f.defaultProps=m},mqw2:function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var a=i("9fIP"),n=i("MMYH"),r=i("us+3"),o=i("Vind"),s=[255,255,255],l=[0,0,1],u=[0,0,1],c=0,d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,t);var i=e.color,n=void 0===i?s:i,r=e.intensity,o=void 0===r?1:r,l=e.position,d=void 0===l?u:l;this.id=e.id||"point-".concat(c++),this.color=n,this.intensity=o,this.type="point",this.position=d,this.attenuation=h(e),this.projectedLight=Object.assign({},this)}return Object(n.a)(t,[{key:"getProjectedLight",value:function(t){var e=t.layer,i=this.projectedLight,a=e.context.viewport,n=e.props,s=n.coordinateSystem,l=n.coordinateOrigin,u=Object(r.b)(this.position,{viewport:a,coordinateSystem:s,coordinateOrigin:l,fromCoordinateSystem:a.isGeospatial?o.a.LNGLAT:o.a.CARTESIAN,fromCoordinateOrigin:[0,0,0]});return i.color=this.color,i.intensity=this.intensity,i.position=u,i}}]),t}();function h(t){return"attenuation"in t?t.attenuation:"intensity"in t?[0,0,t.intensity]:l}}}]);
//# sourceMappingURL=component---src-pages-building-tsx-b648c42783b7077aebcc.js.map