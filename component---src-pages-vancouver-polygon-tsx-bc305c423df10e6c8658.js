(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"1LeD":function(t,e,n){"use strict";function r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}n.d(e,"a",(function(){return r}))},NqPo:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("ZB9Y"),a=n("1LeD");function i(){var t,e=[.5],n=[0,1],o=1;function l(a){return a<=a?n[Object(r.a)(e,a,0,o)]:t}return l.domain=function(t){return arguments.length?(e=Array.from(t),o=Math.min(e.length,n.length-1),l):e.slice()},l.range=function(t){return arguments.length?(n=Array.from(t),o=Math.min(e.length,n.length-1),l):n.slice()},l.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},l.unknown=function(e){return arguments.length?(t=e,l):t},l.copy=function(){return i().domain(e).range(n).unknown(t)},a.a.apply(l,arguments)}},"VQm/":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n("9fIP"),a=n("MMYH"),i=n("K/z8"),o=n("sRHE"),l=n("8K1b"),s=n("02NV"),u=n("RX7e"),c=n("N+vi"),h=n("MaeC"),d=n("5RtV"),g=n("gGXo"),f=n("O4MS"),p={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:function(t){return t.polygon}},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},v=function(t){function e(){return Object(r.a)(this,e),Object(i.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(l.a)(e,t),Object(a.a)(e,[{key:"initializeState",value:function(){this.state={paths:[]},this.props.getLineDashArray&&s.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){var e=this,n=(t.oldProps,t.props,t.changeFlags),r=n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon);if(r&&Array.isArray(n.dataChanged)){var a=this.state.paths.slice(),i=n.dataChanged.map((function(t){return Object(f.a)({data:a,getIndex:function(t){return t.__source.index},dataRange:t,replace:e._getPaths(t)})}));this.setState({paths:a,pathsDiff:i})}else r&&this.setState({paths:this._getPaths(),pathsDiff:null})}},{key:"_getPaths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props,n=e.data,r=e.getPolygon,a=e.positionFormat,i=e._normalize,o=[],l="XY"===a?2:3,s=t.startRow,c=t.endRow,h=Object(u.a)(n,s,c),d=h.iterable,f=h.objectInfo,p=!0,v=!1,y=void 0;try{for(var m,M=d[Symbol.iterator]();!(p=(m=M.next()).done);p=!0){var b=m.value;f.index++;var L=r(b,f);i&&(L=g.b(L,l));var P=L,w=P.holeIndices,S=L.positions||L;if(w)for(var k=0;k<=w.length;k++){var C=S.slice(w[k-1]||0,w[k]||S.length);o.push(this.getSubLayerRow({path:C},b,f.index))}else o.push(this.getSubLayerRow({path:S},b,f.index))}}catch(O){v=!0,y=O}finally{try{p||null==M.return||M.return()}finally{if(v)throw y}}return o}},{key:"renderLayers",value:function(){var t=this.props,e=t.data,n=t._dataDiff,r=t.stroked,a=t.filled,i=t.extruded,o=t.wireframe,l=t._normalize,s=t.elevationScale,u=t.transitions,c=t.positionFormat,g=this.props,f=g.lineWidthUnits,p=g.lineWidthScale,v=g.lineWidthMinPixels,y=g.lineWidthMaxPixels,m=g.lineJointRounded,M=g.lineMiterLimit,b=g.lineDashJustified,L=this.props,P=L.getFillColor,w=L.getLineColor,S=L.getLineWidth,k=L.getLineDashArray,C=L.getElevation,O=L.getPolygon,x=L.updateTriggers,j=L.material,E=this.state,A=E.paths,R=E.pathsDiff,_=this.getSubLayerClass("fill",h.a),W=this.getSubLayerClass("stroke",d.a),D=this.shouldRenderSubLayer("fill",A)&&new _({_dataDiff:n,extruded:i,elevationScale:s,filled:a,wireframe:o,_normalize:l,getElevation:C,getFillColor:P,getLineColor:w,material:j,transitions:u},this.getSubLayerProps({id:"fill",updateTriggers:{getPolygon:x.getPolygon,getElevation:x.getElevation,getFillColor:x.getFillColor,getLineColor:x.getLineColor}}),{data:e,positionFormat:c,getPolygon:O});return[!i&&D,!i&&r&&this.shouldRenderSubLayer("stroke",A)&&new W({_dataDiff:R&&function(){return R},widthUnits:f,widthScale:p,widthMinPixels:v,widthMaxPixels:y,rounded:m,miterLimit:M,dashJustified:b,_pathType:"loop",transitions:u&&{getWidth:u.getLineWidth,getColor:u.getLineColor,getPath:u.getPolygon},getColor:this.getSubLayerAccessor(w),getWidth:this.getSubLayerAccessor(S),getDashArray:this.getSubLayerAccessor(k)},this.getSubLayerProps({id:"stroke",updateTriggers:{getWidth:x.getLineWidth,getColor:x.getLineColor,getDashArray:x.getLineDashArray}}),{data:A,positionFormat:c,getPath:function(t){return t.path}}),i&&D]}}]),e}(c.a);v.layerName="PolygonLayer",v.defaultProps=p},ZB9Y:function(t,e,n){"use strict";var r=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},a=function(t){var e=t,n=t;function a(t,e,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var i=r+a>>>1;n(t[i],e)<0?r=i+1:a=i}return r}return 1===t.length&&(e=function(e,n){return t(e)-n},n=function(t){return function(e,n){return r(t(e),n)}}(t)),{left:a,center:function(t,n,r,i){null==r&&(r=0),null==i&&(i=t.length);var o=a(t,n,r,i-1);return o>r&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var i=r+a>>>1;n(t[i],e)>0?a=i:r=i+1}return r}}};n("VtSi"),n("3yYM");var i=a(r),o=i.right;i.left,a((function(t){return null===t?NaN:+t})).center,e.a=o},wbu9:function(t,e,n){"use strict";n.r(e),n.d(e,"COLOR_SCALE",(function(){return O}));var r=n("BFfR"),a=n("NMl0"),i=n("VQm/"),o=n("ErqJ"),l=n("nUuu");function s(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var u=n("9fIP"),c=n("MMYH"),h=n("K/z8"),d=n("sRHE"),g=n("8K1b"),f=n("JxKK"),p=Math.PI/180,v=23.4397*p;function y(t,e,n){var r,a,i,o,l,s,u=p*-n,c=p*e,h=function(t){return function(t){return t/864e5-.5+2440588}(t)-2451545}(t),d=(r=p*(357.5291+.98560028*h),a=p*(1.9148*Math.sin(r)+.02*Math.sin(2*r)+3e-4*Math.sin(3*r)),i=r+a+102.9372*p+Math.PI,{declination:(o=i,l=0,s=o,Math.asin(Math.sin(l)*Math.cos(v)+Math.cos(l)*Math.sin(v)*Math.sin(s))),rightAscension:m(i,0)}),g=function(t,e){return p*(280.147+360.9856235*t)-e}(h,u)-d.rightAscension;return{azimuth:M(g,c,d.declination),altitude:b(g,c,d.declination)}}function m(t,e){var n=t;return Math.atan2(Math.sin(n)*Math.cos(v)-Math.tan(e)*Math.sin(v),Math.cos(n))}function M(t,e,n){var r=t,a=e,i=n;return Math.atan2(Math.sin(r),Math.cos(r)*Math.sin(a)-Math.tan(i)*Math.cos(a))}function b(t,e,n){var r=t,a=e,i=n;return Math.asin(Math.sin(a)*Math.sin(i)+Math.cos(a)*Math.cos(i)*Math.cos(r))}var L=function(t){function e(t){var n,r=t.timestamp,a=s(t,["timestamp"]);return Object(u.a)(this,e),(n=Object(h.a)(this,Object(d.a)(e).call(this,a))).timestamp=r,n}return Object(g.a)(e,t),Object(c.a)(e,[{key:"getProjectedLight",value:function(t){var e=t.layer.context.viewport,n=e.latitude,r=e.longitude;return this.direction=function(t,e,n){var r=y(t,e,n),a=r.azimuth,i=r.altitude,o=a+Math.PI;return[-Math.sin(o),-Math.cos(o),-Math.sin(i)]}(this.timestamp,n,r),this}}]),e}(f.a),P=n("omYt"),w=n("/PUF"),S=n("ERkP"),k=n.n(S),C=n("NqPo"),O=Object(C.a)().domain([-.6,-.45,-.3,-.15,0,.15,.3,.45,.6,.75,.9,1.05,1.2]).range([[65,182,196],[127,205,187],[199,233,180],[237,248,177],[255,255,204],[255,237,160],[254,217,118],[254,178,76],[253,141,60],[252,78,42],[227,26,28],[189,0,38],[128,0,38]]),x=new l.a({color:[255,255,255],intensity:1}),j=new L({timestamp:Date.UTC(2019,7,1,22),color:[255,255,255],intensity:1,_shadow:!0}),E=[[[-123,49.196],[-123,49.324],[-123.306,49.324],[-123.306,49.196]]],A=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={data:[]},n.onHover=function(t){var e=t.x,r=t.y,a=t.object;n.setState({x:e,y:r,hoveredObject:a})},n.deckLayer=null,n.viewState={center:[49.254,-123.13].reverse(),zoom:11,pitch:40.5,bearing:0},n}Object(r.a)(e,t);var n=e.prototype;return n.initMap=function(){t.prototype.initMap.call(this),this._renderLayers()},n.componentWillUnmount=function(){this.deckLayer&&this.deckLayer.remove(),t.prototype.componentWillUnmount.call(this)},n.renderTooltip=function(){var t=this.state,e=t.x,n=t.y,r=t.hoveredObject;return r&&k.a.createElement("div",{className:"tooltip",style:{top:n,left:e}},k.a.createElement("div",null,k.a.createElement("b",null,"Average Property Value")),k.a.createElement("div",null,k.a.createElement("div",null,"$",r.properties.valuePerParcel," / parcel"),k.a.createElement("div",null,"$",r.properties.valuePerSqm," / m",k.a.createElement("sup",null,"2"))),k.a.createElement("div",null,k.a.createElement("b",null,"Growth")),k.a.createElement("div",null,Math.round(100*r.properties.growth),"%"))},n._renderLayers=function(){var t=this,e=new P.a({ambientLight:x,dirLight:j});e.shadowColor=[0,0,0,.5];var n={layers:[new i.a({id:"ground",data:E,stroked:!1,getPolygon:function(t){return t},getFillColor:[0,0,0,0]}),new o.a({id:"geojson",data:"https://raw.githubusercontent.com/visgl/deck.gl-data/master/examples/geojson/vancouver-blocks.json",opacity:.8,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(t){return 10*Math.sqrt(t.properties.valuePerSqm)},getFillColor:function(t){return O(t.properties.growth)},getLineColor:[255,255,255],pickable:!0,onHover:this.onHover})],effects:[e]};this.deckLayer?this.deckLayer.setProps(n):(this.deckLayer=new a.a("deck",n,{animation:!0,forceRenderOnMoving:!0,forceRenderOnZooming:!0,renderStart:function(){var e;null===(e=t.renderState)||void 0===e||e.update()}}),this.map.addLayer(this.deckLayer))},e}(w.default);e.default=A}}]);
//# sourceMappingURL=component---src-pages-vancouver-polygon-tsx-bc305c423df10e6c8658.js.map