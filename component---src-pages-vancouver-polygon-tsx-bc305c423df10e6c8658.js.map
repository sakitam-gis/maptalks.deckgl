{"version":3,"sources":["webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/d3-scale/src/init.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/d3-scale/src/threshold.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/layers/dist/esm/polygon-layer/polygon-layer.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/d3-array/src/ascending.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/d3-array/src/bisector.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/d3-array/src/bisect.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/d3-array/src/number.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/core/dist/esm/effects/lighting/suncalc.js","webpack:////Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@deck.gl/core/dist/esm/effects/lighting/sun-light.js","webpack:///./src/pages/vancouver-polygon.tsx"],"names":["initRange","domain","range","arguments","length","this","threshold","unknown","n","scale","x","_","Array","from","Math","min","slice","invertExtent","y","i","indexOf","copy","apply","defaultProps","stroked","filled","extruded","elevationScale","wireframe","_normalize","lineWidthUnits","lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","Number","MAX_SAFE_INTEGER","lineJointRounded","lineMiterLimit","getPolygon","type","value","f","polygon","getFillColor","getLineColor","getLineWidth","getElevation","material","PolygonLayer","_CompositeLayer","key","state","paths","props","getLineDashArray","removed","_ref","_this","changeFlags","oldProps","geometryChanged","dataChanged","updateTriggersChanged","all","isArray","pathsDiff","map","dataRange","data","getIndex","p","__source","index","replace","_getPaths","setState","undefined","_this$props","positionFormat","positionSize","startRow","endRow","_createIterable","iterable","objectInfo","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","object","_polygon","holeIndices","positions","path","push","getSubLayerRow","err","_this$props2","_dataDiff","transitions","_this$props3","lineDashJustified","_this$props4","updateTriggers","_this$state","FillLayer","getSubLayerClass","StrokeLayer","polygonLayer","shouldRenderSubLayer","getSubLayerProps","id","widthUnits","widthScale","widthMinPixels","widthMaxPixels","rounded","miterLimit","dashJustified","_pathType","getWidth","getColor","getPath","getSubLayerAccessor","getDashArray","layerName","a","b","NaN","delta","compare","left","lo","hi","mid","d","ascending","ascendingComparator","center","right","ascendingBisect","bisector","bisectRight","_objectWithoutProperties","source","excluded","target","sourceKeys","Object","keys","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","DEGREES_TO_RADIANS","PI","e","getSolarPosition","timestamp","latitude","longitude","M","C","L","eclipticLongitude","lambda","longitudeWestInRadians","phi","toJulianDay","toDays","c","sin","declination","asin","cos","rightAscension","getRightAscension","H","dates","getSiderealTime","azimuth","getAzimuth","altitude","getAltitude","atan2","tan","hourAngle","latitudeInRadians","_DirectionalLight","SunLight","others","_ref2","_layer$context$viewpo","layer","context","viewport","direction","_getSolarPosition","azimuthN","getSunlightDirection","COLOR_SCALE","scaleThreshold","ambientLight","AmbientLight","color","intensity","dirLight","Date","UTC","_shadow","landCover","VancouverPolygon","onHover","hoveredObject","deckLayer","viewState","reverse","zoom","pitch","bearing","initMap","_renderLayers","componentWillUnmount","remove","renderTooltip","className","style","top","properties","valuePerParcel","valuePerSqm","round","growth","lightingEffect","LightingEffect","shadowColor","layers","GeoJsonLayer","opacity","sqrt","pickable","effects","setProps","DeckGLLayer","animation","forceRenderOnMoving","forceRenderOnZooming","renderStart","renderState","update","addLayer","Base"],"mappings":"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","file":"component---src-pages-vancouver-polygon-tsx-bc305c423df10e6c8658.js","sourcesContent":["export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0:\n      break;\n\n    case 1:\n      this.range(domain);\n      break;\n\n    default:\n      this.range(range).domain(domain);\n      break;\n  }\n\n  return this;\n}\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0:\n      break;\n\n    case 1:\n      {\n        if (typeof domain === \"function\") this.interpolator(domain);else this.range(domain);\n        break;\n      }\n\n    default:\n      {\n        this.domain(domain);\n        if (typeof interpolator === \"function\") this.interpolator(interpolator);else this.range(interpolator);\n        break;\n      }\n  }\n\n  return this;\n}","import { bisect } from \"d3-array\";\nimport { initRange } from \"./init.js\";\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      unknown,\n      n = 1;\n\n  function scale(x) {\n    return x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  scale.domain = function (_) {\n    return arguments.length ? (domain = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function (_) {\n    return arguments.length ? (range = Array.from(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function (y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function (_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function () {\n    return threshold().domain(domain).range(range).unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}","import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { CompositeLayer, createIterable, log } from '@deck.gl/core';\nimport SolidPolygonLayer from '../solid-polygon-layer/solid-polygon-layer';\nimport PathLayer from '../path-layer/path-layer';\nimport * as Polygon from '../solid-polygon-layer/polygon';\nimport { replaceInRange } from '../utils';\nvar defaultLineColor = [0, 0, 0, 255];\nvar defaultFillColor = [0, 0, 0, 255];\nvar defaultProps = {\n  stroked: true,\n  filled: true,\n  extruded: false,\n  elevationScale: 1,\n  wireframe: false,\n  _normalize: true,\n  lineWidthUnits: 'meters',\n  lineWidthScale: 1,\n  lineWidthMinPixels: 0,\n  lineWidthMaxPixels: Number.MAX_SAFE_INTEGER,\n  lineJointRounded: false,\n  lineMiterLimit: 4,\n  getPolygon: {\n    type: 'accessor',\n    value: function value(f) {\n      return f.polygon;\n    }\n  },\n  getFillColor: {\n    type: 'accessor',\n    value: defaultFillColor\n  },\n  getLineColor: {\n    type: 'accessor',\n    value: defaultLineColor\n  },\n  getLineWidth: {\n    type: 'accessor',\n    value: 1\n  },\n  getElevation: {\n    type: 'accessor',\n    value: 1000\n  },\n  material: true\n};\n\nvar PolygonLayer = function (_CompositeLayer) {\n  _inherits(PolygonLayer, _CompositeLayer);\n\n  function PolygonLayer() {\n    _classCallCheck(this, PolygonLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(PolygonLayer).apply(this, arguments));\n  }\n\n  _createClass(PolygonLayer, [{\n    key: \"initializeState\",\n    value: function initializeState() {\n      this.state = {\n        paths: []\n      };\n\n      if (this.props.getLineDashArray) {\n        log.removed('getLineDashArray', 'PathStyleExtension')();\n      }\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(_ref) {\n      var _this = this;\n\n      var oldProps = _ref.oldProps,\n          props = _ref.props,\n          changeFlags = _ref.changeFlags;\n      var geometryChanged = changeFlags.dataChanged || changeFlags.updateTriggersChanged && (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getPolygon);\n\n      if (geometryChanged && Array.isArray(changeFlags.dataChanged)) {\n        var paths = this.state.paths.slice();\n        var pathsDiff = changeFlags.dataChanged.map(function (dataRange) {\n          return replaceInRange({\n            data: paths,\n            getIndex: function getIndex(p) {\n              return p.__source.index;\n            },\n            dataRange: dataRange,\n            replace: _this._getPaths(dataRange)\n          });\n        });\n        this.setState({\n          paths: paths,\n          pathsDiff: pathsDiff\n        });\n      } else if (geometryChanged) {\n        this.setState({\n          paths: this._getPaths(),\n          pathsDiff: null\n        });\n      }\n    }\n  }, {\n    key: \"_getPaths\",\n    value: function _getPaths() {\n      var dataRange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _this$props = this.props,\n          data = _this$props.data,\n          getPolygon = _this$props.getPolygon,\n          positionFormat = _this$props.positionFormat,\n          _normalize = _this$props._normalize;\n      var paths = [];\n      var positionSize = positionFormat === 'XY' ? 2 : 3;\n      var startRow = dataRange.startRow,\n          endRow = dataRange.endRow;\n\n      var _createIterable = createIterable(data, startRow, endRow),\n          iterable = _createIterable.iterable,\n          objectInfo = _createIterable.objectInfo;\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = iterable[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var object = _step.value;\n          objectInfo.index++;\n          var polygon = getPolygon(object, objectInfo);\n\n          if (_normalize) {\n            polygon = Polygon.normalize(polygon, positionSize);\n          }\n\n          var _polygon = polygon,\n              holeIndices = _polygon.holeIndices;\n          var positions = polygon.positions || polygon;\n\n          if (holeIndices) {\n            for (var i = 0; i <= holeIndices.length; i++) {\n              var path = positions.slice(holeIndices[i - 1] || 0, holeIndices[i] || positions.length);\n              paths.push(this.getSubLayerRow({\n                path: path\n              }, object, objectInfo.index));\n            }\n          } else {\n            paths.push(this.getSubLayerRow({\n              path: positions\n            }, object, objectInfo.index));\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n            _iterator[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return paths;\n    }\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers() {\n      var _this$props2 = this.props,\n          data = _this$props2.data,\n          _dataDiff = _this$props2._dataDiff,\n          stroked = _this$props2.stroked,\n          filled = _this$props2.filled,\n          extruded = _this$props2.extruded,\n          wireframe = _this$props2.wireframe,\n          _normalize = _this$props2._normalize,\n          elevationScale = _this$props2.elevationScale,\n          transitions = _this$props2.transitions,\n          positionFormat = _this$props2.positionFormat;\n      var _this$props3 = this.props,\n          lineWidthUnits = _this$props3.lineWidthUnits,\n          lineWidthScale = _this$props3.lineWidthScale,\n          lineWidthMinPixels = _this$props3.lineWidthMinPixels,\n          lineWidthMaxPixels = _this$props3.lineWidthMaxPixels,\n          lineJointRounded = _this$props3.lineJointRounded,\n          lineMiterLimit = _this$props3.lineMiterLimit,\n          lineDashJustified = _this$props3.lineDashJustified;\n      var _this$props4 = this.props,\n          getFillColor = _this$props4.getFillColor,\n          getLineColor = _this$props4.getLineColor,\n          getLineWidth = _this$props4.getLineWidth,\n          getLineDashArray = _this$props4.getLineDashArray,\n          getElevation = _this$props4.getElevation,\n          getPolygon = _this$props4.getPolygon,\n          updateTriggers = _this$props4.updateTriggers,\n          material = _this$props4.material;\n      var _this$state = this.state,\n          paths = _this$state.paths,\n          pathsDiff = _this$state.pathsDiff;\n      var FillLayer = this.getSubLayerClass('fill', SolidPolygonLayer);\n      var StrokeLayer = this.getSubLayerClass('stroke', PathLayer);\n      var polygonLayer = this.shouldRenderSubLayer('fill', paths) && new FillLayer({\n        _dataDiff: _dataDiff,\n        extruded: extruded,\n        elevationScale: elevationScale,\n        filled: filled,\n        wireframe: wireframe,\n        _normalize: _normalize,\n        getElevation: getElevation,\n        getFillColor: getFillColor,\n        getLineColor: getLineColor,\n        material: material,\n        transitions: transitions\n      }, this.getSubLayerProps({\n        id: 'fill',\n        updateTriggers: {\n          getPolygon: updateTriggers.getPolygon,\n          getElevation: updateTriggers.getElevation,\n          getFillColor: updateTriggers.getFillColor,\n          getLineColor: updateTriggers.getLineColor\n        }\n      }), {\n        data: data,\n        positionFormat: positionFormat,\n        getPolygon: getPolygon\n      });\n      var polygonLineLayer = !extruded && stroked && this.shouldRenderSubLayer('stroke', paths) && new StrokeLayer({\n        _dataDiff: pathsDiff && function () {\n          return pathsDiff;\n        },\n        widthUnits: lineWidthUnits,\n        widthScale: lineWidthScale,\n        widthMinPixels: lineWidthMinPixels,\n        widthMaxPixels: lineWidthMaxPixels,\n        rounded: lineJointRounded,\n        miterLimit: lineMiterLimit,\n        dashJustified: lineDashJustified,\n        _pathType: 'loop',\n        transitions: transitions && {\n          getWidth: transitions.getLineWidth,\n          getColor: transitions.getLineColor,\n          getPath: transitions.getPolygon\n        },\n        getColor: this.getSubLayerAccessor(getLineColor),\n        getWidth: this.getSubLayerAccessor(getLineWidth),\n        getDashArray: this.getSubLayerAccessor(getLineDashArray)\n      }, this.getSubLayerProps({\n        id: 'stroke',\n        updateTriggers: {\n          getWidth: updateTriggers.getLineWidth,\n          getColor: updateTriggers.getLineColor,\n          getDashArray: updateTriggers.getLineDashArray\n        }\n      }), {\n        data: paths,\n        positionFormat: positionFormat,\n        getPath: function getPath(x) {\n          return x.path;\n        }\n      });\n      return [!extruded && polygonLayer, polygonLineLayer, extruded && polygonLayer];\n    }\n  }]);\n\n  return PolygonLayer;\n}(CompositeLayer);\n\nexport { PolygonLayer as default };\nPolygonLayer.layerName = 'PolygonLayer';\nPolygonLayer.defaultProps = defaultProps;","export default function (a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}","import ascending from \"./ascending.js\";\nexport default function (f) {\n  var delta = f;\n  var compare = f;\n\n  if (f.length === 1) {\n    delta = function delta(d, x) {\n      return f(d) - x;\n    };\n\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n    }\n\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n\n    while (lo < hi) {\n      var mid = lo + hi >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;\n    }\n\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    var i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {\n    left: left,\n    center: center,\n    right: right\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function (d, x) {\n    return ascending(f(d), x);\n  };\n}","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport var bisectCenter = bisector(number).center;\nexport default bisectRight;","import _regeneratorRuntime from \"/Users/sakitam-fdd/Documents/workspace/github/maptalks.deckgl/node_modules/@babel/runtime/regenerator\";\nimport \"regenerator-runtime/runtime\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(numbers);\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nexport default function (x) {\n  return x === null ? NaN : +x;\n}\nexport function numbers(values, valueof) {\n  var _iterator, _step, value, index, _iterator2, _step2, _value;\n\n  return _regeneratorRuntime.wrap(function numbers$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!(valueof === undefined)) {\n            _context.next = 21;\n            break;\n          }\n\n          _iterator = _createForOfIteratorHelper(values);\n          _context.prev = 2;\n\n          _iterator.s();\n\n        case 4:\n          if ((_step = _iterator.n()).done) {\n            _context.next = 11;\n            break;\n          }\n\n          value = _step.value;\n\n          if (!(value != null && (value = +value) >= value)) {\n            _context.next = 9;\n            break;\n          }\n\n          _context.next = 9;\n          return value;\n\n        case 9:\n          _context.next = 4;\n          break;\n\n        case 11:\n          _context.next = 16;\n          break;\n\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](2);\n\n          _iterator.e(_context.t0);\n\n        case 16:\n          _context.prev = 16;\n\n          _iterator.f();\n\n          return _context.finish(16);\n\n        case 19:\n          _context.next = 40;\n          break;\n\n        case 21:\n          index = -1;\n          _iterator2 = _createForOfIteratorHelper(values);\n          _context.prev = 23;\n\n          _iterator2.s();\n\n        case 25:\n          if ((_step2 = _iterator2.n()).done) {\n            _context.next = 32;\n            break;\n          }\n\n          _value = _step2.value;\n\n          if (!((_value = valueof(_value, ++index, values)) != null && (_value = +_value) >= _value)) {\n            _context.next = 30;\n            break;\n          }\n\n          _context.next = 30;\n          return _value;\n\n        case 30:\n          _context.next = 25;\n          break;\n\n        case 32:\n          _context.next = 37;\n          break;\n\n        case 34:\n          _context.prev = 34;\n          _context.t1 = _context[\"catch\"](23);\n\n          _iterator2.e(_context.t1);\n\n        case 37:\n          _context.prev = 37;\n\n          _iterator2.f();\n\n          return _context.finish(37);\n\n        case 40:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[2, 13, 16, 19], [23, 34, 37, 40]]);\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","var DEGREES_TO_RADIANS = Math.PI / 180;\nvar DAY_IN_MS = 1000 * 60 * 60 * 24;\nvar JD1970 = 2440588;\nvar JD2000 = 2451545;\nvar e = DEGREES_TO_RADIANS * 23.4397;\nvar M0 = 357.5291;\nvar M1 = 0.98560028;\nvar THETA0 = 280.147;\nvar THETA1 = 360.9856235;\nexport function getSolarPosition(timestamp, latitude, longitude) {\n  var longitudeWestInRadians = DEGREES_TO_RADIANS * -longitude;\n  var phi = DEGREES_TO_RADIANS * latitude;\n  var d = toDays(timestamp);\n  var c = getSunCoords(d);\n  var H = getSiderealTime(d, longitudeWestInRadians) - c.rightAscension;\n  return {\n    azimuth: getAzimuth(H, phi, c.declination),\n    altitude: getAltitude(H, phi, c.declination)\n  };\n}\nexport function getSunlightDirection(timestamp, latitude, longitude) {\n  var _getSolarPosition = getSolarPosition(timestamp, latitude, longitude),\n      azimuth = _getSolarPosition.azimuth,\n      altitude = _getSolarPosition.altitude;\n\n  var azimuthN = azimuth + Math.PI;\n  return [-Math.sin(azimuthN), -Math.cos(azimuthN), -Math.sin(altitude)];\n}\n\nfunction toJulianDay(timestamp) {\n  return timestamp / DAY_IN_MS - 0.5 + JD1970;\n}\n\nfunction toDays(timestamp) {\n  return toJulianDay(timestamp) - JD2000;\n}\n\nfunction getRightAscension(eclipticLongitude, b) {\n  var lambda = eclipticLongitude;\n  return Math.atan2(Math.sin(lambda) * Math.cos(e) - Math.tan(b) * Math.sin(e), Math.cos(lambda));\n}\n\nfunction getDeclination(eclipticLongitude, b) {\n  var lambda = eclipticLongitude;\n  return Math.asin(Math.sin(b) * Math.cos(e) + Math.cos(b) * Math.sin(e) * Math.sin(lambda));\n}\n\nfunction getAzimuth(hourAngle, latitudeInRadians, declination) {\n  var H = hourAngle;\n  var phi = latitudeInRadians;\n  var delta = declination;\n  return Math.atan2(Math.sin(H), Math.cos(H) * Math.sin(phi) - Math.tan(delta) * Math.cos(phi));\n}\n\nfunction getAltitude(hourAngle, latitudeInRadians, declination) {\n  var H = hourAngle;\n  var phi = latitudeInRadians;\n  var delta = declination;\n  return Math.asin(Math.sin(phi) * Math.sin(delta) + Math.cos(phi) * Math.cos(delta) * Math.cos(H));\n}\n\nfunction getSiderealTime(dates, longitudeWestInRadians) {\n  return DEGREES_TO_RADIANS * (THETA0 + THETA1 * dates) - longitudeWestInRadians;\n}\n\nfunction getSolarMeanAnomaly(days) {\n  return DEGREES_TO_RADIANS * (M0 + M1 * days);\n}\n\nfunction getEclipticLongitude(meanAnomaly) {\n  var M = meanAnomaly;\n  var C = DEGREES_TO_RADIANS * (1.9148 * Math.sin(M) + 0.02 * Math.sin(2 * M) + 0.0003 * Math.sin(3 * M));\n  var P = DEGREES_TO_RADIANS * 102.9372;\n  return M + C + P + Math.PI;\n}\n\nfunction getSunCoords(dates) {\n  var M = getSolarMeanAnomaly(dates);\n  var L = getEclipticLongitude(M);\n  return {\n    declination: getDeclination(L, 0),\n    rightAscension: getRightAscension(L, 0)\n  };\n}","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { DirectionalLight } from './directional-light';\nimport { getSunlightDirection } from './suncalc';\n\nvar SunLight = function (_DirectionalLight) {\n  _inherits(SunLight, _DirectionalLight);\n\n  function SunLight(_ref) {\n    var _this;\n\n    var timestamp = _ref.timestamp,\n        others = _objectWithoutProperties(_ref, [\"timestamp\"]);\n\n    _classCallCheck(this, SunLight);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SunLight).call(this, others));\n    _this.timestamp = timestamp;\n    return _this;\n  }\n\n  _createClass(SunLight, [{\n    key: \"getProjectedLight\",\n    value: function getProjectedLight(_ref2) {\n      var layer = _ref2.layer;\n      var _layer$context$viewpo = layer.context.viewport,\n          latitude = _layer$context$viewpo.latitude,\n          longitude = _layer$context$viewpo.longitude;\n      this.direction = getSunlightDirection(this.timestamp, latitude, longitude);\n      return this;\n    }\n  }]);\n\n  return SunLight;\n}(DirectionalLight);\n\nexport { SunLight as default };","import DeckGLLayer from 'maptalks.deckgl';\nimport {GeoJsonLayer, PolygonLayer} from '@deck.gl/layers';\nimport {LightingEffect, AmbientLight, _SunLight as SunLight} from '@deck.gl/core';\nimport Base from \"./base\";\nimport React from \"react\";\nimport {scaleThreshold} from 'd3-scale';\n\n\n// Source data GeoJSON\nconst DATA_URL =\n  'https://raw.githubusercontent.com/visgl/deck.gl-data/master/examples/geojson/vancouver-blocks.json'; // eslint-disable-line\n\nexport const COLOR_SCALE = scaleThreshold()\n  .domain([-0.6, -0.45, -0.3, -0.15, 0, 0.15, 0.3, 0.45, 0.6, 0.75, 0.9, 1.05, 1.2])\n  // @ts-ignore\n  .range([[65, 182, 196], [127, 205, 187], [199, 233, 180], [237, 248, 177], [255, 255, 204], [255, 237, 160], [254, 217, 118], [254, 178, 76], [253, 141, 60], [252, 78, 42], [227, 26, 28], [189, 0, 38], [128, 0, 38]]);\n\nconst ambientLight = new AmbientLight({\n  color: [255, 255, 255],\n  intensity: 1.0\n});\n\nconst dirLight = new SunLight({\n  timestamp: Date.UTC(2019, 7, 1, 22),\n  color: [255, 255, 255],\n  intensity: 1.0,\n  _shadow: true\n});\n\nconst landCover = [[[-123.0, 49.196], [-123.0, 49.324], [-123.306, 49.324], [-123.306, 49.196]]];\n\ninterface IProps {\n\n}\n\ninterface IState {\n  data: any;\n  x?: number;\n  y?: number;\n  hoveredObject?: any;\n}\n\nclass VancouverPolygon extends Base {\n  private deckLayer: DeckGLLayer | null;\n\n  state: IState = {\n    data: [],\n  }\n\n  constructor (props: IProps) {\n    super(props);\n    this.deckLayer = null;\n\n    this.viewState = {\n      center: [49.254, -123.13].reverse(),\n      zoom: 11,\n      pitch: 40.5,\n      bearing: 0,\n    };\n  }\n\n  initMap() {\n    super.initMap();\n    this._renderLayers();\n  }\n\n  componentWillUnmount () {\n    // this.map.remove()\n    if (this.deckLayer) {\n      // @ts-ignore\n      this.deckLayer.remove()\n    }\n    super.componentWillUnmount();\n  }\n\n  onHover = ({ x, y, object }: any) => {\n    this.setState({ x, y, hoveredObject: object });\n  }\n\n  renderTooltip () {\n    const { x, y, hoveredObject } = this.state;\n    return (\n      hoveredObject && (\n        <div className=\"tooltip\" style={{ top: y, left: x }}>\n          <div>\n            <b>Average Property Value</b>\n          </div>\n          <div>\n            <div>${hoveredObject.properties.valuePerParcel} / parcel</div>\n            <div>\n              ${hoveredObject.properties.valuePerSqm} / m<sup>2</sup>\n            </div>\n          </div>\n          <div>\n            <b>Growth</b>\n          </div>\n          <div>{Math.round(hoveredObject.properties.growth * 100)}%</div>\n        </div>\n      )\n    );\n  }\n\n  _renderLayers () {\n    const lightingEffect = new LightingEffect({ambientLight, dirLight});\n    lightingEffect.shadowColor = [0, 0, 0, 0.5];\n\n    const props = {\n      layers: [\n        // only needed when using shadows - a plane for shadows to drop on\n        new PolygonLayer({\n          id: 'ground',\n          data: landCover,\n          stroked: false,\n          getPolygon: (f: any) => f,\n          getFillColor: [0, 0, 0, 0]\n        }),\n        new GeoJsonLayer({\n          id: 'geojson',\n          data: DATA_URL,\n          opacity: 0.8,\n          stroked: false,\n          filled: true,\n          extruded: true,\n          wireframe: true,\n          getElevation: (f: { properties: { valuePerSqm: number; }; }) => Math.sqrt(f.properties.valuePerSqm) * 10,\n          getFillColor: (f: { properties: { growth: number; }; }) => COLOR_SCALE(f.properties.growth),\n          getLineColor: [255, 255, 255],\n          pickable: true,\n          onHover: this.onHover,\n        })\n      ],\n      effects: [lightingEffect]\n    }\n    if (!this.deckLayer) {\n      this.deckLayer = new DeckGLLayer('deck', props, {\n        animation: true,\n        forceRenderOnMoving: true,\n        forceRenderOnZooming: true,\n        renderStart: () => {\n          this.renderState?.update();\n        },\n      });\n\n      this.map.addLayer(this.deckLayer);\n    } else {\n      this.deckLayer.setProps(props);\n    }\n  }\n}\n\nexport default VancouverPolygon;\n"],"sourceRoot":""}